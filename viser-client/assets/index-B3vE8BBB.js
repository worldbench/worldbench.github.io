function B7(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zre(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var F7={exports:{}},fC={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qre=Symbol.for("react.transitional.element"),eae=Symbol.for("react.fragment");function z7(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:Qre,type:t,key:i,ref:e!==void 0?e:null,props:n}}fC.Fragment=eae;fC.jsx=z7;fC.jsxs=z7;F7.exports=fC;var R=F7.exports;const tae=Cc(R),nae=B7({__proto__:null,default:tae},[R]);var j7={exports:{}},hC={},H7={exports:{}},V7={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,F){var q=U.length;U.push(F);e:for(;0<q;){var X=q-1>>>1,z=U[X];if(0<r(z,F))U[X]=F,U[q]=z,q=X;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var F=U[0],q=U.pop();if(q!==F){U[0]=q;e:for(var X=0,z=U.length,ce=z>>>1;X<ce;){var he=2*(X+1)-1,$=U[he],Me=he+1,Se=U[Me];if(0>r($,q))Me<z&&0>r(Se,$)?(U[X]=Se,U[Me]=q,X=Me):(U[X]=$,U[he]=q,X=he);else if(Me<z&&0>r(Se,q))U[X]=Se,U[Me]=q,X=Me;else break e}}return F}function r(U,F){var q=U.sortIndex-F.sortIndex;return q!==0?q:U.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,f=null,h=3,d=!1,m=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function E(U){for(var F=n(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=U)i(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function T(U){if(y=!1,E(U),!m)if(n(l)!==null)m=!0,w||(w=!0,B());else{var F=n(c);F!==null&&V(T,F.startTime-U)}}var w=!1,A=-1,C=5,D=-1;function k(){return v?!0:!(t.unstable_now()-D<C)}function P(){if(v=!1,w){var U=t.unstable_now();D=U;var F=!0;try{e:{m=!1,y&&(y=!1,x(A),A=-1),d=!0;var q=h;try{t:{for(E(U),f=n(l);f!==null&&!(f.expirationTime>U&&k());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var z=X(f.expirationTime<=U);if(U=t.unstable_now(),typeof z=="function"){f.callback=z,E(U),F=!0;break t}f===n(l)&&i(l),E(U)}else i(l);f=n(l)}if(f!==null)F=!0;else{var ce=n(c);ce!==null&&V(T,ce.startTime-U),F=!1}}break e}finally{f=null,h=q,d=!1}F=void 0}}finally{F?B():w=!1}}}var B;if(typeof _=="function")B=function(){_(P)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=P,B=function(){G.postMessage(null)}}else B=function(){g(P,0)};function V(U,F){A=g(function(){U(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var q=h;h=F;try{return U()}finally{h=q}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=h;h=U;try{return F()}finally{h=q}},t.unstable_scheduleCallback=function(U,F,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,U){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=q+z,U={id:u++,callback:F,priorityLevel:U,startTime:q,expirationTime:z,sortIndex:-1},q>X?(U.sortIndex=q,e(c,U),n(l)===null&&U===n(c)&&(y?(x(A),A=-1):y=!0,V(T,q-X))):(U.sortIndex=z,e(l,U),m||d||(m=!0,w||(w=!0,B()))),U},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(U){var F=h;return function(){var q=h;h=F;try{return U.apply(this,arguments)}finally{h=q}}}})(V7);H7.exports=V7;var iae=H7.exports,G7={exports:{}},ri={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JP=Symbol.for("react.transitional.element"),rae=Symbol.for("react.portal"),aae=Symbol.for("react.fragment"),sae=Symbol.for("react.strict_mode"),oae=Symbol.for("react.profiler"),lae=Symbol.for("react.consumer"),cae=Symbol.for("react.context"),uae=Symbol.for("react.forward_ref"),fae=Symbol.for("react.suspense"),hae=Symbol.for("react.memo"),W7=Symbol.for("react.lazy"),O8=Symbol.iterator;function dae(t){return t===null||typeof t!="object"?null:(t=O8&&t[O8]||t["@@iterator"],typeof t=="function"?t:null)}var q7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X7=Object.assign,Y7={};function Wy(t,e,n){this.props=t,this.context=e,this.refs=Y7,this.updater=n||q7}Wy.prototype.isReactComponent={};Wy.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wy.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $7(){}$7.prototype=Wy.prototype;function ZP(t,e,n){this.props=t,this.context=e,this.refs=Y7,this.updater=n||q7}var QP=ZP.prototype=new $7;QP.constructor=ZP;X7(QP,Wy.prototype);QP.isPureReactComponent=!0;var I8=Array.isArray,Hr={H:null,A:null,T:null,S:null,V:null},K7=Object.prototype.hasOwnProperty;function eL(t,e,n,i,r,a){return n=a.ref,{$$typeof:JP,type:t,key:e,ref:n!==void 0?n:null,props:a}}function pae(t,e){return eL(t.type,e,void 0,void 0,void 0,t.props)}function tL(t){return typeof t=="object"&&t!==null&&t.$$typeof===JP}function mae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N8=/\/+/g;function T3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mae(""+t.key):e.toString(36)}function P8(){}function gae(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(P8,P8):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function s0(t,e,n,i,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case JP:case rae:s=!0;break;case W7:return s=t._init,s0(s(t._payload),e,n,i,r)}}if(s)return r=r(t),s=i===""?"."+T3(t,0):i,I8(r)?(n="",s!=null&&(n=s.replace(N8,"$&/")+"/"),s0(r,e,n,"",function(c){return c})):r!=null&&(tL(r)&&(r=pae(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(N8,"$&/")+"/")+s)),e.push(r)),1;s=0;var o=i===""?".":i+":";if(I8(t))for(var l=0;l<t.length;l++)i=t[l],a=o+T3(i,l),s+=s0(i,e,n,a,r);else if(l=dae(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,a=o+T3(i,l++),s+=s0(i,e,n,a,r);else if(a==="object"){if(typeof t.then=="function")return s0(gae(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function sw(t,e,n){if(t==null)return t;var i=[],r=0;return s0(t,i,"","",function(a){return e.call(n,a,r++)}),i}function bae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var L8=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function yae(){}ri.Children={map:sw,forEach:function(t,e,n){sw(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sw(t,function(){e++}),e},toArray:function(t){return sw(t,function(e){return e})||[]},only:function(t){if(!tL(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ri.Component=Wy;ri.Fragment=aae;ri.Profiler=oae;ri.PureComponent=ZP;ri.StrictMode=sae;ri.Suspense=fae;ri.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Hr;ri.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Hr.H.useMemoCache(t)}};ri.cache=function(t){return function(){return t.apply(null,arguments)}};ri.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=X7({},t.props),r=t.key,a=void 0;if(e!=null)for(s in e.ref!==void 0&&(a=void 0),e.key!==void 0&&(r=""+e.key),e)!K7.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}return eL(t.type,r,void 0,void 0,a,i)};ri.createContext=function(t){return t={$$typeof:cae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:lae,_context:t},t};ri.createElement=function(t,e,n){var i,r={},a=null;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)K7.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in s=t.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return eL(t,a,void 0,void 0,null,r)};ri.createRef=function(){return{current:null}};ri.forwardRef=function(t){return{$$typeof:uae,render:t}};ri.isValidElement=tL;ri.lazy=function(t){return{$$typeof:W7,_payload:{_status:-1,_result:t},_init:bae}};ri.memo=function(t,e){return{$$typeof:hae,type:t,compare:e===void 0?null:e}};ri.startTransition=function(t){var e=Hr.T,n={};Hr.T=n;try{var i=t(),r=Hr.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(yae,L8)}catch(a){L8(a)}finally{Hr.T=e}};ri.unstable_useCacheRefresh=function(){return Hr.H.useCacheRefresh()};ri.use=function(t){return Hr.H.use(t)};ri.useActionState=function(t,e,n){return Hr.H.useActionState(t,e,n)};ri.useCallback=function(t,e){return Hr.H.useCallback(t,e)};ri.useContext=function(t){return Hr.H.useContext(t)};ri.useDebugValue=function(){};ri.useDeferredValue=function(t,e){return Hr.H.useDeferredValue(t,e)};ri.useEffect=function(t,e,n){var i=Hr.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};ri.useId=function(){return Hr.H.useId()};ri.useImperativeHandle=function(t,e,n){return Hr.H.useImperativeHandle(t,e,n)};ri.useInsertionEffect=function(t,e){return Hr.H.useInsertionEffect(t,e)};ri.useLayoutEffect=function(t,e){return Hr.H.useLayoutEffect(t,e)};ri.useMemo=function(t,e){return Hr.H.useMemo(t,e)};ri.useOptimistic=function(t,e){return Hr.H.useOptimistic(t,e)};ri.useReducer=function(t,e,n){return Hr.H.useReducer(t,e,n)};ri.useRef=function(t){return Hr.H.useRef(t)};ri.useState=function(t){return Hr.H.useState(t)};ri.useSyncExternalStore=function(t,e,n){return Hr.H.useSyncExternalStore(t,e,n)};ri.useTransition=function(){return Hr.H.useTransition()};ri.version="19.1.1";G7.exports=ri;var I=G7.exports;const ke=Cc(I),vae=B7({__proto__:null,default:ke},[I]);var J7={exports:{}},vo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xae=I;function Z7(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qh(){}var mo={d:{f:Qh,r:function(){throw Error(Z7(522))},D:Qh,C:Qh,L:Qh,m:Qh,X:Qh,S:Qh,M:Qh},p:0,findDOMNode:null},_ae=Symbol.for("react.portal");function Sae(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_ae,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var c1=xae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function dC(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}vo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mo;vo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Z7(299));return Sae(t,e,null,n)};vo.flushSync=function(t){var e=c1.T,n=mo.p;try{if(c1.T=null,mo.p=2,t)return t()}finally{c1.T=e,mo.p=n,mo.d.f()}};vo.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,mo.d.C(t,e))};vo.prefetchDNS=function(t){typeof t=="string"&&mo.d.D(t)};vo.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=dC(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?mo.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):n==="script"&&mo.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};vo.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=dC(e.as,e.crossOrigin);mo.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&mo.d.M(t)};vo.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=dC(n,e.crossOrigin);mo.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};vo.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=dC(e.as,e.crossOrigin);mo.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else mo.d.m(t)};vo.requestFormReset=function(t){mo.d.r(t)};vo.unstable_batchedUpdates=function(t,e){return t(e)};vo.useFormState=function(t,e,n){return c1.H.useFormState(t,e,n)};vo.useFormStatus=function(){return c1.H.useHostTransitionStatus()};vo.version="19.1.1";function Q7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q7)}catch(t){console.error(t)}}Q7(),J7.exports=vo;var I_=J7.exports;const qx=Cc(I_);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ua=iae,eW=I,wae=I_;function kt(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function tW(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function N_(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U8(t){if(N_(t)!==t)throw Error(kt(188))}function Eae(t){var e=t.alternate;if(!e){if(e=N_(t),e===null)throw Error(kt(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return U8(r),t;if(a===i)return U8(r),e;a=a.sibling}throw Error(kt(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,o=r.child;o;){if(o===n){s=!0,n=r,i=a;break}if(o===i){s=!0,i=r,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,i=r;break}if(o===i){s=!0,i=a,n=r;break}o=o.sibling}if(!s)throw Error(kt(189))}}if(n.alternate!==i)throw Error(kt(190))}if(n.tag!==3)throw Error(kt(188));return n.stateNode.current===n?t:e}function iW(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=iW(t),e!==null)return e;t=t.sibling}return null}var Lr=Object.assign,Mae=Symbol.for("react.element"),ow=Symbol.for("react.transitional.element"),Xx=Symbol.for("react.portal"),m0=Symbol.for("react.fragment"),rW=Symbol.for("react.strict_mode"),oI=Symbol.for("react.profiler"),Tae=Symbol.for("react.provider"),aW=Symbol.for("react.consumer"),Qf=Symbol.for("react.context"),nL=Symbol.for("react.forward_ref"),lI=Symbol.for("react.suspense"),cI=Symbol.for("react.suspense_list"),iL=Symbol.for("react.memo"),bd=Symbol.for("react.lazy"),uI=Symbol.for("react.activity"),Aae=Symbol.for("react.memo_cache_sentinel"),B8=Symbol.iterator;function Xv(t){return t===null||typeof t!="object"?null:(t=B8&&t[B8]||t["@@iterator"],typeof t=="function"?t:null)}var Cae=Symbol.for("react.client.reference");function fI(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Cae?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m0:return"Fragment";case oI:return"Profiler";case rW:return"StrictMode";case lI:return"Suspense";case cI:return"SuspenseList";case uI:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Xx:return"Portal";case Qf:return(t.displayName||"Context")+".Provider";case aW:return(t._context.displayName||"Context")+".Consumer";case nL:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iL:return e=t.displayName||null,e!==null?e:fI(t.type)||"Memo";case bd:e=t._payload,t=t._init;try{return fI(t(e))}catch{}}return null}var Yx=Array.isArray,In=eW.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qi=wae.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Bm={pending:!1,data:null,method:null,action:null},hI=[],g0=-1;function gf(t){return{current:t}}function Qa(t){0>g0||(t.current=hI[g0],hI[g0]=null,g0--)}function Vr(t,e){g0++,hI[g0]=t.current,t.current=e}var tf=gf(null),W1=gf(null),Fd=gf(null),aT=gf(null);function sT(t,e){switch(Vr(Fd,e),Vr(W1,t),Vr(tf,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Vz(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Vz(e),t=SX(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Qa(tf),Vr(tf,t)}function ry(){Qa(tf),Qa(W1),Qa(Fd)}function dI(t){t.memoizedState!==null&&Vr(aT,t);var e=tf.current,n=SX(e,t.type);e!==n&&(Vr(W1,t),Vr(tf,n))}function oT(t){W1.current===t&&(Qa(tf),Qa(W1)),aT.current===t&&(Qa(aT),t_._currentValue=Bm)}var pI=Object.prototype.hasOwnProperty,rL=Ua.unstable_scheduleCallback,A3=Ua.unstable_cancelCallback,Rae=Ua.unstable_shouldYield,kae=Ua.unstable_requestPaint,nf=Ua.unstable_now,Dae=Ua.unstable_getCurrentPriorityLevel,sW=Ua.unstable_ImmediatePriority,oW=Ua.unstable_UserBlockingPriority,lT=Ua.unstable_NormalPriority,Oae=Ua.unstable_LowPriority,lW=Ua.unstable_IdlePriority,Iae=Ua.log,Nae=Ua.unstable_setDisableYieldValue,P_=null,bl=null;function Dd(t){if(typeof Iae=="function"&&Nae(t),bl&&typeof bl.setStrictMode=="function")try{bl.setStrictMode(P_,t)}catch{}}var yl=Math.clz32?Math.clz32:Uae,Pae=Math.log,Lae=Math.LN2;function Uae(t){return t>>>=0,t===0?32:31-(Pae(t)/Lae|0)|0}var lw=256,cw=4194304;function cm(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function pC(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~a,i!==0?r=cm(i):(s&=o,s!==0?r=cm(s):n||(n=o&~t,n!==0&&(r=cm(n))))):(o=i&~a,o!==0?r=cm(o):s!==0?r=cm(s):n||(n=i&~t,n!==0&&(r=cm(n)))),r===0?0:e!==0&&e!==r&&!(e&a)&&(a=r&-r,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:r}function L_(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Bae(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cW(){var t=lw;return lw<<=1,!(lw&4194048)&&(lw=256),t}function uW(){var t=cw;return cw<<=1,!(cw&62914560)&&(cw=4194304),t}function C3(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function U_(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Fae(t,e,n,i,r,a){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=s&~n;0<n;){var u=31-yl(n),f=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(h!==null)for(c[u]=null,u=0;u<h.length;u++){var d=h[u];d!==null&&(d.lane&=-536870913)}n&=~f}i!==0&&fW(t,i,0),a!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function fW(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-yl(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function hW(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-yl(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function aL(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sL(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function dW(){var t=qi.p;return t!==0?t:(t=window.event,t===void 0?32:OX(t.type))}function zae(t,e){var n=qi.p;try{return qi.p=t,e()}finally{qi.p=n}}var sp=Math.random().toString(36).slice(2),Hs="__reactFiber$"+sp,Uo="__reactProps$"+sp,qy="__reactContainer$"+sp,mI="__reactEvents$"+sp,jae="__reactListeners$"+sp,Hae="__reactHandles$"+sp,F8="__reactResources$"+sp,B_="__reactMarker$"+sp;function oL(t){delete t[Hs],delete t[Uo],delete t[mI],delete t[jae],delete t[Hae]}function b0(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qy]||n[Hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qz(t);t!==null;){if(n=t[Hs])return n;t=qz(t)}return e}t=n,n=t.parentNode}return null}function Xy(t){if(t=t[Hs]||t[qy]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function $x(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(kt(33))}function I0(t){var e=t[F8];return e||(e=t[F8]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ka(t){t[B_]=!0}var pW=new Set,mW={};function vg(t,e){ay(t,e),ay(t+"Capture",e)}function ay(t,e){for(mW[t]=e,t=0;t<e.length;t++)pW.add(e[t])}var Vae=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),z8={},j8={};function Gae(t){return pI.call(j8,t)?!0:pI.call(z8,t)?!1:Vae.test(t)?j8[t]=!0:(z8[t]=!0,!1)}function TM(t,e,n){if(Gae(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function uw(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Lf(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var R3,H8;function o0(t){if(R3===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R3=e&&e[1]||"",H8=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+R3+t+H8}var k3=!1;function D3(t,e){if(!t||k3)return"";k3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(d){var h=d}Reflect.construct(t,[],f)}else{try{f.call()}catch(d){h=d}t.call(f.prototype)}}else{try{throw Error()}catch(d){h=d}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(d){if(d&&h&&typeof d.stack=="string")return[d.stack,h.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=r);break}}}finally{k3=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?o0(n):""}function Wae(t){switch(t.tag){case 26:case 27:case 5:return o0(t.type);case 16:return o0("Lazy");case 13:return o0("Suspense");case 19:return o0("SuspenseList");case 0:case 15:return D3(t.type,!1);case 11:return D3(t.type.render,!1);case 1:return D3(t.type,!0);case 31:return o0("Activity");default:return""}}function V8(t){try{var e="";do e+=Wae(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function nc(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qae(t){var e=gW(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cT(t){t._valueTracker||(t._valueTracker=qae(t))}function bW(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=gW(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function uT(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Xae=/[\n"\\]/g;function sc(t){return t.replace(Xae,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gI(t,e,n,i,r,a,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+nc(e)):t.value!==""+nc(e)&&(t.value=""+nc(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?bI(t,s,nc(e)):n!=null?bI(t,s,nc(n)):i!=null&&t.removeAttribute("value"),r==null&&a!=null&&(t.defaultChecked=!!a),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+nc(o):t.removeAttribute("name")}function yW(t,e,n,i,r,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null))return;n=n!=null?""+nc(n):"",e=e!=null?""+nc(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s)}function bI(t,e,n){e==="number"&&uT(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function N0(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+nc(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function vW(t,e,n){if(e!=null&&(e=""+nc(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+nc(n):""}function xW(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(kt(92));if(Yx(i)){if(1<i.length)throw Error(kt(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=nc(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function sy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yae=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function G8(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||Yae.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function _W(t,e,n){if(e!=null&&typeof e!="object")throw Error(kt(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&G8(t,r,i)}else for(var a in e)e.hasOwnProperty(a)&&G8(t,a,e[a])}function lL(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $ae=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kae=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function AM(t){return Kae.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var yI=null;function cL(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var y0=null,P0=null;function W8(t){var e=Xy(t);if(e&&(t=e.stateNode)){var n=t[Uo]||null;e:switch(t=e.stateNode,e.type){case"input":if(gI(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+sc(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Uo]||null;if(!r)throw Error(kt(90));gI(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&bW(i)}break e;case"textarea":vW(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&N0(t,!!n.multiple,e,!1)}}}var O3=!1;function SW(t,e,n){if(O3)return t(e,n);O3=!0;try{var i=t(e);return i}finally{if(O3=!1,(y0!==null||P0!==null)&&(EC(),y0&&(e=y0,t=P0,P0=y0=null,W8(e),t)))for(e=0;e<t.length;e++)W8(t[e])}}function q1(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Uo]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(kt(231,e,typeof n));return n}var gh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vI=!1;if(gh)try{var Yv={};Object.defineProperty(Yv,"passive",{get:function(){vI=!0}}),window.addEventListener("test",Yv,Yv),window.removeEventListener("test",Yv,Yv)}catch{vI=!1}var Od=null,uL=null,CM=null;function wW(){if(CM)return CM;var t,e=uL,n=e.length,i,r="value"in Od?Od.value:Od.textContent,a=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[a-i];i++);return CM=r.slice(t,1<i?1-i:void 0)}function RM(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fw(){return!0}function q8(){return!1}function Fo(t){function e(n,i,r,a,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?fw:q8,this.isPropagationStopped=q8,this}return Lr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fw)},persist:function(){},isPersistent:fw}),e}var xg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mC=Fo(xg),F_=Lr({},xg,{view:0,detail:0}),Jae=Fo(F_),I3,N3,$v,gC=Lr({},F_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fL,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$v&&($v&&t.type==="mousemove"?(I3=t.screenX-$v.screenX,N3=t.screenY-$v.screenY):N3=I3=0,$v=t),I3)},movementY:function(t){return"movementY"in t?t.movementY:N3}}),X8=Fo(gC),Zae=Lr({},gC,{dataTransfer:0}),Qae=Fo(Zae),ese=Lr({},F_,{relatedTarget:0}),P3=Fo(ese),tse=Lr({},xg,{animationName:0,elapsedTime:0,pseudoElement:0}),nse=Fo(tse),ise=Lr({},xg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rse=Fo(ise),ase=Lr({},xg,{data:0}),Y8=Fo(ase),sse={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ose={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cse(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lse[t])?!!e[t]:!1}function fL(){return cse}var use=Lr({},F_,{key:function(t){if(t.key){var e=sse[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=RM(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ose[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fL,charCode:function(t){return t.type==="keypress"?RM(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?RM(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fse=Fo(use),hse=Lr({},gC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$8=Fo(hse),dse=Lr({},F_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fL}),pse=Fo(dse),mse=Lr({},xg,{propertyName:0,elapsedTime:0,pseudoElement:0}),gse=Fo(mse),bse=Lr({},gC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yse=Fo(bse),vse=Lr({},xg,{newState:0,oldState:0}),xse=Fo(vse),_se=[9,13,27,32],hL=gh&&"CompositionEvent"in window,u1=null;gh&&"documentMode"in document&&(u1=document.documentMode);var Sse=gh&&"TextEvent"in window&&!u1,EW=gh&&(!hL||u1&&8<u1&&11>=u1),K8=" ",J8=!1;function MW(t,e){switch(t){case"keyup":return _se.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var v0=!1;function wse(t,e){switch(t){case"compositionend":return TW(e);case"keypress":return e.which!==32?null:(J8=!0,K8);case"textInput":return t=e.data,t===K8&&J8?null:t;default:return null}}function Ese(t,e){if(v0)return t==="compositionend"||!hL&&MW(t,e)?(t=wW(),CM=uL=Od=null,v0=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EW&&e.locale!=="ko"?null:e.data;default:return null}}var Mse={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Mse[t.type]:e==="textarea"}function AW(t,e,n,i){y0?P0?P0.push(i):P0=[i]:y0=i,e=CT(e,"onChange"),0<e.length&&(n=new mC("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var f1=null,X1=null;function Tse(t){vX(t,0)}function bC(t){var e=$x(t);if(bW(e))return t}function Q8(t,e){if(t==="change")return e}var CW=!1;if(gh){var L3;if(gh){var U3="oninput"in document;if(!U3){var ez=document.createElement("div");ez.setAttribute("oninput","return;"),U3=typeof ez.oninput=="function"}L3=U3}else L3=!1;CW=L3&&(!document.documentMode||9<document.documentMode)}function tz(){f1&&(f1.detachEvent("onpropertychange",RW),X1=f1=null)}function RW(t){if(t.propertyName==="value"&&bC(X1)){var e=[];AW(e,X1,t,cL(t)),SW(Tse,e)}}function Ase(t,e,n){t==="focusin"?(tz(),f1=e,X1=n,f1.attachEvent("onpropertychange",RW)):t==="focusout"&&tz()}function Cse(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bC(X1)}function Rse(t,e){if(t==="click")return bC(e)}function kse(t,e){if(t==="input"||t==="change")return bC(e)}function Dse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var El=typeof Object.is=="function"?Object.is:Dse;function Y1(t,e){if(El(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!pI.call(e,r)||!El(t[r],e[r]))return!1}return!0}function nz(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iz(t,e){var n=nz(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nz(n)}}function kW(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kW(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DW(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=uT(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uT(t.document)}return e}function dL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Ose=gh&&"documentMode"in document&&11>=document.documentMode,x0=null,xI=null,h1=null,_I=!1;function rz(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_I||x0==null||x0!==uT(i)||(i=x0,"selectionStart"in i&&dL(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),h1&&Y1(h1,i)||(h1=i,i=CT(xI,"onSelect"),0<i.length&&(e=new mC("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=x0)))}function Bp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _0={animationend:Bp("Animation","AnimationEnd"),animationiteration:Bp("Animation","AnimationIteration"),animationstart:Bp("Animation","AnimationStart"),transitionrun:Bp("Transition","TransitionRun"),transitionstart:Bp("Transition","TransitionStart"),transitioncancel:Bp("Transition","TransitionCancel"),transitionend:Bp("Transition","TransitionEnd")},B3={},OW={};gh&&(OW=document.createElement("div").style,"AnimationEvent"in window||(delete _0.animationend.animation,delete _0.animationiteration.animation,delete _0.animationstart.animation),"TransitionEvent"in window||delete _0.transitionend.transition);function _g(t){if(B3[t])return B3[t];if(!_0[t])return t;var e=_0[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OW)return B3[t]=e[n];return t}var IW=_g("animationend"),NW=_g("animationiteration"),PW=_g("animationstart"),Ise=_g("transitionrun"),Nse=_g("transitionstart"),Pse=_g("transitioncancel"),LW=_g("transitionend"),UW=new Map,SI="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");SI.push("scrollEnd");function wu(t,e){UW.set(t,e),vg(e,[t])}var az=new WeakMap;function oc(t,e){if(typeof t=="object"&&t!==null){var n=az.get(t);return n!==void 0?n:(e={value:t,source:e,stack:V8(e)},az.set(t,e),e)}return{value:t,source:e,stack:V8(e)}}var Zl=[],S0=0,pL=0;function yC(){for(var t=S0,e=pL=S0=0;e<t;){var n=Zl[e];Zl[e++]=null;var i=Zl[e];Zl[e++]=null;var r=Zl[e];Zl[e++]=null;var a=Zl[e];if(Zl[e++]=null,i!==null&&r!==null){var s=i.pending;s===null?r.next=r:(r.next=s.next,s.next=r),i.pending=r}a!==0&&BW(n,r,a)}}function vC(t,e,n,i){Zl[S0++]=t,Zl[S0++]=e,Zl[S0++]=n,Zl[S0++]=i,pL|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function mL(t,e,n,i){return vC(t,e,n,i),fT(t)}function Yy(t,e){return vC(t,null,null,e),fT(t)}function BW(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,a=t.return;a!==null;)a.childLanes|=n,i=a.alternate,i!==null&&(i.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(r=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,r&&e!==null&&(r=31-yl(n),t=a.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),a):null}function fT(t){if(50<S1)throw S1=0,VI=null,Error(kt(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var w0={};function Lse(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dl(t,e,n,i){return new Lse(t,e,n,i)}function gL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ch(t,e){var n=t.alternate;return n===null?(n=dl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function FW(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function kM(t,e,n,i,r,a){var s=0;if(i=t,typeof t=="function")gL(t)&&(s=1);else if(typeof t=="string")s=Boe(t,n,tf.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case uI:return t=dl(31,n,e,r),t.elementType=uI,t.lanes=a,t;case m0:return Fm(n.children,r,a,e);case rW:s=8,r|=24;break;case oI:return t=dl(12,n,e,r|2),t.elementType=oI,t.lanes=a,t;case lI:return t=dl(13,n,e,r),t.elementType=lI,t.lanes=a,t;case cI:return t=dl(19,n,e,r),t.elementType=cI,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tae:case Qf:s=10;break e;case aW:s=9;break e;case nL:s=11;break e;case iL:s=14;break e;case bd:s=16,i=null;break e}s=29,n=Error(kt(130,t===null?"null":typeof t,"")),i=null}return e=dl(s,n,e,r),e.elementType=t,e.type=i,e.lanes=a,e}function Fm(t,e,n,i){return t=dl(7,t,i,e),t.lanes=n,t}function F3(t,e,n){return t=dl(6,t,null,e),t.lanes=n,t}function z3(t,e,n){return e=dl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var E0=[],M0=0,hT=null,dT=0,ic=[],rc=0,zm=null,eh=1,th="";function um(t,e){E0[M0++]=dT,E0[M0++]=hT,hT=t,dT=e}function zW(t,e,n){ic[rc++]=eh,ic[rc++]=th,ic[rc++]=zm,zm=t;var i=eh;t=th;var r=32-yl(i)-1;i&=~(1<<r),n+=1;var a=32-yl(e)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,eh=1<<32-yl(e)+r|n<<r|i,th=a+t}else eh=1<<a|n<<r|i,th=t}function bL(t){t.return!==null&&(um(t,1),zW(t,1,0))}function yL(t){for(;t===hT;)hT=E0[--M0],E0[M0]=null,dT=E0[--M0],E0[M0]=null;for(;t===zm;)zm=ic[--rc],ic[rc]=null,th=ic[--rc],ic[rc]=null,eh=ic[--rc],ic[rc]=null}var fo=null,la=null,Vi=!1,jm=null,Xu=!1,wI=Error(kt(519));function ng(t){var e=Error(kt(418,""));throw $1(oc(e,t)),wI}function sz(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Hs]=t,e[Uo]=i,n){case"dialog":mi("cancel",e),mi("close",e);break;case"iframe":case"object":case"embed":mi("load",e);break;case"video":case"audio":for(n=0;n<Z1.length;n++)mi(Z1[n],e);break;case"source":mi("error",e);break;case"img":case"image":case"link":mi("error",e),mi("load",e);break;case"details":mi("toggle",e);break;case"input":mi("invalid",e),yW(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),cT(e);break;case"select":mi("invalid",e);break;case"textarea":mi("invalid",e),xW(e,i.value,i.defaultValue,i.children),cT(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||_X(e.textContent,n)?(i.popover!=null&&(mi("beforetoggle",e),mi("toggle",e)),i.onScroll!=null&&mi("scroll",e),i.onScrollEnd!=null&&mi("scrollend",e),i.onClick!=null&&(e.onclick=AC),e=!0):e=!1,e||ng(t)}function oz(t){for(fo=t.return;fo;)switch(fo.tag){case 5:case 13:Xu=!1;return;case 27:case 3:Xu=!0;return;default:fo=fo.return}}function Kv(t){if(t!==fo)return!1;if(!Vi)return oz(t),Vi=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||$I(t.type,t.memoizedProps)),n=!n),n&&la&&ng(t),oz(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(kt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){la=mu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}la=null}}else e===27?(e=la,op(t.type)?(t=ZI,ZI=null,la=t):la=e):la=fo?mu(t.stateNode.nextSibling):null;return!0}function z_(){la=fo=null,Vi=!1}function lz(){var t=jm;return t!==null&&(Do===null?Do=t:Do.push.apply(Do,t),jm=null),t}function $1(t){jm===null?jm=[t]:jm.push(t)}var EI=gf(null),Sg=null,nh=null;function Ed(t,e,n){Vr(EI,e._currentValue),e._currentValue=n}function uh(t){t._currentValue=EI.current,Qa(EI)}function MI(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function TI(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){var s=r.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),MI(a.return,n,t),i||(s=null);break e}a=o.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(kt(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),MI(s,n,t),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function j_(t,e,n,i){t=null;for(var r=e,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(kt(387));if(s=s.memoizedProps,s!==null){var o=r.type;El(r.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(r===aT.current){if(s=r.alternate,s===null)throw Error(kt(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(t_):t=[t_])}r=r.return}t!==null&&TI(e,t,n,i),e.flags|=262144}function pT(t){for(t=t.firstContext;t!==null;){if(!El(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ig(t){Sg=t,nh=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Vs(t){return jW(Sg,t)}function hw(t,e){return Sg===null&&ig(t),jW(t,e)}function jW(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},nh===null){if(t===null)throw Error(kt(308));nh=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else nh=nh.next=e;return n}var Use=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Bse=Ua.unstable_scheduleCallback,Fse=Ua.unstable_NormalPriority,Pa={$$typeof:Qf,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vL(){return{controller:new Use,data:new Map,refCount:0}}function H_(t){t.refCount--,t.refCount===0&&Bse(Fse,function(){t.controller.abort()})}var d1=null,AI=0,oy=0,L0=null;function zse(t,e){if(d1===null){var n=d1=[];AI=0,oy=HL(),L0={status:"pending",value:void 0,then:function(i){n.push(i)}}}return AI++,e.then(cz,cz),e}function cz(){if(--AI===0&&d1!==null){L0!==null&&(L0.status="fulfilled");var t=d1;d1=null,oy=0,L0=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function jse(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var uz=In.S;In.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&zse(t,e),uz!==null&&uz(t,e)};var Hm=gf(null);function xL(){var t=Hm.current;return t!==null?t:Ar.pooledCache}function DM(t,e){e===null?Vr(Hm,Hm.current):Vr(Hm,e.pool)}function HW(){var t=xL();return t===null?null:{parent:Pa._currentValue,pool:t}}var V_=Error(kt(460)),VW=Error(kt(474)),xC=Error(kt(542)),CI={then:function(){}};function fz(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dw(){}function GW(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(dw,dw),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,dz(t),t;default:if(typeof e.status=="string")e.then(dw,dw);else{if(t=Ar,t!==null&&100<t.shellSuspendCounter)throw Error(kt(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,dz(t),t}throw p1=e,V_}}var p1=null;function hz(){if(p1===null)throw Error(kt(459));var t=p1;return p1=null,t}function dz(t){if(t===V_||t===xC)throw Error(kt(483))}var yd=!1;function _L(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function RI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function zd(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function jd(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,lr&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=fT(t),BW(t,null,n),e}return vC(t,i,e,n),fT(t)}function m1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hW(t,n)}}function j3(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?r=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var kI=!1;function g1(){if(kI){var t=L0;if(t!==null)throw t}}function b1(t,e,n,i){kI=!1;var r=t.updateQueue;yd=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(a!==null){var f=r.baseState;s=0,u=c=l=null,o=a;do{var h=o.lane&-536870913,d=h!==o.lane;if(d?(Oi&h)===h:(i&h)===h){h!==0&&h===oy&&(kI=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=t,y=o;h=e;var v=n;switch(y.tag){case 1:if(m=y.payload,typeof m=="function"){f=m.call(v,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(v,f,h):m,h==null)break e;f=Lr({},f,h);break e;case 2:yd=!0}}h=o.callback,h!==null&&(t.flags|=64,d&&(t.flags|=8192),d=r.callbacks,d===null?r.callbacks=[h]:d.push(h))}else d={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,s|=h;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;d=o,o=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,a===null&&(r.shared.lanes=0),Jd|=s,t.lanes=s,t.memoizedState=f}}function WW(t,e){if(typeof t!="function")throw Error(kt(191,t));t.call(e)}function qW(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)WW(n[t],e)}var ly=gf(null),mT=gf(0);function pz(t,e){t=vh,Vr(mT,t),Vr(ly,e),vh=t|e.baseLanes}function DI(){Vr(mT,vh),Vr(ly,ly.current)}function SL(){vh=mT.current,Qa(ly),Qa(mT)}var $d=0,ci=null,dr=null,Ma=null,gT=!1,U0=!1,rg=!1,bT=0,K1=0,B0=null,Hse=0;function da(){throw Error(kt(321))}function wL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!El(t[n],e[n]))return!1;return!0}function EL(t,e,n,i,r,a){return $d=a,ci=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,In.H=t===null||t.memoizedState===null?wq:Eq,rg=!1,a=n(i,r),rg=!1,U0&&(a=YW(e,n,i,r)),XW(t),a}function XW(t){In.H=yT;var e=dr!==null&&dr.next!==null;if($d=0,Ma=dr=ci=null,gT=!1,K1=0,B0=null,e)throw Error(kt(300));t===null||Ja||(t=t.dependencies,t!==null&&pT(t)&&(Ja=!0))}function YW(t,e,n,i){ci=t;var r=0;do{if(U0&&(B0=null),K1=0,U0=!1,25<=r)throw Error(kt(301));if(r+=1,Ma=dr=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}In.H=$se,a=e(n,i)}while(U0);return a}function Vse(){var t=In.H,e=t.useState()[0];return e=typeof e.then=="function"?G_(e):e,t=t.useState()[0],(dr!==null?dr.memoizedState:null)!==t&&(ci.flags|=1024),e}function ML(){var t=bT!==0;return bT=0,t}function TL(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function AL(t){if(gT){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}gT=!1}$d=0,Ma=dr=ci=null,U0=!1,K1=bT=0,B0=null}function Ro(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ma===null?ci.memoizedState=Ma=t:Ma=Ma.next=t,Ma}function Ra(){if(dr===null){var t=ci.alternate;t=t!==null?t.memoizedState:null}else t=dr.next;var e=Ma===null?ci.memoizedState:Ma.next;if(e!==null)Ma=e,dr=t;else{if(t===null)throw ci.alternate===null?Error(kt(467)):Error(kt(310));dr=t,t={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},Ma===null?ci.memoizedState=Ma=t:Ma=Ma.next=t}return Ma}function CL(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function G_(t){var e=K1;return K1+=1,B0===null&&(B0=[]),t=GW(B0,t,e),e=ci,(Ma===null?e.memoizedState:Ma.next)===null&&(e=e.alternate,In.H=e===null||e.memoizedState===null?wq:Eq),t}function _C(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return G_(t);if(t.$$typeof===Qf)return Vs(t)}throw Error(kt(438,String(t)))}function RL(t){var e=null,n=ci.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ci.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=CL(),ci.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=Aae;return e.index++,n}function bh(t,e){return typeof e=="function"?e(t):e}function OM(t){var e=Ra();return kL(e,dr,t)}function kL(t,e,n){var i=t.queue;if(i===null)throw Error(kt(311));i.lastRenderedReducer=n;var r=t.baseQueue,a=i.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}e.baseQueue=r=a,i.pending=null}if(a=t.baseState,r===null)t.memoizedState=a;else{e=r.next;var o=s=null,l=null,c=e,u=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(Oi&f)===f:($d&f)===f){var h=c.revertLane;if(h===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===oy&&(u=!0);else if(($d&h)===h){c=c.next,h===oy&&(u=!0);continue}else f={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,s=a):l=l.next=f,ci.lanes|=h,Jd|=h;f=c.action,rg&&n(a,f),a=c.hasEagerState?c.eagerState:n(a,f)}else h={lane:f,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,s=a):l=l.next=h,ci.lanes|=f,Jd|=f;c=c.next}while(c!==null&&c!==e);if(l===null?s=a:l.next=o,!El(a,t.memoizedState)&&(Ja=!0,u&&(n=L0,n!==null)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=l,i.lastRenderedState=a}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function H3(t){var e=Ra(),n=e.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do a=t(a,s.action),s=s.next;while(s!==r);El(a,e.memoizedState)||(Ja=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function $W(t,e,n){var i=ci,r=Ra(),a=Vi;if(a){if(n===void 0)throw Error(kt(407));n=n()}else n=e();var s=!El((dr||r).memoizedState,n);s&&(r.memoizedState=n,Ja=!0),r=r.queue;var o=ZW.bind(null,i,r,t);if(W_(2048,8,o,[t]),r.getSnapshot!==e||s||Ma!==null&&Ma.memoizedState.tag&1){if(i.flags|=2048,cy(9,SC(),JW.bind(null,i,r,n,e),null),Ar===null)throw Error(kt(349));a||$d&124||KW(i,e,n)}return n}function KW(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ci.updateQueue,e===null?(e=CL(),ci.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function JW(t,e,n,i){e.value=n,e.getSnapshot=i,QW(e)&&eq(t)}function ZW(t,e,n){return n(function(){QW(e)&&eq(t)})}function QW(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!El(t,n)}catch{return!0}}function eq(t){var e=Yy(t,2);e!==null&&xl(e,t,2)}function OI(t){var e=Ro();if(typeof t=="function"){var n=t;if(t=n(),rg){Dd(!0);try{n()}finally{Dd(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:t},e}function tq(t,e,n,i){return t.baseState=n,kL(t,dr,typeof i=="function"?i:bh)}function Gse(t,e,n,i,r){if(wC(t))throw Error(kt(485));if(t=e.action,t!==null){var a={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};In.T!==null?n(!0):a.isTransition=!1,i(a),n=e.pending,n===null?(a.next=e.pending=a,nq(e,a)):(a.next=n.next,e.pending=n.next=a)}}function nq(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var a=In.T,s={};In.T=s;try{var o=n(r,i),l=In.S;l!==null&&l(s,o),mz(t,e,o)}catch(c){II(t,e,c)}finally{In.T=a}}else try{a=n(r,i),mz(t,e,a)}catch(c){II(t,e,c)}}function mz(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){gz(t,e,i)},function(i){return II(t,e,i)}):gz(t,e,n)}function gz(t,e,n){e.status="fulfilled",e.value=n,iq(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,nq(t,n)))}function II(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,iq(e),e=e.next;while(e!==i)}t.action=null}function iq(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function rq(t,e){return e}function bz(t,e){if(Vi){var n=Ar.formState;if(n!==null){e:{var i=ci;if(Vi){if(la){t:{for(var r=la,a=Xu;r.nodeType!==8;){if(!a){r=null;break t}if(r=mu(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){la=mu(r.nextSibling),i=r.data==="F!";break e}}ng(i)}i=!1}i&&(e=n[0])}}return n=Ro(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rq,lastRenderedState:e},n.queue=i,n=xq.bind(null,ci,i),i.dispatch=n,i=OI(!1),a=NL.bind(null,ci,!1,i.queue),i=Ro(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=Gse.bind(null,ci,r,a,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function yz(t){var e=Ra();return aq(e,dr,t)}function aq(t,e,n){if(e=kL(t,e,rq)[0],t=OM(bh)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=G_(e)}catch(s){throw s===V_?xC:s}else i=e;e=Ra();var r=e.queue,a=r.dispatch;return n!==e.memoizedState&&(ci.flags|=2048,cy(9,SC(),Wse.bind(null,r,n),null)),[i,a,t]}function Wse(t,e){t.action=e}function vz(t){var e=Ra(),n=dr;if(n!==null)return aq(e,n,t);Ra(),e=e.memoizedState,n=Ra();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function cy(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ci.updateQueue,e===null&&(e=CL(),ci.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function SC(){return{destroy:void 0,resource:void 0}}function sq(){return Ra().memoizedState}function IM(t,e,n,i){var r=Ro();i=i===void 0?null:i,ci.flags|=t,r.memoizedState=cy(1|e,SC(),n,i)}function W_(t,e,n,i){var r=Ra();i=i===void 0?null:i;var a=r.memoizedState.inst;dr!==null&&i!==null&&wL(i,dr.memoizedState.deps)?r.memoizedState=cy(e,a,n,i):(ci.flags|=t,r.memoizedState=cy(1|e,a,n,i))}function xz(t,e){IM(8390656,8,t,e)}function oq(t,e){W_(2048,8,t,e)}function lq(t,e){return W_(4,2,t,e)}function cq(t,e){return W_(4,4,t,e)}function uq(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fq(t,e,n){n=n!=null?n.concat([t]):null,W_(4,4,uq.bind(null,e,t),n)}function DL(){}function hq(t,e){var n=Ra();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&wL(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function dq(t,e){var n=Ra();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&wL(e,i[1]))return i[0];if(i=t(),rg){Dd(!0);try{t()}finally{Dd(!1)}}return n.memoizedState=[i,e],i}function OL(t,e,n){return n===void 0||$d&1073741824?t.memoizedState=e:(t.memoizedState=n,t=iX(),ci.lanes|=t,Jd|=t,n)}function pq(t,e,n,i){return El(n,e)?n:ly.current!==null?(t=OL(t,n,i),El(t,e)||(Ja=!0),t):$d&42?(t=iX(),ci.lanes|=t,Jd|=t,e):(Ja=!0,t.memoizedState=n)}function mq(t,e,n,i,r){var a=qi.p;qi.p=a!==0&&8>a?a:8;var s=In.T,o={};In.T=o,NL(t,!1,e,n);try{var l=r(),c=In.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=jse(l,i);y1(t,e,u,vl(t))}else y1(t,e,i,vl(t))}catch(f){y1(t,e,{then:function(){},status:"rejected",reason:f},vl())}finally{qi.p=a,In.T=s}}function qse(){}function NI(t,e,n,i){if(t.tag!==5)throw Error(kt(476));var r=gq(t).queue;mq(t,r,e,Bm,n===null?qse:function(){return bq(t),n(i)})}function gq(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Bm,baseState:Bm,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:Bm},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function bq(t){var e=gq(t).next.queue;y1(t,e,{},vl())}function IL(){return Vs(t_)}function yq(){return Ra().memoizedState}function vq(){return Ra().memoizedState}function Xse(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=vl();t=zd(n);var i=jd(e,t,n);i!==null&&(xl(i,e,n),m1(i,e,n)),e={cache:vL()},t.payload=e;return}e=e.return}}function Yse(t,e,n){var i=vl();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},wC(t)?_q(e,n):(n=mL(t,e,n,i),n!==null&&(xl(n,t,i),Sq(n,e,i)))}function xq(t,e,n){var i=vl();y1(t,e,n,i)}function y1(t,e,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(wC(t))_q(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(r.hasEagerState=!0,r.eagerState=o,El(o,s))return vC(t,e,r,0),Ar===null&&yC(),!1}catch{}finally{}if(n=mL(t,e,r,i),n!==null)return xl(n,t,i),Sq(n,e,i),!0}return!1}function NL(t,e,n,i){if(i={lane:2,revertLane:HL(),action:i,hasEagerState:!1,eagerState:null,next:null},wC(t)){if(e)throw Error(kt(479))}else e=mL(t,n,i,2),e!==null&&xl(e,t,2)}function wC(t){var e=t.alternate;return t===ci||e!==null&&e===ci}function _q(t,e){U0=gT=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sq(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hW(t,n)}}var yT={readContext:Vs,use:_C,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useLayoutEffect:da,useInsertionEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useSyncExternalStore:da,useId:da,useHostTransitionStatus:da,useFormState:da,useActionState:da,useOptimistic:da,useMemoCache:da,useCacheRefresh:da},wq={readContext:Vs,use:_C,useCallback:function(t,e){return Ro().memoizedState=[t,e===void 0?null:e],t},useContext:Vs,useEffect:xz,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,IM(4194308,4,uq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return IM(4194308,4,t,e)},useInsertionEffect:function(t,e){IM(4,2,t,e)},useMemo:function(t,e){var n=Ro();e=e===void 0?null:e;var i=t();if(rg){Dd(!0);try{t()}finally{Dd(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Ro();if(n!==void 0){var r=n(e);if(rg){Dd(!0);try{n(e)}finally{Dd(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=Yse.bind(null,ci,t),[i.memoizedState,t]},useRef:function(t){var e=Ro();return t={current:t},e.memoizedState=t},useState:function(t){t=OI(t);var e=t.queue,n=xq.bind(null,ci,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:DL,useDeferredValue:function(t,e){var n=Ro();return OL(n,t,e)},useTransition:function(){var t=OI(!1);return t=mq.bind(null,ci,t.queue,!0,!1),Ro().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ci,r=Ro();if(Vi){if(n===void 0)throw Error(kt(407));n=n()}else{if(n=e(),Ar===null)throw Error(kt(349));Oi&124||KW(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,xz(ZW.bind(null,i,a,t),[t]),i.flags|=2048,cy(9,SC(),JW.bind(null,i,a,n,e),null),n},useId:function(){var t=Ro(),e=Ar.identifierPrefix;if(Vi){var n=th,i=eh;n=(i&~(1<<32-yl(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=bT++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=Hse++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:IL,useFormState:bz,useActionState:bz,useOptimistic:function(t){var e=Ro();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=NL.bind(null,ci,!0,n),n.dispatch=e,[t,e]},useMemoCache:RL,useCacheRefresh:function(){return Ro().memoizedState=Xse.bind(null,ci)}},Eq={readContext:Vs,use:_C,useCallback:hq,useContext:Vs,useEffect:oq,useImperativeHandle:fq,useInsertionEffect:lq,useLayoutEffect:cq,useMemo:dq,useReducer:OM,useRef:sq,useState:function(){return OM(bh)},useDebugValue:DL,useDeferredValue:function(t,e){var n=Ra();return pq(n,dr.memoizedState,t,e)},useTransition:function(){var t=OM(bh)[0],e=Ra().memoizedState;return[typeof t=="boolean"?t:G_(t),e]},useSyncExternalStore:$W,useId:yq,useHostTransitionStatus:IL,useFormState:yz,useActionState:yz,useOptimistic:function(t,e){var n=Ra();return tq(n,dr,t,e)},useMemoCache:RL,useCacheRefresh:vq},$se={readContext:Vs,use:_C,useCallback:hq,useContext:Vs,useEffect:oq,useImperativeHandle:fq,useInsertionEffect:lq,useLayoutEffect:cq,useMemo:dq,useReducer:H3,useRef:sq,useState:function(){return H3(bh)},useDebugValue:DL,useDeferredValue:function(t,e){var n=Ra();return dr===null?OL(n,t,e):pq(n,dr.memoizedState,t,e)},useTransition:function(){var t=H3(bh)[0],e=Ra().memoizedState;return[typeof t=="boolean"?t:G_(t),e]},useSyncExternalStore:$W,useId:yq,useHostTransitionStatus:IL,useFormState:vz,useActionState:vz,useOptimistic:function(t,e){var n=Ra();return dr!==null?tq(n,dr,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:RL,useCacheRefresh:vq},F0=null,J1=0;function pw(t){var e=J1;return J1+=1,F0===null&&(F0=[]),GW(F0,t,e)}function Jv(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function mw(t,e){throw e.$$typeof===Mae?Error(kt(525)):(t=Object.prototype.toString.call(e),Error(kt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function _z(t){var e=t._init;return e(t._payload)}function Mq(t){function e(g,x){if(t){var _=g.deletions;_===null?(g.deletions=[x],g.flags|=16):_.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g){for(var x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function r(g,x){return g=ch(g,x),g.index=0,g.sibling=null,g}function a(g,x,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<x?(g.flags|=67108866,x):_):(g.flags|=67108866,x)):(g.flags|=1048576,x)}function s(g){return t&&g.alternate===null&&(g.flags|=67108866),g}function o(g,x,_,E){return x===null||x.tag!==6?(x=F3(_,g.mode,E),x.return=g,x):(x=r(x,_),x.return=g,x)}function l(g,x,_,E){var T=_.type;return T===m0?u(g,x,_.props.children,E,_.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bd&&_z(T)===x.type)?(x=r(x,_.props),Jv(x,_),x.return=g,x):(x=kM(_.type,_.key,_.props,null,g.mode,E),Jv(x,_),x.return=g,x)}function c(g,x,_,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=z3(_,g.mode,E),x.return=g,x):(x=r(x,_.children||[]),x.return=g,x)}function u(g,x,_,E,T){return x===null||x.tag!==7?(x=Fm(_,g.mode,E,T),x.return=g,x):(x=r(x,_),x.return=g,x)}function f(g,x,_){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=F3(""+x,g.mode,_),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ow:return _=kM(x.type,x.key,x.props,null,g.mode,_),Jv(_,x),_.return=g,_;case Xx:return x=z3(x,g.mode,_),x.return=g,x;case bd:var E=x._init;return x=E(x._payload),f(g,x,_)}if(Yx(x)||Xv(x))return x=Fm(x,g.mode,_,null),x.return=g,x;if(typeof x.then=="function")return f(g,pw(x),_);if(x.$$typeof===Qf)return f(g,hw(g,x),_);mw(g,x)}return null}function h(g,x,_,E){var T=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return T!==null?null:o(g,x,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ow:return _.key===T?l(g,x,_,E):null;case Xx:return _.key===T?c(g,x,_,E):null;case bd:return T=_._init,_=T(_._payload),h(g,x,_,E)}if(Yx(_)||Xv(_))return T!==null?null:u(g,x,_,E,null);if(typeof _.then=="function")return h(g,x,pw(_),E);if(_.$$typeof===Qf)return h(g,x,hw(g,_),E);mw(g,_)}return null}function d(g,x,_,E,T){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return g=g.get(_)||null,o(x,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ow:return g=g.get(E.key===null?_:E.key)||null,l(x,g,E,T);case Xx:return g=g.get(E.key===null?_:E.key)||null,c(x,g,E,T);case bd:var w=E._init;return E=w(E._payload),d(g,x,_,E,T)}if(Yx(E)||Xv(E))return g=g.get(_)||null,u(x,g,E,T,null);if(typeof E.then=="function")return d(g,x,_,pw(E),T);if(E.$$typeof===Qf)return d(g,x,_,hw(x,E),T);mw(x,E)}return null}function m(g,x,_,E){for(var T=null,w=null,A=x,C=x=0,D=null;A!==null&&C<_.length;C++){A.index>C?(D=A,A=null):D=A.sibling;var k=h(g,A,_[C],E);if(k===null){A===null&&(A=D);break}t&&A&&k.alternate===null&&e(g,A),x=a(k,x,C),w===null?T=k:w.sibling=k,w=k,A=D}if(C===_.length)return n(g,A),Vi&&um(g,C),T;if(A===null){for(;C<_.length;C++)A=f(g,_[C],E),A!==null&&(x=a(A,x,C),w===null?T=A:w.sibling=A,w=A);return Vi&&um(g,C),T}for(A=i(A);C<_.length;C++)D=d(A,g,C,_[C],E),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?C:D.key),x=a(D,x,C),w===null?T=D:w.sibling=D,w=D);return t&&A.forEach(function(P){return e(g,P)}),Vi&&um(g,C),T}function y(g,x,_,E){if(_==null)throw Error(kt(151));for(var T=null,w=null,A=x,C=x=0,D=null,k=_.next();A!==null&&!k.done;C++,k=_.next()){A.index>C?(D=A,A=null):D=A.sibling;var P=h(g,A,k.value,E);if(P===null){A===null&&(A=D);break}t&&A&&P.alternate===null&&e(g,A),x=a(P,x,C),w===null?T=P:w.sibling=P,w=P,A=D}if(k.done)return n(g,A),Vi&&um(g,C),T;if(A===null){for(;!k.done;C++,k=_.next())k=f(g,k.value,E),k!==null&&(x=a(k,x,C),w===null?T=k:w.sibling=k,w=k);return Vi&&um(g,C),T}for(A=i(A);!k.done;C++,k=_.next())k=d(A,g,C,k.value,E),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?C:k.key),x=a(k,x,C),w===null?T=k:w.sibling=k,w=k);return t&&A.forEach(function(B){return e(g,B)}),Vi&&um(g,C),T}function v(g,x,_,E){if(typeof _=="object"&&_!==null&&_.type===m0&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ow:e:{for(var T=_.key;x!==null;){if(x.key===T){if(T=_.type,T===m0){if(x.tag===7){n(g,x.sibling),E=r(x,_.props.children),E.return=g,g=E;break e}}else if(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bd&&_z(T)===x.type){n(g,x.sibling),E=r(x,_.props),Jv(E,_),E.return=g,g=E;break e}n(g,x);break}else e(g,x);x=x.sibling}_.type===m0?(E=Fm(_.props.children,g.mode,E,_.key),E.return=g,g=E):(E=kM(_.type,_.key,_.props,null,g.mode,E),Jv(E,_),E.return=g,g=E)}return s(g);case Xx:e:{for(T=_.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(g,x.sibling),E=r(x,_.children||[]),E.return=g,g=E;break e}else{n(g,x);break}else e(g,x);x=x.sibling}E=z3(_,g.mode,E),E.return=g,g=E}return s(g);case bd:return T=_._init,_=T(_._payload),v(g,x,_,E)}if(Yx(_))return m(g,x,_,E);if(Xv(_)){if(T=Xv(_),typeof T!="function")throw Error(kt(150));return _=T.call(_),y(g,x,_,E)}if(typeof _.then=="function")return v(g,x,pw(_),E);if(_.$$typeof===Qf)return v(g,x,hw(g,_),E);mw(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,x!==null&&x.tag===6?(n(g,x.sibling),E=r(x,_),E.return=g,g=E):(n(g,x),E=F3(_,g.mode,E),E.return=g,g=E),s(g)):n(g,x)}return function(g,x,_,E){try{J1=0;var T=v(g,x,_,E);return F0=null,T}catch(A){if(A===V_||A===xC)throw A;var w=dl(29,A,null,g.mode);return w.lanes=E,w.return=g,w}finally{}}}var uy=Mq(!0),Tq=Mq(!1),_c=gf(null),rf=null;function Md(t){var e=t.alternate;Vr(La,La.current&1),Vr(_c,t),rf===null&&(e===null||ly.current!==null||e.memoizedState!==null)&&(rf=t)}function Aq(t){if(t.tag===22){if(Vr(La,La.current),Vr(_c,t),rf===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(rf=t)}}else Td()}function Td(){Vr(La,La.current),Vr(_c,_c.current)}function ih(t){Qa(_c),rf===t&&(rf=null),Qa(La)}var La=gf(0);function vT(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||JI(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function V3(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Lr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var PI={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=vl(),r=zd(i);r.payload=e,n!=null&&(r.callback=n),e=jd(t,r,i),e!==null&&(xl(e,t,i),m1(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=vl(),r=zd(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=jd(t,r,i),e!==null&&(xl(e,t,i),m1(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vl(),i=zd(n);i.tag=2,e!=null&&(i.callback=e),e=jd(t,i,n),e!==null&&(xl(e,t,n),m1(e,t,n))}};function Sz(t,e,n,i,r,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,s):e.prototype&&e.prototype.isPureReactComponent?!Y1(n,i)||!Y1(r,a):!0}function wz(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&PI.enqueueReplaceState(e,e.state,null)}function ag(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Lr({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var xT=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Cq(t){xT(t)}function Rq(t){console.error(t)}function kq(t){xT(t)}function _T(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function Ez(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function LI(t,e,n){return n=zd(n),n.tag=3,n.payload={element:null},n.callback=function(){_T(t,e)},n}function Dq(t){return t=zd(t),t.tag=3,t}function Oq(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;t.payload=function(){return r(a)},t.callback=function(){Ez(e,n,i)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Ez(e,n,i),typeof r!="function"&&(Hd===null?Hd=new Set([this]):Hd.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function Kse(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&j_(e,n,r,!0),n=_c.current,n!==null){switch(n.tag){case 13:return rf===null?GI():n.alternate===null&&ca===0&&(ca=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===CI?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),ek(t,i,r)),!1;case 22:return n.flags|=65536,i===CI?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),ek(t,i,r)),!1}throw Error(kt(435,n.tag))}return ek(t,i,r),GI(),!1}if(Vi)return e=_c.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==wI&&(t=Error(kt(422),{cause:i}),$1(oc(t,n)))):(i!==wI&&(e=Error(kt(423),{cause:i}),$1(oc(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=oc(i,n),r=LI(t.stateNode,i,r),j3(t,r),ca!==4&&(ca=2)),!1;var a=Error(kt(520),{cause:i});if(a=oc(a,n),_1===null?_1=[a]:_1.push(a),ca!==4&&(ca=2),e===null)return!0;i=oc(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=LI(n.stateNode,i,t),j3(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Hd===null||!Hd.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Dq(r),Oq(r,t,n,i),j3(n,r),!1}n=n.return}while(n!==null);return!1}var Iq=Error(kt(461)),Ja=!1;function ps(t,e,n,i){e.child=t===null?Tq(e,null,n,i):uy(e,t.child,n,i)}function Mz(t,e,n,i,r){n=n.render;var a=e.ref;if("ref"in i){var s={};for(var o in i)o!=="ref"&&(s[o]=i[o])}else s=i;return ig(e),i=EL(t,e,n,s,a,r),o=ML(),t!==null&&!Ja?(TL(t,e,r),yh(t,e,r)):(Vi&&o&&bL(e),e.flags|=1,ps(t,e,i,r),e.child)}function Tz(t,e,n,i,r){if(t===null){var a=n.type;return typeof a=="function"&&!gL(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,Nq(t,e,a,i,r)):(t=kM(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!PL(t,r)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Y1,n(s,i)&&t.ref===e.ref)return yh(t,e,r)}return e.flags|=1,t=ch(a,i),t.ref=e.ref,t.return=e,e.child=t}function Nq(t,e,n,i,r){if(t!==null){var a=t.memoizedProps;if(Y1(a,i)&&t.ref===e.ref)if(Ja=!1,e.pendingProps=i=a,PL(t,r))t.flags&131072&&(Ja=!0);else return e.lanes=t.lanes,yh(t,e,r)}return UI(t,e,n,i,r)}function Pq(t,e,n){var i=e.pendingProps,r=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=a!==null?a.baseLanes|n:n,t!==null){for(r=e.child=t.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;e.childLanes=a&~i}else e.childLanes=0,e.child=null;return Az(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&DM(e,a!==null?a.cachePool:null),a!==null?pz(e,a):DI(),Aq(e);else return e.lanes=e.childLanes=536870912,Az(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(DM(e,a.cachePool),pz(e,a),Td(),e.memoizedState=null):(t!==null&&DM(e,null),DI(),Td());return ps(t,e,r,n),e.child}function Az(t,e,n,i){var r=xL();return r=r===null?null:{parent:Pa._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&DM(e,null),DI(),Aq(e),t!==null&&j_(t,e,i,!0),null}function NM(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(kt(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function UI(t,e,n,i,r){return ig(e),n=EL(t,e,n,i,void 0,r),i=ML(),t!==null&&!Ja?(TL(t,e,r),yh(t,e,r)):(Vi&&i&&bL(e),e.flags|=1,ps(t,e,n,r),e.child)}function Cz(t,e,n,i,r,a){return ig(e),e.updateQueue=null,n=YW(e,i,n,r),XW(t),i=ML(),t!==null&&!Ja?(TL(t,e,a),yh(t,e,a)):(Vi&&i&&bL(e),e.flags|=1,ps(t,e,n,a),e.child)}function Rz(t,e,n,i,r){if(ig(e),e.stateNode===null){var a=w0,s=n.contextType;typeof s=="object"&&s!==null&&(a=Vs(s)),a=new n(i,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=PI,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=i,a.state=e.memoizedState,a.refs={},_L(e),s=n.contextType,a.context=typeof s=="object"&&s!==null?Vs(s):w0,a.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(V3(e,n,s,i),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&PI.enqueueReplaceState(a,a.state,null),b1(e,i,a,r),g1(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=ag(n,o);a.props=l;var c=a.context,u=n.contextType;s=w0,typeof u=="object"&&u!==null&&(s=Vs(u));var f=n.getDerivedStateFromProps;u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==s)&&wz(e,a,i,s),yd=!1;var h=e.memoizedState;a.state=h,b1(e,i,a,r),g1(),c=e.memoizedState,o||h!==c||yd?(typeof f=="function"&&(V3(e,n,f,i),c=e.memoizedState),(l=yd||Sz(e,n,l,i,h,c,s))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=s,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,RI(t,e),s=e.memoizedProps,u=ag(n,s),a.props=u,f=e.pendingProps,h=a.context,c=n.contextType,l=w0,typeof c=="object"&&c!==null&&(l=Vs(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==l)&&wz(e,a,i,l),yd=!1,h=e.memoizedState,a.state=h,b1(e,i,a,r),g1();var d=e.memoizedState;s!==f||h!==d||yd||t!==null&&t.dependencies!==null&&pT(t.dependencies)?(typeof o=="function"&&(V3(e,n,o,i),d=e.memoizedState),(u=yd||Sz(e,n,u,i,h,d,l)||t!==null&&t.dependencies!==null&&pT(t.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,d,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,d,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return a=i,NM(t,e),i=(e.flags&128)!==0,a||i?(a=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&i?(e.child=uy(e,t.child,null,r),e.child=uy(e,null,n,r)):ps(t,e,n,r),e.memoizedState=a.state,t=e.child):t=yh(t,e,r),t}function kz(t,e,n,i){return z_(),e.flags|=256,ps(t,e,n,i),e.child}var G3={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function W3(t){return{baseLanes:t,cachePool:HW()}}function q3(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=uc),t}function Lq(t,e,n){var i=e.pendingProps,r=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(La.current&2)!==0),s&&(r=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(Vi){if(r?Md(e):Td(),Vi){var o=la,l;if(l=o){e:{for(l=o,o=Xu;l.nodeType!==8;){if(!o){o=null;break e}if(l=mu(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:zm!==null?{id:eh,overflow:th}:null,retryLane:536870912,hydrationErrors:null},l=dl(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,fo=e,la=null,l=!0):l=!1}l||ng(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return JI(o)?e.lanes=32:e.lanes=536870912,null;ih(e)}return o=i.children,i=i.fallback,r?(Td(),r=e.mode,o=ST({mode:"hidden",children:o},r),i=Fm(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,r=e.child,r.memoizedState=W3(n),r.childLanes=q3(t,s,n),e.memoizedState=G3,i):(Md(e),BI(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(Md(e),e.flags&=-257,e=X3(t,e,n)):e.memoizedState!==null?(Td(),e.child=t.child,e.flags|=128,e=null):(Td(),r=i.fallback,o=e.mode,i=ST({mode:"visible",children:i.children},o),r=Fm(r,o,n,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,uy(e,t.child,null,n),i=e.child,i.memoizedState=W3(n),i.childLanes=q3(t,s,n),e.memoizedState=G3,e=r);else if(Md(e),JI(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;s=c,i=Error(kt(419)),i.stack="",i.digest=s,$1({value:i,source:null,stack:null}),e=X3(t,e,n)}else if(Ja||j_(t,e,n,!1),s=(n&t.childLanes)!==0,Ja||s){if(s=Ar,s!==null&&(i=n&-n,i=i&42?1:aL(i),i=i&(s.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane))throw l.retryLane=i,Yy(t,i),xl(s,t,i),Iq;o.data==="$?"||GI(),e=X3(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,la=mu(o.nextSibling),fo=e,Vi=!0,jm=null,Xu=!1,t!==null&&(ic[rc++]=eh,ic[rc++]=th,ic[rc++]=zm,eh=t.id,th=t.overflow,zm=e),e=BI(e,i.children),e.flags|=4096);return e}return r?(Td(),r=i.fallback,o=e.mode,l=t.child,c=l.sibling,i=ch(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?r=ch(c,r):(r=Fm(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o===null?o=W3(n):(l=o.cachePool,l!==null?(c=Pa._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=HW(),o={baseLanes:o.baseLanes|n,cachePool:l}),r.memoizedState=o,r.childLanes=q3(t,s,n),e.memoizedState=G3,i):(Md(e),n=t.child,t=n.sibling,n=ch(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function BI(t,e){return e=ST({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function ST(t,e){return t=dl(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function X3(t,e,n){return uy(e,t.child,null,n),t=BI(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Dz(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),MI(t.return,e,n)}function Y3(t,e,n,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Uq(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(ps(t,e,i.children,n),i=La.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dz(t,n,e);else if(t.tag===19)Dz(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Vr(La,i),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&vT(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Y3(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&vT(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Y3(e,!0,n,null,a);break;case"together":Y3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yh(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jd|=e.lanes,!(n&e.childLanes))if(t!==null){if(j_(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(kt(153));if(e.child!==null){for(t=e.child,n=ch(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ch(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PL(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&pT(t)))}function Jse(t,e,n){switch(e.tag){case 3:sT(e,e.stateNode.containerInfo),Ed(e,Pa,t.memoizedState.cache),z_();break;case 27:case 5:dI(e);break;case 4:sT(e,e.stateNode.containerInfo);break;case 10:Ed(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Md(e),e.flags|=128,null):n&e.child.childLanes?Lq(t,e,n):(Md(e),t=yh(t,e,n),t!==null?t.sibling:null);Md(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(j_(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return Uq(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Vr(La,La.current),i)break;return null;case 22:case 23:return e.lanes=0,Pq(t,e,n);case 24:Ed(e,Pa,t.memoizedState.cache)}return yh(t,e,n)}function Bq(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Ja=!0;else{if(!PL(t,n)&&!(e.flags&128))return Ja=!1,Jse(t,e,n);Ja=!!(t.flags&131072)}else Ja=!1,Vi&&e.flags&1048576&&zW(e,dT,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,typeof i=="function")gL(i)?(t=ag(i,t),e.tag=1,e=Rz(null,e,i,t,n)):(e.tag=0,e=UI(null,e,i,t,n));else{if(i!=null){if(r=i.$$typeof,r===nL){e.tag=11,e=Mz(null,e,i,t,n);break e}else if(r===iL){e.tag=14,e=Tz(null,e,i,t,n);break e}}throw e=fI(i)||i,Error(kt(306,e,""))}}return e;case 0:return UI(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=ag(i,e.pendingProps),Rz(t,e,i,r,n);case 3:e:{if(sT(e,e.stateNode.containerInfo),t===null)throw Error(kt(387));i=e.pendingProps;var a=e.memoizedState;r=a.element,RI(t,e),b1(e,i,null,n);var s=e.memoizedState;if(i=s.cache,Ed(e,Pa,i),i!==a.cache&&TI(e,[Pa],n,!0),g1(),i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=kz(t,e,i,n);break e}else if(i!==r){r=oc(Error(kt(424)),e),$1(r),e=kz(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(la=mu(t.firstChild),fo=e,Vi=!0,jm=null,Xu=!0,n=Tq(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(z_(),i===r){e=yh(t,e,n);break e}ps(t,e,i,n)}e=e.child}return e;case 26:return NM(t,e),t===null?(n=Yz(e.type,null,e.pendingProps,null))?e.memoizedState=n:Vi||(n=e.type,t=e.pendingProps,i=RT(Fd.current).createElement(n),i[Hs]=e,i[Uo]=t,xs(i,n,t),Ka(i),e.stateNode=i):e.memoizedState=Yz(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return dI(e),t===null&&Vi&&(i=e.stateNode=EX(e.type,e.pendingProps,Fd.current),fo=e,Xu=!0,r=la,op(e.type)?(ZI=r,la=mu(i.firstChild)):la=r),ps(t,e,e.pendingProps.children,n),NM(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Vi&&((r=i=la)&&(i=Moe(i,e.type,e.pendingProps,Xu),i!==null?(e.stateNode=i,fo=e,la=mu(i.firstChild),Xu=!1,r=!0):r=!1),r||ng(e)),dI(e),r=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,$I(r,a)?i=null:s!==null&&$I(r,s)&&(e.flags|=32),e.memoizedState!==null&&(r=EL(t,e,Vse,null,null,n),t_._currentValue=r),NM(t,e),ps(t,e,i,n),e.child;case 6:return t===null&&Vi&&((t=n=la)&&(n=Toe(n,e.pendingProps,Xu),n!==null?(e.stateNode=n,fo=e,la=null,t=!0):t=!1),t||ng(e)),null;case 13:return Lq(t,e,n);case 4:return sT(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=uy(e,null,i,n):ps(t,e,i,n),e.child;case 11:return Mz(t,e,e.type,e.pendingProps,n);case 7:return ps(t,e,e.pendingProps,n),e.child;case 8:return ps(t,e,e.pendingProps.children,n),e.child;case 12:return ps(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Ed(e,e.type,i.value),ps(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,ig(e),r=Vs(r),i=i(r),e.flags|=1,ps(t,e,i,n),e.child;case 14:return Tz(t,e,e.type,e.pendingProps,n);case 15:return Nq(t,e,e.type,e.pendingProps,n);case 19:return Uq(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=ST(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=ch(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return Pq(t,e,n);case 24:return ig(e),i=Vs(Pa),t===null?(r=xL(),r===null&&(r=Ar,a=vL(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=n),r=a),e.memoizedState={parent:i,cache:r},_L(e),Ed(e,Pa,r)):(t.lanes&n&&(RI(t,e),b1(e,null,null,n),g1()),r=t.memoizedState,a=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),Ed(e,Pa,i)):(i=a.cache,Ed(e,Pa,i),i!==r.cache&&TI(e,[Pa],n,!0))),ps(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(kt(156,e.tag))}function Uf(t){t.flags|=4}function Oz(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!AX(e)){if(e=_c.current,e!==null&&((Oi&4194048)===Oi?rf!==null:(Oi&62914560)!==Oi&&!(Oi&536870912)||e!==rf))throw p1=CI,VW;t.flags|=8192}}function gw(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?uW():536870912,t.lanes|=e,fy|=e)}function Zv(t,e){if(!Vi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Zse(t,e,n){var i=e.pendingProps;switch(yL(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(e),null;case 1:return qr(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),uh(Pa),ry(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Kv(e)?Uf(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lz())),qr(e),null;case 26:return n=e.memoizedState,t===null?(Uf(e),n!==null?(qr(e),Oz(e,n)):(qr(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Uf(e),qr(e),Oz(e,n)):(qr(e),e.flags&=-16777217):(t.memoizedProps!==i&&Uf(e),qr(e),e.flags&=-16777217),null;case 27:oT(e),n=Fd.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Uf(e);else{if(!i){if(e.stateNode===null)throw Error(kt(166));return qr(e),null}t=tf.current,Kv(e)?sz(e):(t=EX(r,i,n),e.stateNode=t,Uf(e))}return qr(e),null;case 5:if(oT(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Uf(e);else{if(!i){if(e.stateNode===null)throw Error(kt(166));return qr(e),null}if(t=tf.current,Kv(e))sz(e);else{switch(r=RT(Fd.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}t[Hs]=e,t[Uo]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;e:switch(xs(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Uf(e)}}return qr(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Uf(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(kt(166));if(t=Fd.current,Kv(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=fo,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Hs]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||_X(t.nodeValue,n)),t||ng(e)}else t=RT(t).createTextNode(i),t[Hs]=e,e.stateNode=t}return qr(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Kv(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(kt(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(kt(317));r[Hs]=e}else z_(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qr(e),r=!1}else r=lz(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(ih(e),e):(ih(e),null)}if(ih(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var a=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),gw(e,e.updateQueue),qr(e),null;case 4:return ry(),t===null&&VL(e.stateNode.containerInfo),qr(e),null;case 10:return uh(e.type),qr(e),null;case 19:if(Qa(La),r=e.memoizedState,r===null)return qr(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Zv(r,!1);else{if(ca!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=vT(t),a!==null){for(e.flags|=128,Zv(r,!1),t=a.updateQueue,e.updateQueue=t,gw(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)FW(n,t),n=n.sibling;return Vr(La,La.current&1|2),e.child}t=t.sibling}r.tail!==null&&nf()>ET&&(e.flags|=128,i=!0,Zv(r,!1),e.lanes=4194304)}else{if(!i)if(t=vT(a),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,gw(e,t),Zv(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Vi)return qr(e),null}else 2*nf()-r.renderingStartTime>ET&&n!==536870912&&(e.flags|=128,i=!0,Zv(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=nf(),e.sibling=null,t=La.current,Vr(La,i?t&1|2:t&1),e):(qr(e),null);case 22:case 23:return ih(e),SL(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(qr(e),e.subtreeFlags&6&&(e.flags|=8192)):qr(e),n=e.updateQueue,n!==null&&gw(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Qa(Hm),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),uh(Pa),qr(e),null;case 25:return null;case 30:return null}throw Error(kt(156,e.tag))}function Qse(t,e){switch(yL(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uh(Pa),ry(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return oT(e),null;case 13:if(ih(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(kt(340));z_()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qa(La),null;case 4:return ry(),null;case 10:return uh(e.type),null;case 22:case 23:return ih(e),SL(),t!==null&&Qa(Hm),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return uh(Pa),null;case 25:return null;default:return null}}function Fq(t,e){switch(yL(e),e.tag){case 3:uh(Pa),ry();break;case 26:case 27:case 5:oT(e);break;case 4:ry();break;case 13:ih(e);break;case 19:Qa(La);break;case 10:uh(e.type);break;case 22:case 23:ih(e),SL(),t!==null&&Qa(Hm);break;case 24:uh(Pa)}}function q_(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var a=n.create,s=n.inst;i=a(),s.destroy=i}n=n.next}while(n!==r)}}catch(o){yr(e,e.return,o)}}function Kd(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var a=r.next;i=a;do{if((i.tag&t)===t){var s=i.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(u){yr(r,l,u)}}}i=i.next}while(i!==a)}}catch(u){yr(e,e.return,u)}}function zq(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{qW(e,n)}catch(i){yr(t,t.return,i)}}}function jq(t,e,n){n.props=ag(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){yr(t,e,i)}}function v1(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){yr(t,e,r)}}function Ju(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){yr(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){yr(t,e,r)}else n.current=null}function Hq(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){yr(t,t.return,r)}}function $3(t,e,n){try{var i=t.stateNode;xoe(i,t.type,n,e),i[Uo]=e}catch(r){yr(t,t.return,r)}}function Vq(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&op(t.type)||t.tag===4}function K3(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&op(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function FI(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=AC));else if(i!==4&&(i===27&&op(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(FI(t,e,n),t=t.sibling;t!==null;)FI(t,e,n),t=t.sibling}function wT(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&op(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(wT(t,e,n),t=t.sibling;t!==null;)wT(t,e,n),t=t.sibling}function Gq(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);xs(e,i,n),e[Hs]=t,e[Uo]=n}catch(a){yr(t,t.return,a)}}var Kf=!1,ma=!1,J3=!1,Iz=typeof WeakSet=="function"?WeakSet:Set,Ya=null;function eoe(t,e){if(t=t.containerInfo,XI=IT,t=DW(t),dL(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||r!==0&&f.nodeType!==3||(o=s+r),f!==a||i!==0&&f.nodeType!==3||(l=s+i),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===r&&(o=s),h===a&&++u===i&&(l=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(YI={focusedElem:t,selectionRange:n},IT=!1,Ya=e;Ya!==null;)if(e=Ya,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Ya=t;else for(;Ya!==null;){switch(e=Ya,a=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var m=ag(n.type,r,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(m,a),i.__reactInternalSnapshotBeforeUpdate=t}catch(y){yr(n,n.return,y)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)KI(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":KI(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(kt(163))}if(t=e.sibling,t!==null){t.return=e.return,Ya=t;break}Ya=e.return}}function Wq(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ed(t,n),i&4&&q_(5,n);break;case 1:if(ed(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){yr(n,n.return,s)}else{var r=ag(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){yr(n,n.return,s)}}i&64&&zq(n),i&512&&v1(n,n.return);break;case 3:if(ed(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{qW(t,e)}catch(s){yr(n,n.return,s)}}break;case 27:e===null&&i&4&&Gq(n);case 26:case 5:ed(t,n),e===null&&i&4&&Hq(n),i&512&&v1(n,n.return);break;case 12:ed(t,n);break;case 13:ed(t,n),i&4&&Yq(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=coe.bind(null,n),Aoe(t,n))));break;case 22:if(i=n.memoizedState!==null||Kf,!i){e=e!==null&&e.memoizedState!==null||ma,r=Kf;var a=ma;Kf=i,(ma=e)&&!a?md(t,n,(n.subtreeFlags&8772)!==0):ed(t,n),Kf=r,ma=a}break;case 30:break;default:ed(t,n)}}function qq(t){var e=t.alternate;e!==null&&(t.alternate=null,qq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&oL(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var zr=null,ko=!1;function Bf(t,e,n){for(n=n.child;n!==null;)Xq(t,e,n),n=n.sibling}function Xq(t,e,n){if(bl&&typeof bl.onCommitFiberUnmount=="function")try{bl.onCommitFiberUnmount(P_,n)}catch{}switch(n.tag){case 26:ma||Ju(n,e),Bf(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ma||Ju(n,e);var i=zr,r=ko;op(n.type)&&(zr=n.stateNode,ko=!1),Bf(t,e,n),w1(n.stateNode),zr=i,ko=r;break;case 5:ma||Ju(n,e);case 6:if(i=zr,r=ko,zr=null,Bf(t,e,n),zr=i,ko=r,zr!==null)if(ko)try{(zr.nodeType===9?zr.body:zr.nodeName==="HTML"?zr.ownerDocument.body:zr).removeChild(n.stateNode)}catch(a){yr(n,e,a)}else try{zr.removeChild(n.stateNode)}catch(a){yr(n,e,a)}break;case 18:zr!==null&&(ko?(t=zr,Wz(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),r_(t)):Wz(zr,n.stateNode));break;case 4:i=zr,r=ko,zr=n.stateNode.containerInfo,ko=!0,Bf(t,e,n),zr=i,ko=r;break;case 0:case 11:case 14:case 15:ma||Kd(2,n,e),ma||Kd(4,n,e),Bf(t,e,n);break;case 1:ma||(Ju(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&jq(n,e,i)),Bf(t,e,n);break;case 21:Bf(t,e,n);break;case 22:ma=(i=ma)||n.memoizedState!==null,Bf(t,e,n),ma=i;break;default:Bf(t,e,n)}}function Yq(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{r_(t)}catch(n){yr(e,e.return,n)}}function toe(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Iz),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Iz),e;default:throw Error(kt(435,t.tag))}}function Z3(t,e){var n=toe(t);e.forEach(function(i){var r=uoe.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}function il(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(op(o.type)){zr=o.stateNode,ko=!1;break e}break;case 5:zr=o.stateNode,ko=!1;break e;case 3:case 4:zr=o.stateNode.containerInfo,ko=!0;break e}o=o.return}if(zr===null)throw Error(kt(160));Xq(a,s,r),zr=null,ko=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)$q(e,t),e=e.sibling}var Qc=null;function $q(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:il(e,t),rl(t),i&4&&(Kd(3,t,t.return),q_(3,t),Kd(5,t,t.return));break;case 1:il(e,t),rl(t),i&512&&(ma||n===null||Ju(n,n.return)),i&64&&Kf&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Qc;if(il(e,t),rl(t),i&512&&(ma||n===null||Ju(n,n.return)),i&4){var a=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":a=r.getElementsByTagName("title")[0],(!a||a[B_]||a[Hs]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),xs(a,i,n),a[Hs]=t,Ka(a),i=a;break e;case"link":var s=Kz("link","href",r).get(i+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}a=r.createElement(i),xs(a,i,n),r.head.appendChild(a);break;case"meta":if(s=Kz("meta","content",r).get(i+(n.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}a=r.createElement(i),xs(a,i,n),r.head.appendChild(a);break;default:throw Error(kt(468,i))}a[Hs]=t,Ka(a),i=a}t.stateNode=i}else Jz(r,t.type,t.stateNode);else t.stateNode=$z(r,i,t.memoizedProps);else a!==i?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,i===null?Jz(r,t.type,t.stateNode):$z(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&$3(t,t.memoizedProps,n.memoizedProps)}break;case 27:il(e,t),rl(t),i&512&&(ma||n===null||Ju(n,n.return)),n!==null&&i&4&&$3(t,t.memoizedProps,n.memoizedProps);break;case 5:if(il(e,t),rl(t),i&512&&(ma||n===null||Ju(n,n.return)),t.flags&32){r=t.stateNode;try{sy(r,"")}catch(d){yr(t,t.return,d)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,$3(t,r,n!==null?n.memoizedProps:r)),i&1024&&(J3=!0);break;case 6:if(il(e,t),rl(t),i&4){if(t.stateNode===null)throw Error(kt(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(d){yr(t,t.return,d)}}break;case 3:if(UM=null,r=Qc,Qc=kT(e.containerInfo),il(e,t),Qc=r,rl(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{r_(e.containerInfo)}catch(d){yr(t,t.return,d)}J3&&(J3=!1,Kq(t));break;case 4:i=Qc,Qc=kT(t.stateNode.containerInfo),il(e,t),rl(t),Qc=i;break;case 12:il(e,t),rl(t);break;case 13:il(e,t),rl(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(zL=nf()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Z3(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Kf,u=ma;if(Kf=c||r,ma=u||l,il(e,t),ma=u,Kf=c,rl(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||Kf||ma||fm(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(a=l.stateNode,r)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var f=l.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(d){yr(l,l.return,d)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(d){yr(l,l.return,d)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Z3(t,n))));break;case 19:il(e,t),rl(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Z3(t,i)));break;case 30:break;case 21:break;default:il(e,t),rl(t)}}function rl(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Vq(i)){n=i;break}i=i.return}if(n==null)throw Error(kt(160));switch(n.tag){case 27:var r=n.stateNode,a=K3(t);wT(t,a,r);break;case 5:var s=n.stateNode;n.flags&32&&(sy(s,""),n.flags&=-33);var o=K3(t);wT(t,o,s);break;case 3:case 4:var l=n.stateNode.containerInfo,c=K3(t);FI(t,c,l);break;default:throw Error(kt(161))}}catch(u){yr(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kq(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Kq(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ed(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Wq(t,e.alternate,e),e=e.sibling}function fm(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Kd(4,e,e.return),fm(e);break;case 1:Ju(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&jq(e,e.return,n),fm(e);break;case 27:w1(e.stateNode);case 26:case 5:Ju(e,e.return),fm(e);break;case 22:e.memoizedState===null&&fm(e);break;case 30:fm(e);break;default:fm(e)}t=t.sibling}}function md(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:md(r,a,n),q_(4,a);break;case 1:if(md(r,a,n),i=a,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){yr(i,i.return,c)}if(i=a,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)WW(l[r],o)}catch(c){yr(i,i.return,c)}}n&&s&64&&zq(a),v1(a,a.return);break;case 27:Gq(a);case 26:case 5:md(r,a,n),n&&i===null&&s&4&&Hq(a),v1(a,a.return);break;case 12:md(r,a,n);break;case 13:md(r,a,n),n&&s&4&&Yq(r,a);break;case 22:a.memoizedState===null&&md(r,a,n),v1(a,a.return);break;case 30:break;default:md(r,a,n)}e=e.sibling}}function LL(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&H_(n))}function UL(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&H_(t))}function Lu(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jq(t,e,n,i),e=e.sibling}function Jq(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Lu(t,e,n,i),r&2048&&q_(9,e);break;case 1:Lu(t,e,n,i);break;case 3:Lu(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&H_(t)));break;case 12:if(r&2048){Lu(t,e,n,i),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){yr(e,e.return,l)}}else Lu(t,e,n,i);break;case 13:Lu(t,e,n,i);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?Lu(t,e,n,i):x1(t,e):a._visibility&2?Lu(t,e,n,i):(a._visibility|=2,l0(t,e,n,i,(e.subtreeFlags&10256)!==0)),r&2048&&LL(s,e);break;case 24:Lu(t,e,n,i),r&2048&&UL(e.alternate,e);break;default:Lu(t,e,n,i)}}function l0(t,e,n,i,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var a=t,s=e,o=n,l=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:l0(a,s,o,l,r),q_(8,s);break;case 23:break;case 22:var u=s.stateNode;s.memoizedState!==null?u._visibility&2?l0(a,s,o,l,r):x1(a,s):(u._visibility|=2,l0(a,s,o,l,r)),r&&c&2048&&LL(s.alternate,s);break;case 24:l0(a,s,o,l,r),r&&c&2048&&UL(s.alternate,s);break;default:l0(a,s,o,l,r)}e=e.sibling}}function x1(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:x1(n,i),r&2048&&LL(i.alternate,i);break;case 24:x1(n,i),r&2048&&UL(i.alternate,i);break;default:x1(n,i)}e=e.sibling}}var Kx=8192;function sb(t){if(t.subtreeFlags&Kx)for(t=t.child;t!==null;)Zq(t),t=t.sibling}function Zq(t){switch(t.tag){case 26:sb(t),t.flags&Kx&&t.memoizedState!==null&&zoe(Qc,t.memoizedState,t.memoizedProps);break;case 5:sb(t);break;case 3:case 4:var e=Qc;Qc=kT(t.stateNode.containerInfo),sb(t),Qc=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Kx,Kx=16777216,sb(t),Kx=e):sb(t));break;default:sb(t)}}function Qq(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Qv(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Ya=i,tX(i,t)}Qq(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)eX(t),t=t.sibling}function eX(t){switch(t.tag){case 0:case 11:case 15:Qv(t),t.flags&2048&&Kd(9,t,t.return);break;case 3:Qv(t);break;case 12:Qv(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,PM(t)):Qv(t);break;default:Qv(t)}}function PM(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Ya=i,tX(i,t)}Qq(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Kd(8,e,e.return),PM(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,PM(e));break;default:PM(e)}t=t.sibling}}function tX(t,e){for(;Ya!==null;){var n=Ya;switch(n.tag){case 0:case 11:case 15:Kd(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:H_(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Ya=i;else e:for(n=t;Ya!==null;){i=Ya;var r=i.sibling,a=i.return;if(qq(i),i===n){Ya=null;break e}if(r!==null){r.return=a,Ya=r;break e}Ya=a}}}var noe={getCacheForType:function(t){var e=Vs(Pa),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},ioe=typeof WeakMap=="function"?WeakMap:Map,lr=0,Ar=null,gi=null,Oi=0,or=0,ul=null,Id=!1,$y=!1,BL=!1,vh=0,ca=0,Jd=0,Vm=0,FL=0,uc=0,fy=0,_1=null,Do=null,zI=!1,zL=0,ET=1/0,MT=null,Hd=null,ys=0,Vd=null,hy=null,z0=0,jI=0,HI=null,nX=null,S1=0,VI=null;function vl(){if(lr&2&&Oi!==0)return Oi&-Oi;if(In.T!==null){var t=oy;return t!==0?t:HL()}return dW()}function iX(){uc===0&&(uc=!(Oi&536870912)||Vi?cW():536870912);var t=_c.current;return t!==null&&(t.flags|=32),uc}function xl(t,e,n){(t===Ar&&(or===2||or===9)||t.cancelPendingCommit!==null)&&(dy(t,0),Nd(t,Oi,uc,!1)),U_(t,n),(!(lr&2)||t!==Ar)&&(t===Ar&&(!(lr&2)&&(Vm|=n),ca===4&&Nd(t,Oi,uc,!1)),bf(t))}function rX(t,e,n){if(lr&6)throw Error(kt(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||L_(t,e),r=i?soe(t,e):Q3(t,e,!0),a=i;do{if(r===0){$y&&!i&&Nd(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!roe(n)){r=Q3(t,e,!1),a=!1;continue}if(r===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;r=_1;var l=o.current.memoizedState.isDehydrated;if(l&&(dy(o,s).flags|=256),s=Q3(o,s,!1),s!==2){if(BL&&!l){o.errorRecoveryDisabledLanes|=a,Vm|=a,r=4;break e}a=Do,Do=r,a!==null&&(Do===null?Do=a:Do.push.apply(Do,a))}r=s}if(a=!1,r!==2)continue}}if(r===1){dy(t,0),Nd(t,e,0,!0);break}e:{switch(i=t,a=r,a){case 0:case 1:throw Error(kt(345));case 4:if((e&4194048)!==e)break;case 6:Nd(i,e,uc,!Id);break e;case 2:Do=null;break;case 3:case 5:break;default:throw Error(kt(329))}if((e&62914560)===e&&(r=zL+300-nf(),10<r)){if(Nd(i,e,uc,!Id),pC(i,0,!0)!==0)break e;i.timeoutHandle=wX(Nz.bind(null,i,n,Do,MT,zI,e,uc,Vm,fy,Id,a,2,-0,0),r);break e}Nz(i,n,Do,MT,zI,e,uc,Vm,fy,Id,a,0,-0,0)}}break}while(!0);bf(t)}function Nz(t,e,n,i,r,a,s,o,l,c,u,f,h,d){if(t.timeoutHandle=-1,f=e.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(e_={stylesheets:null,count:0,unsuspend:Foe},Zq(e),f=joe(),f!==null)){t.cancelPendingCommit=f(Lz.bind(null,t,e,a,n,i,r,s,o,l,u,1,h,d)),Nd(t,a,s,!c);return}Lz(t,e,a,n,i,r,s,o,l)}function roe(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!El(a(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nd(t,e,n,i){e&=~FL,e&=~Vm,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var a=31-yl(r),s=1<<a;i[a]=-1,r&=~s}n!==0&&fW(t,n,e)}function EC(){return lr&6?!0:(X_(0),!1)}function jL(){if(gi!==null){if(or===0)var t=gi.return;else t=gi,nh=Sg=null,AL(t),F0=null,J1=0,t=gi;for(;t!==null;)Fq(t.alternate,t),t=t.return;gi=null}}function dy(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Soe(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),jL(),Ar=t,gi=n=ch(t.current,null),Oi=e,or=0,ul=null,Id=!1,$y=L_(t,e),BL=!1,fy=uc=FL=Vm=Jd=ca=0,Do=_1=null,zI=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-yl(i),a=1<<r;e|=t[r],i&=~a}return vh=e,yC(),n}function aX(t,e){ci=null,In.H=yT,e===V_||e===xC?(e=hz(),or=3):e===VW?(e=hz(),or=4):or=e===Iq?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ul=e,gi===null&&(ca=1,_T(t,oc(e,t.current)))}function sX(){var t=In.H;return In.H=yT,t===null?yT:t}function oX(){var t=In.A;return In.A=noe,t}function GI(){ca=4,Id||(Oi&4194048)!==Oi&&_c.current!==null||($y=!0),!(Jd&134217727)&&!(Vm&134217727)||Ar===null||Nd(Ar,Oi,uc,!1)}function Q3(t,e,n){var i=lr;lr|=2;var r=sX(),a=oX();(Ar!==t||Oi!==e)&&(MT=null,dy(t,e)),e=!1;var s=ca;e:do try{if(or!==0&&gi!==null){var o=gi,l=ul;switch(or){case 8:jL(),s=6;break e;case 3:case 2:case 9:case 6:_c.current===null&&(e=!0);var c=or;if(or=0,ul=null,T0(t,o,l,c),n&&$y){s=0;break e}break;default:c=or,or=0,ul=null,T0(t,o,l,c)}}aoe(),s=ca;break}catch(u){aX(t,u)}while(!0);return e&&t.shellSuspendCounter++,nh=Sg=null,lr=i,In.H=r,In.A=a,gi===null&&(Ar=null,Oi=0,yC()),s}function aoe(){for(;gi!==null;)lX(gi)}function soe(t,e){var n=lr;lr|=2;var i=sX(),r=oX();Ar!==t||Oi!==e?(MT=null,ET=nf()+500,dy(t,e)):$y=L_(t,e);e:do try{if(or!==0&&gi!==null){e=gi;var a=ul;t:switch(or){case 1:or=0,ul=null,T0(t,e,a,1);break;case 2:case 9:if(fz(a)){or=0,ul=null,Pz(e);break}e=function(){or!==2&&or!==9||Ar!==t||(or=7),bf(t)},a.then(e,e);break e;case 3:or=7;break e;case 4:or=5;break e;case 7:fz(a)?(or=0,ul=null,Pz(e)):(or=0,ul=null,T0(t,e,a,7));break;case 5:var s=null;switch(gi.tag){case 26:s=gi.memoizedState;case 5:case 27:var o=gi;if(!s||AX(s)){or=0,ul=null;var l=o.sibling;if(l!==null)gi=l;else{var c=o.return;c!==null?(gi=c,MC(c)):gi=null}break t}}or=0,ul=null,T0(t,e,a,5);break;case 6:or=0,ul=null,T0(t,e,a,6);break;case 8:jL(),ca=6;break e;default:throw Error(kt(462))}}ooe();break}catch(u){aX(t,u)}while(!0);return nh=Sg=null,In.H=i,In.A=r,lr=n,gi!==null?0:(Ar=null,Oi=0,yC(),ca)}function ooe(){for(;gi!==null&&!Rae();)lX(gi)}function lX(t){var e=Bq(t.alternate,t,vh);t.memoizedProps=t.pendingProps,e===null?MC(t):gi=e}function Pz(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Cz(n,e,e.pendingProps,e.type,void 0,Oi);break;case 11:e=Cz(n,e,e.pendingProps,e.type.render,e.ref,Oi);break;case 5:AL(e);default:Fq(n,e),e=gi=FW(e,vh),e=Bq(n,e,vh)}t.memoizedProps=t.pendingProps,e===null?MC(t):gi=e}function T0(t,e,n,i){nh=Sg=null,AL(e),F0=null,J1=0;var r=e.return;try{if(Kse(t,r,e,n,Oi)){ca=1,_T(t,oc(n,t.current)),gi=null;return}}catch(a){if(r!==null)throw gi=r,a;ca=1,_T(t,oc(n,t.current)),gi=null;return}e.flags&32768?(Vi||i===1?t=!0:$y||Oi&536870912?t=!1:(Id=t=!0,(i===2||i===9||i===3||i===6)&&(i=_c.current,i!==null&&i.tag===13&&(i.flags|=16384))),cX(e,t)):MC(e)}function MC(t){var e=t;do{if(e.flags&32768){cX(e,Id);return}t=e.return;var n=Zse(e.alternate,e,vh);if(n!==null){gi=n;return}if(e=e.sibling,e!==null){gi=e;return}gi=e=t}while(e!==null);ca===0&&(ca=5)}function cX(t,e){do{var n=Qse(t.alternate,t);if(n!==null){n.flags&=32767,gi=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){gi=t;return}gi=t=n}while(t!==null);ca=6,gi=null}function Lz(t,e,n,i,r,a,s,o,l){t.cancelPendingCommit=null;do TC();while(ys!==0);if(lr&6)throw Error(kt(327));if(e!==null){if(e===t.current)throw Error(kt(177));if(a=e.lanes|e.childLanes,a|=pL,Fae(t,n,a,s,o,l),t===Ar&&(gi=Ar=null,Oi=0),hy=e,Vd=t,z0=n,jI=a,HI=r,nX=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,foe(lT,function(){return pX(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=In.T,In.T=null,r=qi.p,qi.p=2,s=lr,lr|=4;try{eoe(t,e,n)}finally{lr=s,qi.p=r,In.T=i}}ys=1,uX(),fX(),hX()}}function uX(){if(ys===1){ys=0;var t=Vd,e=hy,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=In.T,In.T=null;var i=qi.p;qi.p=2;var r=lr;lr|=4;try{$q(e,t);var a=YI,s=DW(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&kW(o.ownerDocument.documentElement,o)){if(l!==null&&dL(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var f=o.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var d=h.getSelection(),m=o.textContent.length,y=Math.min(l.start,m),v=l.end===void 0?y:Math.min(l.end,m);!d.extend&&y>v&&(s=v,v=y,y=s);var g=iz(o,y),x=iz(o,v);if(g&&x&&(d.rangeCount!==1||d.anchorNode!==g.node||d.anchorOffset!==g.offset||d.focusNode!==x.node||d.focusOffset!==x.offset)){var _=f.createRange();_.setStart(g.node,g.offset),d.removeAllRanges(),y>v?(d.addRange(_),d.extend(x.node,x.offset)):(_.setEnd(x.node,x.offset),d.addRange(_))}}}}for(f=[],d=o;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var E=f[o];E.element.scrollLeft=E.left,E.element.scrollTop=E.top}}IT=!!XI,YI=XI=null}finally{lr=r,qi.p=i,In.T=n}}t.current=e,ys=2}}function fX(){if(ys===2){ys=0;var t=Vd,e=hy,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=In.T,In.T=null;var i=qi.p;qi.p=2;var r=lr;lr|=4;try{Wq(t,e.alternate,e)}finally{lr=r,qi.p=i,In.T=n}}ys=3}}function hX(){if(ys===4||ys===3){ys=0,kae();var t=Vd,e=hy,n=z0,i=nX;e.subtreeFlags&10256||e.flags&10256?ys=5:(ys=0,hy=Vd=null,dX(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Hd=null),sL(n),e=e.stateNode,bl&&typeof bl.onCommitFiberRoot=="function")try{bl.onCommitFiberRoot(P_,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=In.T,r=qi.p,qi.p=2,In.T=null;try{for(var a=t.onRecoverableError,s=0;s<i.length;s++){var o=i[s];a(o.value,{componentStack:o.stack})}}finally{In.T=e,qi.p=r}}z0&3&&TC(),bf(t),r=t.pendingLanes,n&4194090&&r&42?t===VI?S1++:(S1=0,VI=t):S1=0,X_(0)}}function dX(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,H_(e)))}function TC(t){return uX(),fX(),hX(),pX()}function pX(){if(ys!==5)return!1;var t=Vd,e=jI;jI=0;var n=sL(z0),i=In.T,r=qi.p;try{qi.p=32>n?32:n,In.T=null,n=HI,HI=null;var a=Vd,s=z0;if(ys=0,hy=Vd=null,z0=0,lr&6)throw Error(kt(331));var o=lr;if(lr|=4,eX(a.current),Jq(a,a.current,s,n),lr=o,X_(0,!1),bl&&typeof bl.onPostCommitFiberRoot=="function")try{bl.onPostCommitFiberRoot(P_,a)}catch{}return!0}finally{qi.p=r,In.T=i,dX(t,e)}}function Uz(t,e,n){e=oc(n,e),e=LI(t.stateNode,e,2),t=jd(t,e,2),t!==null&&(U_(t,2),bf(t))}function yr(t,e,n){if(t.tag===3)Uz(t,t,n);else for(;e!==null;){if(e.tag===3){Uz(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hd===null||!Hd.has(i))){t=oc(n,t),n=Dq(2),i=jd(e,n,2),i!==null&&(Oq(n,i,e,t),U_(i,2),bf(i));break}}e=e.return}}function ek(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new ioe;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(BL=!0,r.add(n),t=loe.bind(null,t,e,n),e.then(t,t))}function loe(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ar===t&&(Oi&n)===n&&(ca===4||ca===3&&(Oi&62914560)===Oi&&300>nf()-zL?!(lr&2)&&dy(t,0):FL|=n,fy===Oi&&(fy=0)),bf(t)}function mX(t,e){e===0&&(e=uW()),t=Yy(t,e),t!==null&&(U_(t,e),bf(t))}function coe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mX(t,n)}function uoe(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(kt(314))}i!==null&&i.delete(e),mX(t,n)}function foe(t,e){return rL(t,e)}var TT=null,c0=null,WI=!1,AT=!1,tk=!1,Gm=0;function bf(t){t!==c0&&t.next===null&&(c0===null?TT=c0=t:c0=c0.next=t),AT=!0,WI||(WI=!0,doe())}function X_(t,e){if(!tk&&AT){tk=!0;do for(var n=!1,i=TT;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var a=0;else{var s=i.suspendedLanes,o=i.pingedLanes;a=(1<<31-yl(42|t)+1)-1,a&=r&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Bz(i,a))}else a=Oi,a=pC(i,i===Ar?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||L_(i,a)||(n=!0,Bz(i,a));i=i.next}while(n);tk=!1}}function hoe(){gX()}function gX(){AT=WI=!1;var t=0;Gm!==0&&(_oe()&&(t=Gm),Gm=0);for(var e=nf(),n=null,i=TT;i!==null;){var r=i.next,a=bX(i,e);a===0?(i.next=null,n===null?TT=r:n.next=r,r===null&&(c0=n)):(n=i,(t!==0||a&3)&&(AT=!0)),i=r}X_(t)}function bX(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-yl(a),o=1<<s,l=r[s];l===-1?(!(o&n)||o&i)&&(r[s]=Bae(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=Ar,n=Oi,n=pC(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(or===2||or===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&A3(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||L_(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&A3(i),sL(n)){case 2:case 8:n=oW;break;case 32:n=lT;break;case 268435456:n=lW;break;default:n=lT}return i=yX.bind(null,t),n=rL(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&A3(i),t.callbackPriority=2,t.callbackNode=null,2}function yX(t,e){if(ys!==0&&ys!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(TC()&&t.callbackNode!==n)return null;var i=Oi;return i=pC(t,t===Ar?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(rX(t,i,e),bX(t,nf()),t.callbackNode!=null&&t.callbackNode===n?yX.bind(null,t):null)}function Bz(t,e){if(TC())return null;rX(t,e,!0)}function doe(){woe(function(){lr&6?rL(sW,hoe):gX()})}function HL(){return Gm===0&&(Gm=cW()),Gm}function Fz(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:AM(""+t)}function zz(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function poe(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var a=Fz((r[Uo]||null).action),s=i.submitter;s&&(e=(e=s[Uo]||null)?Fz(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var o=new mC("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Gm!==0){var l=s?zz(r,s):new FormData(r);NI(n,{pending:!0,data:l,method:r.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=s?zz(r,s):new FormData(r),NI(n,{pending:!0,data:l,method:r.method,action:a},a,l))},currentTarget:r}]})}}for(var nk=0;nk<SI.length;nk++){var ik=SI[nk],moe=ik.toLowerCase(),goe=ik[0].toUpperCase()+ik.slice(1);wu(moe,"on"+goe)}wu(IW,"onAnimationEnd");wu(NW,"onAnimationIteration");wu(PW,"onAnimationStart");wu("dblclick","onDoubleClick");wu("focusin","onFocus");wu("focusout","onBlur");wu(Ise,"onTransitionRun");wu(Nse,"onTransitionStart");wu(Pse,"onTransitionCancel");wu(LW,"onTransitionEnd");ay("onMouseEnter",["mouseout","mouseover"]);ay("onMouseLeave",["mouseout","mouseover"]);ay("onPointerEnter",["pointerout","pointerover"]);ay("onPointerLeave",["pointerout","pointerover"]);vg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vg("onBeforeInput",["compositionend","keypress","textInput","paste"]);vg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Z1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),boe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Z1));function vX(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=c;try{a(r)}catch(u){xT(u)}r.currentTarget=null,a=l}else for(s=0;s<i.length;s++){if(o=i[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=c;try{a(r)}catch(u){xT(u)}r.currentTarget=null,a=l}}}}function mi(t,e){var n=e[mI];n===void 0&&(n=e[mI]=new Set);var i=t+"__bubble";n.has(i)||(xX(e,t,2,!1),n.add(i))}function rk(t,e,n){var i=0;e&&(i|=4),xX(n,t,i,e)}var bw="_reactListening"+Math.random().toString(36).slice(2);function VL(t){if(!t[bw]){t[bw]=!0,pW.forEach(function(n){n!=="selectionchange"&&(boe.has(n)||rk(n,!1,t),rk(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bw]||(e[bw]=!0,rk("selectionchange",!1,e))}}function xX(t,e,n,i){switch(OX(e)){case 2:var r=Goe;break;case 8:r=Woe;break;default:r=XL}n=r.bind(null,e,n,t),r=void 0,!vI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ak(t,e,n,i,r){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var o=i.stateNode.containerInfo;if(o===r)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;o!==null;){if(s=b0(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){i=a=s;continue e}o=o.parentNode}}i=i.return}SW(function(){var c=a,u=cL(n),f=[];e:{var h=UW.get(t);if(h!==void 0){var d=mC,m=t;switch(t){case"keypress":if(RM(n)===0)break e;case"keydown":case"keyup":d=fse;break;case"focusin":m="focus",d=P3;break;case"focusout":m="blur",d=P3;break;case"beforeblur":case"afterblur":d=P3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=X8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Qae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=pse;break;case IW:case NW:case PW:d=nse;break;case LW:d=gse;break;case"scroll":case"scrollend":d=Jae;break;case"wheel":d=yse;break;case"copy":case"cut":case"paste":d=rse;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=$8;break;case"toggle":case"beforetoggle":d=xse}var y=(e&4)!==0,v=!y&&(t==="scroll"||t==="scrollend"),g=y?h!==null?h+"Capture":null:h;y=[];for(var x=c,_;x!==null;){var E=x;if(_=E.stateNode,E=E.tag,E!==5&&E!==26&&E!==27||_===null||g===null||(E=q1(x,g),E!=null&&y.push(Q1(x,E,_))),v)break;x=x.return}0<y.length&&(h=new d(h,m,null,n,u),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==yI&&(m=n.relatedTarget||n.fromElement)&&(b0(m)||m[qy]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=c,m=m?b0(m):null,m!==null&&(v=N_(m),y=m.tag,m!==v||y!==5&&y!==27&&y!==6)&&(m=null)):(d=null,m=c),d!==m)){if(y=X8,E="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=$8,E="onPointerLeave",g="onPointerEnter",x="pointer"),v=d==null?h:$x(d),_=m==null?h:$x(m),h=new y(E,x+"leave",d,n,u),h.target=v,h.relatedTarget=_,E=null,b0(u)===c&&(y=new y(g,x+"enter",m,n,u),y.target=_,y.relatedTarget=v,E=y),v=E,d&&m)t:{for(y=d,g=m,x=0,_=y;_;_=ob(_))x++;for(_=0,E=g;E;E=ob(E))_++;for(;0<x-_;)y=ob(y),x--;for(;0<_-x;)g=ob(g),_--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=ob(y),g=ob(g)}y=null}else y=null;d!==null&&jz(f,h,d,y,!1),m!==null&&v!==null&&jz(f,v,m,y,!0)}}e:{if(h=c?$x(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var T=Q8;else if(Z8(h))if(CW)T=kse;else{T=Cse;var w=Ase}else d=h.nodeName,!d||d.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&lL(c.elementType)&&(T=Q8):T=Rse;if(T&&(T=T(t,c))){AW(f,T,n,u);break e}w&&w(t,h,c),t==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&bI(h,"number",h.value)}switch(w=c?$x(c):window,t){case"focusin":(Z8(w)||w.contentEditable==="true")&&(x0=w,xI=c,h1=null);break;case"focusout":h1=xI=x0=null;break;case"mousedown":_I=!0;break;case"contextmenu":case"mouseup":case"dragend":_I=!1,rz(f,n,u);break;case"selectionchange":if(Ose)break;case"keydown":case"keyup":rz(f,n,u)}var A;if(hL)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else v0?MW(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(EW&&n.locale!=="ko"&&(v0||C!=="onCompositionStart"?C==="onCompositionEnd"&&v0&&(A=wW()):(Od=u,uL="value"in Od?Od.value:Od.textContent,v0=!0)),w=CT(c,C),0<w.length&&(C=new Y8(C,t,null,n,u),f.push({event:C,listeners:w}),A?C.data=A:(A=TW(n),A!==null&&(C.data=A)))),(A=Sse?wse(t,n):Ese(t,n))&&(C=CT(c,"onBeforeInput"),0<C.length&&(w=new Y8("onBeforeInput","beforeinput",null,n,u),f.push({event:w,listeners:C}),w.data=A)),poe(f,t,c,n,u)}vX(f,e)})}function Q1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function CT(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=q1(t,n),r!=null&&i.unshift(Q1(t,r,a)),r=q1(t,e),r!=null&&i.push(Q1(t,r,a))),t.tag===3)return i;t=t.return}return[]}function ob(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jz(t,e,n,i,r){for(var a=e._reactName,s=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=q1(n,a),c!=null&&s.unshift(Q1(n,c,l))):r||(c=q1(n,a),c!=null&&s.push(Q1(n,c,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var yoe=/\r\n?/g,voe=/\u0000|\uFFFD/g;function Hz(t){return(typeof t=="string"?t:""+t).replace(yoe,`
`).replace(voe,"")}function _X(t,e){return e=Hz(e),Hz(t)===e}function AC(){}function hr(t,e,n,i,r,a){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||sy(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&sy(t,""+i);break;case"className":uw(t,"class",i);break;case"tabIndex":uw(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":uw(t,n,i);break;case"style":_W(t,i,a);break;case"data":if(e!=="object"){uw(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=AM(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&hr(t,e,"name",r.name,r,null),hr(t,e,"formEncType",r.formEncType,r,null),hr(t,e,"formMethod",r.formMethod,r,null),hr(t,e,"formTarget",r.formTarget,r,null)):(hr(t,e,"encType",r.encType,r,null),hr(t,e,"method",r.method,r,null),hr(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=AM(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=AC);break;case"onScroll":i!=null&&mi("scroll",t);break;case"onScrollEnd":i!=null&&mi("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(kt(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(kt(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=AM(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":mi("beforetoggle",t),mi("toggle",t),TM(t,"popover",i);break;case"xlinkActuate":Lf(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Lf(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Lf(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Lf(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Lf(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Lf(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Lf(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Lf(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Lf(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":TM(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=$ae.get(n)||n,TM(t,n,i))}}function qI(t,e,n,i,r,a){switch(n){case"style":_W(t,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(kt(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(kt(60));t.innerHTML=n}}break;case"children":typeof i=="string"?sy(t,i):(typeof i=="number"||typeof i=="bigint")&&sy(t,""+i);break;case"onScroll":i!=null&&mi("scroll",t);break;case"onScrollEnd":i!=null&&mi("scrollend",t);break;case"onClick":i!=null&&(t.onclick=AC);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mW.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),a=t[Uo]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,r),typeof i=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):TM(t,n,i)}}}function xs(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mi("error",t),mi("load",t);var i=!1,r=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(kt(137,e));default:hr(t,e,a,s,n,null)}}r&&hr(t,e,"srcSet",n.srcSet,n,null),i&&hr(t,e,"src",n.src,n,null);return;case"input":mi("invalid",t);var o=a=s=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(kt(137,e));break;default:hr(t,e,i,u,n,null)}}yW(t,a,o,l,c,s,r,!1),cT(t);return;case"select":mi("invalid",t),i=s=a=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":i=o;default:hr(t,e,r,o,n,null)}e=a,n=s,t.multiple=!!i,e!=null?N0(t,!!i,e,!1):n!=null&&N0(t,!!i,n,!0);return;case"textarea":mi("invalid",t),a=r=i=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":i=o;break;case"defaultValue":r=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(kt(91));break;default:hr(t,e,s,o,n,null)}xW(t,i,r,a),cT(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:hr(t,e,l,i,n,null)}return;case"dialog":mi("beforetoggle",t),mi("toggle",t),mi("cancel",t),mi("close",t);break;case"iframe":case"object":mi("load",t);break;case"video":case"audio":for(i=0;i<Z1.length;i++)mi(Z1[i],t);break;case"image":mi("error",t),mi("load",t);break;case"details":mi("toggle",t);break;case"embed":case"source":case"link":mi("error",t),mi("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(kt(137,e));default:hr(t,e,c,i,n,null)}return;default:if(lL(e)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&qI(t,e,u,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&hr(t,e,o,i,n,null))}function xoe(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,o=null,l=null,c=null,u=null;for(d in n){var f=n[d];if(n.hasOwnProperty(d)&&f!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":l=f;default:i.hasOwnProperty(d)||hr(t,e,d,null,i,f)}}for(var h in i){var d=i[h];if(f=n[h],i.hasOwnProperty(h)&&(d!=null||f!=null))switch(h){case"type":a=d;break;case"name":r=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(kt(137,e));break;default:d!==f&&hr(t,e,h,d,i,f)}}gI(t,s,o,l,c,u,a,r);return;case"select":d=s=o=h=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":d=l;default:i.hasOwnProperty(a)||hr(t,e,a,null,i,l)}for(r in i)if(a=i[r],l=n[r],i.hasOwnProperty(r)&&(a!=null||l!=null))switch(r){case"value":h=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&hr(t,e,r,a,i,l)}e=o,n=s,i=d,h!=null?N0(t,!!n,h,!1):!!i!=!!n&&(e!=null?N0(t,!!n,e,!0):N0(t,!!n,n?[]:"",!1));return;case"textarea":d=h=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:hr(t,e,o,null,i,r)}for(s in i)if(r=i[s],a=n[s],i.hasOwnProperty(s)&&(r!=null||a!=null))switch(s){case"value":h=r;break;case"defaultValue":d=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(kt(91));break;default:r!==a&&hr(t,e,s,r,i,a)}vW(t,h,d);return;case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&h!=null&&!i.hasOwnProperty(m))switch(m){case"selected":t.selected=!1;break;default:hr(t,e,m,null,i,h)}for(l in i)if(h=i[l],d=n[l],i.hasOwnProperty(l)&&h!==d&&(h!=null||d!=null))switch(l){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:hr(t,e,l,h,i,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!i.hasOwnProperty(y)&&hr(t,e,y,null,i,h);for(c in i)if(h=i[c],d=n[c],i.hasOwnProperty(c)&&h!==d&&(h!=null||d!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(kt(137,e));break;default:hr(t,e,c,h,i,d)}return;default:if(lL(e)){for(var v in n)h=n[v],n.hasOwnProperty(v)&&h!==void 0&&!i.hasOwnProperty(v)&&qI(t,e,v,void 0,i,h);for(u in i)h=i[u],d=n[u],!i.hasOwnProperty(u)||h===d||h===void 0&&d===void 0||qI(t,e,u,h,i,d);return}}for(var g in n)h=n[g],n.hasOwnProperty(g)&&h!=null&&!i.hasOwnProperty(g)&&hr(t,e,g,null,i,h);for(f in i)h=i[f],d=n[f],!i.hasOwnProperty(f)||h===d||h==null&&d==null||hr(t,e,f,h,i,d)}var XI=null,YI=null;function RT(t){return t.nodeType===9?t:t.ownerDocument}function Vz(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SX(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function $I(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sk=null;function _oe(){var t=window.event;return t&&t.type==="popstate"?t===sk?!1:(sk=t,!0):(sk=null,!1)}var wX=typeof setTimeout=="function"?setTimeout:void 0,Soe=typeof clearTimeout=="function"?clearTimeout:void 0,Gz=typeof Promise=="function"?Promise:void 0,woe=typeof queueMicrotask=="function"?queueMicrotask:typeof Gz<"u"?function(t){return Gz.resolve(null).then(t).catch(Eoe)}:wX;function Eoe(t){setTimeout(function(){throw t})}function op(t){return t==="head"}function Wz(t,e){var n=e,i=0,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<i&&8>i){n=i;var s=t.ownerDocument;if(n&1&&w1(s.documentElement),n&2&&w1(s.body),n&4)for(n=s.head,w1(n),s=n.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[B_]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=o}}if(r===0){t.removeChild(a),r_(e);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=a}while(n);r_(e)}function KI(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":KI(n),oL(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Moe(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[B_])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=mu(t.nextSibling),t===null)break}return null}function Toe(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=mu(t.nextSibling),t===null))return null;return t}function JI(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Aoe(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function mu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var ZI=null;function qz(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function EX(t,e,n){switch(e=RT(n),t){case"html":if(t=e.documentElement,!t)throw Error(kt(452));return t;case"head":if(t=e.head,!t)throw Error(kt(453));return t;case"body":if(t=e.body,!t)throw Error(kt(454));return t;default:throw Error(kt(451))}}function w1(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);oL(t)}var Sc=new Map,Xz=new Set;function kT(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Rh=qi.d;qi.d={f:Coe,r:Roe,D:koe,C:Doe,L:Ooe,m:Ioe,X:Poe,S:Noe,M:Loe};function Coe(){var t=Rh.f(),e=EC();return t||e}function Roe(t){var e=Xy(t);e!==null&&e.tag===5&&e.type==="form"?bq(e):Rh.r(t)}var Ky=typeof document>"u"?null:document;function MX(t,e,n){var i=Ky;if(i&&typeof e=="string"&&e){var r=sc(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Xz.has(r)||(Xz.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),xs(e,"link",t),Ka(e),i.head.appendChild(e)))}}function koe(t){Rh.D(t),MX("dns-prefetch",t,null)}function Doe(t,e){Rh.C(t,e),MX("preconnect",t,e)}function Ooe(t,e,n){Rh.L(t,e,n);var i=Ky;if(i&&t&&e){var r='link[rel="preload"][as="'+sc(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+sc(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+sc(n.imageSizes)+'"]')):r+='[href="'+sc(t)+'"]';var a=r;switch(e){case"style":a=py(t);break;case"script":a=Jy(t)}Sc.has(a)||(t=Lr({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Sc.set(a,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Y_(a))||e==="script"&&i.querySelector($_(a))||(e=i.createElement("link"),xs(e,"link",t),Ka(e),i.head.appendChild(e)))}}function Ioe(t,e){Rh.m(t,e);var n=Ky;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+sc(i)+'"][href="'+sc(t)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Jy(t)}if(!Sc.has(a)&&(t=Lr({rel:"modulepreload",href:t},e),Sc.set(a,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($_(a)))return}i=n.createElement("link"),xs(i,"link",t),Ka(i),n.head.appendChild(i)}}}function Noe(t,e,n){Rh.S(t,e,n);var i=Ky;if(i&&t){var r=I0(i).hoistableStyles,a=py(t);e=e||"default";var s=r.get(a);if(!s){var o={loading:0,preload:null};if(s=i.querySelector(Y_(a)))o.loading=5;else{t=Lr({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Sc.get(a))&&GL(t,n);var l=s=i.createElement("link");Ka(l),xs(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,LM(s,e,i)}s={type:"stylesheet",instance:s,count:1,state:o},r.set(a,s)}}}function Poe(t,e){Rh.X(t,e);var n=Ky;if(n&&t){var i=I0(n).hoistableScripts,r=Jy(t),a=i.get(r);a||(a=n.querySelector($_(r)),a||(t=Lr({src:t,async:!0},e),(e=Sc.get(r))&&WL(t,e),a=n.createElement("script"),Ka(a),xs(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function Loe(t,e){Rh.M(t,e);var n=Ky;if(n&&t){var i=I0(n).hoistableScripts,r=Jy(t),a=i.get(r);a||(a=n.querySelector($_(r)),a||(t=Lr({src:t,async:!0,type:"module"},e),(e=Sc.get(r))&&WL(t,e),a=n.createElement("script"),Ka(a),xs(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function Yz(t,e,n,i){var r=(r=Fd.current)?kT(r):null;if(!r)throw Error(kt(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=py(n.href),n=I0(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=py(n.href);var a=I0(r).hoistableStyles,s=a.get(t);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=r.querySelector(Y_(t)))&&!a._p&&(s.instance=a,s.state.loading=5),Sc.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sc.set(t,n),a||Uoe(r,t,n,s.state))),e&&i===null)throw Error(kt(528,""));return s}if(e&&i!==null)throw Error(kt(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Jy(n),n=I0(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(kt(444,t))}}function py(t){return'href="'+sc(t)+'"'}function Y_(t){return'link[rel="stylesheet"]['+t+"]"}function TX(t){return Lr({},t,{"data-precedence":t.precedence,precedence:null})}function Uoe(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),xs(e,"link",n),Ka(e),t.head.appendChild(e))}function Jy(t){return'[src="'+sc(t)+'"]'}function $_(t){return"script[async]"+t}function $z(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+sc(n.href)+'"]');if(i)return e.instance=i,Ka(i),i;var r=Lr({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Ka(i),xs(i,"style",r),LM(i,n.precedence,t),e.instance=i;case"stylesheet":r=py(n.href);var a=t.querySelector(Y_(r));if(a)return e.state.loading|=4,e.instance=a,Ka(a),a;i=TX(n),(r=Sc.get(r))&&GL(i,r),a=(t.ownerDocument||t).createElement("link"),Ka(a);var s=a;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),xs(a,"link",i),e.state.loading|=4,LM(a,n.precedence,t),e.instance=a;case"script":return a=Jy(n.src),(r=t.querySelector($_(a)))?(e.instance=r,Ka(r),r):(i=n,(r=Sc.get(a))&&(i=Lr({},n),WL(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Ka(r),xs(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(kt(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,LM(i,n.precedence,t));return e.instance}function LM(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,s=0;s<i.length;s++){var o=i[s];if(o.dataset.precedence===e)a=o;else if(a!==r)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function GL(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function WL(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var UM=null;function Kz(t,e,n){if(UM===null){var i=new Map,r=UM=new Map;r.set(n,i)}else r=UM,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var a=n[r];if(!(a[B_]||a[Hs]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var o=i.get(s);o?o.push(a):i.set(s,[a])}}return i}function Jz(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Boe(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function AX(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var e_=null;function Foe(){}function zoe(t,e,n){if(e_===null)throw Error(kt(475));var i=e_;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=py(n.href),a=t.querySelector(Y_(r));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=DT.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=a,Ka(a);return}a=t.ownerDocument||t,n=TX(n),(r=Sc.get(r))&&GL(n,r),a=a.createElement("link"),Ka(a);var s=a;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),xs(a,"link",n),e.instance=a}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=DT.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function joe(){if(e_===null)throw Error(kt(475));var t=e_;return t.stylesheets&&t.count===0&&QI(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&QI(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function DT(){if(this.count--,this.count===0){if(this.stylesheets)QI(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var OT=null;function QI(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,OT=new Map,e.forEach(Hoe,t),OT=null,DT.call(t))}function Hoe(t,e){if(!(e.state.loading&4)){var n=OT.get(t);if(n)var i=n.get(null);else{n=new Map,OT.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}r=e.instance,s=r.getAttribute("data-precedence"),a=n.get(s)||i,a===i&&n.set(null,r),n.set(s,r),this.count++,i=DT.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var t_={$$typeof:Qf,Provider:null,Consumer:null,_currentValue:Bm,_currentValue2:Bm,_threadCount:0};function Voe(t,e,n,i,r,a,s,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C3(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C3(0),this.hiddenUpdates=C3(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function CX(t,e,n,i,r,a,s,o,l,c,u,f){return t=new Voe(t,e,n,s,o,l,c,f),e=1,a===!0&&(e|=24),a=dl(3,null,null,e),t.current=a,a.stateNode=t,e=vL(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:e},_L(a),t}function RX(t){return t?(t=w0,t):w0}function kX(t,e,n,i,r,a){r=RX(r),i.context===null?i.context=r:i.pendingContext=r,i=zd(e),i.payload={element:n},a=a===void 0?null:a,a!==null&&(i.callback=a),n=jd(t,i,e),n!==null&&(xl(n,t,e),m1(n,t,e))}function Zz(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qL(t,e){Zz(t,e),(t=t.alternate)&&Zz(t,e)}function DX(t){if(t.tag===13){var e=Yy(t,67108864);e!==null&&xl(e,t,67108864),qL(t,67108864)}}var IT=!0;function Goe(t,e,n,i){var r=In.T;In.T=null;var a=qi.p;try{qi.p=2,XL(t,e,n,i)}finally{qi.p=a,In.T=r}}function Woe(t,e,n,i){var r=In.T;In.T=null;var a=qi.p;try{qi.p=8,XL(t,e,n,i)}finally{qi.p=a,In.T=r}}function XL(t,e,n,i){if(IT){var r=eN(i);if(r===null)ak(t,e,i,NT,n),Qz(t,i);else if(Xoe(r,t,e,n,i))i.stopPropagation();else if(Qz(t,i),e&4&&-1<qoe.indexOf(t)){for(;r!==null;){var a=Xy(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=cm(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-yl(s);o.entanglements[1]|=l,s&=~l}bf(a),!(lr&6)&&(ET=nf()+500,X_(0))}}break;case 13:o=Yy(a,2),o!==null&&xl(o,a,2),EC(),qL(a,2)}if(a=eN(i),a===null&&ak(t,e,i,NT,n),a===r)break;r=a}r!==null&&i.stopPropagation()}else ak(t,e,i,null,n)}}function eN(t){return t=cL(t),YL(t)}var NT=null;function YL(t){if(NT=null,t=b0(t),t!==null){var e=N_(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=nW(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return NT=t,null}function OX(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dae()){case sW:return 2;case oW:return 8;case lT:case Oae:return 32;case lW:return 268435456;default:return 32}default:return 32}}var tN=!1,Gd=null,Wd=null,qd=null,n_=new Map,i_=new Map,Ad=[],qoe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qz(t,e){switch(t){case"focusin":case"focusout":Gd=null;break;case"dragenter":case"dragleave":Wd=null;break;case"mouseover":case"mouseout":qd=null;break;case"pointerover":case"pointerout":n_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":i_.delete(e.pointerId)}}function ex(t,e,n,i,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},e!==null&&(e=Xy(e),e!==null&&DX(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Xoe(t,e,n,i,r){switch(e){case"focusin":return Gd=ex(Gd,t,e,n,i,r),!0;case"dragenter":return Wd=ex(Wd,t,e,n,i,r),!0;case"mouseover":return qd=ex(qd,t,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return n_.set(a,ex(n_.get(a)||null,t,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,i_.set(a,ex(i_.get(a)||null,t,e,n,i,r)),!0}return!1}function IX(t){var e=b0(t.target);if(e!==null){var n=N_(e);if(n!==null){if(e=n.tag,e===13){if(e=nW(n),e!==null){t.blockedOn=e,zae(t.priority,function(){if(n.tag===13){var i=vl();i=aL(i);var r=Yy(n,i);r!==null&&xl(r,n,i),qL(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function BM(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eN(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);yI=i,n.target.dispatchEvent(i),yI=null}else return e=Xy(n),e!==null&&DX(e),t.blockedOn=n,!1;e.shift()}return!0}function e9(t,e,n){BM(t)&&n.delete(e)}function Yoe(){tN=!1,Gd!==null&&BM(Gd)&&(Gd=null),Wd!==null&&BM(Wd)&&(Wd=null),qd!==null&&BM(qd)&&(qd=null),n_.forEach(e9),i_.forEach(e9)}function yw(t,e){t.blockedOn===e&&(t.blockedOn=null,tN||(tN=!0,Ua.unstable_scheduleCallback(Ua.unstable_NormalPriority,Yoe)))}var vw=null;function t9(t){vw!==t&&(vw=t,Ua.unstable_scheduleCallback(Ua.unstable_NormalPriority,function(){vw===t&&(vw=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(YL(i||n)===null)continue;break}var a=Xy(n);a!==null&&(t.splice(e,3),e-=3,NI(a,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function r_(t){function e(l){return yw(l,t)}Gd!==null&&yw(Gd,t),Wd!==null&&yw(Wd,t),qd!==null&&yw(qd,t),n_.forEach(e),i_.forEach(e);for(var n=0;n<Ad.length;n++){var i=Ad[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Ad.length&&(n=Ad[0],n.blockedOn===null);)IX(n),n.blockedOn===null&&Ad.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],a=n[i+1],s=r[Uo]||null;if(typeof a=="function")s||t9(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[Uo]||null)o=s.formAction;else if(YL(r)!==null)continue}else o=s.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),t9(n)}}}function $L(t){this._internalRoot=t}CC.prototype.render=$L.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(kt(409));var n=e.current,i=vl();kX(n,i,t,e,null,null)};CC.prototype.unmount=$L.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kX(t.current,2,null,t,null,null),EC(),e[qy]=null}};function CC(t){this._internalRoot=t}CC.prototype.unstable_scheduleHydration=function(t){if(t){var e=dW();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ad.length&&e!==0&&e<Ad[n].priority;n++);Ad.splice(n,0,t),n===0&&IX(t)}};var n9=eW.version;if(n9!=="19.1.1")throw Error(kt(527,n9,"19.1.1"));qi.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(kt(188)):(t=Object.keys(t).join(","),Error(kt(268,t)));return t=Eae(e),t=t!==null?iW(t):null,t=t===null?null:t.stateNode,t};var $oe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:In,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xw.isDisabled&&xw.supportsFiber)try{P_=xw.inject($oe),bl=xw}catch{}}hC.createRoot=function(t,e){if(!tW(t))throw Error(kt(299));var n=!1,i="",r=Cq,a=Rq,s=kq,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=CX(t,1,!1,null,null,n,i,r,a,s,o,null),t[qy]=e.current,VL(t),new $L(e)};hC.hydrateRoot=function(t,e,n){if(!tW(t))throw Error(kt(299));var i=!1,r="",a=Cq,s=Rq,o=kq,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),e=CX(t,1,!0,e,n??null,i,r,a,s,o,l,c),e.context=RX(null),n=e.current,i=vl(),i=aL(i),r=zd(i),r.callback=null,jd(n,r,i),n=i,e.current.lanes=n,U_(e,n),bf(e),t[qy]=e.current,VL(t),new CC(e)};hC.version="19.1.1";function NX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NX)}catch(t){console.error(t)}}NX(),j7.exports=hC;var PX=j7.exports;const Koe=Cc(PX);var nN=new Map,_w=new WeakMap,i9=0,Joe=void 0;function Zoe(t){return t?(_w.has(t)||(i9+=1,_w.set(t,i9.toString())),_w.get(t)):"0"}function Qoe(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?Zoe(t.root):t[e]}`).toString()}function ele(t){const e=Qoe(t);let n=nN.get(e);if(!n){const i=new Map;let r;const a=new IntersectionObserver(s=>{s.forEach(o=>{var l;const c=o.isIntersecting&&r.some(u=>o.intersectionRatio>=u);t.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=c),(l=i.get(o.target))==null||l.forEach(u=>{u(c,o)})})},t);r=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:a,elements:i},nN.set(e,n)}return n}function tle(t,e,n={},i=Joe){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const l=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:r,observer:a,elements:s}=ele(n),o=s.get(t)||[];return s.has(t)||s.set(t,o),o.push(e),a.observe(t),function(){o.splice(o.indexOf(e),1),o.length===0&&(s.delete(t),a.unobserve(t)),s.size===0&&(a.disconnect(),nN.delete(r))}}function nle({threshold:t,delay:e,trackVisibility:n,rootMargin:i,root:r,triggerOnce:a,skip:s,initialInView:o,fallbackInView:l,onChange:c}={}){var u;const[f,h]=I.useState(null),d=I.useRef(c),[m,y]=I.useState({inView:!!o,entry:void 0});d.current=c,I.useEffect(()=>{if(s||!f)return;let _;return _=tle(f,(E,T)=>{y({inView:E,entry:T}),d.current&&d.current(E,T),T.isIntersecting&&a&&_&&(_(),_=void 0)},{root:r,rootMargin:i,threshold:t,trackVisibility:n,delay:e},l),()=>{_&&_()}},[Array.isArray(t)?t.toString():t,f,r,i,a,s,n,l,e]);const v=(u=m.entry)==null?void 0:u.target,g=I.useRef(void 0);!f&&v&&!a&&!s&&g.current!==v&&(g.current=v,y({inView:!!o,entry:void 0}));const x=[h,m.inView,m.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}function fc(t,e,n){return e===void 0&&n===void 0?t:e!==void 0&&n===void 0?Math.max(t,e):Math.min(e===void 0&&n!==void 0?t:Math.max(t,e),n)}function LX(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}function ym(t){const e=I.useRef(t);return I.useEffect(()=>{e.current=t}),I.useMemo(()=>(...n)=>e.current?.(...n),[])}function RC(t,e){const{delay:n,flushOnUnmount:i,leading:r}=typeof e=="number"?{delay:e,flushOnUnmount:!1,leading:!1}:e,a=ym(t),s=I.useRef(0),o=I.useMemo(()=>{const l=Object.assign((...c)=>{window.clearTimeout(s.current);const u=l._isFirstCall;l._isFirstCall=!1;function f(){window.clearTimeout(s.current),s.current=0,l._isFirstCall=!0}if(r&&u){a(...c);const m=()=>{f()},y=()=>{s.current!==0&&(f(),a(...c))},v=()=>{f()};l.flush=y,l.cancel=v,s.current=window.setTimeout(m,n);return}if(r&&!u){const m=()=>{s.current!==0&&(f(),a(...c))},y=()=>{f()};l.flush=m,l.cancel=y;const v=()=>{f()};s.current=window.setTimeout(v,n);return}const h=()=>{s.current!==0&&(f(),a(...c))},d=()=>{f()};l.flush=h,l.cancel=d,s.current=window.setTimeout(h,n)},{flush:()=>{},cancel:()=>{},_isFirstCall:!0});return l},[a,n,r]);return I.useEffect(()=>()=>{i?o.flush():o.cancel()},[o,i]),o}const ile=["mousedown","touchstart"];function rle(t,e,n){const i=I.useRef(null),r=e||ile;return I.useEffect(()=>{const a=s=>{const{target:o}=s??{};if(Array.isArray(n)){const l=!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!s.composedPath().includes(u))&&!l&&t()}else i.current&&!i.current.contains(o)&&t()};return r.forEach(s=>document.addEventListener(s,a)),()=>{r.forEach(s=>document.removeEventListener(s,a))}},[i,t,n]),i}function ale(t={timeout:2e3}){const[e,n]=I.useState(null),[i,r]=I.useState(!1),[a,s]=I.useState(null),o=u=>{window.clearTimeout(a),s(window.setTimeout(()=>r(!1),t.timeout)),r(u)};return{copy:u=>{"clipboard"in navigator?navigator.clipboard.writeText(u).then(()=>o(!0)).catch(f=>n(f)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{r(!1),n(null),window.clearTimeout(a)},error:e,copied:i}}function sle(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function ole(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function KL(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[i,r]=I.useState(n?e:ole(t)),a=I.useRef(null);return I.useEffect(()=>{if("matchMedia"in window)return a.current=window.matchMedia(t),r(a.current.matches),sle(a.current,s=>r(s.matches))},[t]),i||!1}function lle(t,e){return KL("(prefers-color-scheme: dark)",t==="dark",e)?"dark":"light"}const Zy=typeof document<"u"?I.useLayoutEffect:I.useEffect;function xc(t,e){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function UX({opened:t,shouldReturnFocus:e=!0}){const n=I.useRef(null),i=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return xc(()=>{let r=-1;const a=s=>{s.key==="Tab"&&window.clearTimeout(r)};return document.addEventListener("keydown",a),t?n.current=document.activeElement:e&&(r=window.setTimeout(i,10)),()=>{window.clearTimeout(r),document.removeEventListener("keydown",a)}},[t,e]),i}const cle=/input|select|textarea|button|object/,BX="a, input, select, textarea, button, object, [tabindex]";function ule(t){return t.style.display==="none"}function fle(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(ule(n))return!1;n=n.parentNode}return!0}function FX(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function iN(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(FX(t));return(cle.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&fle(t)}function zX(t){const e=FX(t);return(Number.isNaN(e)||e>=0)&&iN(t)}function hle(t){return Array.from(t.querySelectorAll(BX)).filter(zX)}function dle(t,e){const n=hle(t);if(!n.length){e.preventDefault();return}const i=n[e.shiftKey?0:n.length-1],r=t.getRootNode();let a=i===r.activeElement||t===r.activeElement;const s=r.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(a=n.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===s.getAttribute("name")).includes(i)),!a)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function ple(t=!0){const e=I.useRef(null),n=r=>{let a=r.querySelector("[data-autofocus]");if(!a){const s=Array.from(r.querySelectorAll(BX));a=s.find(zX)||s.find(iN)||null,!a&&iN(r)&&(a=r)}a&&a.focus({preventScroll:!0})},i=I.useCallback(r=>{t&&r!==null&&e.current!==r&&(r?(setTimeout(()=>{r.getRootNode()&&n(r)}),e.current=r):e.current=null)},[t]);return I.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const r=a=>{a.key==="Tab"&&e.current&&dle(e.current,a)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t]),i}const mle=t=>(t+1)%1e6;function gle(){const[,t]=I.useReducer(mle,0);return t}const ble=ke.useId||(()=>{});function yle(){const t=ble();return t?`mantine-${t.replace(/:/g,"")}`:""}function yf(t){const e=yle(),[n,i]=I.useState(e);return Zy(()=>{i(LX())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function vle(t,e,n){I.useEffect(()=>(window.addEventListener(t,e,n),()=>window.removeEventListener(t,e,n)),[t,e])}function PT(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function jX(...t){const e=new Map;return n=>{if(t.forEach(i=>{const r=PT(i,n);r&&e.set(i,r)}),e.size>0)return()=>{t.forEach(i=>{const r=e.get(i);r&&typeof r=="function"?r():PT(i,null)}),e.clear()}}}function As(...t){return I.useCallback(jX(...t),t)}function HX(t){return{x:fc(t.x,0,1),y:fc(t.y,0,1)}}function JL(t,e,n="ltr"){const i=I.useRef(!1),r=I.useRef(!1),a=I.useRef(0),[s,o]=I.useState(!1),l=I.useRef(null);return I.useEffect(()=>{i.current=!0},[]),{ref:I.useCallback(u=>{if(l.current&&(l.current(),l.current=null),!u)return;const f=({x:E,y:T})=>{cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{if(i.current&&u){u.style.userSelect="none";const w=u.getBoundingClientRect();if(w.width&&w.height){const A=fc((E-w.left)/w.width,0,1);t({x:n==="ltr"?A:1-A,y:fc((T-w.top)/w.height,0,1)})}}})},h=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("touchend",y)},d=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",y)},m=()=>{!r.current&&i.current&&(r.current=!0,typeof e?.onScrubStart=="function"&&e.onScrubStart(),o(!0),h())},y=()=>{r.current&&i.current&&(r.current=!1,o(!1),d(),setTimeout(()=>{typeof e?.onScrubEnd=="function"&&e.onScrubEnd()},0))},v=E=>{m(),E.preventDefault(),g(E)},g=E=>f({x:E.clientX,y:E.clientY}),x=E=>{E.cancelable&&E.preventDefault(),m(),_(E)},_=E=>{E.cancelable&&E.preventDefault(),f({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};u.addEventListener("mousedown",v),u.addEventListener("touchstart",x,{passive:!1}),l.current=()=>{u.removeEventListener("mousedown",v),u.removeEventListener("touchstart",x)}},[n,t]),active:s}}function Ml({value:t,defaultValue:e,finalValue:n,onChange:i=()=>{}}){const[r,a]=I.useState(e!==void 0?e:n),s=(o,...l)=>{a(o),i?.(o,...l)};return t!==void 0?[t,i,!0]:[r,s,!1]}function kC(t,e){return KL("(prefers-reduced-motion: reduce)",t,e)}const xle={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function _le(t){const e=I.useRef(0),n=I.useRef(null),[i,r]=I.useState(xle),a=I.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{if(n.current){const l=o.borderBoxSize?.[0]||o.contentBoxSize?.[0];if(l){const c=l.inlineSize,u=l.blockSize;r({width:c,height:u,x:o.contentRect.x,y:o.contentRect.y,top:o.contentRect.top,left:o.contentRect.left,bottom:o.contentRect.bottom,right:o.contentRect.right})}else r(o.contentRect)}}))}):null,[]);return I.useEffect(()=>(n.current&&a?.observe(n.current,t),()=>{a?.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[n.current]),[n,i]}function VX(t){const[e,{width:n,height:i}]=_le(t);return{ref:e,width:n,height:i}}function wc(t=!1,e={}){const[n,i]=I.useState(t),r=I.useCallback(()=>{i(o=>o||(e.onOpen?.(),!0))},[e.onOpen]),a=I.useCallback(()=>{i(o=>o&&(e.onClose?.(),!1))},[e.onClose]),s=I.useCallback(()=>{n?a():r()},[a,r,n]);return[n,{open:r,close:a,toggle:s}]}function Sle(t){const e=I.useRef(void 0);return I.useEffect(()=>{e.current=t},[t]),e.current}function wle(){const[t,e]=I.useState(!1);Zy(()=>{e(typeof window<"u"&&!Ele()&&"EyeDropper"in window)},[]);const n=I.useCallback((i={})=>t?new window.EyeDropper().open(i):Promise.resolve(void 0),[t]);return{supported:t,open:n}}function Ele(){return navigator.userAgent.includes("OPR")}function Mle(t){let e=t,n=!1;const i=new Set;return{getState(){return e},updateState(r){e=typeof r=="function"?r(e):r},setState(r){this.updateState(r),i.forEach(a=>a(e))},initialize(r){n||(e=r,n=!0)},subscribe(r){return i.add(r),()=>i.delete(r)}}}function Tle(t){return I.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function Ale(t,e,n){const i=[],r=[],a={};for(const s of t){const o=s.position||e;a[o]=a[o]||0,a[o]+=1,a[o]<=n?r.push(s):i.push(s)}return{notifications:r,queue:i}}const Cle=()=>Mle({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),wg=Cle(),Rle=(t=wg)=>Tle(t);function Qy(t,e){const n=t.getState(),i=e([...n.notifications,...n.queue]),r=Ale(i,n.defaultPosition,n.limit);t.setState({notifications:r.notifications,queue:r.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function kle(t,e=wg){const n=t.id||LX();return Qy(e,i=>t.id&&i.some(r=>r.id===t.id)?i:[...i,{...t,id:n}]),n}function GX(t,e=wg){return Qy(e,n=>n.filter(i=>i.id===t?(i.onClose?.(i),!1):!0)),t}function Dle(t,e=wg){return Qy(e,n=>n.map(i=>i.id===t.id?{...i,...t}:i)),t.id}function Ole(t=wg){Qy(t,()=>[])}function Ile(t=wg){Qy(t,e=>e.slice(0,t.getState().limit))}const _s={show:kle,hide:GX,update:Dle,clean:Ole,cleanQueue:Ile,updateState:Qy};function ts(){return ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ts.apply(null,arguments)}function ZL(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rN(t,e)}function WX(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rN(t,e)}var qX={exports:{}},Nle="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ple=Nle,Lle=Ple;function XX(){}function YX(){}YX.resetWarningCache=XX;var Ule=function(){function t(i,r,a,s,o,l){if(l!==Lle){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:YX,resetWarningCache:XX};return n.PropTypes=n,n};qX.exports=Ule();var $X=qX.exports;const r9={disabled:!1},LT=ke.createContext(null);var Ble=function(e){return e.scrollTop},Jx="unmounted",hm="exited",dm="entering",u0="entered",aN="exiting",kh=function(t){WX(e,t);function e(i,r){var a;a=t.call(this,i,r)||this;var s=r,o=s&&!s.isMounting?i.enter:i.appear,l;return a.appearStatus=null,i.in?o?(l=hm,a.appearStatus=dm):l=u0:i.unmountOnExit||i.mountOnEnter?l=Jx:l=hm,a.state={status:l},a.nextCallback=null,a}e.getDerivedStateFromProps=function(r,a){var s=r.in;return s&&a.status===Jx?{status:hm}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var a=null;if(r!==this.props){var s=this.state.status;this.props.in?s!==dm&&s!==u0&&(a=dm):(s===dm||s===u0)&&(a=aN)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,a,s,o;return a=s=o=r,r!=null&&typeof r!="number"&&(a=r.exit,s=r.enter,o=r.appear!==void 0?r.appear:s),{exit:a,enter:s,appear:o}},n.updateStatus=function(r,a){if(r===void 0&&(r=!1),a!==null)if(this.cancelNextCallback(),a===dm){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:qx.findDOMNode(this);s&&Ble(s)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===hm&&this.setState({status:Jx})},n.performEnter=function(r){var a=this,s=this.props.enter,o=this.context?this.context.isMounting:r,l=this.props.nodeRef?[o]:[qx.findDOMNode(this),o],c=l[0],u=l[1],f=this.getTimeouts(),h=o?f.appear:f.enter;if(!r&&!s||r9.disabled){this.safeSetState({status:u0},function(){a.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:dm},function(){a.props.onEntering(c,u),a.onTransitionEnd(h,function(){a.safeSetState({status:u0},function(){a.props.onEntered(c,u)})})})},n.performExit=function(){var r=this,a=this.props.exit,s=this.getTimeouts(),o=this.props.nodeRef?void 0:qx.findDOMNode(this);if(!a||r9.disabled){this.safeSetState({status:hm},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:aN},function(){r.props.onExiting(o),r.onTransitionEnd(s.exit,function(){r.safeSetState({status:hm},function(){r.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,a){a=this.setNextCallback(a),this.setState(r,a)},n.setNextCallback=function(r){var a=this,s=!0;return this.nextCallback=function(o){s&&(s=!1,a.nextCallback=null,r(o))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(r,a){this.setNextCallback(a);var s=this.props.nodeRef?this.props.nodeRef.current:qx.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!s||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Jx)return null;var a=this.props,s=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var o=ZL(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ke.createElement(LT.Provider,{value:null},typeof s=="function"?s(r,o):ke.cloneElement(ke.Children.only(s),o))},e}(ke.Component);kh.contextType=LT;kh.propTypes={};function lb(){}kh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:lb,onEntering:lb,onEntered:lb,onExit:lb,onExiting:lb,onExited:lb};kh.UNMOUNTED=Jx;kh.EXITED=hm;kh.ENTERING=dm;kh.ENTERED=u0;kh.EXITING=aN;function Fle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QL(t,e){var n=function(a){return e&&I.isValidElement(a)?e(a):a},i=Object.create(null);return t&&I.Children.map(t,function(r){return r}).forEach(function(r){i[r.key]=n(r)}),i}function zle(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var i=Object.create(null),r=[];for(var a in t)a in e?r.length&&(i[a]=r,r=[]):r.push(a);var s,o={};for(var l in e){if(i[l])for(s=0;s<i[l].length;s++){var c=i[l][s];o[i[l][s]]=n(c)}o[l]=n(l)}for(s=0;s<r.length;s++)o[r[s]]=n(r[s]);return o}function wm(t,e,n){return n[e]!=null?n[e]:t.props[e]}function jle(t,e){return QL(t.children,function(n){return I.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:wm(n,"appear",t),enter:wm(n,"enter",t),exit:wm(n,"exit",t)})})}function Hle(t,e,n){var i=QL(t.children),r=zle(e,i);return Object.keys(r).forEach(function(a){var s=r[a];if(I.isValidElement(s)){var o=a in e,l=a in i,c=e[a],u=I.isValidElement(c)&&!c.props.in;l&&(!o||u)?r[a]=I.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:wm(s,"exit",t),enter:wm(s,"enter",t)}):!l&&o&&!u?r[a]=I.cloneElement(s,{in:!1}):l&&o&&I.isValidElement(c)&&(r[a]=I.cloneElement(s,{onExited:n.bind(null,s),in:c.props.in,exit:wm(s,"exit",t),enter:wm(s,"enter",t)}))}}),r}var Vle=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Gle={component:"div",childFactory:function(e){return e}},vd=function(t){WX(e,t);function e(i,r){var a;a=t.call(this,i,r)||this;var s=a.handleExited.bind(Fle(a));return a.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,a){var s=a.children,o=a.handleExited,l=a.firstRender;return{children:l?jle(r,o):Hle(r,s,o),firstRender:!1}},n.handleExited=function(r,a){var s=QL(this.props.children);r.key in s||(r.props.onExited&&r.props.onExited(a),this.mounted&&this.setState(function(o){var l=ts({},o.children);return delete l[r.key],{children:l}}))},n.render=function(){var r=this.props,a=r.component,s=r.childFactory,o=ZL(r,["component","childFactory"]),l=this.state.contextValue,c=Vle(this.state.children).map(s);return delete o.appear,delete o.enter,delete o.exit,a===null?ke.createElement(LT.Provider,{value:l},c):ke.createElement(LT.Provider,{value:l},ke.createElement(a,o,c))},e}(ke.Component);vd.propTypes={};vd.defaultProps=Gle;var Yu=function(){return Yu=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yu.apply(this,arguments)};function KX(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Wle(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var FM="right-scroll-bar-position",zM="width-before-scroll-bar",qle="with-scroll-bars-hidden",Xle="--removed-body-scroll-bar-size";function ok(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Yle(t,e){var n=I.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var $le=typeof window<"u"?I.useLayoutEffect:I.useEffect,a9=new WeakMap;function Kle(t,e){var n=Yle(null,function(i){return t.forEach(function(r){return ok(r,i)})});return $le(function(){var i=a9.get(n);if(i){var r=new Set(i),a=new Set(t),s=n.current;r.forEach(function(o){a.has(o)||ok(o,null)}),a.forEach(function(o){r.has(o)||ok(o,s)})}a9.set(n,t)},[t]),n}function Jle(t){return t}function Zle(t,e){e===void 0&&(e=Jle);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var s=e(a,i);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(i=!0;n.length;){var s=n;n=[],s.forEach(a)}n={push:function(o){return a(o)},filter:function(){return n}}},assignMedium:function(a){i=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(a),s=n}var l=function(){var u=s;s=[],u.forEach(a)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return r}function Qle(t){t===void 0&&(t={});var e=Zle(null);return e.options=Yu({async:!0,ssr:!1},t),e}var JX=function(t){var e=t.sideCar,n=KX(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return I.createElement(i,Yu({},n))};JX.isSideCarExport=!0;function ece(t,e){return t.useMedium(e),JX}var ZX=Qle(),lk=function(){},DC=I.forwardRef(function(t,e){var n=I.useRef(null),i=I.useState({onScrollCapture:lk,onWheelCapture:lk,onTouchMoveCapture:lk}),r=i[0],a=i[1],s=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,h=t.sideCar,d=t.noRelative,m=t.noIsolation,y=t.inert,v=t.allowPinchZoom,g=t.as,x=g===void 0?"div":g,_=t.gapMode,E=KX(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=h,w=Kle([n,e]),A=Yu(Yu({},E),r);return I.createElement(I.Fragment,null,u&&I.createElement(T,{sideCar:ZX,removeScrollBar:c,shards:f,noRelative:d,noIsolation:m,inert:y,setCallbacks:a,allowPinchZoom:!!v,lockRef:n,gapMode:_}),s?I.cloneElement(I.Children.only(o),Yu(Yu({},A),{ref:w})):I.createElement(x,Yu({},A,{className:l,ref:w}),o))});DC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};DC.classNames={fullWidth:zM,zeroRight:FM};var tce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nce(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=tce();return e&&t.setAttribute("nonce",e),t}function ice(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function rce(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ace=function(){var t=0,e=null;return{add:function(n){t==0&&(e=nce())&&(ice(e,n),rce(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},sce=function(){var t=ace();return function(e,n){I.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},QX=function(){var t=sce(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},oce={left:0,top:0,right:0,gap:0},ck=function(t){return parseInt(t||"",10)||0},lce=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[ck(n),ck(i),ck(r)]},cce=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return oce;var e=lce(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},uce=QX(),j0="data-scroll-locked",fce=function(t,e,n,i){var r=t.left,a=t.top,s=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(qle,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(o,"px ").concat(i,`;
  }
  body[`).concat(j0,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(FM,` {
    right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(zM,` {
    margin-right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(FM," .").concat(FM,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(zM," .").concat(zM,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(j0,`] {
    `).concat(Xle,": ").concat(o,`px;
  }
`)},s9=function(){var t=parseInt(document.body.getAttribute(j0)||"0",10);return isFinite(t)?t:0},hce=function(){I.useEffect(function(){return document.body.setAttribute(j0,(s9()+1).toString()),function(){var t=s9()-1;t<=0?document.body.removeAttribute(j0):document.body.setAttribute(j0,t.toString())}},[])},dce=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;hce();var a=I.useMemo(function(){return cce(r)},[r]);return I.createElement(uce,{styles:fce(a,!e,r,n?"":"!important")})},sN=!1;if(typeof window<"u")try{var Sw=Object.defineProperty({},"passive",{get:function(){return sN=!0,!0}});window.addEventListener("test",Sw,Sw),window.removeEventListener("test",Sw,Sw)}catch{sN=!1}var cb=sN?{passive:!1}:!1,pce=function(t){return t.tagName==="TEXTAREA"},eY=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!pce(t)&&n[e]==="visible")},mce=function(t){return eY(t,"overflowY")},gce=function(t){return eY(t,"overflowX")},o9=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=tY(t,i);if(r){var a=nY(t,i),s=a[1],o=a[2];if(s>o)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},bce=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},yce=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},tY=function(t,e){return t==="v"?mce(e):gce(e)},nY=function(t,e){return t==="v"?bce(e):yce(e)},vce=function(t,e){return t==="h"&&e==="rtl"?-1:1},xce=function(t,e,n,i,r){var a=vce(t,window.getComputedStyle(e).direction),s=a*i,o=n.target,l=e.contains(o),c=!1,u=s>0,f=0,h=0;do{if(!o)break;var d=nY(t,o),m=d[0],y=d[1],v=d[2],g=y-v-a*m;(m||g)&&tY(t,o)&&(f+=g,h+=m);var x=o.parentNode;o=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(f)<1||!u&&Math.abs(h)<1)&&(c=!0),c},ww=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},l9=function(t){return[t.deltaX,t.deltaY]},c9=function(t){return t&&"current"in t?t.current:t},_ce=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Sce=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},wce=0,ub=[];function Ece(t){var e=I.useRef([]),n=I.useRef([0,0]),i=I.useRef(),r=I.useState(wce++)[0],a=I.useState(QX)[0],s=I.useRef(t);I.useEffect(function(){s.current=t},[t]),I.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var y=Wle([t.lockRef.current],(t.shards||[]).map(c9),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var o=I.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var g=ww(y),x=n.current,_="deltaX"in y?y.deltaX:x[0]-g[0],E="deltaY"in y?y.deltaY:x[1]-g[1],T,w=y.target,A=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in y&&A==="h"&&w.type==="range")return!1;var C=o9(A,w);if(!C)return!0;if(C?T=A:(T=A==="v"?"h":"v",C=o9(A,w)),!C)return!1;if(!i.current&&"changedTouches"in y&&(_||E)&&(i.current=T),!T)return!0;var D=i.current||T;return xce(D,v,y,D==="h"?_:E)},[]),l=I.useCallback(function(y){var v=y;if(!(!ub.length||ub[ub.length-1]!==a)){var g="deltaY"in v?l9(v):ww(v),x=e.current.filter(function(T){return T.name===v.type&&(T.target===v.target||v.target===T.shadowParent)&&_ce(T.delta,g)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var _=(s.current.shards||[]).map(c9).filter(Boolean).filter(function(T){return T.contains(v.target)}),E=_.length>0?o(v,_[0]):!s.current.noIsolation;E&&v.cancelable&&v.preventDefault()}}},[]),c=I.useCallback(function(y,v,g,x){var _={name:y,delta:v,target:g,should:x,shadowParent:Mce(g)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(E){return E!==_})},1)},[]),u=I.useCallback(function(y){n.current=ww(y),i.current=void 0},[]),f=I.useCallback(function(y){c(y.type,l9(y),y.target,o(y,t.lockRef.current))},[]),h=I.useCallback(function(y){c(y.type,ww(y),y.target,o(y,t.lockRef.current))},[]);I.useEffect(function(){return ub.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,cb),document.addEventListener("touchmove",l,cb),document.addEventListener("touchstart",u,cb),function(){ub=ub.filter(function(y){return y!==a}),document.removeEventListener("wheel",l,cb),document.removeEventListener("touchmove",l,cb),document.removeEventListener("touchstart",u,cb)}},[]);var d=t.removeScrollBar,m=t.inert;return I.createElement(I.Fragment,null,m?I.createElement(a,{styles:Sce(r)}):null,d?I.createElement(dce,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Mce(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Tce=ece(ZX,Ece);var UT=I.forwardRef(function(t,e){return I.createElement(DC,Yu({},t,{ref:e,sideCar:Tce}))});UT.classNames=DC.classNames;function af(t){return Object.keys(t)}function uk(t){return t&&typeof t=="object"&&!Array.isArray(t)}function e4(t,e){const n={...t},i=e;return uk(t)&&uk(e)&&Object.keys(e).forEach(r=>{uk(i[r])&&r in t?n[r]=e4(n[r],i[r]):n[r]=i[r]}),n}function Ace(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Cce(t){return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function Rce(t){const e=Cce(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function u9(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function iY(t,{shouldScale:e=!1}={}){function n(i){if(i===0||i==="0")return`0${t}`;if(typeof i=="number"){const r=`${i/16}${t}`;return e?u9(r):r}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(a=>n(a)).join(",");if(i.includes(" "))return i.split(" ").map(a=>n(a)).join(" ");const r=i.replace("px","");if(!Number.isNaN(Number(r))){const a=`${Number(r)/16}${t}`;return e?u9(a):a}}return i}return n}const bt=iY("rem",{shouldScale:!0}),oN=iY("em");function OC(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function rY(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(i=>e.test(i))}return!1}function Eg(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==I.Fragment:!1}function Eu(t){const e=I.createContext(null);return[({children:r,value:a})=>R.jsx(e.Provider,{value:a,children:r}),()=>{const r=I.useContext(e);if(r===null)throw new Error(t);return r}]}function K_(t=null){const e=I.createContext(t);return[({children:r,value:a})=>R.jsx(e.Provider,{value:a,children:r}),()=>I.useContext(e)]}function f9(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function lN(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function kce(t,e,n){for(let i=t-1;i>=0;i-=1)if(!e[i].disabled)return i;if(n){for(let i=e.length-1;i>-1;i-=1)if(!e[i].disabled)return i}return t}function Dce(t,e,n){for(let i=t+1;i<e.length;i+=1)if(!e[i].disabled)return i;if(n){for(let i=0;i<e.length;i+=1)if(!e[i].disabled)return i}return t}function Oce(t,e,n){return lN(t,n)===lN(e,n)}function Ice({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:i=!0,activateOnFocus:r=!1,dir:a="rtl",orientation:s}){return o=>{n?.(o);const l=Array.from(lN(o.currentTarget,t)?.querySelectorAll(e)||[]).filter(m=>Oce(o.currentTarget,m,t)),c=l.findIndex(m=>o.currentTarget===m),u=Dce(c,l,i),f=kce(c,l,i),h=a==="rtl"?f:u,d=a==="rtl"?u:f;switch(o.key){case"ArrowRight":{s==="horizontal"&&(o.stopPropagation(),o.preventDefault(),l[h].focus(),r&&l[h].click());break}case"ArrowLeft":{s==="horizontal"&&(o.stopPropagation(),o.preventDefault(),l[d].focus(),r&&l[d].click());break}case"ArrowUp":{s==="vertical"&&(o.stopPropagation(),o.preventDefault(),l[f].focus(),r&&l[f].click());break}case"ArrowDown":{s==="vertical"&&(o.stopPropagation(),o.preventDefault(),l[u].focus(),r&&l[u].click());break}case"Home":{o.stopPropagation(),o.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{o.stopPropagation(),o.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}const Nce={app:100,modal:200,popover:300,overlay:400,max:9999};function vf(t){return Nce[t]}const BT=()=>{};function Pce(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||BT:n=>{n.key==="Escape"&&(t(n),e.onTrigger?.())}}function ii(t,e="size",n=!0){if(t!==void 0)return rY(t)?n?bt(t):t:`var(--${e}-${t})`}function Zd(t){return ii(t,"mantine-spacing")}function Qr(t){return t===void 0?"var(--mantine-radius-default)":ii(t,"mantine-radius")}function Ss(t){return ii(t,"mantine-font-size")}function aY(t){return ii(t,"mantine-line-height",!1)}function t4(t){if(t)return ii(t,"mantine-shadow",!1)}var Lce={};function Uce(){return typeof process<"u"&&Lce?"production":"development"}function h9(t,e){return e.length===0?t:e.reduce((n,i)=>Math.abs(i-t)<Math.abs(n-t)?i:n)}function IC(t){const e=ke.version;return typeof ke.version!="string"||e.startsWith("18.")?t?.ref:t?.props?.ref}function sY(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=sY(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ns(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=sY(t))&&(i&&(i+=" "),i+=e);return i}const Bce={};function Fce(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([i,r])=>{e[i]?e[i]=ns(e[i],r):e[i]=r})}),e}function NC({theme:t,classNames:e,props:n,stylesCtx:i}){const a=(Array.isArray(e)?e:[e]).map(s=>typeof s=="function"?s(t,n,i):s||Bce);return Fce(a)}function FT({theme:t,styles:e,props:n,stylesCtx:i}){return(Array.isArray(e)?e:[e]).reduce((a,s)=>typeof s=="function"?{...a,...s(t,n,i)}:{...a,...s},{})}const n4=I.createContext(null);function lp(){const t=I.useContext(n4);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function zce(){return lp().cssVariablesResolver}function jce(){return lp().classNamesPrefix}function PC(){return lp().getStyleNonce}function Hce(){return lp().withStaticClasses}function Vce(){return lp().headless}function Gce(){return lp().stylesTransform?.sx}function Wce(){return lp().stylesTransform?.styles}function LC(){return lp().env||"default"}function qce(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function Xce(t){let e=t.replace("#","");if(e.length===3){const s=e.split("");e=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(e.length===8){const s=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:s}}const n=parseInt(e,16),i=n>>16&255,r=n>>8&255,a=n&255;return{r:i,g:r,b:a,a:1}}function Yce(t){const[e,n,i,r]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:i,a:r===void 0?1:r}}function $ce(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const i=parseInt(n[1],10),r=parseInt(n[2],10)/100,a=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,o=(1-Math.abs(2*a-1))*r,l=i/60,c=o*(1-Math.abs(l%2-1)),u=a-o/2;let f,h,d;return l>=0&&l<1?(f=o,h=c,d=0):l>=1&&l<2?(f=c,h=o,d=0):l>=2&&l<3?(f=0,h=o,d=c):l>=3&&l<4?(f=0,h=c,d=o):l>=4&&l<5?(f=c,h=0,d=o):(f=o,h=0,d=c),{r:Math.round((f+u)*255),g:Math.round((h+u)*255),b:Math.round((d+u)*255),a:s||1}}function i4(t){return qce(t)?Xce(t):t.startsWith("rgb")?Yce(t):t.startsWith("hsl")?$ce(t):{r:0,g:0,b:0,a:1}}function Ew(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:i,b:r,a}=i4(t),s=1-e,o=l=>Math.round(l*s);return`rgba(${o(n)}, ${o(i)}, ${o(r)}, ${a})`}function a_(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function fk(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function Kce(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function Jce(t){if(t.startsWith("oklch("))return(Kce(t)||0)/100;const{r:e,g:n,b:i}=i4(t),r=e/255,a=n/255,s=i/255,o=fk(r),l=fk(a),c=fk(s);return .2126*o+.7152*l+.0722*c}function tx(t,e=.179){return t.startsWith("var(")?!1:Jce(t)>e}function xh({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:tx(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:tx(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:tx(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[i,r]=t.split("."),a=r?Number(r):void 0,s=i in e.colors;if(s){const o=a!==void 0?e.colors[i][a]:e.colors[i][a_(e,n||"light")];return{color:i,value:o,shade:a,isThemeColor:s,isLight:tx(o,e.luminanceThreshold),variable:r?`--mantine-color-${i}-${a}`:`--mantine-color-${i}-filled`}}return{color:t,value:t,isThemeColor:s,isLight:tx(t,e.luminanceThreshold),shade:a,variable:void 0}}function Zr(t,e){const n=xh({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function cN(t,e){const n={from:t?.from||e.defaultGradient.from,to:t?.to||e.defaultGradient.to,deg:t?.deg??e.defaultGradient.deg??0},i=Zr(n.from,e),r=Zr(n.to,e);return`linear-gradient(${n.deg}deg, ${i} 0%, ${r} 100%)`}function Ql(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const a=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${a}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:i,b:r}=i4(t);return`rgba(${n}, ${i}, ${r}, ${e})`}const fb=Ql,Zce=({color:t,theme:e,variant:n,gradient:i,autoContrast:r})=>{const a=xh({color:t,theme:e}),s=typeof r=="boolean"?r:e.autoContrast;if(n==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(n==="filled"){const o=s&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:o,border:`${bt(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:o,border:`${bt(1)} solid transparent`}:{background:t,hover:Ew(t,.1),color:o,border:`${bt(1)} solid transparent`}}if(n==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${bt(1)} solid transparent`};const o=e.colors[a.color][a.shade];return{background:Ql(o,.1),hover:Ql(o,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${bt(1)} solid transparent`}}return{background:Ql(t,.1),hover:Ql(t,.12),color:t,border:`${bt(1)} solid transparent`}}if(n==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${bt(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Ql(e.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${bt(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:Ql(t,.05),color:t,border:`${bt(1)} solid ${t}`};if(n==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${bt(1)} solid transparent`};const o=e.colors[a.color][a.shade];return{background:"transparent",hover:Ql(o,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${bt(1)} solid transparent`}}return{background:"transparent",hover:Ql(t,.12),color:t,border:`${bt(1)} solid transparent`}}return n==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${bt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${bt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${bt(1)} solid transparent`}:n==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:Ew(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${bt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Ew(e.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${bt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Ew(e.white,.01),color:t,border:`${bt(1)} solid transparent`}:n==="gradient"?{background:cN(i,e),hover:cN(i,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${bt(1)} solid var(--mantine-color-default-border)`}:{}},Qce={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},d9="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",UC={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Qce,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Zce,autoContrast:!1,luminanceThreshold:.3,fontFamily:d9,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:d9,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:bt(34),lineHeight:"1.3"},h2:{fontSize:bt(26),lineHeight:"1.35"},h3:{fontSize:bt(22),lineHeight:"1.4"},h4:{fontSize:bt(18),lineHeight:"1.45"},h5:{fontSize:bt(16),lineHeight:"1.5"},h6:{fontSize:bt(14),lineHeight:"1.5"}}},fontSizes:{xs:bt(12),sm:bt(14),md:bt(16),lg:bt(18),xl:bt(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:bt(2),sm:bt(4),md:bt(8),lg:bt(16),xl:bt(32)},spacing:{xs:bt(10),sm:bt(12),md:bt(16),lg:bt(20),xl:bt(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${bt(1)} ${bt(3)} rgba(0, 0, 0, 0.05), 0 ${bt(1)} ${bt(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${bt(1)} ${bt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${bt(10)} ${bt(15)} ${bt(-5)}, rgba(0, 0, 0, 0.04) 0 ${bt(7)} ${bt(7)} ${bt(-5)}`,md:`0 ${bt(1)} ${bt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${bt(20)} ${bt(25)} ${bt(-5)}, rgba(0, 0, 0, 0.04) 0 ${bt(10)} ${bt(10)} ${bt(-5)}`,lg:`0 ${bt(1)} ${bt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${bt(28)} ${bt(23)} ${bt(-7)}, rgba(0, 0, 0, 0.04) 0 ${bt(12)} ${bt(12)} ${bt(-7)}`,xl:`0 ${bt(1)} ${bt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${bt(36)} ${bt(28)} ${bt(-7)}, rgba(0, 0, 0, 0.04) 0 ${bt(17)} ${bt(17)} ${bt(-7)}`},other:{},components:{}};function p9(t){return t==="auto"||t==="dark"||t==="light"}function eue({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const i=window.localStorage.getItem(t);return p9(i)?i:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:n=>{e=i=>{i.storageArea===window.localStorage&&i.key===t&&p9(i.newValue)&&n(i.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const tue="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",m9="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function hk(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function g9(t){if(!(t.primaryColor in t.colors))throw new Error(tue);if(typeof t.primaryShade=="object"&&(!hk(t.primaryShade.dark)||!hk(t.primaryShade.light)))throw new Error(m9);if(typeof t.primaryShade=="number"&&!hk(t.primaryShade))throw new Error(m9)}function oY(t,e){if(!e)return g9(t),t;const n=e4(t,e);return e.fontFamily&&!e.headings?.fontFamily&&(n.headings.fontFamily=e.fontFamily),g9(n),n}const r4=I.createContext(null),nue=()=>I.useContext(r4)||UC;function Da(){const t=I.useContext(r4);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function lY({theme:t,children:e,inherit:n=!0}){const i=nue(),r=I.useMemo(()=>oY(n?i:UC,t),[t,i,n]);return R.jsx(r4.Provider,{value:r,children:e})}lY.displayName="@mantine/core/MantineThemeProvider";function iue(){const t=Da(),e=PC(),n=af(t.breakpoints).reduce((i,r)=>{const a=t.breakpoints[r].includes("px"),s=Rce(t.breakpoints[r]),o=a?`${s-.1}px`:oN(s-.1),l=a?`${s}px`:oN(s);return`${i}@media (max-width: ${o}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${r} {display: none !important;}}`},"");return R.jsx("style",{"data-mantine-styles":"classes",nonce:e?.(),dangerouslySetInnerHTML:{__html:n}})}function dk(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function nx(t,e){return(Array.isArray(t)?t:[t]).reduce((i,r)=>`${r}{${i}}`,e)}function rue(t,e){const n=dk(t.variables),i=n?nx(e,n):"",r=dk(t.dark),a=dk(t.light),s=r?nx(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,r):"",o=a?nx(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,a):"";return`${i}

${s}

${o}`}function J_({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&xh({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function b9(t,e){return J_({color:t.colors[t.primaryColor][a_(t,e)],theme:t,autoContrast:null})}function Mw({theme:t,color:e,colorScheme:n,name:i=e,withColorValues:r=!0}){if(!t.colors[e])return{};if(n==="light"){const o=a_(t,"light"),l={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${o})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${o===9?8:o+1})`,[`--mantine-color-${i}-light`]:fb(t.colors[e][o],.1),[`--mantine-color-${i}-light-hover`]:fb(t.colors[e][o],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${o})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${o})`,[`--mantine-color-${i}-outline-hover`]:fb(t.colors[e][o],.05)};return r?{[`--mantine-color-${i}-0`]:t.colors[e][0],[`--mantine-color-${i}-1`]:t.colors[e][1],[`--mantine-color-${i}-2`]:t.colors[e][2],[`--mantine-color-${i}-3`]:t.colors[e][3],[`--mantine-color-${i}-4`]:t.colors[e][4],[`--mantine-color-${i}-5`]:t.colors[e][5],[`--mantine-color-${i}-6`]:t.colors[e][6],[`--mantine-color-${i}-7`]:t.colors[e][7],[`--mantine-color-${i}-8`]:t.colors[e][8],[`--mantine-color-${i}-9`]:t.colors[e][9],...l}:l}const a=a_(t,"dark"),s={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${a===9?8:a+1})`,[`--mantine-color-${i}-light`]:fb(t.colors[e][Math.max(0,a-2)],.15),[`--mantine-color-${i}-light-hover`]:fb(t.colors[e][Math.max(0,a-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(a-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(a-4,0)})`,[`--mantine-color-${i}-outline-hover`]:fb(t.colors[e][Math.max(a-4,0)],.05)};return r?{[`--mantine-color-${i}-0`]:t.colors[e][0],[`--mantine-color-${i}-1`]:t.colors[e][1],[`--mantine-color-${i}-2`]:t.colors[e][2],[`--mantine-color-${i}-3`]:t.colors[e][3],[`--mantine-color-${i}-4`]:t.colors[e][4],[`--mantine-color-${i}-5`]:t.colors[e][5],[`--mantine-color-${i}-6`]:t.colors[e][6],[`--mantine-color-${i}-7`]:t.colors[e][7],[`--mantine-color-${i}-8`]:t.colors[e][8],[`--mantine-color-${i}-9`]:t.colors[e][9],...s}:s}function aue(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function hb(t,e,n){af(e).forEach(i=>Object.assign(t,{[`--mantine-${n}-${i}`]:e[i]}))}const cY=t=>{const e=a_(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:bt(t.defaultRadius),i={variables:{"--mantine-z-index-app":"100","--mantine-z-index-modal":"200","--mantine-z-index-popover":"300","--mantine-z-index-overlay":"400","--mantine-z-index-max":"9999","--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-color-scheme":"light","--mantine-primary-color-contrast":b9(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-color-scheme":"dark","--mantine-primary-color-contrast":b9(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-dark-4)"}};hb(i.variables,t.breakpoints,"breakpoint"),hb(i.variables,t.spacing,"spacing"),hb(i.variables,t.fontSizes,"font-size"),hb(i.variables,t.lineHeights,"line-height"),hb(i.variables,t.shadows,"shadow"),hb(i.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((a,s)=>{i.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${t.primaryColor}-${s})`}),af(t.colors).forEach(a=>{const s=t.colors[a];if(aue(s)){Object.assign(i.light,Mw({theme:t,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,Mw({theme:t,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((o,l)=>{i.variables[`--mantine-color-${a}-${l}`]=o}),Object.assign(i.light,Mw({theme:t,color:a,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,Mw({theme:t,color:a,colorScheme:"dark",withColorValues:!1}))});const r=t.headings.sizes;return af(r).forEach(a=>{i.variables[`--mantine-${a}-font-size`]=r[a].fontSize,i.variables[`--mantine-${a}-line-height`]=r[a].lineHeight,i.variables[`--mantine-${a}-font-weight`]=r[a].fontWeight||t.headings.fontWeight}),i};function sue({theme:t,generator:e}){const n=cY(t),i=e?.(t);return i?e4(n,i):n}const pk=cY(UC);function oue(t){const e={variables:{},light:{},dark:{}};return af(t.variables).forEach(n=>{pk.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),af(t.light).forEach(n=>{pk.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),af(t.dark).forEach(n=>{pk.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function lue(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function uY({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=Da(),i=PC(),r=zce(),a=sue({theme:n,generator:r}),s=t===":root"&&e,o=s?oue(a):a,l=rue(o,t);return l?R.jsx("style",{"data-mantine-styles":!0,nonce:i?.(),dangerouslySetInnerHTML:{__html:`${l}${s?"":lue(t)}`}}):null}uY.displayName="@mantine/CssVariables";function db(t,e){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,i=t!=="auto"?t:n?"dark":"light";e()?.setAttribute("data-mantine-color-scheme",i)}function cue({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:i}){const r=I.useRef(null),[a,s]=I.useState(()=>t.get(e)),o=i||a,l=I.useCallback(u=>{i||(db(u,n),s(u),t.set(u))},[t.set,o,i]),c=I.useCallback(()=>{s(e),db(e,n),t.clear()},[t.clear,e]);return I.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Zy(()=>{db(t.get(e),n)},[]),I.useEffect(()=>{if(i)return db(i,n),()=>{};i===void 0&&db(a,n),typeof window<"u"&&"matchMedia"in window&&(r.current=window.matchMedia("(prefers-color-scheme: dark)"));const u=f=>{a==="auto"&&db(f.matches?"dark":"light",n)};return r.current?.addEventListener("change",u),()=>r.current?.removeEventListener("change",u)},[a,i]),{colorScheme:o,setColorScheme:l,clearColorScheme:c}}function uue({respectReducedMotion:t,getRootElement:e}){Zy(()=>{t&&e()?.setAttribute("data-respect-reduced-motion","true")},[t])}function fY({theme:t,children:e,getStyleNonce:n,withStaticClasses:i=!0,withGlobalClasses:r=!0,deduplicateCssVariables:a=!0,withCssVariables:s=!0,cssVariablesSelector:o=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=eue(),defaultColorScheme:u="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:d,stylesTransform:m,env:y}){const{colorScheme:v,setColorScheme:g,clearColorScheme:x}=cue({defaultColorScheme:u,forceColorScheme:d,manager:c,getRootElement:f});return uue({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:f}),R.jsx(n4.Provider,{value:{colorScheme:v,setColorScheme:g,clearColorScheme:x,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:h,cssVariablesSelector:o,withStaticClasses:i,stylesTransform:m,env:y},children:R.jsxs(lY,{theme:t,children:[s&&R.jsx(uY,{cssVariablesSelector:o,deduplicateCssVariables:a}),r&&R.jsx(iue,{}),e]})})}fY.displayName="@mantine/core/MantineProvider";function ev({classNames:t,styles:e,props:n,stylesCtx:i}){const r=Da();return{resolvedClassNames:NC({theme:r,classNames:t,props:n,stylesCtx:i||void 0}),resolvedStyles:FT({theme:r,styles:e,props:n,stylesCtx:i||void 0})}}const fue={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function hue({theme:t,options:e,unstyled:n}){return ns(e?.focusable&&!n&&(t.focusClassName||fue[t.focusRing]),e?.active&&!n&&t.activeClassName)}function due({selector:t,stylesCtx:e,options:n,props:i,theme:r}){return NC({theme:r,classNames:n?.classNames,props:n?.props||i,stylesCtx:e})[t]}function y9({selector:t,stylesCtx:e,theme:n,classNames:i,props:r}){return NC({theme:n,classNames:i,props:r,stylesCtx:e})[t]}function pue({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function mue({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function gue({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:i}){return i===!1?[]:t.map(r=>`${e}-${r}-${n}`)}function bue({themeName:t,theme:e,selector:n,props:i,stylesCtx:r}){return t.map(a=>NC({theme:e,classNames:e.components[a]?.classNames,props:i,stylesCtx:r})?.[n])}function yue({options:t,classes:e,selector:n,unstyled:i}){return t?.variant&&!i?e[`${n}--${t.variant}`]:void 0}function vue({theme:t,options:e,themeName:n,selector:i,classNamesPrefix:r,classNames:a,classes:s,unstyled:o,className:l,rootSelector:c,props:u,stylesCtx:f,withStaticClasses:h,headless:d,transformedStyles:m}){return ns(hue({theme:t,options:e,unstyled:o||d}),bue({theme:t,themeName:n,selector:i,props:u,stylesCtx:f}),yue({options:e,classes:s,selector:i,unstyled:o}),y9({selector:i,stylesCtx:f,theme:t,classNames:a,props:u}),y9({selector:i,stylesCtx:f,theme:t,classNames:m,props:u}),due({selector:i,stylesCtx:f,options:e,props:u,theme:t}),pue({rootSelector:c,selector:i,className:l}),mue({selector:i,classes:s,unstyled:o||d}),h&&!d&&gue({themeName:n,classNamesPrefix:r,selector:i,withStaticClass:e?.withStaticClass}),e?.className)}function xue({theme:t,themeName:e,props:n,stylesCtx:i,selector:r}){return e.map(a=>FT({theme:t,styles:t.components[a]?.styles,props:n,stylesCtx:i})[r]).reduce((a,s)=>({...a,...s}),{})}function uN({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,...uN({style:i,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function _ue(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(i=>{e[i]={...e[i],...OC(n[i])}}),e),{})}function Sue({vars:t,varsResolver:e,theme:n,props:i,stylesCtx:r,selector:a,themeName:s,headless:o}){return _ue([o?{}:e?.(n,i,r),...s.map(l=>n.components?.[l]?.vars?.(n,i,r)),t?.(n,i,r)])?.[a]}function wue({theme:t,themeName:e,selector:n,options:i,props:r,stylesCtx:a,rootSelector:s,styles:o,style:l,vars:c,varsResolver:u,headless:f,withStylesTransform:h}){return{...!h&&xue({theme:t,themeName:e,props:r,stylesCtx:a,selector:n}),...!h&&FT({theme:t,styles:o,props:r,stylesCtx:a})[n],...!h&&FT({theme:t,styles:i?.styles,props:i?.props||r,stylesCtx:a})[n],...Sue({theme:t,props:r,stylesCtx:a,vars:c,varsResolver:u,selector:n,themeName:e,headless:f}),...s===n?uN({style:l,theme:t}):null,...uN({style:i?.style,theme:t})}}function Eue({props:t,stylesCtx:e,themeName:n}){const i=Da(),r=Wce()?.();return{getTransformedStyles:s=>r?[...s.map(l=>r(l,{props:t,theme:i,ctx:e})),...n.map(l=>r(i.components[l]?.styles,{props:t,theme:i,ctx:e}))].filter(Boolean):[],withStylesTransform:!!r}}function xn({name:t,classes:e,props:n,stylesCtx:i,className:r,style:a,rootSelector:s="root",unstyled:o,classNames:l,styles:c,vars:u,varsResolver:f,attributes:h}){const d=Da(),m=jce(),y=Hce(),v=Vce(),g=(Array.isArray(t)?t:[t]).filter(E=>E),{withStylesTransform:x,getTransformedStyles:_}=Eue({props:n,stylesCtx:i,themeName:g});return(E,T)=>({className:vue({theme:d,options:T,themeName:g,selector:E,classNamesPrefix:m,classNames:l,classes:e,unstyled:o,className:r,rootSelector:s,props:n,stylesCtx:i,withStaticClasses:y,headless:v,transformedStyles:_([T?.styles,c])}),style:wue({theme:d,themeName:g,selector:E,options:T,props:n,stylesCtx:i,rootSelector:s,styles:c,style:a,vars:u,varsResolver:f,headless:v,withStylesTransform:x}),...h?.[E]})}function BC(t,e){return typeof t=="boolean"?t:e.autoContrast}function v9(t){const e=document.createElement("style");return e.setAttribute("data-mantine-styles","inline"),e.innerHTML="*, *::before, *::after {transition: none !important;}",e.setAttribute("data-mantine-disable-transition","true"),t&&e.setAttribute("nonce",t),document.head.appendChild(e),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(i=>i.remove())}function tv({keepTransitions:t}={}){const e=I.useRef(BT),n=I.useRef(-1),i=I.useContext(n4),r=PC(),a=I.useRef(r?.());if(!i)throw new Error("[@mantine/core] MantineProvider was not found in tree");const s=f=>{i.setColorScheme(f),e.current=t?()=>{}:v9(a.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},o=()=>{i.clearColorScheme(),e.current=t?()=>{}:v9(a.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},l=lle("light",{getInitialValueInEffect:!1}),c=i.colorScheme==="auto"?l:i.colorScheme,u=I.useCallback(()=>s(c==="light"?"dark":"light"),[s,c]);return I.useEffect(()=>()=>{e.current?.(),window.clearTimeout(n.current)},[]),{colorScheme:i.colorScheme,setColorScheme:s,clearColorScheme:o,toggleColorScheme:u}}function Ot(t,e,n){const i=Da(),r=i.components[t]?.defaultProps,a=typeof r=="function"?r(i):r;return{...e,...a,...OC(n)}}function mk(t){return af(t).reduce((e,n)=>t[n]!==void 0?`${e}${Ace(n)}:${t[n]};`:e,"").trim()}function Mue({selector:t,styles:e,media:n,container:i}){const r=e?mk(e):"",a=Array.isArray(n)?n.map(o=>`@media${o.query}{${t}{${mk(o.styles)}}}`):[],s=Array.isArray(i)?i.map(o=>`@container ${o.query}{${t}{${mk(o.styles)}}}`):[];return`${r?`${t}{${r}}`:""}${a.join("")}${s.join("")}`.trim()}function hY(t){const e=PC();return R.jsx("style",{"data-mantine-styles":"inline",nonce:e?.(),dangerouslySetInnerHTML:{__html:Mue(t)}})}function Z_(t){const{m:e,mx:n,my:i,mt:r,mb:a,ml:s,mr:o,me:l,ms:c,p:u,px:f,py:h,pt:d,pb:m,pl:y,pr:v,pe:g,ps:x,bd:_,bdrs:E,bg:T,c:w,opacity:A,ff:C,fz:D,fw:k,lts:P,ta:B,lh:H,fs:G,tt:V,td:U,w:F,miw:q,maw:X,h:z,mih:ce,mah:he,bgsz:$,bgp:Me,bgr:Se,bga:pe,pos:xe,top:Ne,left:Ge,bottom:$e,right:ct,inset:At,display:fe,flex:Ve,hiddenFrom:je,visibleFrom:ot,lightHidden:Te,darkHidden:Ue,sx:Oe,...We}=t;return{styleProps:OC({m:e,mx:n,my:i,mt:r,mb:a,ml:s,mr:o,me:l,ms:c,p:u,px:f,py:h,pt:d,pb:m,pl:y,pr:v,pe:g,ps:x,bd:_,bg:T,c:w,opacity:A,ff:C,fz:D,fw:k,lts:P,ta:B,lh:H,fs:G,tt:V,td:U,w:F,miw:q,maw:X,h:z,mih:ce,mah:he,bgsz:$,bgp:Me,bgr:Se,bga:pe,pos:xe,top:Ne,left:Ge,bottom:$e,right:ct,inset:At,display:fe,flex:Ve,bdrs:E,hiddenFrom:je,visibleFrom:ot,lightHidden:Te,darkHidden:Ue,sx:Oe}),rest:We}}const Tue={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bdrs:{type:"radius",property:"borderRadius"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function a4(t,e){const n=xh({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Aue(t,e){const n=xh({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:a4(t,e)}function Cue(t,e){if(typeof t=="number")return bt(t);if(typeof t=="string"){const[n,i,...r]=t.split(" ").filter(s=>s.trim()!=="");let a=`${bt(n)}`;return i&&(a+=` ${i}`),r.length>0&&(a+=` ${a4(r.join(" "),e)}`),a.trim()}return t}const x9={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Rue(t){return typeof t=="string"&&t in x9?x9[t]:t}const kue=["h1","h2","h3","h4","h5","h6"];function Due(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&kue.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?bt(t):t}function Oue(t){return t}const Iue=["h1","h2","h3","h4","h5","h6"];function Nue(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&Iue.includes(t)?`var(--mantine-${t}-line-height)`:t}function Pue(t,e){return typeof t=="string"&&t in e.radius?`var(--mantine-radius-${t})`:typeof t=="number"||typeof t=="string"?bt(t):t}function Lue(t){return typeof t=="number"?bt(t):t}function Uue(t,e){if(typeof t=="number")return bt(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return bt(t);const i=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${i}) * -1)`:`var(${i})`}return t}const gk={color:a4,textColor:Aue,fontSize:Due,spacing:Uue,radius:Pue,identity:Oue,size:Lue,lineHeight:Nue,fontFamily:Rue,border:Cue};function _9(t){return t.replace("(min-width: ","").replace("em)","")}function Bue({media:t,...e}){const i=Object.keys(t).sort((r,a)=>Number(_9(r))-Number(_9(a))).map(r=>({query:r,styles:t[r]}));return{...e,media:i}}function Fue(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function zue(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function jue(t){return typeof t=="object"&&t!==null?af(t).filter(e=>e!=="base"):[]}function Hue(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function dY({styleProps:t,data:e,theme:n}){return Bue(af(t).reduce((i,r)=>{if(r==="hiddenFrom"||r==="visibleFrom"||r==="sx")return i;const a=e[r],s=Array.isArray(a.property)?a.property:[a.property],o=zue(t[r]);if(!Fue(t[r]))return s.forEach(c=>{i.inlineStyles[c]=gk[a.type](o,n)}),i;i.hasResponsiveStyles=!0;const l=jue(t[r]);return s.forEach(c=>{o!=null&&(i.styles[c]=gk[a.type](o,n)),l.forEach(u=>{const f=`(min-width: ${n.breakpoints[u]})`;i.media[f]={...i.media[f],[c]:gk[a.type](Hue(t[r],u),n)}})}),i},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function pY(){return`__m__-${I.useId().replace(/:/g,"")}`}function s4(t,e){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,...s4(i,e)}),{}):typeof t=="function"?t(e):t??{}}function mY(t){return t.startsWith("data-")?t:`data-${t}`}function Vue(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return i===void 0||i===""||i===!1||i===null||(e[mY(n)]=t[n]),e},{})}function gY(t){return t?typeof t=="string"?{[mY(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...gY(n)}),{}):Vue(t):null}function fN(t,e){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,...fN(i,e)}),{}):typeof t=="function"?t(e):t??{}}function Gue({theme:t,style:e,vars:n,styleProps:i}){const r=fN(e,t),a=fN(n,t);return{...r,...a,...i}}const bY=I.forwardRef(({component:t,style:e,__vars:n,className:i,variant:r,mod:a,size:s,hiddenFrom:o,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:f,__size:h,...d},m)=>{const y=Da(),v=t||"div",{styleProps:g,rest:x}=Z_(d),E=Gce()?.()?.(g.sx),T=pY(),w=dY({styleProps:g,theme:y,data:Tue}),A={ref:m,style:Gue({theme:y,style:e,vars:n,styleProps:w.inlineStyles}),className:ns(i,E,{[T]:w.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${o}`]:o,[`mantine-visible-from-${l}`]:l}),"data-variant":r,"data-size":rY(s)?void 0:s||void 0,size:h,...gY(a),...x};return R.jsxs(R.Fragment,{children:[w.hasResponsiveStyles&&R.jsx(hY,{selector:`.${T}`,styles:w.styles,media:w.media}),typeof f=="function"?f(A):R.jsx(v,{...A})]})});bY.displayName="@mantine/core/Box";const et=bY;function yY(t){return t}function Qt(t){const e=I.forwardRef(t);return e.extend=yY,e.withProps=n=>{const i=I.forwardRef((r,a)=>R.jsx(e,{...n,...r,ref:a}));return i.extend=e.extend,i.displayName=`WithProps(${e.displayName})`,i},e}function Rl(t){const e=I.forwardRef(t);return e.withProps=n=>{const i=I.forwardRef((r,a)=>R.jsx(e,{...n,...r,ref:a}));return i.extend=e.extend,i.displayName=`WithProps(${e.displayName})`,i},e.extend=yY,e}const Wue=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function nv(){return I.useContext(Wue)}function que(t){if(!t||typeof t=="string")return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function bk(t){return t?.current?t.current.scrollHeight:"auto"}const ix=typeof window<"u"&&window.requestAnimationFrame,S9=0,Xue=t=>({height:0,overflow:"hidden",...t?{}:{display:"none"}});function Yue({transitionDuration:t,transitionTimingFunction:e="ease",onTransitionEnd:n=()=>{},opened:i,keepMounted:r=!1}){const a=I.useRef(null),s=Xue(r),[o,l]=I.useState(i?{}:s),c=m=>{I_.flushSync(()=>l(m))},u=m=>{c(y=>({...y,...m}))};function f(m){const y=t||que(m);return{transition:`height ${y}ms ${e}, opacity ${y}ms ${e}`}}xc(()=>{typeof ix=="function"&&ix(i?()=>{u({willChange:"height",display:"block",overflow:"hidden"}),ix(()=>{const m=bk(a);u({...f(m),height:m})})}:()=>{const m=bk(a);u({...f(m),willChange:"height",height:m}),ix(()=>u({height:S9,overflow:"hidden"}))})},[i]);const h=m=>{if(!(m.target!==a.current||m.propertyName!=="height"))if(i){const y=bk(a);y===o.height?c({}):u({height:y}),n()}else o.height===S9&&(c(s),n())};function d({style:m={},refKey:y="ref",...v}={}){const g=v[y],x={"aria-hidden":!i,...v,[y]:jX(a,g),onTransitionEnd:h,style:{boxSizing:"border-box",...m,...o}};return ke.version.startsWith("18")?i||(x.inert=""):x.inert=!i,x}return d}const $ue={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},_h=Qt((t,e)=>{const{children:n,in:i,transitionDuration:r,transitionTimingFunction:a,style:s,onTransitionEnd:o,animateOpacity:l,keepMounted:c,...u}=Ot("Collapse",$ue,t),f=Da(),h=kC(),m=(f.respectReducedMotion?h:!1)?0:r,y=Yue({opened:i,transitionDuration:m,transitionTimingFunction:a,onTransitionEnd:o,keepMounted:c});return m===0?i?R.jsx(et,{...u,children:n}):null:R.jsx(et,{...y({style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${a}`:"none",...s4(s,f)},ref:e,...u}),children:n})});_h.displayName="@mantine/core/Collapse";function FC(){return typeof window<"u"}function iv(t){return vY(t)?(t.nodeName||"").toLowerCase():"#document"}function Po(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xf(t){var e;return(e=(vY(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vY(t){return FC()?t instanceof Node||t instanceof Po(t).Node:!1}function Or(t){return FC()?t instanceof Element||t instanceof Po(t).Element:!1}function Tl(t){return FC()?t instanceof HTMLElement||t instanceof Po(t).HTMLElement:!1}function hN(t){return!FC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Po(t).ShadowRoot}const Kue=new Set(["inline","contents"]);function Q_(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Ec(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Kue.has(r)}const Jue=new Set(["table","td","th"]);function Zue(t){return Jue.has(iv(t))}const Que=[":popover-open",":modal"];function zC(t){return Que.some(e=>{try{return t.matches(e)}catch{return!1}})}const efe=["transform","translate","scale","rotate","perspective"],tfe=["transform","translate","scale","rotate","perspective","filter"],nfe=["paint","layout","strict","content"];function o4(t){const e=jC(),n=Or(t)?Ec(t):t;return efe.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||tfe.some(i=>(n.willChange||"").includes(i))||nfe.some(i=>(n.contain||"").includes(i))}function ife(t){let e=Sh(t);for(;Tl(e)&&!Qd(e);){if(o4(e))return e;if(zC(e))return null;e=Sh(e)}return null}function jC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rfe=new Set(["html","body","#document"]);function Qd(t){return rfe.has(iv(t))}function Ec(t){return Po(t).getComputedStyle(t)}function HC(t){return Or(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Sh(t){if(iv(t)==="html")return t;const e=t.assignedSlot||t.parentNode||hN(t)&&t.host||xf(t);return hN(e)?e.host:e}function xY(t){const e=Sh(t);return Qd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Tl(e)&&Q_(e)?e:xY(e)}function fh(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=xY(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),s=Po(r);if(a){const o=dN(s);return e.concat(s,s.visualViewport||[],Q_(r)?r:[],o&&n?fh(o):[])}return e.concat(r,fh(r,[],n))}function dN(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function w9(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function s_(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&hN(n)){let i=e;for(;i;){if(t===i)return!0;i=i.parentNode||i.host}}return!1}function _Y(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function SY(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:i}=e;return n+"/"+i}).join(" "):navigator.userAgent}function afe(t){return lfe()?!1:!E9()&&t.width===0&&t.height===0||E9()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function sfe(){return/apple/i.test(navigator.vendor)}function E9(){const t=/android/i;return t.test(_Y())||t.test(SY())}function ofe(){return _Y().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function lfe(){return SY().includes("jsdom/")}function pN(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function cfe(t){return"nativeEvent"in t}function ufe(t){return t.matches("html,body")}function Em(t){return t?.ownerDocument||document}function yk(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function f0(t){return"composedPath"in t?t.composedPath()[0]:t.target}const ffe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function hfe(t){return Tl(t)&&t.matches(ffe)}const dfe=["top","right","bottom","left"],vu=Math.min,zs=Math.max,zT=Math.round,Tw=Math.floor,sf=t=>({x:t,y:t}),pfe={left:"right",right:"left",bottom:"top",top:"bottom"},mfe={start:"end",end:"start"};function mN(t,e,n){return zs(t,vu(e,n))}function hf(t,e){return typeof t=="function"?t(e):t}function xu(t){return t.split("-")[0]}function rv(t){return t.split("-")[1]}function l4(t){return t==="x"?"y":"x"}function c4(t){return t==="y"?"height":"width"}const gfe=new Set(["top","bottom"]);function uu(t){return gfe.has(xu(t))?"y":"x"}function u4(t){return l4(uu(t))}function bfe(t,e,n){n===void 0&&(n=!1);const i=rv(t),r=u4(t),a=c4(r);let s=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=jT(s)),[s,jT(s)]}function yfe(t){const e=jT(t);return[gN(t),e,gN(e)]}function gN(t){return t.replace(/start|end/g,e=>mfe[e])}const M9=["left","right"],T9=["right","left"],vfe=["top","bottom"],xfe=["bottom","top"];function _fe(t,e,n){switch(t){case"top":case"bottom":return n?e?T9:M9:e?M9:T9;case"left":case"right":return e?vfe:xfe;default:return[]}}function Sfe(t,e,n,i){const r=rv(t);let a=_fe(xu(t),n==="start",i);return r&&(a=a.map(s=>s+"-"+r),e&&(a=a.concat(a.map(gN)))),a}function jT(t){return t.replace(/left|right|bottom|top/g,e=>pfe[e])}function wfe(t){return{top:0,right:0,bottom:0,left:0,...t}}function f4(t){return typeof t!="number"?wfe(t):{top:t,right:t,bottom:t,left:t}}function my(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function A9(t,e,n){let{reference:i,floating:r}=t;const a=uu(e),s=u4(e),o=c4(s),l=xu(e),c=a==="y",u=i.x+i.width/2-r.width/2,f=i.y+i.height/2-r.height/2,h=i[o]/2-r[o]/2;let d;switch(l){case"top":d={x:u,y:i.y-r.height};break;case"bottom":d={x:u,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:f};break;case"left":d={x:i.x-r.width,y:f};break;default:d={x:i.x,y:i.y}}switch(rv(e)){case"start":d[s]-=h*(n&&c?-1:1);break;case"end":d[s]+=h*(n&&c?-1:1);break}return d}const Efe=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:f}=A9(c,i,l),h=i,d={},m=0;for(let y=0;y<o.length;y++){const{name:v,fn:g}=o[y],{x,y:_,data:E,reset:T}=await g({x:u,y:f,initialPlacement:i,placement:h,strategy:r,middlewareData:d,rects:c,platform:s,elements:{reference:t,floating:e}});u=x??u,f=_??f,d={...d,[v]:{...d[v],...E}},T&&m<=50&&(m++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(c=T.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:r}):T.rects),{x:u,y:f}=A9(c,h,l)),y=-1)}return{x:u,y:f,placement:h,strategy:r,middlewareData:d}};async function o_(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:s,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=hf(e,t),m=f4(d),v=o[h?f==="floating"?"reference":"floating":f],g=my(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),x=f==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),E=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},T=my(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:_,strategy:l}):x);return{top:(g.top-T.top+m.top)/E.y,bottom:(T.bottom-g.bottom+m.bottom)/E.y,left:(g.left-T.left+m.left)/E.x,right:(T.right-g.right+m.right)/E.x}}const Mfe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=hf(t,e)||{};if(c==null)return{};const f=f4(u),h={x:n,y:i},d=u4(r),m=c4(d),y=await s.getDimensions(c),v=d==="y",g=v?"top":"left",x=v?"bottom":"right",_=v?"clientHeight":"clientWidth",E=a.reference[m]+a.reference[d]-h[d]-a.floating[m],T=h[d]-a.reference[d],w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let A=w?w[_]:0;(!A||!await(s.isElement==null?void 0:s.isElement(w)))&&(A=o.floating[_]||a.floating[m]);const C=E/2-T/2,D=A/2-y[m]/2-1,k=vu(f[g],D),P=vu(f[x],D),B=k,H=A-y[m]-P,G=A/2-y[m]/2+C,V=mN(B,G,H),U=!l.arrow&&rv(r)!=null&&G!==V&&a.reference[m]/2-(G<B?k:P)-y[m]/2<0,F=U?G<B?G-B:G-H:0;return{[d]:h[d]+F,data:{[d]:V,centerOffset:G-V-F,...U&&{alignmentOffset:F}},reset:U}}}),Tfe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...v}=hf(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const g=xu(r),x=uu(o),_=xu(o)===o,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=h||(_||!y?[jT(o)]:yfe(o)),w=m!=="none";!h&&w&&T.push(...Sfe(o,y,m,E));const A=[o,...T],C=await o_(e,v),D=[];let k=((i=a.flip)==null?void 0:i.overflows)||[];if(u&&D.push(C[g]),f){const G=bfe(r,s,E);D.push(C[G[0]],C[G[1]])}if(k=[...k,{placement:r,overflows:D}],!D.every(G=>G<=0)){var P,B;const G=(((P=a.flip)==null?void 0:P.index)||0)+1,V=A[G];if(V&&(!(f==="alignment"?x!==uu(V):!1)||k.every(q=>uu(q.placement)===x?q.overflows[0]>0:!0)))return{data:{index:G,overflows:k},reset:{placement:V}};let U=(B=k.filter(F=>F.overflows[0]<=0).sort((F,q)=>F.overflows[1]-q.overflows[1])[0])==null?void 0:B.placement;if(!U)switch(d){case"bestFit":{var H;const F=(H=k.filter(q=>{if(w){const X=uu(q.placement);return X===x||X==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(X=>X>0).reduce((X,z)=>X+z,0)]).sort((q,X)=>q[1]-X[1])[0])==null?void 0:H[0];F&&(U=F);break}case"initialPlacement":U=o;break}if(r!==U)return{reset:{placement:U}}}return{}}}};function C9(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function R9(t){return dfe.some(e=>t[e]>=0)}const Afe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=hf(t,e);switch(i){case"referenceHidden":{const a=await o_(e,{...r,elementContext:"reference"}),s=C9(a,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:R9(s)}}}case"escaped":{const a=await o_(e,{...r,altBoundary:!0}),s=C9(a,n.floating);return{data:{escapedOffsets:s,escaped:R9(s)}}}default:return{}}}}};function wY(t){const e=vu(...t.map(a=>a.left)),n=vu(...t.map(a=>a.top)),i=zs(...t.map(a=>a.right)),r=zs(...t.map(a=>a.bottom));return{x:e,y:n,width:i-e,height:r-n}}function Cfe(t){const e=t.slice().sort((r,a)=>r.y-a.y),n=[];let i=null;for(let r=0;r<e.length;r++){const a=e[r];!i||a.y-i.y>i.height/2?n.push([a]):n[n.length-1].push(a),i=a}return n.map(r=>my(wY(r)))}const Rfe=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:i,rects:r,platform:a,strategy:s}=e,{padding:o=2,x:l,y:c}=hf(t,e),u=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(i.reference))||[]),f=Cfe(u),h=my(wY(u)),d=f4(o);function m(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(v=>l>v.left-d.left&&l<v.right+d.right&&c>v.top-d.top&&c<v.bottom+d.bottom)||h;if(f.length>=2){if(uu(n)==="y"){const k=f[0],P=f[f.length-1],B=xu(n)==="top",H=k.top,G=P.bottom,V=B?k.left:P.left,U=B?k.right:P.right,F=U-V,q=G-H;return{top:H,bottom:G,left:V,right:U,width:F,height:q,x:V,y:H}}const v=xu(n)==="left",g=zs(...f.map(k=>k.right)),x=vu(...f.map(k=>k.left)),_=f.filter(k=>v?k.left===x:k.right===g),E=_[0].top,T=_[_.length-1].bottom,w=x,A=g,C=A-w,D=T-E;return{top:E,bottom:T,left:w,right:A,width:C,height:D,x:w,y:E}}return h}const y=await a.getElementRects({reference:{getBoundingClientRect:m},floating:i.floating,strategy:s});return r.reference.x!==y.reference.x||r.reference.y!==y.reference.y||r.reference.width!==y.reference.width||r.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}},EY=new Set(["left","top"]);async function kfe(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),s=xu(n),o=rv(n),l=uu(n)==="y",c=EY.has(s)?-1:1,u=a&&l?-1:1,f=hf(e,t);let{mainAxis:h,crossAxis:d,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof m=="number"&&(d=o==="end"?m*-1:m),l?{x:d*u,y:h*c}:{x:h*c,y:d*u}}const Dfe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:s,middlewareData:o}=e,l=await kfe(e,t);return s===((n=o.offset)==null?void 0:n.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:a+l.y,data:{...l,placement:s}}}}},Ofe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:v=>{let{x:g,y:x}=v;return{x:g,y:x}}},...l}=hf(t,e),c={x:n,y:i},u=await o_(e,l),f=uu(xu(r)),h=l4(f);let d=c[h],m=c[f];if(a){const v=h==="y"?"top":"left",g=h==="y"?"bottom":"right",x=d+u[v],_=d-u[g];d=mN(x,d,_)}if(s){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",x=m+u[v],_=m-u[g];m=mN(x,m,_)}const y=o.fn({...e,[h]:d,[f]:m});return{...y,data:{x:y.x-n,y:y.y-i,enabled:{[h]:a,[f]:s}}}}}},Ife=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=hf(t,e),u={x:n,y:i},f=uu(r),h=l4(f);let d=u[h],m=u[f];const y=hf(o,e),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const _=h==="y"?"height":"width",E=a.reference[h]-a.floating[_]+v.mainAxis,T=a.reference[h]+a.reference[_]-v.mainAxis;d<E?d=E:d>T&&(d=T)}if(c){var g,x;const _=h==="y"?"width":"height",E=EY.has(xu(r)),T=a.reference[f]-a.floating[_]+(E&&((g=s.offset)==null?void 0:g[f])||0)+(E?0:v.crossAxis),w=a.reference[f]+a.reference[_]+(E?0:((x=s.offset)==null?void 0:x[f])||0)-(E?v.crossAxis:0);m<T?m=T:m>w&&(m=w)}return{[h]:d,[f]:m}}}},Nfe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:s,elements:o}=e,{apply:l=()=>{},...c}=hf(t,e),u=await o_(e,c),f=xu(r),h=rv(r),d=uu(r)==="y",{width:m,height:y}=a.floating;let v,g;f==="top"||f==="bottom"?(v=f,g=h===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(g=f,v=h==="end"?"top":"bottom");const x=y-u.top-u.bottom,_=m-u.left-u.right,E=vu(y-u[v],x),T=vu(m-u[g],_),w=!e.middlewareData.shift;let A=E,C=T;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=_),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(A=x),w&&!h){const k=zs(u.left,0),P=zs(u.right,0),B=zs(u.top,0),H=zs(u.bottom,0);d?C=m-2*(k!==0||P!==0?k+P:zs(u.left,u.right)):A=y-2*(B!==0||H!==0?B+H:zs(u.top,u.bottom))}await l({...e,availableWidth:C,availableHeight:A});const D=await s.getDimensions(o.floating);return m!==D.width||y!==D.height?{reset:{rects:!0}}:{}}}};function MY(t){const e=Ec(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Tl(t),a=r?t.offsetWidth:n,s=r?t.offsetHeight:i,o=zT(n)!==a||zT(i)!==s;return o&&(n=a,i=s),{width:n,height:i,$:o}}function h4(t){return Or(t)?t:t.contextElement}function H0(t){const e=h4(t);if(!Tl(e))return sf(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=MY(e);let s=(a?zT(n.width):n.width)/i,o=(a?zT(n.height):n.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Pfe=sf(0);function TY(t){const e=Po(t);return!jC()||!e.visualViewport?Pfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Lfe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Po(t)?!1:e}function sg(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=h4(t);let s=sf(1);e&&(i?Or(i)&&(s=H0(i)):s=H0(t));const o=Lfe(a,n,i)?TY(a):sf(0);let l=(r.left+o.x)/s.x,c=(r.top+o.y)/s.y,u=r.width/s.x,f=r.height/s.y;if(a){const h=Po(a),d=i&&Or(i)?Po(i):i;let m=h,y=dN(m);for(;y&&i&&d!==m;){const v=H0(y),g=y.getBoundingClientRect(),x=Ec(y),_=g.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,E=g.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,f*=v.y,l+=_,c+=E,m=Po(y),y=dN(m)}}return my({width:u,height:f,x:l,y:c})}function d4(t,e){const n=HC(t).scrollLeft;return e?e.left+n:sg(xf(t)).left+n}function AY(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:d4(t,i)),a=i.top+e.scrollTop;return{x:r,y:a}}function Ufe(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",s=xf(i),o=e?zC(e.floating):!1;if(i===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},c=sf(1);const u=sf(0),f=Tl(i);if((f||!f&&!a)&&((iv(i)!=="body"||Q_(s))&&(l=HC(i)),Tl(i))){const d=sg(i);c=H0(i),u.x=d.x+i.clientLeft,u.y=d.y+i.clientTop}const h=s&&!f&&!a?AY(s,l,!0):sf(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Bfe(t){return Array.from(t.getClientRects())}function Ffe(t){const e=xf(t),n=HC(t),i=t.ownerDocument.body,r=zs(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=zs(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+d4(t);const o=-n.scrollTop;return Ec(i).direction==="rtl"&&(s+=zs(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:o}}function zfe(t,e){const n=Po(t),i=xf(t),r=n.visualViewport;let a=i.clientWidth,s=i.clientHeight,o=0,l=0;if(r){a=r.width,s=r.height;const c=jC();(!c||c&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:s,x:o,y:l}}const jfe=new Set(["absolute","fixed"]);function Hfe(t,e){const n=sg(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=Tl(t)?H0(t):sf(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,l=r*a.x,c=i*a.y;return{width:s,height:o,x:l,y:c}}function k9(t,e,n){let i;if(e==="viewport")i=zfe(t,n);else if(e==="document")i=Ffe(xf(t));else if(Or(e))i=Hfe(e,n);else{const r=TY(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return my(i)}function CY(t,e){const n=Sh(t);return n===e||!Or(n)||Qd(n)?!1:Ec(n).position==="fixed"||CY(n,e)}function Vfe(t,e){const n=e.get(t);if(n)return n;let i=fh(t,[],!1).filter(o=>Or(o)&&iv(o)!=="body"),r=null;const a=Ec(t).position==="fixed";let s=a?Sh(t):t;for(;Or(s)&&!Qd(s);){const o=Ec(s),l=o4(s);!l&&o.position==="fixed"&&(r=null),(a?!l&&!r:!l&&o.position==="static"&&!!r&&jfe.has(r.position)||Q_(s)&&!l&&CY(t,s))?i=i.filter(u=>u!==s):r=o,s=Sh(s)}return e.set(t,i),i}function Gfe(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[...n==="clippingAncestors"?zC(e)?[]:Vfe(e,this._c):[].concat(n),i],o=s[0],l=s.reduce((c,u)=>{const f=k9(e,u,r);return c.top=zs(f.top,c.top),c.right=vu(f.right,c.right),c.bottom=vu(f.bottom,c.bottom),c.left=zs(f.left,c.left),c},k9(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Wfe(t){const{width:e,height:n}=MY(t);return{width:e,height:n}}function qfe(t,e,n){const i=Tl(e),r=xf(e),a=n==="fixed",s=sg(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=sf(0);function c(){l.x=d4(r)}if(i||!i&&!a)if((iv(e)!=="body"||Q_(r))&&(o=HC(e)),i){const d=sg(e,!0,a,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else r&&c();a&&!i&&r&&c();const u=r&&!i&&!a?AY(r,o):sf(0),f=s.left+o.scrollLeft-l.x-u.x,h=s.top+o.scrollTop-l.y-u.y;return{x:f,y:h,width:s.width,height:s.height}}function vk(t){return Ec(t).position==="static"}function D9(t,e){if(!Tl(t)||Ec(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xf(t)===n&&(n=n.ownerDocument.body),n}function RY(t,e){const n=Po(t);if(zC(t))return n;if(!Tl(t)){let r=Sh(t);for(;r&&!Qd(r);){if(Or(r)&&!vk(r))return r;r=Sh(r)}return n}let i=D9(t,e);for(;i&&Zue(i)&&vk(i);)i=D9(i,e);return i&&Qd(i)&&vk(i)&&!o4(i)?n:i||ife(t)||n}const Xfe=async function(t){const e=this.getOffsetParent||RY,n=this.getDimensions,i=await n(t.floating);return{reference:qfe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Yfe(t){return Ec(t).direction==="rtl"}const $fe={convertOffsetParentRelativeRectToViewportRelativeRect:Ufe,getDocumentElement:xf,getClippingRect:Gfe,getOffsetParent:RY,getElementRects:Xfe,getClientRects:Bfe,getDimensions:Wfe,getScale:H0,isElement:Or,isRTL:Yfe};function kY(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Kfe(t,e){let n=null,i;const r=xf(t);function a(){var o;clearTimeout(i),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=t.getBoundingClientRect(),{left:u,top:f,width:h,height:d}=c;if(o||e(),!h||!d)return;const m=Tw(f),y=Tw(r.clientWidth-(u+h)),v=Tw(r.clientHeight-(f+d)),g=Tw(u),_={rootMargin:-m+"px "+-y+"px "+-v+"px "+-g+"px",threshold:zs(0,vu(1,l))||1};let E=!0;function T(w){const A=w[0].intersectionRatio;if(A!==l){if(!E)return s();A?s(!1,A):i=setTimeout(()=>{s(!1,1e-7)},1e3)}A===1&&!kY(c,t.getBoundingClientRect())&&s(),E=!1}try{n=new IntersectionObserver(T,{..._,root:r.ownerDocument})}catch{n=new IntersectionObserver(T,_)}n.observe(t)}return s(!0),a}function bN(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=h4(t),u=r||a?[...c?fh(c):[],...fh(e)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),a&&g.addEventListener("resize",n)});const f=c&&o?Kfe(c,n):null;let h=-1,d=null;s&&(d=new ResizeObserver(g=>{let[x]=g;x&&x.target===c&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=d)==null||_.observe(e)})),n()}),c&&!l&&d.observe(c),d.observe(e));let m,y=l?sg(t):null;l&&v();function v(){const g=sg(t);y&&!kY(y,g)&&n(),y=g,m=requestAnimationFrame(v)}return n(),()=>{var g;u.forEach(x=>{r&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),f?.(),(g=d)==null||g.disconnect(),d=null,l&&cancelAnimationFrame(m)}}const Jfe=Dfe,Zfe=Ofe,Qfe=Tfe,ehe=Nfe,the=Afe,O9=Mfe,nhe=Rfe,ihe=Ife,rhe=(t,e,n)=>{const i=new Map,r={platform:$fe,...n},a={...r.platform,_c:i};return Efe(t,e,{...r,platform:a})};var ahe=typeof document<"u",she=function(){},jM=ahe?I.useLayoutEffect:she;function HT(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!HT(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!HT(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function DY(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function I9(t,e){const n=DY(t);return Math.round(e*n)/n}function xk(t){const e=I.useRef(t);return jM(()=>{e.current=t}),e}function ohe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,f]=I.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,d]=I.useState(i);HT(h,i)||d(i);const[m,y]=I.useState(null),[v,g]=I.useState(null),x=I.useCallback(q=>{q!==w.current&&(w.current=q,y(q))},[]),_=I.useCallback(q=>{q!==A.current&&(A.current=q,g(q))},[]),E=a||m,T=s||v,w=I.useRef(null),A=I.useRef(null),C=I.useRef(u),D=l!=null,k=xk(l),P=xk(r),B=xk(c),H=I.useCallback(()=>{if(!w.current||!A.current)return;const q={placement:e,strategy:n,middleware:h};P.current&&(q.platform=P.current),rhe(w.current,A.current,q).then(X=>{const z={...X,isPositioned:B.current!==!1};G.current&&!HT(C.current,z)&&(C.current=z,I_.flushSync(()=>{f(z)}))})},[h,e,n,P,B]);jM(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[c]);const G=I.useRef(!1);jM(()=>(G.current=!0,()=>{G.current=!1}),[]),jM(()=>{if(E&&(w.current=E),T&&(A.current=T),E&&T){if(k.current)return k.current(E,T,H);H()}},[E,T,H,k,D]);const V=I.useMemo(()=>({reference:w,floating:A,setReference:x,setFloating:_}),[x,_]),U=I.useMemo(()=>({reference:E,floating:T}),[E,T]),F=I.useMemo(()=>{const q={position:n,left:0,top:0};if(!U.floating)return q;const X=I9(U.floating,u.x),z=I9(U.floating,u.y);return o?{...q,transform:"translate("+X+"px, "+z+"px)",...DY(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:z}},[n,o,U.floating,u.x,u.y]);return I.useMemo(()=>({...u,update:H,refs:V,elements:U,floatingStyles:F}),[u,H,V,U,F])}const lhe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?O9({element:i.current,padding:r}).fn(n):{}:i?O9({element:i,padding:r}).fn(n):{}}}},OY=(t,e)=>({...Jfe(t),options:[t,e]}),p4=(t,e)=>({...Zfe(t),options:[t,e]}),N9=(t,e)=>({...ihe(t),options:[t,e]}),VT=(t,e)=>({...Qfe(t),options:[t,e]}),che=(t,e)=>({...ehe(t),options:[t,e]}),uhe=(t,e)=>({...the(t),options:[t,e]}),E1=(t,e)=>({...nhe(t),options:[t,e]}),IY=(t,e)=>({...lhe(t),options:[t,e]});function NY(t){return I.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const PY={...vae},fhe=PY.useInsertionEffect,hhe=fhe||(t=>t());function Jf(t){const e=I.useRef(()=>{});return hhe(()=>{e.current=t}),I.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}var of=typeof document<"u"?I.useLayoutEffect:I.useEffect;let P9=!1,dhe=0;const L9=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+dhe++;function phe(){const[t,e]=I.useState(()=>P9?L9():void 0);return of(()=>{t==null&&e(L9())},[]),I.useEffect(()=>{P9=!0},[]),t}const mhe=PY.useId,LY=mhe||phe;function ghe(){const t=new Map;return{emit(e,n){var i;(i=t.get(e))==null||i.forEach(r=>r(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var i;t.set(e,((i=t.get(e))==null?void 0:i.filter(r=>r!==n))||[])}}}const bhe=I.createContext(null),yhe=I.createContext(null),m4=()=>{var t;return((t=I.useContext(bhe))==null?void 0:t.id)||null},g4=()=>I.useContext(yhe);function b4(t){return"data-floating-ui-"+t}function _k(t){const e=I.useRef(t);return of(()=>{e.current=t}),e}const U9=b4("safe-polygon");function HM(t,e,n){return n&&!pN(n)?0:typeof t=="number"?t:t?.[e]}function vhe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,dataRef:r,events:a,elements:s}=t,{enabled:o=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:f=0,move:h=!0}=e,d=g4(),m=m4(),y=_k(c),v=_k(l),g=_k(n),x=I.useRef(),_=I.useRef(-1),E=I.useRef(),T=I.useRef(-1),w=I.useRef(!0),A=I.useRef(!1),C=I.useRef(()=>{}),D=I.useRef(!1),k=I.useCallback(()=>{var F;const q=(F=r.current.openEvent)==null?void 0:F.type;return q?.includes("mouse")&&q!=="mousedown"},[r]);I.useEffect(()=>{if(!o)return;function F(q){let{open:X}=q;X||(clearTimeout(_.current),clearTimeout(T.current),w.current=!0,D.current=!1)}return a.on("openchange",F),()=>{a.off("openchange",F)}},[o,a]),I.useEffect(()=>{if(!o||!y.current||!n)return;function F(X){k()&&i(!1,X,"hover")}const q=Em(s.floating).documentElement;return q.addEventListener("mouseleave",F),()=>{q.removeEventListener("mouseleave",F)}},[s.floating,n,i,o,y,k]);const P=I.useCallback(function(F,q,X){q===void 0&&(q=!0),X===void 0&&(X="hover");const z=HM(v.current,"close",x.current);z&&!E.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>i(!1,F,X),z)):q&&(clearTimeout(_.current),i(!1,F,X))},[v,i]),B=Jf(()=>{C.current(),E.current=void 0}),H=Jf(()=>{if(A.current){const F=Em(s.floating).body;F.style.pointerEvents="",F.removeAttribute(U9),A.current=!1}}),G=Jf(()=>r.current.openEvent?["click","mousedown"].includes(r.current.openEvent.type):!1);I.useEffect(()=>{if(!o)return;function F(ce){if(clearTimeout(_.current),w.current=!1,u&&!pN(x.current)||f>0&&!HM(v.current,"open"))return;const he=HM(v.current,"open",x.current);he?_.current=window.setTimeout(()=>{g.current||i(!0,ce,"hover")},he):n||i(!0,ce,"hover")}function q(ce){if(G())return;C.current();const he=Em(s.floating);if(clearTimeout(T.current),D.current=!1,y.current&&r.current.floatingContext){n||clearTimeout(_.current),E.current=y.current({...r.current.floatingContext,tree:d,x:ce.clientX,y:ce.clientY,onClose(){H(),B(),G()||P(ce,!0,"safe-polygon")}});const Me=E.current;he.addEventListener("mousemove",Me),C.current=()=>{he.removeEventListener("mousemove",Me)};return}(x.current==="touch"?!s_(s.floating,ce.relatedTarget):!0)&&P(ce)}function X(ce){G()||r.current.floatingContext&&(y.current==null||y.current({...r.current.floatingContext,tree:d,x:ce.clientX,y:ce.clientY,onClose(){H(),B(),G()||P(ce)}})(ce))}if(Or(s.domReference)){var z;const ce=s.domReference;return n&&ce.addEventListener("mouseleave",X),(z=s.floating)==null||z.addEventListener("mouseleave",X),h&&ce.addEventListener("mousemove",F,{once:!0}),ce.addEventListener("mouseenter",F),ce.addEventListener("mouseleave",q),()=>{var he;n&&ce.removeEventListener("mouseleave",X),(he=s.floating)==null||he.removeEventListener("mouseleave",X),h&&ce.removeEventListener("mousemove",F),ce.removeEventListener("mouseenter",F),ce.removeEventListener("mouseleave",q)}}},[s,o,t,u,f,h,P,B,H,i,n,g,d,v,y,r,G]),of(()=>{var F;if(o&&n&&(F=y.current)!=null&&F.__options.blockPointerEvents&&k()){A.current=!0;const X=s.floating;if(Or(s.domReference)&&X){var q;const z=Em(s.floating).body;z.setAttribute(U9,"");const ce=s.domReference,he=d==null||(q=d.nodesRef.current.find($=>$.id===m))==null||(q=q.context)==null?void 0:q.elements.floating;return he&&(he.style.pointerEvents=""),z.style.pointerEvents="none",ce.style.pointerEvents="auto",X.style.pointerEvents="auto",()=>{z.style.pointerEvents="",ce.style.pointerEvents="",X.style.pointerEvents=""}}}},[o,n,m,s,d,y,k]),of(()=>{n||(x.current=void 0,D.current=!1,B(),H())},[n,B,H]),I.useEffect(()=>()=>{B(),clearTimeout(_.current),clearTimeout(T.current),H()},[o,s.domReference,B,H]);const V=I.useMemo(()=>{function F(q){x.current=q.pointerType}return{onPointerDown:F,onPointerEnter:F,onMouseMove(q){const{nativeEvent:X}=q;function z(){!w.current&&!g.current&&i(!0,X,"hover")}u&&!pN(x.current)||n||f===0||D.current&&q.movementX**2+q.movementY**2<2||(clearTimeout(T.current),x.current==="touch"?z():(D.current=!0,T.current=window.setTimeout(z,f)))}}},[u,i,n,g,f]),U=I.useMemo(()=>({onMouseEnter(){clearTimeout(_.current)},onMouseLeave(F){G()||P(F.nativeEvent,!1)}}),[P,G]);return I.useMemo(()=>o?{reference:V,floating:U}:{},[o,V,U])}const yN=()=>{},UY=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:yN,setState:yN,isInstantPhase:!1}),xhe=()=>I.useContext(UY);function _he(t){const{children:e,delay:n,timeoutMs:i=0}=t,[r,a]=I.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:i,initialDelay:n,currentId:null,isInstantPhase:!1}),s=I.useRef(null),o=I.useCallback(l=>{a({currentId:l})},[]);return of(()=>{r.currentId?s.current===null?s.current=r.currentId:r.isInstantPhase||a({isInstantPhase:!0}):(r.isInstantPhase&&a({isInstantPhase:!1}),s.current=null)},[r.currentId,r.isInstantPhase]),I.createElement(UY.Provider,{value:I.useMemo(()=>({...r,setState:a,setCurrentId:o}),[r,o])},e)}function She(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,floatingId:r}=t,{id:a,enabled:s=!0}=e,o=a??r,l=xhe(),{currentId:c,setCurrentId:u,initialDelay:f,setState:h,timeoutMs:d}=l;return of(()=>{s&&c&&(h({delay:{open:1,close:HM(f,"close")}}),c!==o&&i(!1))},[s,o,i,h,c,f]),of(()=>{function m(){i(!1),h({delay:f,currentId:null})}if(s&&c&&!n&&c===o){if(d){const y=window.setTimeout(m,d);return()=>{clearTimeout(y)}}m()}},[s,n,h,c,o,i,f,d]),of(()=>{s&&(u===yN||!n||u(o))},[s,n,u,o]),l}function Sk(t,e){let n=t.filter(r=>{var a;return r.parentId===e&&((a=r.context)==null?void 0:a.open)}),i=n;for(;i.length;)i=t.filter(r=>{var a;return(a=i)==null?void 0:a.some(s=>{var o;return r.parentId===s.id&&((o=r.context)==null?void 0:o.open)})}),n=n.concat(i);return n}const whe="data-floating-ui-focusable",Ehe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Mhe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},B9=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function The(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,elements:r,dataRef:a}=t,{enabled:s=!0,escapeKey:o=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:f="pointerdown",ancestorScroll:h=!1,bubbles:d,capture:m}=e,y=g4(),v=Jf(typeof l=="function"?l:()=>!1),g=typeof l=="function"?v:l,x=I.useRef(!1),_=I.useRef(!1),{escapeKey:E,outsidePress:T}=B9(d),{escapeKey:w,outsidePress:A}=B9(m),C=I.useRef(!1),D=Jf(V=>{var U;if(!n||!s||!o||V.key!=="Escape"||C.current)return;const F=(U=a.current.floatingContext)==null?void 0:U.nodeId,q=y?Sk(y.nodesRef.current,F):[];if(!E&&(V.stopPropagation(),q.length>0)){let X=!0;if(q.forEach(z=>{var ce;if((ce=z.context)!=null&&ce.open&&!z.context.dataRef.current.__escapeKeyBubbles){X=!1;return}}),!X)return}i(!1,cfe(V)?V.nativeEvent:V,"escape-key")}),k=Jf(V=>{var U;const F=()=>{var q;D(V),(q=f0(V))==null||q.removeEventListener("keydown",F)};(U=f0(V))==null||U.addEventListener("keydown",F)}),P=Jf(V=>{var U;const F=x.current;x.current=!1;const q=_.current;if(_.current=!1,c==="click"&&q||F||typeof g=="function"&&!g(V))return;const X=f0(V),z="["+b4("inert")+"]",ce=Em(r.floating).querySelectorAll(z);let he=Or(X)?X:null;for(;he&&!Qd(he);){const pe=Sh(he);if(Qd(pe)||!Or(pe))break;he=pe}if(ce.length&&Or(X)&&!ufe(X)&&!s_(X,r.floating)&&Array.from(ce).every(pe=>!s_(he,pe)))return;if(Tl(X)&&G){const pe=X.clientWidth>0&&X.scrollWidth>X.clientWidth,xe=X.clientHeight>0&&X.scrollHeight>X.clientHeight;let Ne=xe&&V.offsetX>X.clientWidth;if(xe&&Ec(X).direction==="rtl"&&(Ne=V.offsetX<=X.offsetWidth-X.clientWidth),Ne||pe&&V.offsetY>X.clientHeight)return}const $=(U=a.current.floatingContext)==null?void 0:U.nodeId,Me=y&&Sk(y.nodesRef.current,$).some(pe=>{var xe;return yk(V,(xe=pe.context)==null?void 0:xe.elements.floating)});if(yk(V,r.floating)||yk(V,r.domReference)||Me)return;const Se=y?Sk(y.nodesRef.current,$):[];if(Se.length>0){let pe=!0;if(Se.forEach(xe=>{var Ne;if((Ne=xe.context)!=null&&Ne.open&&!xe.context.dataRef.current.__outsidePressBubbles){pe=!1;return}}),!pe)return}i(!1,V,"outside-press")}),B=Jf(V=>{var U;const F=()=>{var q;P(V),(q=f0(V))==null||q.removeEventListener(c,F)};(U=f0(V))==null||U.addEventListener(c,F)});I.useEffect(()=>{if(!n||!s)return;a.current.__escapeKeyBubbles=E,a.current.__outsidePressBubbles=T;let V=-1;function U(ce){i(!1,ce,"ancestor-scroll")}function F(){window.clearTimeout(V),C.current=!0}function q(){V=window.setTimeout(()=>{C.current=!1},jC()?5:0)}const X=Em(r.floating);o&&(X.addEventListener("keydown",w?k:D,w),X.addEventListener("compositionstart",F),X.addEventListener("compositionend",q)),g&&X.addEventListener(c,A?B:P,A);let z=[];return h&&(Or(r.domReference)&&(z=fh(r.domReference)),Or(r.floating)&&(z=z.concat(fh(r.floating))),!Or(r.reference)&&r.reference&&r.reference.contextElement&&(z=z.concat(fh(r.reference.contextElement)))),z=z.filter(ce=>{var he;return ce!==((he=X.defaultView)==null?void 0:he.visualViewport)}),z.forEach(ce=>{ce.addEventListener("scroll",U,{passive:!0})}),()=>{o&&(X.removeEventListener("keydown",w?k:D,w),X.removeEventListener("compositionstart",F),X.removeEventListener("compositionend",q)),g&&X.removeEventListener(c,A?B:P,A),z.forEach(ce=>{ce.removeEventListener("scroll",U)}),window.clearTimeout(V)}},[a,r,o,g,c,n,i,h,s,E,T,D,w,k,P,A,B]),I.useEffect(()=>{x.current=!1},[g,c]);const H=I.useMemo(()=>({onKeyDown:D,[Ehe[f]]:V=>{u&&i(!1,V.nativeEvent,"reference-press")}}),[D,i,u,f]),G=I.useMemo(()=>({onKeyDown:D,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[Mhe[c]]:()=>{x.current=!0}}),[D,c]);return I.useMemo(()=>s?{reference:H,floating:G}:{},[s,H,G])}function Ahe(t){const{open:e=!1,onOpenChange:n,elements:i}=t,r=LY(),a=I.useRef({}),[s]=I.useState(()=>ghe()),o=m4()!=null,[l,c]=I.useState(i.reference),u=Jf((d,m,y)=>{a.current.openEvent=d?m:void 0,s.emit("openchange",{open:d,event:m,reason:y,nested:o}),n?.(d,m,y)}),f=I.useMemo(()=>({setPositionReference:c}),[]),h=I.useMemo(()=>({reference:l||i.reference||null,floating:i.floating||null,domReference:i.reference}),[l,i.reference,i.floating]);return I.useMemo(()=>({dataRef:a,open:e,onOpenChange:u,elements:h,events:s,floatingId:r,refs:f}),[e,u,h,s,r,f])}function y4(t){t===void 0&&(t={});const{nodeId:e}=t,n=Ahe({...t,elements:{reference:null,floating:null,...t.elements}}),i=t.rootContext||n,r=i.elements,[a,s]=I.useState(null),[o,l]=I.useState(null),u=r?.domReference||a,f=I.useRef(null),h=g4();of(()=>{u&&(f.current=u)},[u]);const d=ohe({...t,elements:{...r,...o&&{reference:o}}}),m=I.useCallback(_=>{const E=Or(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;l(E),d.refs.setReference(E)},[d.refs]),y=I.useCallback(_=>{(Or(_)||_===null)&&(f.current=_,s(_)),(Or(d.refs.reference.current)||d.refs.reference.current===null||_!==null&&!Or(_))&&d.refs.setReference(_)},[d.refs]),v=I.useMemo(()=>({...d.refs,setReference:y,setPositionReference:m,domReference:f}),[d.refs,y,m]),g=I.useMemo(()=>({...d.elements,domReference:u}),[d.elements,u]),x=I.useMemo(()=>({...d,...i,refs:v,elements:g,nodeId:e}),[d,v,g,e,i]);return of(()=>{i.dataRef.current.floatingContext=x;const _=h?.nodesRef.current.find(E=>E.id===e);_&&(_.context=x)}),I.useMemo(()=>({...d,context:x,refs:v,elements:g}),[d,v,g,x])}function Che(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,events:r,dataRef:a,elements:s}=t,{enabled:o=!0,visibleOnly:l=!0}=e,c=I.useRef(!1),u=I.useRef(),f=I.useRef(!0);I.useEffect(()=>{if(!o)return;const d=Po(s.domReference);function m(){!n&&Tl(s.domReference)&&s.domReference===w9(Em(s.domReference))&&(c.current=!0)}function y(){f.current=!0}return d.addEventListener("blur",m),d.addEventListener("keydown",y,!0),()=>{d.removeEventListener("blur",m),d.removeEventListener("keydown",y,!0)}},[s.domReference,n,o]),I.useEffect(()=>{if(!o)return;function d(m){let{reason:y}=m;(y==="reference-press"||y==="escape-key")&&(c.current=!0)}return r.on("openchange",d),()=>{r.off("openchange",d)}},[r,o]),I.useEffect(()=>()=>{clearTimeout(u.current)},[]);const h=I.useMemo(()=>({onPointerDown(d){afe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(d){if(c.current)return;const m=f0(d.nativeEvent);if(l&&Or(m))try{if(sfe()&&ofe())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!f.current&&!hfe(m))return}i(!0,d.nativeEvent,"focus")},onBlur(d){c.current=!1;const m=d.relatedTarget,y=d.nativeEvent,v=Or(m)&&m.hasAttribute(b4("focus-guard"))&&m.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var g;const x=w9(s.domReference?s.domReference.ownerDocument:document);!m&&x===s.domReference||s_((g=a.current.floatingContext)==null?void 0:g.refs.floating.current,x)||s_(s.domReference,x)||v||i(!1,y,"focus")})}}),[a,s.domReference,i,l]);return I.useMemo(()=>o?{reference:h}:{},[o,h])}const F9="active",z9="selected";function wk(t,e,n){const i=new Map,r=n==="item";let a=t;if(r&&t){const{[F9]:s,[z9]:o,...l}=t;a=l}return{...n==="floating"&&{tabIndex:-1,[whe]:""},...a,...e.map(s=>{const o=s?s[n]:null;return typeof o=="function"?t?o(t):null:o}).concat(t).reduce((s,o)=>(o&&Object.entries(o).forEach(l=>{let[c,u]=l;if(!(r&&[F9,z9].includes(c)))if(c.indexOf("on")===0){if(i.has(c)||i.set(c,[]),typeof u=="function"){var f;(f=i.get(c))==null||f.push(u),s[c]=function(){for(var h,d=arguments.length,m=new Array(d),y=0;y<d;y++)m[y]=arguments[y];return(h=i.get(c))==null?void 0:h.map(v=>v(...m)).find(v=>v!==void 0)}}}else s[c]=u}),s),{})}}function Rhe(t){t===void 0&&(t=[]);const e=t.map(o=>o?.reference),n=t.map(o=>o?.floating),i=t.map(o=>o?.item),r=I.useCallback(o=>wk(o,t,"reference"),e),a=I.useCallback(o=>wk(o,t,"floating"),n),s=I.useCallback(o=>wk(o,t,"item"),i);return I.useMemo(()=>({getReferenceProps:r,getFloatingProps:a,getItemProps:s}),[r,a,s])}const khe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Dhe(t,e){var n;e===void 0&&(e={});const{open:i,floatingId:r}=t,{enabled:a=!0,role:s="dialog"}=e,o=(n=khe.get(s))!=null?n:s,l=LY(),u=m4()!=null,f=I.useMemo(()=>o==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:i?r:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":o==="alertdialog"?"dialog":o,"aria-controls":i?r:void 0,...o==="listbox"&&{role:"combobox"},...o==="menu"&&{id:l},...o==="menu"&&u&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[o,r,u,i,l,s]),h=I.useMemo(()=>{const m={id:r,...o&&{role:o}};return o==="tooltip"||s==="label"?m:{...m,...o==="menu"&&{"aria-labelledby":l}}},[o,r,l,s]),d=I.useCallback(m=>{let{active:y,selected:v}=m;const g={role:"option",...y&&{id:r+"-option"}};switch(s){case"select":return{...g,"aria-selected":y&&v};case"combobox":return{...g,...y&&{"aria-selected":!0}}}return{}},[r,s]);return I.useMemo(()=>a?{reference:f,floating:h,item:d}:{},[a,f,h,d])}const[Ohe,Rc]=Eu("ScrollArea.Root component was not found in tree");function gy(t,e){const n=ym(e);Zy(()=>{let i=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(i),r.unobserve(t)}}},[t,n])}const Ihe=I.forwardRef((t,e)=>{const{style:n,...i}=t,r=Rc(),[a,s]=I.useState(0),[o,l]=I.useState(0),c=!!(a&&o);return gy(r.scrollbarX,()=>{const u=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(u),l(u)}),gy(r.scrollbarY,()=>{const u=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(u),s(u)}),c?R.jsx("div",{...i,ref:e,style:{...n,width:a,height:o}}):null}),Nhe=I.forwardRef((t,e)=>{const n=Rc(),i=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&i?R.jsx(Ihe,{...t,ref:e}):null}),Phe={scrollHideDelay:1e3,type:"hover"},BY=I.forwardRef((t,e)=>{const{type:n,scrollHideDelay:i,scrollbars:r,getStyles:a,...s}=Ot("ScrollAreaRoot",Phe,t),[o,l]=I.useState(null),[c,u]=I.useState(null),[f,h]=I.useState(null),[d,m]=I.useState(null),[y,v]=I.useState(null),[g,x]=I.useState(0),[_,E]=I.useState(0),[T,w]=I.useState(!1),[A,C]=I.useState(!1),D=As(e,k=>l(k));return R.jsx(Ohe,{value:{type:n,scrollHideDelay:i,scrollArea:o,viewport:c,onViewportChange:u,content:f,onContentChange:h,scrollbarX:d,onScrollbarXChange:m,scrollbarXEnabled:T,onScrollbarXEnabledChange:w,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:A,onScrollbarYEnabledChange:C,onCornerWidthChange:x,onCornerHeightChange:E,getStyles:a},children:R.jsx(et,{...s,ref:D,__vars:{"--sa-corner-width":r!=="xy"?"0px":`${g}px`,"--sa-corner-height":r!=="xy"?"0px":`${_}px`}})})});BY.displayName="@mantine/core/ScrollAreaRoot";function FY(t,e){const n=t/e;return Number.isNaN(n)?0:n}function VC(t){const e=FY(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-n)*e;return Math.max(i,18)}function zY(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Lhe(t,[e,n]){return Math.min(n,Math.max(e,t))}function j9(t,e,n="ltr"){const i=VC(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-r,s=e.content-e.viewport,o=a-i,l=n==="ltr"?[0,s]:[s*-1,0],c=Lhe(t,l);return zY([0,s],[0,o])(c)}function Uhe(t,e,n,i="ltr"){const r=VC(n),a=r/2,s=e||a,o=r-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,f=i==="ltr"?[0,u]:[u*-1,0];return zY([l,c],f)(t)}function jY(t,e){return t>0&&t<e}function GT(t){return t?parseInt(t,10):0}function Wm(t,e,{checkForDefaultPrevented:n=!0}={}){return i=>{t?.(i),(n===!1||!i.defaultPrevented)&&e?.(i)}}const[Bhe,HY]=Eu("ScrollAreaScrollbar was not found in tree"),VY=I.forwardRef((t,e)=>{const{sizes:n,hasThumb:i,onThumbChange:r,onThumbPointerUp:a,onThumbPointerDown:s,onThumbPositionChange:o,onDragScroll:l,onWheelScroll:c,onResize:u,...f}=t,h=Rc(),[d,m]=I.useState(null),y=As(e,C=>m(C)),v=I.useRef(null),g=I.useRef(""),{viewport:x}=h,_=n.content-n.viewport,E=ym(c),T=ym(o),w=RC(u,10),A=C=>{if(v.current){const D=C.clientX-v.current.left,k=C.clientY-v.current.top;l({x:D,y:k})}};return I.useEffect(()=>{const C=D=>{const k=D.target;d?.contains(k)&&E(D,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[x,d,_,E]),I.useEffect(T,[n,T]),gy(d,w),gy(h.content,w),R.jsx(Bhe,{value:{scrollbar:d,hasThumb:i,onThumbChange:ym(r),onThumbPointerUp:ym(a),onThumbPositionChange:T,onThumbPointerDown:ym(s)},children:R.jsx("div",{...f,ref:y,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:Wm(t.onPointerDown,C=>{C.preventDefault(),C.button===0&&(C.target.setPointerCapture(C.pointerId),v.current=d.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",A(C))}),onPointerMove:Wm(t.onPointerMove,A),onPointerUp:Wm(t.onPointerUp,C=>{const D=C.target;D.hasPointerCapture(C.pointerId)&&(C.preventDefault(),D.releasePointerCapture(C.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=g.current,v.current=null}})})}),GY=I.forwardRef((t,e)=>{const{sizes:n,onSizesChange:i,style:r,...a}=t,s=Rc(),[o,l]=I.useState(),c=I.useRef(null),u=As(e,c,s.onScrollbarXChange);return I.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),R.jsx(VY,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{...r,"--sa-thumb-width":`${VC(n)}px`},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(s.viewport){const d=s.viewport.scrollLeft+f.deltaX;t.onWheelScroll(d),jY(d,h)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&i({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:GT(o.paddingLeft),paddingEnd:GT(o.paddingRight)}})}})});GY.displayName="@mantine/core/ScrollAreaScrollbarX";const WY=I.forwardRef((t,e)=>{const{sizes:n,onSizesChange:i,style:r,...a}=t,s=Rc(),[o,l]=I.useState(),c=I.useRef(null),u=As(e,c,s.onScrollbarYChange);return I.useEffect(()=>{c.current&&l(window.getComputedStyle(c.current))},[]),R.jsx(VY,{...a,"data-orientation":"vertical",ref:u,sizes:n,style:{"--sa-thumb-height":`${VC(n)}px`,...r},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(s.viewport){const d=s.viewport.scrollTop+f.deltaY;t.onWheelScroll(d),jY(d,h)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&i({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:GT(o.paddingTop),paddingEnd:GT(o.paddingBottom)}})}})});WY.displayName="@mantine/core/ScrollAreaScrollbarY";const GC=I.forwardRef((t,e)=>{const{orientation:n="vertical",...i}=t,{dir:r}=nv(),a=Rc(),s=I.useRef(null),o=I.useRef(0),[l,c]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=FY(l.viewport,l.content),f={...i,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:d=>{s.current=d},onThumbPointerUp:()=>{o.current=0},onThumbPointerDown:d=>{o.current=d}},h=(d,m)=>Uhe(d,o.current,l,m);return n==="horizontal"?R.jsx(GY,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&s.current){const d=a.viewport.scrollLeft,m=j9(d,l,r);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:d=>{a.viewport&&(a.viewport.scrollLeft=d)},onDragScroll:d=>{a.viewport&&(a.viewport.scrollLeft=h(d,r))}}):n==="vertical"?R.jsx(WY,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&s.current){const d=a.viewport.scrollTop,m=j9(d,l);l.scrollbar.size===0?s.current.style.setProperty("--thumb-opacity","0"):s.current.style.setProperty("--thumb-opacity","1"),s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:d=>{a.viewport&&(a.viewport.scrollTop=d)},onDragScroll:d=>{a.viewport&&(a.viewport.scrollTop=h(d))}}):null});GC.displayName="@mantine/core/ScrollAreaScrollbarVisible";const v4=I.forwardRef((t,e)=>{const n=Rc(),{forceMount:i,...r}=t,[a,s]=I.useState(!1),o=t.orientation==="horizontal",l=RC(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?c:u)}},10);return gy(n.viewport,l),gy(n.content,l),i||a?R.jsx(GC,{"data-state":a?"visible":"hidden",...r,ref:e}):null});v4.displayName="@mantine/core/ScrollAreaScrollbarAuto";const qY=I.forwardRef((t,e)=>{const{forceMount:n,...i}=t,r=Rc(),[a,s]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:o}=r;let l=0;if(o){const c=()=>{window.clearTimeout(l),s(!0)},u=()=>{l=window.setTimeout(()=>s(!1),r.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[r.scrollArea,r.scrollHideDelay]),n||a?R.jsx(v4,{"data-state":a?"visible":"hidden",...i,ref:e}):null});qY.displayName="@mantine/core/ScrollAreaScrollbarHover";const Fhe=I.forwardRef((t,e)=>{const{forceMount:n,...i}=t,r=Rc(),a=t.orientation==="horizontal",[s,o]=I.useState("hidden"),l=RC(()=>o("idle"),100);return I.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>o("hidden"),r.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,r.scrollHideDelay]),I.useEffect(()=>{const{viewport:c}=r,u=a?"scrollLeft":"scrollTop";if(c){let f=c[u];const h=()=>{const d=c[u];f!==d&&(o("scrolling"),l()),f=d};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[r.viewport,a,l]),n||s!=="hidden"?R.jsx(GC,{"data-state":s==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:Wm(t.onPointerEnter,()=>o("interacting")),onPointerLeave:Wm(t.onPointerLeave,()=>o("idle"))}):null}),vN=I.forwardRef((t,e)=>{const{forceMount:n,...i}=t,r=Rc(),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=r,o=t.orientation==="horizontal";return I.useEffect(()=>(o?a(!0):s(!0),()=>{o?a(!1):s(!1)}),[o,a,s]),r.type==="hover"?R.jsx(qY,{...i,ref:e,forceMount:n}):r.type==="scroll"?R.jsx(Fhe,{...i,ref:e,forceMount:n}):r.type==="auto"?R.jsx(v4,{...i,ref:e,forceMount:n}):r.type==="always"?R.jsx(GC,{...i,ref:e}):null});vN.displayName="@mantine/core/ScrollAreaScrollbar";function zhe(t,e=()=>{}){let n={left:t.scrollLeft,top:t.scrollTop},i=0;return function r(){const a={left:t.scrollLeft,top:t.scrollTop},s=n.left!==a.left,o=n.top!==a.top;(s||o)&&e(),n=a,i=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(i)}const XY=I.forwardRef((t,e)=>{const{style:n,...i}=t,r=Rc(),a=HY(),{onThumbPositionChange:s}=a,o=As(e,u=>a.onThumbChange(u)),l=I.useRef(void 0),c=RC(()=>{l.current&&(l.current(),l.current=void 0)},100);return I.useEffect(()=>{const{viewport:u}=r;if(u){const f=()=>{if(c(),!l.current){const h=zhe(u,s);l.current=h,s()}};return s(),u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[r.viewport,c,s]),R.jsx("div",{"data-state":a.hasThumb?"visible":"hidden",...i,ref:o,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Wm(t.onPointerDownCapture,u=>{const h=u.target.getBoundingClientRect(),d=u.clientX-h.left,m=u.clientY-h.top;a.onThumbPointerDown({x:d,y:m})}),onPointerUp:Wm(t.onPointerUp,a.onThumbPointerUp)})});XY.displayName="@mantine/core/ScrollAreaThumb";const xN=I.forwardRef((t,e)=>{const{forceMount:n,...i}=t,r=HY();return n||r.hasThumb?R.jsx(XY,{ref:e,...i}):null});xN.displayName="@mantine/core/ScrollAreaThumb";const YY=I.forwardRef(({children:t,style:e,...n},i)=>{const r=Rc(),a=As(i,r.onViewportChange);return R.jsx(et,{...n,ref:a,style:{overflowX:r.scrollbarXEnabled?"scroll":"hidden",overflowY:r.scrollbarYEnabled?"scroll":"hidden",...e},children:R.jsx("div",{...r.getStyles("content"),ref:r.onContentChange,children:t})})});YY.displayName="@mantine/core/ScrollAreaViewport";var x4={root:"m_d57069b5",content:"m_b1336c6",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const $Y={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},jhe=(t,{scrollbarSize:e,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":bt(e),"--scrollarea-over-scroll-behavior":n}}),kc=Qt((t,e)=>{const n=Ot("ScrollArea",$Y,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,scrollbarSize:l,vars:c,type:u,scrollHideDelay:f,viewportProps:h,viewportRef:d,onScrollPositionChange:m,children:y,offsetScrollbars:v,scrollbars:g,onBottomReached:x,onTopReached:_,overscrollBehavior:E,attributes:T,...w}=n,[A,C]=I.useState(!1),[D,k]=I.useState(!1),[P,B]=I.useState(!1),H=xn({name:"ScrollArea",props:n,classes:x4,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:T,vars:c,varsResolver:jhe}),G=I.useRef(null),V=NY([d,G]);return I.useEffect(()=>{if(!G.current||v!=="present")return;const U=G.current,F=new ResizeObserver(()=>{const{scrollHeight:q,clientHeight:X,scrollWidth:z,clientWidth:ce}=U;k(q>X),B(z>ce)});return F.observe(U),()=>F.disconnect()},[G,v]),R.jsxs(BY,{getStyles:H,type:u==="never"?"always":u,scrollHideDelay:f,ref:e,scrollbars:g,...H("root"),...w,children:[R.jsx(YY,{...h,...H("viewport",{style:h?.style}),ref:V,"data-offset-scrollbars":v===!0?"xy":v||void 0,"data-scrollbars":g||void 0,"data-horizontal-hidden":v==="present"&&!P?"true":void 0,"data-vertical-hidden":v==="present"&&!D?"true":void 0,onScroll:U=>{h?.onScroll?.(U),m?.({x:U.currentTarget.scrollLeft,y:U.currentTarget.scrollTop});const{scrollTop:F,scrollHeight:q,clientHeight:X}=U.currentTarget;F-(q-X)>=-.6&&x?.(),F===0&&_?.()},children:y}),(g==="xy"||g==="x")&&R.jsx(vN,{...H("scrollbar"),orientation:"horizontal","data-hidden":u==="never"||v==="present"&&!P?!0:void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:R.jsx(xN,{...H("thumb")})}),(g==="xy"||g==="y")&&R.jsx(vN,{...H("scrollbar"),orientation:"vertical","data-hidden":u==="never"||v==="present"&&!D?!0:void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:R.jsx(xN,{...H("thumb")})}),R.jsx(Nhe,{...H("corner"),"data-hovered":A||void 0,"data-hidden":u==="never"||void 0})]})});kc.displayName="@mantine/core/ScrollArea";const _4=Qt((t,e)=>{const{children:n,classNames:i,styles:r,scrollbarSize:a,scrollHideDelay:s,type:o,dir:l,offsetScrollbars:c,viewportRef:u,onScrollPositionChange:f,unstyled:h,variant:d,viewportProps:m,scrollbars:y,style:v,vars:g,onBottomReached:x,onTopReached:_,onOverflowChange:E,...T}=Ot("ScrollAreaAutosize",$Y,t),w=I.useRef(null),A=NY([u,w]),[C,D]=I.useState(!1),k=I.useRef(!1);return I.useEffect(()=>{if(!E)return;const P=w.current;if(!P)return;const B=()=>{const G=P.scrollHeight>P.clientHeight;G!==C&&(k.current?E?.(G):(k.current=!0,G&&E?.(!0)),D(G))};B();const H=new ResizeObserver(B);return H.observe(P),()=>H.disconnect()},[E,C]),R.jsx(et,{...T,ref:e,style:[{display:"flex",overflow:"hidden"},v],children:R.jsx(et,{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",...y==="y"&&{minWidth:0},...y==="x"&&{minHeight:0},...y==="xy"&&{minWidth:0,minHeight:0},...y===!1&&{minWidth:0,minHeight:0}},children:R.jsx(kc,{classNames:i,styles:r,scrollHideDelay:s,scrollbarSize:a,type:o,dir:l,offsetScrollbars:c,viewportRef:A,onScrollPositionChange:f,unstyled:h,variant:d,viewportProps:m,vars:g,scrollbars:y,onBottomReached:x,onTopReached:_,"data-autosize":"true",children:n})})})});kc.classes=x4;_4.displayName="@mantine/core/ScrollAreaAutosize";_4.classes=x4;kc.Autosize=_4;var KY={root:"m_87cf2631"};const Hhe={__staticSelector:"UnstyledButton"},df=Rl((t,e)=>{const n=Ot("UnstyledButton",Hhe,t),{className:i,component:r="button",__staticSelector:a,unstyled:s,classNames:o,styles:l,style:c,attributes:u,...f}=n,h=xn({name:a,props:n,classes:KY,className:i,style:c,classNames:o,styles:l,unstyled:s,attributes:u});return R.jsx(et,{...h("root",{focusable:!0}),component:r,ref:e,type:r==="button"?"button":void 0,...f})});df.classes=KY;df.displayName="@mantine/core/UnstyledButton";var JY={root:"m_515a97f8"};const S4=Qt((t,e)=>{const n=Ot("VisuallyHidden",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,attributes:c,...u}=n,f=xn({name:"VisuallyHidden",classes:JY,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:c});return R.jsx(et,{component:"span",ref:e,...f("root"),...u})});S4.classes=JY;S4.displayName="@mantine/core/VisuallyHidden";var ZY={root:"m_1b7284a3"};const Vhe=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Qr(e),"--paper-shadow":t4(n)}}),Ms=Rl((t,e)=>{const n=Ot("Paper",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,withBorder:l,vars:c,radius:u,shadow:f,variant:h,mod:d,attributes:m,...y}=n,v=xn({name:"Paper",props:n,classes:ZY,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:m,vars:c,varsResolver:Vhe});return R.jsx(et,{ref:e,mod:[{"data-with-border":l},d],...v("root"),variant:h,...y})});Ms.classes=ZY;Ms.displayName="@mantine/core/Paper";function H9(t,e,n,i){return t==="center"||i==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function V9(t,e,n,i,r){return t==="center"||i==="center"?{left:e}:t==="end"?{[r==="ltr"?"right":"left"]:n}:t==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const Ghe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Whe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:i,arrowPosition:r,arrowX:a,arrowY:s,dir:o}){const[l,c="center"]=t.split("-"),u={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[Ghe[l]]:i},f=-e/2;return l==="left"?{...u,...H9(c,s,n,r),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...u,...H9(c,s,n,r),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...u,...V9(c,a,n,r,o),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...u,...V9(c,a,n,r,o),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const WT=I.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:i,arrowPosition:r,visible:a,arrowX:s,arrowY:o,style:l,...c},u)=>{const{dir:f}=nv();return a?R.jsx("div",{...c,ref:u,style:{...l,...Whe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:i,arrowPosition:r,dir:f,arrowX:s,arrowY:o})}}):null});WT.displayName="@mantine/core/FloatingArrow";function QY(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,i]=e.split("-"),r=n==="right"?"left":"right";return i===void 0?r:`${r}-${i}`}return e}var e$={root:"m_9814e45f"};const qhe={zIndex:vf("modal")},Xhe=(t,{gradient:e,color:n,backgroundOpacity:i,blur:r,radius:a,zIndex:s})=>({root:{"--overlay-bg":e||(n!==void 0||i!==void 0)&&Ql(n||"#000",i??.6)||void 0,"--overlay-filter":r?`blur(${bt(r)})`:void 0,"--overlay-radius":a===void 0?void 0:Qr(a),"--overlay-z-index":s?.toString()}}),WC=Rl((t,e)=>{const n=Ot("Overlay",qhe,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,fixed:c,center:u,children:f,radius:h,zIndex:d,gradient:m,blur:y,color:v,backgroundOpacity:g,mod:x,attributes:_,...E}=n,T=xn({name:"Overlay",props:n,classes:e$,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:_,vars:l,varsResolver:Xhe});return R.jsx(et,{ref:e,...T("root"),mod:[{center:u,fixed:c},x],...E,children:f})});WC.classes=e$;WC.displayName="@mantine/core/Overlay";function Ek(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function Yhe({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||Ek(n):t;if(e){const i=document.querySelector("[data-mantine-shared-portal-node]");if(i)return i;const r=Ek(n);return r.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(r),r}return Ek(n)}const $he={reuseTargetNode:!0},w4=Qt((t,e)=>{const{children:n,target:i,reuseTargetNode:r,...a}=Ot("Portal",$he,t),[s,o]=I.useState(!1),l=I.useRef(null);return Zy(()=>(o(!0),l.current=Yhe({target:i,reuseTargetNode:r,...a}),PT(e,l.current),!i&&!r&&l.current&&document.body.appendChild(l.current),()=>{!i&&!r&&l.current&&document.body.removeChild(l.current)}),[i]),!s||!l.current?null:I_.createPortal(R.jsx(R.Fragment,{children:n}),l.current)});w4.displayName="@mantine/core/Portal";const ep=Qt(({withinPortal:t=!0,children:e,...n},i)=>LC()==="test"||!t?R.jsx(R.Fragment,{children:e}):R.jsx(w4,{ref:i,...n,children:e}));ep.displayName="@mantine/core/OptionalPortal";const rx=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Aw={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...rx("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...rx("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...rx("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...rx("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...rx("top"),common:{transformOrigin:"top right"}}},G9={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Khe({transition:t,state:e,duration:n,timingFunction:i}){const r={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:i};return typeof t=="string"?t in Aw?{transitionProperty:Aw[t].transitionProperty,...r,...Aw[t].common,...Aw[t][G9[e]]}:{}:{transitionProperty:t.transitionProperty,...r,...t.common,...t[G9[e]]}}function Jhe({duration:t,exitDuration:e,timingFunction:n,mounted:i,onEnter:r,onExit:a,onEntered:s,onExited:o,enterDelay:l,exitDelay:c}){const u=Da(),f=kC(),h=u.respectReducedMotion?f:!1,[d,m]=I.useState(h?0:t),[y,v]=I.useState(i?"entered":"exited"),g=I.useRef(-1),x=I.useRef(-1),_=I.useRef(-1);function E(){window.clearTimeout(g.current),window.clearTimeout(x.current),cancelAnimationFrame(_.current)}const T=A=>{E();const C=A?r:a,D=A?s:o,k=h?0:A?t:e;m(k),k===0?(typeof C=="function"&&C(),typeof D=="function"&&D(),v(A?"entered":"exited")):_.current=requestAnimationFrame(()=>{qx.flushSync(()=>{v(A?"pre-entering":"pre-exiting")}),_.current=requestAnimationFrame(()=>{typeof C=="function"&&C(),v(A?"entering":"exiting"),g.current=window.setTimeout(()=>{typeof D=="function"&&D(),v(A?"entered":"exited")},k)})})},w=A=>{if(E(),typeof(A?l:c)!="number"){T(A);return}x.current=window.setTimeout(()=>{T(A)},A?l:c)};return xc(()=>{w(i)},[i]),I.useEffect(()=>()=>{E()},[]),{transitionDuration:d,transitionStatus:y,transitionTimingFunction:n||"ease"}}function Mc({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:i=n,mounted:r,children:a,timingFunction:s="ease",onExit:o,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:h}){const d=LC(),{transitionDuration:m,transitionStatus:y,transitionTimingFunction:v}=Jhe({mounted:r,exitDuration:i,duration:n,timingFunction:s,onExit:o,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:h});return m===0||d==="test"?r?R.jsx(R.Fragment,{children:a({})}):t?a({display:"none"}):null:y==="exited"?t?a({display:"none"}):null:R.jsx(R.Fragment,{children:a(Khe({transition:e,duration:m,state:y,timingFunction:v}))})}Mc.displayName="@mantine/core/Transition";const[Zhe,t$]=Eu("Popover component was not found in the tree");function qC({children:t,active:e=!0,refProp:n="ref",innerRef:i}){const r=ple(e),a=As(r,i);return Eg(t)?I.cloneElement(t,{[n]:a}):t}function n$(t){return R.jsx(S4,{tabIndex:-1,"data-autofocus":!0,...t})}qC.displayName="@mantine/core/FocusTrap";n$.displayName="@mantine/core/FocusTrapInitialFocus";qC.InitialFocus=n$;var i$={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const E4=Qt((t,e)=>{const n=Ot("PopoverDropdown",null,t),{className:i,style:r,vars:a,children:s,onKeyDownCapture:o,variant:l,classNames:c,styles:u,...f}=n,h=t$(),d=UX({opened:h.opened,shouldReturnFocus:h.returnFocus}),m=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},y=As(e,h.floating);return h.disabled?null:R.jsx(ep,{...h.portalProps,withinPortal:h.withinPortal,children:R.jsx(Mc,{mounted:h.opened,...h.transitionProps,transition:h.transitionProps?.transition||"fade",duration:h.transitionProps?.duration??150,keepMounted:h.keepMounted,exitDuration:typeof h.transitionProps?.exitDuration=="number"?h.transitionProps.exitDuration:h.transitionProps?.duration,children:v=>R.jsx(qC,{active:h.trapFocus&&h.opened,innerRef:y,children:R.jsxs(et,{...m,...f,variant:l,onKeyDownCapture:Pce(()=>{h.onClose?.(),h.onDismiss?.()},{active:h.closeOnEscape,onTrigger:d,onKeyDown:o}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:i,props:n,classNames:c,styles:u,style:[{...v,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:bt(h.width),...h.referenceHidden?{display:"none"}:null},h.resolvedStyles.dropdown,u?.dropdown,r]}),children:[s,R.jsx(WT,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:n,classNames:c,styles:u})})]})})})})});E4.classes=i$;E4.displayName="@mantine/core/PopoverDropdown";const Qhe={refProp:"ref",popupType:"dialog"},r$=Qt((t,e)=>{const{children:n,refProp:i,popupType:r,...a}=Ot("PopoverTarget",Qhe,t);if(!Eg(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=a,o=t$(),l=As(o.reference,IC(n),e),c=o.withRoles?{"aria-haspopup":r,"aria-expanded":o.opened,"aria-controls":o.getDropdownId(),id:o.getTargetId()}:{};return I.cloneElement(n,{...s,...c,...o.targetProps,className:ns(o.targetProps.className,s.className,n.props.className),[i]:l,...o.controlled?null:{onClick:()=>{o.onToggle(),n.props.onClick?.()}}})});r$.displayName="@mantine/core/PopoverTarget";function ede(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function tde(t,e,n){const i=ede(t.middlewares),r=[OY(t.offset),uhe()];return t.dropdownVisible&&n!=="test"&&t.preventPositionChangeWhenVisible&&(i.flip=!1,i.shift=!1),i.shift&&r.push(p4(typeof i.shift=="boolean"?{limiter:N9(),padding:5}:{limiter:N9(),padding:5,...i.shift})),i.flip&&r.push(typeof i.flip=="boolean"?VT():VT(i.flip)),i.inline&&r.push(typeof i.inline=="boolean"?E1():E1(i.inline)),r.push(IY({element:t.arrowRef,padding:t.arrowOffset})),(i.size||t.width==="target")&&r.push(che({...typeof i.size=="boolean"?{}:i.size,apply({rects:a,availableWidth:s,availableHeight:o,...l}){const u=e().refs.floating.current?.style??{};i.size&&(typeof i.size=="object"&&i.size.apply?i.size.apply({rects:a,availableWidth:s,availableHeight:o,...l}):Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`})),t.width==="target"&&Object.assign(u,{width:`${a.reference.width}px`})}})),r}function nde(t){const e=LC(),[n,i]=Ml({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=I.useRef(n),a=()=>{n&&!t.disabled&&i(!1)},s=()=>{t.disabled||i(!n)},o=y4({strategy:t.strategy,placement:t.preventPositionChangeWhenVisible?t.positionRef.current:t.position,middleware:tde(t,()=>o,e),whileElementsMounted:t.keepMounted?void 0:bN});return I.useEffect(()=>{if(!(!t.keepMounted||!o.refs.reference.current||!o.refs.floating.current)&&n)return bN(o.refs.reference.current,o.refs.floating.current,o.update)},[t.keepMounted,n,o.refs.reference,o.refs.floating,o.update]),xc(()=>{t.onPositionChange?.(o.placement),t.positionRef.current=o.placement},[o.placement]),xc(()=>{n!==r.current&&(n?t.onOpen?.():t.onClose?.()),r.current=n},[n,t.onClose,t.onOpen]),xc(()=>{let l=-1;return n&&(l=window.setTimeout(()=>t.setDropdownVisible(!0),4)),()=>{window.clearTimeout(l)}},[n,t.position]),{floating:o,controlled:typeof t.opened=="boolean",opened:n,onClose:a,onToggle:s}}const ide={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:vf("popover"),__staticSelector:"Popover",width:"max-content"},rde=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Qr(e),"--popover-shadow":t4(n)}});function Lo(t){const e=Ot("Popover",ide,t),{children:n,position:i,offset:r,onPositionChange:a,positionDependencies:s,opened:o,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:u,width:f,middlewares:h,withArrow:d,arrowSize:m,arrowOffset:y,arrowRadius:v,arrowPosition:g,unstyled:x,classNames:_,styles:E,closeOnClickOutside:T,withinPortal:w,portalProps:A,closeOnEscape:C,clickOutsideEvents:D,trapFocus:k,onClose:P,onDismiss:B,onOpen:H,onChange:G,zIndex:V,radius:U,shadow:F,id:q,defaultOpened:X,__staticSelector:z,withRoles:ce,disabled:he,returnFocus:$,variant:Me,keepMounted:Se,vars:pe,floatingStrategy:xe,withOverlay:Ne,overlayProps:Ge,hideDetached:$e,attributes:ct,preventPositionChangeWhenVisible:At,...fe}=e,Ve=xn({name:z,props:e,classes:i$,classNames:_,styles:E,unstyled:x,attributes:ct,rootSelector:"dropdown",vars:pe,varsResolver:rde}),{resolvedStyles:je}=ev({classNames:_,styles:E,props:e}),[ot,Te]=I.useState(o??X??!1),Ue=I.useRef(i),Oe=I.useRef(null),[We,Et]=I.useState(null),[vt,re]=I.useState(null),{dir:J}=nv(),ue=LC(),se=yf(q),be=nde({middlewares:h,width:f,position:QY(J,i),offset:typeof r=="number"?r+(d?m/2:0):r,arrowRef:Oe,arrowOffset:y,onPositionChange:a,positionDependencies:s,opened:o,defaultOpened:X,onChange:G,onOpen:H,onClose:P,onDismiss:B,strategy:xe,dropdownVisible:ot,setDropdownVisible:Te,positionRef:Ue,disabled:he,preventPositionChangeWhenVisible:At,keepMounted:Se});rle(()=>{T&&(be.onClose(),B?.())},D,[We,vt]);const Z=I.useCallback(Fe=>{Et(Fe),be.floating.refs.setReference(Fe)},[be.floating.refs.setReference]),Ye=I.useCallback(Fe=>{re(Fe),be.floating.refs.setFloating(Fe)},[be.floating.refs.setFloating]),tt=I.useCallback(()=>{l?.onExited?.(),c?.(),Te(!1),Ue.current=i},[l?.onExited,c]),mt=I.useCallback(()=>{l?.onEntered?.(),u?.()},[l?.onEntered,u]);return R.jsxs(Zhe,{value:{returnFocus:$,disabled:he,controlled:be.controlled,reference:Z,floating:Ye,x:be.floating.x,y:be.floating.y,arrowX:be.floating?.middlewareData?.arrow?.x,arrowY:be.floating?.middlewareData?.arrow?.y,opened:be.opened,arrowRef:Oe,transitionProps:{...l,onExited:tt,onEntered:mt},width:f,withArrow:d,arrowSize:m,arrowOffset:y,arrowRadius:v,arrowPosition:g,placement:be.floating.placement,trapFocus:k,withinPortal:w,portalProps:A,zIndex:V,radius:U,shadow:F,closeOnEscape:C,onDismiss:B,onClose:be.onClose,onToggle:be.onToggle,getTargetId:()=>`${se}-target`,getDropdownId:()=>`${se}-dropdown`,withRoles:ce,targetProps:fe,__staticSelector:z,classNames:_,styles:E,unstyled:x,variant:Me,keepMounted:Se,getStyles:Ve,resolvedStyles:je,floatingStrategy:xe,referenceHidden:$e&&ue!=="test"?be.floating.middlewareData.hide?.referenceHidden:!1},children:[n,Ne&&R.jsx(Mc,{transition:"fade",mounted:be.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:Fe=>R.jsx(ep,{withinPortal:w,children:R.jsx(WC,{...Ge,...Ve("overlay",{className:Ge?.className,style:[Fe,Ge?.style]})})})})]})}Lo.Target=r$;Lo.Dropdown=E4;Lo.displayName="@mantine/core/Popover";Lo.extend=t=>t;var fu={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const a$=I.forwardRef(({className:t,...e},n)=>R.jsxs(et,{component:"span",className:ns(fu.barsLoader,t),...e,ref:n,children:[R.jsx("span",{className:fu.bar}),R.jsx("span",{className:fu.bar}),R.jsx("span",{className:fu.bar})]}));a$.displayName="@mantine/core/Bars";const s$=I.forwardRef(({className:t,...e},n)=>R.jsxs(et,{component:"span",className:ns(fu.dotsLoader,t),...e,ref:n,children:[R.jsx("span",{className:fu.dot}),R.jsx("span",{className:fu.dot}),R.jsx("span",{className:fu.dot})]}));s$.displayName="@mantine/core/Dots";const o$=I.forwardRef(({className:t,...e},n)=>R.jsx(et,{component:"span",className:ns(fu.ovalLoader,t),...e,ref:n}));o$.displayName="@mantine/core/Oval";const l$={bars:a$,oval:o$,dots:s$},ade={loaders:l$,type:"oval"},sde=(t,{size:e,color:n})=>({root:{"--loader-size":ii(e,"loader-size"),"--loader-color":n?Zr(n,t):void 0}}),cp=Qt((t,e)=>{const n=Ot("Loader",ade,t),{size:i,color:r,type:a,vars:s,className:o,style:l,classNames:c,styles:u,unstyled:f,loaders:h,variant:d,children:m,attributes:y,...v}=n,g=xn({name:"Loader",props:n,classes:fu,className:o,style:l,classNames:c,styles:u,unstyled:f,attributes:y,vars:s,varsResolver:sde});return m?R.jsx(et,{...g("root"),ref:e,...v,children:m}):R.jsx(et,{...g("root"),ref:e,component:h[a],variant:d,size:i,...v})});cp.defaultLoaders=l$;cp.classes=fu;cp.displayName="@mantine/core/Loader";var av={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const W9={orientation:"horizontal"},ode=(t,{borderWidth:e})=>({group:{"--ai-border-width":bt(e)}}),M4=Qt((t,e)=>{const n=Ot("ActionIconGroup",W9,t),{className:i,style:r,classNames:a,styles:s,unstyled:o,orientation:l,vars:c,borderWidth:u,variant:f,mod:h,attributes:d,...m}=Ot("ActionIconGroup",W9,t),y=xn({name:"ActionIconGroup",props:n,classes:av,className:i,style:r,classNames:a,styles:s,unstyled:o,attributes:d,vars:c,varsResolver:ode,rootSelector:"group"});return R.jsx(et,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...m})});M4.classes=av;M4.displayName="@mantine/core/ActionIconGroup";const lde=(t,{radius:e,color:n,gradient:i,variant:r,autoContrast:a,size:s})=>{const o=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:i,variant:r||"filled",autoContrast:a});return{groupSection:{"--section-height":ii(s,"section-height"),"--section-padding-x":ii(s,"section-padding-x"),"--section-fz":Ss(s),"--section-radius":e===void 0?void 0:Qr(e),"--section-bg":n||r?o.background:void 0,"--section-color":o.color,"--section-bd":n||r?o.border:void 0}}},T4=Qt((t,e)=>{const n=Ot("ActionIconGroupSection",null,t),{className:i,style:r,classNames:a,styles:s,unstyled:o,vars:l,variant:c,gradient:u,radius:f,autoContrast:h,attributes:d,...m}=n,y=xn({name:"ActionIconGroupSection",props:n,classes:av,className:i,style:r,classNames:a,styles:s,unstyled:o,attributes:d,vars:l,varsResolver:lde,rootSelector:"groupSection"});return R.jsx(et,{...y("groupSection"),ref:e,variant:c,...m})});T4.classes=av;T4.displayName="@mantine/core/ActionIconGroupSection";const cde=(t,{size:e,radius:n,variant:i,gradient:r,color:a,autoContrast:s})=>{const o=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:s});return{root:{"--ai-size":ii(e,"ai-size"),"--ai-radius":n===void 0?void 0:Qr(n),"--ai-bg":a||i?o.background:void 0,"--ai-hover":a||i?o.hover:void 0,"--ai-hover-color":a||i?o.hoverColor:void 0,"--ai-color":o.color,"--ai-bd":a||i?o.border:void 0}}},kl=Rl((t,e)=>{const n=Ot("ActionIcon",null,t),{className:i,unstyled:r,variant:a,classNames:s,styles:o,style:l,loading:c,loaderProps:u,size:f,color:h,radius:d,__staticSelector:m,gradient:y,vars:v,children:g,disabled:x,"data-disabled":_,autoContrast:E,mod:T,attributes:w,...A}=n,C=xn({name:["ActionIcon",m],props:n,className:i,style:l,classes:av,classNames:s,styles:o,unstyled:r,attributes:w,vars:v,varsResolver:cde});return R.jsxs(df,{...C("root",{active:!x&&!c&&!_}),...A,unstyled:r,variant:a,size:f,disabled:x||c,ref:e,mod:[{loading:c,disabled:x||_},T],children:[typeof c=="boolean"&&R.jsx(Mc,{mounted:c,transition:"slide-down",duration:150,children:D=>R.jsx(et,{component:"span",...C("loader",{style:D}),"aria-hidden":!0,children:R.jsx(cp,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),R.jsx(et,{component:"span",mod:{loading:c},...C("icon"),children:g})]})});kl.classes=av;kl.displayName="@mantine/core/ActionIcon";kl.Group=M4;kl.GroupSection=T4;const c$=I.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},i)=>R.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:i,...n,children:R.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));c$.displayName="@mantine/core/CloseIcon";var u$={root:"m_86a44da5","root--subtle":"m_220c80f2"};const ude={variant:"subtle"},fde=(t,{size:e,radius:n,iconSize:i})=>({root:{"--cb-size":ii(e,"cb-size"),"--cb-radius":n===void 0?void 0:Qr(n),"--cb-icon-size":bt(i)}}),eS=Rl((t,e)=>{const n=Ot("CloseButton",ude,t),{iconSize:i,children:r,vars:a,radius:s,className:o,classNames:l,style:c,styles:u,unstyled:f,"data-disabled":h,disabled:d,variant:m,icon:y,mod:v,attributes:g,__staticSelector:x,..._}=n,E=xn({name:x||"CloseButton",props:n,className:o,style:c,classes:u$,classNames:l,styles:u,unstyled:f,attributes:g,vars:a,varsResolver:fde});return R.jsxs(df,{ref:e,..._,unstyled:f,variant:m,disabled:d,mod:[{disabled:d||h},v],...E("root",{variant:m,active:!d&&!h}),children:[y||R.jsx(c$,{}),r]})});eS.classes=u$;eS.displayName="@mantine/core/CloseButton";function hde(t){return I.Children.toArray(t).filter(Boolean)}var f$={root:"m_4081bf90"};const dde={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},pde=(t,{grow:e,preventGrowOverflow:n,gap:i,align:r,justify:a,wrap:s},{childWidth:o})=>({root:{"--group-child-width":e&&n?o:void 0,"--group-gap":Zd(i),"--group-align":r,"--group-justify":a,"--group-wrap":s}}),by=Qt((t,e)=>{const n=Ot("Group",dde,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,children:l,gap:c,align:u,justify:f,wrap:h,grow:d,preventGrowOverflow:m,vars:y,variant:v,__size:g,mod:x,attributes:_,...E}=n,T=hde(l),w=T.length,A=Zd(c??"md"),D={childWidth:`calc(${100/w}% - (${A} - ${A} / ${w}))`},k=xn({name:"Group",props:n,stylesCtx:D,className:r,style:a,classes:f$,classNames:i,styles:s,unstyled:o,attributes:_,vars:y,varsResolver:pde});return R.jsx(et,{...k("root"),ref:e,variant:v,mod:[{grow:d},x],size:g,...E,children:T})});by.classes=f$;by.displayName="@mantine/core/Group";const[mde,Dh]=Eu("ModalBase component was not found in tree");function gde({opened:t,transitionDuration:e}){const[n,i]=I.useState(t),r=I.useRef(-1),s=kC()?0:e;return I.useEffect(()=>(t?(i(!0),window.clearTimeout(r.current)):s===0?i(!1):r.current=window.setTimeout(()=>i(!1),s),()=>window.clearTimeout(r.current)),[t,s]),n}function bde({id:t,transitionProps:e,opened:n,trapFocus:i,closeOnEscape:r,onClose:a,returnFocus:s}){const o=yf(t),[l,c]=I.useState(!1),[u,f]=I.useState(!1),h=typeof e?.duration=="number"?e?.duration:200,d=gde({opened:n,transitionDuration:h});return vle("keydown",m=>{m.key==="Escape"&&r&&!m.isComposing&&n&&m.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&a()},{capture:!0}),UX({opened:n,shouldReturnFocus:i&&s}),{_id:o,titleMounted:l,bodyMounted:u,shouldLockScroll:d,setTitleMounted:c,setBodyMounted:f}}const h$=I.forwardRef(({keepMounted:t,opened:e,onClose:n,id:i,transitionProps:r,onExitTransitionEnd:a,onEnterTransitionEnd:s,trapFocus:o,closeOnEscape:l,returnFocus:c,closeOnClickOutside:u,withinPortal:f,portalProps:h,lockScroll:d,children:m,zIndex:y,shadow:v,padding:g,__vars:x,unstyled:_,removeScrollProps:E,...T},w)=>{const{_id:A,titleMounted:C,bodyMounted:D,shouldLockScroll:k,setTitleMounted:P,setBodyMounted:B}=bde({id:i,transitionProps:r,opened:e,trapFocus:o,closeOnEscape:l,onClose:n,returnFocus:c}),{key:H,...G}=E||{};return R.jsx(ep,{...h,withinPortal:f,children:R.jsx(mde,{value:{opened:e,onClose:n,closeOnClickOutside:u,onExitTransitionEnd:a,onEnterTransitionEnd:s,transitionProps:{...r,keepMounted:t},getTitleId:()=>`${A}-title`,getBodyId:()=>`${A}-body`,titleMounted:C,bodyMounted:D,setTitleMounted:P,setBodyMounted:B,trapFocus:o,closeOnEscape:l,zIndex:y,unstyled:_},children:R.jsx(UT,{enabled:k&&d,...G,children:R.jsx(et,{ref:w,...T,__vars:{...x,"--mb-z-index":(y||vf("modal")).toString(),"--mb-shadow":t4(v),"--mb-padding":Zd(g)},children:m})},H)})})});h$.displayName="@mantine/core/ModalBase";function yde(){const t=Dh();return I.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var yy={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const d$=I.forwardRef(({className:t,...e},n)=>{const i=yde(),r=Dh();return R.jsx(et,{ref:n,...e,id:i,className:ns({[yy.body]:!r.unstyled},t)})});d$.displayName="@mantine/core/ModalBaseBody";const p$=I.forwardRef(({className:t,onClick:e,...n},i)=>{const r=Dh();return R.jsx(eS,{ref:i,...n,onClick:a=>{r.onClose(),e?.(a)},className:ns({[yy.close]:!r.unstyled},t),unstyled:r.unstyled})});p$.displayName="@mantine/core/ModalBaseCloseButton";const m$=I.forwardRef(({transitionProps:t,className:e,innerProps:n,onKeyDown:i,style:r,...a},s)=>{const o=Dh();return R.jsx(Mc,{mounted:o.opened,transition:"pop",...o.transitionProps,onExited:()=>{o.onExitTransitionEnd?.(),o.transitionProps?.onExited?.()},onEntered:()=>{o.onEnterTransitionEnd?.(),o.transitionProps?.onEntered?.()},...t,children:l=>R.jsx("div",{...n,className:ns({[yy.inner]:!o.unstyled},n.className),children:R.jsx(qC,{active:o.opened&&o.trapFocus,innerRef:s,children:R.jsx(Ms,{...a,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":o.bodyMounted?o.getBodyId():void 0,"aria-labelledby":o.titleMounted?o.getTitleId():void 0,style:[r,l],className:ns({[yy.content]:!o.unstyled},e),unstyled:o.unstyled,children:a.children})})})})});m$.displayName="@mantine/core/ModalBaseContent";const g$=I.forwardRef(({className:t,...e},n)=>{const i=Dh();return R.jsx(et,{component:"header",ref:n,className:ns({[yy.header]:!i.unstyled},t),...e})});g$.displayName="@mantine/core/ModalBaseHeader";const vde={duration:200,timingFunction:"ease",transition:"fade"};function xde(t){const e=Dh();return{...vde,...e.transitionProps,...t}}const b$=I.forwardRef(({onClick:t,transitionProps:e,style:n,visible:i,...r},a)=>{const s=Dh(),o=xde(e);return R.jsx(Mc,{mounted:i!==void 0?i:s.opened,...o,transition:"fade",children:l=>R.jsx(WC,{ref:a,fixed:!0,style:[n,l],zIndex:s.zIndex,unstyled:s.unstyled,onClick:c=>{t?.(c),s.closeOnClickOutside&&s.onClose()},...r})})});b$.displayName="@mantine/core/ModalBaseOverlay";function _de(){const t=Dh();return I.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const y$=I.forwardRef(({className:t,...e},n)=>{const i=_de(),r=Dh();return R.jsx(et,{component:"h2",ref:n,className:ns({[yy.title]:!r.unstyled},t),...e,id:i})});y$.displayName="@mantine/core/ModalBaseTitle";function Sde({children:t}){return R.jsx(R.Fragment,{children:t})}const[wde,Ede]=K_({size:"sm"}),v$=Qt((t,e)=>{const n=Ot("InputClearButton",null,t),{size:i,variant:r,vars:a,classNames:s,styles:o,...l}=n,c=Ede(),{resolvedClassNames:u,resolvedStyles:f}=ev({classNames:s,styles:o,props:n});return R.jsx(eS,{variant:r||"transparent",ref:e,size:i||c?.size||"sm",classNames:u,styles:f,__staticSelector:"InputClearButton",...l})});v$.displayName="@mantine/core/InputClearButton";const[Mde,tS]=K_({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Dc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Tde=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Ss(e)} - ${bt(2)})`}}),XC=Qt((t,e)=>{const n=Ot("InputDescription",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,attributes:h,variant:d,...m}=Ot("InputDescription",null,n),y=tS(),v=xn({name:["InputWrapper",u],props:n,classes:Dc,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:h,rootSelector:"description",vars:l,varsResolver:Tde}),g=f&&y?.getStyles||v;return R.jsx(et,{component:"p",ref:e,variant:d,size:c,...g("description",y?.getStyles?{className:r,style:a}:void 0),...m})});XC.classes=Dc;XC.displayName="@mantine/core/InputDescription";const Ade=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Ss(e)} - ${bt(2)})`}}),YC=Qt((t,e)=>{const n=Ot("InputError",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,size:c,attributes:u,__staticSelector:f,__inheritStyles:h=!0,variant:d,...m}=n,y=xn({name:["InputWrapper",f],props:n,classes:Dc,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:u,rootSelector:"error",vars:l,varsResolver:Ade}),v=tS(),g=h&&v?.getStyles||y;return R.jsx(et,{component:"p",ref:e,variant:d,size:c,...g("error",v?.getStyles?{className:r,style:a}:void 0),...m})});YC.classes=Dc;YC.displayName="@mantine/core/InputError";const q9={labelElement:"label"},Cde=(t,{size:e})=>({label:{"--input-label-size":Ss(e),"--input-asterisk-color":void 0}}),$C=Qt((t,e)=>{const n=Ot("InputLabel",q9,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,labelElement:c,size:u,required:f,htmlFor:h,onMouseDown:d,children:m,__staticSelector:y,variant:v,mod:g,attributes:x,..._}=Ot("InputLabel",q9,n),E=xn({name:["InputWrapper",y],props:n,classes:Dc,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:x,rootSelector:"label",vars:l,varsResolver:Cde}),T=tS(),w=T?.getStyles||E;return R.jsxs(et,{...w("label",T?.getStyles?{className:r,style:a}:void 0),component:c,variant:v,size:u,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:f},g],onMouseDown:A=>{d?.(A),!A.defaultPrevented&&A.detail>1&&A.preventDefault()},..._,children:[m,f&&R.jsx("span",{...w("required"),"aria-hidden":!0,children:" *"})]})});$C.classes=Dc;$C.displayName="@mantine/core/InputLabel";const A4=Qt((t,e)=>{const n=Ot("InputPlaceholder",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,__staticSelector:c,variant:u,error:f,mod:h,attributes:d,...m}=n,y=xn({name:["InputPlaceholder",c],props:n,classes:Dc,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:d,rootSelector:"placeholder"});return R.jsx(et,{...y("placeholder"),mod:[{error:!!f},h],component:"span",variant:u,ref:e,...m})});A4.classes=Dc;A4.displayName="@mantine/core/InputPlaceholder";function Rde(t,{hasDescription:e,hasError:n}){const i=t.findIndex(l=>l==="input"),r=t.slice(0,i),a=t.slice(i+1),s=e&&r.includes("description")||n&&r.includes("error");return{offsetBottom:e&&a.includes("description")||n&&a.includes("error"),offsetTop:s}}const kde={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},Dde=(t,{size:e})=>({label:{"--input-label-size":Ss(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Ss(e)} - ${bt(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Ss(e)} - ${bt(2)})`}}),C4=Qt((t,e)=>{const n=Ot("InputWrapper",kde,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,size:c,variant:u,__staticSelector:f,inputContainer:h,inputWrapperOrder:d,label:m,error:y,description:v,labelProps:g,descriptionProps:x,errorProps:_,labelElement:E,children:T,withAsterisk:w,id:A,required:C,__stylesApiProps:D,mod:k,attributes:P,...B}=n,H=xn({name:["InputWrapper",f],props:D||n,classes:Dc,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:P,vars:l,varsResolver:Dde}),G={size:c,variant:u,__staticSelector:f},V=yf(A),U=typeof w=="boolean"?w:C,F=_?.id||`${V}-error`,q=x?.id||`${V}-description`,X=V,z=!!y&&typeof y!="boolean",ce=!!v,he=`${z?F:""} ${ce?q:""}`,$=he.trim().length>0?he.trim():void 0,Me=g?.id||`${V}-label`,Se=m&&R.jsx($C,{labelElement:E,id:Me,htmlFor:X,required:U,...G,...g,children:m},"label"),pe=ce&&R.jsx(XC,{...x,...G,size:x?.size||G.size,id:x?.id||q,children:v},"description"),xe=R.jsx(I.Fragment,{children:h(T)},"input"),Ne=z&&I.createElement(YC,{..._,...G,size:_?.size||G.size,key:"error",id:_?.id||F},y),Ge=d.map($e=>{switch($e){case"label":return Se;case"input":return xe;case"description":return pe;case"error":return Ne;default:return null}});return R.jsx(Mde,{value:{getStyles:H,describedBy:$,inputId:X,labelId:Me,...Rde(d,{hasDescription:ce,hasError:z})},children:R.jsx(et,{ref:e,variant:u,size:c,mod:[{error:!!y},k],...H("root"),...B,children:Ge})})});C4.classes=Dc;C4.displayName="@mantine/core/InputWrapper";const Ode={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0,size:"sm"},Ide=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":ii(e.size,"input-height"),"--input-fz":Ss(e.size),"--input-radius":e.radius===void 0?void 0:Qr(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?bt(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?bt(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?ii(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),ua=Rl((t,e)=>{const n=Ot("Input",Ode,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,required:l,__staticSelector:c,__stylesApiProps:u,size:f,wrapperProps:h,error:d,disabled:m,leftSection:y,leftSectionProps:v,leftSectionWidth:g,rightSection:x,rightSectionProps:_,rightSectionWidth:E,rightSectionPointerEvents:T,leftSectionPointerEvents:w,variant:A,vars:C,pointer:D,multiline:k,radius:P,id:B,withAria:H,withErrorStyles:G,mod:V,inputSize:U,attributes:F,__clearSection:q,__clearable:X,__defaultRightSection:z,...ce}=n,{styleProps:he,rest:$}=Z_(ce),Me=tS(),Se={offsetBottom:Me?.offsetBottom,offsetTop:Me?.offsetTop},pe=xn({name:["Input",c],props:u||n,classes:Dc,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:F,stylesCtx:Se,rootSelector:"wrapper",vars:C,varsResolver:Ide}),xe=H?{required:l,disabled:m,"aria-invalid":!!d,"aria-describedby":Me?.describedBy,id:Me?.inputId||B}:{},Ne=x||X&&q||z;return R.jsx(wde,{value:{size:f||"sm"},children:R.jsxs(et,{...pe("wrapper"),...he,...h,mod:[{error:!!d&&G,pointer:D,disabled:m,multiline:k,"data-with-right-section":!!Ne,"data-with-left-section":!!y},V],variant:A,size:f,children:[y&&R.jsx("div",{...v,"data-position":"left",...pe("section",{className:v?.className,style:v?.style}),children:y}),R.jsx(et,{component:"input",...$,...xe,ref:e,required:l,mod:{disabled:m,error:!!d&&G},variant:A,__size:U,...pe("input")}),Ne&&R.jsx("div",{..._,"data-position":"right",...pe("section",{className:_?.className,style:_?.style}),children:Ne})]})})});ua.classes=Dc;ua.Wrapper=C4;ua.Label=$C;ua.Error=YC;ua.Description=XC;ua.Placeholder=A4;ua.ClearButton=v$;ua.displayName="@mantine/core/Input";function x$(t,e,n){const i=Ot(t,e,n),{label:r,description:a,error:s,required:o,classNames:l,styles:c,className:u,unstyled:f,__staticSelector:h,__stylesApiProps:d,errorProps:m,labelProps:y,descriptionProps:v,wrapperProps:g,id:x,size:_,style:E,inputContainer:T,inputWrapperOrder:w,withAsterisk:A,variant:C,vars:D,mod:k,attributes:P,...B}=i,{styleProps:H,rest:G}=Z_(B),V={label:r,description:a,error:s,required:o,classNames:l,className:u,__staticSelector:h,__stylesApiProps:d||i,errorProps:m,labelProps:y,descriptionProps:v,unstyled:f,styles:c,size:_,style:E,inputContainer:T,inputWrapperOrder:w,withAsterisk:A,variant:C,id:x,mod:k,attributes:P,...g};return{...G,classNames:l,styles:c,unstyled:f,wrapperProps:{...V,...H},inputProps:{required:o,classNames:l,styles:c,unstyled:f,size:_,__staticSelector:h,__stylesApiProps:d||i,error:s,variant:C,id:x,attributes:P}}}const Nde={__staticSelector:"InputBase",withAria:!0},Mu=Rl((t,e)=>{const{inputProps:n,wrapperProps:i,...r}=x$("InputBase",Nde,t);return R.jsx(ua.Wrapper,{...i,children:R.jsx(ua,{...n,...r,ref:e})})});Mu.classes={...ua.classes,...ua.Wrapper.classes};Mu.displayName="@mantine/core/InputBase";const Pde={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var _$={root:"m_8bffd616"};const wh=Rl((t,e)=>{const n=Ot("Flex",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,gap:c,rowGap:u,columnGap:f,align:h,justify:d,wrap:m,direction:y,attributes:v,...g}=n,x=xn({name:"Flex",classes:_$,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:v,vars:l}),_=Da(),E=pY(),T=dY({styleProps:{gap:c,rowGap:u,columnGap:f,align:h,justify:d,wrap:m,direction:y},theme:_,data:Pde});return R.jsxs(R.Fragment,{children:[T.hasResponsiveStyles&&R.jsx(hY,{selector:`.${E}`,styles:T.styles,media:T.media}),R.jsx(et,{ref:e,...x("root",{className:E,style:OC(T.inlineStyles)}),...g})]})});wh.classes=_$;wh.displayName="@mantine/core/Flex";var S$={root:"m_b6d8b162"};function Lde(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const Ude={inherit:!1},Bde=(t,{variant:e,lineClamp:n,gradient:i,size:r,color:a})=>({root:{"--text-fz":Ss(r),"--text-lh":aY(r),"--text-gradient":e==="gradient"?cN(i,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":a?Zr(a,t):void 0}}),gu=Rl((t,e)=>{const n=Ot("Text",Ude,t),{lineClamp:i,truncate:r,inline:a,inherit:s,gradient:o,span:l,__staticSelector:c,vars:u,className:f,style:h,classNames:d,styles:m,unstyled:y,variant:v,mod:g,size:x,attributes:_,...E}=n,T=xn({name:["Text",c],props:n,classes:S$,className:f,style:h,classNames:d,styles:m,unstyled:y,attributes:_,vars:u,varsResolver:Bde});return R.jsx(et,{...T("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:v,mod:[{"data-truncate":Lde(r),"data-line-clamp":typeof i=="number","data-inline":a,"data-inherit":s},g],size:x,...E})});gu.classes=S$;gu.displayName="@mantine/core/Text";var w$={root:"m_849cf0da"};const Fde={underline:"hover"},qm=Rl((t,e)=>{const{underline:n,className:i,unstyled:r,mod:a,...s}=Ot("Anchor",Fde,t);return R.jsx(gu,{component:"a",ref:e,className:ns({[w$.root]:!r},i),...s,mod:[{underline:n},a],__staticSelector:"Anchor",unstyled:r})});qm.classes=w$;qm.displayName="@mantine/core/Anchor";function E$(t){return typeof t=="string"?{value:t,label:t}:"value"in t&&!("label"in t)?{value:t.value,label:t.value,disabled:t.disabled}:typeof t=="number"?{value:t.toString(),label:t.toString()}:"group"in t?{group:t.group,items:t.items.map(e=>E$(e))}:t}function zde(t){return t?t.map(e=>E$(e)):[]}function M$(t){return t.reduce((e,n)=>"group"in n?{...e,...M$(n.items)}:(e[n.value]=n,e),{})}var Bo={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const jde={error:null},Hde=(t,{size:e,color:n})=>({chevron:{"--combobox-chevron-size":ii(e,"combobox-chevron-size"),"--combobox-chevron-color":n?Zr(n,t):void 0}}),R4=Qt((t,e)=>{const n=Ot("ComboboxChevron",jde,t),{size:i,error:r,style:a,className:s,classNames:o,styles:l,unstyled:c,vars:u,mod:f,...h}=n,d=xn({name:"ComboboxChevron",classes:Bo,props:n,style:a,className:s,classNames:o,styles:l,unstyled:c,vars:u,varsResolver:Hde,rootSelector:"chevron"});return R.jsx(et,{component:"svg",...h,...d("chevron"),size:i,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:r},f],ref:e,children:R.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});R4.classes=Bo;R4.displayName="@mantine/core/ComboboxChevron";const[Vde,Oc]=Eu("Combobox component was not found in tree"),T$=I.forwardRef(({size:t,onMouseDown:e,onClick:n,onClear:i,...r},a)=>R.jsx(ua.ClearButton,{ref:a,tabIndex:-1,"aria-hidden":!0,...r,onMouseDown:s=>{s.preventDefault(),e?.(s)},onClick:s=>{i(),n?.(s)}}));T$.displayName="@mantine/core/ComboboxClearButton";const k4=Qt((t,e)=>{const{classNames:n,styles:i,className:r,style:a,hidden:s,...o}=Ot("ComboboxDropdown",null,t),l=Oc();return R.jsx(Lo.Dropdown,{...o,ref:e,role:"presentation","data-hidden":s||void 0,...l.getStyles("dropdown",{className:r,style:a,classNames:n,styles:i})})});k4.classes=Bo;k4.displayName="@mantine/core/ComboboxDropdown";const Gde={refProp:"ref"},A$=Qt((t,e)=>{const{children:n,refProp:i}=Ot("ComboboxDropdownTarget",Gde,t);if(Oc(),!Eg(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return R.jsx(Lo.Target,{ref:e,refProp:i,children:n})});A$.displayName="@mantine/core/ComboboxDropdownTarget";const D4=Qt((t,e)=>{const{classNames:n,className:i,style:r,styles:a,vars:s,...o}=Ot("ComboboxEmpty",null,t),l=Oc();return R.jsx(et,{ref:e,...l.getStyles("empty",{className:i,classNames:n,styles:a,style:r}),...o})});D4.classes=Bo;D4.displayName="@mantine/core/ComboboxEmpty";function O4({onKeyDown:t,withKeyboardNavigation:e,withAriaAttributes:n,withExpandedAttribute:i,targetType:r,autoComplete:a}){const s=Oc(),[o,l]=I.useState(null),c=f=>{if(t?.(f),!s.readOnly&&e){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),s.store.dropdownOpened?l(s.store.selectNextOption()):(s.store.openDropdown("keyboard"),l(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),s.store.dropdownOpened?l(s.store.selectPreviousOption()):(s.store.openDropdown("keyboard"),l(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const h=s.store.getSelectedOptionIndex();s.store.dropdownOpened&&h!==-1?(f.preventDefault(),s.store.clickSelectedOption()):r==="button"&&(f.preventDefault(),s.store.openDropdown("keyboard"))}f.key==="Escape"&&s.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&r==="button"&&(f.preventDefault(),s.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":i?!!(s.store.listId&&s.store.dropdownOpened):void 0,"aria-controls":s.store.dropdownOpened&&s.store.listId?s.store.listId:void 0,"aria-activedescendant":s.store.dropdownOpened&&o||void 0,autoComplete:a,"data-expanded":s.store.dropdownOpened||void 0,"data-mantine-stop-propagation":s.store.dropdownOpened||void 0}:{},onKeyDown:c}}const Wde={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},C$=Qt((t,e)=>{const{children:n,refProp:i,withKeyboardNavigation:r,withAriaAttributes:a,withExpandedAttribute:s,targetType:o,autoComplete:l,...c}=Ot("ComboboxEventsTarget",Wde,t);if(!Eg(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=Oc(),f=O4({targetType:o,withAriaAttributes:a,withKeyboardNavigation:r,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:l});return I.cloneElement(n,{...f,...c,[i]:As(e,u.store.targetRef,IC(n))})});C$.displayName="@mantine/core/ComboboxEventsTarget";const I4=Qt((t,e)=>{const{classNames:n,className:i,style:r,styles:a,vars:s,...o}=Ot("ComboboxFooter",null,t),l=Oc();return R.jsx(et,{ref:e,...l.getStyles("footer",{className:i,classNames:n,style:r,styles:a}),...o,onMouseDown:c=>{c.preventDefault()}})});I4.classes=Bo;I4.displayName="@mantine/core/ComboboxFooter";const N4=Qt((t,e)=>{const{classNames:n,className:i,style:r,styles:a,vars:s,children:o,label:l,id:c,...u}=Ot("ComboboxGroup",null,t),f=Oc(),h=yf(c);return R.jsxs(et,{ref:e,role:"group","aria-labelledby":l?h:void 0,...f.getStyles("group",{className:i,classNames:n,style:r,styles:a}),...u,children:[l&&R.jsx("div",{id:h,...f.getStyles("groupLabel",{classNames:n,styles:a}),children:l}),o]})});N4.classes=Bo;N4.displayName="@mantine/core/ComboboxGroup";const P4=Qt((t,e)=>{const{classNames:n,className:i,style:r,styles:a,vars:s,...o}=Ot("ComboboxHeader",null,t),l=Oc();return R.jsx(et,{ref:e,...l.getStyles("header",{className:i,classNames:n,style:r,styles:a}),...o,onMouseDown:c=>{c.preventDefault()}})});P4.classes=Bo;P4.displayName="@mantine/core/ComboboxHeader";function R$({value:t,valuesDivider:e=",",...n}){return R.jsx("input",{type:"hidden",value:Array.isArray(t)?t.join(e):t||"",...n})}R$.displayName="@mantine/core/ComboboxHiddenInput";const L4=Qt((t,e)=>{const n=Ot("ComboboxOption",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,onClick:l,id:c,active:u,onMouseDown:f,onMouseOver:h,disabled:d,selected:m,mod:y,...v}=n,g=Oc(),x=I.useId(),_=c||x;return R.jsx(et,{...g.getStyles("option",{className:r,classNames:i,styles:s,style:a}),...v,ref:e,id:_,mod:["combobox-option",{"combobox-active":u,"combobox-disabled":d,"combobox-selected":m},y],role:"option",onClick:E=>{d?E.preventDefault():(g.onOptionSubmit?.(n.value,n),l?.(E))},onMouseDown:E=>{E.preventDefault(),f?.(E)},onMouseOver:E=>{g.resetSelectionOnOptionHover&&g.store.resetSelectedOption(),h?.(E)}})});L4.classes=Bo;L4.displayName="@mantine/core/ComboboxOption";const U4=Qt((t,e)=>{const n=Ot("ComboboxOptions",null,t),{classNames:i,className:r,style:a,styles:s,id:o,onMouseDown:l,labelledBy:c,...u}=n,f=Oc(),h=yf(o);return I.useEffect(()=>{f.store.setListId(h)},[h]),R.jsx(et,{ref:e,...f.getStyles("options",{className:r,style:a,classNames:i,styles:s}),...u,id:h,role:"listbox","aria-labelledby":c,onMouseDown:d=>{d.preventDefault(),l?.(d)}})});U4.classes=Bo;U4.displayName="@mantine/core/ComboboxOptions";const qde={withAriaAttributes:!0,withKeyboardNavigation:!0},B4=Qt((t,e)=>{const n=Ot("ComboboxSearch",qde,t),{classNames:i,styles:r,unstyled:a,vars:s,withAriaAttributes:o,onKeyDown:l,withKeyboardNavigation:c,size:u,...f}=n,h=Oc(),d=h.getStyles("search"),m=O4({targetType:"input",withAriaAttributes:o,withKeyboardNavigation:c,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return R.jsx(ua,{ref:As(e,h.store.searchRef),classNames:[{input:d.className},i],styles:[{input:d.style},r],size:u||h.size,...m,...f,__staticSelector:"Combobox"})});B4.classes=Bo;B4.displayName="@mantine/core/ComboboxSearch";const Xde={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},k$=Qt((t,e)=>{const{children:n,refProp:i,withKeyboardNavigation:r,withAriaAttributes:a,withExpandedAttribute:s,targetType:o,autoComplete:l,...c}=Ot("ComboboxTarget",Xde,t);if(!Eg(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=Oc(),f=O4({targetType:o,withAriaAttributes:a,withKeyboardNavigation:r,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:l}),h=I.cloneElement(n,{...f,...c});return R.jsx(Lo.Target,{ref:As(e,u.store.targetRef),children:h})});k$.displayName="@mantine/core/ComboboxTarget";function Yde(t,e,n){for(let i=t-1;i>=0;i-=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i;if(n){for(let i=e.length-1;i>-1;i-=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i}return t}function $de(t,e,n){for(let i=t+1;i<e.length;i+=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i;if(n){for(let i=0;i<e.length;i+=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i}return t}function Kde(t){for(let e=0;e<t.length;e+=1)if(!t[e].hasAttribute("data-combobox-disabled"))return e;return-1}function D$({defaultOpened:t,opened:e,onOpenedChange:n,onDropdownClose:i,onDropdownOpen:r,loop:a=!0,scrollBehavior:s="instant"}={}){const[o,l]=Ml({value:e,defaultValue:t,finalValue:!1,onChange:n}),c=I.useRef(null),u=I.useRef(-1),f=I.useRef(null),h=I.useRef(null),d=I.useRef(-1),m=I.useRef(-1),y=I.useRef(-1),v=I.useCallback((U="unknown")=>{o||(l(!0),r?.(U))},[l,r,o]),g=I.useCallback((U="unknown")=>{o&&(l(!1),i?.(U))},[l,i,o]),x=I.useCallback((U="unknown")=>{o?g(U):v(U)},[g,v,o]),_=I.useCallback(()=>{const U=document.querySelector(`#${c.current} [data-combobox-selected]`);U?.removeAttribute("data-combobox-selected"),U?.removeAttribute("aria-selected")},[]),E=I.useCallback(U=>{const q=document.getElementById(c.current)?.querySelectorAll("[data-combobox-option]");if(!q)return null;const X=U>=q.length?0:U<0?q.length-1:U;return u.current=X,q?.[X]&&!q[X].hasAttribute("data-combobox-disabled")?(_(),q[X].setAttribute("data-combobox-selected","true"),q[X].setAttribute("aria-selected","true"),q[X].scrollIntoView({block:"nearest",behavior:s}),q[X].id):null},[s,_]),T=I.useCallback(()=>{const U=document.querySelector(`#${c.current} [data-combobox-active]`);if(U){const F=document.querySelectorAll(`#${c.current} [data-combobox-option]`),q=Array.from(F).findIndex(X=>X===U);return E(q)}return E(0)},[E]),w=I.useCallback(()=>E($de(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),a)),[E,a]),A=I.useCallback(()=>E(Yde(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),a)),[E,a]),C=I.useCallback(()=>E(Kde(document.querySelectorAll(`#${c.current} [data-combobox-option]`))),[E]),D=I.useCallback((U="selected",F)=>{y.current=window.setTimeout(()=>{const q=document.querySelectorAll(`#${c.current} [data-combobox-option]`),X=Array.from(q).findIndex(z=>z.hasAttribute(`data-combobox-${U}`));u.current=X,F?.scrollIntoView&&q[X]?.scrollIntoView({block:"nearest",behavior:s})},0)},[]),k=I.useCallback(()=>{u.current=-1,_()},[_]),P=I.useCallback(()=>{document.querySelectorAll(`#${c.current} [data-combobox-option]`)?.[u.current]?.click()},[]),B=I.useCallback(U=>{c.current=U},[]),H=I.useCallback(()=>{d.current=window.setTimeout(()=>f.current.focus(),0)},[]),G=I.useCallback(()=>{m.current=window.setTimeout(()=>h.current.focus(),0)},[]),V=I.useCallback(()=>u.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(d.current),window.clearTimeout(m.current),window.clearTimeout(y.current)},[]),{dropdownOpened:o,openDropdown:v,closeDropdown:g,toggleDropdown:x,selectedOptionIndex:u.current,getSelectedOptionIndex:V,selectOption:E,selectFirstOption:C,selectActiveOption:T,selectNextOption:w,selectPreviousOption:A,resetSelectedOption:k,updateSelectedOptionIndex:D,listId:c.current,setListId:B,clickSelectedOption:P,searchRef:f,focusSearchInput:H,targetRef:h,focusTarget:G}}const Jde={keepMounted:!1,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0},size:"sm"},Zde=(t,{size:e,dropdownPadding:n})=>({options:{"--combobox-option-fz":Ss(e),"--combobox-option-padding":ii(e,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:bt(n),"--combobox-option-fz":Ss(e),"--combobox-option-padding":ii(e,"combobox-option-padding")}});function pr(t){const e=Ot("Combobox",Jde,t),{classNames:n,styles:i,unstyled:r,children:a,store:s,vars:o,onOptionSubmit:l,onClose:c,size:u,dropdownPadding:f,resetSelectionOnOptionHover:h,__staticSelector:d,readOnly:m,attributes:y,...v}=e,g=D$(),x=s||g,_=xn({name:d||"Combobox",classes:Bo,props:e,classNames:n,styles:i,unstyled:r,attributes:y,vars:o,varsResolver:Zde}),E=()=>{c?.(),x.closeDropdown()};return R.jsx(Vde,{value:{getStyles:_,store:x,onOptionSubmit:l,size:u,resetSelectionOnOptionHover:h,readOnly:m},children:R.jsx(Lo,{opened:x.dropdownOpened,preventPositionChangeWhenVisible:!0,...v,onChange:T=>!T&&E(),withRoles:!1,unstyled:r,children:a})})}const Qde=t=>t;pr.extend=Qde;pr.classes=Bo;pr.displayName="@mantine/core/Combobox";pr.Target=k$;pr.Dropdown=k4;pr.Options=U4;pr.Option=L4;pr.Search=B4;pr.Empty=D4;pr.Chevron=R4;pr.Footer=I4;pr.Header=P4;pr.EventsTarget=C$;pr.DropdownTarget=A$;pr.Group=N4;pr.ClearButton=T$;pr.HiddenInput=R$;var O$={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const I$=O$,F4=I.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:n,classNames:i,styles:r,unstyled:a,children:s,label:o,description:l,id:c,disabled:u,error:f,size:h,labelPosition:d="left",bodyElement:m="div",labelElement:y="label",variant:v,style:g,vars:x,mod:_,attributes:E,...T},w)=>{const A=xn({name:t,props:e,className:n,style:g,classes:O$,classNames:i,styles:r,unstyled:a,attributes:E});return R.jsx(et,{...A("root"),ref:w,__vars:{"--label-fz":Ss(h),"--label-lh":ii(h,"label-lh")},mod:[{"label-position":d},_],variant:v,size:h,...T,children:R.jsxs(et,{component:m,htmlFor:m==="label"?c:void 0,...A("body"),children:[s,R.jsxs("div",{...A("labelWrapper"),"data-disabled":u||void 0,children:[o&&R.jsx(et,{component:y,htmlFor:y==="label"?c:void 0,...A("label"),"data-disabled":u||void 0,children:o}),l&&R.jsx(ua.Description,{size:h,__inheritStyles:!1,...A("description"),children:l}),f&&typeof f!="boolean"&&R.jsx(ua.Error,{size:h,__inheritStyles:!1,...A("error"),children:f})]})]})})});F4.displayName="@mantine/core/InlineInput";const N$=I.createContext(null),epe=N$.Provider,P$=()=>I.useContext(N$),[tpe,npe]=K_();var L$={card:"m_26775b0a"};const ipe={withBorder:!0},rpe=(t,{radius:e})=>({card:{"--card-radius":Qr(e)}}),z4=Qt((t,e)=>{const n=Ot("CheckboxCard",ipe,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,checked:c,mod:u,withBorder:f,value:h,onClick:d,defaultChecked:m,onChange:y,attributes:v,...g}=n,x=xn({name:"CheckboxCard",classes:L$,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:v,vars:l,varsResolver:rpe,rootSelector:"card"}),_=P$(),E=typeof c=="boolean"?c:_?_.value.includes(h||""):void 0,[T,w]=Ml({value:E,defaultValue:m,finalValue:!1,onChange:y});return R.jsx(tpe,{value:{checked:T},children:R.jsx(df,{ref:e,mod:[{"with-border":f,checked:T},u],...x("card"),...g,role:"checkbox","aria-checked":T,onClick:A=>{d?.(A),_?.onChange(h||""),w(!T)}})})});z4.displayName="@mantine/core/CheckboxCard";z4.classes=L$;function U$({children:t,role:e}){const n=tS();return n?R.jsx("div",{role:e,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:t}):R.jsx(R.Fragment,{children:t})}const j4=Qt((t,e)=>{const{value:n,defaultValue:i,onChange:r,size:a,wrapperProps:s,children:o,readOnly:l,...c}=Ot("CheckboxGroup",null,t),[u,f]=Ml({value:n,defaultValue:i,finalValue:[],onChange:r}),h=d=>{const m=typeof d=="string"?d:d.currentTarget.value;!l&&f(u.includes(m)?u.filter(y=>y!==m):[...u,m])};return R.jsx(epe,{value:{value:u,onChange:h,size:a},children:R.jsx(ua.Wrapper,{size:a,ref:e,...s,...c,labelElement:"div",__staticSelector:"CheckboxGroup",children:R.jsx(U$,{role:"group",children:o})})})});j4.classes=ua.Wrapper.classes;j4.displayName="@mantine/core/CheckboxGroup";function B$({size:t,style:e,...n}){const i=t!==void 0?{width:bt(t),height:bt(t),...e}:e;return R.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,"aria-hidden":!0,...n,children:R.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function F$({indeterminate:t,...e}){return t?R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...e,children:R.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):R.jsx(B$,{...e})}var z$={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const ape={icon:F$},spe=(t,{radius:e,color:n,size:i,iconColor:r,variant:a,autoContrast:s})=>{const o=xh({color:n||t.primaryColor,theme:t}),l=o.isThemeColor&&o.shade===void 0?`var(--mantine-color-${o.color}-outline)`:o.color;return{indicator:{"--checkbox-size":ii(i,"checkbox-size"),"--checkbox-radius":e===void 0?void 0:Qr(e),"--checkbox-color":a==="outline"?l:Zr(n,t),"--checkbox-icon-color":r?Zr(r,t):BC(s,t)?J_({color:n,theme:t,autoContrast:s}):void 0}}},H4=Qt((t,e)=>{const n=Ot("CheckboxIndicator",ape,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,icon:c,indeterminate:u,radius:f,color:h,iconColor:d,autoContrast:m,checked:y,mod:v,variant:g,disabled:x,attributes:_,...E}=n,T=xn({name:"CheckboxIndicator",classes:z$,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:_,vars:l,varsResolver:spe,rootSelector:"indicator"}),w=npe(),A=typeof y=="boolean"||typeof u=="boolean"?y||u:w?.checked||!1;return R.jsx(et,{ref:e,...T("indicator",{variant:g}),variant:g,mod:[{checked:A,disabled:x},v],...E,children:R.jsx(c,{indeterminate:u,...T("icon")})})});H4.displayName="@mantine/core/CheckboxIndicator";H4.classes=z$;var j$={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const ope={labelPosition:"right",icon:F$},lpe=(t,{radius:e,color:n,size:i,iconColor:r,variant:a,autoContrast:s})=>{const o=xh({color:n||t.primaryColor,theme:t}),l=o.isThemeColor&&o.shade===void 0?`var(--mantine-color-${o.color}-outline)`:o.color;return{root:{"--checkbox-size":ii(i,"checkbox-size"),"--checkbox-radius":e===void 0?void 0:Qr(e),"--checkbox-color":a==="outline"?l:Zr(n,t),"--checkbox-icon-color":r?Zr(r,t):BC(s,t)?J_({color:n,theme:t,autoContrast:s}):void 0}}},Eh=Qt((t,e)=>{const n=Ot("Checkbox",ope,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,color:c,label:u,id:f,size:h,radius:d,wrapperProps:m,checked:y,labelPosition:v,description:g,error:x,disabled:_,variant:E,indeterminate:T,icon:w,rootRef:A,iconColor:C,onChange:D,autoContrast:k,mod:P,attributes:B,...H}=n,G=P$(),V=h||G?.size,U=xn({name:"Checkbox",props:n,classes:j$,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:B,vars:l,varsResolver:lpe}),{styleProps:F,rest:q}=Z_(H),X=yf(f),z=G?{checked:G.value.includes(q.value),onChange:$=>{G.onChange($),D?.($)}}:{},ce=I.useRef(null),he=e||ce;return I.useEffect(()=>{he&&"current"in he&&he.current&&(he.current.indeterminate=T||!1)},[T,he]),R.jsx(F4,{...U("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:X,size:V,labelPosition:v,label:u,description:g,error:x,disabled:_,classNames:i,styles:s,unstyled:o,"data-checked":z.checked||y||void 0,variant:E,ref:A,mod:P,...F,...m,children:R.jsxs(et,{...U("inner"),mod:{"data-label-position":v},children:[R.jsx(et,{component:"input",id:X,ref:he,checked:y,disabled:_,mod:{error:!!x,indeterminate:T},...U("input",{focusable:!0,variant:E}),onChange:D,...q,...z,type:"checkbox"}),R.jsx(w,{indeterminate:T,...U("icon")})]})})});Eh.classes={...j$,...I$};Eh.displayName="@mantine/core/Checkbox";Eh.Group=j4;Eh.Indicator=H4;Eh.Card=z4;function l_(t){return"group"in t}function H$({options:t,search:e,limit:n}){const i=e.trim().toLowerCase(),r=[];for(let a=0;a<t.length;a+=1){const s=t[a];if(r.length===n)return r;l_(s)&&r.push({group:s.group,items:H$({options:s.items,search:e,limit:n-r.length})}),l_(s)||s.label.toLowerCase().includes(i)&&r.push(s)}return r}function cpe(t){if(t.length===0)return!0;for(const e of t)if(!("group"in e)||e.items.length>0)return!1;return!0}function V$(t,e=new Set){if(Array.isArray(t))for(const n of t)if(l_(n))V$(n.items,e);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(e.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);e.add(n.value)}}function upe(t,e){return Array.isArray(t)?t.includes(e):t===e}function G$({data:t,withCheckIcon:e,value:n,checkIconPosition:i,unstyled:r,renderOption:a}){if(!l_(t)){const o=upe(n,t.value),l=e&&o&&R.jsx(B$,{className:Bo.optionsDropdownCheckIcon}),c=R.jsxs(R.Fragment,{children:[i==="left"&&l,R.jsx("span",{children:t.label}),i==="right"&&l]});return R.jsx(pr.Option,{value:t.value,disabled:t.disabled,className:ns({[Bo.optionsDropdownOption]:!r}),"data-reverse":i==="right"||void 0,"data-checked":o||void 0,"aria-selected":o,active:o,children:typeof a=="function"?a({option:t,checked:o}):c})}const s=t.items.map(o=>R.jsx(G$,{data:o,value:n,unstyled:r,withCheckIcon:e,checkIconPosition:i,renderOption:a},o.value));return R.jsx(pr.Group,{label:t.group,children:s})}function fpe({data:t,hidden:e,hiddenWhenEmpty:n,filter:i,search:r,limit:a,maxDropdownHeight:s,withScrollArea:o=!0,filterOptions:l=!0,withCheckIcon:c=!1,value:u,checkIconPosition:f,nothingFoundMessage:h,unstyled:d,labelId:m,renderOption:y,scrollAreaProps:v,"aria-label":g}){V$(t);const _=typeof r=="string"?(i||H$)({options:t,search:l?r:"",limit:a??1/0}):t,E=cpe(_),T=_.map(w=>R.jsx(G$,{data:w,withCheckIcon:c,value:u,checkIconPosition:f,unstyled:d,renderOption:y},l_(w)?w.group:w.value));return R.jsx(pr.Dropdown,{hidden:e||n&&E,"data-composed":!0,children:R.jsxs(pr.Options,{labelledBy:m,"aria-label":g,children:[o?R.jsx(kc.Autosize,{mah:s??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...v,children:T}):T,E&&h&&R.jsx(pr.Empty,{children:h})]})})}var W$={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const hpe={iconSize:48},dpe=(t,{color:e,iconSize:n,radius:i})=>{const r=xh({color:e||t.primaryColor,theme:t,colorScheme:"dark"}),a=xh({color:e||t.primaryColor,theme:t,colorScheme:"light"});return{root:{"--bq-bg-light":Ql(a.value,.07),"--bq-bg-dark":Ql(r.value,.06),"--bq-bd":Zr(e,t),"--bq-icon-size":bt(n),"--bq-radius":Qr(i)}}},V4=Qt((t,e)=>{const n=Ot("Blockquote",hpe,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,children:c,icon:u,iconSize:f,cite:h,attributes:d,...m}=n,y=xn({name:"Blockquote",classes:W$,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:d,vars:l,varsResolver:dpe});return R.jsxs(et,{component:"blockquote",ref:e,...y("root"),...m,children:[u&&R.jsx("span",{...y("icon"),children:u}),c,h&&R.jsx("cite",{...y("cite"),children:h})]})});V4.classes=W$;V4.displayName="@mantine/core/Blockquote";var q$={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const ppe=(t,{color:e,size:n,lineSize:i,transitionDuration:r,transitionTimingFunction:a})=>({root:{"--burger-color":e?Zr(e,t):void 0,"--burger-size":ii(n,"burger-size"),"--burger-line-size":i?bt(i):void 0,"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":a}}),G4=Qt((t,e)=>{const n=Ot("Burger",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,opened:c,children:u,transitionDuration:f,transitionTimingFunction:h,lineSize:d,attributes:m,...y}=n,v=xn({name:"Burger",classes:q$,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:m,vars:l,varsResolver:ppe});return R.jsxs(df,{...v("root"),ref:e,...y,children:[R.jsx(et,{mod:["reduce-motion",{opened:c}],...v("burger")}),u]})});G4.classes=q$;G4.displayName="@mantine/core/Burger";var sv={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const X9={orientation:"horizontal"},mpe=(t,{borderWidth:e})=>({group:{"--button-border-width":bt(e)}}),W4=Qt((t,e)=>{const n=Ot("ButtonGroup",X9,t),{className:i,style:r,classNames:a,styles:s,unstyled:o,orientation:l,vars:c,borderWidth:u,variant:f,mod:h,attributes:d,...m}=Ot("ButtonGroup",X9,t),y=xn({name:"ButtonGroup",props:n,classes:sv,className:i,style:r,classNames:a,styles:s,unstyled:o,attributes:d,vars:c,varsResolver:mpe,rootSelector:"group"});return R.jsx(et,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...m})});W4.classes=sv;W4.displayName="@mantine/core/ButtonGroup";const gpe=(t,{radius:e,color:n,gradient:i,variant:r,autoContrast:a,size:s})=>{const o=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:i,variant:r||"filled",autoContrast:a});return{groupSection:{"--section-height":ii(s,"section-height"),"--section-padding-x":ii(s,"section-padding-x"),"--section-fz":s?.includes("compact")?Ss(s.replace("compact-","")):Ss(s),"--section-radius":e===void 0?void 0:Qr(e),"--section-bg":n||r?o.background:void 0,"--section-color":o.color,"--section-bd":n||r?o.border:void 0}}},q4=Qt((t,e)=>{const n=Ot("ButtonGroupSection",null,t),{className:i,style:r,classNames:a,styles:s,unstyled:o,vars:l,variant:c,gradient:u,radius:f,autoContrast:h,attributes:d,...m}=n,y=xn({name:"ButtonGroupSection",props:n,classes:sv,className:i,style:r,classNames:a,styles:s,unstyled:o,attributes:d,vars:l,varsResolver:gpe,rootSelector:"groupSection"});return R.jsx(et,{...y("groupSection"),ref:e,variant:c,...m})});q4.classes=sv;q4.displayName="@mantine/core/ButtonGroupSection";const bpe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${bt(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},ype=(t,{radius:e,color:n,gradient:i,variant:r,size:a,justify:s,autoContrast:o})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--button-justify":s,"--button-height":ii(a,"button-height"),"--button-padding-x":ii(a,"button-padding-x"),"--button-fz":a?.includes("compact")?Ss(a.replace("compact-","")):Ss(a),"--button-radius":e===void 0?void 0:Qr(e),"--button-bg":n||r?l.background:void 0,"--button-hover":n||r?l.hover:void 0,"--button-color":l.color,"--button-bd":n||r?l.border:void 0,"--button-hover-color":n||r?l.hoverColor:void 0}}},vs=Rl((t,e)=>{const n=Ot("Button",null,t),{style:i,vars:r,className:a,color:s,disabled:o,children:l,leftSection:c,rightSection:u,fullWidth:f,variant:h,radius:d,loading:m,loaderProps:y,gradient:v,classNames:g,styles:x,unstyled:_,"data-disabled":E,autoContrast:T,mod:w,attributes:A,...C}=n,D=xn({name:"Button",props:n,classes:sv,className:a,style:i,classNames:g,styles:x,unstyled:_,attributes:A,vars:r,varsResolver:ype}),k=!!c,P=!!u;return R.jsxs(df,{ref:e,...D("root",{active:!o&&!m&&!E}),unstyled:_,variant:h,disabled:o||m,mod:[{disabled:o||E,loading:m,block:f,"with-left-section":k,"with-right-section":P},w],...C,children:[typeof m=="boolean"&&R.jsx(Mc,{mounted:m,transition:bpe,duration:150,children:B=>R.jsx(et,{component:"span",...D("loader",{style:B}),"aria-hidden":!0,children:R.jsx(cp,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...y})})}),R.jsxs("span",{...D("inner"),children:[c&&R.jsx(et,{component:"span",...D("section"),mod:{position:"left"},children:c}),R.jsx(et,{component:"span",mod:{loading:m},...D("label"),children:l}),u&&R.jsx(et,{component:"span",...D("section"),mod:{position:"right"},children:u})]})]})});vs.classes=sv;vs.displayName="@mantine/core/Button";vs.Group=W4;vs.GroupSection=q4;var X$={root:"m_b183c0a2"};const vpe=(t,{color:e})=>({root:{"--code-bg":e?Zr(e,t):void 0}}),X4=Qt((t,e)=>{const n=Ot("Code",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,color:c,block:u,variant:f,mod:h,attributes:d,...m}=n,y=xn({name:"Code",props:n,classes:X$,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:d,vars:l,varsResolver:vpe});return R.jsx(et,{component:u?"pre":"code",variant:f,ref:e,mod:[{block:u},h],...y("root"),...m,dir:"ltr"})});X4.classes=X$;X4.displayName="@mantine/core/Code";var Y$={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const Y9={withShadow:!0},xpe=(t,{radius:e,size:n})=>({root:{"--cs-radius":e===void 0?void 0:Qr(e),"--cs-size":bt(n)}}),nS=Rl((t,e)=>{const n=Ot("ColorSwatch",Y9,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,color:c,size:u,radius:f,withShadow:h,children:d,variant:m,attributes:y,...v}=Ot("ColorSwatch",Y9,n),g=xn({name:"ColorSwatch",props:n,classes:Y$,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:y,vars:l,varsResolver:xpe});return R.jsxs(et,{ref:e,variant:m,size:u,...g("root",{focusable:!0}),...v,children:[R.jsx("span",{...g("alphaOverlay")}),h&&R.jsx("span",{...g("shadowOverlay")}),R.jsx("span",{...g("colorOverlay",{style:{backgroundColor:c}})}),R.jsx("span",{...g("childrenOverlay"),children:d})]})});nS.classes=Y$;nS.displayName="@mantine/core/ColorSwatch";const[_pe,Y4]=K_(null),$4=I.forwardRef(({position:t,...e},n)=>R.jsx(et,{ref:n,__vars:{"--thumb-y-offset":`${t.y*100}%`,"--thumb-x-offset":`${t.x*100}%`},...e}));$4.displayName="@mantine/core/ColorPickerThumb";var K4={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const J4=Qt((t,e)=>{const n=Ot("ColorSlider",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,onChange:c,onChangeEnd:u,maxValue:f,round:h,size:d="md",focusable:m=!0,value:y,overlays:v,thumbColor:g="transparent",onScrubStart:x,onScrubEnd:_,__staticSelector:E="ColorPicker",attributes:T,...w}=n,A=xn({name:E,classes:K4,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:T}),D=Y4()?.getStyles||A,k=Da(),[P,B]=I.useState({y:0,x:y/f}),H=I.useRef(P),G=X=>h?Math.round(X*f):X*f,{ref:V}=JL(({x:X,y:z})=>{H.current={x:X,y:z},c?.(G(X))},{onScrubEnd:()=>{const{x:X}=H.current;u?.(G(X)),_?.()},onScrubStart:x});xc(()=>{B({y:0,x:y/f})},[y]);const U=(X,z)=>{X.preventDefault();const ce=HX(z);c?.(G(ce.x)),u?.(G(ce.x))},F=X=>{switch(X.key){case"ArrowRight":{U(X,{x:P.x+.05,y:P.y});break}case"ArrowLeft":{U(X,{x:P.x-.05,y:P.y});break}}},q=v.map((X,z)=>I.createElement("div",{...D("sliderOverlay"),style:X,key:z}));return R.jsxs(et,{...w,ref:As(V,e),...D("slider"),role:"slider","aria-valuenow":y,"aria-valuemax":f,"aria-valuemin":0,tabIndex:m?0:-1,onKeyDown:F,"data-focus-ring":k.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${d})`},children:[q,R.jsx($4,{position:P,...D("thumb",{style:{top:bt(1),background:g}})})]})});J4.displayName="@mantine/core/ColorSlider";function hc(t,e=0,n=10**e){return Math.round(n*t)/n}function Spe({h:t,s:e,l:n,a:i}){const r=e*((n<50?n:100-n)/100);return{h:t,s:r>0?2*r/(n+r)*100:0,v:n+r,a:i}}const wpe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function Epe(t,e="deg"){return Number(t)*(wpe[e]||1)}const Mpe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function $9(t){const e=Mpe.exec(t);return e?Spe({h:Epe(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}}function _N({r:t,g:e,b:n,a:i}){const r=Math.max(t,e,n),a=r-Math.min(t,e,n),s=a?r===t?(e-n)/a:r===e?2+(n-t)/a:4+(t-e)/a:0;return{h:hc(60*(s<0?s+6:s),3),s:hc(r?a/r*100:0,3),v:hc(r/255*100,3),a:i}}function SN(t){const e=t[0]==="#"?t.slice(1):t;return e.length===3?_N({r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}):_N({r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:1})}function Tpe(t){const e=t[0]==="#"?t.slice(1):t,n=s=>hc(parseInt(s,16)/255,3);if(e.length===4){const s=e.slice(0,3),o=n(e[3]+e[3]);return{...SN(s),a:o}}const i=e.slice(0,6),r=n(e.slice(6,8));return{...SN(i),a:r}}const Ape=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function K9(t){const e=Ape.exec(t);return e?_N({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}}const $$={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},Cpe={hex:SN,hexa:Tpe,rgb:K9,rgba:K9,hsl:$9,hsla:$9};function Zx(t){for(const[,e]of Object.entries($$))if(e.test(t))return!0;return!1}function Mm(t){if(typeof t!="string")return{h:0,s:0,v:0,a:1};if(t==="transparent")return{h:0,s:0,v:0,a:0};const e=t.trim();for(const[n,i]of Object.entries($$))if(i.test(e))return Cpe[n](e);return{h:0,s:0,v:0,a:1}}const K$=I.forwardRef((t,e)=>{const{value:n,onChange:i,onChangeEnd:r,color:a,...s}=Ot("AlphaSlider",null,t);return R.jsx(J4,{...s,ref:e,value:n,onChange:o=>i?.(hc(o,2)),onChangeEnd:o=>r?.(hc(o,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${bt(8)} ${bt(8)}`,backgroundPosition:`0 0, 0 ${bt(4)}, ${bt(4)} ${bt(-4)}, ${bt(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${a})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${bt(1)} inset, rgb(0, 0, 0, .15) 0 0 ${bt(4)} inset`}]})});K$.displayName="@mantine/core/AlphaSlider";function J$({h:t,s:e,v:n,a:i}){const r=t/360*6,a=e/100,s=n/100,o=Math.floor(r),l=s*(1-a),c=s*(1-(r-o)*a),u=s*(1-(1-r+o)*a),f=o%6;return{r:hc([s,c,l,l,u,s][f]*255),g:hc([u,s,s,c,l,l][f]*255),b:hc([l,l,u,s,s,c][f]*255),a:hc(i,2)}}function J9(t,e){const{r:n,g:i,b:r,a}=J$(t);return e?`rgba(${n}, ${i}, ${r}, ${hc(a,2)})`:`rgb(${n}, ${i}, ${r})`}function Z9({h:t,s:e,v:n,a:i},r){const a=(200-e)*n/100,s={h:Math.round(t),s:Math.round(a>0&&a<200?e*n/100/(a<=100?a:200-a)*100:0),l:Math.round(a/2)};return r?`hsla(${s.h}, ${s.s}%, ${s.l}%, ${hc(i,2)})`:`hsl(${s.h}, ${s.s}%, ${s.l}%)`}function VM(t){const e=t.toString(16);return e.length<2?`0${e}`:e}function Z$(t){const{r:e,g:n,b:i}=J$(t);return`#${VM(e)}${VM(n)}${VM(i)}`}function Rpe(t){const e=Math.round(t.a*255);return`${Z$(t)}${VM(e)}`}const Mk={hex:Z$,hexa:t=>Rpe(t),rgb:t=>J9(t,!1),rgba:t=>J9(t,!0),hsl:t=>Z9(t,!1),hsla:t=>Z9(t,!0)};function eu(t,e){return e?t in Mk?Mk[t](e):Mk.hex(e):"#000000"}const Q$=I.forwardRef((t,e)=>{const{value:n,onChange:i,onChangeEnd:r,color:a,...s}=Ot("HueSlider",{},t);return R.jsx(J4,{...s,ref:e,value:n,onChange:i,onChangeEnd:r,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${bt(1)} inset, rgb(0, 0, 0, .15) 0 0 ${bt(4)} inset`}]})});Q$.displayName="@mantine/core/HueSlider";function eK({className:t,onChange:e,onChangeEnd:n,value:i,saturationLabel:r,focusable:a=!0,size:s,color:o,onScrubStart:l,onScrubEnd:c,...u}){const{getStyles:f}=Y4(),[h,d]=I.useState({x:i.s/100,y:1-i.v/100}),m=I.useRef(h),{ref:y}=JL(({x,y:_})=>{m.current={x,y:_},e({s:Math.round(x*100),v:Math.round((1-_)*100)})},{onScrubEnd:()=>{const{x,y:_}=m.current;n({s:Math.round(x*100),v:Math.round((1-_)*100)}),c?.()},onScrubStart:l});I.useEffect(()=>{d({x:i.s/100,y:1-i.v/100})},[i.s,i.v]);const v=(x,_)=>{x.preventDefault();const E=HX(_);e({s:Math.round(E.x*100),v:Math.round((1-E.y)*100)}),n({s:Math.round(E.x*100),v:Math.round((1-E.y)*100)})},g=x=>{switch(x.key){case"ArrowUp":{v(x,{y:h.y-.05,x:h.x});break}case"ArrowDown":{v(x,{y:h.y+.05,x:h.x});break}case"ArrowRight":{v(x,{x:h.x+.05,y:h.y});break}case"ArrowLeft":{v(x,{x:h.x-.05,y:h.y});break}}};return R.jsxs(et,{...f("saturation"),ref:y,...u,role:"slider","aria-label":r,"aria-valuenow":h.x,"aria-valuetext":eu("rgba",i),tabIndex:a?0:-1,onKeyDown:g,children:[R.jsx("div",{...f("saturationOverlay",{style:{backgroundColor:`hsl(${i.h}, 100%, 50%)`}})}),R.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),R.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),R.jsx($4,{position:h,...f("thumb",{style:{backgroundColor:o}})})]})}eK.displayName="@mantine/core/Saturation";const tK=I.forwardRef(({className:t,datatype:e,setValue:n,onChangeEnd:i,size:r,focusable:a,data:s,swatchesPerRow:o,...l},c)=>{const u=Y4(),f=s.map((h,d)=>I.createElement(nS,{...u.getStyles("swatch"),unstyled:u.unstyled,component:"button",type:"button",color:h,key:d,radius:"sm",onClick:()=>{n(h),i?.(h)},"aria-label":h,tabIndex:a?0:-1,"data-swatch":!0}));return R.jsx(et,{...u.getStyles("swatches"),ref:c,...l,children:f})});tK.displayName="@mantine/core/Swatches";const kpe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},Dpe=(t,{size:e,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":ii(e,"cp-preview-size"),"--cp-width":ii(e,"cp-width"),"--cp-body-spacing":Zd(e),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":ii(e,"cp-thumb-size"),"--cp-saturation-height":ii(e,"cp-saturation-height")}}),Z4=Qt((t,e)=>{const n=Ot("ColorPicker",kpe,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,format:c="hex",value:u,defaultValue:f,onChange:h,onChangeEnd:d,withPicker:m,size:y,saturationLabel:v,hueLabel:g,alphaLabel:x,focusable:_,swatches:E,swatchesPerRow:T,fullWidth:w,onColorSwatchClick:A,__staticSelector:C,mod:D,attributes:k,...P}=n,B=xn({name:C,props:n,classes:K4,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:k,rootSelector:"wrapper",vars:l,varsResolver:Dpe}),H=I.useRef(c||"hex"),G=I.useRef(""),V=I.useRef(-1),U=I.useRef(!1),F=c==="hexa"||c==="rgba"||c==="hsla",[q,X,z]=Ml({value:u,defaultValue:f,finalValue:"#FFFFFF",onChange:h}),[ce,he]=I.useState(Mm(q)),$=()=>{window.clearTimeout(V.current),U.current=!0},Me=()=>{window.clearTimeout(V.current),V.current=window.setTimeout(()=>{U.current=!1},200)},Se=pe=>{he(xe=>{const Ne={...xe,...pe};return G.current=eu(H.current,Ne),Ne}),X(G.current)};return xc(()=>{typeof u=="string"&&Zx(u)&&!U.current&&he(Mm(u))},[u]),xc(()=>{H.current=c||"hex",X(eu(H.current,ce))},[c]),R.jsx(_pe,{value:{getStyles:B,unstyled:o},children:R.jsxs(et,{ref:e,...B("wrapper"),size:y,mod:[{"full-width":w},D],...P,children:[m&&R.jsxs(R.Fragment,{children:[R.jsx(eK,{value:ce,onChange:Se,onChangeEnd:({s:pe,v:xe})=>d?.(eu(H.current,{...ce,s:pe,v:xe})),color:q,size:y,focusable:_,saturationLabel:v,onScrubStart:$,onScrubEnd:Me}),R.jsxs("div",{...B("body"),children:[R.jsxs("div",{...B("sliders"),children:[R.jsx(Q$,{value:ce.h,onChange:pe=>Se({h:pe}),onChangeEnd:pe=>d?.(eu(H.current,{...ce,h:pe})),size:y,focusable:_,"aria-label":g,onScrubStart:$,onScrubEnd:Me}),F&&R.jsx(K$,{value:ce.a,onChange:pe=>Se({a:pe}),onChangeEnd:pe=>{d?.(eu(H.current,{...ce,a:pe}))},size:y,color:eu("hex",ce),focusable:_,"aria-label":x,onScrubStart:$,onScrubEnd:Me})]}),F&&R.jsx(nS,{color:q,radius:"sm",size:"var(--cp-preview-size)",...B("preview")})]})]}),Array.isArray(E)&&R.jsx(tK,{data:E,swatchesPerRow:T,focusable:_,setValue:X,onChangeEnd:pe=>{const xe=eu(c,Mm(pe));A?.(xe),d?.(xe),z||he(Mm(pe))}})]})})});Z4.classes=K4;Z4.displayName="@mantine/core/ColorPicker";function Ope({style:t,...e}){return R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...t},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[R.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),R.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),R.jsx("path",{d:"M12 3l0 4"}),R.jsx("path",{d:"M12 21l0 -3"}),R.jsx("path",{d:"M3 12l4 0"}),R.jsx("path",{d:"M21 12l-3 0"}),R.jsx("path",{d:"M12 12l0 .01"})]})}var Q9={eyeDropperIcon:"m_b077c2bc",colorPreview:"m_c5ccdcab",dropdown:"m_5ece2cd7"};const e5={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},Ipe=(t,{size:e})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":ii(e,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":ii(e,"ci-preview-size")}}),ov=Qt((t,e)=>{const n=Ot("ColorInput",e5,t),{classNames:i,styles:r,unstyled:a,disallowInput:s,fixOnBlur:o,popoverProps:l,withPreview:c,withEyeDropper:u,eyeDropperIcon:f,closeOnColorSwatchClick:h,eyeDropperButtonProps:d,value:m,defaultValue:y,onChange:v,onChangeEnd:g,onClick:x,onFocus:_,onBlur:E,inputProps:T,format:w="hex",wrapperProps:A,readOnly:C,withPicker:D,swatches:k,disabled:P,leftSection:B,rightSection:H,swatchesPerRow:G,...V}=x$("ColorInput",e5,t),U=xn({name:"ColorInput",props:n,classes:Q9,classNames:i,styles:r,unstyled:a,rootSelector:"wrapper",vars:n.vars,varsResolver:Ipe}),{resolvedClassNames:F,resolvedStyles:q}=ev({classNames:i,styles:r,props:n}),[X,z]=I.useState(!1),[ce,he]=I.useState(""),[$,Me]=Ml({value:m,defaultValue:y,finalValue:"",onChange:v}),{supported:Se,open:pe}=wle(),xe=R.jsx(kl,{...d,...U("eyeDropperButton",{className:d?.className,style:d?.style}),variant:"subtle",color:"gray",size:T.size,unstyled:a,onClick:()=>pe().then(ct=>{if(ct?.sRGBHex){const At=eu(w,Mm(ct.sRGBHex));Me(At),g?.(At)}}).catch(()=>{}),children:f||R.jsx(Ope,{...U("eyeDropperIcon")})}),Ne=ct=>{_?.(ct),z(!0)},Ge=ct=>{o&&Me(ce),E?.(ct),z(!1)},$e=ct=>{x?.(ct),z(!0)};return I.useEffect(()=>{(Zx($)||$.trim()==="")&&he($)},[$]),xc(()=>{Zx($)&&Me(eu(w,Mm($)))},[w]),R.jsx(ua.Wrapper,{...A,classNames:F,styles:q,__staticSelector:"ColorInput",children:R.jsxs(Lo,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,opened:X,...l,classNames:F,styles:q,unstyled:a,withRoles:!1,disabled:C||D===!1&&(!Array.isArray(k)||k.length===0),children:[R.jsx(Lo.Target,{children:R.jsx(ua,{autoComplete:"off",...V,...T,classNames:F,styles:q,disabled:P,ref:e,__staticSelector:"ColorInput",onFocus:Ne,onBlur:Ge,onClick:$e,spellCheck:!1,value:$,onChange:ct=>{const At=ct.currentTarget.value;Me(At),Zx(At)&&g?.(eu(w,Mm(At)))},leftSection:B||(c?R.jsx(nS,{color:Zx($)?$:"#fff",size:"var(--ci-preview-size)",...U("colorPreview")}):null),readOnly:s||C,pointer:s,unstyled:a,rightSection:H||(u&&!P&&!C&&Se?xe:null)})}),R.jsx(Lo.Dropdown,{onMouseDown:ct=>ct.preventDefault(),className:Q9.dropdown,children:R.jsx(Z4,{__staticSelector:"ColorInput",value:$,onChange:Me,onChangeEnd:g,format:w,swatches:k,swatchesPerRow:G,withPicker:D,size:T.size,focusable:!1,unstyled:a,styles:q,classNames:F,onColorSwatchClick:()=>h&&z(!1),attributes:A.attributes})})]})})});ov.classes=Mu.classes;ov.displayName="@mantine/core/ColorInput";var nK={root:"m_7485cace"};const Npe=(t,{size:e,fluid:n})=>({root:{"--container-size":n?void 0:ii(e,"container-size")}}),Q4=Qt((t,e)=>{const n=Ot("Container",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,fluid:c,mod:u,attributes:f,strategy:h,...d}=n,m=xn({name:"Container",classes:nK,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:f,vars:l,varsResolver:Npe});return R.jsx(et,{ref:e,mod:[{fluid:c,strategy:h||"block"},u],...m("root"),...d})});Q4.classes=nK;Q4.displayName="@mantine/core/Container";const Ppe={timeout:1e3};function iK(t){const{children:e,timeout:n,value:i,...r}=Ot("CopyButton",Ppe,t),a=ale({timeout:n}),s=()=>a.copy(i);return R.jsx(R.Fragment,{children:e({copy:s,copied:a.copied,...r})})}iK.displayName="@mantine/core/CopyButton";var rK={root:"m_3eebeb36",label:"m_9e365f20"};const Lpe={orientation:"horizontal"},Upe=(t,{color:e,variant:n,size:i})=>({root:{"--divider-color":e?Zr(e,t):void 0,"--divider-border-style":n,"--divider-size":ii(i,"divider-size")}}),Mg=Qt((t,e)=>{const n=Ot("Divider",Lpe,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,color:c,orientation:u,label:f,labelPosition:h,mod:d,attributes:m,...y}=n,v=xn({name:"Divider",classes:rK,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:m,vars:l,varsResolver:Upe});return R.jsx(et,{ref:e,mod:[{orientation:u,"with-label":!!f},d],...v("root"),...y,role:"separator",children:f&&R.jsx(et,{component:"span",mod:{position:h},...v("label"),children:f})})});Mg.classes=rK;Mg.displayName="@mantine/core/Divider";var aK={root:"m_9e117634"};const Bpe=(t,{radius:e,fit:n})=>({root:{"--image-radius":e===void 0?void 0:Qr(e),"--image-object-fit":n}}),iS=Rl((t,e)=>{const n=Ot("Image",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,onError:c,src:u,radius:f,fit:h,fallbackSrc:d,mod:m,attributes:y,...v}=n,[g,x]=I.useState(!u);I.useEffect(()=>x(!u),[u]);const _=xn({name:"Image",classes:aK,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:y,vars:l,varsResolver:Bpe});return g&&d?R.jsx(et,{component:"img",ref:e,src:d,..._("root"),onError:c,mod:["fallback",m],...v}):R.jsx(et,{component:"img",ref:e,..._("root"),src:u,onError:E=>{c?.(E),x(!0)},mod:m,...v})});iS.classes=aK;iS.displayName="@mantine/core/Image";var Fpe=I.useLayoutEffect,zpe=function(e){var n=ke.useRef(e);return Fpe(function(){n.current=e}),n},t5=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},jpe=function(e,n){var i=ke.useRef();return ke.useCallback(function(r){e.current=r,i.current&&t5(i.current,null),i.current=n,n&&t5(n,r)},[n])},n5={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Hpe=function(e){Object.keys(n5).forEach(function(n){e.style.setProperty(n,n5[n],"important")})},i5=Hpe,ro=null,r5=function(e,n){var i=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?i+n.borderSize:i-n.paddingSize};function Vpe(t,e,n,i){n===void 0&&(n=1),i===void 0&&(i=1/0),ro||(ro=document.createElement("textarea"),ro.setAttribute("tabindex","-1"),ro.setAttribute("aria-hidden","true"),i5(ro)),ro.parentNode===null&&document.body.appendChild(ro);var r=t.paddingSize,a=t.borderSize,s=t.sizingStyle,o=s.boxSizing;Object.keys(s).forEach(function(h){var d=h;ro.style[d]=s[d]}),i5(ro),ro.value=e;var l=r5(ro,t);ro.value=e,l=r5(ro,t),ro.value="x";var c=ro.scrollHeight-r,u=c*n;o==="border-box"&&(u=u+r+a),l=Math.max(u,l);var f=c*i;return o==="border-box"&&(f=f+r+a),l=Math.min(f,l),[l,c]}var a5=function(){},Gpe=function(e,n){return e.reduce(function(i,r){return i[r]=n[r],i},{})},Wpe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],qpe=!!document.documentElement.currentStyle,Xpe=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var i=Gpe(Wpe,n),r=i.boxSizing;if(r==="")return null;qpe&&r==="border-box"&&(i.width=parseFloat(i.width)+parseFloat(i.borderRightWidth)+parseFloat(i.borderLeftWidth)+parseFloat(i.paddingRight)+parseFloat(i.paddingLeft)+"px");var a=parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),s=parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth);return{sizingStyle:i,paddingSize:a,borderSize:s}},Ype=Xpe;function eU(t,e,n){var i=zpe(n);I.useLayoutEffect(function(){var r=function(s){return i.current(s)};if(t)return t.addEventListener(e,r),function(){return t.removeEventListener(e,r)}},[])}var $pe=function(e,n){eU(document.body,"reset",function(i){e.current.form===i.target&&n(i)})},Kpe=function(e){eU(window,"resize",e)},Jpe=function(e){eU(document.fonts,"loadingdone",e)},Zpe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Qpe=function(e,n){var i=e.cacheMeasurements,r=e.maxRows,a=e.minRows,s=e.onChange,o=s===void 0?a5:s,l=e.onHeightChange,c=l===void 0?a5:l,u=ZL(e,Zpe),f=u.value!==void 0,h=I.useRef(null),d=jpe(h,n),m=I.useRef(0),y=I.useRef(),v=function(){var _=h.current,E=i&&y.current?y.current:Ype(_);if(E){y.current=E;var T=Vpe(E,_.value||_.placeholder||"x",a,r),w=T[0],A=T[1];m.current!==w&&(m.current=w,_.style.setProperty("height",w+"px","important"),c(w,{rowHeight:A}))}},g=function(_){f||v(),o(_)};return I.useLayoutEffect(v),$pe(h,function(){if(!f){var x=h.current.value;requestAnimationFrame(function(){var _=h.current;_&&x!==_.value&&v()})}}),Kpe(v),Jpe(v),I.createElement("textarea",ts({},u,{onChange:g,ref:d}))},eme=I.forwardRef(Qpe);const KC=Qt((t,e)=>{const{autosize:n,maxRows:i,minRows:r,__staticSelector:a,resize:s,...o}=Ot("Textarea",null,t),l=n&&Uce()!=="test",c=l?{maxRows:i,minRows:r}:{};return R.jsx(Mu,{component:l?eme:"textarea",ref:e,...o,__staticSelector:a||"Textarea",multiline:!0,"data-no-overflow":n&&i===void 0||void 0,__vars:{"--input-resize":s},...c})});KC.classes=Mu.classes;KC.displayName="@mantine/core/Textarea";const[tme,nme]=Eu("List component was not found in tree");var tU={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const nU=Qt((t,e)=>{const n=Ot("ListItem",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,icon:l,children:c,mod:u,...f}=n,h=nme(),d=l||h.icon,m={classNames:i,styles:s};return R.jsx(et,{...h.getStyles("item",{...m,className:r,style:a}),component:"li",mod:[{"with-icon":!!d,centered:h.center},u],ref:e,...f,children:R.jsxs("div",{...h.getStyles("itemWrapper",m),children:[d&&R.jsx("span",{...h.getStyles("itemIcon",m),children:d}),R.jsx("span",{...h.getStyles("itemLabel",m),children:c})]})})});nU.classes=tU;nU.displayName="@mantine/core/ListItem";const ime={type:"unordered"},rme=(t,{size:e,spacing:n})=>({root:{"--list-fz":Ss(e),"--list-lh":aY(e),"--list-spacing":Zd(n)}}),vy=Qt((t,e)=>{const n=Ot("List",ime,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,children:c,type:u,withPadding:f,icon:h,spacing:d,center:m,listStyleType:y,mod:v,attributes:g,...x}=n,_=xn({name:"List",classes:tU,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:g,vars:l,varsResolver:rme});return R.jsx(tme,{value:{center:m,icon:h,getStyles:_},children:R.jsx(et,{..._("root",{style:{listStyleType:y}}),component:u==="unordered"?"ul":"ol",mod:[{"with-padding":f},v],ref:e,...x,children:c})})});vy.classes=tU;vy.displayName="@mantine/core/List";vy.Item=nU;const[ame,lv]=Eu("Modal component was not found in tree");var Oh={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const JC=Qt((t,e)=>{const n=Ot("ModalBody",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,...l}=n,c=lv();return R.jsx(d$,{ref:e,...c.getStyles("body",{classNames:i,style:a,styles:s,className:r}),...l})});JC.classes=Oh;JC.displayName="@mantine/core/ModalBody";const ZC=Qt((t,e)=>{const n=Ot("ModalCloseButton",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,...l}=n,c=lv();return R.jsx(p$,{ref:e,...c.getStyles("close",{classNames:i,style:a,styles:s,className:r}),...l})});ZC.classes=Oh;ZC.displayName="@mantine/core/ModalCloseButton";const QC=Qt((t,e)=>{const n=Ot("ModalContent",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,children:l,__hidden:c,...u}=n,f=lv(),h=f.scrollAreaComponent||Sde;return R.jsx(m$,{...f.getStyles("content",{className:r,style:a,styles:s,classNames:i}),innerProps:f.getStyles("inner",{className:r,style:a,styles:s,classNames:i}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":c||void 0,ref:e,...u,children:R.jsx(h,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${bt(f.yOffset)} * 2))`},children:l})})});QC.classes=Oh;QC.displayName="@mantine/core/ModalContent";const e2=Qt((t,e)=>{const n=Ot("ModalHeader",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,...l}=n,c=lv();return R.jsx(g$,{ref:e,...c.getStyles("header",{classNames:i,style:a,styles:s,className:r}),...l})});e2.classes=Oh;e2.displayName="@mantine/core/ModalHeader";const t2=Qt((t,e)=>{const n=Ot("ModalOverlay",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,...l}=n,c=lv();return R.jsx(b$,{ref:e,...c.getStyles("overlay",{classNames:i,style:a,styles:s,className:r}),...l})});t2.classes=Oh;t2.displayName="@mantine/core/ModalOverlay";const sme={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:vf("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},ome=(t,{radius:e,size:n,yOffset:i,xOffset:r})=>({root:{"--modal-radius":e===void 0?void 0:Qr(e),"--modal-size":ii(n,"modal-size"),"--modal-y-offset":bt(i),"--modal-x-offset":bt(r)}}),n2=Qt((t,e)=>{const n=Ot("ModalRoot",sme,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,yOffset:c,scrollAreaComponent:u,radius:f,fullScreen:h,centered:d,xOffset:m,__staticSelector:y,attributes:v,...g}=n,x=xn({name:y,classes:Oh,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:v,vars:l,varsResolver:ome});return R.jsx(ame,{value:{yOffset:c,scrollAreaComponent:u,getStyles:x,fullScreen:h},children:R.jsx(h$,{ref:e,...x("root"),"data-full-screen":h||void 0,"data-centered":d||void 0,"data-offset-scrollbars":u===kc.Autosize||void 0,unstyled:o,...g})})});n2.classes=Oh;n2.displayName="@mantine/core/ModalRoot";const[lme,cme]=K_();function sK({children:t}){const[e,n]=I.useState([]),[i,r]=I.useState(vf("modal"));return R.jsx(lme,{value:{stack:e,addModal:(a,s)=>{n(o=>[...new Set([...o,a])]),r(o=>typeof s=="number"&&typeof o=="number"?Math.max(o,s):o)},removeModal:a=>n(s=>s.filter(o=>o!==a)),getZIndex:a=>`calc(${i} + ${e.indexOf(a)} + 1)`,currentId:e[e.length-1],maxZIndex:i},children:t})}sK.displayName="@mantine/core/ModalStack";const i2=Qt((t,e)=>{const n=Ot("ModalTitle",null,t),{classNames:i,className:r,style:a,styles:s,vars:o,...l}=n,c=lv();return R.jsx(y$,{ref:e,...c.getStyles("title",{classNames:i,style:a,styles:s,className:r}),...l})});i2.classes=Oh;i2.displayName="@mantine/core/ModalTitle";const ume={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:vf("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},xo=Qt((t,e)=>{const{title:n,withOverlay:i,overlayProps:r,withCloseButton:a,closeButtonProps:s,children:o,radius:l,opened:c,stackId:u,zIndex:f,...h}=Ot("Modal",ume,t),d=cme(),m=!!n||a,y=d&&u?{closeOnEscape:d.currentId===u,trapFocus:d.currentId===u,zIndex:d.getZIndex(u)}:{},v=i===!1?!1:u&&d?d.currentId===u:c;return I.useEffect(()=>{d&&u&&(c?d.addModal(u,f||vf("modal")):d.removeModal(u))},[c,u,f]),R.jsxs(n2,{ref:e,radius:l,opened:c,zIndex:d&&u?d.getZIndex(u):f,...h,...y,children:[i&&R.jsx(t2,{visible:v,transitionProps:d&&u?{duration:0}:void 0,...r}),R.jsxs(QC,{radius:l,__hidden:d&&u&&c?u!==d.currentId:!1,children:[m&&R.jsxs(e2,{children:[n&&R.jsx(i2,{children:n}),a&&R.jsx(ZC,{...s})]}),R.jsx(JC,{children:o})]})]})});xo.classes=Oh;xo.displayName="@mantine/core/Modal";xo.Root=n2;xo.Overlay=t2;xo.Content=QC;xo.Body=JC;xo.Header=e2;xo.Title=i2;xo.CloseButton=ZC;xo.Stack=sK;var oK={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const fme={withCloseButton:!0},hme=(t,{radius:e,color:n})=>({root:{"--notification-radius":e===void 0?void 0:Qr(e),"--notification-color":n?Zr(n,t):void 0}}),iU=Qt((t,e)=>{const n=Ot("Notification",fme,t),{className:i,color:r,radius:a,loading:s,withCloseButton:o,withBorder:l,title:c,icon:u,children:f,onClose:h,closeButtonProps:d,classNames:m,style:y,styles:v,unstyled:g,variant:x,vars:_,mod:E,loaderProps:T,role:w,attributes:A,...C}=n,D=xn({name:"Notification",classes:oK,props:n,className:i,style:y,classNames:m,styles:v,unstyled:g,attributes:A,vars:_,varsResolver:hme});return R.jsxs(et,{...D("root"),mod:[{"data-with-icon":!!u||s,"data-with-border":l},E],ref:e,variant:x,role:w||"alert",...C,children:[u&&!s&&R.jsx("div",{...D("icon"),children:u}),s&&R.jsx(cp,{size:28,color:r,...T,...D("loader")}),R.jsxs("div",{...D("body"),children:[c&&R.jsx("div",{...D("title"),children:c}),R.jsx(et,{...D("description"),mod:{"data-with-title":!!c},children:f})]}),o&&R.jsx(eS,{iconSize:16,color:"gray",...d,unstyled:g,onClick:h,...D("closeButton")})]})});iU.classes=oK;iU.displayName="@mantine/core/Notification";function lK(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}var c_;(function(t){t.event="event",t.props="prop"})(c_||(c_={}));function Cd(){}function dme(t){var e,n=void 0;return function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return e&&i.length===e.length&&i.every(function(a,s){return a===e[s]})||(e=i,n=t.apply(void 0,i)),n}}function u_(t){return!!(t||"").match(/\d/)}function V0(t){return t==null}function pme(t){return typeof t=="number"&&isNaN(t)}function cK(t){return V0(t)||pme(t)||typeof t=="number"&&!isFinite(t)}function uK(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function mme(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function gme(t,e,n){var i=mme(n),r=t.search(/[1-9]/);return r=r===-1?t.length:r,t.substring(0,r)+t.substring(r,t.length).replace(i,"$1"+e)}function bme(t){var e=I.useRef(t);e.current=t;var n=I.useRef(function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return e.current.apply(e,i)});return n.current}function rU(t,e){e===void 0&&(e=!0);var n=t[0]==="-",i=n&&e;t=t.replace("-","");var r=t.split("."),a=r[0],s=r[1]||"";return{beforeDecimal:a,afterDecimal:s,hasNegation:n,addNegation:i}}function yme(t){if(!t)return t;var e=t[0]==="-";e&&(t=t.substring(1,t.length));var n=t.split("."),i=n[0].replace(/^0+/,"")||"0",r=n[1]||"";return(e?"-":"")+i+(r?"."+r:"")}function fK(t,e,n){for(var i="",r=n?"0":"",a=0;a<=e-1;a++)i+=t[a]||r;return i}function s5(t,e){return Array(e+1).join(t)}function hK(t){var e=t+"",n=e[0]==="-"?"-":"";n&&(e=e.substring(1));var i=e.split(/[eE]/g),r=i[0],a=i[1];if(a=Number(a),!a)return n+r;r=r.replace(".","");var s=1+a,o=r.length;return s<0?r="0."+s5("0",Math.abs(s))+r:s>=o?r=r+s5("0",s-o):r=(r.substring(0,s)||"0")+"."+r.substring(s),n+r}function o5(t,e,n){if(["","-"].indexOf(t)!==-1)return t;var i=(t.indexOf(".")!==-1||n)&&e,r=rU(t),a=r.beforeDecimal,s=r.afterDecimal,o=r.hasNegation,l=parseFloat("0."+(s||"0")),c=s.length<=e?"0."+s:l.toFixed(e),u=c.split("."),f=a;a&&Number(u[0])&&(f=a.split("").reverse().reduce(function(y,v,g){return y.length>g?(Number(y[0])+Number(v)).toString()+y.substring(1,y.length):v+y},u[0]));var h=fK(u[1]||"",e,n),d=o?"-":"",m=i?".":"";return""+d+f+m+h}function vm(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var dK=dme(function(t,e){for(var n=0,i=0,r=t.length,a=e.length;t[n]===e[n]&&n<r;)n++;for(;t[r-1-i]===e[a-1-i]&&a-i>n&&r-i>n;)i++;return{from:{start:n,end:r-i},to:{start:n,end:a-i}}}),vme=function(t,e){var n=Math.min(t.selectionStart,e);return{from:{start:n,end:t.selectionEnd},to:{start:n,end:e}}};function xme(t,e,n){return Math.min(Math.max(t,e),n)}function Tk(t){return Math.max(t.selectionStart,t.selectionEnd)}function _me(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Sme(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function wme(t){var e=t.currentValue,n=t.formattedValue,i=t.currentValueIndex,r=t.formattedValueIndex;return e[i]===n[r]}function Eme(t,e,n,i,r,a,s){s===void 0&&(s=wme);var o=r.findIndex(function(E){return E}),l=t.slice(0,o);!e&&!n.startsWith(l)&&(e=l,n=l+n,i=i+l.length);for(var c=n.length,u=t.length,f={},h=new Array(c),d=0;d<c;d++){h[d]=-1;for(var m=0,y=u;m<y;m++){var v=s({currentValue:n,lastValue:e,formattedValue:t,currentValueIndex:d,formattedValueIndex:m});if(v&&f[m]!==!0){h[d]=m,f[m]=!0;break}}}for(var g=i;g<c&&(h[g]===-1||!a(n[g]));)g++;var x=g===c||h[g]===-1?u:h[g];for(g=i-1;g>0&&h[g]===-1;)g--;var _=g===-1||h[g]===-1?0:h[g]+1;return _>x?x:i-_<x-i?_:x}function l5(t,e,n,i){var r=t.length;if(e=xme(e,0,r),i==="left"){for(;e>=0&&!n[e];)e--;e===-1&&(e=n.indexOf(!0))}else{for(;e<=r&&!n[e];)e++;e>r&&(e=n.lastIndexOf(!0))}return e===-1&&(e=r),e}function Mme(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),n=0,i=e.length;n<i;n++)e[n]=!!(u_(t[n])||u_(t[n-1]));return e}function pK(t,e,n,i,r,a){a===void 0&&(a=Cd);var s=bme(function(m,y){var v,g;return cK(m)?(g="",v=""):typeof m=="number"||y?(g=typeof m=="number"?hK(m):m,v=i(g)):(g=r(m,void 0),v=i(g)),{formattedValue:v,numAsString:g}}),o=I.useState(function(){return s(V0(t)?e:t,n)}),l=o[0],c=o[1],u=function(m,y){m.formattedValue!==l.formattedValue&&c({formattedValue:m.formattedValue,numAsString:m.value}),a(m,y)},f=t,h=n;V0(t)&&(f=l.numAsString,h=!0);var d=s(f,h);return I.useMemo(function(){c(d)},[d.formattedValue]),[l,u]}function Tme(t){return t.replace(/[^0-9]/g,"")}function Ame(t){return t}function Cme(t){var e=t.type;e===void 0&&(e="text");var n=t.displayType;n===void 0&&(n="input");var i=t.customInput,r=t.renderText,a=t.getInputRef,s=t.format;s===void 0&&(s=Ame);var o=t.removeFormatting;o===void 0&&(o=Tme);var l=t.defaultValue,c=t.valueIsNumericString,u=t.onValueChange,f=t.isAllowed,h=t.onChange;h===void 0&&(h=Cd);var d=t.onKeyDown;d===void 0&&(d=Cd);var m=t.onMouseUp;m===void 0&&(m=Cd);var y=t.onFocus;y===void 0&&(y=Cd);var v=t.onBlur;v===void 0&&(v=Cd);var g=t.value,x=t.getCaretBoundary;x===void 0&&(x=Mme);var _=t.isValidInputCharacter;_===void 0&&(_=u_);var E=t.isCharacterSame,T=lK(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),w=pK(g,l,!!c,s,o,u),A=w[0],C=A.formattedValue,D=A.numAsString,k=w[1],P=I.useRef(),B=I.useRef({formattedValue:C,numAsString:D}),H=function(Te,Ue){B.current={formattedValue:Te.formattedValue,numAsString:Te.value},k(Te,Ue)},G=I.useState(!1),V=G[0],U=G[1],F=I.useRef(null),q=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return U(!0),function(){clearTimeout(q.current.setCaretTimeout),clearTimeout(q.current.focusTimeout)}},[]);var X=s,z=function(Te,Ue){var Oe=parseFloat(Ue);return{formattedValue:Te,value:Ue,floatValue:isNaN(Oe)?void 0:Oe}},ce=function(Te,Ue,Oe){Te.selectionStart===0&&Te.selectionEnd===Te.value.length||(vm(Te,Ue),q.current.setCaretTimeout=setTimeout(function(){Te.value===Oe&&Te.selectionStart!==Ue&&vm(Te,Ue)},0))},he=function(Te,Ue,Oe){return l5(Te,Ue,x(Te),Oe)},$=function(Te,Ue,Oe){var We=x(Ue),Et=Eme(Ue,C,Te,Oe,We,_,E);return Et=l5(Ue,Et,We),Et},Me=function(Te){var Ue=Te.formattedValue;Ue===void 0&&(Ue="");var Oe=Te.input,We=Te.source,Et=Te.event,vt=Te.numAsString,re;if(Oe){var J=Te.inputValue||Oe.value,ue=Tk(Oe);Oe.value=Ue,re=$(J,Ue,ue),re!==void 0&&ce(Oe,re,Ue)}Ue!==C&&H(z(Ue,vt),{event:Et,source:We})};I.useEffect(function(){var Te=B.current,Ue=Te.formattedValue,Oe=Te.numAsString;(C!==Ue||D!==Oe)&&H(z(C,D),{event:void 0,source:c_.props})},[C,D]);var Se=F.current?Tk(F.current):void 0,pe=typeof window<"u"?I.useLayoutEffect:I.useEffect;pe(function(){var Te=F.current;if(C!==B.current.formattedValue&&Te){var Ue=$(B.current.formattedValue,C,Se);Te.value=C,ce(Te,Ue,C)}},[C]);var xe=function(Te,Ue,Oe){var We=Ue.target,Et=P.current?vme(P.current,We.selectionEnd):dK(C,Te),vt=Object.assign(Object.assign({},Et),{lastValue:C}),re=o(Te,vt),J=X(re);if(re=o(J,void 0),f&&!f(z(J,re))){var ue=Ue.target,se=Tk(ue),be=$(Te,C,se);return ue.value=C,ce(ue,be,C),!1}return Me({formattedValue:J,numAsString:re,inputValue:Te,event:Ue,source:Oe,input:Ue.target}),!0},Ne=function(Te,Ue){Ue===void 0&&(Ue=0);var Oe=Te.selectionStart,We=Te.selectionEnd;P.current={selectionStart:Oe,selectionEnd:We+Ue}},Ge=function(Te){var Ue=Te.target,Oe=Ue.value,We=xe(Oe,Te,c_.event);We&&h(Te),P.current=void 0},$e=function(Te){var Ue=Te.target,Oe=Te.key,We=Ue.selectionStart,Et=Ue.selectionEnd,vt=Ue.value;vt===void 0&&(vt="");var re;Oe==="ArrowLeft"||Oe==="Backspace"?re=Math.max(We-1,0):Oe==="ArrowRight"?re=Math.min(We+1,vt.length):Oe==="Delete"&&(re=We);var J=0;Oe==="Delete"&&We===Et&&(J=1);var ue=Oe==="ArrowLeft"||Oe==="ArrowRight";if(re===void 0||We!==Et&&!ue){d(Te),Ne(Ue,J);return}var se=re;if(ue){var be=Oe==="ArrowLeft"?"left":"right";se=he(vt,re,be),se!==re&&Te.preventDefault()}else Oe==="Delete"&&!_(vt[re])?se=he(vt,re,"right"):Oe==="Backspace"&&!_(vt[re])&&(se=he(vt,re,"left"));se!==re&&ce(Ue,se,vt),d(Te),Ne(Ue,J)},ct=function(Te){var Ue=Te.target,Oe=function(){var We=Ue.selectionStart,Et=Ue.selectionEnd,vt=Ue.value;if(vt===void 0&&(vt=""),We===Et){var re=he(vt,We);re!==We&&ce(Ue,re,vt)}};Oe(),requestAnimationFrame(function(){Oe()}),m(Te),Ne(Ue)},At=function(Te){Te.persist&&Te.persist();var Ue=Te.target,Oe=Te.currentTarget;F.current=Ue,q.current.focusTimeout=setTimeout(function(){var We=Ue.selectionStart,Et=Ue.selectionEnd,vt=Ue.value;vt===void 0&&(vt="");var re=he(vt,We);re!==We&&!(We===0&&Et===vt.length)&&ce(Ue,re,vt),y(Object.assign(Object.assign({},Te),{currentTarget:Oe}))},0)},fe=function(Te){F.current=null,clearTimeout(q.current.focusTimeout),clearTimeout(q.current.setCaretTimeout),v(Te)},Ve=V&&_me()?"numeric":void 0,je=Object.assign({inputMode:Ve},T,{type:e,value:C,onChange:Ge,onKeyDown:$e,onMouseUp:ct,onFocus:At,onBlur:fe});if(n==="text")return r?ke.createElement(ke.Fragment,null,r(C,T)||null):ke.createElement("span",Object.assign({},T,{ref:a}),C);if(i){var ot=i;return ke.createElement(ot,Object.assign({},je,{ref:a}))}return ke.createElement("input",Object.assign({},je,{ref:a}))}function c5(t,e){var n=e.decimalScale,i=e.fixedDecimalScale,r=e.prefix;r===void 0&&(r="");var a=e.suffix;a===void 0&&(a="");var s=e.allowNegative,o=e.thousandsGroupStyle;if(o===void 0&&(o="thousand"),t===""||t==="-")return t;var l=r2(e),c=l.thousandSeparator,u=l.decimalSeparator,f=n!==0&&t.indexOf(".")!==-1||n&&i,h=rU(t,s),d=h.beforeDecimal,m=h.afterDecimal,y=h.addNegation;return n!==void 0&&(m=fK(m,n,!!i)),c&&(d=gme(d,c,o)),r&&(d=r+d),a&&(m=m+a),y&&(d="-"+d),t=d+(f&&u||"")+m,t}function r2(t){var e=t.decimalSeparator;e===void 0&&(e=".");var n=t.thousandSeparator,i=t.allowedDecimalSeparators;return n===!0&&(n=","),i||(i=[e,"."]),{decimalSeparator:e,thousandSeparator:n,allowedDecimalSeparators:i}}function Rme(t,e){t===void 0&&(t="");var n=new RegExp("(-)"),i=new RegExp("(-)(.)*(-)"),r=n.test(t),a=i.test(t);return t=t.replace(/-/g,""),r&&!a&&e&&(t="-"+t),t}function kme(t,e){return new RegExp("(^-)|[0-9]|"+uK(t),"g")}function Dme(t,e,n){return t===""?!0:!e?.match(/\d/)&&!n?.match(/\d/)&&typeof t=="string"&&!isNaN(Number(t))}function Ome(t,e,n){var i;e===void 0&&(e=Sme(t));var r=n.allowNegative,a=n.prefix;a===void 0&&(a="");var s=n.suffix;s===void 0&&(s="");var o=n.decimalScale,l=e.from,c=e.to,u=c.start,f=c.end,h=r2(n),d=h.allowedDecimalSeparators,m=h.decimalSeparator,y=t[f]===m;if(u_(t)&&(t===a||t===s)&&e.lastValue==="")return t;if(f-u===1&&d.indexOf(t[u])!==-1){var v=o===0?"":m;t=t.substring(0,u)+v+t.substring(u+1,t.length)}var g=function(F,q,X){var z=!1,ce=!1;a.startsWith("-")?z=!1:F.startsWith("--")?(z=!1,ce=!0):s.startsWith("-")&&F.length===s.length?z=!1:F[0]==="-"&&(z=!0);var he=z?1:0;return ce&&(he=2),he&&(F=F.substring(he),q-=he,X-=he),{value:F,start:q,end:X,hasNegation:z}},x=g(t,u,f),_=x.hasNegation;i=x,t=i.value,u=i.start,f=i.end;var E=g(e.lastValue,l.start,l.end),T=E.start,w=E.end,A=E.value,C=t.substring(u,f);t.length&&A.length&&(T>A.length-s.length||w<a.length)&&!(C&&s.startsWith(C))&&(t=A);var D=0;t.startsWith(a)?D+=a.length:u<a.length&&(D=u),t=t.substring(D),f-=D;var k=t.length,P=t.length-s.length;t.endsWith(s)?k=P:(f>P||f>t.length-s.length)&&(k=f),t=t.substring(0,k),t=Rme(_?"-"+t:t,r),t=(t.match(kme(m))||[]).join("");var B=t.indexOf(m);t=t.replace(new RegExp(uK(m),"g"),function(F,q){return q===B?".":""});var H=rU(t,r),G=H.beforeDecimal,V=H.afterDecimal,U=H.addNegation;return c.end-c.start<l.end-l.start&&G===""&&y&&!parseFloat(V)&&(t=U?"-":""),t}function Ime(t,e){var n=e.prefix;n===void 0&&(n="");var i=e.suffix;i===void 0&&(i="");var r=Array.from({length:t.length+1}).map(function(){return!0}),a=t[0]==="-";r.fill(!1,0,n.length+(a?1:0));var s=t.length;return r.fill(!1,s-i.length+1,s+1),r}function Nme(t){var e=r2(t),n=e.thousandSeparator,i=e.decimalSeparator,r=t.prefix;r===void 0&&(r="");var a=t.allowNegative;if(a===void 0&&(a=!0),n===i)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+i+` (default value for decimalSeparator is .)
     `);return r.startsWith("-")&&a&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+r+`
      allowNegative: `+a+`
    `),a=!1),Object.assign(Object.assign({},t),{allowNegative:a})}function Pme(t){t=Nme(t),t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle;var e=t.suffix,n=t.allowNegative,i=t.allowLeadingZeros,r=t.onKeyDown;r===void 0&&(r=Cd);var a=t.onBlur;a===void 0&&(a=Cd);var s=t.thousandSeparator,o=t.decimalScale,l=t.fixedDecimalScale,c=t.prefix;c===void 0&&(c="");var u=t.defaultValue,f=t.value,h=t.valueIsNumericString,d=t.onValueChange,m=lK(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),y=r2(t),v=y.decimalSeparator,g=y.allowedDecimalSeparators,x=function(U){return c5(U,t)},_=function(U,F){return Ome(U,F,t)},E=V0(f)?u:f,T=h??Dme(E,c,e);V0(f)?V0(u)||(T=T||typeof u=="number"):T=T||typeof f=="number";var w=function(U){return cK(U)?U:(typeof U=="number"&&(U=hK(U)),T&&typeof o=="number"?o5(U,o,!!l):U)},A=pK(w(f),w(u),!!T,x,_,d),C=A[0],D=C.numAsString,k=C.formattedValue,P=A[1],B=function(U){var F=U.target,q=U.key,X=F.selectionStart,z=F.selectionEnd,ce=F.value;if(ce===void 0&&(ce=""),(q==="Backspace"||q==="Delete")&&z<c.length){U.preventDefault();return}if(X!==z){r(U);return}q==="Backspace"&&ce[0]==="-"&&X===c.length+1&&n&&vm(F,1),o&&l&&(q==="Backspace"&&ce[X-1]===v?(vm(F,X-1),U.preventDefault()):q==="Delete"&&ce[X]===v&&U.preventDefault()),g?.includes(q)&&ce[X]===v&&vm(F,X+1);var he=s===!0?",":s;q==="Backspace"&&ce[X-1]===he&&vm(F,X-1),q==="Delete"&&ce[X]===he&&vm(F,X+1),r(U)},H=function(U){var F=D;if(F.match(/\d/g)||(F=""),i||(F=yme(F)),l&&o&&(F=o5(F,o,l)),F!==D){var q=c5(F,t);P({formattedValue:q,value:F,floatValue:parseFloat(F)},{event:U,source:c_.event})}a(U)},G=function(U){return U===v?!0:u_(U)},V=function(U){var F=U.currentValue,q=U.lastValue,X=U.formattedValue,z=U.currentValueIndex,ce=U.formattedValueIndex,he=F[z],$=X[ce],Me=dK(q,F),Se=Me.to,pe=function(xe){return _(xe).indexOf(".")+c.length};return f===0&&l&&o&&F[Se.start]===v&&pe(F)<z&&pe(X)>ce?!1:z>=Se.start&&z<Se.end&&g&&g.includes(he)&&$===v?!0:he===$};return Object.assign(Object.assign({},m),{value:k,valueIsNumericString:!1,isValidInputCharacter:G,isCharacterSame:V,onValueChange:P,format:x,removeFormatting:_,getCaretBoundary:function(U){return Ime(U,t)},onKeyDown:B,onBlur:H})}function Lme(t){var e=Pme(t);return ke.createElement(Cme,Object.assign({},e))}function u5({direction:t,style:e,...n}){return R.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:t==="up"?"rotate(180deg)":void 0,...e},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:R.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var wN={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Ume=/^(0\.0*|-0(\.0*)?)$/,Bme=/^-?0\d+(\.\d+)?\.?$/,Fme=/\.\d*0$/;function EN(t){return typeof t=="string"&&t!==""&&!Number.isNaN(Number(t))}function Ak(t){return typeof t=="number"?t<Number.MAX_SAFE_INTEGER:t===""||EN(t)&&Number(t)<Number.MAX_SAFE_INTEGER}function zme(t){return t.toString().replace(".","").length}function jme(t,e){return(typeof t=="number"?t<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(t)))&&!Number.isNaN(t)&&zme(e)<14&&e!==""}function f5(t,e,n){if(t===void 0)return!0;const i=e===void 0||t>=e,r=n===void 0||t<=n;return i&&r}const Hme={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Vme=(t,{size:e})=>({controls:{"--ni-chevron-size":ii(e,"ni-chevron-size")}});function Gme(t,e,n){const i=t.toString().replace(/^0+/,""),r=parseFloat(i);return Number.isNaN(r)?i:r>Number.MAX_SAFE_INTEGER?e!==void 0?e:i:fc(r,n,e)}const Tg=Qt((t,e)=>{const n=Ot("NumberInput",Hme,t),{className:i,classNames:r,styles:a,unstyled:s,vars:o,onChange:l,onValueChange:c,value:u,defaultValue:f,max:h,min:d,step:m,hideControls:y,rightSection:v,isAllowed:g,clampBehavior:x,onBlur:_,allowDecimal:E,decimalScale:T,onKeyDown:w,onKeyDownCapture:A,handlersRef:C,startValue:D,disabled:k,rightSectionPointerEvents:P,allowNegative:B,readOnly:H,size:G,rightSectionWidth:V,stepHoldInterval:U,stepHoldDelay:F,allowLeadingZeros:q,withKeyboardEvents:X,trimLeadingZeroesOnBlur:z,attributes:ce,...he}=n,$=xn({name:"NumberInput",classes:wN,props:n,classNames:r,styles:a,unstyled:s,attributes:ce,vars:o,varsResolver:Vme}),{resolvedClassNames:Me,resolvedStyles:Se}=ev({classNames:r,styles:a,props:n}),[pe,xe]=Ml({value:u,defaultValue:f,finalValue:"",onChange:l}),Ne=F!==void 0&&U!==void 0,Ge=I.useRef(null),$e=I.useRef(null),ct=I.useRef(0),At=(ue,se)=>{se.source==="event"&&xe(jme(ue.floatValue,ue.value)&&!Ume.test(ue.value)&&!(q&&Bme.test(ue.value))&&!Fme.test(ue.value)?ue.floatValue:ue.value),c?.(ue,se)},fe=ue=>{const se=String(ue).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return se?Math.max(0,(se[1]?se[1].length:0)-(se[2]?+se[2]:0)):0},Ve=ue=>{Ge.current&&typeof ue<"u"&&Ge.current.setSelectionRange(ue,ue)},je=I.useRef(BT);je.current=()=>{if(!Ak(pe))return;let ue;const se=fe(pe),be=fe(m),Z=Math.max(se,be),Ye=10**Z;if(!EN(pe)&&(typeof pe!="number"||Number.isNaN(pe)))ue=fc(D,d,h);else if(h!==void 0){const mt=(Math.round(Number(pe)*Ye)+Math.round(m*Ye))/Ye;ue=mt<=h?mt:h}else ue=(Math.round(Number(pe)*Ye)+Math.round(m*Ye))/Ye;const tt=ue.toFixed(Z);xe(parseFloat(tt)),c?.({floatValue:parseFloat(tt),formattedValue:tt,value:tt},{source:"increment"}),setTimeout(()=>Ve(Ge.current?.value.length),0)};const ot=I.useRef(BT);ot.current=()=>{if(!Ak(pe))return;let ue;const se=d!==void 0?d:B?Number.MIN_SAFE_INTEGER:0,be=fe(pe),Z=fe(m),Ye=Math.max(be,Z),tt=10**Ye;if(!EN(pe)&&typeof pe!="number"||Number.isNaN(pe))ue=fc(D,se,h);else{const Fe=(Math.round(Number(pe)*tt)-Math.round(m*tt))/tt;ue=se!==void 0&&Fe<se?se:Fe}const mt=ue.toFixed(Ye);xe(parseFloat(mt)),c?.({floatValue:parseFloat(mt),formattedValue:mt,value:mt},{source:"decrement"}),setTimeout(()=>Ve(Ge.current?.value.length),0)};const Te=ue=>{w?.(ue),!(H||!X)&&(ue.key==="ArrowUp"&&(ue.preventDefault(),je.current?.()),ue.key==="ArrowDown"&&(ue.preventDefault(),ot.current?.()))},Ue=ue=>{if(A?.(ue),ue.key==="Backspace"){const se=Ge.current;se&&se.selectionStart===0&&se.selectionStart===se.selectionEnd&&(ue.preventDefault(),window.setTimeout(()=>Ve(0),0))}},Oe=ue=>{let se=pe;x==="blur"&&typeof se=="number"&&(se=fc(se,d,h)),z&&typeof se=="string"&&fe(se)<15&&(se=Gme(se,h,d)),pe!==se&&xe(se),_?.(ue)};PT(C,{increment:je.current,decrement:ot.current});const We=ue=>{ue?je.current?.():ot.current?.(),ct.current+=1},Et=ue=>{if(We(ue),Ne){const se=typeof U=="number"?U:U(ct.current);$e.current=window.setTimeout(()=>Et(ue),se)}},vt=(ue,se)=>{ue.preventDefault(),Ge.current?.focus(),We(se),Ne&&($e.current=window.setTimeout(()=>Et(se),F))},re=()=>{$e.current&&window.clearTimeout($e.current),$e.current=null,ct.current=0},J=R.jsxs("div",{...$("controls"),children:[R.jsx(df,{...$("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof pe=="number"&&h!==void 0&&pe>=h,mod:{direction:"up"},onMouseDown:ue=>ue.preventDefault(),onPointerDown:ue=>{vt(ue,!0)},onPointerUp:re,onPointerLeave:re,children:R.jsx(u5,{direction:"up"})}),R.jsx(df,{...$("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof pe=="number"&&d!==void 0&&pe<=d,mod:{direction:"down"},onMouseDown:ue=>ue.preventDefault(),onPointerDown:ue=>{vt(ue,!1)},onPointerUp:re,onPointerLeave:re,children:R.jsx(u5,{direction:"down"})})]});return R.jsx(Mu,{component:Lme,allowNegative:B,className:ns(wN.root,i),size:G,...he,readOnly:H,disabled:k,value:pe,getInputRef:As(e,Ge),onValueChange:At,rightSection:y||H||!Ak(pe)?v:v||J,classNames:Me,styles:Se,unstyled:s,__staticSelector:"NumberInput",decimalScale:E?T:0,onKeyDown:Te,onKeyDownCapture:Ue,rightSectionPointerEvents:P??(k?"none":void 0),rightSectionWidth:V??`var(--ni-right-section-width-${G||"sm"})`,allowLeadingZeros:q,onBlur:Oe,attributes:ce,isAllowed:ue=>x==="strict"?g?g(ue)&&f5(ue.floatValue,d,h):f5(ue.floatValue,d,h):g?g(ue):!0})});Tg.classes={...Mu.classes,...wN};Tg.displayName="@mantine/core/NumberInput";const[Wme,mK]=Eu("Progress.Root component was not found in tree");var rS={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const aU=Qt((t,e)=>{const{classNames:n,className:i,style:r,styles:a,vars:s,...o}=Ot("ProgressLabel",null,t),l=mK();return R.jsx(et,{ref:e,...l.getStyles("label",{className:i,style:r,classNames:n,styles:a}),...o})});aU.classes=rS;aU.displayName="@mantine/core/ProgressLabel";const qme=(t,{size:e,radius:n,transitionDuration:i})=>({root:{"--progress-size":ii(e,"progress-size"),"--progress-radius":n===void 0?void 0:Qr(n),"--progress-transition-duration":typeof i=="number"?`${i}ms`:void 0}}),a2=Qt((t,e)=>{const n=Ot("ProgressRoot",null,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,autoContrast:c,transitionDuration:u,attributes:f,...h}=n,d=xn({name:"Progress",classes:rS,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:f,vars:l,varsResolver:qme});return R.jsx(Wme,{value:{getStyles:d,autoContrast:c},children:R.jsx(et,{ref:e,...d("root"),...h})})});a2.classes=rS;a2.displayName="@mantine/core/ProgressRoot";const Xme={withAria:!0},s2=Qt((t,e)=>{const{classNames:n,className:i,style:r,styles:a,vars:s,value:o,withAria:l,color:c,striped:u,animated:f,mod:h,...d}=Ot("ProgressSection",Xme,t),m=mK(),y=Da(),v=l?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":o,"aria-valuetext":`${o}%`}:{};return R.jsx(et,{ref:e,...m.getStyles("section",{className:i,classNames:n,styles:a,style:r}),...d,...v,mod:[{striped:u||f,animated:f},h],__vars:{"--progress-section-width":`${o}%`,"--progress-section-color":Zr(c,y),"--progress-label-color":BC(m.autoContrast,y)?J_({color:c,theme:y,autoContrast:m.autoContrast}):void 0}})});s2.classes=rS;s2.displayName="@mantine/core/ProgressSection";const pf=Qt((t,e)=>{const n=Ot("Progress",null,t),{value:i,classNames:r,styles:a,vars:s,color:o,striped:l,animated:c,"aria-label":u,...f}=n,{resolvedClassNames:h,resolvedStyles:d}=ev({classNames:r,styles:a,props:n});return R.jsx(a2,{ref:e,classNames:h,styles:d,vars:s,...f,children:R.jsx(s2,{value:i,color:o,striped:l,animated:c,"aria-label":u})})});pf.classes=rS;pf.displayName="@mantine/core/Progress";pf.Section=s2;pf.Root=a2;pf.Label=aU;const Yme={duration:100,transition:"fade"};function h5(t,e){return{...Yme,...e,...t}}function $me({offset:t,position:e,defaultOpened:n}){const[i,r]=I.useState(n),a=I.useRef(null),{x:s,y:o,elements:l,refs:c,update:u,placement:f}=y4({placement:e,middleware:[p4({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=f.includes("right")?t:e.includes("left")?t*-1:0,d=f.includes("bottom")?t:e.includes("top")?t*-1:0,m=I.useCallback(({clientX:y,clientY:v})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:y,y:v,left:y+h,top:v+d,right:y,bottom:v}}})},[l.reference]);return I.useEffect(()=>{if(c.floating.current){const y=a.current;y.addEventListener("mousemove",m);const v=fh(c.floating.current);return v.forEach(g=>{g.addEventListener("scroll",u)}),()=>{y.removeEventListener("mousemove",m),v.forEach(g=>{g.removeEventListener("scroll",u)})}}},[l.reference,c.floating.current,u,m,i]),{handleMouseMove:m,x:s,y:o,opened:i,setOpened:r,boundaryRef:a,floating:c.setFloating}}var o2={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Kme={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:vf("popover")},Jme=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Qr(e),"--tooltip-bg":n?Zr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),sU=Qt((t,e)=>{const n=Ot("TooltipFloating",Kme,t),{children:i,refProp:r,withinPortal:a,style:s,className:o,classNames:l,styles:c,unstyled:u,radius:f,color:h,label:d,offset:m,position:y,multiline:v,zIndex:g,disabled:x,defaultOpened:_,variant:E,vars:T,portalProps:w,attributes:A,...C}=n,D=Da(),k=xn({name:"TooltipFloating",props:n,classes:o2,className:o,style:s,classNames:l,styles:c,unstyled:u,attributes:A,rootSelector:"tooltip",vars:T,varsResolver:Jme}),{handleMouseMove:P,x:B,y:H,opened:G,boundaryRef:V,floating:U,setOpened:F}=$me({offset:m,position:y,defaultOpened:_});if(!Eg(i))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const q=As(V,IC(i),e),X=i.props,z=he=>{X.onMouseEnter?.(he),P(he),F(!0)},ce=he=>{X.onMouseLeave?.(he),F(!1)};return R.jsxs(R.Fragment,{children:[R.jsx(ep,{...w,withinPortal:a,children:R.jsx(et,{...C,...k("tooltip",{style:{...s4(s,D),zIndex:g,display:!x&&G?"block":"none",top:(H&&Math.round(H))??"",left:(B&&Math.round(B))??""}}),variant:E,ref:U,mod:{multiline:v},children:d})}),I.cloneElement(i,{...X,[r]:q,onMouseEnter:z,onMouseLeave:ce})]})});sU.classes=o2;sU.displayName="@mantine/core/TooltipFloating";const gK=I.createContext(!1),Zme=gK.Provider,Qme=()=>I.useContext(gK),ege={openDelay:0,closeDelay:0};function oU(t){const{openDelay:e,closeDelay:n,children:i}=Ot("TooltipGroup",ege,t);return R.jsx(Zme,{value:!0,children:R.jsx(_he,{delay:{open:e,close:n},children:i})})}oU.displayName="@mantine/core/TooltipGroup";oU.extend=t=>t;function tge(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function nge(t){const e=tge(t.middlewares),n=[OY(t.offset)];return e.shift&&n.push(p4(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?VT():VT(e.flip)),n.push(IY({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?E1():E1(e.inline)):t.inline&&n.push(E1()),n}function ige(t){const[e,n]=I.useState(t.defaultOpened),r=typeof t.opened=="boolean"?t.opened:e,a=Qme(),s=yf(),o=I.useCallback(T=>{n(T),T&&g(s)},[s]),{x:l,y:c,context:u,refs:f,placement:h,middlewareData:{arrow:{x:d,y:m}={}}}=y4({strategy:t.strategy,placement:t.position,open:r,onOpenChange:o,middleware:nge(t),whileElementsMounted:bN}),{delay:y,currentId:v,setCurrentId:g}=She(u,{id:s}),{getReferenceProps:x,getFloatingProps:_}=Rhe([vhe(u,{enabled:t.events?.hover,delay:a?y:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),Che(u,{enabled:t.events?.focus,visibleOnly:!0}),Dhe(u,{role:"tooltip"}),The(u,{enabled:typeof t.opened>"u"})]);xc(()=>{t.onPositionChange?.(h)},[h]);const E=r&&v&&v!==s;return{x:l,y:c,arrowX:d,arrowY:m,reference:f.setReference,floating:f.setFloating,getFloatingProps:_,getReferenceProps:x,isGroupPhase:E,opened:r,placement:h}}const d5={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:vf("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},rge=(t,{radius:e,color:n,variant:i,autoContrast:r})=>{const a=t.variantColorResolver({theme:t,color:n||t.primaryColor,autoContrast:r,variant:i||"filled"});return{tooltip:{"--tooltip-radius":e===void 0?void 0:Qr(e),"--tooltip-bg":n?a.background:void 0,"--tooltip-color":n?a.color:void 0}}},Cr=Qt((t,e)=>{const n=Ot("Tooltip",d5,t),{children:i,position:r,refProp:a,label:s,openDelay:o,closeDelay:l,onPositionChange:c,opened:u,defaultOpened:f,withinPortal:h,radius:d,color:m,classNames:y,styles:v,unstyled:g,style:x,className:_,withArrow:E,arrowSize:T,arrowOffset:w,arrowRadius:A,arrowPosition:C,offset:D,transitionProps:k,multiline:P,events:B,zIndex:H,disabled:G,positionDependencies:V,onClick:U,onMouseEnter:F,onMouseLeave:q,inline:X,variant:z,keepMounted:ce,vars:he,portalProps:$,mod:Me,floatingStrategy:Se,middlewares:pe,autoContrast:xe,attributes:Ne,target:Ge,...$e}=Ot("Tooltip",d5,n),{dir:ct}=nv(),At=I.useRef(null),fe=ige({position:QY(ct,r),closeDelay:l,openDelay:o,onPositionChange:c,opened:u,defaultOpened:f,events:B,arrowRef:At,arrowOffset:w,offset:typeof D=="number"?D+(E?T/2:0):D,positionDependencies:[...V,Ge??i],inline:X,strategy:Se,middlewares:pe});I.useEffect(()=>{const Oe=Ge instanceof HTMLElement?Ge:typeof Ge=="string"?document.querySelector(Ge):Ge?.current||null;Oe&&fe.reference(Oe)},[Ge,fe]);const Ve=xn({name:"Tooltip",props:n,classes:o2,className:_,style:x,classNames:y,styles:v,unstyled:g,attributes:Ne,rootSelector:"tooltip",vars:he,varsResolver:rge});if(!Ge&&!Eg(i))return null;if(Ge){const Oe=h5(k,{duration:100,transition:"fade"});return R.jsx(R.Fragment,{children:R.jsx(ep,{...$,withinPortal:h,children:R.jsx(Mc,{...Oe,keepMounted:ce,mounted:!G&&!!fe.opened,duration:fe.isGroupPhase?10:Oe.duration,children:We=>R.jsxs(et,{...$e,"data-fixed":Se==="fixed"||void 0,variant:z,mod:[{multiline:P},Me],...fe.getFloatingProps({ref:fe.floating,className:Ve("tooltip").className,style:{...Ve("tooltip").style,...We,zIndex:H,top:fe.y??0,left:fe.x??0}}),children:[s,R.jsx(WT,{ref:At,arrowX:fe.arrowX,arrowY:fe.arrowY,visible:E,position:fe.placement,arrowSize:T,arrowOffset:w,arrowRadius:A,arrowPosition:C,...Ve("arrow")})]})})})})}const je=i,ot=je.props,Te=As(fe.reference,IC(je),e),Ue=h5(k,{duration:100,transition:"fade"});return R.jsxs(R.Fragment,{children:[R.jsx(ep,{...$,withinPortal:h,children:R.jsx(Mc,{...Ue,keepMounted:ce,mounted:!G&&!!fe.opened,duration:fe.isGroupPhase?10:Ue.duration,children:Oe=>R.jsxs(et,{...$e,"data-fixed":Se==="fixed"||void 0,variant:z,mod:[{multiline:P},Me],...fe.getFloatingProps({ref:fe.floating,className:Ve("tooltip").className,style:{...Ve("tooltip").style,...Oe,zIndex:H,top:fe.y??0,left:fe.x??0}}),children:[s,R.jsx(WT,{ref:At,arrowX:fe.arrowX,arrowY:fe.arrowY,visible:E,position:fe.placement,arrowSize:T,arrowOffset:w,arrowRadius:A,arrowPosition:C,...Ve("arrow")})]})})}),I.cloneElement(je,fe.getReferenceProps({onClick:U,onMouseEnter:F,onMouseLeave:q,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:ns(_,ot.className),...ot,[a]:Te}))]})});Cr.classes=o2;Cr.displayName="@mantine/core/Tooltip";Cr.Floating=sU;Cr.Group=oU;const age={withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},cv=Qt((t,e)=>{const n=Ot("Select",age,t),{classNames:i,styles:r,unstyled:a,vars:s,dropdownOpened:o,defaultDropdownOpened:l,onDropdownClose:c,onDropdownOpen:u,onFocus:f,onBlur:h,onClick:d,onChange:m,data:y,value:v,defaultValue:g,selectFirstOptionOnChange:x,onOptionSubmit:_,comboboxProps:E,readOnly:T,disabled:w,filter:A,limit:C,withScrollArea:D,maxDropdownHeight:k,size:P,searchable:B,rightSection:H,checkIconPosition:G,withCheckIcon:V,nothingFoundMessage:U,name:F,form:q,searchValue:X,defaultSearchValue:z,onSearchChange:ce,allowDeselect:he,error:$,rightSectionPointerEvents:Me,id:Se,clearable:pe,clearButtonProps:xe,hiddenInputProps:Ne,renderOption:Ge,onClear:$e,autoComplete:ct,scrollAreaProps:At,__defaultRightSection:fe,__clearSection:Ve,__clearable:je,chevronColor:ot,autoSelectOnBlur:Te,attributes:Ue,...Oe}=n,We=I.useMemo(()=>zde(y),[y]),Et=I.useMemo(()=>M$(We),[We]),vt=yf(Se),[re,J,ue]=Ml({value:v,defaultValue:g,finalValue:null,onChange:m}),se=typeof re=="string"?Et[re]:void 0,be=Sle(se),[Z,Ye,tt]=Ml({value:X,defaultValue:z,finalValue:se?se.label:"",onChange:ce}),mt=D$({opened:o,defaultOpened:l,onDropdownOpen:()=>{u?.(),mt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{c?.(),setTimeout(mt.resetSelectedOption,0)}}),Fe=ht=>{Ye(ht),mt.resetSelectedOption()},{resolvedClassNames:rt,resolvedStyles:Je}=ev({props:n,styles:r,classNames:i});I.useEffect(()=>{x&&mt.selectFirstOption()},[x,Z]),I.useEffect(()=>{v===null&&Fe(""),typeof v=="string"&&se&&(be?.value!==se.value||be?.label!==se.label)&&Fe(se.label)},[v,se]),I.useEffect(()=>{!ue&&!tt&&Fe(typeof re=="string"&&Et[re]?.label||"")},[y,re]);const Xt=R.jsx(pr.ClearButton,{...xe,onClear:()=>{J(null,null),Fe(""),$e?.()}}),Nt=pe&&!!re&&!w&&!T;return R.jsxs(R.Fragment,{children:[R.jsxs(pr,{store:mt,__staticSelector:"Select",classNames:rt,styles:Je,unstyled:a,readOnly:T,size:P,attributes:Ue,onOptionSubmit:ht=>{_?.(ht);const zt=he&&Et[ht].value===re?null:Et[ht],Re=zt?zt.value:null;Re!==re&&J(Re,zt),!ue&&Fe(typeof Re=="string"&&zt?.label||""),mt.closeDropdown()},...E,children:[R.jsx(pr.Target,{targetType:B?"input":"button",autoComplete:ct,children:R.jsx(Mu,{id:vt,ref:e,__defaultRightSection:R.jsx(pr.Chevron,{size:P,error:$,unstyled:a,color:ot}),__clearSection:Xt,__clearable:Nt,rightSection:H,rightSectionPointerEvents:Me||(Nt?"all":"none"),...Oe,size:P,__staticSelector:"Select",disabled:w,readOnly:T||!B,value:Z,onChange:ht=>{Fe(ht.currentTarget.value),mt.openDropdown(),x&&mt.selectFirstOption()},onFocus:ht=>{B&&mt.openDropdown(),f?.(ht)},onBlur:ht=>{Te&&mt.clickSelectedOption(),B&&mt.closeDropdown(),Fe(re!=null&&Et[re]?.label||""),h?.(ht)},onClick:ht=>{B?mt.openDropdown():mt.toggleDropdown(),d?.(ht)},classNames:rt,styles:Je,unstyled:a,pointer:!B,error:$,attributes:Ue})}),R.jsx(fpe,{data:We,hidden:T||w,filter:A,search:Z,limit:C,hiddenWhenEmpty:!U,withScrollArea:D,maxDropdownHeight:k,filterOptions:!!B&&se?.label!==Z,value:re,checkIconPosition:G,withCheckIcon:V,nothingFoundMessage:U,unstyled:a,labelId:Oe.label?`${vt}-label`:void 0,"aria-label":Oe.label?void 0:Oe["aria-label"],renderOption:Ge,scrollAreaProps:At})]}),R.jsx(pr.HiddenInput,{value:re,name:F,form:q,disabled:w,...Ne})]})});cv.classes={...Mu.classes,...pr.classes};cv.displayName="@mantine/core/Select";const[sge,l2]=Eu("SliderProvider was not found in tree"),bK=I.forwardRef(({size:t,disabled:e,variant:n,color:i,thumbSize:r,radius:a,...s},o)=>{const{getStyles:l}=l2();return R.jsx(et,{tabIndex:-1,variant:n,size:t,ref:o,...l("root"),...s})});bK.displayName="@mantine/core/SliderRoot";const yK=I.forwardRef(({max:t,min:e,value:n,position:i,label:r,dragging:a,onMouseDown:s,onKeyDownCapture:o,labelTransitionProps:l,labelAlwaysOn:c,thumbLabel:u,onFocus:f,onBlur:h,showLabelOnHover:d,isHovered:m,children:y=null,disabled:v},g)=>{const{getStyles:x}=l2(),[_,E]=I.useState(!1),T=c||a||_||d&&m;return R.jsxs(et,{tabIndex:0,role:"slider","aria-label":u,"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":n,ref:g,__vars:{"--slider-thumb-offset":`${i}%`},...x("thumb",{focusable:!0}),mod:{dragging:a,disabled:v},onFocus:w=>{E(!0),typeof f=="function"&&f(w)},onBlur:w=>{E(!1),typeof h=="function"&&h(w)},onTouchStart:s,onMouseDown:s,onKeyDownCapture:o,onClick:w=>w.stopPropagation(),children:[y,R.jsx(Mc,{mounted:r!=null&&!!T,transition:"fade",duration:0,...l,children:w=>R.jsx("div",{...x("label",{style:w}),children:r})})]})});yK.displayName="@mantine/core/SliderThumb";function vK({value:t,min:e,max:n}){const i=(t-e)/(n-e)*100;return Math.min(Math.max(i,0),100)}function oge({mark:t,offset:e,value:n,inverted:i=!1}){return i?typeof e=="number"&&t.value<=e||t.value>=n:typeof e=="number"?t.value>=e&&t.value<=n:t.value<=n}function xK({marks:t,min:e,max:n,disabled:i,value:r,offset:a,inverted:s}){const{getStyles:o}=l2();if(!t)return null;const l=t.map((c,u)=>I.createElement(et,{...o("markWrapper"),__vars:{"--mark-offset":`${vK({value:c.value,min:e,max:n})}%`},key:u},R.jsx(et,{...o("mark"),mod:{filled:oge({mark:c,value:r,offset:a,inverted:s}),disabled:i}}),c.label&&R.jsx("div",{...o("markLabel"),children:c.label})));return R.jsx("div",{children:l})}xK.displayName="@mantine/core/SliderMarks";function _K({filled:t,children:e,offset:n,disabled:i,marksOffset:r,inverted:a,containerProps:s,...o}){const{getStyles:l}=l2();return R.jsx(et,{...l("trackContainer"),mod:{disabled:i},...s,children:R.jsxs(et,{...l("track"),mod:{inverted:a,disabled:i},children:[R.jsx(et,{mod:{inverted:a,disabled:i},__vars:{"--slider-bar-width":`calc(${t}% + 2 * var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),e,R.jsx(xK,{...o,offset:r,disabled:i,inverted:a})]})})}_K.displayName="@mantine/core/SliderTrack";function lge({value:t,containerWidth:e,min:n,max:i,step:r,precision:a}){const o=(e?Math.min(Math.max(t,0),e)/e:t)*(i-n),l=(o!==0?Math.round(o/r)*r:0)+n,c=Math.max(l,n);return a!==void 0?Number(c.toFixed(a)):c}function Cw(t,e){return parseFloat(t.toFixed(e))}function cge(t){if(!t)return 0;const e=t.toString().split(".");return e.length>1?e[1].length:0}function Ck(t,e){const i=[...e].sort((r,a)=>r.value-a.value).find(r=>r.value>t);return i?i.value:t}function Rk(t,e){const i=[...e].sort((r,a)=>a.value-r.value).find(r=>r.value<t);return i?i.value:t}function p5(t){const e=[...t].sort((n,i)=>n.value-i.value);return e.length>0?e[0].value:0}function m5(t){const e=[...t].sort((n,i)=>n.value-i.value);return e.length>0?e[e.length-1].value:100}var SK={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const uge={radius:"xl",min:0,max:100,step:1,marks:[],label:t=>t,labelTransitionProps:{transition:"fade",duration:0},thumbLabel:"",showLabelOnHover:!0,scale:t=>t,size:"md"},fge=(t,{size:e,color:n,thumbSize:i,radius:r})=>({root:{"--slider-size":ii(e,"slider-size"),"--slider-color":n?Zr(n,t):void 0,"--slider-radius":r===void 0?void 0:Qr(r),"--slider-thumb-size":i!==void 0?bt(i):"calc(var(--slider-size) * 2)"}}),c2=Qt((t,e)=>{const n=Ot("Slider",uge,t),{classNames:i,styles:r,value:a,onChange:s,onChangeEnd:o,size:l,min:c,max:u,domain:f,step:h,precision:d,defaultValue:m,name:y,marks:v,label:g,labelTransitionProps:x,labelAlwaysOn:_,thumbLabel:E,showLabelOnHover:T,thumbChildren:w,disabled:A,unstyled:C,scale:D,inverted:k,className:P,style:B,vars:H,hiddenInputProps:G,restrictToMarks:V,thumbProps:U,attributes:F,...q}=n,X=xn({name:"Slider",props:n,classes:SK,classNames:i,className:P,styles:r,style:B,attributes:F,vars:H,varsResolver:fge,unstyled:C}),{dir:z}=nv(),[ce,he]=I.useState(!1),[$,Me]=Ml({value:typeof a=="number"?fc(a,c,u):a,defaultValue:typeof m=="number"?fc(m,c,u):m,finalValue:fc(0,c,u),onChange:s}),Se=I.useRef($),pe=I.useRef(o);I.useEffect(()=>{pe.current=o},[o]);const xe=I.useRef(null),Ne=I.useRef(null),[Ge,$e]=f||[c,u],ct=vK({value:$,min:Ge,max:$e}),At=D($),fe=typeof g=="function"?g(At):g,Ve=d??cge(h),je=I.useCallback(({x:Et})=>{if(!A){const vt=lge({value:Et,min:Ge,max:$e,step:h,precision:Ve}),re=fc(vt,c,u);Me(V&&v?.length?h9(re,v.map(J=>J.value)):re),Se.current=re}},[A,c,u,Ge,$e,h,Ve,Me,v,V]),ot=I.useCallback(()=>{if(!A&&pe.current){const Et=V&&v?.length?h9(Se.current,v.map(vt=>vt.value)):Se.current;pe.current(Et)}},[A,v,V]),{ref:Te,active:Ue}=JL(je,{onScrubEnd:ot},z),Oe=I.useCallback(Et=>{!A&&pe.current&&pe.current(Et)},[A]),We=Et=>{if(!A)switch(Et.key){case"ArrowUp":{if(Et.preventDefault(),Ne.current?.focus(),V&&v){const re=Ck($,v);Me(re),Oe(re);break}const vt=Cw(Math.min(Math.max($+h,c),u),Ve);Me(vt),Oe(vt);break}case"ArrowRight":{if(Et.preventDefault(),Ne.current?.focus(),V&&v){const re=z==="rtl"?Rk($,v):Ck($,v);Me(re),Oe(re);break}const vt=Cw(Math.min(Math.max(z==="rtl"?$-h:$+h,c),u),Ve);Me(vt),Oe(vt);break}case"ArrowDown":{if(Et.preventDefault(),Ne.current?.focus(),V&&v){const re=Rk($,v);Me(re),Oe(re);break}const vt=Cw(Math.min(Math.max($-h,c),u),Ve);Me(vt),Oe(vt);break}case"ArrowLeft":{if(Et.preventDefault(),Ne.current?.focus(),V&&v){const re=z==="rtl"?Ck($,v):Rk($,v);Me(re),Oe(re);break}const vt=Cw(Math.min(Math.max(z==="rtl"?$+h:$-h,c),u),Ve);Me(vt),Oe(vt);break}case"Home":{if(Et.preventDefault(),Ne.current?.focus(),V&&v){Me(p5(v)),Oe(p5(v));break}Me(c),Oe(c);break}case"End":{if(Et.preventDefault(),Ne.current?.focus(),V&&v){Me(m5(v)),Oe(m5(v));break}Me(u),Oe(u);break}}};return R.jsx(sge,{value:{getStyles:X},children:R.jsxs(bK,{...q,ref:As(e,xe),onKeyDownCapture:We,onMouseDownCapture:()=>xe.current?.focus(),size:l,disabled:A,children:[R.jsx(_K,{inverted:k,offset:0,filled:ct,marks:v,min:Ge,max:$e,value:At,disabled:A,containerProps:{ref:Te,onMouseEnter:T?()=>he(!0):void 0,onMouseLeave:T?()=>he(!1):void 0},children:R.jsx(yK,{max:$e,min:Ge,value:At,position:ct,dragging:Ue,label:fe,ref:Ne,labelTransitionProps:x,labelAlwaysOn:_,thumbLabel:E,showLabelOnHover:T,isHovered:ce,disabled:A,...U,children:w})}),R.jsx("input",{type:"hidden",name:y,value:At,...G})]})})});c2.classes=SK;c2.displayName="@mantine/core/Slider";var wK={root:"m_6d731127"};const hge={gap:"md",align:"stretch",justify:"flex-start"},dge=(t,{gap:e,align:n,justify:i})=>({root:{"--stack-gap":Zd(e),"--stack-align":n,"--stack-justify":i}}),Xm=Qt((t,e)=>{const n=Ot("Stack",hge,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,align:c,justify:u,gap:f,variant:h,attributes:d,...m}=n,y=xn({name:"Stack",props:n,classes:wK,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:d,vars:l,varsResolver:dge});return R.jsx(et,{ref:e,...y("root"),variant:h,...m})});Xm.classes=wK;Xm.displayName="@mantine/core/Stack";const EK=I.createContext(null),pge=EK.Provider,mge=()=>I.useContext(EK),lU=Qt((t,e)=>{const{value:n,defaultValue:i,onChange:r,size:a,wrapperProps:s,children:o,readOnly:l,...c}=Ot("SwitchGroup",null,t),[u,f]=Ml({value:n,defaultValue:i,finalValue:[],onChange:r}),h=d=>{const m=d.currentTarget.value;!l&&f(u.includes(m)?u.filter(y=>y!==m):[...u,m])};return R.jsx(pge,{value:{value:u,onChange:h,size:a},children:R.jsx(ua.Wrapper,{size:a,ref:e,...s,...c,labelElement:"div",__staticSelector:"SwitchGroup",children:R.jsx(U$,{role:"group",children:o})})})});lU.classes=ua.Wrapper.classes;lU.displayName="@mantine/core/SwitchGroup";var MK={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const gge={labelPosition:"right",withThumbIndicator:!0},bge=(t,{radius:e,color:n,size:i})=>({root:{"--switch-radius":e===void 0?void 0:Qr(e),"--switch-height":ii(i,"switch-height"),"--switch-width":ii(i,"switch-width"),"--switch-thumb-size":ii(i,"switch-thumb-size"),"--switch-label-font-size":ii(i,"switch-label-font-size"),"--switch-track-label-padding":ii(i,"switch-track-label-padding"),"--switch-color":n?Zr(n,t):void 0}}),Rd=Qt((t,e)=>{const n=Ot("Switch",gge,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,color:c,label:u,offLabel:f,onLabel:h,id:d,size:m,radius:y,wrapperProps:v,thumbIcon:g,checked:x,defaultChecked:_,onChange:E,labelPosition:T,description:w,error:A,disabled:C,variant:D,rootRef:k,mod:P,withThumbIndicator:B,attributes:H,...G}=n,V=mge(),U=m||V?.size,F=xn({name:"Switch",props:n,classes:MK,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:H,vars:l,varsResolver:bge}),{styleProps:q,rest:X}=Z_(G),z=yf(d),ce=V?{checked:V.value.includes(X.value),onChange:V.onChange}:{},[he,$]=Ml({value:ce.checked??x,defaultValue:_,finalValue:!1});return R.jsxs(F4,{...F("root"),__staticSelector:"Switch",__stylesApiProps:n,id:z,size:U,labelPosition:T,label:u,description:w,error:A,disabled:C,bodyElement:"label",labelElement:"span",classNames:i,styles:s,unstyled:o,"data-checked":ce.checked||x||void 0,variant:D,ref:k,mod:P,...q,...v,children:[R.jsx("input",{...X,disabled:C,checked:he,"data-checked":ce.checked||x||void 0,onChange:Me=>{V?ce.onChange?.(Me):E?.(Me),$(Me.currentTarget.checked)},id:z,ref:e,type:"checkbox",role:"switch",...F("input")}),R.jsxs(et,{"aria-hidden":"true",component:"span",mod:{error:A,"label-position":T,"without-labels":!h&&!f},...F("track"),children:[R.jsx(et,{component:"span",mod:{"reduce-motion":!0,"with-thumb-indicator":B&&!g},...F("thumb"),children:g}),R.jsx("span",{...F("trackLabel"),children:he?h:f})]})]})});Rd.classes={...MK,...I$};Rd.displayName="@mantine/core/Switch";Rd.Group=lU;const[yge,vge]=Eu("Table component was not found in the tree");var aS={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function xge(t,e){if(!e)return;const n={};return e.columnBorder&&t.withColumnBorders&&(n["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(n["data-with-row-border"]=!0),e.striped&&t.striped&&(n["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(n["data-hover"]=!0),e.captionSide&&t.captionSide&&(n["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(n["data-sticky"]=!0),n}function Ag(t,e){const n=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,i=Qt((r,a)=>{const s=Ot(n,{},r),{classNames:o,className:l,style:c,styles:u,...f}=s,h=vge();return R.jsx(et,{component:t,ref:a,...xge(h,e),...h.getStyles(t,{className:l,classNames:o,style:c,styles:u,props:s}),...f})});return i.displayName=`@mantine/core/${n}`,i.classes=aS,i}const MN=Ag("th",{columnBorder:!0}),TK=Ag("td",{columnBorder:!0}),GM=Ag("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),AK=Ag("thead",{stickyHeader:!0}),CK=Ag("tbody"),RK=Ag("tfoot"),kK=Ag("caption",{captionSide:!0});function cU({data:t}){return R.jsxs(R.Fragment,{children:[t.caption&&R.jsx(kK,{children:t.caption}),t.head&&R.jsx(AK,{children:R.jsx(GM,{children:t.head.map((e,n)=>R.jsx(MN,{children:e},n))})}),t.body&&R.jsx(CK,{children:t.body.map((e,n)=>R.jsx(GM,{children:e.map((i,r)=>R.jsx(TK,{children:i},r))},n))}),t.foot&&R.jsx(RK,{children:R.jsx(GM,{children:t.foot.map((e,n)=>R.jsx(MN,{children:e},n))})})]})}cU.displayName="@mantine/core/TableDataRenderer";const _ge={type:"scrollarea"},Sge=(t,{minWidth:e,maxHeight:n,type:i})=>({scrollContainer:{"--table-min-width":bt(e),"--table-max-height":bt(n),"--table-overflow":i==="native"?"auto":void 0}}),uU=Qt((t,e)=>{const n=Ot("TableScrollContainer",_ge,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,children:c,minWidth:u,maxHeight:f,type:h,scrollAreaProps:d,attributes:m,...y}=n,v=xn({name:"TableScrollContainer",classes:aS,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:m,vars:l,varsResolver:Sge,rootSelector:"scrollContainer"});return R.jsx(et,{component:h==="scrollarea"?kc:"div",...h==="scrollarea"?f?{offsetScrollbars:"xy",...d}:{offsetScrollbars:"x",...d}:{},ref:e,...v("scrollContainer"),...y,children:R.jsx("div",{...v("scrollContainerInner"),children:c})})});uU.classes=aS;uU.displayName="@mantine/core/TableScrollContainer";const wge={withRowBorders:!0,verticalSpacing:7},Ege=(t,{layout:e,captionSide:n,horizontalSpacing:i,verticalSpacing:r,borderColor:a,stripedColor:s,highlightOnHoverColor:o,striped:l,highlightOnHover:c,stickyHeaderOffset:u,stickyHeader:f})=>({table:{"--table-layout":e,"--table-caption-side":n,"--table-horizontal-spacing":Zd(i),"--table-vertical-spacing":Zd(r),"--table-border-color":a?Zr(a,t):void 0,"--table-striped-color":l&&s?Zr(s,t):void 0,"--table-highlight-on-hover-color":c&&o?Zr(o,t):void 0,"--table-sticky-header-offset":f?bt(u):void 0}}),Ic=Qt((t,e)=>{const n=Ot("Table",wge,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,horizontalSpacing:c,verticalSpacing:u,captionSide:f,stripedColor:h,highlightOnHoverColor:d,striped:m,highlightOnHover:y,withColumnBorders:v,withRowBorders:g,withTableBorder:x,borderColor:_,layout:E,variant:T,data:w,children:A,stickyHeader:C,stickyHeaderOffset:D,mod:k,tabularNums:P,attributes:B,...H}=n,G=xn({name:"Table",props:n,className:r,style:a,classes:aS,classNames:i,styles:s,unstyled:o,attributes:B,rootSelector:"table",vars:l,varsResolver:Ege});return R.jsx(yge,{value:{getStyles:G,stickyHeader:C,striped:m===!0?"odd":m||void 0,highlightOnHover:y,withColumnBorders:v,withRowBorders:g,captionSide:f||"bottom"},children:R.jsx(et,{component:"table",variant:T,ref:e,mod:[{"data-with-table-border":x,"data-tabular-nums":P},k],...G("table"),...H,children:A||!!w&&R.jsx(cU,{data:w})})})});Ic.classes=aS;Ic.displayName="@mantine/core/Table";Ic.Td=TK;Ic.Th=MN;Ic.Tr=GM;Ic.Thead=AK;Ic.Tbody=CK;Ic.Tfoot=RK;Ic.Caption=kK;Ic.ScrollContainer=uU;Ic.DataRenderer=cU;const[Mge,fU]=Eu("Tabs component was not found in the tree");var sS={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",tab:"m_4ec4dce6",panel:"m_b0c91715",tabSection:"m_fc420b1f",tabLabel:"m_42bbd1ae","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const hU=Qt((t,e)=>{const n=Ot("TabsList",null,t),{children:i,className:r,grow:a,justify:s,classNames:o,styles:l,style:c,mod:u,...f}=n,h=fU();return R.jsx(et,{...f,...h.getStyles("list",{className:r,style:c,classNames:o,styles:l,props:n,variant:h.variant}),ref:e,role:"tablist",variant:h.variant,mod:[{grow:a,orientation:h.orientation,placement:h.orientation==="vertical"&&h.placement,inverted:h.inverted},u],"aria-orientation":h.orientation,__vars:{"--tabs-justify":s},children:i})});hU.classes=sS;hU.displayName="@mantine/core/TabsList";const dU=Qt((t,e)=>{const n=Ot("TabsPanel",null,t),{children:i,className:r,value:a,classNames:s,styles:o,style:l,mod:c,keepMounted:u,...f}=n,h=fU(),d=h.value===a,m=h.keepMounted||u||d?i:null;return R.jsx(et,{...f,...h.getStyles("panel",{className:r,classNames:s,styles:o,style:[l,d?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:h.orientation},c],role:"tabpanel",id:h.getPanelId(a),"aria-labelledby":h.getTabId(a),children:m})});dU.classes=sS;dU.displayName="@mantine/core/TabsPanel";const pU=Qt((t,e)=>{const n=Ot("TabsTab",null,t),{className:i,children:r,rightSection:a,leftSection:s,value:o,onClick:l,onKeyDown:c,disabled:u,color:f,style:h,classNames:d,styles:m,vars:y,mod:v,tabIndex:g,...x}=n,_=Da(),{dir:E}=nv(),T=fU(),w=o===T.value,A=D=>{T.onChange(T.allowTabDeactivation&&o===T.value?null:o),l?.(D)},C={classNames:d,styles:m,props:n};return R.jsxs(df,{...x,...T.getStyles("tab",{className:i,style:h,variant:T.variant,...C}),disabled:u,unstyled:T.unstyled,variant:T.variant,mod:[{active:w,disabled:u,orientation:T.orientation,inverted:T.inverted,placement:T.orientation==="vertical"&&T.placement},v],ref:e,role:"tab",id:T.getTabId(o),"aria-selected":w,tabIndex:g!==void 0?g:w||T.value===null?0:-1,"aria-controls":T.getPanelId(o),onClick:A,__vars:{"--tabs-color":f?Zr(f,_):void 0},onKeyDown:Ice({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:T.activateTabWithKeyboard,loop:T.loop,orientation:T.orientation||"horizontal",dir:E,onKeyDown:c}),children:[s&&R.jsx("span",{...T.getStyles("tabSection",C),"data-position":"left",children:s}),r&&R.jsx("span",{...T.getStyles("tabLabel",C),children:r}),a&&R.jsx("span",{...T.getStyles("tabSection",C),"data-position":"right",children:a})]})});pU.classes=sS;pU.displayName="@mantine/core/TabsTab";const g5="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Tge={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,variant:"default",placement:"left"},Age=(t,{radius:e,color:n,autoContrast:i})=>({root:{"--tabs-radius":Qr(e),"--tabs-color":Zr(n,t),"--tabs-text-color":BC(i,t)?J_({color:n,theme:t,autoContrast:i}):void 0}}),rh=Qt((t,e)=>{const n=Ot("Tabs",Tge,t),{defaultValue:i,value:r,onChange:a,orientation:s,children:o,loop:l,id:c,activateTabWithKeyboard:u,allowTabDeactivation:f,variant:h,color:d,radius:m,inverted:y,placement:v,keepMounted:g,classNames:x,styles:_,unstyled:E,className:T,style:w,vars:A,autoContrast:C,mod:D,attributes:k,...P}=n,B=yf(c),[H,G]=Ml({value:r,defaultValue:i,finalValue:null,onChange:a}),V=xn({name:"Tabs",props:n,classes:sS,className:T,style:w,classNames:x,styles:_,unstyled:E,attributes:k,vars:A,varsResolver:Age});return R.jsx(Mge,{value:{placement:v,value:H,orientation:s,id:B,loop:l,activateTabWithKeyboard:u,getTabId:f9(`${B}-tab`,g5),getPanelId:f9(`${B}-panel`,g5),onChange:G,allowTabDeactivation:f,variant:h,color:d,radius:m,inverted:y,keepMounted:g,unstyled:E,getStyles:V},children:R.jsx(et,{ref:e,id:B,variant:h,mod:[{orientation:s,inverted:s==="horizontal"&&y,placement:s==="vertical"&&v},D],...V("root"),...P,children:o})})});rh.classes=sS;rh.displayName="@mantine/core/Tabs";rh.Tab=pU;rh.Panel=dU;rh.List=hU;const Cg=Qt((t,e)=>{const n=Ot("TextInput",null,t);return R.jsx(Mu,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});Cg.classes=Mu.classes;Cg.displayName="@mantine/core/TextInput";const Cge=["h1","h2","h3","h4","h5","h6"],Rge=["xs","sm","md","lg","xl"];function kge(t,e){const n=e!==void 0?e:`h${t}`;return Cge.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:Rge.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}:{fontSize:bt(n),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var DK={root:"m_8a5d1357"};const Dge={order:1},Oge=(t,{order:e,size:n,lineClamp:i,textWrap:r})=>{const a=kge(e||1,n);return{root:{"--title-fw":a.fontWeight,"--title-lh":a.lineHeight,"--title-fz":a.fontSize,"--title-line-clamp":typeof i=="number"?i.toString():void 0,"--title-text-wrap":r}}},u2=Qt((t,e)=>{const n=Ot("Title",Dge,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,order:l,vars:c,size:u,variant:f,lineClamp:h,textWrap:d,mod:m,attributes:y,...v}=n,g=xn({name:"Title",props:n,classes:DK,className:r,style:a,classNames:i,styles:s,unstyled:o,attributes:y,vars:c,varsResolver:Oge});return[1,2,3,4,5,6].includes(l)?R.jsx(et,{...g("root"),component:`h${l}`,variant:f,ref:e,mod:[{order:l,"data-line-clamp":typeof h=="number"},m],size:u,...v}):null});u2.classes=DK;u2.displayName="@mantine/core/Title";const OK=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function Ige(t,e){return t.reduce((n,i)=>(n[i.position||e].push(i),n),OK.reduce((n,i)=>(n[i]=[],n),{}))}const b5={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Nge={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Pge({state:t,maxHeight:e,position:n,transitionDuration:i}){const[r,a]=n.split("-"),s=a==="center"?`${r}-center`:a,o={opacity:0,maxHeight:e,transform:b5[s],transitionDuration:`${i}ms, ${i}ms, ${i}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},l={opacity:1,transform:Nge[s]},c={opacity:0,maxHeight:0,transform:b5[s]};return{...o,...{entering:l,entered:l,exiting:c,exited:c}[t]}}function Lge(t,e){return typeof e=="number"?e:e===!1||t===!1?!1:t}const IK=I.forwardRef(({data:t,onHide:e,autoClose:n,...i},r)=>{const{autoClose:a,message:s,...o}=t,l=Lge(n,t.autoClose),c=I.useRef(-1),u=()=>window.clearTimeout(c.current),f=()=>{e(t.id),u()},h=()=>{typeof l=="number"&&(c.current=window.setTimeout(f,l))};return I.useEffect(()=>{t.onOpen?.(t)},[]),I.useEffect(()=>(h(),u),[l]),R.jsx(iU,{...i,...o,onClose:f,ref:r,onMouseEnter:u,onMouseLeave:h,children:s})});IK.displayName="@mantine/notifications/NotificationContainer";var NK={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Uge=kh,Bge={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:vf("overlay"),store:wg,withinPortal:!0},Fge=(t,{zIndex:e,containerWidth:n})=>({root:{"--notifications-z-index":e?.toString(),"--notifications-container-width":bt(n)}}),Ih=Qt((t,e)=>{const n=Ot("Notifications",Bge,t),{classNames:i,className:r,style:a,styles:s,unstyled:o,vars:l,position:c,autoClose:u,transitionDuration:f,containerWidth:h,notificationMaxHeight:d,limit:m,zIndex:y,store:v,portalProps:g,withinPortal:x,..._}=n,E=Da(),T=Rle(v),w=gle(),A=kC(),C=I.useRef({}),D=I.useRef(0),P=(E.respectReducedMotion?A:!1)?1:f,B=xn({name:"Notifications",classes:NK,props:n,className:r,style:a,classNames:i,styles:s,unstyled:o,vars:l,varsResolver:Fge});I.useEffect(()=>{v?.updateState(V=>({...V,limit:m||5,defaultPosition:c}))},[m,c]),xc(()=>{T.notifications.length>D.current&&setTimeout(()=>w(),0),D.current=T.notifications.length},[T.notifications]);const H=Ige(T.notifications,c),G=OK.reduce((V,U)=>(V[U]=H[U].map(({style:F,...q})=>R.jsx(Uge,{timeout:P,onEnter:()=>C.current[q.id].offsetHeight,nodeRef:{current:C.current[q.id]},children:X=>R.jsx(IK,{ref:z=>{z&&(C.current[q.id]=z)},data:q,onHide:z=>GX(z,v),autoClose:u,...B("notification",{style:{...Pge({state:X,position:U,transitionDuration:P,maxHeight:d}),...F}})})},q.id)),V),{});return R.jsxs(ep,{withinPortal:x,...g,children:[R.jsx(et,{...B("root"),"data-position":"top-center",ref:e,..._,children:R.jsx(vd,{children:G["top-center"]})}),R.jsx(et,{...B("root"),"data-position":"top-left",..._,children:R.jsx(vd,{children:G["top-left"]})}),R.jsx(et,{...B("root",{className:UT.classNames.fullWidth}),"data-position":"top-right",..._,children:R.jsx(vd,{children:G["top-right"]})}),R.jsx(et,{...B("root",{className:UT.classNames.fullWidth}),"data-position":"bottom-right",..._,children:R.jsx(vd,{children:G["bottom-right"]})}),R.jsx(et,{...B("root"),"data-position":"bottom-left",..._,children:R.jsx(vd,{children:G["bottom-left"]})}),R.jsx(et,{...B("root"),"data-position":"bottom-center",..._,children:R.jsx(vd,{children:G["bottom-center"]})})]})});Ih.classes=NK;Ih.displayName="@mantine/notifications/Notifications";Ih.show=_s.show;Ih.hide=_s.hide;Ih.update=_s.update;Ih.clean=_s.clean;Ih.cleanQueue=_s.cleanQueue;Ih.updateState=_s.updateState;/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rg="179",zge={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},jge={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},PK=0,TN=1,LK=2,Hge=3,UK=0,f2=1,M1=2,Zc=3,Al=0,ba=1,$r=2,lf=0,Ym=1,AN=2,CN=3,RN=4,BK=5,kd=100,FK=101,zK=102,jK=103,HK=104,VK=200,GK=201,WK=202,qK=203,qT=204,XT=205,XK=206,YK=207,$K=208,KK=209,JK=210,ZK=211,QK=212,eJ=213,tJ=214,YT=0,$T=1,KT=2,og=3,JT=4,ZT=5,QT=6,eA=7,oS=0,nJ=1,iJ=2,cf=0,rJ=1,aJ=2,sJ=3,mU=4,oJ=5,lJ=6,cJ=7,f_="attached",gU="detached",tp=300,mf=301,np=302,xy=303,h_=304,uv=306,ip=1e3,ga=1001,_y=1002,es=1003,h2=1004,Vge=1004,Tm=1005,Gge=1005,Wi=1006,G0=1007,Wge=1007,dc=1008,kN=1008,yo=1009,d2=1010,p2=1011,Sy=1012,fv=1013,Tc=1014,vr=1015,Za=1016,m2=1017,g2=1018,wy=1020,bU=35902,yU=1021,vU=1022,Jr=1023,Ey=1026,My=1027,Nh=1028,hv=1029,b2=1030,lS=1031,qge=1032,dv=1033,T1=33776,A1=33777,C1=33778,R1=33779,tA=35840,nA=35841,iA=35842,rA=35843,aA=36196,sA=37492,oA=37496,lA=37808,cA=37809,uA=37810,fA=37811,hA=37812,dA=37813,pA=37814,mA=37815,gA=37816,bA=37817,yA=37818,vA=37819,xA=37820,_A=37821,k1=36492,SA=36494,wA=36495,xU=36283,EA=36284,MA=36285,TA=36286,uJ=2200,fJ=2201,hJ=2202,Ty=2300,Ay=2301,WM=2302,Am=2400,Cm=2401,d_=2402,y2=2500,_U=2501,dJ=0,SU=1,AA=2,pJ=3200,mJ=3201,Xge=3202,Yge=3203,up=0,gJ=1,au="",gs="srgb",_u="srgb-linear",p_="linear",sr="srgb",$ge=0,pm=7680,Kge=7681,Jge=7682,Zge=7683,Qge=34055,ebe=34056,tbe=5386,nbe=512,ibe=513,rbe=514,abe=515,sbe=516,obe=517,lbe=518,DN=519,bJ=512,yJ=513,vJ=514,wU=515,xJ=516,_J=517,SJ=518,wJ=519,m_=35044,CA=35048,cbe=35040,ube=35045,fbe=35049,hbe=35041,dbe=35046,pbe=35050,mbe=35042,gbe="100",ON="300 es",ml=2e3,Cy=2001,bbe={COMPUTE:"compute",RENDER:"render"},ybe={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},vbe={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let _f=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const Us=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let y5=1234567;const $m=Math.PI/180,Ry=180/Math.PI;function _l(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Us[t&255]+Us[t>>8&255]+Us[t>>16&255]+Us[t>>24&255]+"-"+Us[e&255]+Us[e>>8&255]+"-"+Us[e>>16&15|64]+Us[e>>24&255]+"-"+Us[n&63|128]+Us[n>>8&255]+"-"+Us[n>>16&255]+Us[n>>24&255]+Us[i&255]+Us[i>>8&255]+Us[i>>16&255]+Us[i>>24&255]).toLowerCase()}function kn(t,e,n){return Math.max(e,Math.min(n,t))}function EU(t,e){return(t%e+e)%e}function xbe(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function _be(t,e,n){return t!==e?(n-t)/(e-t):0}function D1(t,e,n){return(1-n)*t+n*e}function Sbe(t,e,n,i){return D1(t,e,1-Math.exp(-n*i))}function wbe(t,e=1){return e-Math.abs(EU(t,e*2)-e)}function Ebe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Mbe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Tbe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Abe(t,e){return t+Math.random()*(e-t)}function Cbe(t){return t*(.5-Math.random())}function Rbe(t){t!==void 0&&(y5=t);let e=y5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function kbe(t){return t*$m}function Dbe(t){return t*Ry}function Obe(t){return(t&t-1)===0&&t!==0}function Ibe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Nbe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Pbe(t,e,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((e+i)/2),u=s((e+i)/2),f=a((e-i)/2),h=s((e-i)/2),d=a((i-e)/2),m=s((i-e)/2);switch(r){case"XYX":t.set(o*u,l*f,l*h,o*c);break;case"YZY":t.set(l*h,o*u,l*f,o*c);break;case"ZXZ":t.set(l*f,l*h,o*u,o*c);break;case"XZX":t.set(o*u,l*m,l*d,o*c);break;case"YXY":t.set(l*d,o*u,l*m,o*c);break;case"ZYZ":t.set(l*m,l*d,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ho(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function $n(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const pc={DEG2RAD:$m,RAD2DEG:Ry,generateUUID:_l,clamp:kn,euclideanModulo:EU,mapLinear:xbe,inverseLerp:_be,lerp:D1,damp:Sbe,pingpong:wbe,smoothstep:Ebe,smootherstep:Mbe,randInt:Tbe,randFloat:Abe,randFloatSpread:Cbe,seededRandom:Rbe,degToRad:kbe,radToDeg:Dbe,isPowerOfTwo:Obe,ceilPowerOfTwo:Ibe,floorPowerOfTwo:Nbe,setQuaternionFromProperEuler:Pbe,normalize:$n,denormalize:ho};class ft{constructor(e=0,n=0){ft.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=kn(this.x,e.x,n.x),this.y=kn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=kn(this.x,e,n),this.y=kn(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(kn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(kn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Hn{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,a,s,o){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const h=a[s+0],d=a[s+1],m=a[s+2],y=a[s+3];if(o===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(o===1){e[n+0]=h,e[n+1]=d,e[n+2]=m,e[n+3]=y;return}if(f!==y||l!==h||c!==d||u!==m){let v=1-o;const g=l*h+c*d+u*m+f*y,x=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const T=Math.sqrt(_),w=Math.atan2(T,g*x);v=Math.sin(v*w)/T,o=Math.sin(o*w)/T}const E=o*x;if(l=l*v+h*E,c=c*v+d*E,u=u*v+m*E,f=f*v+y*E,v===1-o){const T=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=T,c*=T,u*=T,f*=T}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,i,r,a,s){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=a[s],h=a[s+1],d=a[s+2],m=a[s+3];return e[n]=o*m+u*f+l*d-c*h,e[n+1]=l*m+u*h+c*f-o*d,e[n+2]=c*m+u*d+o*h-l*f,e[n+3]=u*m-o*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),f=o(a/2),h=l(i/2),d=l(r/2),m=l(a/2);switch(s){case"XYZ":this._x=h*u*f+c*d*m,this._y=c*d*f-h*u*m,this._z=c*u*m+h*d*f,this._w=c*u*f-h*d*m;break;case"YXZ":this._x=h*u*f+c*d*m,this._y=c*d*f-h*u*m,this._z=c*u*m-h*d*f,this._w=c*u*f+h*d*m;break;case"ZXY":this._x=h*u*f-c*d*m,this._y=c*d*f+h*u*m,this._z=c*u*m+h*d*f,this._w=c*u*f-h*d*m;break;case"ZYX":this._x=h*u*f-c*d*m,this._y=c*d*f+h*u*m,this._z=c*u*m-h*d*f,this._w=c*u*f+h*d*m;break;case"YZX":this._x=h*u*f+c*d*m,this._y=c*d*f+h*u*m,this._z=c*u*m-h*d*f,this._w=c*u*f-h*d*m;break;case"XZY":this._x=h*u*f-c*d*m,this._y=c*d*f-h*u*m,this._z=c*u*m+h*d*f,this._w=c*u*f+h*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],a=n[8],s=n[1],o=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=i+o+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(a-c)*d,this._z=(s-r)*d}else if(i>o&&i>f){const d=2*Math.sqrt(1+i-o-f);this._w=(u-l)/d,this._x=.25*d,this._y=(r+s)/d,this._z=(a+c)/d}else if(o>f){const d=2*Math.sqrt(1+o-i-f);this._w=(a-c)/d,this._x=(r+s)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-i-o);this._w=(s-r)/d,this._x=(a+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(kn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,a=e._z,s=e._w,o=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+s*o+r*c-a*l,this._y=r*u+s*l+a*o-i*c,this._z=a*u+s*c+i*l-r*o,this._w=s*u-i*o-r*l-a*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,s=this._w;let o=s*e._w+i*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=i,this._y=r,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const d=1-n;return this._w=d*s+n*this._w,this._x=d*i+n*this._x,this._y=d*r+n*this._y,this._z=d*a+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=s*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=a*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,n=0,i=0){Y.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(v5.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(v5.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*r,this.y=a[1]*n+a[4]*i+a[7]*r,this.z=a[2]*n+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*n+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*n+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*n+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,a=e.x,s=e.y,o=e.z,l=e.w,c=2*(s*r-o*i),u=2*(o*n-a*r),f=2*(a*i-s*n);return this.x=n+l*c+s*f-o*u,this.y=i+l*u+o*c-a*f,this.z=r+l*f+a*u-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r,this.y=a[1]*n+a[5]*i+a[9]*r,this.z=a[2]*n+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=kn(this.x,e.x,n.x),this.y=kn(this.y,e.y,n.y),this.z=kn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=kn(this.x,e,n),this.y=kn(this.y,e,n),this.z=kn(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(kn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,a=e.z,s=n.x,o=n.y,l=n.z;return this.x=r*l-a*o,this.y=a*s-i*l,this.z=i*o-r*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return kk.copy(this).projectOnVector(e),this.sub(kk)}reflect(e){return this.sub(kk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(kn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kk=new Y,v5=new Hn;class Wn{constructor(e,n,i,r,a,s,o,l,c){Wn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,s,o,l,c)}set(e,n,i,r,a,s,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=n,u[4]=a,u[5]=l,u[6]=i,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,s=i[0],o=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],d=i[5],m=i[8],y=r[0],v=r[3],g=r[6],x=r[1],_=r[4],E=r[7],T=r[2],w=r[5],A=r[8];return a[0]=s*y+o*x+l*T,a[3]=s*v+o*_+l*w,a[6]=s*g+o*E+l*A,a[1]=c*y+u*x+f*T,a[4]=c*v+u*_+f*w,a[7]=c*g+u*E+f*A,a[2]=h*y+d*x+m*T,a[5]=h*v+d*_+m*w,a[8]=h*g+d*E+m*A,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return n*s*u-n*o*c-i*a*u+i*o*l+r*a*c-r*s*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=u*s-o*c,h=o*l-u*a,d=c*a-s*l,m=n*f+i*h+r*d;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/m;return e[0]=f*y,e[1]=(r*c-u*i)*y,e[2]=(o*i-r*s)*y,e[3]=h*y,e[4]=(u*n-r*l)*y,e[5]=(r*a-o*n)*y,e[6]=d*y,e[7]=(i*l-c*n)*y,e[8]=(s*n-i*a)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,a,s,o){const l=Math.cos(a),c=Math.sin(a);return this.set(i*l,i*c,-i*(l*s+c*o)+s+e,-r*c,r*l,-r*(-c*s+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(Dk.makeScale(e,n)),this}rotate(e){return this.premultiply(Dk.makeRotation(-e)),this}translate(e,n){return this.premultiply(Dk.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Dk=new Wn;function EJ(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Lbe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function A0(t,e){return new Lbe[t](e)}function g_(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function MJ(){const t=g_("canvas");return t.style.display="block",t}const x5={};function W0(t){t in x5||(x5[t]=!0,console.warn(t))}function Ube(t,e,n){return new Promise(function(i,r){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}}setTimeout(a,n)})}const _5=new Wn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),S5=new Wn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Bbe(){const t={enabled:!0,workingColorSpace:_u,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===sr&&(r.r=hh(r.r),r.g=hh(r.g),r.b=hh(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===sr&&(r.r=q0(r.r),r.g=q0(r.g),r.b=q0(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===au?p_:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return W0("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return W0("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[_u]:{primaries:e,whitePoint:i,transfer:p_,toXYZ:_5,fromXYZ:S5,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:gs},outputColorSpaceConfig:{drawingBufferColorSpace:gs}},[gs]:{primaries:e,whitePoint:i,transfer:sr,toXYZ:_5,fromXYZ:S5,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:gs}}}),t}const oi=Bbe();function hh(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function q0(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let pb;class TJ{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{pb===void 0&&(pb=g_("canvas")),pb.width=e.width,pb.height=e.height;const r=pb.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=pb}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=g_("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=hh(a[s]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(hh(n[i]/255)*255):n[i]=hh(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Fbe=0;class Pd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Fbe++}),this.uuid=_l(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(Ok(r[s].image)):a.push(Ok(r[s]))}else a=Ok(r);i.url=a}return n||(e.images[this.uuid]=i),i}}function Ok(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?TJ.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let zbe=0;const Ik=new Y;class tr extends _f{constructor(e=tr.DEFAULT_IMAGE,n=tr.DEFAULT_MAPPING,i=ga,r=ga,a=Wi,s=dc,o=Jr,l=yo,c=tr.DEFAULT_ANISOTROPY,u=au){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zbe++}),this.uuid=_l(),this.name="",this.source=new Pd(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new ft(0,0),this.repeat=new ft(1,1),this.center=new ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Ik).x}get height(){return this.source.getSize(Ik).y}get depth(){return this.source.getSize(Ik).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${n}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==tp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ip:e.x=e.x-Math.floor(e.x);break;case ga:e.x=e.x<0?0:1;break;case _y:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ip:e.y=e.y-Math.floor(e.y);break;case ga:e.y=e.y<0?0:1;break;case _y:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}tr.DEFAULT_IMAGE=null;tr.DEFAULT_MAPPING=tp;tr.DEFAULT_ANISOTROPY=1;class ni{constructor(e=0,n=0,i=0,r=1){ni.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*n+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*n+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*n+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,a;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],m=l[9],y=l[2],v=l[6],g=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-y)<.01&&Math.abs(m-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+y)<.1&&Math.abs(m+v)<.1&&Math.abs(c+d+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,E=(d+1)/2,T=(g+1)/2,w=(u+h)/4,A=(f+y)/4,C=(m+v)/4;return _>E&&_>T?_<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(_),r=w/i,a=A/i):E>T?E<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(E),i=w/r,a=C/r):T<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(T),i=A/a,r=C/a),this.set(i,r,a,n),this}let x=Math.sqrt((v-m)*(v-m)+(f-y)*(f-y)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(v-m)/x,this.y=(f-y)/x,this.z=(h-u)/x,this.w=Math.acos((c+d+g-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=kn(this.x,e.x,n.x),this.y=kn(this.y,e.y,n.y),this.z=kn(this.z,e.z,n.z),this.w=kn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=kn(this.x,e,n),this.y=kn(this.y,e,n),this.z=kn(this.z,e,n),this.w=kn(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(kn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class MU extends _f{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new ni(0,0,e,n),this.scissorTest=!1,this.viewport=new ni(0,0,e,n);const r={width:e,height:n,depth:i.depth},a=new tr(r);this.textures=[];const s=i.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const n={minFilter:Wi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new Pd(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ac extends MU{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class v2 extends tr{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=es,this.minFilter=es,this.wrapR=ga,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class jbe extends Ac{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new v2(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class x2 extends tr{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=es,this.minFilter=es,this.wrapR=ga,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hbe extends Ac{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new x2(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class vi{constructor(e=new Y(1/0,1/0,1/0),n=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Gc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Gc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Gc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Gc):Gc.fromBufferAttribute(a,s),Gc.applyMatrix4(e.matrixWorld),this.expandByPoint(Gc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Rw.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Rw.copy(i.boundingBox)),Rw.applyMatrix4(e.matrixWorld),this.union(Rw)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Gc),Gc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ax),kw.subVectors(this.max,ax),mb.subVectors(e.a,ax),gb.subVectors(e.b,ax),bb.subVectors(e.c,ax),td.subVectors(gb,mb),nd.subVectors(bb,gb),Fp.subVectors(mb,bb);let n=[0,-td.z,td.y,0,-nd.z,nd.y,0,-Fp.z,Fp.y,td.z,0,-td.x,nd.z,0,-nd.x,Fp.z,0,-Fp.x,-td.y,td.x,0,-nd.y,nd.x,0,-Fp.y,Fp.x,0];return!Nk(n,mb,gb,bb,kw)||(n=[1,0,0,0,1,0,0,0,1],!Nk(n,mb,gb,bb,kw))?!1:(Dw.crossVectors(td,nd),n=[Dw.x,Dw.y,Dw.z],Nk(n,mb,gb,bb,kw))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Gc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ff[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ff[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ff[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ff[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ff[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ff[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ff[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ff[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ff),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Ff=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Gc=new Y,Rw=new vi,mb=new Y,gb=new Y,bb=new Y,td=new Y,nd=new Y,Fp=new Y,ax=new Y,kw=new Y,Dw=new Y,zp=new Y;function Nk(t,e,n,i,r){for(let a=0,s=t.length-3;a<=s;a+=3){zp.fromArray(t,a);const o=r.x*Math.abs(zp.x)+r.y*Math.abs(zp.y)+r.z*Math.abs(zp.z),l=e.dot(zp),c=n.dot(zp),u=i.dot(zp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const Vbe=new vi,sx=new Y,Pk=new Y;class xr{constructor(e=new Y,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):Vbe.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;sx.subVectors(e,this.center);const n=sx.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(sx,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Pk.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(sx.copy(e.center).add(Pk)),this.expandByPoint(sx.copy(e.center).sub(Pk))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const zf=new Y,Lk=new Y,Ow=new Y,id=new Y,Uk=new Y,Iw=new Y,Bk=new Y;class Tu{constructor(e=new Y,n=new Y(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zf)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=zf.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(zf.copy(this.origin).addScaledVector(this.direction,n),zf.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){Lk.copy(e).add(n).multiplyScalar(.5),Ow.copy(n).sub(e).normalize(),id.copy(this.origin).sub(Lk);const a=e.distanceTo(n)*.5,s=-this.direction.dot(Ow),o=id.dot(this.direction),l=-id.dot(Ow),c=id.lengthSq(),u=Math.abs(1-s*s);let f,h,d,m;if(u>0)if(f=s*l-o,h=s*o-l,m=a*u,f>=0)if(h>=-m)if(h<=m){const y=1/u;f*=y,h*=y,d=f*(f+s*h+2*o)+h*(s*f+h+2*l)+c}else h=a,f=Math.max(0,-(s*h+o)),d=-f*f+h*(h+2*l)+c;else h=-a,f=Math.max(0,-(s*h+o)),d=-f*f+h*(h+2*l)+c;else h<=-m?(f=Math.max(0,-(-s*a+o)),h=f>0?-a:Math.min(Math.max(-a,-l),a),d=-f*f+h*(h+2*l)+c):h<=m?(f=0,h=Math.min(Math.max(-a,-l),a),d=h*(h+2*l)+c):(f=Math.max(0,-(s*a+o)),h=f>0?a:Math.min(Math.max(-a,-l),a),d=-f*f+h*(h+2*l)+c);else h=s>0?-a:a,f=Math.max(0,-(s*h+o)),d=-f*f+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(Lk).addScaledVector(Ow,h),d}intersectSphere(e,n){zf.subVectors(e.center,this.origin);const i=zf.dot(this.direction),r=zf.dot(zf)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=i-s,l=i+s;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,a,s,o,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(a=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(a=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),f>=0?(o=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(o=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,zf)!==null}intersectTriangle(e,n,i,r,a){Uk.subVectors(n,e),Iw.subVectors(i,e),Bk.crossVectors(Uk,Iw);let s=this.direction.dot(Bk),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;id.subVectors(this.origin,e);const l=o*this.direction.dot(Iw.crossVectors(id,Iw));if(l<0)return null;const c=o*this.direction.dot(Uk.cross(id));if(c<0||l+c>s)return null;const u=-o*id.dot(Bk);return u<0?null:this.at(u/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ct{constructor(e,n,i,r,a,s,o,l,c,u,f,h,d,m,y,v){Ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,s,o,l,c,u,f,h,d,m,y,v)}set(e,n,i,r,a,s,o,l,c,u,f,h,d,m,y,v){const g=this.elements;return g[0]=e,g[4]=n,g[8]=i,g[12]=r,g[1]=a,g[5]=s,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=f,g[14]=h,g[3]=d,g[7]=m,g[11]=y,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ct().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/yb.setFromMatrixColumn(e,0).length(),a=1/yb.setFromMatrixColumn(e,1).length(),s=1/yb.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const h=s*u,d=s*f,m=o*u,y=o*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+m*c,n[5]=h-y*c,n[9]=-o*l,n[2]=y-h*c,n[6]=m+d*c,n[10]=s*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,m=c*u,y=c*f;n[0]=h+y*o,n[4]=m*o-d,n[8]=s*c,n[1]=s*f,n[5]=s*u,n[9]=-o,n[2]=d*o-m,n[6]=y+h*o,n[10]=s*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,m=c*u,y=c*f;n[0]=h-y*o,n[4]=-s*f,n[8]=m+d*o,n[1]=d+m*o,n[5]=s*u,n[9]=y-h*o,n[2]=-s*c,n[6]=o,n[10]=s*l}else if(e.order==="ZYX"){const h=s*u,d=s*f,m=o*u,y=o*f;n[0]=l*u,n[4]=m*c-d,n[8]=h*c+y,n[1]=l*f,n[5]=y*c+h,n[9]=d*c-m,n[2]=-c,n[6]=o*l,n[10]=s*l}else if(e.order==="YZX"){const h=s*l,d=s*c,m=o*l,y=o*c;n[0]=l*u,n[4]=y-h*f,n[8]=m*f+d,n[1]=f,n[5]=s*u,n[9]=-o*u,n[2]=-c*u,n[6]=d*f+m,n[10]=h-y*f}else if(e.order==="XZY"){const h=s*l,d=s*c,m=o*l,y=o*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+y,n[5]=s*u,n[9]=d*f-m,n[2]=m*f-d,n[6]=o*u,n[10]=y*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Gbe,e,Wbe)}lookAt(e,n,i){const r=this.elements;return al.subVectors(e,n),al.lengthSq()===0&&(al.z=1),al.normalize(),rd.crossVectors(i,al),rd.lengthSq()===0&&(Math.abs(i.z)===1?al.x+=1e-4:al.z+=1e-4,al.normalize(),rd.crossVectors(i,al)),rd.normalize(),Nw.crossVectors(al,rd),r[0]=rd.x,r[4]=Nw.x,r[8]=al.x,r[1]=rd.y,r[5]=Nw.y,r[9]=al.y,r[2]=rd.z,r[6]=Nw.z,r[10]=al.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,s=i[0],o=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],d=i[13],m=i[2],y=i[6],v=i[10],g=i[14],x=i[3],_=i[7],E=i[11],T=i[15],w=r[0],A=r[4],C=r[8],D=r[12],k=r[1],P=r[5],B=r[9],H=r[13],G=r[2],V=r[6],U=r[10],F=r[14],q=r[3],X=r[7],z=r[11],ce=r[15];return a[0]=s*w+o*k+l*G+c*q,a[4]=s*A+o*P+l*V+c*X,a[8]=s*C+o*B+l*U+c*z,a[12]=s*D+o*H+l*F+c*ce,a[1]=u*w+f*k+h*G+d*q,a[5]=u*A+f*P+h*V+d*X,a[9]=u*C+f*B+h*U+d*z,a[13]=u*D+f*H+h*F+d*ce,a[2]=m*w+y*k+v*G+g*q,a[6]=m*A+y*P+v*V+g*X,a[10]=m*C+y*B+v*U+g*z,a[14]=m*D+y*H+v*F+g*ce,a[3]=x*w+_*k+E*G+T*q,a[7]=x*A+_*P+E*V+T*X,a[11]=x*C+_*B+E*U+T*z,a[15]=x*D+_*H+E*F+T*ce,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],a=e[12],s=e[1],o=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],m=e[3],y=e[7],v=e[11],g=e[15];return m*(+a*l*f-r*c*f-a*o*h+i*c*h+r*o*d-i*l*d)+y*(+n*l*d-n*c*h+a*s*h-r*s*d+r*c*u-a*l*u)+v*(+n*c*f-n*o*d-a*s*f+i*s*d+a*o*u-i*c*u)+g*(-r*o*u-n*l*f+n*o*h+r*s*f-i*s*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],m=e[12],y=e[13],v=e[14],g=e[15],x=f*v*c-y*h*c+y*l*d-o*v*d-f*l*g+o*h*g,_=m*h*c-u*v*c-m*l*d+s*v*d+u*l*g-s*h*g,E=u*y*c-m*f*c+m*o*d-s*y*d-u*o*g+s*f*g,T=m*f*l-u*y*l-m*o*h+s*y*h+u*o*v-s*f*v,w=n*x+i*_+r*E+a*T;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/w;return e[0]=x*A,e[1]=(y*h*a-f*v*a-y*r*d+i*v*d+f*r*g-i*h*g)*A,e[2]=(o*v*a-y*l*a+y*r*c-i*v*c-o*r*g+i*l*g)*A,e[3]=(f*l*a-o*h*a-f*r*c+i*h*c+o*r*d-i*l*d)*A,e[4]=_*A,e[5]=(u*v*a-m*h*a+m*r*d-n*v*d-u*r*g+n*h*g)*A,e[6]=(m*l*a-s*v*a-m*r*c+n*v*c+s*r*g-n*l*g)*A,e[7]=(s*h*a-u*l*a+u*r*c-n*h*c-s*r*d+n*l*d)*A,e[8]=E*A,e[9]=(m*f*a-u*y*a-m*i*d+n*y*d+u*i*g-n*f*g)*A,e[10]=(s*y*a-m*o*a+m*i*c-n*y*c-s*i*g+n*o*g)*A,e[11]=(u*o*a-s*f*a-u*i*c+n*f*c+s*i*d-n*o*d)*A,e[12]=T*A,e[13]=(u*y*r-m*f*r+m*i*h-n*y*h-u*i*v+n*f*v)*A,e[14]=(m*o*r-s*y*r-m*i*l+n*y*l+s*i*v-n*o*v)*A,e[15]=(s*f*r-u*o*r+u*i*l-n*f*l-s*i*h+n*o*h)*A,this}scale(e){const n=this.elements,i=e.x,r=e.y,a=e.z;return n[0]*=i,n[4]*=r,n[8]*=a,n[1]*=i,n[5]*=r,n[9]*=a,n[2]*=i,n[6]*=r,n[10]*=a,n[3]*=i,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),a=1-i,s=e.x,o=e.y,l=e.z,c=a*s,u=a*o;return this.set(c*s+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*s,0,c*l-r*o,u*l+r*s,a*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,a=n._x,s=n._y,o=n._z,l=n._w,c=a+a,u=s+s,f=o+o,h=a*c,d=a*u,m=a*f,y=s*u,v=s*f,g=o*f,x=l*c,_=l*u,E=l*f,T=i.x,w=i.y,A=i.z;return r[0]=(1-(y+g))*T,r[1]=(d+E)*T,r[2]=(m-_)*T,r[3]=0,r[4]=(d-E)*w,r[5]=(1-(h+g))*w,r[6]=(v+x)*w,r[7]=0,r[8]=(m+_)*A,r[9]=(v-x)*A,r[10]=(1-(h+y))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let a=yb.set(r[0],r[1],r[2]).length();const s=yb.set(r[4],r[5],r[6]).length(),o=yb.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],Wc.copy(this);const c=1/a,u=1/s,f=1/o;return Wc.elements[0]*=c,Wc.elements[1]*=c,Wc.elements[2]*=c,Wc.elements[4]*=u,Wc.elements[5]*=u,Wc.elements[6]*=u,Wc.elements[8]*=f,Wc.elements[9]*=f,Wc.elements[10]*=f,n.setFromRotationMatrix(Wc),i.x=a,i.y=s,i.z=o,this}makePerspective(e,n,i,r,a,s,o=ml,l=!1){const c=this.elements,u=2*a/(n-e),f=2*a/(i-r),h=(n+e)/(n-e),d=(i+r)/(i-r);let m,y;if(l)m=a/(s-a),y=s*a/(s-a);else if(o===ml)m=-(s+a)/(s-a),y=-2*s*a/(s-a);else if(o===Cy)m=-s/(s-a),y=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=h,c[12]=0,c[1]=0,c[5]=f,c[9]=d,c[13]=0,c[2]=0,c[6]=0,c[10]=m,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,r,a,s,o=ml,l=!1){const c=this.elements,u=2/(n-e),f=2/(i-r),h=-(n+e)/(n-e),d=-(i+r)/(i-r);let m,y;if(l)m=1/(s-a),y=s/(s-a);else if(o===ml)m=-2/(s-a),y=-(s+a)/(s-a);else if(o===Cy)m=-1/(s-a),y=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=u,c[4]=0,c[8]=0,c[12]=h,c[1]=0,c[5]=f,c[9]=0,c[13]=d,c[2]=0,c[6]=0,c[10]=m,c[14]=y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const yb=new Y,Wc=new Ct,Gbe=new Y(0,0,0),Wbe=new Y(1,1,1),rd=new Y,Nw=new Y,al=new Y,w5=new Ct,E5=new Hn;class li{constructor(e=0,n=0,i=0,r=li.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],o=r[8],l=r[1],c=r[5],u=r[9],f=r[2],h=r[6],d=r[10];switch(n){case"XYZ":this._y=Math.asin(kn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-kn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(kn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-kn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(kn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-kn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return w5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(w5,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return E5.setFromEuler(this),this.setFromQuaternion(E5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}li.DEFAULT_ORDER="XYZ";class ky{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let qbe=0;const M5=new Y,vb=new Hn,jf=new Ct,Pw=new Y,ox=new Y,Xbe=new Y,Ybe=new Hn,T5=new Y(1,0,0),A5=new Y(0,1,0),C5=new Y(0,0,1),R5={type:"added"},$be={type:"removed"},xb={type:"childadded",child:null},Fk={type:"childremoved",child:null};class Ti extends _f{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qbe++}),this.uuid=_l(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ti.DEFAULT_UP.clone();const e=new Y,n=new li,i=new Hn,r=new Y(1,1,1);function a(){i.setFromEuler(n,!1)}function s(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ct},normalMatrix:{value:new Wn}}),this.matrix=new Ct,this.matrixWorld=new Ct,this.matrixAutoUpdate=Ti.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ky,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return vb.setFromAxisAngle(e,n),this.quaternion.multiply(vb),this}rotateOnWorldAxis(e,n){return vb.setFromAxisAngle(e,n),this.quaternion.premultiply(vb),this}rotateX(e){return this.rotateOnAxis(T5,e)}rotateY(e){return this.rotateOnAxis(A5,e)}rotateZ(e){return this.rotateOnAxis(C5,e)}translateOnAxis(e,n){return M5.copy(e).applyQuaternion(this.quaternion),this.position.add(M5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(T5,e)}translateY(e){return this.translateOnAxis(A5,e)}translateZ(e){return this.translateOnAxis(C5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(jf.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?Pw.copy(e):Pw.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ox.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jf.lookAt(ox,Pw,this.up):jf.lookAt(Pw,ox,this.up),this.quaternion.setFromRotationMatrix(jf),r&&(jf.extractRotation(r.matrixWorld),vb.setFromRotationMatrix(jf),this.quaternion.premultiply(vb.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(R5),xb.child=e,this.dispatchEvent(xb),xb.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent($be),Fk.child=e,this.dispatchEvent(Fk),Fk.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),jf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),jf.multiply(e.parent.matrixWorld)),e.applyMatrix4(jf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(R5),xb.child=e,this.dispatchEvent(xb),xb.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ox,e,Xbe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ox,Ybe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];a(e.shapes,f)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(a(e.materials,this.material[l]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(a(e.animations,l))}}if(n){const o=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),f=s(e.shapes),h=s(e.skeletons),d=s(e.animations),m=s(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),d.length>0&&(i.animations=d),m.length>0&&(i.nodes=m)}return i.object=r,i;function s(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ti.DEFAULT_UP=new Y(0,1,0);Ti.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const qc=new Y,Hf=new Y,zk=new Y,Vf=new Y,_b=new Y,Sb=new Y,k5=new Y,jk=new Y,Hk=new Y,Vk=new Y,Gk=new ni,Wk=new ni,qk=new ni;class Ta{constructor(e=new Y,n=new Y,i=new Y){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),qc.subVectors(e,n),r.cross(qc);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,i,r,a){qc.subVectors(r,n),Hf.subVectors(i,n),zk.subVectors(e,n);const s=qc.dot(qc),o=qc.dot(Hf),l=qc.dot(zk),c=Hf.dot(Hf),u=Hf.dot(zk),f=s*c-o*o;if(f===0)return a.set(0,0,0),null;const h=1/f,d=(c*l-o*u)*h,m=(s*u-o*l)*h;return a.set(1-d-m,m,d)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Vf)===null?!1:Vf.x>=0&&Vf.y>=0&&Vf.x+Vf.y<=1}static getInterpolation(e,n,i,r,a,s,o,l){return this.getBarycoord(e,n,i,r,Vf)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Vf.x),l.addScaledVector(s,Vf.y),l.addScaledVector(o,Vf.z),l)}static getInterpolatedAttribute(e,n,i,r,a,s){return Gk.setScalar(0),Wk.setScalar(0),qk.setScalar(0),Gk.fromBufferAttribute(e,n),Wk.fromBufferAttribute(e,i),qk.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(Gk,a.x),s.addScaledVector(Wk,a.y),s.addScaledVector(qk,a.z),s}static isFrontFacing(e,n,i,r){return qc.subVectors(i,n),Hf.subVectors(e,n),qc.cross(Hf).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qc.subVectors(this.c,this.b),Hf.subVectors(this.a,this.b),qc.cross(Hf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ta.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ta.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,a){return Ta.getInterpolation(e,this.a,this.b,this.c,n,i,r,a)}containsPoint(e){return Ta.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ta.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,a=this.c;let s,o;_b.subVectors(r,i),Sb.subVectors(a,i),jk.subVectors(e,i);const l=_b.dot(jk),c=Sb.dot(jk);if(l<=0&&c<=0)return n.copy(i);Hk.subVectors(e,r);const u=_b.dot(Hk),f=Sb.dot(Hk);if(u>=0&&f<=u)return n.copy(r);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return s=l/(l-u),n.copy(i).addScaledVector(_b,s);Vk.subVectors(e,a);const d=_b.dot(Vk),m=Sb.dot(Vk);if(m>=0&&d<=m)return n.copy(a);const y=d*c-l*m;if(y<=0&&c>=0&&m<=0)return o=c/(c-m),n.copy(i).addScaledVector(Sb,o);const v=u*m-d*f;if(v<=0&&f-u>=0&&d-m>=0)return k5.subVectors(a,r),o=(f-u)/(f-u+(d-m)),n.copy(r).addScaledVector(k5,o);const g=1/(v+y+h);return s=y*g,o=h*g,n.copy(i).addScaledVector(_b,s).addScaledVector(Sb,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const AJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ad={h:0,s:0,l:0},Lw={h:0,s:0,l:0};function Xk(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Ut=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=gs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,oi.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=oi.workingColorSpace){return this.r=e,this.g=n,this.b=i,oi.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=oi.workingColorSpace){if(e=EU(e,1),n=kn(n,0,1),i=kn(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,s=2*i-a;this.r=Xk(s,a,e+1/3),this.g=Xk(s,a,e),this.b=Xk(s,a,e-1/3)}return oi.colorSpaceToWorking(this,r),this}setStyle(e,n=gs){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=gs){const i=AJ[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=hh(e.r),this.g=hh(e.g),this.b=hh(e.b),this}copyLinearToSRGB(e){return this.r=q0(e.r),this.g=q0(e.g),this.b=q0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=gs){return oi.workingToColorSpace(Bs.copy(this),e),Math.round(kn(Bs.r*255,0,255))*65536+Math.round(kn(Bs.g*255,0,255))*256+Math.round(kn(Bs.b*255,0,255))}getHexString(e=gs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=oi.workingColorSpace){oi.workingToColorSpace(Bs.copy(this),n);const i=Bs.r,r=Bs.g,a=Bs.b,s=Math.max(i,r,a),o=Math.min(i,r,a);let l,c;const u=(o+s)/2;if(o===s)l=0,c=0;else{const f=s-o;switch(c=u<=.5?f/(s+o):f/(2-s-o),s){case i:l=(r-a)/f+(r<a?6:0);break;case r:l=(a-i)/f+2;break;case a:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=oi.workingColorSpace){return oi.workingToColorSpace(Bs.copy(this),n),e.r=Bs.r,e.g=Bs.g,e.b=Bs.b,e}getStyle(e=gs){oi.workingToColorSpace(Bs.copy(this),e);const n=Bs.r,i=Bs.g,r=Bs.b;return e!==gs?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(ad),this.setHSL(ad.h+e,ad.s+n,ad.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(ad),e.getHSL(Lw);const i=D1(ad.h,Lw.h,n),r=D1(ad.s,Lw.s,n),a=D1(ad.l,Lw.l,n);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*r,this.g=a[1]*n+a[4]*i+a[7]*r,this.b=a[2]*n+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Bs=new Ut;Ut.NAMES=AJ;let Kbe=0;class ka extends _f{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kbe++}),this.uuid=_l(),this.name="",this.type="Material",this.blending=Ym,this.side=Al,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qT,this.blendDst=XT,this.blendEquation=kd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ut(0,0,0),this.blendAlpha=0,this.depthFunc=og,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=DN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=pm,this.stencilZFail=pm,this.stencilZPass=pm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ym&&(i.blending=this.blending),this.side!==Al&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==qT&&(i.blendSrc=this.blendSrc),this.blendDst!==XT&&(i.blendDst=this.blendDst),this.blendEquation!==kd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==og&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==DN&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==pm&&(i.stencilFail=this.stencilFail),this.stencilZFail!==pm&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==pm&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(n){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class go extends ka{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new li,this.combine=oS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zf=Jbe();function Jbe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,a[l]=c|u}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function Ao(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=kn(t,-65504,65504),Zf.floatView[0]=t;const e=Zf.uint32View[0],n=e>>23&511;return Zf.baseTable[n]+((e&8388607)>>Zf.shiftTable[n])}function Qx(t){const e=t>>10;return Zf.uint32View[0]=Zf.mantissaTable[Zf.offsetTable[e]+(t&1023)]+Zf.exponentTable[e],Zf.floatView[0]}class Rm{static toHalfFloat(e){return Ao(e)}static fromHalfFloat(e){return Qx(e)}}const Sa=new Y,Uw=new ft;let Zbe=0;class Tn{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Zbe++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=m_,this.updateRanges=[],this.gpuType=vr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)Uw.fromBufferAttribute(this,n),Uw.applyMatrix3(e),this.setXY(n,Uw.x,Uw.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Sa.fromBufferAttribute(this,n),Sa.applyMatrix3(e),this.setXYZ(n,Sa.x,Sa.y,Sa.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Sa.fromBufferAttribute(this,n),Sa.applyMatrix4(e),this.setXYZ(n,Sa.x,Sa.y,Sa.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Sa.fromBufferAttribute(this,n),Sa.applyNormalMatrix(e),this.setXYZ(n,Sa.x,Sa.y,Sa.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Sa.fromBufferAttribute(this,n),Sa.transformDirection(e),this.setXYZ(n,Sa.x,Sa.y,Sa.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=ho(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=$n(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ho(n,this.array)),n}setX(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ho(n,this.array)),n}setY(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ho(n,this.array)),n}setZ(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ho(n,this.array)),n}setW(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array),r=$n(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array),r=$n(r,this.array),a=$n(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==m_&&(e.usage=this.usage),e}}class Qbe extends Tn{constructor(e,n,i){super(new Int8Array(e),n,i)}}class e0e extends Tn{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class t0e extends Tn{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class n0e extends Tn{constructor(e,n,i){super(new Int16Array(e),n,i)}}class TU extends Tn{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class i0e extends Tn{constructor(e,n,i){super(new Int32Array(e),n,i)}}class AU extends Tn{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class CJ extends Tn{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=Qx(this.array[e*this.itemSize]);return this.normalized&&(n=ho(n,this.array)),n}setX(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize]=Ao(n),this}getY(e){let n=Qx(this.array[e*this.itemSize+1]);return this.normalized&&(n=ho(n,this.array)),n}setY(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize+1]=Ao(n),this}getZ(e){let n=Qx(this.array[e*this.itemSize+2]);return this.normalized&&(n=ho(n,this.array)),n}setZ(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize+2]=Ao(n),this}getW(e){let n=Qx(this.array[e*this.itemSize+3]);return this.normalized&&(n=ho(n,this.array)),n}setW(e,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize+3]=Ao(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array)),this.array[e+0]=Ao(n),this.array[e+1]=Ao(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array),r=$n(r,this.array)),this.array[e+0]=Ao(n),this.array[e+1]=Ao(i),this.array[e+2]=Ao(r),this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array),r=$n(r,this.array),a=$n(a,this.array)),this.array[e+0]=Ao(n),this.array[e+1]=Ao(i),this.array[e+2]=Ao(r),this.array[e+3]=Ao(a),this}}class ln extends Tn{constructor(e,n,i){super(new Float32Array(e),n,i)}}let r0e=0;const Gl=new Ct,Yk=new Ti,wb=new Y,sl=new vi,lx=new vi,qa=new Y;class An extends _f{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:r0e++}),this.uuid=_l(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(EJ(e)?AU:TU)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Wn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gl.makeRotationFromQuaternion(e),this.applyMatrix4(Gl),this}rotateX(e){return Gl.makeRotationX(e),this.applyMatrix4(Gl),this}rotateY(e){return Gl.makeRotationY(e),this.applyMatrix4(Gl),this}rotateZ(e){return Gl.makeRotationZ(e),this.applyMatrix4(Gl),this}translate(e,n,i){return Gl.makeTranslation(e,n,i),this.applyMatrix4(Gl),this}scale(e,n,i){return Gl.makeScale(e,n,i),this.applyMatrix4(Gl),this}lookAt(e){return Yk.lookAt(e),Yk.updateMatrix(),this.applyMatrix4(Yk.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wb).negate(),this.translate(wb.x,wb.y,wb.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new ln(i,3))}else{const i=Math.min(e.length,n.count);for(let r=0;r<i;r++){const a=e[r];n.setXYZ(r,a.x,a.y,a.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const a=n[i];sl.setFromBufferAttribute(a),this.morphTargetsRelative?(qa.addVectors(this.boundingBox.min,sl.min),this.boundingBox.expandByPoint(qa),qa.addVectors(this.boundingBox.max,sl.max),this.boundingBox.expandByPoint(qa)):(this.boundingBox.expandByPoint(sl.min),this.boundingBox.expandByPoint(sl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const i=this.boundingSphere.center;if(sl.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];lx.setFromBufferAttribute(o),this.morphTargetsRelative?(qa.addVectors(sl.min,lx.min),sl.expandByPoint(qa),qa.addVectors(sl.max,lx.max),sl.expandByPoint(qa)):(sl.expandByPoint(lx.min),sl.expandByPoint(lx.max))}sl.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)qa.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(qa));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)qa.fromBufferAttribute(o,c),l&&(wb.fromBufferAttribute(e,c),qa.add(wb)),r=Math.max(r,i.distanceToSquared(qa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Tn(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let C=0;C<i.count;C++)o[C]=new Y,l[C]=new Y;const c=new Y,u=new Y,f=new Y,h=new ft,d=new ft,m=new ft,y=new Y,v=new Y;function g(C,D,k){c.fromBufferAttribute(i,C),u.fromBufferAttribute(i,D),f.fromBufferAttribute(i,k),h.fromBufferAttribute(a,C),d.fromBufferAttribute(a,D),m.fromBufferAttribute(a,k),u.sub(c),f.sub(c),d.sub(h),m.sub(h);const P=1/(d.x*m.y-m.x*d.y);isFinite(P)&&(y.copy(u).multiplyScalar(m.y).addScaledVector(f,-d.y).multiplyScalar(P),v.copy(f).multiplyScalar(d.x).addScaledVector(u,-m.x).multiplyScalar(P),o[C].add(y),o[D].add(y),o[k].add(y),l[C].add(v),l[D].add(v),l[k].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let C=0,D=x.length;C<D;++C){const k=x[C],P=k.start,B=k.count;for(let H=P,G=P+B;H<G;H+=3)g(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const _=new Y,E=new Y,T=new Y,w=new Y;function A(C){T.fromBufferAttribute(r,C),w.copy(T);const D=o[C];_.copy(D),_.sub(T.multiplyScalar(T.dot(D))).normalize(),E.crossVectors(w,D);const P=E.dot(l[C])<0?-1:1;s.setXYZW(C,_.x,_.y,_.z,P)}for(let C=0,D=x.length;C<D;++C){const k=x[C],P=k.start,B=k.count;for(let H=P,G=P+B;H<G;H+=3)A(e.getX(H+0)),A(e.getX(H+1)),A(e.getX(H+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Tn(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new Y,a=new Y,s=new Y,o=new Y,l=new Y,c=new Y,u=new Y,f=new Y;if(e)for(let h=0,d=e.count;h<d;h+=3){const m=e.getX(h+0),y=e.getX(h+1),v=e.getX(h+2);r.fromBufferAttribute(n,m),a.fromBufferAttribute(n,y),s.fromBufferAttribute(n,v),u.subVectors(s,a),f.subVectors(r,a),u.cross(f),o.fromBufferAttribute(i,m),l.fromBufferAttribute(i,y),c.fromBufferAttribute(i,v),o.add(u),l.add(u),c.add(u),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,d=n.count;h<d;h+=3)r.fromBufferAttribute(n,h+0),a.fromBufferAttribute(n,h+1),s.fromBufferAttribute(n,h+2),u.subVectors(s,a),f.subVectors(r,a),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)qa.fromBufferAttribute(e,n),qa.normalize(),e.setXYZ(n,qa.x,qa.y,qa.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,f=o.normalized,h=new c.constructor(l.length*u);let d=0,m=0;for(let y=0,v=l.length;y<v;y++){o.isInterleavedBufferAttribute?d=l[y]*o.data.stride+o.offset:d=l[y]*u;for(let g=0;g<u;g++)h[m++]=c[d++]}return new Tn(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new An,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);n.setAttribute(o,c)}const a=this.morphAttributes;for(const o in a){const l=[],c=a[o];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,i);l.push(d)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const c=s[o];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let a=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(n))}const a=e.morphAttributes;for(const c in a){const u=[],f=a[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const f=s[c];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const D5=new Ct,jp=new Tu,Bw=new xr,O5=new Y,Fw=new Y,zw=new Y,jw=new Y,$k=new Y,Hw=new Y,I5=new Y,Vw=new Y;class fi extends Ti{constructor(e=new An,n=new go){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){Hw.set(0,0,0);for(let l=0,c=a.length;l<c;l++){const u=o[l],f=a[l];u!==0&&($k.fromBufferAttribute(f,e),s?Hw.addScaledVector($k,u):Hw.addScaledVector($k.sub(n),u))}n.add(Hw)}return n}raycast(e,n){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Bw.copy(i.boundingSphere),Bw.applyMatrix4(a),jp.copy(e.ray).recast(e.near),!(Bw.containsPoint(jp.origin)===!1&&(jp.intersectSphere(Bw,O5)===null||jp.origin.distanceToSquared(O5)>(e.far-e.near)**2))&&(D5.copy(a).invert(),jp.copy(e.ray).applyMatrix4(D5),!(i.boundingBox!==null&&jp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,jp)))}_computeIntersections(e,n,i){let r;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,c=a.attributes.uv,u=a.attributes.uv1,f=a.attributes.normal,h=a.groups,d=a.drawRange;if(o!==null)if(Array.isArray(s))for(let m=0,y=h.length;m<y;m++){const v=h[m],g=s[v.materialIndex],x=Math.max(v.start,d.start),_=Math.min(o.count,Math.min(v.start+v.count,d.start+d.count));for(let E=x,T=_;E<T;E+=3){const w=o.getX(E),A=o.getX(E+1),C=o.getX(E+2);r=Gw(this,g,e,i,c,u,f,w,A,C),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=v.materialIndex,n.push(r))}}else{const m=Math.max(0,d.start),y=Math.min(o.count,d.start+d.count);for(let v=m,g=y;v<g;v+=3){const x=o.getX(v),_=o.getX(v+1),E=o.getX(v+2);r=Gw(this,s,e,i,c,u,f,x,_,E),r&&(r.faceIndex=Math.floor(v/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let m=0,y=h.length;m<y;m++){const v=h[m],g=s[v.materialIndex],x=Math.max(v.start,d.start),_=Math.min(l.count,Math.min(v.start+v.count,d.start+d.count));for(let E=x,T=_;E<T;E+=3){const w=E,A=E+1,C=E+2;r=Gw(this,g,e,i,c,u,f,w,A,C),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=v.materialIndex,n.push(r))}}else{const m=Math.max(0,d.start),y=Math.min(l.count,d.start+d.count);for(let v=m,g=y;v<g;v+=3){const x=v,_=v+1,E=v+2;r=Gw(this,s,e,i,c,u,f,x,_,E),r&&(r.faceIndex=Math.floor(v/3),n.push(r))}}}}function a0e(t,e,n,i,r,a,s,o){let l;if(e.side===ba?l=i.intersectTriangle(s,a,r,!0,o):l=i.intersectTriangle(r,a,s,e.side===Al,o),l===null)return null;Vw.copy(o),Vw.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Vw);return c<n.near||c>n.far?null:{distance:c,point:Vw.clone(),object:t}}function Gw(t,e,n,i,r,a,s,o,l,c){t.getVertexPosition(o,Fw),t.getVertexPosition(l,zw),t.getVertexPosition(c,jw);const u=a0e(t,e,n,i,Fw,zw,jw,I5);if(u){const f=new Y;Ta.getBarycoord(I5,Fw,zw,jw,f),r&&(u.uv=Ta.getInterpolatedAttribute(r,o,l,c,f,new ft)),a&&(u.uv1=Ta.getInterpolatedAttribute(a,o,l,c,f,new ft)),s&&(u.normal=Ta.getInterpolatedAttribute(s,o,l,c,f,new Y),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new Y,materialIndex:0};Ta.getNormal(Fw,zw,jw,h.normal),u.face=h,u.barycoord=f}return u}class fp extends An{constructor(e=1,n=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const l=[],c=[],u=[],f=[];let h=0,d=0;m("z","y","x",-1,-1,i,n,e,s,a,0),m("z","y","x",1,-1,i,n,-e,s,a,1),m("x","z","y",1,1,e,i,n,r,s,2),m("x","z","y",1,-1,e,i,-n,r,s,3),m("x","y","z",1,-1,e,n,i,r,a,4),m("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(l),this.setAttribute("position",new ln(c,3)),this.setAttribute("normal",new ln(u,3)),this.setAttribute("uv",new ln(f,2));function m(y,v,g,x,_,E,T,w,A,C,D){const k=E/A,P=T/C,B=E/2,H=T/2,G=w/2,V=A+1,U=C+1;let F=0,q=0;const X=new Y;for(let z=0;z<U;z++){const ce=z*P-H;for(let he=0;he<V;he++){const $=he*k-B;X[y]=$*x,X[v]=ce*_,X[g]=G,c.push(X.x,X.y,X.z),X[y]=0,X[v]=0,X[g]=w>0?1:-1,u.push(X.x,X.y,X.z),f.push(he/A),f.push(1-z/C),F+=1}}for(let z=0;z<C;z++)for(let ce=0;ce<A;ce++){const he=h+ce+V*z,$=h+ce+V*(z+1),Me=h+(ce+1)+V*(z+1),Se=h+(ce+1)+V*z;l.push(he,$,Se),l.push($,Me,Se),q+=6}o.addGroup(d,q,D),d+=q,h+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Dy(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function oo(t){const e={};for(let n=0;n<t.length;n++){const i=Dy(t[n]);for(const r in i)e[r]=i[r]}return e}function s0e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function RJ(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:oi.workingColorSpace}const b_={clone:Dy,merge:oo};var o0e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,l0e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class is extends ka{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=o0e,this.fragmentShader=l0e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Dy(e.uniforms),this.uniformsGroups=s0e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?n.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[r]={type:"m4",value:s.toArray()}:n.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class _2 extends Ti{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ct,this.projectionMatrix=new Ct,this.projectionMatrixInverse=new Ct,this.coordinateSystem=ml,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const sd=new Y,N5=new ft,P5=new ft;class Yr extends _2{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Ry*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($m*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ry*2*Math.atan(Math.tan($m*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){sd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(sd.x,sd.y).multiplyScalar(-e/sd.z),sd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(sd.x,sd.y).multiplyScalar(-e/sd.z)}getViewSize(e,n){return this.getViewBounds(e,N5,P5),n.subVectors(P5,N5)}setViewOffset(e,n,i,r,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan($m*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;a+=s.offsetX*r/l,n-=s.offsetY*i/c,r*=s.width/l,i*=s.height/c}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Eb=-90,Mb=1;class kJ extends Ti{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Yr(Eb,Mb,e,n);r.layers=this.layers,this.add(r);const a=new Yr(Eb,Mb,e,n);a.layers=this.layers,this.add(a);const s=new Yr(Eb,Mb,e,n);s.layers=this.layers,this.add(s);const o=new Yr(Eb,Mb,e,n);o.layers=this.layers,this.add(o);const l=new Yr(Eb,Mb,e,n);l.layers=this.layers,this.add(l);const c=new Yr(Eb,Mb,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,a,s,o,l]=n;for(const c of n)this.remove(c);if(e===ml)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Cy)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,a),e.setRenderTarget(i,1,r),e.render(n,s),e.setRenderTarget(i,2,r),e.render(n,o),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,c),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(n,u),e.setRenderTarget(f,h,d),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class cS extends tr{constructor(e=[],n=mf,i,r,a,s,o,l,c,u){super(e,n,i,r,a,s,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class CU extends Ac{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new cS(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new fp(5,5,5),a=new is({name:"CubemapFromEquirect",uniforms:Dy(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ba,blending:lf});a.uniforms.tEquirect.value=n;const s=new fi(r,a),o=n.minFilter;return n.minFilter===dc&&(n.minFilter=Wi),new kJ(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,i,r);e.setRenderTarget(a)}}class Zu extends Ti{constructor(){super(),this.isGroup=!0,this.type="Group"}}const c0e={type:"move"};class qM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Zu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Zu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Zu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,a=null,s=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const y of e.hand.values()){const v=n.getJointPose(y,i),g=this._getHandJoint(c,y);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,m=.005;c.inputState.pinching&&h>d+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,i),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(c0e)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=a!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Zu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class S2{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ut(e),this.density=n}clone(){return new S2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class w2{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ut(e),this.near=n,this.far=i}clone(){return new w2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class pv extends Ti{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new li,this.environmentIntensity=1,this.environmentRotation=new li,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class uS{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=m_,this.updateRanges=[],this.version=0,this.uuid=_l()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_l()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_l()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ao=new Y;class Io{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)ao.fromBufferAttribute(this,n),ao.applyMatrix4(e),this.setXYZ(n,ao.x,ao.y,ao.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)ao.fromBufferAttribute(this,n),ao.applyNormalMatrix(e),this.setXYZ(n,ao.x,ao.y,ao.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)ao.fromBufferAttribute(this,n),ao.transformDirection(e),this.setXYZ(n,ao.x,ao.y,ao.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=ho(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=$n(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=$n(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=$n(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=$n(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=$n(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ho(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ho(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ho(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ho(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array),r=$n(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=$n(n,this.array),i=$n(i,this.array),r=$n(r,this.array),a=$n(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return new Tn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Io(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class RU extends ka{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Tb;const cx=new Y,Ab=new Y,Cb=new Y,Rb=new ft,ux=new ft,DJ=new Ct,Ww=new Y,fx=new Y,qw=new Y,L5=new ft,Kk=new ft,U5=new ft;class OJ extends Ti{constructor(e=new RU){if(super(),this.isSprite=!0,this.type="Sprite",Tb===void 0){Tb=new An;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new uS(n,5);Tb.setIndex([0,1,2,0,2,3]),Tb.setAttribute("position",new Io(i,3,0,!1)),Tb.setAttribute("uv",new Io(i,2,3,!1))}this.geometry=Tb,this.material=e,this.center=new ft(.5,.5),this.count=1}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ab.setFromMatrixScale(this.matrixWorld),DJ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cb.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ab.multiplyScalar(-Cb.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;Xw(Ww.set(-.5,-.5,0),Cb,s,Ab,r,a),Xw(fx.set(.5,-.5,0),Cb,s,Ab,r,a),Xw(qw.set(.5,.5,0),Cb,s,Ab,r,a),L5.set(0,0),Kk.set(1,0),U5.set(1,1);let o=e.ray.intersectTriangle(Ww,fx,qw,!1,cx);if(o===null&&(Xw(fx.set(-.5,.5,0),Cb,s,Ab,r,a),Kk.set(0,1),o=e.ray.intersectTriangle(Ww,qw,fx,!1,cx),o===null))return;const l=e.ray.origin.distanceTo(cx);l<e.near||l>e.far||n.push({distance:l,point:cx.clone(),uv:Ta.getInterpolation(cx,Ww,fx,qw,L5,Kk,U5,new ft),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Xw(t,e,n,i,r,a){Rb.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(ux.x=a*Rb.x-r*Rb.y,ux.y=r*Rb.x+a*Rb.y):ux.copy(Rb),t.copy(e),t.x+=ux.x,t.y+=ux.y,t.applyMatrix4(DJ)}const Yw=new Y,B5=new Y;class IJ extends Ti{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let a;for(a=0;a<r.length&&!(n<r[a].distance);a++);return r.splice(a,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){const r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),e<a)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){Yw.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Yw);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Yw.setFromMatrixPosition(e.matrixWorld),B5.setFromMatrixPosition(this.matrixWorld);const i=Yw.distanceTo(B5)/e.zoom;n[0].object.visible=!0;let r,a;for(r=1,a=n.length;r<a;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),i>=s)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const F5=new Y,z5=new ni,j5=new ni,u0e=new Y,H5=new Ct,$w=new Y,Jk=new xr,V5=new Ct,Zk=new Tu;let E2=class extends fi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=f_,this.bindMatrix=new Ct,this.bindMatrixInverse=new Ct,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vi),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,$w),this.boundingBox.expandByPoint($w)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,$w),this.boundingSphere.expandByPoint($w)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Jk.copy(this.boundingSphere),Jk.applyMatrix4(r),e.ray.intersectsSphere(Jk)!==!1&&(V5.copy(r).invert(),Zk.copy(e.ray).applyMatrix4(V5),!(this.boundingBox!==null&&Zk.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,Zk)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ni,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===f_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gU?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;z5.fromBufferAttribute(r.attributes.skinIndex,e),j5.fromBufferAttribute(r.attributes.skinWeight,e),F5.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const s=j5.getComponent(a);if(s!==0){const o=z5.getComponent(a);H5.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),n.addScaledVector(u0e.copy(F5).applyMatrix4(H5),s)}}return n.applyMatrix4(this.bindMatrixInverse)}};class fS extends Ti{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ws extends tr{constructor(e=null,n=1,i=1,r,a,s,o,l,c=es,u=es,f,h){super(null,s,o,l,c,u,r,a,f,h),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const G5=new Ct,f0e=new Ct;class mv{constructor(e=[],n=[]){this.uuid=_l(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Ct;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:f0e;G5.multiplyMatrices(o,n[a]),G5.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new mv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new ws(n,e,e,Jr,vr);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=n[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new fS),this.bones.push(s),this.boneInverses.push(new Ct().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,a=n.length;r<a;r++){const s=n[r];e.bones.push(s.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class Mh extends Tn{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const kb=new Ct,W5=new Ct,Kw=[],q5=new vi,h0e=new Ct,hx=new fi,dx=new xr;class M2 extends fi{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Mh(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,h0e)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new vi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,kb),q5.copy(e.boundingBox).applyMatrix4(kb),this.boundingBox.union(q5)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new xr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,kb),dx.copy(e.boundingSphere).applyMatrix4(kb),this.boundingSphere.union(dx)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let o=0;o<i.length;o++)i[o]=r[s+o]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(hx.geometry=this.geometry,hx.material=this.material,hx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),dx.copy(this.boundingSphere),dx.applyMatrix4(i),e.ray.intersectsSphere(dx)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,kb),W5.multiplyMatrices(i,kb),hx.matrixWorld=W5,hx.raycast(e,Kw);for(let s=0,o=Kw.length;s<o;s++){const l=Kw[s];l.instanceId=a,l.object=this,n.push(l)}Kw.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Mh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new ws(new Float32Array(r*this.count),r,this.count,Nh,vr));const a=this.morphTexture.source.data.data;let s=0;for(let c=0;c<i.length;c++)s+=i[c];const o=this.geometry.morphTargetsRelative?1:1-s,l=r*e;a[l]=o,a.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Qk=new Y,d0e=new Y,p0e=new Wn;class hl{constructor(e=new Y(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=Qk.subVectors(i,n).cross(d0e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(Qk),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||p0e.getNormalMatrix(e),r=this.coplanarPoint(Qk).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hp=new xr,m0e=new ft(.5,.5),Jw=new Y;class kg{constructor(e=new hl,n=new hl,i=new hl,r=new hl,a=new hl,s=new hl){this.planes=[e,n,i,r,a,s]}set(e,n,i,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=ml,i=!1){const r=this.planes,a=e.elements,s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],f=a[5],h=a[6],d=a[7],m=a[8],y=a[9],v=a[10],g=a[11],x=a[12],_=a[13],E=a[14],T=a[15];if(r[0].setComponents(c-s,d-u,g-m,T-x).normalize(),r[1].setComponents(c+s,d+u,g+m,T+x).normalize(),r[2].setComponents(c+o,d+f,g+y,T+_).normalize(),r[3].setComponents(c-o,d-f,g-y,T-_).normalize(),i)r[4].setComponents(l,h,v,E).normalize(),r[5].setComponents(c-l,d-h,g-v,T-E).normalize();else if(r[4].setComponents(c-l,d-h,g-v,T-E).normalize(),n===ml)r[5].setComponents(c+l,d+h,g+v,T+E).normalize();else if(n===Cy)r[5].setComponents(l,h,v,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Hp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Hp.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hp)}intersectsSprite(e){Hp.center.set(0,0,0);const n=m0e.distanceTo(e.center);return Hp.radius=.7071067811865476+n,Hp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hp)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(Jw.x=r.normal.x>0?e.max.x:e.min.x,Jw.y=r.normal.y>0?e.max.y:e.min.y,Jw.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Jw)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Uu=new Ct,Bu=new kg;class T2{constructor(){this.coordinateSystem=ml}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Uu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Bu.setFromProjectionMatrix(Uu,r.coordinateSystem,r.reversedDepth),Bu.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Uu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Bu.setFromProjectionMatrix(Uu,r.coordinateSystem,r.reversedDepth),Bu.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Uu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Bu.setFromProjectionMatrix(Uu,r.coordinateSystem,r.reversedDepth),Bu.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Uu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Bu.setFromProjectionMatrix(Uu,r.coordinateSystem,r.reversedDepth),Bu.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(Uu.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Bu.setFromProjectionMatrix(Uu,r.coordinateSystem,r.reversedDepth),Bu.containsPoint(e))return!0}return!1}clone(){return new T2}}function eD(t,e){return t-e}function g0e(t,e){return t.z-e.z}function b0e(t,e){return e.z-t.z}class y0e{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=n,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const Mo=new Ct,v0e=new Ut(1,1,1),X5=new kg,x0e=new T2,Zw=new vi,Vp=new xr,px=new Y,Y5=new Y,_0e=new Y,tD=new y0e,Fs=new fi,Qw=[];function S0e(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+n,s,t.getComponent(a,s))}else e.array.set(t.array,n*i);e.needsUpdate=!0}function Gp(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}let kU=class extends fi{constructor(e,n,i=n*2,r){super(new An,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new ws(n,e,e,Jr,vr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new ws(n,e,e,hv,Tc);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new ws(n,e,e,Jr,vr);i.colorSpace=oi.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:l,normalized:c}=s,u=new o.constructor(i*l),f=new Tn(u,l,c);n.setAttribute(a,f)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new Tn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=n.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Mo),this.getBoundingBoxAt(a,Zw).applyMatrix4(Mo),e.union(Zw)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Mo),this.getBoundingSphereAt(a,Vp).applyMatrix4(Mo),e.union(Vp)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(eD),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Mo.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(v0e.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,n=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(eD),l=this._availableGeometryIds.shift(),a[l]=r):(l=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=n.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||n.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.reservedVertexCount;o.vertexCount=n.getAttribute("position").count;for(const u in i.attributes){const f=n.getAttribute(u),h=i.getAttribute(u);S0e(f,h,l);const d=f.itemSize;for(let m=f.count,y=c;m<y;m++){const v=l+m;for(let g=0;g<d;g++)h.setComponent(v,g,0)}h.needsUpdate=!0,h.addUpdateRange(l*d,c*d)}if(r){const u=o.indexStart,f=o.reservedIndexCount;o.indexCount=n.getIndex().count;for(let h=0;h<s.count;h++)a.setX(u+h,l+s.getX(h));for(let h=s.count,d=f;h<d;h++)a.setX(u+h,l);a.needsUpdate=!0,a.addUpdateRange(u,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,n.boundingBox!==null&&(o.boundingBox=n.boundingBox.clone()),o.boundingSphere=null,n.boundingSphere!==null&&(o.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const i=this._geometryInfo,r=i.map((s,o)=>o).sort((s,o)=>i[s].vertexStart-i[o].vertexStart),a=this.geometry;for(let s=0,o=i.length;s<o;s++){const l=r[s],c=i[l];if(c.active!==!1){if(a.index!==null){if(c.indexStart!==n){const{indexStart:u,vertexStart:f,reservedIndexCount:h}=c,d=a.index,m=d.array,y=e-f;for(let v=u;v<u+h;v++)m[v]=m[v]+y;d.array.copyWithin(n,u,u+h),d.addUpdateRange(n,h),c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:f}=c,h=a.attributes;for(const d in h){const m=h[d],{array:y,itemSize:v}=m;y.copyWithin(e*v,u*v,(u+f)*v),m.addUpdateRange(e*v,f*v)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=a.index?c.indexStart:c.vertexStart,this._nextIndexStart=a.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new vi,s=i.index,o=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;s&&(u=s.getX(u)),a.expandByPoint(px.fromBufferAttribute(o,u))}r.boundingBox=a}return n.copy(r.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new xr;this.getBoundingBoxAt(e,Zw),Zw.getCenter(a.center);const s=i.index,o=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let f=c;s&&(f=s.getX(f)),px.fromBufferAttribute(o,f),l=Math.max(l,a.center.distanceToSquared(px))}a.radius=Math.sqrt(l),r.boundingSphere=a}return n.copy(r.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return n.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return n.vertexStart=i.vertexStart,n.vertexCount=i.vertexCount,n.reservedVertexCount=i.reservedVertexCount,n.indexStart=i.indexStart,n.indexCount=i.indexCount,n.reservedIndexCount=i.reservedIndexCount,n.start=i.start,n.count=i.count,n}setInstanceCount(e){const n=this._availableInstanceIds,i=this._instanceInfo;for(n.sort(eD);n[n.length-1]===i.length-1;)i.pop(),n.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Gp(this._multiDrawCounts,r),Gp(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Gp(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Gp(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Gp(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new An,this._initializeGeometry(a));const s=this.geometry;a.index&&Gp(a.index.array,s.index.array);for(const o in a.attributes)Gp(a.attributes[o].array,s.attributes[o].array)}raycast(e,n){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Fs.material=this.material,Fs.geometry.index=s.index,Fs.geometry.attributes=s.attributes,Fs.geometry.boundingBox===null&&(Fs.geometry.boundingBox=new vi),Fs.geometry.boundingSphere===null&&(Fs.geometry.boundingSphere=new xr);for(let o=0,l=i.length;o<l;o++){if(!i[o].visible||!i[o].active)continue;const c=i[o].geometryIndex,u=r[c];Fs.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(o,Fs.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Fs.geometry.boundingBox),this.getBoundingSphereAt(c,Fs.geometry.boundingSphere),Fs.raycast(e,Qw);for(let f=0,h=Qw.length;f<h;f++){const d=Qw[f];d.object=this,d.batchId=o,n.push(d)}Qw.length=0}Fs.material=null,Fs.geometry.index=null,Fs.geometry.attributes={},Fs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._geometryInfo,h=this.perObjectFrustumCulled,d=this._indirectTexture,m=d.image.data,y=i.isArrayCamera?x0e:X5;h&&!i.isArrayCamera&&(Mo.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),X5.setFromProjectionMatrix(Mo,i.coordinateSystem,i.reversedDepth));let v=0;if(this.sortObjects){Mo.copy(this.matrixWorld).invert(),px.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Mo),Y5.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Mo);for(let _=0,E=l.length;_<E;_++)if(l[_].visible&&l[_].active){const T=l[_].geometryIndex;this.getMatrixAt(_,Mo),this.getBoundingSphereAt(T,Vp).applyMatrix4(Mo);let w=!1;if(h&&(w=!y.intersectsSphere(Vp,i)),!w){const A=f[T],C=_0e.subVectors(Vp.center,px).dot(Y5);tD.push(A.start,A.count,C,_)}}const g=tD.list,x=this.customSort;x===null?g.sort(a.transparent?b0e:g0e):x.call(this,g,i);for(let _=0,E=g.length;_<E;_++){const T=g[_];c[v]=T.start*o,u[v]=T.count,m[v]=T.index,v++}tD.reset()}else for(let g=0,x=l.length;g<x;g++)if(l[g].visible&&l[g].active){const _=l[g].geometryIndex;let E=!1;if(h&&(this.getMatrixAt(g,Mo),this.getBoundingSphereAt(_,Vp).applyMatrix4(Mo),E=!y.intersectsSphere(Vp,i)),!E){const T=f[_];c[v]=T.start*o,u[v]=T.count,m[v]=g,v++}}d.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}};class qs extends ka{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const RA=new Y,kA=new Y,$5=new Ct,mx=new Tu,eE=new xr,nD=new Y,K5=new Y;let Th=class extends Ti{constructor(e=new An,n=new qs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,a=n.count;r<a;r++)RA.fromBufferAttribute(n,r-1),kA.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=RA.distanceTo(kA);e.setAttribute("lineDistance",new ln(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),eE.copy(i.boundingSphere),eE.applyMatrix4(r),eE.radius+=a,e.ray.intersectsSphere(eE)===!1)return;$5.copy(r).invert(),mx.copy(e.ray).applyMatrix4($5);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){const d=Math.max(0,s.start),m=Math.min(u.count,s.start+s.count);for(let y=d,v=m-1;y<v;y+=c){const g=u.getX(y),x=u.getX(y+1),_=tE(this,e,mx,l,g,x,y);_&&n.push(_)}if(this.isLineLoop){const y=u.getX(m-1),v=u.getX(d),g=tE(this,e,mx,l,y,v,m-1);g&&n.push(g)}}else{const d=Math.max(0,s.start),m=Math.min(h.count,s.start+s.count);for(let y=d,v=m-1;y<v;y+=c){const g=tE(this,e,mx,l,y,y+1,y);g&&n.push(g)}if(this.isLineLoop){const y=tE(this,e,mx,l,m-1,d,m-1);y&&n.push(y)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function tE(t,e,n,i,r,a,s){const o=t.geometry.attributes.position;if(RA.fromBufferAttribute(o,r),kA.fromBufferAttribute(o,a),n.distanceSqToSegment(RA,kA,nD,K5)>i)return;nD.applyMatrix4(t.matrixWorld);const c=e.ray.origin.distanceTo(nD);if(!(c<e.near||c>e.far))return{distance:c,point:K5.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}const J5=new Y,Z5=new Y;class Au extends Th{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,a=n.count;r<a;r+=2)J5.fromBufferAttribute(n,r),Z5.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+J5.distanceTo(Z5);e.setAttribute("lineDistance",new ln(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class DU extends Th{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class A2 extends ka{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Q5=new Ct,IN=new Tu,nE=new xr,iE=new Y;class OU extends Ti{constructor(e=new An,n=new A2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),nE.copy(i.boundingSphere),nE.applyMatrix4(r),nE.radius+=a,e.ray.intersectsSphere(nE)===!1)return;Q5.copy(r).invert(),IN.copy(e.ray).applyMatrix4(Q5);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,f=i.attributes.position;if(c!==null){const h=Math.max(0,s.start),d=Math.min(c.count,s.start+s.count);for(let m=h,y=d;m<y;m++){const v=c.getX(m);iE.fromBufferAttribute(f,v),e6(iE,v,l,r,e,n,this)}}else{const h=Math.max(0,s.start),d=Math.min(f.count,s.start+s.count);for(let m=h,y=d;m<y;m++)iE.fromBufferAttribute(f,m),e6(iE,m,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function e6(t,e,n,i,r,a,s){const o=IN.distanceSqToPoint(t);if(o<n){const l=new Y;IN.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class NJ extends tr{constructor(e,n,i,r,a=Wi,s=Wi,o,l,c){super(e,n,i,r,a,s,o,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const u=this;function f(){u.needsUpdate=!0,u._requestVideoFrameCallbackId=e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(f))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class w0e extends NJ{constructor(e,n,i,r,a,s,o,l){super({},e,n,i,r,a,s,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class E0e extends tr{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=es,this.minFilter=es,this.generateMipmaps=!1,this.needsUpdate=!0}}class C2 extends tr{constructor(e,n,i,r,a,s,o,l,c,u,f,h){super(null,s,o,l,c,u,r,a,f,h),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class M0e extends C2{constructor(e,n,i,r,a,s){super(e,n,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ga,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class T0e extends C2{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,mf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class A0e extends tr{constructor(e,n,i,r,a,s,o,l,c){super(e,n,i,r,a,s,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class IU extends tr{constructor(e,n,i=Tc,r,a,s,o=es,l=es,c,u=Ey,f=1){if(u!==Ey&&u!==My)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const h={width:e,height:n,depth:f};super(h,r,a,s,o,l,u,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Pd(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class R2 extends An{constructor(e=1,n=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r,heightSegments:a},n=Math.max(0,n),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],o=[],l=[],c=[],u=n/2,f=Math.PI/2*e,h=n,d=2*f+h,m=i*2+a,y=r+1,v=new Y,g=new Y;for(let x=0;x<=m;x++){let _=0,E=0,T=0,w=0;if(x<=i){const D=x/i,k=D*Math.PI/2;E=-u-e*Math.cos(k),T=e*Math.sin(k),w=-e*Math.cos(k),_=D*f}else if(x<=i+a){const D=(x-i)/a;E=-u+D*n,T=e,w=0,_=f+D*h}else{const D=(x-i-a)/i,k=D*Math.PI/2;E=u+e*Math.sin(k),T=e*Math.cos(k),w=e*Math.sin(k),_=f+h+D*f}const A=Math.max(0,Math.min(1,_/d));let C=0;x===0?C=.5/r:x===m&&(C=-.5/r);for(let D=0;D<=r;D++){const k=D/r,P=k*Math.PI*2,B=Math.sin(P),H=Math.cos(P);g.x=-T*H,g.y=E,g.z=T*B,o.push(g.x,g.y,g.z),v.set(-T*H,w,T*B),v.normalize(),l.push(v.x,v.y,v.z),c.push(k+C,A)}if(x>0){const D=(x-1)*y;for(let k=0;k<r;k++){const P=D+k,B=D+k+1,H=x*y+k,G=x*y+k+1;s.push(P,B,H),s.push(B,G,H)}}}this.setIndex(s),this.setAttribute("position",new ln(o,3)),this.setAttribute("normal",new ln(l,3)),this.setAttribute("uv",new ln(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R2(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class k2 extends An{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const a=[],s=[],o=[],l=[],c=new Y,u=new ft;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const d=i+f/n*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),s.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(s[h]/e+1)/2,u.y=(s[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new ln(s,3)),this.setAttribute("normal",new ln(o,3)),this.setAttribute("uv",new ln(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class lg extends An{constructor(e=1,n=1,i=1,r=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),a=Math.floor(a);const u=[],f=[],h=[],d=[];let m=0;const y=[],v=i/2;let g=0;x(),s===!1&&(e>0&&_(!0),n>0&&_(!1)),this.setIndex(u),this.setAttribute("position",new ln(f,3)),this.setAttribute("normal",new ln(h,3)),this.setAttribute("uv",new ln(d,2));function x(){const E=new Y,T=new Y;let w=0;const A=(n-e)/i;for(let C=0;C<=a;C++){const D=[],k=C/a,P=k*(n-e)+e;for(let B=0;B<=r;B++){const H=B/r,G=H*l+o,V=Math.sin(G),U=Math.cos(G);T.x=P*V,T.y=-k*i+v,T.z=P*U,f.push(T.x,T.y,T.z),E.set(V,A,U).normalize(),h.push(E.x,E.y,E.z),d.push(H,1-k),D.push(m++)}y.push(D)}for(let C=0;C<r;C++)for(let D=0;D<a;D++){const k=y[D][C],P=y[D+1][C],B=y[D+1][C+1],H=y[D][C+1];(e>0||D!==0)&&(u.push(k,P,H),w+=3),(n>0||D!==a-1)&&(u.push(P,B,H),w+=3)}c.addGroup(g,w,0),g+=w}function _(E){const T=m,w=new ft,A=new Y;let C=0;const D=E===!0?e:n,k=E===!0?1:-1;for(let B=1;B<=r;B++)f.push(0,v*k,0),h.push(0,k,0),d.push(.5,.5),m++;const P=m;for(let B=0;B<=r;B++){const G=B/r*l+o,V=Math.cos(G),U=Math.sin(G);A.x=D*U,A.y=v*k,A.z=D*V,f.push(A.x,A.y,A.z),h.push(0,k,0),w.x=V*.5+.5,w.y=U*.5*k+.5,d.push(w.x,w.y),m++}for(let B=0;B<r;B++){const H=T+B,G=P+B;E===!0?u.push(G,G+1,H):u.push(G+1,G,H),C+=3}c.addGroup(g,C,E===!0?1:2),g+=C}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hS extends lg{constructor(e=1,n=1,i=32,r=1,a=!1,s=0,o=Math.PI*2){super(0,e,n,i,r,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new hS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hp extends An{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const a=[],s=[];o(r),c(i),u(),this.setAttribute("position",new ln(a,3)),this.setAttribute("normal",new ln(a.slice(),3)),this.setAttribute("uv",new ln(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(x){const _=new Y,E=new Y,T=new Y;for(let w=0;w<n.length;w+=3)d(n[w+0],_),d(n[w+1],E),d(n[w+2],T),l(_,E,T,x)}function l(x,_,E,T){const w=T+1,A=[];for(let C=0;C<=w;C++){A[C]=[];const D=x.clone().lerp(E,C/w),k=_.clone().lerp(E,C/w),P=w-C;for(let B=0;B<=P;B++)B===0&&C===w?A[C][B]=D:A[C][B]=D.clone().lerp(k,B/P)}for(let C=0;C<w;C++)for(let D=0;D<2*(w-C)-1;D++){const k=Math.floor(D/2);D%2===0?(h(A[C][k+1]),h(A[C+1][k]),h(A[C][k])):(h(A[C][k+1]),h(A[C+1][k+1]),h(A[C+1][k]))}}function c(x){const _=new Y;for(let E=0;E<a.length;E+=3)_.x=a[E+0],_.y=a[E+1],_.z=a[E+2],_.normalize().multiplyScalar(x),a[E+0]=_.x,a[E+1]=_.y,a[E+2]=_.z}function u(){const x=new Y;for(let _=0;_<a.length;_+=3){x.x=a[_+0],x.y=a[_+1],x.z=a[_+2];const E=v(x)/2/Math.PI+.5,T=g(x)/Math.PI+.5;s.push(E,1-T)}m(),f()}function f(){for(let x=0;x<s.length;x+=6){const _=s[x+0],E=s[x+2],T=s[x+4],w=Math.max(_,E,T),A=Math.min(_,E,T);w>.9&&A<.1&&(_<.2&&(s[x+0]+=1),E<.2&&(s[x+2]+=1),T<.2&&(s[x+4]+=1))}}function h(x){a.push(x.x,x.y,x.z)}function d(x,_){const E=x*3;_.x=e[E+0],_.y=e[E+1],_.z=e[E+2]}function m(){const x=new Y,_=new Y,E=new Y,T=new Y,w=new ft,A=new ft,C=new ft;for(let D=0,k=0;D<a.length;D+=9,k+=6){x.set(a[D+0],a[D+1],a[D+2]),_.set(a[D+3],a[D+4],a[D+5]),E.set(a[D+6],a[D+7],a[D+8]),w.set(s[k+0],s[k+1]),A.set(s[k+2],s[k+3]),C.set(s[k+4],s[k+5]),T.copy(x).add(_).add(E).divideScalar(3);const P=v(T);y(w,k+0,x,P),y(A,k+2,_,P),y(C,k+4,E,P)}}function y(x,_,E,T){T<0&&x.x===1&&(s[_]=x.x-1),E.x===0&&E.z===0&&(s[_]=T/2/Math.PI+.5)}function v(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hp(e.vertices,e.indices,e.radius,e.details)}}class D2 extends hp{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new D2(e.radius,e.detail)}}const rE=new Y,aE=new Y,iD=new Y,sE=new Ta;class PJ extends An{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),a=Math.cos($m*n),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},d=[];for(let m=0;m<l;m+=3){s?(c[0]=s.getX(m),c[1]=s.getX(m+1),c[2]=s.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:y,b:v,c:g}=sE;if(y.fromBufferAttribute(o,c[0]),v.fromBufferAttribute(o,c[1]),g.fromBufferAttribute(o,c[2]),sE.getNormal(iD),f[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,f[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const _=(x+1)%3,E=f[x],T=f[_],w=sE[u[x]],A=sE[u[_]],C=`${E}_${T}`,D=`${T}_${E}`;D in h&&h[D]?(iD.dot(h[D].normal)<=a&&(d.push(w.x,w.y,w.z),d.push(A.x,A.y,A.z)),h[D]=null):C in h||(h[C]={index0:c[x],index1:c[_],normal:iD.clone()})}}for(const m in h)if(h[m]){const{index0:y,index1:v}=h[m];rE.fromBufferAttribute(o,y),aE.fromBufferAttribute(o,v),d.push(rE.x,rE.y,rE.z),d.push(aE.x,aE.y,aE.z)}this.setAttribute("position",new ln(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Cu{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),a=0;n.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),n.push(a),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let r=0;const a=i.length;let s;n?s=n:s=e*i[a-1];let o=0,l=a-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=i[r]-s,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(a-1);const u=i[r],h=i[r+1]-u,d=(s-u)/h;return(r+d)/(a-1)}getTangent(e,n){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),l=n||(s.isVector2?new ft:new Y);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new Y,r=[],a=[],s=[],o=new Y,l=new Ct;for(let d=0;d<=e;d++){const m=d/e;r[d]=this.getTangentAt(m,new Y)}a[0]=new Y,s[0]=new Y;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),h<=c&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let d=1;d<=e;d++){if(a[d]=a[d-1].clone(),s[d]=s[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(kn(r[d-1].dot(r[d]),-1,1));a[d].applyMatrix4(l.makeRotationAxis(o,m))}s[d].crossVectors(r[d],a[d])}if(n===!0){let d=Math.acos(kn(a[0].dot(a[e]),-1,1));d/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(d=-d);for(let m=1;m<=e;m++)a[m].applyMatrix4(l.makeRotationAxis(r[m],d*m)),s[m].crossVectors(r[m],a[m])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class O2 extends Cu{constructor(e=0,n=0,i=1,r=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,n=new ft){const i=n,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,d=c-this.aY;l=h*u-d*f+this.aX,c=h*f+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class LJ extends O2{constructor(e,n,i,r,a,s){super(e,n,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function NU(){let t=0,e=0,n=0,i=0;function r(a,s,o,l){t=a,e=o,n=-3*a+3*s-2*o-l,i=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,c){r(s,o,c*(o-a),c*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,c,u,f){let h=(s-a)/c-(o-a)/(c+u)+(o-s)/u,d=(o-s)/u-(l-s)/(u+f)+(l-o)/f;h*=u,d*=u,r(s,o,h,d)},calc:function(a){const s=a*a,o=s*a;return t+e*a+n*s+i*o}}}const oE=new Y,rD=new NU,aD=new NU,sD=new NU;class PU extends Cu{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new Y){const i=n,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%a]:(oE.subVectors(r[0],r[1]).add(r[0]),c=oE);const f=r[o%a],h=r[(o+1)%a];if(this.closed||o+2<a?u=r[(o+2)%a]:(oE.subVectors(r[a-1],r[a-2]).add(r[a-1]),u=oE),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(f),d),y=Math.pow(f.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(u),d);y<1e-4&&(y=1),m<1e-4&&(m=y),v<1e-4&&(v=y),rD.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,m,y,v),aD.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,m,y,v),sD.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,m,y,v)}else this.curveType==="catmullrom"&&(rD.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),aD.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),sD.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return i.set(rD.calc(l),aD.calc(l),sD.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Y().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function t6(t,e,n,i,r){const a=(i-e)*.5,s=(r-n)*.5,o=t*t,l=t*o;return(2*n-2*i+a+s)*l+(-3*n+3*i-2*a-s)*o+a*t+n}function C0e(t,e){const n=1-t;return n*n*e}function R0e(t,e){return 2*(1-t)*t*e}function k0e(t,e){return t*t*e}function O1(t,e,n,i){return C0e(t,e)+R0e(t,n)+k0e(t,i)}function D0e(t,e){const n=1-t;return n*n*n*e}function O0e(t,e){const n=1-t;return 3*n*n*t*e}function I0e(t,e){return 3*(1-t)*t*t*e}function N0e(t,e){return t*t*t*e}function I1(t,e,n,i,r){return D0e(t,e)+O0e(t,n)+I0e(t,i)+N0e(t,r)}class LU extends Cu{constructor(e=new ft,n=new ft,i=new ft,r=new ft){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new ft){const i=n,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(I1(e,r.x,a.x,s.x,o.x),I1(e,r.y,a.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UU extends Cu{constructor(e=new Y,n=new Y,i=new Y,r=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Y){const i=n,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(I1(e,r.x,a.x,s.x,o.x),I1(e,r.y,a.y,s.y,o.y),I1(e,r.z,a.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class BU extends Cu{constructor(e=new ft,n=new ft){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ft){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ft){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UJ extends Cu{constructor(e=new Y,n=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Y){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Y){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FU extends Cu{constructor(e=new ft,n=new ft,i=new ft){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new ft){const i=n,r=this.v0,a=this.v1,s=this.v2;return i.set(O1(e,r.x,a.x,s.x),O1(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zU extends Cu{constructor(e=new Y,n=new Y,i=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Y){const i=n,r=this.v0,a=this.v1,s=this.v2;return i.set(O1(e,r.x,a.x,s.x),O1(e,r.y,a.y,s.y),O1(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jU extends Cu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ft){const i=n,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,l=r[s===0?s:s-1],c=r[s],u=r[s>r.length-2?r.length-1:s+1],f=r[s>r.length-3?r.length-1:s+2];return i.set(t6(o,l.x,c.x,u.x,f.x),t6(o,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new ft().fromArray(r))}return this}}var DA=Object.freeze({__proto__:null,ArcCurve:LJ,CatmullRomCurve3:PU,CubicBezierCurve:LU,CubicBezierCurve3:UU,EllipseCurve:O2,LineCurve:BU,LineCurve3:UJ,QuadraticBezierCurve:FU,QuadraticBezierCurve3:zU,SplineCurve:jU});class BJ extends Cu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new DA[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,o=this.curves[a],l=o.getLength(),c=l===0?0:1-s/l;return o.getPointAt(c,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(n.push(u),i=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new DA[r.type]().fromJSON(r))}return this}}class OA extends BJ{constructor(e){super(),this.type="Path",this.currentPoint=new ft,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new BU(this.currentPoint.clone(),new ft(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const a=new FU(this.currentPoint.clone(),new ft(e,n),new ft(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,a,s){const o=new LU(this.currentPoint.clone(),new ft(e,n),new ft(i,r),new ft(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new jU(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,i,r,a,s),this}absarc(e,n,i,r,a,s){return this.absellipse(e,n,i,i,r,a,s),this}ellipse(e,n,i,r,a,s,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,i,r,a,s,o,l),this}absellipse(e,n,i,r,a,s,o,l){const c=new O2(e,n,i,r,a,s,o,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Km extends OA{constructor(e){super(e),this.uuid=_l(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new OA().fromJSON(r))}return this}}function P0e(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let a=FJ(t,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c;if(i&&(a=z0e(t,e,a,n)),t.length>80*n){o=1/0,l=1/0;let u=-1/0,f=-1/0;for(let h=n;h<r;h+=n){const d=t[h],m=t[h+1];d<o&&(o=d),m<l&&(l=m),d>u&&(u=d),m>f&&(f=m)}c=Math.max(u-o,f-l),c=c!==0?32767/c:0}return y_(a,s,n,o,l,c,0),s}function FJ(t,e,n,i,r){let a;if(r===J0e(t,e,n,i)>0)for(let s=e;s<n;s+=i)a=n6(s/i|0,t[s],t[s+1],a);else for(let s=n-i;s>=e;s-=i)a=n6(s/i|0,t[s],t[s+1],a);return a&&Oy(a,a.next)&&(x_(a),a=a.next),a}function cg(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Oy(n,n.next)||Kr(n.prev,n,n.next)===0)){if(x_(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function y_(t,e,n,i,r,a,s){if(!t)return;!s&&a&&W0e(t,i,r,a);let o=t;for(;t.prev!==t.next;){const l=t.prev,c=t.next;if(a?U0e(t,i,r,a):L0e(t)){e.push(l.i,t.i,c.i),x_(t),t=c.next,o=c.next;continue}if(t=c,t===o){s?s===1?(t=B0e(cg(t),e),y_(t,e,n,i,r,a,2)):s===2&&F0e(t,e,n,i,r,a):y_(cg(t),e,n,i,r,a,1);break}}}function L0e(t){const e=t.prev,n=t,i=t.next;if(Kr(e,n,i)>=0)return!1;const r=e.x,a=n.x,s=i.x,o=e.y,l=n.y,c=i.y,u=Math.min(r,a,s),f=Math.min(o,l,c),h=Math.max(r,a,s),d=Math.max(o,l,c);let m=i.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=f&&m.y<=d&&e1(r,o,a,l,s,c,m.x,m.y)&&Kr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function U0e(t,e,n,i){const r=t.prev,a=t,s=t.next;if(Kr(r,a,s)>=0)return!1;const o=r.x,l=a.x,c=s.x,u=r.y,f=a.y,h=s.y,d=Math.min(o,l,c),m=Math.min(u,f,h),y=Math.max(o,l,c),v=Math.max(u,f,h),g=NN(d,m,e,n,i),x=NN(y,v,e,n,i);let _=t.prevZ,E=t.nextZ;for(;_&&_.z>=g&&E&&E.z<=x;){if(_.x>=d&&_.x<=y&&_.y>=m&&_.y<=v&&_!==r&&_!==s&&e1(o,u,l,f,c,h,_.x,_.y)&&Kr(_.prev,_,_.next)>=0||(_=_.prevZ,E.x>=d&&E.x<=y&&E.y>=m&&E.y<=v&&E!==r&&E!==s&&e1(o,u,l,f,c,h,E.x,E.y)&&Kr(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;_&&_.z>=g;){if(_.x>=d&&_.x<=y&&_.y>=m&&_.y<=v&&_!==r&&_!==s&&e1(o,u,l,f,c,h,_.x,_.y)&&Kr(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;E&&E.z<=x;){if(E.x>=d&&E.x<=y&&E.y>=m&&E.y<=v&&E!==r&&E!==s&&e1(o,u,l,f,c,h,E.x,E.y)&&Kr(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function B0e(t,e){let n=t;do{const i=n.prev,r=n.next.next;!Oy(i,r)&&jJ(i,n,n.next,r)&&v_(i,r)&&v_(r,i)&&(e.push(i.i,n.i,r.i),x_(n),x_(n.next),n=t=r),n=n.next}while(n!==t);return cg(n)}function F0e(t,e,n,i,r,a){let s=t;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&Y0e(s,o)){let l=HJ(s,o);s=cg(s,s.next),l=cg(l,l.next),y_(s,e,n,i,r,a,0),y_(l,e,n,i,r,a,0);return}o=o.next}s=s.next}while(s!==t)}function z0e(t,e,n,i){const r=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*i,l=a<s-1?e[a+1]*i:t.length,c=FJ(t,o,l,i,!1);c===c.next&&(c.steiner=!0),r.push(X0e(c))}r.sort(j0e);for(let a=0;a<r.length;a++)n=H0e(r[a],n);return n}function j0e(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const i=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=i-r}return n}function H0e(t,e){const n=V0e(t,e);if(!n)return e;const i=HJ(n,t);return cg(i,i.next),cg(n,n.next)}function V0e(t,e){let n=e;const i=t.x,r=t.y;let a=-1/0,s;if(Oy(t,n))return n;do{if(Oy(t,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const f=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=i&&f>a&&(a=f,s=n.x<n.next.x?n:n.next,f===i))return s}n=n.next}while(n!==e);if(!s)return null;const o=s,l=s.x,c=s.y;let u=1/0;n=s;do{if(i>=n.x&&n.x>=l&&i!==n.x&&zJ(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)){const f=Math.abs(r-n.y)/(i-n.x);v_(n,t)&&(f<u||f===u&&(n.x>s.x||n.x===s.x&&G0e(s,n)))&&(s=n,u=f)}n=n.next}while(n!==o);return s}function G0e(t,e){return Kr(t.prev,t,e.prev)<0&&Kr(e.next,t,t.next)<0}function W0e(t,e,n,i){let r=t;do r.z===0&&(r.z=NN(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,q0e(r)}function q0e(t){let e,n=1;do{let i=t,r;t=null;let a=null;for(e=0;i;){e++;let s=i,o=0;for(let c=0;c<n&&(o++,s=s.nextZ,!!s);c++);let l=n;for(;o>0||l>0&&s;)o!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=s}a.nextZ=null,n*=2}while(e>1);return t}function NN(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function X0e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function zJ(t,e,n,i,r,a,s,o){return(r-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(i-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(r-s)*(i-o)}function e1(t,e,n,i,r,a,s,o){return!(t===s&&e===o)&&zJ(t,e,n,i,r,a,s,o)}function Y0e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!$0e(t,e)&&(v_(t,e)&&v_(e,t)&&K0e(t,e)&&(Kr(t.prev,t,e.prev)||Kr(t,e.prev,e))||Oy(t,e)&&Kr(t.prev,t,t.next)>0&&Kr(e.prev,e,e.next)>0)}function Kr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Oy(t,e){return t.x===e.x&&t.y===e.y}function jJ(t,e,n,i){const r=cE(Kr(t,e,n)),a=cE(Kr(t,e,i)),s=cE(Kr(n,i,t)),o=cE(Kr(n,i,e));return!!(r!==a&&s!==o||r===0&&lE(t,n,e)||a===0&&lE(t,i,e)||s===0&&lE(n,t,i)||o===0&&lE(n,e,i))}function lE(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function cE(t){return t>0?1:t<0?-1:0}function $0e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&jJ(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function v_(t,e){return Kr(t.prev,t,t.next)<0?Kr(t,e,t.next)>=0&&Kr(t,t.prev,e)>=0:Kr(t,e,t.prev)<0||Kr(t,t.next,e)<0}function K0e(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function HJ(t,e){const n=PN(t.i,t.x,t.y),i=PN(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function n6(t,e,n,i){const r=PN(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function x_(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function PN(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function J0e(t,e,n,i){let r=0;for(let a=e,s=n-i;a<n;a+=i)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}class Z0e{static triangulate(e,n,i=2){return P0e(e,n,i)}}class hu{static area(e){const n=e.length;let i=0;for(let r=n-1,a=0;a<n;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return hu.area(e)<0}static triangulateShape(e,n){const i=[],r=[],a=[];i6(e),r6(i,e);let s=e.length;n.forEach(i6);for(let l=0;l<n.length;l++)r.push(s),s+=n[l].length,r6(i,n[l]);const o=Z0e.triangulate(i,r);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function i6(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function r6(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class I2 extends An{constructor(e=new Km([new ft(.5,.5),new ft(-.5,.5),new ft(-.5,-.5),new ft(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];s(c)}this.setAttribute("position",new ln(r,3)),this.setAttribute("uv",new ln(a,2)),this.computeVertexNormals();function s(o){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:.2,m=n.bevelSize!==void 0?n.bevelSize:d-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:Q0e;let _,E=!1,T,w,A,C;g&&(_=g.getSpacedPoints(u),E=!0,h=!1,T=g.computeFrenetFrames(u,!1),w=new Y,A=new Y,C=new Y),h||(v=0,d=0,m=0,y=0);const D=o.extractPoints(c);let k=D.shape;const P=D.holes;if(!hu.isClockWise(k)){k=k.reverse();for(let Ve=0,je=P.length;Ve<je;Ve++){const ot=P[Ve];hu.isClockWise(ot)&&(P[Ve]=ot.reverse())}}function H(Ve){const ot=10000000000000001e-36;let Te=Ve[0];for(let Ue=1;Ue<=Ve.length;Ue++){const Oe=Ue%Ve.length,We=Ve[Oe],Et=We.x-Te.x,vt=We.y-Te.y,re=Et*Et+vt*vt,J=Math.max(Math.abs(We.x),Math.abs(We.y),Math.abs(Te.x),Math.abs(Te.y)),ue=ot*J*J;if(re<=ue){Ve.splice(Oe,1),Ue--;continue}Te=We}}H(k),P.forEach(H);const G=P.length,V=k;for(let Ve=0;Ve<G;Ve++){const je=P[Ve];k=k.concat(je)}function U(Ve,je,ot){return je||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ve.clone().addScaledVector(je,ot)}const F=k.length;function q(Ve,je,ot){let Te,Ue,Oe;const We=Ve.x-je.x,Et=Ve.y-je.y,vt=ot.x-Ve.x,re=ot.y-Ve.y,J=We*We+Et*Et,ue=We*re-Et*vt;if(Math.abs(ue)>Number.EPSILON){const se=Math.sqrt(J),be=Math.sqrt(vt*vt+re*re),Z=je.x-Et/se,Ye=je.y+We/se,tt=ot.x-re/be,mt=ot.y+vt/be,Fe=((tt-Z)*re-(mt-Ye)*vt)/(We*re-Et*vt);Te=Z+We*Fe-Ve.x,Ue=Ye+Et*Fe-Ve.y;const rt=Te*Te+Ue*Ue;if(rt<=2)return new ft(Te,Ue);Oe=Math.sqrt(rt/2)}else{let se=!1;We>Number.EPSILON?vt>Number.EPSILON&&(se=!0):We<-Number.EPSILON?vt<-Number.EPSILON&&(se=!0):Math.sign(Et)===Math.sign(re)&&(se=!0),se?(Te=-Et,Ue=We,Oe=Math.sqrt(J)):(Te=We,Ue=Et,Oe=Math.sqrt(J/2))}return new ft(Te/Oe,Ue/Oe)}const X=[];for(let Ve=0,je=V.length,ot=je-1,Te=Ve+1;Ve<je;Ve++,ot++,Te++)ot===je&&(ot=0),Te===je&&(Te=0),X[Ve]=q(V[Ve],V[ot],V[Te]);const z=[];let ce,he=X.concat();for(let Ve=0,je=G;Ve<je;Ve++){const ot=P[Ve];ce=[];for(let Te=0,Ue=ot.length,Oe=Ue-1,We=Te+1;Te<Ue;Te++,Oe++,We++)Oe===Ue&&(Oe=0),We===Ue&&(We=0),ce[Te]=q(ot[Te],ot[Oe],ot[We]);z.push(ce),he=he.concat(ce)}let $;if(v===0)$=hu.triangulateShape(V,P);else{const Ve=[],je=[];for(let ot=0;ot<v;ot++){const Te=ot/v,Ue=d*Math.cos(Te*Math.PI/2),Oe=m*Math.sin(Te*Math.PI/2)+y;for(let We=0,Et=V.length;We<Et;We++){const vt=U(V[We],X[We],Oe);Ge(vt.x,vt.y,-Ue),Te===0&&Ve.push(vt)}for(let We=0,Et=G;We<Et;We++){const vt=P[We];ce=z[We];const re=[];for(let J=0,ue=vt.length;J<ue;J++){const se=U(vt[J],ce[J],Oe);Ge(se.x,se.y,-Ue),Te===0&&re.push(se)}Te===0&&je.push(re)}}$=hu.triangulateShape(Ve,je)}const Me=$.length,Se=m+y;for(let Ve=0;Ve<F;Ve++){const je=h?U(k[Ve],he[Ve],Se):k[Ve];E?(A.copy(T.normals[0]).multiplyScalar(je.x),w.copy(T.binormals[0]).multiplyScalar(je.y),C.copy(_[0]).add(A).add(w),Ge(C.x,C.y,C.z)):Ge(je.x,je.y,0)}for(let Ve=1;Ve<=u;Ve++)for(let je=0;je<F;je++){const ot=h?U(k[je],he[je],Se):k[je];E?(A.copy(T.normals[Ve]).multiplyScalar(ot.x),w.copy(T.binormals[Ve]).multiplyScalar(ot.y),C.copy(_[Ve]).add(A).add(w),Ge(C.x,C.y,C.z)):Ge(ot.x,ot.y,f/u*Ve)}for(let Ve=v-1;Ve>=0;Ve--){const je=Ve/v,ot=d*Math.cos(je*Math.PI/2),Te=m*Math.sin(je*Math.PI/2)+y;for(let Ue=0,Oe=V.length;Ue<Oe;Ue++){const We=U(V[Ue],X[Ue],Te);Ge(We.x,We.y,f+ot)}for(let Ue=0,Oe=P.length;Ue<Oe;Ue++){const We=P[Ue];ce=z[Ue];for(let Et=0,vt=We.length;Et<vt;Et++){const re=U(We[Et],ce[Et],Te);E?Ge(re.x,re.y+_[u-1].y,_[u-1].x+ot):Ge(re.x,re.y,f+ot)}}}pe(),xe();function pe(){const Ve=r.length/3;if(h){let je=0,ot=F*je;for(let Te=0;Te<Me;Te++){const Ue=$[Te];$e(Ue[2]+ot,Ue[1]+ot,Ue[0]+ot)}je=u+v*2,ot=F*je;for(let Te=0;Te<Me;Te++){const Ue=$[Te];$e(Ue[0]+ot,Ue[1]+ot,Ue[2]+ot)}}else{for(let je=0;je<Me;je++){const ot=$[je];$e(ot[2],ot[1],ot[0])}for(let je=0;je<Me;je++){const ot=$[je];$e(ot[0]+F*u,ot[1]+F*u,ot[2]+F*u)}}i.addGroup(Ve,r.length/3-Ve,0)}function xe(){const Ve=r.length/3;let je=0;Ne(V,je),je+=V.length;for(let ot=0,Te=P.length;ot<Te;ot++){const Ue=P[ot];Ne(Ue,je),je+=Ue.length}i.addGroup(Ve,r.length/3-Ve,1)}function Ne(Ve,je){let ot=Ve.length;for(;--ot>=0;){const Te=ot;let Ue=ot-1;Ue<0&&(Ue=Ve.length-1);for(let Oe=0,We=u+v*2;Oe<We;Oe++){const Et=F*Oe,vt=F*(Oe+1),re=je+Te+Et,J=je+Ue+Et,ue=je+Ue+vt,se=je+Te+vt;ct(re,J,ue,se)}}}function Ge(Ve,je,ot){l.push(Ve),l.push(je),l.push(ot)}function $e(Ve,je,ot){At(Ve),At(je),At(ot);const Te=r.length/3,Ue=x.generateTopUV(i,r,Te-3,Te-2,Te-1);fe(Ue[0]),fe(Ue[1]),fe(Ue[2])}function ct(Ve,je,ot,Te){At(Ve),At(je),At(Te),At(je),At(ot),At(Te);const Ue=r.length/3,Oe=x.generateSideWallUV(i,r,Ue-6,Ue-3,Ue-2,Ue-1);fe(Oe[0]),fe(Oe[1]),fe(Oe[3]),fe(Oe[1]),fe(Oe[2]),fe(Oe[3])}function At(Ve){r.push(l[Ve*3+0]),r.push(l[Ve*3+1]),r.push(l[Ve*3+2])}function fe(Ve){a.push(Ve.x),a.push(Ve.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return eye(n,i,e)}static fromJSON(e,n){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new DA[r.type]().fromJSON(r)),new I2(i,e.options)}}const Q0e={generateTopUV:function(t,e,n,i,r){const a=e[n*3],s=e[n*3+1],o=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new ft(a,s),new ft(o,l),new ft(c,u)]},generateSideWallUV:function(t,e,n,i,r,a){const s=e[n*3],o=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[r*3],d=e[r*3+1],m=e[r*3+2],y=e[a*3],v=e[a*3+1],g=e[a*3+2];return Math.abs(o-u)<Math.abs(s-c)?[new ft(s,1-l),new ft(c,1-f),new ft(h,1-m),new ft(y,1-g)]:[new ft(o,1-l),new ft(u,1-f),new ft(d,1-m),new ft(v,1-g)]}};function eye(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class gv extends hp{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new gv(e.radius,e.detail)}}class N2 extends An{constructor(e=[new ft(0,-.5),new ft(.5,0),new ft(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=kn(r,0,Math.PI*2);const a=[],s=[],o=[],l=[],c=[],u=1/n,f=new Y,h=new ft,d=new Y,m=new Y,y=new Y;let v=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:v=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,d.x=g*1,d.y=-v,d.z=g*0,y.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:v=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,d.x=g*1,d.y=-v,d.z=g*0,m.copy(d),d.x+=y.x,d.y+=y.y,d.z+=y.z,d.normalize(),l.push(d.x,d.y,d.z),y.copy(m)}for(let x=0;x<=n;x++){const _=i+x*u*r,E=Math.sin(_),T=Math.cos(_);for(let w=0;w<=e.length-1;w++){f.x=e[w].x*E,f.y=e[w].y,f.z=e[w].x*T,s.push(f.x,f.y,f.z),h.x=x/n,h.y=w/(e.length-1),o.push(h.x,h.y);const A=l[3*w+0]*E,C=l[3*w+1],D=l[3*w+0]*T;c.push(A,C,D)}}for(let x=0;x<n;x++)for(let _=0;_<e.length-1;_++){const E=_+x*e.length,T=E,w=E+e.length,A=E+e.length+1,C=E+1;a.push(T,w,C),a.push(A,C,w)}this.setIndex(a),this.setAttribute("position",new ln(s,3)),this.setAttribute("uv",new ln(o,2)),this.setAttribute("normal",new ln(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N2(e.points,e.segments,e.phiStart,e.phiLength)}}class dS extends hp{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new dS(e.radius,e.detail)}}class dp extends An{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const a=e/2,s=n/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,f=e/o,h=n/l,d=[],m=[],y=[],v=[];for(let g=0;g<u;g++){const x=g*h-s;for(let _=0;_<c;_++){const E=_*f-a;m.push(E,-x,0),y.push(0,0,1),v.push(_/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<o;x++){const _=x+c*g,E=x+c*(g+1),T=x+1+c*(g+1),w=x+1+c*g;d.push(_,E,w),d.push(E,T,w)}this.setIndex(d),this.setAttribute("position",new ln(m,3)),this.setAttribute("normal",new ln(y,3)),this.setAttribute("uv",new ln(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dp(e.width,e.height,e.widthSegments,e.heightSegments)}}class P2 extends An{constructor(e=.5,n=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let f=e;const h=(n-e)/r,d=new Y,m=new ft;for(let y=0;y<=r;y++){for(let v=0;v<=i;v++){const g=a+v/i*s;d.x=f*Math.cos(g),d.y=f*Math.sin(g),l.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(d.x/n+1)/2,m.y=(d.y/n+1)/2,u.push(m.x,m.y)}f+=h}for(let y=0;y<r;y++){const v=y*(i+1);for(let g=0;g<i;g++){const x=g+v,_=x,E=x+i+1,T=x+i+2,w=x+1;o.push(_,E,w),o.push(E,T,w)}}this.setIndex(o),this.setAttribute("position",new ln(l,3)),this.setAttribute("normal",new ln(c,3)),this.setAttribute("uv",new ln(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class L2 extends An{constructor(e=new Km([new ft(0,.5),new ft(-.5,-.5),new ft(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new ln(r,3)),this.setAttribute("normal",new ln(a,3)),this.setAttribute("uv",new ln(s,2));function c(u){const f=r.length/3,h=u.extractPoints(n);let d=h.shape;const m=h.holes;hu.isClockWise(d)===!1&&(d=d.reverse());for(let v=0,g=m.length;v<g;v++){const x=m[v];hu.isClockWise(x)===!0&&(m[v]=x.reverse())}const y=hu.triangulateShape(d,m);for(let v=0,g=m.length;v<g;v++){const x=m[v];d=d.concat(x)}for(let v=0,g=d.length;v<g;v++){const x=d[v];r.push(x.x,x.y,0),a.push(0,0,1),s.push(x.x,x.y)}for(let v=0,g=y.length;v<g;v++){const x=y[v],_=x[0]+f,E=x[1]+f,T=x[2]+f;i.push(_,E,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return tye(n,e)}static fromJSON(e,n){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=n[e.shapes[r]];i.push(s)}return new L2(i,e.curveSegments)}}function tye(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class bv extends An{constructor(e=1,n=32,i=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(s+o,Math.PI);let c=0;const u=[],f=new Y,h=new Y,d=[],m=[],y=[],v=[];for(let g=0;g<=i;g++){const x=[],_=g/i;let E=0;g===0&&s===0?E=.5/n:g===i&&l===Math.PI&&(E=-.5/n);for(let T=0;T<=n;T++){const w=T/n;f.x=-e*Math.cos(r+w*a)*Math.sin(s+_*o),f.y=e*Math.cos(s+_*o),f.z=e*Math.sin(r+w*a)*Math.sin(s+_*o),m.push(f.x,f.y,f.z),h.copy(f).normalize(),y.push(h.x,h.y,h.z),v.push(w+E,1-_),x.push(c++)}u.push(x)}for(let g=0;g<i;g++)for(let x=0;x<n;x++){const _=u[g][x+1],E=u[g][x],T=u[g+1][x],w=u[g+1][x+1];(g!==0||s>0)&&d.push(_,E,w),(g!==i-1||l<Math.PI)&&d.push(E,T,w)}this.setIndex(d),this.setAttribute("position",new ln(m,3)),this.setAttribute("normal",new ln(y,3)),this.setAttribute("uv",new ln(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class U2 extends hp{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new U2(e.radius,e.detail)}}class B2 extends An{constructor(e=1,n=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],o=[],l=[],c=[],u=new Y,f=new Y,h=new Y;for(let d=0;d<=i;d++)for(let m=0;m<=r;m++){const y=m/r*a,v=d/i*Math.PI*2;f.x=(e+n*Math.cos(v))*Math.cos(y),f.y=(e+n*Math.cos(v))*Math.sin(y),f.z=n*Math.sin(v),o.push(f.x,f.y,f.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(m/r),c.push(d/i)}for(let d=1;d<=i;d++)for(let m=1;m<=r;m++){const y=(r+1)*d+m-1,v=(r+1)*(d-1)+m-1,g=(r+1)*(d-1)+m,x=(r+1)*d+m;s.push(y,v,x),s.push(v,g,x)}this.setIndex(s),this.setAttribute("position",new ln(o,3)),this.setAttribute("normal",new ln(l,3)),this.setAttribute("uv",new ln(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class F2 extends An{constructor(e=1,n=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],u=[],f=new Y,h=new Y,d=new Y,m=new Y,y=new Y,v=new Y,g=new Y;for(let _=0;_<=i;++_){const E=_/i*a*Math.PI*2;x(E,a,s,e,d),x(E+.01,a,s,e,m),v.subVectors(m,d),g.addVectors(m,d),y.crossVectors(v,g),g.crossVectors(y,v),y.normalize(),g.normalize();for(let T=0;T<=r;++T){const w=T/r*Math.PI*2,A=-n*Math.cos(w),C=n*Math.sin(w);f.x=d.x+(A*g.x+C*y.x),f.y=d.y+(A*g.y+C*y.y),f.z=d.z+(A*g.z+C*y.z),l.push(f.x,f.y,f.z),h.subVectors(f,d).normalize(),c.push(h.x,h.y,h.z),u.push(_/i),u.push(T/r)}}for(let _=1;_<=i;_++)for(let E=1;E<=r;E++){const T=(r+1)*(_-1)+(E-1),w=(r+1)*_+(E-1),A=(r+1)*_+E,C=(r+1)*(_-1)+E;o.push(T,w,C),o.push(w,A,C)}this.setIndex(o),this.setAttribute("position",new ln(l,3)),this.setAttribute("normal",new ln(c,3)),this.setAttribute("uv",new ln(u,2));function x(_,E,T,w,A){const C=Math.cos(_),D=Math.sin(_),k=T/E*_,P=Math.cos(k);A.x=w*(2+P)*.5*C,A.y=w*(2+P)*D*.5,A.z=w*Math.sin(k)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class z2 extends An{constructor(e=new zU(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),n=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(n,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new Y,l=new Y,c=new ft;let u=new Y;const f=[],h=[],d=[],m=[];y(),this.setIndex(m),this.setAttribute("position",new ln(f,3)),this.setAttribute("normal",new ln(h,3)),this.setAttribute("uv",new ln(d,2));function y(){for(let _=0;_<n;_++)v(_);v(a===!1?n:0),x(),g()}function v(_){u=e.getPointAt(_/n,u);const E=s.normals[_],T=s.binormals[_];for(let w=0;w<=r;w++){const A=w/r*Math.PI*2,C=Math.sin(A),D=-Math.cos(A);l.x=D*E.x+C*T.x,l.y=D*E.y+C*T.y,l.z=D*E.z+C*T.z,l.normalize(),h.push(l.x,l.y,l.z),o.x=u.x+i*l.x,o.y=u.y+i*l.y,o.z=u.z+i*l.z,f.push(o.x,o.y,o.z)}}function g(){for(let _=1;_<=n;_++)for(let E=1;E<=r;E++){const T=(r+1)*(_-1)+(E-1),w=(r+1)*_+(E-1),A=(r+1)*_+E,C=(r+1)*(_-1)+E;m.push(T,w,C),m.push(w,A,C)}}function x(){for(let _=0;_<=n;_++)for(let E=0;E<=r;E++)c.x=_/n,c.y=E/r,d.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new z2(new DA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class HU extends An{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new Y,a=new Y;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,d=f.count;for(let m=h,y=h+d;m<y;m+=3)for(let v=0;v<3;v++){const g=o.getX(m+v),x=o.getX(m+(v+1)%3);r.fromBufferAttribute(s,g),a.fromBufferAttribute(s,x),a6(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,f=3*o+(c+1)%3;r.fromBufferAttribute(s,u),a.fromBufferAttribute(s,f),a6(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new ln(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function a6(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var s6=Object.freeze({__proto__:null,BoxGeometry:fp,CapsuleGeometry:R2,CircleGeometry:k2,ConeGeometry:hS,CylinderGeometry:lg,DodecahedronGeometry:D2,EdgesGeometry:PJ,ExtrudeGeometry:I2,IcosahedronGeometry:gv,LatheGeometry:N2,OctahedronGeometry:dS,PlaneGeometry:dp,PolyhedronGeometry:hp,RingGeometry:P2,ShapeGeometry:L2,SphereGeometry:bv,TetrahedronGeometry:U2,TorusGeometry:B2,TorusKnotGeometry:F2,TubeGeometry:z2,WireframeGeometry:HU});class VJ extends ka{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class GJ extends is{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class yv extends ka{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new li,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nc extends yv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ft(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ut(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class WJ extends ka{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ut(16777215),this.specular=new Ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new li,this.combine=oS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IA extends ka{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qJ extends ka{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class XJ extends ka{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new li,this.combine=oS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VU extends ka{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=pJ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class GU extends ka{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class YJ extends ka{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=up,this.normalScale=new ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $J extends qs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function km(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function KJ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function JJ(t){function e(r,a){return t[r]-t[a]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function LN(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,s=0;s!==i;++a){const o=n[a]*e;for(let l=0;l!==e;++l)r[s++]=t[o+l]}return r}function WU(t,e,n,i){let r=1,a=t[0];for(;a!==void 0&&a[i]===void 0;)a=t[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),n.push(...s)),a=t[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(n,n.length)),a=t[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),n.push(s)),a=t[r++];while(a!==void 0)}function nye(t,e,n,i,r=30){const a=t.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const c=a.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const m=c.times[d]*r;if(!(m<n||m>=i)){f.push(c.times[d]);for(let y=0;y<u;++y)h.push(c.values[d*u+y])}}f.length!==0&&(c.times=km(f,c.times.constructor),c.values=km(h,c.values.constructor),s.push(c))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function iye(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let s=0;s<r;++s){const o=n.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(g){return g.name===o.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const m=o.times.length-1;let y;if(a<=o.times[0]){const g=u,x=f-u;y=o.values.slice(g,x)}else if(a>=o.times[m]){const g=m*f+u,x=g+f-u;y=o.values.slice(g,x)}else{const g=o.createInterpolant(),x=u,_=f-u;g.evaluate(a),y=g.resultBuffer.slice(x,_)}l==="quaternion"&&new Hn().fromArray(y).normalize().conjugate().toArray(y);const v=c.times.length;for(let g=0;g<v;++g){const x=g*d+h;if(l==="quaternion")Hn.multiplyQuaternionsFlat(c.values,x,y,0,c.values,x);else{const _=d-h*2;for(let E=0;E<_;++E)c.values[x+E]-=y[E]}}}return t.blendMode=_U,t}class rye{static convertArray(e,n){return km(e,n)}static isTypedArray(e){return KJ(e)}static getKeyframeOrder(e){return JJ(e)}static sortedArray(e,n,i){return LN(e,n,i)}static flattenJSON(e,n,i,r){WU(e,n,i,r)}static subclip(e,n,i,r,a=30){return nye(e,n,i,r,a)}static makeClipAdditive(e,n=0,i=e,r=30){return iye(e,n,i,r)}}class vv{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],a=n[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=n[++i],e<r)break t}s=n.length;break n}if(!(e>=a)){const o=n[1];e<o&&(i=2,a=o);for(let l=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=a,a=n[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const o=i+s>>>1;e<n[o]?s=o:i=o+1}if(r=n[i],a=n[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)n[s]=i[a+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ZJ extends vv{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Am,endingEnd:Am}}intervalChanged_(e,n,i){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],l=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case Cm:a=e,o=2*n-i;break;case d_:a=r.length-2,o=n+r[a]-r[a+1];break;default:a=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Cm:s=e,l=2*i-n;break;case d_:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=n}const c=(i-n)*.5,u=this.valueSize;this._weightPrev=c/(n-o),this._weightNext=c/(l-i),this._offsetPrev=a*u,this._offsetNext=s*u}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,m=(i-n)/(r-n),y=m*m,v=y*m,g=-h*v+2*h*y-h*m,x=(1+h)*v+(-1.5-2*h)*y+(-.5+h)*m+1,_=(-1-d)*v+(1.5+d)*y+.5*m,E=d*v-d*y;for(let T=0;T!==o;++T)a[T]=g*s[u+T]+x*s[c+T]+_*s[l+T]+E*s[f+T];return a}}class qU extends vv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-n)/(r-n),f=1-u;for(let h=0;h!==o;++h)a[h]=s[c+h]*f+s[l+h]*u;return a}}class QJ extends vv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Pc{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=km(n,this.TimeBufferType),this.values=km(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:km(e.times,Array),values:km(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new QJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ZJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Ty:n=this.InterpolantFactoryMethodDiscrete;break;case Ay:n=this.InterpolantFactoryMethodLinear;break;case WM:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ty;case this.InterpolantFactoryMethodLinear:return Ay;case this.InterpolantFactoryMethodSmooth:return WM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>n;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(r!==void 0&&KJ(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===WM,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const f=o*i,h=f-i,d=f+i;for(let m=0;m!==i;++m){const y=n[f+m];if(y!==n[h+m]||y!==n[d+m]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const f=o*i,h=s*i;for(let d=0;d!==i;++d)n[h+d]=n[f+d]}++s}}if(a>0){e[s]=e[a];for(let o=a*i,l=s*i,c=0;c!==i;++c)n[l+c]=n[o+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Pc.prototype.ValueTypeName="";Pc.prototype.TimeBufferType=Float32Array;Pc.prototype.ValueBufferType=Float32Array;Pc.prototype.DefaultInterpolation=Ay;class Dg extends Pc{constructor(e,n,i){super(e,n,i)}}Dg.prototype.ValueTypeName="bool";Dg.prototype.ValueBufferType=Array;Dg.prototype.DefaultInterpolation=Ty;Dg.prototype.InterpolantFactoryMethodLinear=void 0;Dg.prototype.InterpolantFactoryMethodSmooth=void 0;class XU extends Pc{constructor(e,n,i,r){super(e,n,i,r)}}XU.prototype.ValueTypeName="color";class ug extends Pc{constructor(e,n,i,r){super(e,n,i,r)}}ug.prototype.ValueTypeName="number";class eZ extends vv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(i-n)/(r-n);let c=e*o;for(let u=c+o;c!==u;c+=4)Hn.slerpFlat(a,0,s,c-o,s,c,l);return a}}class fg extends Pc{constructor(e,n,i,r){super(e,n,i,r)}InterpolantFactoryMethodLinear(e){return new eZ(this.times,this.values,this.getValueSize(),e)}}fg.prototype.ValueTypeName="quaternion";fg.prototype.InterpolantFactoryMethodSmooth=void 0;class Og extends Pc{constructor(e,n,i){super(e,n,i)}}Og.prototype.ValueTypeName="string";Og.prototype.ValueBufferType=Array;Og.prototype.DefaultInterpolation=Ty;Og.prototype.InterpolantFactoryMethodLinear=void 0;Og.prototype.InterpolantFactoryMethodSmooth=void 0;class hg extends Pc{constructor(e,n,i,r){super(e,n,i,r)}}hg.prototype.ValueTypeName="vector";class Iy{constructor(e="",n=-1,i=[],r=y2){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=_l(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,o=i.length;s!==o;++s)n.push(sye(i[s]).scale(r));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=i.length;a!==s;++a)n.push(Pc.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const a=n.length,s=[];for(let o=0;o<a;o++){let l=[],c=[];l.push((o+a-1)%a,o,(o+1)%a),c.push(0,1,0);const u=JJ(l);l=LN(l,1,u),c=LN(c,1,u),!r&&l[0]===0&&(l.push(a),c.push(c[0])),s.push(new ug(".morphTargetInfluences["+n[o].name+"]",l,c).scale(1/i))}return new this(e,-1,s)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(a);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(c)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],n,i));return s}static parseAnimation(e,n){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,d,m,y){if(d.length!==0){const v=[],g=[];WU(d,v,g,m),v.length!==0&&y.push(new f(h,v,g))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let y=0;y<h[m].morphTargets.length;y++)d[h[m].morphTargets[y]]=-1;for(const y in d){const v=[],g=[];for(let x=0;x!==h[m].morphTargets.length;++x){const _=h[m];v.push(_.time),g.push(_.morphTarget===y?1:0)}r.push(new ug(".morphTargetInfluence["+y+"]",v,g))}l=d.length*s}else{const d=".bones["+n[f].name+"]";i(hg,d+".position",h,"pos",r),i(fg,d+".quaternion",h,"rot",r),i(hg,d+".scale",h,"scl",r)}}return r.length===0?null:new this(a,l,r,o)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aye(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ug;case"vector":case"vector2":case"vector3":case"vector4":return hg;case"color":return XU;case"quaternion":return fg;case"bool":case"boolean":return Dg;case"string":return Og}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function sye(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=aye(t.type);if(t.times===void 0){const n=[],i=[];WU(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Qu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class j2{constructor(e,n,i){const r=this;let a=!1,s=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.abortController=new AbortController,this.itemStart=function(u){o++,a===!1&&r.onStart!==void 0&&r.onStart(u,s,o),a=!0},this.itemEnd=function(u){s++,r.onProgress!==void 0&&r.onProgress(u,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],m=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return m}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const tZ=new j2;class Cs{constructor(e){this.manager=e!==void 0?e:tZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,a){i.load(e,r,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Cs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Gf={};class oye extends Error{constructor(e,n){super(e),this.response=n}}class Es extends Cs{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Qu.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Gf[e]!==void 0){Gf[e].push({onLoad:n,onProgress:i,onError:r});return}Gf[e]=[],Gf[e].push({onLoad:n,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Gf[e],f=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),d=h?parseInt(h):0,m=d!==0;let y=0;const v=new ReadableStream({start(g){x();function x(){f.read().then(({done:_,value:E})=>{if(_)g.close();else{y+=E.byteLength;const T=new ProgressEvent("progress",{lengthComputable:m,loaded:y,total:d});for(let w=0,A=u.length;w<A;w++){const C=u[w];C.onProgress&&C.onProgress(T)}g.enqueue(E),x()}},_=>{g.error(_)})}}});return new Response(v)}else throw new oye(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o==="")return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return c.arrayBuffer().then(m=>d.decode(m))}}}).then(c=>{Qu.add(`file:${e}`,c);const u=Gf[e];delete Gf[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=Gf[e];if(u===void 0)throw this.manager.itemError(e),c;delete Gf[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class lye extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new Es(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),a.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Iy.parse(e[i]);n.push(r)}return n}}class cye extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=this,s=[],o=new C2,l=new Es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const d=a.parse(h,!0);s[f]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(o.minFilter=Wi),o.image=s,o.format=d.format,o.needsUpdate=!0,n&&n(o))},i,r)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=a.parse(f,!0);if(h.isCubemap){const d=h.mipmaps.length/h.mipmapCount;for(let m=0;m<d;m++){s[m]={mipmaps:[]};for(let y=0;y<h.mipmapCount;y++)s[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+y]),s[m].format=h.format,s[m].width=h.width,s[m].height=h.height}o.image=s}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=Wi),o.format=h.format,o.needsUpdate=!0,n&&n(o)},i,r);return o}}const Db=new WeakMap;class __ extends Cs{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Qu.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0);else{let f=Db.get(s);f===void 0&&(f=[],Db.set(s,f)),f.push({onLoad:n,onError:r})}return s}const o=g_("img");function l(){u(),n&&n(this);const f=Db.get(this)||[];for(let h=0;h<f.length;h++){const d=f[h];d.onLoad&&d.onLoad(this)}Db.delete(this),a.manager.itemEnd(e)}function c(f){u(),r&&r(f),Qu.remove(`image:${e}`);const h=Db.get(this)||[];for(let d=0;d<h.length;d++){const m=h[d];m.onError&&m.onError(f)}Db.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Qu.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class nZ extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=new cS;a.colorSpace=gs;const s=new __(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(c){s.load(e[c],function(u){a.images[c]=u,o++,o===6&&(a.needsUpdate=!0,n&&n(a))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return a}}class YU extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new ws,o=new Es(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let c;try{c=a.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:ga,s.wrapT=c.wrapT!==void 0?c.wrapT:ga,s.magFilter=c.magFilter!==void 0?c.magFilter:Wi,s.minFilter=c.minFilter!==void 0?c.minFilter:Wi,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(s.colorSpace=c.colorSpace),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=dc),c.mipmapCount===1&&(s.minFilter=Wi),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,n&&n(s,c)},i,r),s}}class Ny extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=new tr,s=new __(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,n!==void 0&&n(a)},i,r),a}}class pp extends Ti{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ut(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class iZ extends pp{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ut(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const oD=new Ct,o6=new Y,l6=new Y;class $U{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ft(512,512),this.mapType=yo,this.map=null,this.mapPass=null,this.matrix=new Ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kg,this._frameExtents=new ft(1,1),this._viewportCount=1,this._viewports=[new ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;o6.setFromMatrixPosition(e.matrixWorld),n.position.copy(o6),l6.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(l6),n.updateMatrixWorld(),oD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oD,n.coordinateSystem,n.reversedDepth),n.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(oD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class uye extends $U{constructor(){super(new Yr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,i=Ry*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||n.far;(i!==n.fov||r!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=r,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class KU extends pp{constructor(e,n,i=0,r=Math.PI/3,a=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.target=new Ti,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new uye}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const c6=new Ct,gx=new Y,lD=new Y;class fye extends $U{constructor(){super(new Yr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ft(4,2),this._viewportCount=6,this._viewports=[new ni(2,1,1,1),new ni(0,1,1,1),new ni(3,1,1,1),new ni(1,1,1,1),new ni(3,0,1,1),new ni(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),gx.setFromMatrixPosition(e.matrixWorld),i.position.copy(gx),lD.copy(i.position),lD.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(lD),i.updateMatrixWorld(),r.makeTranslation(-gx.x,-gx.y,-gx.z),c6.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(c6,i.coordinateSystem,i.reversedDepth)}}class JU extends pp{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new fye}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ph extends _2{constructor(e=-1,n=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,o=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=c*this.view.offsetX,s=a+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class hye extends $U{constructor(){super(new Ph(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class H2 extends pp{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.target=new Ti,this.shadow=new hye}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rZ extends pp{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class aZ extends pp{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class sZ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*r),n.addScaledVector(s[2],.488603*a),n.addScaledVector(s[3],.488603*i),n.addScaledVector(s[4],1.092548*(i*r)),n.addScaledVector(s[5],1.092548*(r*a)),n.addScaledVector(s[6],.315392*(3*a*a-1)),n.addScaledVector(s[7],1.092548*(i*a)),n.addScaledVector(s[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*r),n.addScaledVector(s[2],2*.511664*a),n.addScaledVector(s[3],2*.511664*i),n.addScaledVector(s[4],2*.429043*i*r),n.addScaledVector(s[5],2*.429043*r*a),n.addScaledVector(s[6],.743125*a*a-.247708),n.addScaledVector(s[7],2*.429043*i*a),n.addScaledVector(s[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,a=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*a,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*i*a,n[8]=.546274*(i*i-r*r)}}class oZ extends pp{constructor(e=new sZ,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class V2 extends Cs{constructor(e){super(e),this.textures={}}load(e,n,i,r){const a=this,s=new Es(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),a.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new Ut().setHex(s.value);break;case"v2":r.uniforms[a].value=new ft().fromArray(s.value);break;case"v3":r.uniforms[a].value=new Y().fromArray(s.value);break;case"v4":r.uniforms[a].value=new ni().fromArray(s.value);break;case"m3":r.uniforms[a].value=new Wn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new Ct().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new ft().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ft().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return V2.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:VJ,SpriteMaterial:RU,RawShaderMaterial:GJ,ShaderMaterial:is,PointsMaterial:A2,MeshPhysicalMaterial:Nc,MeshStandardMaterial:yv,MeshPhongMaterial:WJ,MeshToonMaterial:IA,MeshNormalMaterial:qJ,MeshLambertMaterial:XJ,MeshDepthMaterial:VU,MeshDistanceMaterial:GU,MeshBasicMaterial:go,MeshMatcapMaterial:YJ,LineDashedMaterial:$J,LineBasicMaterial:qs,Material:ka};return new n[e]}}class Xd{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class G2 extends An{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lZ extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new Es(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),a.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(d,m){if(n[m]!==void 0)return n[m];const v=d.interleavedBuffers[m],g=a(d,v.buffer),x=A0(v.type,g),_=new uS(x,v.stride);return _.uuid=v.uuid,n[m]=_,_}function a(d,m){if(i[m]!==void 0)return i[m];const v=d.arrayBuffers[m],g=new Uint32Array(v).buffer;return i[m]=g,g}const s=e.isInstancedBufferGeometry?new G2:new An,o=e.data.index;if(o!==void 0){const d=A0(o.type,o.array);s.setIndex(new Tn(d,1))}const l=e.data.attributes;for(const d in l){const m=l[d];let y;if(m.isInterleavedBufferAttribute){const v=r(e.data,m.data);y=new Io(v,m.itemSize,m.offset,m.normalized)}else{const v=A0(m.type,m.array),g=m.isInstancedBufferAttribute?Mh:Tn;y=new g(v,m.itemSize,m.normalized)}m.name!==void 0&&(y.name=m.name),m.usage!==void 0&&y.setUsage(m.usage),s.setAttribute(d,y)}const c=e.data.morphAttributes;if(c)for(const d in c){const m=c[d],y=[];for(let v=0,g=m.length;v<g;v++){const x=m[v];let _;if(x.isInterleavedBufferAttribute){const E=r(e.data,x.data);_=new Io(E,x.itemSize,x.offset,x.normalized)}else{const E=A0(x.type,x.array);_=new Tn(E,x.itemSize,x.normalized)}x.name!==void 0&&(_.name=x.name),y.push(_)}s.morphAttributes[d]=y}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let d=0,m=f.length;d!==m;++d){const y=f[d];s.addGroup(y.start,y.count,y.materialIndex)}const h=e.data.boundingSphere;return h!==void 0&&(s.boundingSphere=new xr().fromJSON(h)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class dye extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=this,s=this.path===""?Xd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Es(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?Xd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new Es(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,n),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){n!==void 0&&n(c)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,a,l,o,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),n!==void 0){let f=!1;for(const h in s)if(s[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Km().fromJSON(e[i]);n[a.uuid]=a}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new mv().fromJSON(e[a],r);i[o.uuid]=o}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new lZ;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in s6?o=s6[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const a=new V2;a.setTextures(n);for(let s=0,o=e.length;s<o;s++){const l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=a.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=Iy.parse(r);n[a.uuid]=a}return n}parseImages(e,n){const i=this,r={};let a;function s(l){return i.manager.itemStart(l),a.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return s(u)}else return l.data?{data:A0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new j2(n);a=new __(l),a.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){const d=[];for(let m=0,y=h.length;m<y;m++){const v=h[m],g=o(v);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new ws(g.data,g.width,g.height)))}r[f.uuid]=new Pd(d)}else{const d=o(f.url);r[f.uuid]=new Pd(d)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await r.loadAsync(l)}else return s.data?{data:A0(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new __(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f],m=await a(d);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new ws(m.data,m.width,m.height)))}i[l.uuid]=new Pd(u)}else{const u=await a(l.url);i[l.uuid]=new Pd(u)}}}return i}parseTextures(e,n){function i(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=n[o.image],c=l.data;let u;Array.isArray(c)?(u=new cS,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new ws:u=new tr,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=i(o.mapping,pye)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=i(o.wrap[0],u6),u.wrapT=i(o.wrap[1],u6)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.minFilter!==void 0&&(u.minFilter=i(o.minFilter,f6)),o.magFilter!==void 0&&(u.magFilter=i(o.magFilter,f6)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,n,i,r,a){let s;function o(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const d=[];for(let m=0,y=h.length;m<y;m++){const v=h[m];i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),d.push(i[v])}return d}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let u,f;switch(e.type){case"Scene":s=new pv,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Ut(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new w2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new S2(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Yr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Ph(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new rZ(e.color,e.intensity);break;case"DirectionalLight":s=new H2(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new JU(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new aZ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new KU(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new iZ(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new oZ().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),f=l(e.material),s=new E2(u,f),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),f=l(e.material),s=new fi(u,f);break;case"InstancedMesh":u=o(e.geometry),f=l(e.material);const h=e.count,d=e.instanceMatrix,m=e.instanceColor;s=new M2(u,f,h),s.instanceMatrix=new Mh(new Float32Array(d.array),16),m!==void 0&&(s.instanceColor=new Mh(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":u=o(e.geometry),f=l(e.material),s=new kU(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),s.geometry=u,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(y=>{let v=null,g=null;return y.boundingBox!==void 0&&(v=new vi().fromJSON(y.boundingBox)),y.boundingSphere!==void 0&&(g=new xr().fromJSON(y.boundingSphere)),{...y,boundingBox:v,boundingSphere:g}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=c(e.matricesTexture.uuid),s._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new xr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new vi().fromJSON(e.boundingBox));break;case"LOD":s=new IJ;break;case"Line":s=new Th(o(e.geometry),l(e.material));break;case"LineLoop":s=new DU(o(e.geometry),l(e.material));break;case"LineSegments":s=new Au(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new OU(o(e.geometry),l(e.material));break;case"Sprite":s=new OJ(l(e.material));break;case"Group":s=new Zu;break;case"Bone":s=new fS;break;default:s=new Ti}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let d=0;d<h.length;d++)s.add(this.parseObject(h[d],n,i,r,a))}if(e.animations!==void 0){const h=e.animations;for(let d=0;d<h.length;d++){const m=h[d];s.animations.push(a[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const h=e.levels;for(let d=0;d<h.length;d++){const m=h[d],y=s.getObjectByProperty("uuid",m.object);y!==void 0&&s.addLevel(y,m.distance,m.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new Ti}})}}const pye={UVMapping:tp,CubeReflectionMapping:mf,CubeRefractionMapping:np,EquirectangularReflectionMapping:xy,EquirectangularRefractionMapping:h_,CubeUVReflectionMapping:uv},u6={RepeatWrapping:ip,ClampToEdgeWrapping:ga,MirroredRepeatWrapping:_y},f6={NearestFilter:es,NearestMipmapNearestFilter:h2,NearestMipmapLinearFilter:Tm,LinearFilter:Wi,LinearMipmapNearestFilter:G0,LinearMipmapLinearFilter:dc},cD=new WeakMap;class cZ extends Cs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Qu.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(c=>{if(cD.has(s)===!0)r&&r(cD.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return n&&n(c),a.manager.itemEnd(e),c});return}return setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(c){return Qu.add(`image-bitmap:${e}`,c),n&&n(c),a.manager.itemEnd(e),c}).catch(function(c){r&&r(c),cD.set(l,c),Qu.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Qu.add(`image-bitmap:${e}`,l),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let uE;class ZU{static getContext(){return uE===void 0&&(uE=new(window.AudioContext||window.webkitAudioContext)),uE}static setContext(e){uE=e}}class mye extends Cs{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new Es(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const c=l.slice(0);ZU.getContext().decodeAudioData(c,function(f){n(f)}).catch(o)}catch(c){o(c)}},i,r);function o(l){r?r(l):console.error(l),a.manager.itemError(e)}}}const h6=new Ct,d6=new Ct,Wp=new Ct;class gye{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Wp.copy(e.projectionMatrix);const r=n.eyeSep/2,a=r*n.near/n.focus,s=n.near*Math.tan($m*n.fov*.5)/n.zoom;let o,l;d6.elements[12]=-r,h6.elements[12]=r,o=-s*n.aspect+a,l=s*n.aspect+a,Wp.elements[0]=2*n.near/(l-o),Wp.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Wp),o=-s*n.aspect-a,l=s*n.aspect-a,Wp.elements[0]=2*n.near/(l-o),Wp.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Wp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(d6),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(h6)}}class uZ extends Yr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class QU{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const qp=new Y,uD=new Hn,bye=new Y,Xp=new Y,Yp=new Y;class yye extends Ti{constructor(){super(),this.type="AudioListener",this.context=ZU.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new QU}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(qp,uD,bye),Xp.set(0,0,-1).applyQuaternion(uD),Yp.set(0,1,0).applyQuaternion(uD),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(qp.x,i),n.positionY.linearRampToValueAtTime(qp.y,i),n.positionZ.linearRampToValueAtTime(qp.z,i),n.forwardX.linearRampToValueAtTime(Xp.x,i),n.forwardY.linearRampToValueAtTime(Xp.y,i),n.forwardZ.linearRampToValueAtTime(Xp.z,i),n.upX.linearRampToValueAtTime(Yp.x,i),n.upY.linearRampToValueAtTime(Yp.y,i),n.upZ.linearRampToValueAtTime(Yp.z,i)}else n.setPosition(qp.x,qp.y,qp.z),n.setOrientation(Xp.x,Xp.y,Xp.z,Yp.x,Yp.y,Yp.z)}}class fZ extends Ti{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const $p=new Y,p6=new Hn,vye=new Y,Kp=new Y;class xye extends fZ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose($p,p6,vye),Kp.set(0,0,1).applyQuaternion(p6);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime($p.x,i),n.positionY.linearRampToValueAtTime($p.y,i),n.positionZ.linearRampToValueAtTime($p.z,i),n.orientationX.linearRampToValueAtTime(Kp.x,i),n.orientationY.linearRampToValueAtTime(Kp.y,i),n.orientationZ.linearRampToValueAtTime(Kp.z,i)}else n.setPosition($p.x,$p.y,$p.z),n.setOrientation(Kp.x,Kp.y,Kp.z)}}class _ye{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class hZ{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,a,s;switch(n){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)i[a+o]=i[o];s=n}else{s+=n;const o=n/s;this._mixBufferRegion(i,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-a,n)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let a=i,s=r;a!==s;++a)n[a]=n[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[n+s]=e[i+s]}_slerp(e,n,i,r){Hn.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,a){const s=this._workIndex*a;Hn.multiplyQuaternionsFlat(e,s,e,n,e,i),Hn.slerpFlat(e,n,e,n,e,s,r)}_lerp(e,n,i,r,a){const s=1-r;for(let o=0;o!==a;++o){const l=n+o;e[l]=e[l]*s+e[i+o]*r}}_lerpAdditive(e,n,i,r,a){for(let s=0;s!==a;++s){const o=n+s;e[o]=e[o]+e[i+s]*r}}}const eB="\\[\\]\\.:\\/",Sye=new RegExp("["+eB+"]","g"),tB="[^"+eB+"]",wye="[^"+eB.replace("\\.","")+"]",Eye=/((?:WC+[\/:])*)/.source.replace("WC",tB),Mye=/(WCOD+)?/.source.replace("WCOD",wye),Tye=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tB),Aye=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tB),Cye=new RegExp("^"+Eye+Mye+Tye+Aye+"$"),Rye=["material","materials","bones","map"];class kye{constructor(e,n,i){const r=i||ki.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class ki{constructor(e,n,i){this.path=n,this.parsedPath=i||ki.parseTrackName(n),this.node=ki.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new ki.Composite(e,n,i):new ki(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Sye,"")}static parseTrackName(e){const n=Cye.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);Rye.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===n||o.uuid===n)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let a=n.propertyIndex;if(e||(e=ki.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const s=e[r];if(s===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ki.Composite=kye;ki.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ki.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ki.prototype.GetterByBindingType=[ki.prototype._getValue_direct,ki.prototype._getValue_array,ki.prototype._getValue_arrayElement,ki.prototype._getValue_toArray];ki.prototype.SetterByBindingTypeAndVersioning=[[ki.prototype._setValue_direct,ki.prototype._setValue_direct_setNeedsUpdate,ki.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_array,ki.prototype._setValue_array_setNeedsUpdate,ki.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_arrayElement,ki.prototype._setValue_arrayElement_setNeedsUpdate,ki.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_fromArray,ki.prototype._setValue_fromArray_setNeedsUpdate,ki.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Dye{constructor(){this.isAnimationObjectGroup=!0,this.uuid=_l(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],d=h.uuid;let m=n[d];if(m===void 0){m=l++,n[d]=m,e.push(h);for(let y=0,v=s;y!==v;++y)a[y].push(new ki(h,i[y],r[y]))}else if(m<c){o=e[m];const y=--c,v=e[y];n[v.uuid]=m,e[m]=v,n[d]=y,e[y]=h;for(let g=0,x=s;g!==x;++g){const _=a[g],E=_[y];let T=_[m];_[m]=E,T===void 0&&(T=new ki(h,i[g],r[g])),_[y]=T}}else e[m]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],c=l.uuid,u=n[c];if(u!==void 0&&u>=a){const f=a++,h=e[f];n[h.uuid]=u,e[u]=h,n[c]=f,e[f]=l;for(let d=0,m=r;d!==m;++d){const y=i[d],v=y[f],g=y[u];y[u]=v,y[f]=g}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<a){const h=--a,d=e[h],m=--s,y=e[m];n[d.uuid]=f,e[f]=d,n[y.uuid]=h,e[h]=y,e.pop();for(let v=0,g=r;v!==g;++v){const x=i[v],_=x[h],E=x[m];x[f]=_,x[h]=E,x.pop()}}else{const h=--s,d=e[h];h>0&&(n[d.uuid]=f),e[f]=d,e.pop();for(let m=0,y=r;m!==y;++m){const v=i[m];v[f]=v[h],v.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=a.length,i[e]=r,s.push(e),o.push(n),a.push(f);for(let h=u,d=l.length;h!==d;++h){const m=l[h];f[h]=new ki(m,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],c=e[o];n[c]=i,s[i]=l,s.pop(),a[i]=a[o],a.pop(),r[i]=r[o],r.pop()}}}class dZ{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const a=n.tracks,s=a.length,o=new Array(s),l={endingStart:Am,endingEnd:Am};for(let c=0;c!==s;++c){const u=a[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fJ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i=!1){if(e.fadeOut(n),this.fadeIn(n),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,i=!1){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=a,l[1]=a+i,c[0]=e/s,c[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case _U:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(s),c[u].accumulateAdditive(o);break;case y2:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(s),c[u].accumulate(r,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===hJ;if(e===0)return a===-1?r:s&&(a&1)===1?n-r:r;if(i===uJ){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=n||r<0){const o=Math.floor(r/n);r-=n*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Cm,r.endingEnd=Cm):(e?r.endingStart=this.zeroSlopeAtStart?Cm:Am:r.endingStart=d_,n?r.endingEnd=this.zeroSlopeAtEnd?Cm:Am:r.endingEnd=d_)}_scheduleFading(e,n,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=n,o[1]=a+e,l[1]=i,this}}const Oye=new Float32Array(1);class pZ extends _f{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==a;++f){const h=r[f],d=h.name;let m=u[d];if(m!==void 0)++m.referenceCount,s[f]=m;else{if(m=s[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,d));continue}const y=n&&n._propertyBindings[f].binding.parsedPath;m=new hZ(ki.create(i,d,y),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,d),s[f]=m}o[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,a=this._actionsByClip;let s=a[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[n];s===void 0&&(s={},r[n]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,o=s[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new qU(new Float32Array(2),new Float32Array(2),1,Oye),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=n[r];e.__cacheIndex=r,n[r]=e,a.__cacheIndex=i,n[i]=a}clipAction(e,n,i){const r=n||this._root,a=r.uuid;let s=typeof e=="string"?Iy.findByName(r,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(s!==null?i=s.blendMode:i=y2),l!==void 0){const f=l.actionByRoot[a];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const u=new dZ(this,s,n,i);return this._bindAction(u,c),this._addInactiveAction(u,o,a),u}existingAction(e,n){const i=n||this._root,r=i.uuid,a=typeof e=="string"?Iy.findByName(i,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const c=s[o];this._deactivateAction(c);const u=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const s in i){const o=i[s].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,a=r[n];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Iye extends MU{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new x2(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class W2{constructor(e){this.value=e}clone(){return new W2(this.value.clone===void 0?this.value:this.value.clone())}}let Nye=0;class Pye extends _f{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Nye++}),this.name="",this.usage=m_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const a=Array.isArray(n[i])?n[i]:[n[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class NA extends uS{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class mZ{constructor(e,n,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const m6=new Ct;class pS{constructor(e,n,i=0,r=1/0){this.ray=new Tu(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new ky,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return m6.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(m6),this}intersectObject(e,n=!0,i=[]){return UN(e,this,i,n),i.sort(g6),i}intersectObjects(e,n=!0,i=[]){for(let r=0,a=e.length;r<a;r++)UN(e[r],this,i,n);return i.sort(g6),i}}function g6(t,e){return t.distance-e.distance}function UN(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const a=t.children;for(let s=0,o=a.length;s<o;s++)UN(a[s],e,n,!0)}}class Lye{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Uye.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Uye(){this._document.hidden===!1&&this.reset()}class gZ{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=kn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(kn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Bye{constructor(e=1,n=0,i=0){this.radius=e,this.theta=n,this.y=i}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}class nB{constructor(e,n,i,r){nB.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){const a=this.elements;return a[0]=e,a[2]=n,a[1]=i,a[3]=r,this}}const b6=new ft;class Fye{constructor(e=new ft(1/0,1/0),n=new ft(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=b6.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,b6).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const y6=new Y,fE=new Y,Ob=new Y,Ib=new Y,fD=new Y,zye=new Y,jye=new Y;class bu{constructor(e=new Y,n=new Y){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){y6.subVectors(e,this.start),fE.subVectors(this.end,this.start);const i=fE.dot(fE);let a=fE.dot(y6)/i;return n&&(a=kn(a,0,1)),a}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,n=zye,i=jye){const r=10000000000000001e-32;let a,s;const o=this.start,l=e.start,c=this.end,u=e.end;Ob.subVectors(c,o),Ib.subVectors(u,l),fD.subVectors(o,l);const f=Ob.dot(Ob),h=Ib.dot(Ib),d=Ib.dot(fD);if(f<=r&&h<=r)return n.copy(o),i.copy(l),n.sub(i),n.dot(n);if(f<=r)a=0,s=d/h,s=kn(s,0,1);else{const m=Ob.dot(fD);if(h<=r)s=0,a=kn(-m/f,0,1);else{const y=Ob.dot(Ib),v=f*h-y*y;v!==0?a=kn((y*d-m*h)/v,0,1):a=0,s=(y*a+d)/h,s<0?(s=0,a=kn(-m/f,0,1)):s>1&&(s=1,a=kn((y-m)/f,0,1))}}return n.copy(o).add(Ob.multiplyScalar(a)),i.copy(l).add(Ib.multiplyScalar(s)),n.sub(i),n.dot(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const v6=new Y;class Hye extends Ti{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new An,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const c=s/l*Math.PI*2,u=o/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new ln(r,3));const a=new qs({fog:!1,toneMapped:!1});this.cone=new Au(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),v6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(v6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const od=new Y,hE=new Ct,hD=new Ct;class Vye extends Au{constructor(e){const n=bZ(e),i=new An,r=[],a=[];for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new ln(r,3)),i.setAttribute("color",new ln(a,3));const s=new qs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Ut(255),l=new Ut(65280);this.setColors(o,l)}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");hD.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<n.length;a++){const o=n[a];o.parent&&o.parent.isBone&&(hE.multiplyMatrices(hD,o.matrixWorld),od.setFromMatrixPosition(hE),r.setXYZ(s,od.x,od.y,od.z),hE.multiplyMatrices(hD,o.parent.matrixWorld),od.setFromMatrixPosition(hE),r.setXYZ(s+1,od.x,od.y,od.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,n){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,n.r,n.g,n.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function bZ(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...bZ(t.children[n]));return e}class Gye extends fi{constructor(e,n,i){const r=new bv(n,4,2),a=new go({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Wye=new Y,x6=new Ut,_6=new Ut;class qye extends Ti{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new dS(n);r.rotateY(Math.PI*.5),this.material=new go({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new Tn(s,3)),this.add(new fi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");x6.copy(this.light.color),_6.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const a=i<r/2?x6:_6;n.setXYZ(i,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Wye.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Xye extends Au{constructor(e=10,n=10,i=4473924,r=8947848){i=new Ut(i),r=new Ut(r);const a=n/2,s=e/n,o=e/2,l=[],c=[];for(let h=0,d=0,m=-o;h<=n;h++,m+=s){l.push(-o,0,m,o,0,m),l.push(m,0,-o,m,0,o);const y=h===a?i:r;y.toArray(c,d),d+=3,y.toArray(c,d),d+=3,y.toArray(c,d),d+=3,y.toArray(c,d),d+=3}const u=new An;u.setAttribute("position",new ln(l,3)),u.setAttribute("color",new ln(c,3));const f=new qs({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yye extends Au{constructor(e=10,n=16,i=8,r=64,a=4473924,s=8947848){a=new Ut(a),s=new Ut(s);const o=[],l=[];if(n>1)for(let f=0;f<n;f++){const h=f/n*(Math.PI*2),d=Math.sin(h)*e,m=Math.cos(h)*e;o.push(0,0,0),o.push(d,0,m);const y=f&1?a:s;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let f=0;f<i;f++){const h=f&1?a:s,d=e-e/i*f;for(let m=0;m<r;m++){let y=m/r*(Math.PI*2),v=Math.sin(y)*d,g=Math.cos(y)*d;o.push(v,0,g),l.push(h.r,h.g,h.b),y=(m+1)/r*(Math.PI*2),v=Math.sin(y)*d,g=Math.cos(y)*d,o.push(v,0,g),l.push(h.r,h.g,h.b)}}const c=new An;c.setAttribute("position",new ln(o,3)),c.setAttribute("color",new ln(l,3));const u=new qs({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const S6=new Y,dE=new Y,w6=new Y;class $ye extends Ti{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new An;r.setAttribute("position",new ln([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new qs({fog:!1,toneMapped:!1});this.lightPlane=new Th(r,a),this.add(this.lightPlane),r=new An,r.setAttribute("position",new ln([0,0,0,0,0,1],3)),this.targetLine=new Th(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),S6.setFromMatrixPosition(this.light.matrixWorld),dE.setFromMatrixPosition(this.light.target.matrixWorld),w6.subVectors(dE,S6),this.lightPlane.lookAt(dE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(dE),this.targetLine.scale.z=w6.length()}}const pE=new Y,sa=new _2;class Kye extends Au{constructor(e){const n=new An,i=new qs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(m,y){l(m),l(y)}function l(m){r.push(0,0,0),a.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(r.length/3-1)}n.setAttribute("position",new ln(r,3)),n.setAttribute("color",new ln(a,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new Ut(16755200),u=new Ut(16711680),f=new Ut(43775),h=new Ut(16777215),d=new Ut(3355443);this.setColors(c,u,f,h,d)}setColors(e,n,i,r,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;let a,s;if(sa.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===ml)a=-1,s=1;else if(this.camera.coordinateSystem===Cy)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);pa("c",n,e,sa,0,0,a),pa("t",n,e,sa,0,0,s),pa("n1",n,e,sa,-i,-r,a),pa("n2",n,e,sa,i,-r,a),pa("n3",n,e,sa,-i,r,a),pa("n4",n,e,sa,i,r,a),pa("f1",n,e,sa,-i,-r,s),pa("f2",n,e,sa,i,-r,s),pa("f3",n,e,sa,-i,r,s),pa("f4",n,e,sa,i,r,s),pa("u1",n,e,sa,i*.7,r*1.1,a),pa("u2",n,e,sa,-i*.7,r*1.1,a),pa("u3",n,e,sa,0,r*2,a),pa("cf1",n,e,sa,-i,0,s),pa("cf2",n,e,sa,i,0,s),pa("cf3",n,e,sa,0,-r,s),pa("cf4",n,e,sa,0,r,s),pa("cn1",n,e,sa,-i,0,a),pa("cn2",n,e,sa,i,0,a),pa("cn3",n,e,sa,0,-r,a),pa("cn4",n,e,sa,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function pa(t,e,n,i,r,a,s){pE.set(r,a,s).unproject(i);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],pE.x,pE.y,pE.z)}}const mE=new vi;class Jye extends Au{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),a=new An;a.setIndex(new Tn(i,1)),a.setAttribute("position",new Tn(r,3)),super(a,new qs({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&mE.setFromObject(this.object),mE.isEmpty())return;const e=mE.min,n=mE.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zye extends Au{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new An;a.setIndex(new Tn(i,1)),a.setAttribute("position",new ln(r,3)),super(a,new qs({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qye extends Th{constructor(e,n=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new An;s.setAttribute("position",new ln(a,3)),s.computeBoundingSphere(),super(s,new qs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new An;l.setAttribute("position",new ln(o,3)),l.computeBoundingSphere(),this.add(new fi(l,new go({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const E6=new Y;let gE,dD;class eve extends Ti{constructor(e=new Y(0,0,1),n=new Y(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",gE===void 0&&(gE=new An,gE.setAttribute("position",new ln([0,0,0,0,1,0],3)),dD=new hS(.5,1,5,1),dD.translate(0,-.5,0)),this.position.copy(n),this.line=new Th(gE,new qs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fi(dD,new go({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{E6.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(E6,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class tve extends Au{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new An;r.setAttribute("position",new ln(n,3)),r.setAttribute("color",new ln(i,3));const a=new qs({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,n,i){const r=new Ut,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(n),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nve{constructor(){this.type="ShapePath",this.color=new Ut,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new OA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,a,s){return this.currentPath.bezierCurveTo(e,n,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const x=[];for(let _=0,E=g.length;_<E;_++){const T=g[_],w=new Km;w.curves=T.curves,x.push(w)}return x}function i(g,x){const _=x.length;let E=!1;for(let T=_-1,w=0;w<_;T=w++){let A=x[T],C=x[w],D=C.x-A.x,k=C.y-A.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(A=x[w],D=-D,C=x[T],k=-k),g.y<A.y||g.y>C.y)continue;if(g.y===A.y){if(g.x===A.x)return!0}else{const P=k*(g.x-A.x)-D*(g.y-A.y);if(P===0)return!0;if(P<0)continue;E=!E}}else{if(g.y!==A.y)continue;if(C.x<=g.x&&g.x<=A.x||A.x<=g.x&&g.x<=C.x)return!0}}return E}const r=hu.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const c=[];if(a.length===1)return o=a[0],l=new Km,l.curves=o.curves,c.push(l),c;let u=!r(a[0].getPoints());u=e?!u:u;const f=[],h=[];let d=[],m=0,y;h[m]=void 0,d[m]=[];for(let g=0,x=a.length;g<x;g++)o=a[g],y=o.getPoints(),s=r(y),s=e?!s:s,s?(!u&&h[m]&&m++,h[m]={s:new Km,p:y},h[m].s.curves=o.curves,u&&m++,d[m]=[]):d[m].push({h:o,p:y[0]});if(!h[0])return n(a);if(h.length>1){let g=!1,x=0;for(let _=0,E=h.length;_<E;_++)f[_]=[];for(let _=0,E=h.length;_<E;_++){const T=d[_];for(let w=0;w<T.length;w++){const A=T[w];let C=!0;for(let D=0;D<h.length;D++)i(A.p,h[D].p)&&(_!==D&&x++,C?(C=!1,f[D].push(A)):g=!0);C&&f[_].push(A)}}x>0&&g===!1&&(d=f)}let v;for(let g=0,x=h.length;g<x;g++){l=h[g].s,c.push(l),v=d[g];for(let _=0,E=v.length;_<E;_++)l.holes.push(v[_].h)}return c}}class ive extends _f{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function rve(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function ave(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function sve(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function BN(t,e,n,i){const r=ove(i);switch(n){case yU:return t*e;case Nh:return t*e/r.components*r.byteLength;case hv:return t*e/r.components*r.byteLength;case b2:return t*e*2/r.components*r.byteLength;case lS:return t*e*2/r.components*r.byteLength;case vU:return t*e*3/r.components*r.byteLength;case Jr:return t*e*4/r.components*r.byteLength;case dv:return t*e*4/r.components*r.byteLength;case T1:case A1:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case C1:case R1:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case nA:case rA:return Math.max(t,16)*Math.max(e,8)/4;case tA:case iA:return Math.max(t,8)*Math.max(e,8)/2;case aA:case sA:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case oA:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case lA:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case cA:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case uA:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case fA:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case hA:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case dA:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case pA:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case mA:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case gA:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case bA:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case yA:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case vA:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case xA:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case _A:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case k1:case SA:case wA:return Math.ceil(t/4)*Math.ceil(e/4)*16;case xU:case EA:return Math.ceil(t/4)*Math.ceil(e/4)*8;case MA:case TA:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function ove(t){switch(t){case yo:case d2:return{byteLength:1,components:1};case Sy:case p2:case Za:return{byteLength:2,components:1};case m2:case g2:return{byteLength:2,components:4};case Tc:case fv:case vr:return{byteLength:4,components:1};case bU:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class lve{static contain(e,n){return rve(e,n)}static cover(e,n){return ave(e,n)}static fill(e){return sve(e)}static getByteLength(e,n,i,r){return BN(e,n,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rg);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function yZ(){let t=null,e=!1,n=null,i=null;function r(a,s){n(a,s),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function cve(t){const e=new WeakMap;function n(o,l){const c=o.array,u=o.usage,f=c.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,c,u),o.onUploadCallback();let d;if(c instanceof Float32Array)d=t.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)d=t.HALF_FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?d=t.HALF_FLOAT:d=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)d=t.SHORT;else if(c instanceof Uint32Array)d=t.UNSIGNED_INT;else if(c instanceof Int32Array)d=t.INT;else if(c instanceof Int8Array)d=t.BYTE;else if(c instanceof Uint8Array)d=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)d=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:d,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:f}}function i(o,l,c){const u=l.array,f=l.updateRanges;if(t.bindBuffer(c,o),f.length===0)t.bufferSubData(c,0,u);else{f.sort((d,m)=>d.start-m.start);let h=0;for(let d=1;d<f.length;d++){const m=f[h],y=f[d];y.start<=m.start+m.count+1?m.count=Math.max(m.count,y.start+y.count-m.start):(++h,f[h]=y)}f.length=h+1;for(let d=0,m=f.length;d<m;d++){const y=f[d];t.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,n(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:a,update:s}}var uve=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,fve=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,hve=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,dve=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pve=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,mve=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,gve=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,bve=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yve=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,vve=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,xve=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_ve=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Sve=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,wve=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Eve=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Mve=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Tve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ave=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Cve=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Rve=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kve=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Dve=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Ove=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Ive=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Nve=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Pve=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Lve=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Uve=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Bve=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Fve=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,zve="gl_FragColor = linearToOutputTexel( gl_FragColor );",jve=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Hve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Vve=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Gve=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Wve=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Xve=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Yve=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$ve=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Kve=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Jve=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Zve=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Qve=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,exe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,txe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,nxe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ixe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,rxe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,axe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sxe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oxe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lxe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,cxe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,uxe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,fxe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hxe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dxe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,pxe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mxe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,gxe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,bxe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yxe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,vxe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xxe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,_xe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Sxe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,wxe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Exe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Mxe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Txe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Axe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Cxe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Rxe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kxe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Dxe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Oxe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Ixe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Nxe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Pxe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Lxe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Uxe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Bxe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Fxe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zxe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,jxe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Hxe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Vxe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Gxe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Wxe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,qxe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Xxe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Yxe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$xe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Kxe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Jxe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Zxe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Qxe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,e1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,t1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,n1e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,i1e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,r1e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,a1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,s1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,o1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,l1e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const c1e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,u1e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,f1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,h1e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,d1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,p1e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,m1e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,g1e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,b1e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,y1e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,v1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,x1e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_1e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,S1e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,w1e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,E1e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,M1e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T1e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A1e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,C1e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,R1e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,k1e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,D1e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O1e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,I1e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,N1e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P1e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L1e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U1e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,B1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,F1e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z1e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,j1e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,H1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:uve,alphahash_pars_fragment:fve,alphamap_fragment:hve,alphamap_pars_fragment:dve,alphatest_fragment:pve,alphatest_pars_fragment:mve,aomap_fragment:gve,aomap_pars_fragment:bve,batching_pars_vertex:yve,batching_vertex:vve,begin_vertex:xve,beginnormal_vertex:_ve,bsdfs:Sve,iridescence_fragment:wve,bumpmap_pars_fragment:Eve,clipping_planes_fragment:Mve,clipping_planes_pars_fragment:Tve,clipping_planes_pars_vertex:Ave,clipping_planes_vertex:Cve,color_fragment:Rve,color_pars_fragment:kve,color_pars_vertex:Dve,color_vertex:Ove,common:Ive,cube_uv_reflection_fragment:Nve,defaultnormal_vertex:Pve,displacementmap_pars_vertex:Lve,displacementmap_vertex:Uve,emissivemap_fragment:Bve,emissivemap_pars_fragment:Fve,colorspace_fragment:zve,colorspace_pars_fragment:jve,envmap_fragment:Hve,envmap_common_pars_fragment:Vve,envmap_pars_fragment:Gve,envmap_pars_vertex:Wve,envmap_physical_pars_fragment:nxe,envmap_vertex:qve,fog_vertex:Xve,fog_pars_vertex:Yve,fog_fragment:$ve,fog_pars_fragment:Kve,gradientmap_pars_fragment:Jve,lightmap_pars_fragment:Zve,lights_lambert_fragment:Qve,lights_lambert_pars_fragment:exe,lights_pars_begin:txe,lights_toon_fragment:ixe,lights_toon_pars_fragment:rxe,lights_phong_fragment:axe,lights_phong_pars_fragment:sxe,lights_physical_fragment:oxe,lights_physical_pars_fragment:lxe,lights_fragment_begin:cxe,lights_fragment_maps:uxe,lights_fragment_end:fxe,logdepthbuf_fragment:hxe,logdepthbuf_pars_fragment:dxe,logdepthbuf_pars_vertex:pxe,logdepthbuf_vertex:mxe,map_fragment:gxe,map_pars_fragment:bxe,map_particle_fragment:yxe,map_particle_pars_fragment:vxe,metalnessmap_fragment:xxe,metalnessmap_pars_fragment:_xe,morphinstance_vertex:Sxe,morphcolor_vertex:wxe,morphnormal_vertex:Exe,morphtarget_pars_vertex:Mxe,morphtarget_vertex:Txe,normal_fragment_begin:Axe,normal_fragment_maps:Cxe,normal_pars_fragment:Rxe,normal_pars_vertex:kxe,normal_vertex:Dxe,normalmap_pars_fragment:Oxe,clearcoat_normal_fragment_begin:Ixe,clearcoat_normal_fragment_maps:Nxe,clearcoat_pars_fragment:Pxe,iridescence_pars_fragment:Lxe,opaque_fragment:Uxe,packing:Bxe,premultiplied_alpha_fragment:Fxe,project_vertex:zxe,dithering_fragment:jxe,dithering_pars_fragment:Hxe,roughnessmap_fragment:Vxe,roughnessmap_pars_fragment:Gxe,shadowmap_pars_fragment:Wxe,shadowmap_pars_vertex:qxe,shadowmap_vertex:Xxe,shadowmask_pars_fragment:Yxe,skinbase_vertex:$xe,skinning_pars_vertex:Kxe,skinning_vertex:Jxe,skinnormal_vertex:Zxe,specularmap_fragment:Qxe,specularmap_pars_fragment:e1e,tonemapping_fragment:t1e,tonemapping_pars_fragment:n1e,transmission_fragment:i1e,transmission_pars_fragment:r1e,uv_pars_fragment:a1e,uv_pars_vertex:s1e,uv_vertex:o1e,worldpos_vertex:l1e,background_vert:c1e,background_frag:u1e,backgroundCube_vert:f1e,backgroundCube_frag:h1e,cube_vert:d1e,cube_frag:p1e,depth_vert:m1e,depth_frag:g1e,distanceRGBA_vert:b1e,distanceRGBA_frag:y1e,equirect_vert:v1e,equirect_frag:x1e,linedashed_vert:_1e,linedashed_frag:S1e,meshbasic_vert:w1e,meshbasic_frag:E1e,meshlambert_vert:M1e,meshlambert_frag:T1e,meshmatcap_vert:A1e,meshmatcap_frag:C1e,meshnormal_vert:R1e,meshnormal_frag:k1e,meshphong_vert:D1e,meshphong_frag:O1e,meshphysical_vert:I1e,meshphysical_frag:N1e,meshtoon_vert:P1e,meshtoon_frag:L1e,points_vert:U1e,points_frag:B1e,shadow_vert:F1e,shadow_frag:z1e,sprite_vert:j1e,sprite_frag:H1e},Zt={common:{diffuse:{value:new Ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wn},alphaMap:{value:null},alphaMapTransform:{value:new Wn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wn}},envmap:{envMap:{value:null},envMapRotation:{value:new Wn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wn},normalScale:{value:new ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wn},alphaTest:{value:0},uvTransform:{value:new Wn}},sprite:{diffuse:{value:new Ut(16777215)},opacity:{value:1},center:{value:new ft(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wn},alphaMap:{value:null},alphaMapTransform:{value:new Wn},alphaTest:{value:0}}},nu={basic:{uniforms:oo([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:oo([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,Zt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:oo([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,Zt.lights,{emissive:{value:new Ut(0)},specular:{value:new Ut(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:oo([Zt.common,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.roughnessmap,Zt.metalnessmap,Zt.fog,Zt.lights,{emissive:{value:new Ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:oo([Zt.common,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.gradientmap,Zt.fog,Zt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:oo([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:oo([Zt.points,Zt.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:oo([Zt.common,Zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:oo([Zt.common,Zt.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:oo([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:oo([Zt.sprite,Zt.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new Wn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wn}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:oo([Zt.common,Zt.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:oo([Zt.lights,Zt.fog,{color:{value:new Ut(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};nu.physical={uniforms:oo([nu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wn},clearcoatNormalScale:{value:new ft(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wn},sheen:{value:0},sheenColor:{value:new Ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wn},transmissionSamplerSize:{value:new ft},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wn},attenuationDistance:{value:0},attenuationColor:{value:new Ut(0)},specularColor:{value:new Ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wn},anisotropyVector:{value:new ft},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wn}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};const bE={r:0,b:0,g:0},Jp=new li,V1e=new Ct;function G1e(t,e,n,i,r,a,s){const o=new Ut(0);let l=a===!0?0:1,c,u,f=null,h=0,d=null;function m(_){let E=_.isScene===!0?_.background:null;return E&&E.isTexture&&(E=(_.backgroundBlurriness>0?n:e).get(E)),E}function y(_){let E=!1;const T=m(_);T===null?g(o,l):T&&T.isColor&&(g(T,1),E=!0);const w=t.xr.getEnvironmentBlendMode();w==="additive"?i.buffers.color.setClear(0,0,0,1,s):w==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(t.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function v(_,E){const T=m(E);T&&(T.isCubeTexture||T.mapping===uv)?(u===void 0&&(u=new fi(new fp(1,1,1),new is({name:"BackgroundCubeMaterial",uniforms:Dy(nu.backgroundCube.uniforms),vertexShader:nu.backgroundCube.vertexShader,fragmentShader:nu.backgroundCube.fragmentShader,side:ba,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,A,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Jp.copy(E.backgroundRotation),Jp.x*=-1,Jp.y*=-1,Jp.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Jp.y*=-1,Jp.z*=-1),u.material.uniforms.envMap.value=T,u.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(V1e.makeRotationFromEuler(Jp)),u.material.toneMapped=oi.getTransfer(T.colorSpace)!==sr,(f!==T||h!==T.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,f=T,h=T.version,d=t.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):T&&T.isTexture&&(c===void 0&&(c=new fi(new dp(2,2),new is({name:"BackgroundMaterial",uniforms:Dy(nu.background.uniforms),vertexShader:nu.background.vertexShader,fragmentShader:nu.background.fragmentShader,side:Al,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=T,c.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,c.material.toneMapped=oi.getTransfer(T.colorSpace)!==sr,T.matrixAutoUpdate===!0&&T.updateMatrix(),c.material.uniforms.uvTransform.value.copy(T.matrix),(f!==T||h!==T.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,f=T,h=T.version,d=t.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function g(_,E){_.getRGB(bE,RJ(t)),i.buffers.color.setClear(bE.r,bE.g,bE.b,E,s)}function x(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(_,E=1){o.set(_),l=E,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(o,l)},render:y,addToRenderList:v,dispose:x}}function W1e(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=h(null);let a=r,s=!1;function o(k,P,B,H,G){let V=!1;const U=f(H,B,P);a!==U&&(a=U,c(a.object)),V=d(k,H,B,G),V&&m(k,H,B,G),G!==null&&e.update(G,t.ELEMENT_ARRAY_BUFFER),(V||s)&&(s=!1,E(k,P,B,H),G!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(G).buffer))}function l(){return t.createVertexArray()}function c(k){return t.bindVertexArray(k)}function u(k){return t.deleteVertexArray(k)}function f(k,P,B){const H=B.wireframe===!0;let G=i[k.id];G===void 0&&(G={},i[k.id]=G);let V=G[P.id];V===void 0&&(V={},G[P.id]=V);let U=V[H];return U===void 0&&(U=h(l()),V[H]=U),U}function h(k){const P=[],B=[],H=[];for(let G=0;G<n;G++)P[G]=0,B[G]=0,H[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:B,attributeDivisors:H,object:k,attributes:{},index:null}}function d(k,P,B,H){const G=a.attributes,V=P.attributes;let U=0;const F=B.getAttributes();for(const q in F)if(F[q].location>=0){const z=G[q];let ce=V[q];if(ce===void 0&&(q==="instanceMatrix"&&k.instanceMatrix&&(ce=k.instanceMatrix),q==="instanceColor"&&k.instanceColor&&(ce=k.instanceColor)),z===void 0||z.attribute!==ce||ce&&z.data!==ce.data)return!0;U++}return a.attributesNum!==U||a.index!==H}function m(k,P,B,H){const G={},V=P.attributes;let U=0;const F=B.getAttributes();for(const q in F)if(F[q].location>=0){let z=V[q];z===void 0&&(q==="instanceMatrix"&&k.instanceMatrix&&(z=k.instanceMatrix),q==="instanceColor"&&k.instanceColor&&(z=k.instanceColor));const ce={};ce.attribute=z,z&&z.data&&(ce.data=z.data),G[q]=ce,U++}a.attributes=G,a.attributesNum=U,a.index=H}function y(){const k=a.newAttributes;for(let P=0,B=k.length;P<B;P++)k[P]=0}function v(k){g(k,0)}function g(k,P){const B=a.newAttributes,H=a.enabledAttributes,G=a.attributeDivisors;B[k]=1,H[k]===0&&(t.enableVertexAttribArray(k),H[k]=1),G[k]!==P&&(t.vertexAttribDivisor(k,P),G[k]=P)}function x(){const k=a.newAttributes,P=a.enabledAttributes;for(let B=0,H=P.length;B<H;B++)P[B]!==k[B]&&(t.disableVertexAttribArray(B),P[B]=0)}function _(k,P,B,H,G,V,U){U===!0?t.vertexAttribIPointer(k,P,B,G,V):t.vertexAttribPointer(k,P,B,H,G,V)}function E(k,P,B,H){y();const G=H.attributes,V=B.getAttributes(),U=P.defaultAttributeValues;for(const F in V){const q=V[F];if(q.location>=0){let X=G[F];if(X===void 0&&(F==="instanceMatrix"&&k.instanceMatrix&&(X=k.instanceMatrix),F==="instanceColor"&&k.instanceColor&&(X=k.instanceColor)),X!==void 0){const z=X.normalized,ce=X.itemSize,he=e.get(X);if(he===void 0)continue;const $=he.buffer,Me=he.type,Se=he.bytesPerElement,pe=Me===t.INT||Me===t.UNSIGNED_INT||X.gpuType===fv;if(X.isInterleavedBufferAttribute){const xe=X.data,Ne=xe.stride,Ge=X.offset;if(xe.isInstancedInterleavedBuffer){for(let $e=0;$e<q.locationSize;$e++)g(q.location+$e,xe.meshPerAttribute);k.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let $e=0;$e<q.locationSize;$e++)v(q.location+$e);t.bindBuffer(t.ARRAY_BUFFER,$);for(let $e=0;$e<q.locationSize;$e++)_(q.location+$e,ce/q.locationSize,Me,z,Ne*Se,(Ge+ce/q.locationSize*$e)*Se,pe)}else{if(X.isInstancedBufferAttribute){for(let xe=0;xe<q.locationSize;xe++)g(q.location+xe,X.meshPerAttribute);k.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let xe=0;xe<q.locationSize;xe++)v(q.location+xe);t.bindBuffer(t.ARRAY_BUFFER,$);for(let xe=0;xe<q.locationSize;xe++)_(q.location+xe,ce/q.locationSize,Me,z,ce*Se,ce/q.locationSize*xe*Se,pe)}}else if(U!==void 0){const z=U[F];if(z!==void 0)switch(z.length){case 2:t.vertexAttrib2fv(q.location,z);break;case 3:t.vertexAttrib3fv(q.location,z);break;case 4:t.vertexAttrib4fv(q.location,z);break;default:t.vertexAttrib1fv(q.location,z)}}}}x()}function T(){C();for(const k in i){const P=i[k];for(const B in P){const H=P[B];for(const G in H)u(H[G].object),delete H[G];delete P[B]}delete i[k]}}function w(k){if(i[k.id]===void 0)return;const P=i[k.id];for(const B in P){const H=P[B];for(const G in H)u(H[G].object),delete H[G];delete P[B]}delete i[k.id]}function A(k){for(const P in i){const B=i[P];if(B[k.id]===void 0)continue;const H=B[k.id];for(const G in H)u(H[G].object),delete H[G];delete B[k.id]}}function C(){D(),s=!0,a!==r&&(a=r,c(a.object))}function D(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:C,resetDefaultState:D,dispose:T,releaseStatesOfGeometry:w,releaseStatesOfProgram:A,initAttributes:y,enableAttribute:v,disableUnusedAttributes:x}}function q1e(t,e,n){let i;function r(c){i=c}function a(c,u){t.drawArrays(i,c,u),n.update(u,i,1)}function s(c,u,f){f!==0&&(t.drawArraysInstanced(i,c,u,f),n.update(u,i,f))}function o(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,f);let d=0;for(let m=0;m<f;m++)d+=u[m];n.update(d,i,1)}function l(c,u,f,h){if(f===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let m=0;m<c.length;m++)s(c[m],u[m],h[m]);else{d.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,f);let m=0;for(let y=0;y<f;y++)m+=u[y]*h[y];n.update(m,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function X1e(t,e,n,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(A){return!(A!==Jr&&i.convert(A)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(A){const C=A===Za&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==yo&&i.convert(A)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==vr&&!C)}function l(A){if(A==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=n.logarithmicDepthBuffer===!0,h=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),E=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=m>0,w=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:f,reversedDepthBuffer:h,maxTextures:d,maxVertexTextures:m,maxTextureSize:y,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:x,maxVaryings:_,maxFragmentUniforms:E,vertexTextures:T,maxSamples:w}}function Y1e(t){const e=this;let n=null,i=0,r=!1,a=!1;const s=new hl,o=new Wn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||i!==0||r;return r=h,i=f.length,d},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,h){n=u(f,h,0)},this.setState=function(f,h,d){const m=f.clippingPlanes,y=f.clipIntersection,v=f.clipShadows,g=t.get(f);if(!r||m===null||m.length===0||a&&!v)a?u(null):c();else{const x=a?0:i,_=x*4;let E=g.clippingState||null;l.value=E,E=u(m,h,_,d);for(let T=0;T!==_;++T)E[T]=n[T];g.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,m){const y=f!==null?f.length:0;let v=null;if(y!==0){if(v=l.value,m!==!0||v===null){const g=d+y*4,x=h.matrixWorldInverse;o.getNormalMatrix(x),(v===null||v.length<g)&&(v=new Float32Array(g));for(let _=0,E=d;_!==y;++_,E+=4)s.copy(f[_]).applyMatrix4(x,o),s.normal.toArray(v,E),v[E+3]=s.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,v}}function $1e(t){let e=new WeakMap;function n(s,o){return o===xy?s.mapping=mf:o===h_&&(s.mapping=np),s}function i(s){if(s&&s.isTexture){const o=s.mapping;if(o===xy||o===h_)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new CU(l.height);return c.fromEquirectangularTexture(t,s),e.set(s,c),s.addEventListener("dispose",r),n(c.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const C0=4,M6=[.125,.215,.35,.446,.526,.582],xm=20,pD=new Ph,T6=new Ut;let mD=null,gD=0,bD=0,yD=!1;const mm=(1+Math.sqrt(5))/2,Nb=1/mm,A6=[new Y(-mm,Nb,0),new Y(mm,Nb,0),new Y(-Nb,0,mm),new Y(Nb,0,mm),new Y(0,mm,-Nb),new Y(0,mm,Nb),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)],K1e=new Y;class FN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100,a={}){const{size:s=256,position:o=K1e}=a;mD=this._renderer.getRenderTarget(),gD=this._renderer.getActiveCubeFace(),bD=this._renderer.getActiveMipmapLevel(),yD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,o),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=k6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=R6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mD,gD,bD),this._renderer.xr.enabled=yD,e.scissorTest=!1,yE(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===mf||e.mapping===np?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mD=this._renderer.getRenderTarget(),gD=this._renderer.getActiveCubeFace(),bD=this._renderer.getActiveMipmapLevel(),yD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Wi,minFilter:Wi,generateMipmaps:!1,type:Za,format:Jr,colorSpace:_u,depthBuffer:!1},r=C6(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=C6(e,n,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=J1e(a)),this._blurMaterial=Z1e(a,e,n)}return r}_compileMaterial(e){const n=new fi(this._lodPlanes[0],e);this._renderer.compile(n,pD)}_sceneToCubeUV(e,n,i,r,a){const l=new Yr(90,1,n,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,d=f.toneMapping;f.getClearColor(T6),f.toneMapping=cf,f.autoClear=!1,f.state.buffers.depth.getReversed()&&(f.setRenderTarget(r),f.clearDepth(),f.setRenderTarget(null));const y=new go({name:"PMREM.Background",side:ba,depthWrite:!1,depthTest:!1}),v=new fi(new fp,y);let g=!1;const x=e.background;x?x.isColor&&(y.color.copy(x),e.background=null,g=!0):(y.color.copy(T6),g=!0);for(let _=0;_<6;_++){const E=_%3;E===0?(l.up.set(0,c[_],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x+u[_],a.y,a.z)):E===1?(l.up.set(0,0,c[_]),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y+u[_],a.z)):(l.up.set(0,c[_],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y,a.z+u[_]));const T=this._cubeSize;yE(r,E*T,_>2?T:0,T,T),f.setRenderTarget(r),g&&f.render(v,l),f.render(e,l)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=d,f.autoClear=h,e.background=x}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===mf||e.mapping===np;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=k6()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=R6());const a=r?this._cubemapMaterial:this._equirectMaterial,s=new fi(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;yE(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(s,pD)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=A6[(r-a-1)%A6.length];this._blur(e,a-1,a,s,o)}n.autoClear=i}_blur(e,n,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,n,i,r,a,s,o){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new fi(this._lodPlanes[r],c),h=c.uniforms,d=this._sizeLods[i]-1,m=isFinite(a)?Math.PI/(2*d):2*Math.PI/(2*xm-1),y=a/m,v=isFinite(a)?1+Math.floor(u*y):xm;v>xm&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${xm}`);const g=[];let x=0;for(let A=0;A<xm;++A){const C=A/y,D=Math.exp(-C*C/2);g.push(D),A===0?x+=D:A<v&&(x+=2*D)}for(let A=0;A<g.length;A++)g[A]=g[A]/x;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=g,h.latitudinal.value=s==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:_}=this;h.dTheta.value=m,h.mipInt.value=_-i;const E=this._sizeLods[r],T=3*E*(r>_-C0?r-_+C0:0),w=4*(this._cubeSize-E);yE(n,T,w,3*E,2*E),l.setRenderTarget(n),l.render(f,pD)}}function J1e(t){const e=[],n=[],i=[];let r=t;const a=t-C0+1+M6.length;for(let s=0;s<a;s++){const o=Math.pow(2,r);n.push(o);let l=1/o;s>t-C0?l=M6[s-t+C0-1]:s===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,m=6,y=3,v=2,g=1,x=new Float32Array(y*m*d),_=new Float32Array(v*m*d),E=new Float32Array(g*m*d);for(let w=0;w<d;w++){const A=w%3*2/3-1,C=w>2?0:-1,D=[A,C,0,A+2/3,C,0,A+2/3,C+1,0,A,C,0,A+2/3,C+1,0,A,C+1,0];x.set(D,y*m*w),_.set(h,v*m*w);const k=[w,w,w,w,w,w];E.set(k,g*m*w)}const T=new An;T.setAttribute("position",new Tn(x,y)),T.setAttribute("uv",new Tn(_,v)),T.setAttribute("faceIndex",new Tn(E,g)),e.push(T),r>C0&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function C6(t,e,n){const i=new Ac(t,e,n);return i.texture.mapping=uv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function yE(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Z1e(t,e,n){const i=new Float32Array(xm),r=new Y(0,1,0);return new is({name:"SphericalGaussianBlur",defines:{n:xm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:iB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:lf,depthTest:!1,depthWrite:!1})}function R6(){return new is({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:iB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:lf,depthTest:!1,depthWrite:!1})}function k6(){return new is({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:iB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:lf,depthTest:!1,depthWrite:!1})}function iB(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Q1e(t){let e=new WeakMap,n=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===xy||l===h_,u=l===mf||l===np;if(c||u){let f=e.get(o);const h=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return n===null&&(n=new FN(t)),f=c?n.fromEquirectangular(o,f):n.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{const d=o.image;return c&&d&&d.height>0||u&&d&&r(d)?(n===null&&(n=new FN(t)),f=c?n.fromEquirectangular(o):n.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",a),f.texture):null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function a(o){const l=o.target;l.removeEventListener("dispose",a);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:s}}function e_e(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&W0("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function t_e(t,e,n,i){const r={},a=new WeakMap;function s(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",s),delete r[h.id];const d=a.get(h);d&&(e.remove(d),a.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function o(f,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const d in h)e.update(h[d],t.ARRAY_BUFFER)}function c(f){const h=[],d=f.index,m=f.attributes.position;let y=0;if(d!==null){const x=d.array;y=d.version;for(let _=0,E=x.length;_<E;_+=3){const T=x[_+0],w=x[_+1],A=x[_+2];h.push(T,w,w,A,A,T)}}else if(m!==void 0){const x=m.array;y=m.version;for(let _=0,E=x.length/3-1;_<E;_+=3){const T=_+0,w=_+1,A=_+2;h.push(T,w,w,A,A,T)}}else return;const v=new(EJ(h)?AU:TU)(h,1);v.version=y;const g=a.get(f);g&&e.remove(g),a.set(f,v)}function u(f){const h=a.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return a.get(f)}return{get:o,update:l,getWireframeAttribute:u}}function n_e(t,e,n){let i;function r(h){i=h}let a,s;function o(h){a=h.type,s=h.bytesPerElement}function l(h,d){t.drawElements(i,d,a,h*s),n.update(d,i,1)}function c(h,d,m){m!==0&&(t.drawElementsInstanced(i,d,a,h*s,m),n.update(d,i,m))}function u(h,d,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,d,0,a,h,0,m);let v=0;for(let g=0;g<m;g++)v+=d[g];n.update(v,i,1)}function f(h,d,m,y){if(m===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<h.length;g++)c(h[g]/s,d[g],y[g]);else{v.multiDrawElementsInstancedWEBGL(i,d,0,a,h,0,y,0,m);let g=0;for(let x=0;x<m;x++)g+=d[x]*y[x];n.update(g,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function i_e(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function r_e(t,e,n){const i=new WeakMap,r=new ni;function a(s,o,l){const c=s.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=u!==void 0?u.length:0;let h=i.get(o);if(h===void 0||h.count!==f){let D=function(){A.dispose(),i.delete(o),o.removeEventListener("dispose",D)};h!==void 0&&h.texture.dispose();const d=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,y=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],g=o.morphAttributes.normal||[],x=o.morphAttributes.color||[];let _=0;d===!0&&(_=1),m===!0&&(_=2),y===!0&&(_=3);let E=o.attributes.position.count*_,T=1;E>e.maxTextureSize&&(T=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const w=new Float32Array(E*T*4*f),A=new v2(w,E,T,f);A.type=vr,A.needsUpdate=!0;const C=_*4;for(let k=0;k<f;k++){const P=v[k],B=g[k],H=x[k],G=E*T*4*k;for(let V=0;V<P.count;V++){const U=V*C;d===!0&&(r.fromBufferAttribute(P,V),w[G+U+0]=r.x,w[G+U+1]=r.y,w[G+U+2]=r.z,w[G+U+3]=0),m===!0&&(r.fromBufferAttribute(B,V),w[G+U+4]=r.x,w[G+U+5]=r.y,w[G+U+6]=r.z,w[G+U+7]=0),y===!0&&(r.fromBufferAttribute(H,V),w[G+U+8]=r.x,w[G+U+9]=r.y,w[G+U+10]=r.z,w[G+U+11]=H.itemSize===4?r.w:1)}}h={count:f,texture:A,size:new ft(E,T)},i.set(o,h),o.addEventListener("dispose",D)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let d=0;for(let y=0;y<c.length;y++)d+=c[y];const m=o.morphTargetsRelative?1:1-d;l.getUniforms().setValue(t,"morphTargetBaseInfluence",m),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:a}}function a_e(t,e,n,i){let r=new WeakMap;function a(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return f}function s(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:a,dispose:s}}const vZ=new tr,D6=new IU(1,1),xZ=new v2,_Z=new x2,SZ=new cS,O6=[],I6=[],N6=new Float32Array(16),P6=new Float32Array(9),L6=new Float32Array(4);function xv(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=O6[r];if(a===void 0&&(a=new Float32Array(r),O6[r]=a),e!==0){i.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function Ba(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Fa(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function q2(t,e){let n=I6[e];n===void 0&&(n=new Int32Array(e),I6[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function s_e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function o_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ba(n,e))return;t.uniform2fv(this.addr,e),Fa(n,e)}}function l_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ba(n,e))return;t.uniform3fv(this.addr,e),Fa(n,e)}}function c_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ba(n,e))return;t.uniform4fv(this.addr,e),Fa(n,e)}}function u_e(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ba(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Fa(n,e)}else{if(Ba(n,i))return;L6.set(i),t.uniformMatrix2fv(this.addr,!1,L6),Fa(n,i)}}function f_e(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ba(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Fa(n,e)}else{if(Ba(n,i))return;P6.set(i),t.uniformMatrix3fv(this.addr,!1,P6),Fa(n,i)}}function h_e(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ba(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Fa(n,e)}else{if(Ba(n,i))return;N6.set(i),t.uniformMatrix4fv(this.addr,!1,N6),Fa(n,i)}}function d_e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function p_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ba(n,e))return;t.uniform2iv(this.addr,e),Fa(n,e)}}function m_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ba(n,e))return;t.uniform3iv(this.addr,e),Fa(n,e)}}function g_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ba(n,e))return;t.uniform4iv(this.addr,e),Fa(n,e)}}function b_e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function y_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ba(n,e))return;t.uniform2uiv(this.addr,e),Fa(n,e)}}function v_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ba(n,e))return;t.uniform3uiv(this.addr,e),Fa(n,e)}}function x_e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ba(n,e))return;t.uniform4uiv(this.addr,e),Fa(n,e)}}function __e(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let a;this.type===t.SAMPLER_2D_SHADOW?(D6.compareFunction=wU,a=D6):a=vZ,n.setTexture2D(e||a,r)}function S_e(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||_Z,r)}function w_e(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||SZ,r)}function E_e(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||xZ,r)}function M_e(t){switch(t){case 5126:return s_e;case 35664:return o_e;case 35665:return l_e;case 35666:return c_e;case 35674:return u_e;case 35675:return f_e;case 35676:return h_e;case 5124:case 35670:return d_e;case 35667:case 35671:return p_e;case 35668:case 35672:return m_e;case 35669:case 35673:return g_e;case 5125:return b_e;case 36294:return y_e;case 36295:return v_e;case 36296:return x_e;case 35678:case 36198:case 36298:case 36306:case 35682:return __e;case 35679:case 36299:case 36307:return S_e;case 35680:case 36300:case 36308:case 36293:return w_e;case 36289:case 36303:case 36311:case 36292:return E_e}}function T_e(t,e){t.uniform1fv(this.addr,e)}function A_e(t,e){const n=xv(e,this.size,2);t.uniform2fv(this.addr,n)}function C_e(t,e){const n=xv(e,this.size,3);t.uniform3fv(this.addr,n)}function R_e(t,e){const n=xv(e,this.size,4);t.uniform4fv(this.addr,n)}function k_e(t,e){const n=xv(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function D_e(t,e){const n=xv(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function O_e(t,e){const n=xv(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function I_e(t,e){t.uniform1iv(this.addr,e)}function N_e(t,e){t.uniform2iv(this.addr,e)}function P_e(t,e){t.uniform3iv(this.addr,e)}function L_e(t,e){t.uniform4iv(this.addr,e)}function U_e(t,e){t.uniform1uiv(this.addr,e)}function B_e(t,e){t.uniform2uiv(this.addr,e)}function F_e(t,e){t.uniform3uiv(this.addr,e)}function z_e(t,e){t.uniform4uiv(this.addr,e)}function j_e(t,e,n){const i=this.cache,r=e.length,a=q2(n,r);Ba(i,a)||(t.uniform1iv(this.addr,a),Fa(i,a));for(let s=0;s!==r;++s)n.setTexture2D(e[s]||vZ,a[s])}function H_e(t,e,n){const i=this.cache,r=e.length,a=q2(n,r);Ba(i,a)||(t.uniform1iv(this.addr,a),Fa(i,a));for(let s=0;s!==r;++s)n.setTexture3D(e[s]||_Z,a[s])}function V_e(t,e,n){const i=this.cache,r=e.length,a=q2(n,r);Ba(i,a)||(t.uniform1iv(this.addr,a),Fa(i,a));for(let s=0;s!==r;++s)n.setTextureCube(e[s]||SZ,a[s])}function G_e(t,e,n){const i=this.cache,r=e.length,a=q2(n,r);Ba(i,a)||(t.uniform1iv(this.addr,a),Fa(i,a));for(let s=0;s!==r;++s)n.setTexture2DArray(e[s]||xZ,a[s])}function W_e(t){switch(t){case 5126:return T_e;case 35664:return A_e;case 35665:return C_e;case 35666:return R_e;case 35674:return k_e;case 35675:return D_e;case 35676:return O_e;case 5124:case 35670:return I_e;case 35667:case 35671:return N_e;case 35668:case 35672:return P_e;case 35669:case 35673:return L_e;case 5125:return U_e;case 36294:return B_e;case 36295:return F_e;case 36296:return z_e;case 35678:case 36198:case 36298:case 36306:case 35682:return j_e;case 35679:case 36299:case 36307:return H_e;case 35680:case 36300:case 36308:case 36293:return V_e;case 36289:case 36303:case 36311:case 36292:return G_e}}class q_e{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=M_e(n.type)}}class X_e{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=W_e(n.type)}}class Y_e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const o=r[a];o.setValue(e,n[o.id],i)}}}const vD=/(\w+)(\])?(\[|\.)?/g;function U6(t,e){t.seq.push(e),t.map[e.id]=e}function $_e(t,e,n){const i=t.name,r=i.length;for(vD.lastIndex=0;;){const a=vD.exec(i),s=vD.lastIndex;let o=a[1];const l=a[2]==="]",c=a[3];if(l&&(o=o|0),c===void 0||c==="["&&s+2===r){U6(n,c===void 0?new q_e(o,t,e):new X_e(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new Y_e(o),U6(n,f)),n=f}}}class XM{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(n,r),s=e.getUniformLocation(n,a.name);$_e(a,s,this)}}setValue(e,n,i,r){const a=this.map[n];a!==void 0&&a.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let a=0,s=n.length;a!==s;++a){const o=n[a],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in n&&i.push(s)}return i}}function B6(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const K_e=37297;let J_e=0;function Z_e(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=r;s<a;s++){const o=s+1;i.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return i.join(`
`)}const F6=new Wn;function Q_e(t){oi._getMatrix(F6,oi.workingColorSpace,t);const e=`mat3( ${F6.elements.map(n=>n.toFixed(4))} )`;switch(oi.getTransfer(t)){case p_:return[e,"LinearTransferOETF"];case sr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function z6(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+a+`

`+Z_e(t.getShaderSource(e),o)}else return a}function eSe(t,e){const n=Q_e(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function tSe(t,e){let n;switch(e){case rJ:n="Linear";break;case aJ:n="Reinhard";break;case sJ:n="Cineon";break;case mU:n="ACESFilmic";break;case lJ:n="AgX";break;case cJ:n="Neutral";break;case oJ:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const vE=new Y;function nSe(){oi.getLuminanceCoefficients(vE);const t=vE.x.toFixed(4),e=vE.y.toFixed(4),n=vE.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function iSe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(t1).join(`
`)}function rSe(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function aSe(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=t.getActiveAttrib(e,r),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function t1(t){return t!==""}function j6(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function H6(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const sSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function zN(t){return t.replace(sSe,lSe)}const oSe=new Map;function lSe(t,e){let n=on[e];if(n===void 0){const i=oSe.get(e);if(i!==void 0)n=on[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return zN(n)}const cSe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function V6(t){return t.replace(cSe,uSe)}function uSe(t,e,n,i){let r="";for(let a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function G6(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function fSe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===f2?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===M1?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Zc&&(e="SHADOWMAP_TYPE_VSM"),e}function hSe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case mf:case np:e="ENVMAP_TYPE_CUBE";break;case uv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dSe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case np:e="ENVMAP_MODE_REFRACTION";break}return e}function pSe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case oS:e="ENVMAP_BLENDING_MULTIPLY";break;case nJ:e="ENVMAP_BLENDING_MIX";break;case iJ:e="ENVMAP_BLENDING_ADD";break}return e}function mSe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function gSe(t,e,n,i){const r=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=fSe(n),c=hSe(n),u=dSe(n),f=pSe(n),h=mSe(n),d=iSe(n),m=rSe(a),y=r.createProgram();let v,g,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(t1).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(t1).join(`
`),g.length>0&&(g+=`
`)):(v=[G6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(t1).join(`
`),g=[G6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==cf?"#define TONE_MAPPING":"",n.toneMapping!==cf?on.tonemapping_pars_fragment:"",n.toneMapping!==cf?tSe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,eSe("linearToOutputTexel",n.outputColorSpace),nSe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(t1).join(`
`)),s=zN(s),s=j6(s,n),s=H6(s,n),o=zN(o),o=j6(o,n),o=H6(o,n),s=V6(s),o=V6(o),n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,v=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",n.glslVersion===ON?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ON?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=x+v+s,E=x+g+o,T=B6(r,r.VERTEX_SHADER,_),w=B6(r,r.FRAGMENT_SHADER,E);r.attachShader(y,T),r.attachShader(y,w),n.index0AttributeName!==void 0?r.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function A(P){if(t.debug.checkShaderErrors){const B=r.getProgramInfoLog(y)||"",H=r.getShaderInfoLog(T)||"",G=r.getShaderInfoLog(w)||"",V=B.trim(),U=H.trim(),F=G.trim();let q=!0,X=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(q=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,y,T,w);else{const z=z6(r,T,"vertex"),ce=z6(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+V+`
`+z+`
`+ce)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(U===""||F==="")&&(X=!1);X&&(P.diagnostics={runnable:q,programLog:V,vertexShader:{log:U,prefix:v},fragmentShader:{log:F,prefix:g}})}r.deleteShader(T),r.deleteShader(w),C=new XM(r,y),D=aSe(r,y)}let C;this.getUniforms=function(){return C===void 0&&A(this),C};let D;this.getAttributes=function(){return D===void 0&&A(this),D};let k=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return k===!1&&(k=r.getProgramParameter(y,K_e)),k},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=J_e++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=T,this.fragmentShader=w,this}let bSe=0;class ySe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new vSe(e),n.set(e,i)),i}}class vSe{constructor(e){this.id=bSe++,this.code=e,this.usedTimes=0}}function xSe(t,e,n,i,r,a,s){const o=new ky,l=new ySe,c=new Set,u=[],f=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(D){return c.add(D),D===0?"uv":`uv${D}`}function v(D,k,P,B,H){const G=B.fog,V=H.geometry,U=D.isMeshStandardMaterial?B.environment:null,F=(D.isMeshStandardMaterial?n:e).get(D.envMap||U),q=F&&F.mapping===uv?F.image.height:null,X=m[D.type];D.precision!==null&&(d=r.getMaxPrecision(D.precision),d!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",d,"instead."));const z=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,ce=z!==void 0?z.length:0;let he=0;V.morphAttributes.position!==void 0&&(he=1),V.morphAttributes.normal!==void 0&&(he=2),V.morphAttributes.color!==void 0&&(he=3);let $,Me,Se,pe;if(X){const zn=nu[X];$=zn.vertexShader,Me=zn.fragmentShader}else $=D.vertexShader,Me=D.fragmentShader,l.update(D),Se=l.getVertexShaderID(D),pe=l.getFragmentShaderID(D);const xe=t.getRenderTarget(),Ne=t.state.buffers.depth.getReversed(),Ge=H.isInstancedMesh===!0,$e=H.isBatchedMesh===!0,ct=!!D.map,At=!!D.matcap,fe=!!F,Ve=!!D.aoMap,je=!!D.lightMap,ot=!!D.bumpMap,Te=!!D.normalMap,Ue=!!D.displacementMap,Oe=!!D.emissiveMap,We=!!D.metalnessMap,Et=!!D.roughnessMap,vt=D.anisotropy>0,re=D.clearcoat>0,J=D.dispersion>0,ue=D.iridescence>0,se=D.sheen>0,be=D.transmission>0,Z=vt&&!!D.anisotropyMap,Ye=re&&!!D.clearcoatMap,tt=re&&!!D.clearcoatNormalMap,mt=re&&!!D.clearcoatRoughnessMap,Fe=ue&&!!D.iridescenceMap,rt=ue&&!!D.iridescenceThicknessMap,Je=se&&!!D.sheenColorMap,Xt=se&&!!D.sheenRoughnessMap,Nt=!!D.specularMap,ht=!!D.specularColorMap,zt=!!D.specularIntensityMap,Re=be&&!!D.transmissionMap,Be=be&&!!D.thicknessMap,wt=!!D.gradientMap,Wt=!!D.alphaMap,ut=D.alphaTest>0,gt=!!D.alphaHash,Mt=!!D.extensions;let gn=cf;D.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(gn=t.toneMapping);const Vn={shaderID:X,shaderType:D.type,shaderName:D.name,vertexShader:$,fragmentShader:Me,defines:D.defines,customVertexShaderID:Se,customFragmentShaderID:pe,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:d,batching:$e,batchingColor:$e&&H._colorsTexture!==null,instancing:Ge,instancingColor:Ge&&H.instanceColor!==null,instancingMorph:Ge&&H.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:xe===null?t.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:_u,alphaToCoverage:!!D.alphaToCoverage,map:ct,matcap:At,envMap:fe,envMapMode:fe&&F.mapping,envMapCubeUVHeight:q,aoMap:Ve,lightMap:je,bumpMap:ot,normalMap:Te,displacementMap:h&&Ue,emissiveMap:Oe,normalMapObjectSpace:Te&&D.normalMapType===gJ,normalMapTangentSpace:Te&&D.normalMapType===up,metalnessMap:We,roughnessMap:Et,anisotropy:vt,anisotropyMap:Z,clearcoat:re,clearcoatMap:Ye,clearcoatNormalMap:tt,clearcoatRoughnessMap:mt,dispersion:J,iridescence:ue,iridescenceMap:Fe,iridescenceThicknessMap:rt,sheen:se,sheenColorMap:Je,sheenRoughnessMap:Xt,specularMap:Nt,specularColorMap:ht,specularIntensityMap:zt,transmission:be,transmissionMap:Re,thicknessMap:Be,gradientMap:wt,opaque:D.transparent===!1&&D.blending===Ym&&D.alphaToCoverage===!1,alphaMap:Wt,alphaTest:ut,alphaHash:gt,combine:D.combine,mapUv:ct&&y(D.map.channel),aoMapUv:Ve&&y(D.aoMap.channel),lightMapUv:je&&y(D.lightMap.channel),bumpMapUv:ot&&y(D.bumpMap.channel),normalMapUv:Te&&y(D.normalMap.channel),displacementMapUv:Ue&&y(D.displacementMap.channel),emissiveMapUv:Oe&&y(D.emissiveMap.channel),metalnessMapUv:We&&y(D.metalnessMap.channel),roughnessMapUv:Et&&y(D.roughnessMap.channel),anisotropyMapUv:Z&&y(D.anisotropyMap.channel),clearcoatMapUv:Ye&&y(D.clearcoatMap.channel),clearcoatNormalMapUv:tt&&y(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:mt&&y(D.clearcoatRoughnessMap.channel),iridescenceMapUv:Fe&&y(D.iridescenceMap.channel),iridescenceThicknessMapUv:rt&&y(D.iridescenceThicknessMap.channel),sheenColorMapUv:Je&&y(D.sheenColorMap.channel),sheenRoughnessMapUv:Xt&&y(D.sheenRoughnessMap.channel),specularMapUv:Nt&&y(D.specularMap.channel),specularColorMapUv:ht&&y(D.specularColorMap.channel),specularIntensityMapUv:zt&&y(D.specularIntensityMap.channel),transmissionMapUv:Re&&y(D.transmissionMap.channel),thicknessMapUv:Be&&y(D.thicknessMap.channel),alphaMapUv:Wt&&y(D.alphaMap.channel),vertexTangents:!!V.attributes.tangent&&(Te||vt),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!V.attributes.uv&&(ct||Wt),fog:!!G,useFog:D.fog===!0,fogExp2:!!G&&G.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:f,reversedDepthBuffer:Ne,skinning:H.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:he,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:D.dithering,shadowMapEnabled:t.shadowMap.enabled&&P.length>0,shadowMapType:t.shadowMap.type,toneMapping:gn,decodeVideoTexture:ct&&D.map.isVideoTexture===!0&&oi.getTransfer(D.map.colorSpace)===sr,decodeVideoTextureEmissive:Oe&&D.emissiveMap.isVideoTexture===!0&&oi.getTransfer(D.emissiveMap.colorSpace)===sr,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===$r,flipSided:D.side===ba,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:Mt&&D.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Mt&&D.extensions.multiDraw===!0||$e)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return Vn.vertexUv1s=c.has(1),Vn.vertexUv2s=c.has(2),Vn.vertexUv3s=c.has(3),c.clear(),Vn}function g(D){const k=[];if(D.shaderID?k.push(D.shaderID):(k.push(D.customVertexShaderID),k.push(D.customFragmentShaderID)),D.defines!==void 0)for(const P in D.defines)k.push(P),k.push(D.defines[P]);return D.isRawShaderMaterial===!1&&(x(k,D),_(k,D),k.push(t.outputColorSpace)),k.push(D.customProgramCacheKey),k.join()}function x(D,k){D.push(k.precision),D.push(k.outputColorSpace),D.push(k.envMapMode),D.push(k.envMapCubeUVHeight),D.push(k.mapUv),D.push(k.alphaMapUv),D.push(k.lightMapUv),D.push(k.aoMapUv),D.push(k.bumpMapUv),D.push(k.normalMapUv),D.push(k.displacementMapUv),D.push(k.emissiveMapUv),D.push(k.metalnessMapUv),D.push(k.roughnessMapUv),D.push(k.anisotropyMapUv),D.push(k.clearcoatMapUv),D.push(k.clearcoatNormalMapUv),D.push(k.clearcoatRoughnessMapUv),D.push(k.iridescenceMapUv),D.push(k.iridescenceThicknessMapUv),D.push(k.sheenColorMapUv),D.push(k.sheenRoughnessMapUv),D.push(k.specularMapUv),D.push(k.specularColorMapUv),D.push(k.specularIntensityMapUv),D.push(k.transmissionMapUv),D.push(k.thicknessMapUv),D.push(k.combine),D.push(k.fogExp2),D.push(k.sizeAttenuation),D.push(k.morphTargetsCount),D.push(k.morphAttributeCount),D.push(k.numDirLights),D.push(k.numPointLights),D.push(k.numSpotLights),D.push(k.numSpotLightMaps),D.push(k.numHemiLights),D.push(k.numRectAreaLights),D.push(k.numDirLightShadows),D.push(k.numPointLightShadows),D.push(k.numSpotLightShadows),D.push(k.numSpotLightShadowsWithMaps),D.push(k.numLightProbes),D.push(k.shadowMapType),D.push(k.toneMapping),D.push(k.numClippingPlanes),D.push(k.numClipIntersection),D.push(k.depthPacking)}function _(D,k){o.disableAll(),k.supportsVertexTextures&&o.enable(0),k.instancing&&o.enable(1),k.instancingColor&&o.enable(2),k.instancingMorph&&o.enable(3),k.matcap&&o.enable(4),k.envMap&&o.enable(5),k.normalMapObjectSpace&&o.enable(6),k.normalMapTangentSpace&&o.enable(7),k.clearcoat&&o.enable(8),k.iridescence&&o.enable(9),k.alphaTest&&o.enable(10),k.vertexColors&&o.enable(11),k.vertexAlphas&&o.enable(12),k.vertexUv1s&&o.enable(13),k.vertexUv2s&&o.enable(14),k.vertexUv3s&&o.enable(15),k.vertexTangents&&o.enable(16),k.anisotropy&&o.enable(17),k.alphaHash&&o.enable(18),k.batching&&o.enable(19),k.dispersion&&o.enable(20),k.batchingColor&&o.enable(21),k.gradientMap&&o.enable(22),D.push(o.mask),o.disableAll(),k.fog&&o.enable(0),k.useFog&&o.enable(1),k.flatShading&&o.enable(2),k.logarithmicDepthBuffer&&o.enable(3),k.reversedDepthBuffer&&o.enable(4),k.skinning&&o.enable(5),k.morphTargets&&o.enable(6),k.morphNormals&&o.enable(7),k.morphColors&&o.enable(8),k.premultipliedAlpha&&o.enable(9),k.shadowMapEnabled&&o.enable(10),k.doubleSided&&o.enable(11),k.flipSided&&o.enable(12),k.useDepthPacking&&o.enable(13),k.dithering&&o.enable(14),k.transmission&&o.enable(15),k.sheen&&o.enable(16),k.opaque&&o.enable(17),k.pointsUvs&&o.enable(18),k.decodeVideoTexture&&o.enable(19),k.decodeVideoTextureEmissive&&o.enable(20),k.alphaToCoverage&&o.enable(21),D.push(o.mask)}function E(D){const k=m[D.type];let P;if(k){const B=nu[k];P=b_.clone(B.uniforms)}else P=D.uniforms;return P}function T(D,k){let P;for(let B=0,H=u.length;B<H;B++){const G=u[B];if(G.cacheKey===k){P=G,++P.usedTimes;break}}return P===void 0&&(P=new gSe(t,k,D,a),u.push(P)),P}function w(D){if(--D.usedTimes===0){const k=u.indexOf(D);u[k]=u[u.length-1],u.pop(),D.destroy()}}function A(D){l.remove(D)}function C(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:E,acquireProgram:T,releaseProgram:w,releaseShaderCache:A,programs:u,dispose:C}}function _Se(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function i(s){t.delete(s)}function r(s,o,l){t.get(s)[o]=l}function a(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:a}}function SSe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function W6(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function q6(){const t=[];let e=0;const n=[],i=[],r=[];function a(){e=0,n.length=0,i.length=0,r.length=0}function s(f,h,d,m,y,v){let g=t[e];return g===void 0?(g={id:f.id,object:f,geometry:h,material:d,groupOrder:m,renderOrder:f.renderOrder,z:y,group:v},t[e]=g):(g.id=f.id,g.object=f,g.geometry=h,g.material=d,g.groupOrder=m,g.renderOrder=f.renderOrder,g.z=y,g.group=v),e++,g}function o(f,h,d,m,y,v){const g=s(f,h,d,m,y,v);d.transmission>0?i.push(g):d.transparent===!0?r.push(g):n.push(g)}function l(f,h,d,m,y,v){const g=s(f,h,d,m,y,v);d.transmission>0?i.unshift(g):d.transparent===!0?r.unshift(g):n.unshift(g)}function c(f,h){n.length>1&&n.sort(f||SSe),i.length>1&&i.sort(h||W6),r.length>1&&r.sort(h||W6)}function u(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:o,unshift:l,finish:u,sort:c}}function wSe(){let t=new WeakMap;function e(i,r){const a=t.get(i);let s;return a===void 0?(s=new q6,t.set(i,[s])):r>=a.length?(s=new q6,a.push(s)):s=a[r],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function ESe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Y,color:new Ut};break;case"SpotLight":n={position:new Y,direction:new Y,color:new Ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Y,color:new Ut,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Y,skyColor:new Ut,groundColor:new Ut};break;case"RectAreaLight":n={color:new Ut,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return t[e.id]=n,n}}}function MSe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ft,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let TSe=0;function ASe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function CSe(t){const e=new ESe,n=MSe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new Y);const r=new Y,a=new Ct,s=new Ct;function o(c){let u=0,f=0,h=0;for(let D=0;D<9;D++)i.probe[D].set(0,0,0);let d=0,m=0,y=0,v=0,g=0,x=0,_=0,E=0,T=0,w=0,A=0;c.sort(ASe);for(let D=0,k=c.length;D<k;D++){const P=c[D],B=P.color,H=P.intensity,G=P.distance,V=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)u+=B.r*H,f+=B.g*H,h+=B.b*H;else if(P.isLightProbe){for(let U=0;U<9;U++)i.probe[U].addScaledVector(P.sh.coefficients[U],H);A++}else if(P.isDirectionalLight){const U=e.get(P);if(U.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const F=P.shadow,q=n.get(P);q.shadowIntensity=F.intensity,q.shadowBias=F.bias,q.shadowNormalBias=F.normalBias,q.shadowRadius=F.radius,q.shadowMapSize=F.mapSize,i.directionalShadow[d]=q,i.directionalShadowMap[d]=V,i.directionalShadowMatrix[d]=P.shadow.matrix,x++}i.directional[d]=U,d++}else if(P.isSpotLight){const U=e.get(P);U.position.setFromMatrixPosition(P.matrixWorld),U.color.copy(B).multiplyScalar(H),U.distance=G,U.coneCos=Math.cos(P.angle),U.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),U.decay=P.decay,i.spot[y]=U;const F=P.shadow;if(P.map&&(i.spotLightMap[T]=P.map,T++,F.updateMatrices(P),P.castShadow&&w++),i.spotLightMatrix[y]=F.matrix,P.castShadow){const q=n.get(P);q.shadowIntensity=F.intensity,q.shadowBias=F.bias,q.shadowNormalBias=F.normalBias,q.shadowRadius=F.radius,q.shadowMapSize=F.mapSize,i.spotShadow[y]=q,i.spotShadowMap[y]=V,E++}y++}else if(P.isRectAreaLight){const U=e.get(P);U.color.copy(B).multiplyScalar(H),U.halfWidth.set(P.width*.5,0,0),U.halfHeight.set(0,P.height*.5,0),i.rectArea[v]=U,v++}else if(P.isPointLight){const U=e.get(P);if(U.color.copy(P.color).multiplyScalar(P.intensity),U.distance=P.distance,U.decay=P.decay,P.castShadow){const F=P.shadow,q=n.get(P);q.shadowIntensity=F.intensity,q.shadowBias=F.bias,q.shadowNormalBias=F.normalBias,q.shadowRadius=F.radius,q.shadowMapSize=F.mapSize,q.shadowCameraNear=F.camera.near,q.shadowCameraFar=F.camera.far,i.pointShadow[m]=q,i.pointShadowMap[m]=V,i.pointShadowMatrix[m]=P.shadow.matrix,_++}i.point[m]=U,m++}else if(P.isHemisphereLight){const U=e.get(P);U.skyColor.copy(P.color).multiplyScalar(H),U.groundColor.copy(P.groundColor).multiplyScalar(H),i.hemi[g]=U,g++}}v>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Zt.LTC_FLOAT_1,i.rectAreaLTC2=Zt.LTC_FLOAT_2):(i.rectAreaLTC1=Zt.LTC_HALF_1,i.rectAreaLTC2=Zt.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=f,i.ambient[2]=h;const C=i.hash;(C.directionalLength!==d||C.pointLength!==m||C.spotLength!==y||C.rectAreaLength!==v||C.hemiLength!==g||C.numDirectionalShadows!==x||C.numPointShadows!==_||C.numSpotShadows!==E||C.numSpotMaps!==T||C.numLightProbes!==A)&&(i.directional.length=d,i.spot.length=y,i.rectArea.length=v,i.point.length=m,i.hemi.length=g,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=E+T-w,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=w,i.numLightProbes=A,C.directionalLength=d,C.pointLength=m,C.spotLength=y,C.rectAreaLength=v,C.hemiLength=g,C.numDirectionalShadows=x,C.numPointShadows=_,C.numSpotShadows=E,C.numSpotMaps=T,C.numLightProbes=A,i.version=TSe++)}function l(c,u){let f=0,h=0,d=0,m=0,y=0;const v=u.matrixWorldInverse;for(let g=0,x=c.length;g<x;g++){const _=c[g];if(_.isDirectionalLight){const E=i.directional[f];E.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(v),f++}else if(_.isSpotLight){const E=i.spot[d];E.position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(v),E.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(v),d++}else if(_.isRectAreaLight){const E=i.rectArea[m];E.position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(v),s.identity(),a.copy(_.matrixWorld),a.premultiply(v),s.extractRotation(a),E.halfWidth.set(_.width*.5,0,0),E.halfHeight.set(0,_.height*.5,0),E.halfWidth.applyMatrix4(s),E.halfHeight.applyMatrix4(s),m++}else if(_.isPointLight){const E=i.point[h];E.position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(v),h++}else if(_.isHemisphereLight){const E=i.hemi[y];E.direction.setFromMatrixPosition(_.matrixWorld),E.direction.transformDirection(v),y++}}}return{setup:o,setupView:l,state:i}}function X6(t){const e=new CSe(t),n=[],i=[];function r(u){c.camera=u,n.length=0,i.length=0}function a(u){n.push(u)}function s(u){i.push(u)}function o(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function RSe(t){let e=new WeakMap;function n(r,a=0){const s=e.get(r);let o;return s===void 0?(o=new X6(t),e.set(r,[o])):a>=s.length?(o=new X6(t),s.push(o)):o=s[a],o}function i(){e=new WeakMap}return{get:n,dispose:i}}const kSe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,DSe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function OSe(t,e,n){let i=new kg;const r=new ft,a=new ft,s=new ni,o=new VU({depthPacking:mJ}),l=new GU,c={},u=n.maxTextureSize,f={[Al]:ba,[ba]:Al,[$r]:$r},h=new is({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ft},radius:{value:4}},vertexShader:kSe,fragmentShader:DSe}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const m=new An;m.setAttribute("position",new Tn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new fi(m,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=f2;let g=this.type;this.render=function(w,A,C){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||w.length===0)return;const D=t.getRenderTarget(),k=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),B=t.state;B.setBlending(lf),B.buffers.depth.getReversed()?B.buffers.color.setClear(0,0,0,0):B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const H=g!==Zc&&this.type===Zc,G=g===Zc&&this.type!==Zc;for(let V=0,U=w.length;V<U;V++){const F=w[V],q=F.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;r.copy(q.mapSize);const X=q.getFrameExtents();if(r.multiply(X),a.copy(q.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(a.x=Math.floor(u/X.x),r.x=a.x*X.x,q.mapSize.x=a.x),r.y>u&&(a.y=Math.floor(u/X.y),r.y=a.y*X.y,q.mapSize.y=a.y)),q.map===null||H===!0||G===!0){const ce=this.type!==Zc?{minFilter:es,magFilter:es}:{};q.map!==null&&q.map.dispose(),q.map=new Ac(r.x,r.y,ce),q.map.texture.name=F.name+".shadowMap",q.camera.updateProjectionMatrix()}t.setRenderTarget(q.map),t.clear();const z=q.getViewportCount();for(let ce=0;ce<z;ce++){const he=q.getViewport(ce);s.set(a.x*he.x,a.y*he.y,a.x*he.z,a.y*he.w),B.viewport(s),q.updateMatrices(F,ce),i=q.getFrustum(),E(A,C,q.camera,F,this.type)}q.isPointLightShadow!==!0&&this.type===Zc&&x(q,C),q.needsUpdate=!1}g=this.type,v.needsUpdate=!1,t.setRenderTarget(D,k,P)};function x(w,A){const C=e.update(y);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Ac(r.x,r.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(A,null,C,h,y,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(A,null,C,d,y,null)}function _(w,A,C,D){let k=null;const P=C.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(P!==void 0)k=P;else if(k=C.isPointLight===!0?l:o,t.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0||A.alphaToCoverage===!0){const B=k.uuid,H=A.uuid;let G=c[B];G===void 0&&(G={},c[B]=G);let V=G[H];V===void 0&&(V=k.clone(),G[H]=V,A.addEventListener("dispose",T)),k=V}if(k.visible=A.visible,k.wireframe=A.wireframe,D===Zc?k.side=A.shadowSide!==null?A.shadowSide:A.side:k.side=A.shadowSide!==null?A.shadowSide:f[A.side],k.alphaMap=A.alphaMap,k.alphaTest=A.alphaToCoverage===!0?.5:A.alphaTest,k.map=A.map,k.clipShadows=A.clipShadows,k.clippingPlanes=A.clippingPlanes,k.clipIntersection=A.clipIntersection,k.displacementMap=A.displacementMap,k.displacementScale=A.displacementScale,k.displacementBias=A.displacementBias,k.wireframeLinewidth=A.wireframeLinewidth,k.linewidth=A.linewidth,C.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const B=t.properties.get(k);B.light=C}return k}function E(w,A,C,D,k){if(w.visible===!1)return;if(w.layers.test(A.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&k===Zc)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,w.matrixWorld);const H=e.update(w),G=w.material;if(Array.isArray(G)){const V=H.groups;for(let U=0,F=V.length;U<F;U++){const q=V[U],X=G[q.materialIndex];if(X&&X.visible){const z=_(w,X,D,k);w.onBeforeShadow(t,w,A,C,H,z,q),t.renderBufferDirect(C,null,H,z,w,q),w.onAfterShadow(t,w,A,C,H,z,q)}}}else if(G.visible){const V=_(w,G,D,k);w.onBeforeShadow(t,w,A,C,H,V,null),t.renderBufferDirect(C,null,H,V,w,null),w.onAfterShadow(t,w,A,C,H,V,null)}}const B=w.children;for(let H=0,G=B.length;H<G;H++)E(B[H],A,C,D,k)}function T(w){w.target.removeEventListener("dispose",T);for(const C in c){const D=c[C],k=w.target.uuid;k in D&&(D[k].dispose(),delete D[k])}}}const ISe={[YT]:$T,[KT]:QT,[JT]:eA,[og]:ZT,[$T]:YT,[QT]:KT,[eA]:JT,[ZT]:og};function NSe(t,e){function n(){let Re=!1;const Be=new ni;let wt=null;const Wt=new ni(0,0,0,0);return{setMask:function(ut){wt!==ut&&!Re&&(t.colorMask(ut,ut,ut,ut),wt=ut)},setLocked:function(ut){Re=ut},setClear:function(ut,gt,Mt,gn,Vn){Vn===!0&&(ut*=gn,gt*=gn,Mt*=gn),Be.set(ut,gt,Mt,gn),Wt.equals(Be)===!1&&(t.clearColor(ut,gt,Mt,gn),Wt.copy(Be))},reset:function(){Re=!1,wt=null,Wt.set(-1,0,0,0)}}}function i(){let Re=!1,Be=!1,wt=null,Wt=null,ut=null;return{setReversed:function(gt){if(Be!==gt){const Mt=e.get("EXT_clip_control");gt?Mt.clipControlEXT(Mt.LOWER_LEFT_EXT,Mt.ZERO_TO_ONE_EXT):Mt.clipControlEXT(Mt.LOWER_LEFT_EXT,Mt.NEGATIVE_ONE_TO_ONE_EXT),Be=gt;const gn=ut;ut=null,this.setClear(gn)}},getReversed:function(){return Be},setTest:function(gt){gt?xe(t.DEPTH_TEST):Ne(t.DEPTH_TEST)},setMask:function(gt){wt!==gt&&!Re&&(t.depthMask(gt),wt=gt)},setFunc:function(gt){if(Be&&(gt=ISe[gt]),Wt!==gt){switch(gt){case YT:t.depthFunc(t.NEVER);break;case $T:t.depthFunc(t.ALWAYS);break;case KT:t.depthFunc(t.LESS);break;case og:t.depthFunc(t.LEQUAL);break;case JT:t.depthFunc(t.EQUAL);break;case ZT:t.depthFunc(t.GEQUAL);break;case QT:t.depthFunc(t.GREATER);break;case eA:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Wt=gt}},setLocked:function(gt){Re=gt},setClear:function(gt){ut!==gt&&(Be&&(gt=1-gt),t.clearDepth(gt),ut=gt)},reset:function(){Re=!1,wt=null,Wt=null,ut=null,Be=!1}}}function r(){let Re=!1,Be=null,wt=null,Wt=null,ut=null,gt=null,Mt=null,gn=null,Vn=null;return{setTest:function(zn){Re||(zn?xe(t.STENCIL_TEST):Ne(t.STENCIL_TEST))},setMask:function(zn){Be!==zn&&!Re&&(t.stencilMask(zn),Be=zn)},setFunc:function(zn,Yi,Gn){(wt!==zn||Wt!==Yi||ut!==Gn)&&(t.stencilFunc(zn,Yi,Gn),wt=zn,Wt=Yi,ut=Gn)},setOp:function(zn,Yi,Gn){(gt!==zn||Mt!==Yi||gn!==Gn)&&(t.stencilOp(zn,Yi,Gn),gt=zn,Mt=Yi,gn=Gn)},setLocked:function(zn){Re=zn},setClear:function(zn){Vn!==zn&&(t.clearStencil(zn),Vn=zn)},reset:function(){Re=!1,Be=null,wt=null,Wt=null,ut=null,gt=null,Mt=null,gn=null,Vn=null}}}const a=new n,s=new i,o=new r,l=new WeakMap,c=new WeakMap;let u={},f={},h=new WeakMap,d=[],m=null,y=!1,v=null,g=null,x=null,_=null,E=null,T=null,w=null,A=new Ut(0,0,0),C=0,D=!1,k=null,P=null,B=null,H=null,G=null;const V=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,F=0;const q=t.getParameter(t.VERSION);q.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(q)[1]),U=F>=1):q.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),U=F>=2);let X=null,z={};const ce=t.getParameter(t.SCISSOR_BOX),he=t.getParameter(t.VIEWPORT),$=new ni().fromArray(ce),Me=new ni().fromArray(he);function Se(Re,Be,wt,Wt){const ut=new Uint8Array(4),gt=t.createTexture();t.bindTexture(Re,gt),t.texParameteri(Re,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Re,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Mt=0;Mt<wt;Mt++)Re===t.TEXTURE_3D||Re===t.TEXTURE_2D_ARRAY?t.texImage3D(Be,0,t.RGBA,1,1,Wt,0,t.RGBA,t.UNSIGNED_BYTE,ut):t.texImage2D(Be+Mt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ut);return gt}const pe={};pe[t.TEXTURE_2D]=Se(t.TEXTURE_2D,t.TEXTURE_2D,1),pe[t.TEXTURE_CUBE_MAP]=Se(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[t.TEXTURE_2D_ARRAY]=Se(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),pe[t.TEXTURE_3D]=Se(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),xe(t.DEPTH_TEST),s.setFunc(og),ot(!1),Te(TN),xe(t.CULL_FACE),Ve(lf);function xe(Re){u[Re]!==!0&&(t.enable(Re),u[Re]=!0)}function Ne(Re){u[Re]!==!1&&(t.disable(Re),u[Re]=!1)}function Ge(Re,Be){return f[Re]!==Be?(t.bindFramebuffer(Re,Be),f[Re]=Be,Re===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=Be),Re===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=Be),!0):!1}function $e(Re,Be){let wt=d,Wt=!1;if(Re){wt=h.get(Be),wt===void 0&&(wt=[],h.set(Be,wt));const ut=Re.textures;if(wt.length!==ut.length||wt[0]!==t.COLOR_ATTACHMENT0){for(let gt=0,Mt=ut.length;gt<Mt;gt++)wt[gt]=t.COLOR_ATTACHMENT0+gt;wt.length=ut.length,Wt=!0}}else wt[0]!==t.BACK&&(wt[0]=t.BACK,Wt=!0);Wt&&t.drawBuffers(wt)}function ct(Re){return m!==Re?(t.useProgram(Re),m=Re,!0):!1}const At={[kd]:t.FUNC_ADD,[FK]:t.FUNC_SUBTRACT,[zK]:t.FUNC_REVERSE_SUBTRACT};At[jK]=t.MIN,At[HK]=t.MAX;const fe={[VK]:t.ZERO,[GK]:t.ONE,[WK]:t.SRC_COLOR,[qT]:t.SRC_ALPHA,[JK]:t.SRC_ALPHA_SATURATE,[$K]:t.DST_COLOR,[XK]:t.DST_ALPHA,[qK]:t.ONE_MINUS_SRC_COLOR,[XT]:t.ONE_MINUS_SRC_ALPHA,[KK]:t.ONE_MINUS_DST_COLOR,[YK]:t.ONE_MINUS_DST_ALPHA,[ZK]:t.CONSTANT_COLOR,[QK]:t.ONE_MINUS_CONSTANT_COLOR,[eJ]:t.CONSTANT_ALPHA,[tJ]:t.ONE_MINUS_CONSTANT_ALPHA};function Ve(Re,Be,wt,Wt,ut,gt,Mt,gn,Vn,zn){if(Re===lf){y===!0&&(Ne(t.BLEND),y=!1);return}if(y===!1&&(xe(t.BLEND),y=!0),Re!==BK){if(Re!==v||zn!==D){if((g!==kd||E!==kd)&&(t.blendEquation(t.FUNC_ADD),g=kd,E=kd),zn)switch(Re){case Ym:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case AN:t.blendFunc(t.ONE,t.ONE);break;case CN:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case RN:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}else switch(Re){case Ym:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case AN:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case CN:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case RN:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}x=null,_=null,T=null,w=null,A.set(0,0,0),C=0,v=Re,D=zn}return}ut=ut||Be,gt=gt||wt,Mt=Mt||Wt,(Be!==g||ut!==E)&&(t.blendEquationSeparate(At[Be],At[ut]),g=Be,E=ut),(wt!==x||Wt!==_||gt!==T||Mt!==w)&&(t.blendFuncSeparate(fe[wt],fe[Wt],fe[gt],fe[Mt]),x=wt,_=Wt,T=gt,w=Mt),(gn.equals(A)===!1||Vn!==C)&&(t.blendColor(gn.r,gn.g,gn.b,Vn),A.copy(gn),C=Vn),v=Re,D=!1}function je(Re,Be){Re.side===$r?Ne(t.CULL_FACE):xe(t.CULL_FACE);let wt=Re.side===ba;Be&&(wt=!wt),ot(wt),Re.blending===Ym&&Re.transparent===!1?Ve(lf):Ve(Re.blending,Re.blendEquation,Re.blendSrc,Re.blendDst,Re.blendEquationAlpha,Re.blendSrcAlpha,Re.blendDstAlpha,Re.blendColor,Re.blendAlpha,Re.premultipliedAlpha),s.setFunc(Re.depthFunc),s.setTest(Re.depthTest),s.setMask(Re.depthWrite),a.setMask(Re.colorWrite);const Wt=Re.stencilWrite;o.setTest(Wt),Wt&&(o.setMask(Re.stencilWriteMask),o.setFunc(Re.stencilFunc,Re.stencilRef,Re.stencilFuncMask),o.setOp(Re.stencilFail,Re.stencilZFail,Re.stencilZPass)),Oe(Re.polygonOffset,Re.polygonOffsetFactor,Re.polygonOffsetUnits),Re.alphaToCoverage===!0?xe(t.SAMPLE_ALPHA_TO_COVERAGE):Ne(t.SAMPLE_ALPHA_TO_COVERAGE)}function ot(Re){k!==Re&&(Re?t.frontFace(t.CW):t.frontFace(t.CCW),k=Re)}function Te(Re){Re!==PK?(xe(t.CULL_FACE),Re!==P&&(Re===TN?t.cullFace(t.BACK):Re===LK?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ne(t.CULL_FACE),P=Re}function Ue(Re){Re!==B&&(U&&t.lineWidth(Re),B=Re)}function Oe(Re,Be,wt){Re?(xe(t.POLYGON_OFFSET_FILL),(H!==Be||G!==wt)&&(t.polygonOffset(Be,wt),H=Be,G=wt)):Ne(t.POLYGON_OFFSET_FILL)}function We(Re){Re?xe(t.SCISSOR_TEST):Ne(t.SCISSOR_TEST)}function Et(Re){Re===void 0&&(Re=t.TEXTURE0+V-1),X!==Re&&(t.activeTexture(Re),X=Re)}function vt(Re,Be,wt){wt===void 0&&(X===null?wt=t.TEXTURE0+V-1:wt=X);let Wt=z[wt];Wt===void 0&&(Wt={type:void 0,texture:void 0},z[wt]=Wt),(Wt.type!==Re||Wt.texture!==Be)&&(X!==wt&&(t.activeTexture(wt),X=wt),t.bindTexture(Re,Be||pe[Re]),Wt.type=Re,Wt.texture=Be)}function re(){const Re=z[X];Re!==void 0&&Re.type!==void 0&&(t.bindTexture(Re.type,null),Re.type=void 0,Re.texture=void 0)}function J(){try{t.compressedTexImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ue(){try{t.compressedTexImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function se(){try{t.texSubImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function be(){try{t.texSubImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Z(){try{t.compressedTexSubImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ye(){try{t.compressedTexSubImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function tt(){try{t.texStorage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function mt(){try{t.texStorage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Fe(){try{t.texImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function rt(){try{t.texImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Je(Re){$.equals(Re)===!1&&(t.scissor(Re.x,Re.y,Re.z,Re.w),$.copy(Re))}function Xt(Re){Me.equals(Re)===!1&&(t.viewport(Re.x,Re.y,Re.z,Re.w),Me.copy(Re))}function Nt(Re,Be){let wt=c.get(Be);wt===void 0&&(wt=new WeakMap,c.set(Be,wt));let Wt=wt.get(Re);Wt===void 0&&(Wt=t.getUniformBlockIndex(Be,Re.name),wt.set(Re,Wt))}function ht(Re,Be){const Wt=c.get(Be).get(Re);l.get(Be)!==Wt&&(t.uniformBlockBinding(Be,Wt,Re.__bindingPointIndex),l.set(Be,Wt))}function zt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},X=null,z={},f={},h=new WeakMap,d=[],m=null,y=!1,v=null,g=null,x=null,_=null,E=null,T=null,w=null,A=new Ut(0,0,0),C=0,D=!1,k=null,P=null,B=null,H=null,G=null,$.set(0,0,t.canvas.width,t.canvas.height),Me.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:xe,disable:Ne,bindFramebuffer:Ge,drawBuffers:$e,useProgram:ct,setBlending:Ve,setMaterial:je,setFlipSided:ot,setCullFace:Te,setLineWidth:Ue,setPolygonOffset:Oe,setScissorTest:We,activeTexture:Et,bindTexture:vt,unbindTexture:re,compressedTexImage2D:J,compressedTexImage3D:ue,texImage2D:Fe,texImage3D:rt,updateUBOMapping:Nt,uniformBlockBinding:ht,texStorage2D:tt,texStorage3D:mt,texSubImage2D:se,texSubImage3D:be,compressedTexSubImage2D:Z,compressedTexSubImage3D:Ye,scissor:Je,viewport:Xt,reset:zt}}function PSe(t,e,n,i,r,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ft,u=new WeakMap;let f;const h=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(re,J){return d?new OffscreenCanvas(re,J):g_("canvas")}function y(re,J,ue){let se=1;const be=vt(re);if((be.width>ue||be.height>ue)&&(se=ue/Math.max(be.width,be.height)),se<1)if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&re instanceof ImageBitmap||typeof VideoFrame<"u"&&re instanceof VideoFrame){const Z=Math.floor(se*be.width),Ye=Math.floor(se*be.height);f===void 0&&(f=m(Z,Ye));const tt=J?m(Z,Ye):f;return tt.width=Z,tt.height=Ye,tt.getContext("2d").drawImage(re,0,0,Z,Ye),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+be.width+"x"+be.height+") to ("+Z+"x"+Ye+")."),tt}else return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+be.width+"x"+be.height+")."),re;return re}function v(re){return re.generateMipmaps}function g(re){t.generateMipmap(re)}function x(re){return re.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:re.isWebGL3DRenderTarget?t.TEXTURE_3D:re.isWebGLArrayRenderTarget||re.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function _(re,J,ue,se,be=!1){if(re!==null){if(t[re]!==void 0)return t[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let Z=J;if(J===t.RED&&(ue===t.FLOAT&&(Z=t.R32F),ue===t.HALF_FLOAT&&(Z=t.R16F),ue===t.UNSIGNED_BYTE&&(Z=t.R8)),J===t.RED_INTEGER&&(ue===t.UNSIGNED_BYTE&&(Z=t.R8UI),ue===t.UNSIGNED_SHORT&&(Z=t.R16UI),ue===t.UNSIGNED_INT&&(Z=t.R32UI),ue===t.BYTE&&(Z=t.R8I),ue===t.SHORT&&(Z=t.R16I),ue===t.INT&&(Z=t.R32I)),J===t.RG&&(ue===t.FLOAT&&(Z=t.RG32F),ue===t.HALF_FLOAT&&(Z=t.RG16F),ue===t.UNSIGNED_BYTE&&(Z=t.RG8)),J===t.RG_INTEGER&&(ue===t.UNSIGNED_BYTE&&(Z=t.RG8UI),ue===t.UNSIGNED_SHORT&&(Z=t.RG16UI),ue===t.UNSIGNED_INT&&(Z=t.RG32UI),ue===t.BYTE&&(Z=t.RG8I),ue===t.SHORT&&(Z=t.RG16I),ue===t.INT&&(Z=t.RG32I)),J===t.RGB_INTEGER&&(ue===t.UNSIGNED_BYTE&&(Z=t.RGB8UI),ue===t.UNSIGNED_SHORT&&(Z=t.RGB16UI),ue===t.UNSIGNED_INT&&(Z=t.RGB32UI),ue===t.BYTE&&(Z=t.RGB8I),ue===t.SHORT&&(Z=t.RGB16I),ue===t.INT&&(Z=t.RGB32I)),J===t.RGBA_INTEGER&&(ue===t.UNSIGNED_BYTE&&(Z=t.RGBA8UI),ue===t.UNSIGNED_SHORT&&(Z=t.RGBA16UI),ue===t.UNSIGNED_INT&&(Z=t.RGBA32UI),ue===t.BYTE&&(Z=t.RGBA8I),ue===t.SHORT&&(Z=t.RGBA16I),ue===t.INT&&(Z=t.RGBA32I)),J===t.RGB&&ue===t.UNSIGNED_INT_5_9_9_9_REV&&(Z=t.RGB9_E5),J===t.RGBA){const Ye=be?p_:oi.getTransfer(se);ue===t.FLOAT&&(Z=t.RGBA32F),ue===t.HALF_FLOAT&&(Z=t.RGBA16F),ue===t.UNSIGNED_BYTE&&(Z=Ye===sr?t.SRGB8_ALPHA8:t.RGBA8),ue===t.UNSIGNED_SHORT_4_4_4_4&&(Z=t.RGBA4),ue===t.UNSIGNED_SHORT_5_5_5_1&&(Z=t.RGB5_A1)}return(Z===t.R16F||Z===t.R32F||Z===t.RG16F||Z===t.RG32F||Z===t.RGBA16F||Z===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Z}function E(re,J){let ue;return re?J===null||J===Tc||J===wy?ue=t.DEPTH24_STENCIL8:J===vr?ue=t.DEPTH32F_STENCIL8:J===Sy&&(ue=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):J===null||J===Tc||J===wy?ue=t.DEPTH_COMPONENT24:J===vr?ue=t.DEPTH_COMPONENT32F:J===Sy&&(ue=t.DEPTH_COMPONENT16),ue}function T(re,J){return v(re)===!0||re.isFramebufferTexture&&re.minFilter!==es&&re.minFilter!==Wi?Math.log2(Math.max(J.width,J.height))+1:re.mipmaps!==void 0&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?J.mipmaps.length:1}function w(re){const J=re.target;J.removeEventListener("dispose",w),C(J),J.isVideoTexture&&u.delete(J)}function A(re){const J=re.target;J.removeEventListener("dispose",A),k(J)}function C(re){const J=i.get(re);if(J.__webglInit===void 0)return;const ue=re.source,se=h.get(ue);if(se){const be=se[J.__cacheKey];be.usedTimes--,be.usedTimes===0&&D(re),Object.keys(se).length===0&&h.delete(ue)}i.remove(re)}function D(re){const J=i.get(re);t.deleteTexture(J.__webglTexture);const ue=re.source,se=h.get(ue);delete se[J.__cacheKey],s.memory.textures--}function k(re){const J=i.get(re);if(re.depthTexture&&(re.depthTexture.dispose(),i.remove(re.depthTexture)),re.isWebGLCubeRenderTarget)for(let se=0;se<6;se++){if(Array.isArray(J.__webglFramebuffer[se]))for(let be=0;be<J.__webglFramebuffer[se].length;be++)t.deleteFramebuffer(J.__webglFramebuffer[se][be]);else t.deleteFramebuffer(J.__webglFramebuffer[se]);J.__webglDepthbuffer&&t.deleteRenderbuffer(J.__webglDepthbuffer[se])}else{if(Array.isArray(J.__webglFramebuffer))for(let se=0;se<J.__webglFramebuffer.length;se++)t.deleteFramebuffer(J.__webglFramebuffer[se]);else t.deleteFramebuffer(J.__webglFramebuffer);if(J.__webglDepthbuffer&&t.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&t.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let se=0;se<J.__webglColorRenderbuffer.length;se++)J.__webglColorRenderbuffer[se]&&t.deleteRenderbuffer(J.__webglColorRenderbuffer[se]);J.__webglDepthRenderbuffer&&t.deleteRenderbuffer(J.__webglDepthRenderbuffer)}const ue=re.textures;for(let se=0,be=ue.length;se<be;se++){const Z=i.get(ue[se]);Z.__webglTexture&&(t.deleteTexture(Z.__webglTexture),s.memory.textures--),i.remove(ue[se])}i.remove(re)}let P=0;function B(){P=0}function H(){const re=P;return re>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+r.maxTextures),P+=1,re}function G(re){const J=[];return J.push(re.wrapS),J.push(re.wrapT),J.push(re.wrapR||0),J.push(re.magFilter),J.push(re.minFilter),J.push(re.anisotropy),J.push(re.internalFormat),J.push(re.format),J.push(re.type),J.push(re.generateMipmaps),J.push(re.premultiplyAlpha),J.push(re.flipY),J.push(re.unpackAlignment),J.push(re.colorSpace),J.join()}function V(re,J){const ue=i.get(re);if(re.isVideoTexture&&We(re),re.isRenderTargetTexture===!1&&re.isExternalTexture!==!0&&re.version>0&&ue.__version!==re.version){const se=re.image;if(se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{pe(ue,re,J);return}}else re.isExternalTexture&&(ue.__webglTexture=re.sourceTexture?re.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,ue.__webglTexture,t.TEXTURE0+J)}function U(re,J){const ue=i.get(re);if(re.isRenderTargetTexture===!1&&re.version>0&&ue.__version!==re.version){pe(ue,re,J);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ue.__webglTexture,t.TEXTURE0+J)}function F(re,J){const ue=i.get(re);if(re.isRenderTargetTexture===!1&&re.version>0&&ue.__version!==re.version){pe(ue,re,J);return}n.bindTexture(t.TEXTURE_3D,ue.__webglTexture,t.TEXTURE0+J)}function q(re,J){const ue=i.get(re);if(re.version>0&&ue.__version!==re.version){xe(ue,re,J);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ue.__webglTexture,t.TEXTURE0+J)}const X={[ip]:t.REPEAT,[ga]:t.CLAMP_TO_EDGE,[_y]:t.MIRRORED_REPEAT},z={[es]:t.NEAREST,[h2]:t.NEAREST_MIPMAP_NEAREST,[Tm]:t.NEAREST_MIPMAP_LINEAR,[Wi]:t.LINEAR,[G0]:t.LINEAR_MIPMAP_NEAREST,[dc]:t.LINEAR_MIPMAP_LINEAR},ce={[bJ]:t.NEVER,[wJ]:t.ALWAYS,[yJ]:t.LESS,[wU]:t.LEQUAL,[vJ]:t.EQUAL,[SJ]:t.GEQUAL,[xJ]:t.GREATER,[_J]:t.NOTEQUAL};function he(re,J){if(J.type===vr&&e.has("OES_texture_float_linear")===!1&&(J.magFilter===Wi||J.magFilter===G0||J.magFilter===Tm||J.magFilter===dc||J.minFilter===Wi||J.minFilter===G0||J.minFilter===Tm||J.minFilter===dc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(re,t.TEXTURE_WRAP_S,X[J.wrapS]),t.texParameteri(re,t.TEXTURE_WRAP_T,X[J.wrapT]),(re===t.TEXTURE_3D||re===t.TEXTURE_2D_ARRAY)&&t.texParameteri(re,t.TEXTURE_WRAP_R,X[J.wrapR]),t.texParameteri(re,t.TEXTURE_MAG_FILTER,z[J.magFilter]),t.texParameteri(re,t.TEXTURE_MIN_FILTER,z[J.minFilter]),J.compareFunction&&(t.texParameteri(re,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(re,t.TEXTURE_COMPARE_FUNC,ce[J.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(J.magFilter===es||J.minFilter!==Tm&&J.minFilter!==dc||J.type===vr&&e.has("OES_texture_float_linear")===!1)return;if(J.anisotropy>1||i.get(J).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");t.texParameterf(re,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,r.getMaxAnisotropy())),i.get(J).__currentAnisotropy=J.anisotropy}}}function $(re,J){let ue=!1;re.__webglInit===void 0&&(re.__webglInit=!0,J.addEventListener("dispose",w));const se=J.source;let be=h.get(se);be===void 0&&(be={},h.set(se,be));const Z=G(J);if(Z!==re.__cacheKey){be[Z]===void 0&&(be[Z]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,ue=!0),be[Z].usedTimes++;const Ye=be[re.__cacheKey];Ye!==void 0&&(be[re.__cacheKey].usedTimes--,Ye.usedTimes===0&&D(J)),re.__cacheKey=Z,re.__webglTexture=be[Z].texture}return ue}function Me(re,J,ue){return Math.floor(Math.floor(re/ue)/J)}function Se(re,J,ue,se){const Z=re.updateRanges;if(Z.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,J.width,J.height,ue,se,J.data);else{Z.sort((rt,Je)=>rt.start-Je.start);let Ye=0;for(let rt=1;rt<Z.length;rt++){const Je=Z[Ye],Xt=Z[rt],Nt=Je.start+Je.count,ht=Me(Xt.start,J.width,4),zt=Me(Je.start,J.width,4);Xt.start<=Nt+1&&ht===zt&&Me(Xt.start+Xt.count-1,J.width,4)===ht?Je.count=Math.max(Je.count,Xt.start+Xt.count-Je.start):(++Ye,Z[Ye]=Xt)}Z.length=Ye+1;const tt=t.getParameter(t.UNPACK_ROW_LENGTH),mt=t.getParameter(t.UNPACK_SKIP_PIXELS),Fe=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,J.width);for(let rt=0,Je=Z.length;rt<Je;rt++){const Xt=Z[rt],Nt=Math.floor(Xt.start/4),ht=Math.ceil(Xt.count/4),zt=Nt%J.width,Re=Math.floor(Nt/J.width),Be=ht,wt=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,zt),t.pixelStorei(t.UNPACK_SKIP_ROWS,Re),n.texSubImage2D(t.TEXTURE_2D,0,zt,Re,Be,wt,ue,se,J.data)}re.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,tt),t.pixelStorei(t.UNPACK_SKIP_PIXELS,mt),t.pixelStorei(t.UNPACK_SKIP_ROWS,Fe)}}function pe(re,J,ue){let se=t.TEXTURE_2D;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(se=t.TEXTURE_2D_ARRAY),J.isData3DTexture&&(se=t.TEXTURE_3D);const be=$(re,J),Z=J.source;n.bindTexture(se,re.__webglTexture,t.TEXTURE0+ue);const Ye=i.get(Z);if(Z.version!==Ye.__version||be===!0){n.activeTexture(t.TEXTURE0+ue);const tt=oi.getPrimaries(oi.workingColorSpace),mt=J.colorSpace===au?null:oi.getPrimaries(J.colorSpace),Fe=J.colorSpace===au||tt===mt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,J.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,J.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);let rt=y(J.image,!1,r.maxTextureSize);rt=Et(J,rt);const Je=a.convert(J.format,J.colorSpace),Xt=a.convert(J.type);let Nt=_(J.internalFormat,Je,Xt,J.colorSpace,J.isVideoTexture);he(se,J);let ht;const zt=J.mipmaps,Re=J.isVideoTexture!==!0,Be=Ye.__version===void 0||be===!0,wt=Z.dataReady,Wt=T(J,rt);if(J.isDepthTexture)Nt=E(J.format===My,J.type),Be&&(Re?n.texStorage2D(t.TEXTURE_2D,1,Nt,rt.width,rt.height):n.texImage2D(t.TEXTURE_2D,0,Nt,rt.width,rt.height,0,Je,Xt,null));else if(J.isDataTexture)if(zt.length>0){Re&&Be&&n.texStorage2D(t.TEXTURE_2D,Wt,Nt,zt[0].width,zt[0].height);for(let ut=0,gt=zt.length;ut<gt;ut++)ht=zt[ut],Re?wt&&n.texSubImage2D(t.TEXTURE_2D,ut,0,0,ht.width,ht.height,Je,Xt,ht.data):n.texImage2D(t.TEXTURE_2D,ut,Nt,ht.width,ht.height,0,Je,Xt,ht.data);J.generateMipmaps=!1}else Re?(Be&&n.texStorage2D(t.TEXTURE_2D,Wt,Nt,rt.width,rt.height),wt&&Se(J,rt,Je,Xt)):n.texImage2D(t.TEXTURE_2D,0,Nt,rt.width,rt.height,0,Je,Xt,rt.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){Re&&Be&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Wt,Nt,zt[0].width,zt[0].height,rt.depth);for(let ut=0,gt=zt.length;ut<gt;ut++)if(ht=zt[ut],J.format!==Jr)if(Je!==null)if(Re){if(wt)if(J.layerUpdates.size>0){const Mt=BN(ht.width,ht.height,J.format,J.type);for(const gn of J.layerUpdates){const Vn=ht.data.subarray(gn*Mt/ht.data.BYTES_PER_ELEMENT,(gn+1)*Mt/ht.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ut,0,0,gn,ht.width,ht.height,1,Je,Vn)}J.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ut,0,0,0,ht.width,ht.height,rt.depth,Je,ht.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ut,Nt,ht.width,ht.height,rt.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?wt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,ut,0,0,0,ht.width,ht.height,rt.depth,Je,Xt,ht.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ut,Nt,ht.width,ht.height,rt.depth,0,Je,Xt,ht.data)}else{Re&&Be&&n.texStorage2D(t.TEXTURE_2D,Wt,Nt,zt[0].width,zt[0].height);for(let ut=0,gt=zt.length;ut<gt;ut++)ht=zt[ut],J.format!==Jr?Je!==null?Re?wt&&n.compressedTexSubImage2D(t.TEXTURE_2D,ut,0,0,ht.width,ht.height,Je,ht.data):n.compressedTexImage2D(t.TEXTURE_2D,ut,Nt,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?wt&&n.texSubImage2D(t.TEXTURE_2D,ut,0,0,ht.width,ht.height,Je,Xt,ht.data):n.texImage2D(t.TEXTURE_2D,ut,Nt,ht.width,ht.height,0,Je,Xt,ht.data)}else if(J.isDataArrayTexture)if(Re){if(Be&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Wt,Nt,rt.width,rt.height,rt.depth),wt)if(J.layerUpdates.size>0){const ut=BN(rt.width,rt.height,J.format,J.type);for(const gt of J.layerUpdates){const Mt=rt.data.subarray(gt*ut/rt.data.BYTES_PER_ELEMENT,(gt+1)*ut/rt.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,gt,rt.width,rt.height,1,Je,Xt,Mt)}J.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,rt.width,rt.height,rt.depth,Je,Xt,rt.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Nt,rt.width,rt.height,rt.depth,0,Je,Xt,rt.data);else if(J.isData3DTexture)Re?(Be&&n.texStorage3D(t.TEXTURE_3D,Wt,Nt,rt.width,rt.height,rt.depth),wt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,rt.width,rt.height,rt.depth,Je,Xt,rt.data)):n.texImage3D(t.TEXTURE_3D,0,Nt,rt.width,rt.height,rt.depth,0,Je,Xt,rt.data);else if(J.isFramebufferTexture){if(Be)if(Re)n.texStorage2D(t.TEXTURE_2D,Wt,Nt,rt.width,rt.height);else{let ut=rt.width,gt=rt.height;for(let Mt=0;Mt<Wt;Mt++)n.texImage2D(t.TEXTURE_2D,Mt,Nt,ut,gt,0,Je,Xt,null),ut>>=1,gt>>=1}}else if(zt.length>0){if(Re&&Be){const ut=vt(zt[0]);n.texStorage2D(t.TEXTURE_2D,Wt,Nt,ut.width,ut.height)}for(let ut=0,gt=zt.length;ut<gt;ut++)ht=zt[ut],Re?wt&&n.texSubImage2D(t.TEXTURE_2D,ut,0,0,Je,Xt,ht):n.texImage2D(t.TEXTURE_2D,ut,Nt,Je,Xt,ht);J.generateMipmaps=!1}else if(Re){if(Be){const ut=vt(rt);n.texStorage2D(t.TEXTURE_2D,Wt,Nt,ut.width,ut.height)}wt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Je,Xt,rt)}else n.texImage2D(t.TEXTURE_2D,0,Nt,Je,Xt,rt);v(J)&&g(se),Ye.__version=Z.version,J.onUpdate&&J.onUpdate(J)}re.__version=J.version}function xe(re,J,ue){if(J.image.length!==6)return;const se=$(re,J),be=J.source;n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+ue);const Z=i.get(be);if(be.version!==Z.__version||se===!0){n.activeTexture(t.TEXTURE0+ue);const Ye=oi.getPrimaries(oi.workingColorSpace),tt=J.colorSpace===au?null:oi.getPrimaries(J.colorSpace),mt=J.colorSpace===au||Ye===tt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,J.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,J.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,mt);const Fe=J.isCompressedTexture||J.image[0].isCompressedTexture,rt=J.image[0]&&J.image[0].isDataTexture,Je=[];for(let gt=0;gt<6;gt++)!Fe&&!rt?Je[gt]=y(J.image[gt],!0,r.maxCubemapSize):Je[gt]=rt?J.image[gt].image:J.image[gt],Je[gt]=Et(J,Je[gt]);const Xt=Je[0],Nt=a.convert(J.format,J.colorSpace),ht=a.convert(J.type),zt=_(J.internalFormat,Nt,ht,J.colorSpace),Re=J.isVideoTexture!==!0,Be=Z.__version===void 0||se===!0,wt=be.dataReady;let Wt=T(J,Xt);he(t.TEXTURE_CUBE_MAP,J);let ut;if(Fe){Re&&Be&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Wt,zt,Xt.width,Xt.height);for(let gt=0;gt<6;gt++){ut=Je[gt].mipmaps;for(let Mt=0;Mt<ut.length;Mt++){const gn=ut[Mt];J.format!==Jr?Nt!==null?Re?wt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt,0,0,gn.width,gn.height,Nt,gn.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt,zt,gn.width,gn.height,0,gn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt,0,0,gn.width,gn.height,Nt,ht,gn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt,zt,gn.width,gn.height,0,Nt,ht,gn.data)}}}else{if(ut=J.mipmaps,Re&&Be){ut.length>0&&Wt++;const gt=vt(Je[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Wt,zt,gt.width,gt.height)}for(let gt=0;gt<6;gt++)if(rt){Re?wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,0,0,Je[gt].width,Je[gt].height,Nt,ht,Je[gt].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,zt,Je[gt].width,Je[gt].height,0,Nt,ht,Je[gt].data);for(let Mt=0;Mt<ut.length;Mt++){const Vn=ut[Mt].image[gt].image;Re?wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt+1,0,0,Vn.width,Vn.height,Nt,ht,Vn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt+1,zt,Vn.width,Vn.height,0,Nt,ht,Vn.data)}}else{Re?wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,0,0,Nt,ht,Je[gt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,zt,Nt,ht,Je[gt]);for(let Mt=0;Mt<ut.length;Mt++){const gn=ut[Mt];Re?wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt+1,0,0,Nt,ht,gn.image[gt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,Mt+1,zt,Nt,ht,gn.image[gt])}}}v(J)&&g(t.TEXTURE_CUBE_MAP),Z.__version=be.version,J.onUpdate&&J.onUpdate(J)}re.__version=J.version}function Ne(re,J,ue,se,be,Z){const Ye=a.convert(ue.format,ue.colorSpace),tt=a.convert(ue.type),mt=_(ue.internalFormat,Ye,tt,ue.colorSpace),Fe=i.get(J),rt=i.get(ue);if(rt.__renderTarget=J,!Fe.__hasExternalTextures){const Je=Math.max(1,J.width>>Z),Xt=Math.max(1,J.height>>Z);be===t.TEXTURE_3D||be===t.TEXTURE_2D_ARRAY?n.texImage3D(be,Z,mt,Je,Xt,J.depth,0,Ye,tt,null):n.texImage2D(be,Z,mt,Je,Xt,0,Ye,tt,null)}n.bindFramebuffer(t.FRAMEBUFFER,re),Oe(J)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,se,be,rt.__webglTexture,0,Ue(J)):(be===t.TEXTURE_2D||be>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&be<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,se,be,rt.__webglTexture,Z),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ge(re,J,ue){if(t.bindRenderbuffer(t.RENDERBUFFER,re),J.depthBuffer){const se=J.depthTexture,be=se&&se.isDepthTexture?se.type:null,Z=E(J.stencilBuffer,be),Ye=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,tt=Ue(J);Oe(J)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,tt,Z,J.width,J.height):ue?t.renderbufferStorageMultisample(t.RENDERBUFFER,tt,Z,J.width,J.height):t.renderbufferStorage(t.RENDERBUFFER,Z,J.width,J.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ye,t.RENDERBUFFER,re)}else{const se=J.textures;for(let be=0;be<se.length;be++){const Z=se[be],Ye=a.convert(Z.format,Z.colorSpace),tt=a.convert(Z.type),mt=_(Z.internalFormat,Ye,tt,Z.colorSpace),Fe=Ue(J);ue&&Oe(J)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Fe,mt,J.width,J.height):Oe(J)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Fe,mt,J.width,J.height):t.renderbufferStorage(t.RENDERBUFFER,mt,J.width,J.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function $e(re,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,re),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const se=i.get(J.depthTexture);se.__renderTarget=J,(!se.__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),V(J.depthTexture,0);const be=se.__webglTexture,Z=Ue(J);if(J.depthTexture.format===Ey)Oe(J)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,be,0,Z):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,be,0);else if(J.depthTexture.format===My)Oe(J)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,be,0,Z):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,be,0);else throw new Error("Unknown depthTexture format")}function ct(re){const J=i.get(re),ue=re.isWebGLCubeRenderTarget===!0;if(J.__boundDepthTexture!==re.depthTexture){const se=re.depthTexture;if(J.__depthDisposeCallback&&J.__depthDisposeCallback(),se){const be=()=>{delete J.__boundDepthTexture,delete J.__depthDisposeCallback,se.removeEventListener("dispose",be)};se.addEventListener("dispose",be),J.__depthDisposeCallback=be}J.__boundDepthTexture=se}if(re.depthTexture&&!J.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");const se=re.texture.mipmaps;se&&se.length>0?$e(J.__webglFramebuffer[0],re):$e(J.__webglFramebuffer,re)}else if(ue){J.__webglDepthbuffer=[];for(let se=0;se<6;se++)if(n.bindFramebuffer(t.FRAMEBUFFER,J.__webglFramebuffer[se]),J.__webglDepthbuffer[se]===void 0)J.__webglDepthbuffer[se]=t.createRenderbuffer(),Ge(J.__webglDepthbuffer[se],re,!1);else{const be=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Z=J.__webglDepthbuffer[se];t.bindRenderbuffer(t.RENDERBUFFER,Z),t.framebufferRenderbuffer(t.FRAMEBUFFER,be,t.RENDERBUFFER,Z)}}else{const se=re.texture.mipmaps;if(se&&se.length>0?n.bindFramebuffer(t.FRAMEBUFFER,J.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,J.__webglFramebuffer),J.__webglDepthbuffer===void 0)J.__webglDepthbuffer=t.createRenderbuffer(),Ge(J.__webglDepthbuffer,re,!1);else{const be=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Z=J.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Z),t.framebufferRenderbuffer(t.FRAMEBUFFER,be,t.RENDERBUFFER,Z)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function At(re,J,ue){const se=i.get(re);J!==void 0&&Ne(se.__webglFramebuffer,re,re.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ue!==void 0&&ct(re)}function fe(re){const J=re.texture,ue=i.get(re),se=i.get(J);re.addEventListener("dispose",A);const be=re.textures,Z=re.isWebGLCubeRenderTarget===!0,Ye=be.length>1;if(Ye||(se.__webglTexture===void 0&&(se.__webglTexture=t.createTexture()),se.__version=J.version,s.memory.textures++),Z){ue.__webglFramebuffer=[];for(let tt=0;tt<6;tt++)if(J.mipmaps&&J.mipmaps.length>0){ue.__webglFramebuffer[tt]=[];for(let mt=0;mt<J.mipmaps.length;mt++)ue.__webglFramebuffer[tt][mt]=t.createFramebuffer()}else ue.__webglFramebuffer[tt]=t.createFramebuffer()}else{if(J.mipmaps&&J.mipmaps.length>0){ue.__webglFramebuffer=[];for(let tt=0;tt<J.mipmaps.length;tt++)ue.__webglFramebuffer[tt]=t.createFramebuffer()}else ue.__webglFramebuffer=t.createFramebuffer();if(Ye)for(let tt=0,mt=be.length;tt<mt;tt++){const Fe=i.get(be[tt]);Fe.__webglTexture===void 0&&(Fe.__webglTexture=t.createTexture(),s.memory.textures++)}if(re.samples>0&&Oe(re)===!1){ue.__webglMultisampledFramebuffer=t.createFramebuffer(),ue.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let tt=0;tt<be.length;tt++){const mt=be[tt];ue.__webglColorRenderbuffer[tt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ue.__webglColorRenderbuffer[tt]);const Fe=a.convert(mt.format,mt.colorSpace),rt=a.convert(mt.type),Je=_(mt.internalFormat,Fe,rt,mt.colorSpace,re.isXRRenderTarget===!0),Xt=Ue(re);t.renderbufferStorageMultisample(t.RENDERBUFFER,Xt,Je,re.width,re.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+tt,t.RENDERBUFFER,ue.__webglColorRenderbuffer[tt])}t.bindRenderbuffer(t.RENDERBUFFER,null),re.depthBuffer&&(ue.__webglDepthRenderbuffer=t.createRenderbuffer(),Ge(ue.__webglDepthRenderbuffer,re,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Z){n.bindTexture(t.TEXTURE_CUBE_MAP,se.__webglTexture),he(t.TEXTURE_CUBE_MAP,J);for(let tt=0;tt<6;tt++)if(J.mipmaps&&J.mipmaps.length>0)for(let mt=0;mt<J.mipmaps.length;mt++)Ne(ue.__webglFramebuffer[tt][mt],re,J,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+tt,mt);else Ne(ue.__webglFramebuffer[tt],re,J,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0);v(J)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ye){for(let tt=0,mt=be.length;tt<mt;tt++){const Fe=be[tt],rt=i.get(Fe);let Je=t.TEXTURE_2D;(re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(Je=re.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Je,rt.__webglTexture),he(Je,Fe),Ne(ue.__webglFramebuffer,re,Fe,t.COLOR_ATTACHMENT0+tt,Je,0),v(Fe)&&g(Je)}n.unbindTexture()}else{let tt=t.TEXTURE_2D;if((re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(tt=re.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(tt,se.__webglTexture),he(tt,J),J.mipmaps&&J.mipmaps.length>0)for(let mt=0;mt<J.mipmaps.length;mt++)Ne(ue.__webglFramebuffer[mt],re,J,t.COLOR_ATTACHMENT0,tt,mt);else Ne(ue.__webglFramebuffer,re,J,t.COLOR_ATTACHMENT0,tt,0);v(J)&&g(tt),n.unbindTexture()}re.depthBuffer&&ct(re)}function Ve(re){const J=re.textures;for(let ue=0,se=J.length;ue<se;ue++){const be=J[ue];if(v(be)){const Z=x(re),Ye=i.get(be).__webglTexture;n.bindTexture(Z,Ye),g(Z),n.unbindTexture()}}}const je=[],ot=[];function Te(re){if(re.samples>0){if(Oe(re)===!1){const J=re.textures,ue=re.width,se=re.height;let be=t.COLOR_BUFFER_BIT;const Z=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ye=i.get(re),tt=J.length>1;if(tt)for(let Fe=0;Fe<J.length;Fe++)n.bindFramebuffer(t.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ye.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer);const mt=re.texture.mipmaps;mt&&mt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer);for(let Fe=0;Fe<J.length;Fe++){if(re.resolveDepthBuffer&&(re.depthBuffer&&(be|=t.DEPTH_BUFFER_BIT),re.stencilBuffer&&re.resolveStencilBuffer&&(be|=t.STENCIL_BUFFER_BIT)),tt){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ye.__webglColorRenderbuffer[Fe]);const rt=i.get(J[Fe]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,rt,0)}t.blitFramebuffer(0,0,ue,se,0,0,ue,se,be,t.NEAREST),l===!0&&(je.length=0,ot.length=0,je.push(t.COLOR_ATTACHMENT0+Fe),re.depthBuffer&&re.resolveDepthBuffer===!1&&(je.push(Z),ot.push(Z),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ot)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,je))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),tt)for(let Fe=0;Fe<J.length;Fe++){n.bindFramebuffer(t.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.RENDERBUFFER,Ye.__webglColorRenderbuffer[Fe]);const rt=i.get(J[Fe]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ye.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.TEXTURE_2D,rt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer)}else if(re.depthBuffer&&re.resolveDepthBuffer===!1&&l){const J=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[J])}}}function Ue(re){return Math.min(r.maxSamples,re.samples)}function Oe(re){const J=i.get(re);return re.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function We(re){const J=s.render.frame;u.get(re)!==J&&(u.set(re,J),re.update())}function Et(re,J){const ue=re.colorSpace,se=re.format,be=re.type;return re.isCompressedTexture===!0||re.isVideoTexture===!0||ue!==_u&&ue!==au&&(oi.getTransfer(ue)===sr?(se!==Jr||be!==yo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),J}function vt(re){return typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement?(c.width=re.naturalWidth||re.width,c.height=re.naturalHeight||re.height):typeof VideoFrame<"u"&&re instanceof VideoFrame?(c.width=re.displayWidth,c.height=re.displayHeight):(c.width=re.width,c.height=re.height),c}this.allocateTextureUnit=H,this.resetTextureUnits=B,this.setTexture2D=V,this.setTexture2DArray=U,this.setTexture3D=F,this.setTextureCube=q,this.rebindTextures=At,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=Ve,this.updateMultisampleRenderTarget=Te,this.setupDepthRenderbuffer=ct,this.setupFrameBufferTexture=Ne,this.useMultisampledRTT=Oe}function rB(t,e){function n(i,r=au){let a;const s=oi.getTransfer(r);if(i===yo)return t.UNSIGNED_BYTE;if(i===m2)return t.UNSIGNED_SHORT_4_4_4_4;if(i===g2)return t.UNSIGNED_SHORT_5_5_5_1;if(i===bU)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===d2)return t.BYTE;if(i===p2)return t.SHORT;if(i===Sy)return t.UNSIGNED_SHORT;if(i===fv)return t.INT;if(i===Tc)return t.UNSIGNED_INT;if(i===vr)return t.FLOAT;if(i===Za)return t.HALF_FLOAT;if(i===yU)return t.ALPHA;if(i===vU)return t.RGB;if(i===Jr)return t.RGBA;if(i===Ey)return t.DEPTH_COMPONENT;if(i===My)return t.DEPTH_STENCIL;if(i===Nh)return t.RED;if(i===hv)return t.RED_INTEGER;if(i===b2)return t.RG;if(i===lS)return t.RG_INTEGER;if(i===dv)return t.RGBA_INTEGER;if(i===T1||i===A1||i===C1||i===R1)if(s===sr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===T1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===A1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===C1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===R1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===T1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===A1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===C1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===R1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===tA||i===nA||i===iA||i===rA)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===tA)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===nA)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===iA)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===rA)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===aA||i===sA||i===oA)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===aA||i===sA)return s===sr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===oA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===lA||i===cA||i===uA||i===fA||i===hA||i===dA||i===pA||i===mA||i===gA||i===bA||i===yA||i===vA||i===xA||i===_A)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===lA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===cA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===uA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===fA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===hA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===dA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===pA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===mA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===gA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===bA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===yA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===vA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===xA)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===_A)return s===sr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===k1||i===SA||i===wA)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===k1)return s===sr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===SA)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===wA)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===xU||i===EA||i===MA||i===TA)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===k1)return a.COMPRESSED_RED_RGTC1_EXT;if(i===EA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===MA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===TA)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===wy?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}class wZ extends tr{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const LSe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,USe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class BSe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const i=new wZ(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new is({vertexShader:LSe,fragmentShader:USe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new fi(new dp(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class FSe extends _f{constructor(e,n){super();const i=this;let r=null,a=1,s=null,o="local-floor",l=1,c=null,u=null,f=null,h=null,d=null,m=null;const y=new BSe,v={},g=n.getContextAttributes();let x=null,_=null;const E=[],T=[],w=new ft;let A=null;const C=new Yr;C.viewport=new ni;const D=new Yr;D.viewport=new ni;const k=[C,D],P=new uZ;let B=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Se){let pe=E[Se];return pe===void 0&&(pe=new qM,E[Se]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(Se){let pe=E[Se];return pe===void 0&&(pe=new qM,E[Se]=pe),pe.getGripSpace()},this.getHand=function(Se){let pe=E[Se];return pe===void 0&&(pe=new qM,E[Se]=pe),pe.getHandSpace()};function G(Se){const pe=T.indexOf(Se.inputSource);if(pe===-1)return;const xe=E[pe];xe!==void 0&&(xe.update(Se.inputSource,Se.frame,c||s),xe.dispatchEvent({type:Se.type,data:Se.inputSource}))}function V(){r.removeEventListener("select",G),r.removeEventListener("selectstart",G),r.removeEventListener("selectend",G),r.removeEventListener("squeeze",G),r.removeEventListener("squeezestart",G),r.removeEventListener("squeezeend",G),r.removeEventListener("end",V),r.removeEventListener("inputsourceschange",U);for(let Se=0;Se<E.length;Se++){const pe=T[Se];pe!==null&&(T[Se]=null,E[Se].disconnect(pe))}B=null,H=null,y.reset();for(const Se in v)delete v[Se];e.setRenderTarget(x),d=null,h=null,f=null,r=null,_=null,Me.stop(),i.isPresenting=!1,e.setPixelRatio(A),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Se){a=Se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Se){o=Se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(Se){c=Se},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(Se){if(r=Se,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",V),r.addEventListener("inputsourceschange",U),g.xrCompatible!==!0&&await n.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(w),typeof XRWebGLBinding<"u"&&(f=new XRWebGLBinding(r,n)),f!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let xe=null,Ne=null,Ge=null;g.depth&&(Ge=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,xe=g.stencil?My:Ey,Ne=g.stencil?wy:Tc);const $e={colorFormat:n.RGBA8,depthFormat:Ge,scaleFactor:a};h=f.createProjectionLayer($e),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new Ac(h.textureWidth,h.textureHeight,{format:Jr,type:yo,depthTexture:new IU(h.textureWidth,h.textureHeight,Ne,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const xe={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(r,n,xe),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new Ac(d.framebufferWidth,d.framebufferHeight,{format:Jr,type:yo,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await r.requestReferenceSpace(o),Me.setContext(r),Me.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function U(Se){for(let pe=0;pe<Se.removed.length;pe++){const xe=Se.removed[pe],Ne=T.indexOf(xe);Ne>=0&&(T[Ne]=null,E[Ne].disconnect(xe))}for(let pe=0;pe<Se.added.length;pe++){const xe=Se.added[pe];let Ne=T.indexOf(xe);if(Ne===-1){for(let $e=0;$e<E.length;$e++)if($e>=T.length){T.push(xe),Ne=$e;break}else if(T[$e]===null){T[$e]=xe,Ne=$e;break}if(Ne===-1)break}const Ge=E[Ne];Ge&&Ge.connect(xe)}}const F=new Y,q=new Y;function X(Se,pe,xe){F.setFromMatrixPosition(pe.matrixWorld),q.setFromMatrixPosition(xe.matrixWorld);const Ne=F.distanceTo(q),Ge=pe.projectionMatrix.elements,$e=xe.projectionMatrix.elements,ct=Ge[14]/(Ge[10]-1),At=Ge[14]/(Ge[10]+1),fe=(Ge[9]+1)/Ge[5],Ve=(Ge[9]-1)/Ge[5],je=(Ge[8]-1)/Ge[0],ot=($e[8]+1)/$e[0],Te=ct*je,Ue=ct*ot,Oe=Ne/(-je+ot),We=Oe*-je;if(pe.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),Se.translateX(We),Se.translateZ(Oe),Se.matrixWorld.compose(Se.position,Se.quaternion,Se.scale),Se.matrixWorldInverse.copy(Se.matrixWorld).invert(),Ge[10]===-1)Se.projectionMatrix.copy(pe.projectionMatrix),Se.projectionMatrixInverse.copy(pe.projectionMatrixInverse);else{const Et=ct+Oe,vt=At+Oe,re=Te-We,J=Ue+(Ne-We),ue=fe*At/vt*Et,se=Ve*At/vt*Et;Se.projectionMatrix.makePerspective(re,J,ue,se,Et,vt),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert()}}function z(Se,pe){pe===null?Se.matrixWorld.copy(Se.matrix):Se.matrixWorld.multiplyMatrices(pe.matrixWorld,Se.matrix),Se.matrixWorldInverse.copy(Se.matrixWorld).invert()}this.updateCamera=function(Se){if(r===null)return;let pe=Se.near,xe=Se.far;y.texture!==null&&(y.depthNear>0&&(pe=y.depthNear),y.depthFar>0&&(xe=y.depthFar)),P.near=D.near=C.near=pe,P.far=D.far=C.far=xe,(B!==P.near||H!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),B=P.near,H=P.far),P.layers.mask=Se.layers.mask|6,C.layers.mask=P.layers.mask&3,D.layers.mask=P.layers.mask&5;const Ne=Se.parent,Ge=P.cameras;z(P,Ne);for(let $e=0;$e<Ge.length;$e++)z(Ge[$e],Ne);Ge.length===2?X(P,C,D):P.projectionMatrix.copy(C.projectionMatrix),ce(Se,P,Ne)};function ce(Se,pe,xe){xe===null?Se.matrix.copy(pe.matrixWorld):(Se.matrix.copy(xe.matrixWorld),Se.matrix.invert(),Se.matrix.multiply(pe.matrixWorld)),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.updateMatrixWorld(!0),Se.projectionMatrix.copy(pe.projectionMatrix),Se.projectionMatrixInverse.copy(pe.projectionMatrixInverse),Se.isPerspectiveCamera&&(Se.fov=Ry*2*Math.atan(1/Se.projectionMatrix.elements[5]),Se.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(Se){l=Se,h!==null&&(h.fixedFoveation=Se),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Se)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(P)},this.getCameraTexture=function(Se){return v[Se]};let he=null;function $(Se,pe){if(u=pe.getViewerPose(c||s),m=pe,u!==null){const xe=u.views;d!==null&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let Ne=!1;xe.length!==P.cameras.length&&(P.cameras.length=0,Ne=!0);for(let At=0;At<xe.length;At++){const fe=xe[At];let Ve=null;if(d!==null)Ve=d.getViewport(fe);else{const ot=f.getViewSubImage(h,fe);Ve=ot.viewport,At===0&&(e.setRenderTargetTextures(_,ot.colorTexture,ot.depthStencilTexture),e.setRenderTarget(_))}let je=k[At];je===void 0&&(je=new Yr,je.layers.enable(At),je.viewport=new ni,k[At]=je),je.matrix.fromArray(fe.transform.matrix),je.matrix.decompose(je.position,je.quaternion,je.scale),je.projectionMatrix.fromArray(fe.projectionMatrix),je.projectionMatrixInverse.copy(je.projectionMatrix).invert(),je.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),At===0&&(P.matrix.copy(je.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ne===!0&&P.cameras.push(je)}const Ge=r.enabledFeatures;if(Ge&&Ge.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&f){const At=f.getDepthInformation(xe[0]);At&&At.isValid&&At.texture&&y.init(At,r.renderState)}if(Ge&&Ge.includes("camera-access")&&(e.state.unbindTexture(),f))for(let At=0;At<xe.length;At++){const fe=xe[At].camera;if(fe){let Ve=v[fe];Ve||(Ve=new wZ,v[fe]=Ve);const je=f.getCameraImage(fe);Ve.sourceTexture=je}}}for(let xe=0;xe<E.length;xe++){const Ne=T[xe],Ge=E[xe];Ne!==null&&Ge!==void 0&&Ge.update(Ne,pe,c||s)}he&&he(Se,pe),pe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:pe}),m=null}const Me=new yZ;Me.setAnimationLoop($),this.setAnimationLoop=function(Se){he=Se},this.dispose=function(){}}}const Zp=new li,zSe=new Ct;function jSe(t,e){function n(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function i(v,g){g.color.getRGB(v.fogColor.value,RJ(t)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function r(v,g,x,_,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?a(v,g):g.isMeshToonMaterial?(a(v,g),f(v,g)):g.isMeshPhongMaterial?(a(v,g),u(v,g)):g.isMeshStandardMaterial?(a(v,g),h(v,g),g.isMeshPhysicalMaterial&&d(v,g,E)):g.isMeshMatcapMaterial?(a(v,g),m(v,g)):g.isMeshDepthMaterial?a(v,g):g.isMeshDistanceMaterial?(a(v,g),y(v,g)):g.isMeshNormalMaterial?a(v,g):g.isLineBasicMaterial?(s(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?l(v,g,x,_):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function a(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,n(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===ba&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,n(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===ba&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,n(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,n(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const x=e.get(g),_=x.envMap,E=x.envMapRotation;_&&(v.envMap.value=_,Zp.copy(E),Zp.x*=-1,Zp.y*=-1,Zp.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Zp.y*=-1,Zp.z*=-1),v.envMapRotation.value.setFromMatrix4(zSe.makeRotationFromEuler(Zp)),v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,v.aoMapTransform))}function s(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform))}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,x,_){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*x,v.scale.value=_*.5,g.map&&(v.map.value=g.map,n(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function f(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function h(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function d(v,g,x){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ba&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=x.texture,v.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,v.specularIntensityMapTransform))}function m(v,g){g.matcap&&(v.matcap.value=g.matcap)}function y(v,g){const x=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(x.matrixWorld),v.nearDistance.value=x.shadow.camera.near,v.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function HSe(t,e,n,i){let r={},a={},s=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,_){const E=_.program;i.uniformBlockBinding(x,E)}function c(x,_){let E=r[x.id];E===void 0&&(m(x),E=u(x),r[x.id]=E,x.addEventListener("dispose",v));const T=_.program;i.updateUBOMapping(x,T);const w=e.render.frame;a[x.id]!==w&&(h(x),a[x.id]=w)}function u(x){const _=f();x.__bindingPointIndex=_;const E=t.createBuffer(),T=x.__size,w=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,T,w),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,E),E}function f(){for(let x=0;x<o;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const _=r[x.id],E=x.uniforms,T=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let w=0,A=E.length;w<A;w++){const C=Array.isArray(E[w])?E[w]:[E[w]];for(let D=0,k=C.length;D<k;D++){const P=C[D];if(d(P,w,D,T)===!0){const B=P.__offset,H=Array.isArray(P.value)?P.value:[P.value];let G=0;for(let V=0;V<H.length;V++){const U=H[V],F=y(U);typeof U=="number"||typeof U=="boolean"?(P.__data[0]=U,t.bufferSubData(t.UNIFORM_BUFFER,B+G,P.__data)):U.isMatrix3?(P.__data[0]=U.elements[0],P.__data[1]=U.elements[1],P.__data[2]=U.elements[2],P.__data[3]=0,P.__data[4]=U.elements[3],P.__data[5]=U.elements[4],P.__data[6]=U.elements[5],P.__data[7]=0,P.__data[8]=U.elements[6],P.__data[9]=U.elements[7],P.__data[10]=U.elements[8],P.__data[11]=0):(U.toArray(P.__data,G),G+=F.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,B,P.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(x,_,E,T){const w=x.value,A=_+"_"+E;if(T[A]===void 0)return typeof w=="number"||typeof w=="boolean"?T[A]=w:T[A]=w.clone(),!0;{const C=T[A];if(typeof w=="number"||typeof w=="boolean"){if(C!==w)return T[A]=w,!0}else if(C.equals(w)===!1)return C.copy(w),!0}return!1}function m(x){const _=x.uniforms;let E=0;const T=16;for(let A=0,C=_.length;A<C;A++){const D=Array.isArray(_[A])?_[A]:[_[A]];for(let k=0,P=D.length;k<P;k++){const B=D[k],H=Array.isArray(B.value)?B.value:[B.value];for(let G=0,V=H.length;G<V;G++){const U=H[G],F=y(U),q=E%T,X=q%F.boundary,z=q+X;E+=X,z!==0&&T-z<F.storage&&(E+=T-z),B.__data=new Float32Array(F.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=E,E+=F.storage}}}const w=E%T;return w>0&&(E+=T-w),x.__size=E,x.__cache={},this}function y(x){const _={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(_.boundary=4,_.storage=4):x.isVector2?(_.boundary=8,_.storage=8):x.isVector3||x.isColor?(_.boundary=16,_.storage=12):x.isVector4?(_.boundary=16,_.storage=16):x.isMatrix3?(_.boundary=48,_.storage=48):x.isMatrix4?(_.boundary=64,_.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),_}function v(x){const _=x.target;_.removeEventListener("dispose",v);const E=s.indexOf(_.__bindingPointIndex);s.splice(E,1),t.deleteBuffer(r[_.id]),delete r[_.id],delete a[_.id]}function g(){for(const x in r)t.deleteBuffer(r[x]);s=[],r={},a={}}return{bind:l,update:c,dispose:g}}class aB{constructor(e={}){const{canvas:n=MJ(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reversedDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let d;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=i.getContextAttributes().alpha}else d=s;const m=new Uint32Array(4),y=new Int32Array(4);let v=null,g=null;const x=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=cf,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const E=this;let T=!1;this._outputColorSpace=gs;let w=0,A=0,C=null,D=-1,k=null;const P=new ni,B=new ni;let H=null;const G=new Ut(0);let V=0,U=n.width,F=n.height,q=1,X=null,z=null;const ce=new ni(0,0,U,F),he=new ni(0,0,U,F);let $=!1;const Me=new kg;let Se=!1,pe=!1;const xe=new Ct,Ne=new Y,Ge=new ni,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ct=!1;function At(){return C===null?q:1}let fe=i;function Ve(Q,me){return n.getContext(Q,me)}try{const Q={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Rg}`),n.addEventListener("webglcontextlost",wt,!1),n.addEventListener("webglcontextrestored",Wt,!1),n.addEventListener("webglcontextcreationerror",ut,!1),fe===null){const me="webgl2";if(fe=Ve(me,Q),fe===null)throw Ve(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let je,ot,Te,Ue,Oe,We,Et,vt,re,J,ue,se,be,Z,Ye,tt,mt,Fe,rt,Je,Xt,Nt,ht,zt;function Re(){je=new e_e(fe),je.init(),Nt=new rB(fe,je),ot=new X1e(fe,je,e,Nt),Te=new NSe(fe,je),ot.reversedDepthBuffer&&h&&Te.buffers.depth.setReversed(!0),Ue=new i_e(fe),Oe=new _Se,We=new PSe(fe,je,Te,Oe,ot,Nt,Ue),Et=new $1e(E),vt=new Q1e(E),re=new cve(fe),ht=new W1e(fe,re),J=new t_e(fe,re,Ue,ht),ue=new a_e(fe,J,re,Ue),rt=new r_e(fe,ot,We),tt=new Y1e(Oe),se=new xSe(E,Et,vt,je,ot,ht,tt),be=new jSe(E,Oe),Z=new wSe,Ye=new RSe(je),Fe=new G1e(E,Et,vt,Te,ue,d,l),mt=new OSe(E,ue,ot),zt=new HSe(fe,Ue,ot,Te),Je=new q1e(fe,je,Ue),Xt=new n_e(fe,je,Ue),Ue.programs=se.programs,E.capabilities=ot,E.extensions=je,E.properties=Oe,E.renderLists=Z,E.shadowMap=mt,E.state=Te,E.info=Ue}Re();const Be=new FSe(E,fe);this.xr=Be,this.getContext=function(){return fe},this.getContextAttributes=function(){return fe.getContextAttributes()},this.forceContextLoss=function(){const Q=je.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=je.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(Q){Q!==void 0&&(q=Q,this.setSize(U,F,!1))},this.getSize=function(Q){return Q.set(U,F)},this.setSize=function(Q,me,_e=!0){if(Be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=Q,F=me,n.width=Math.floor(Q*q),n.height=Math.floor(me*q),_e===!0&&(n.style.width=Q+"px",n.style.height=me+"px"),this.setViewport(0,0,Q,me)},this.getDrawingBufferSize=function(Q){return Q.set(U*q,F*q).floor()},this.setDrawingBufferSize=function(Q,me,_e){U=Q,F=me,q=_e,n.width=Math.floor(Q*_e),n.height=Math.floor(me*_e),this.setViewport(0,0,Q,me)},this.getCurrentViewport=function(Q){return Q.copy(P)},this.getViewport=function(Q){return Q.copy(ce)},this.setViewport=function(Q,me,_e,Ee){Q.isVector4?ce.set(Q.x,Q.y,Q.z,Q.w):ce.set(Q,me,_e,Ee),Te.viewport(P.copy(ce).multiplyScalar(q).round())},this.getScissor=function(Q){return Q.copy(he)},this.setScissor=function(Q,me,_e,Ee){Q.isVector4?he.set(Q.x,Q.y,Q.z,Q.w):he.set(Q,me,_e,Ee),Te.scissor(B.copy(he).multiplyScalar(q).round())},this.getScissorTest=function(){return $},this.setScissorTest=function(Q){Te.setScissorTest($=Q)},this.setOpaqueSort=function(Q){X=Q},this.setTransparentSort=function(Q){z=Q},this.getClearColor=function(Q){return Q.copy(Fe.getClearColor())},this.setClearColor=function(){Fe.setClearColor(...arguments)},this.getClearAlpha=function(){return Fe.getClearAlpha()},this.setClearAlpha=function(){Fe.setClearAlpha(...arguments)},this.clear=function(Q=!0,me=!0,_e=!0){let Ee=0;if(Q){let ye=!1;if(C!==null){const pt=C.texture.format;ye=pt===dv||pt===lS||pt===hv}if(ye){const pt=C.texture.type,it=pt===yo||pt===Tc||pt===Sy||pt===wy||pt===m2||pt===g2,dt=Fe.getClearColor(),yt=Fe.getClearAlpha(),Dt=dt.r,qt=dt.g,Ke=dt.b;it?(m[0]=Dt,m[1]=qt,m[2]=Ke,m[3]=yt,fe.clearBufferuiv(fe.COLOR,0,m)):(y[0]=Dt,y[1]=qt,y[2]=Ke,y[3]=yt,fe.clearBufferiv(fe.COLOR,0,y))}else Ee|=fe.COLOR_BUFFER_BIT}me&&(Ee|=fe.DEPTH_BUFFER_BIT),_e&&(Ee|=fe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),fe.clear(Ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",wt,!1),n.removeEventListener("webglcontextrestored",Wt,!1),n.removeEventListener("webglcontextcreationerror",ut,!1),Fe.dispose(),Z.dispose(),Ye.dispose(),Oe.dispose(),Et.dispose(),vt.dispose(),ue.dispose(),ht.dispose(),zt.dispose(),se.dispose(),Be.dispose(),Be.removeEventListener("sessionstart",Gn),Be.removeEventListener("sessionend",ea),Ni.stop()};function wt(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Wt(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const Q=Ue.autoReset,me=mt.enabled,_e=mt.autoUpdate,Ee=mt.needsUpdate,ye=mt.type;Re(),Ue.autoReset=Q,mt.enabled=me,mt.autoUpdate=_e,mt.needsUpdate=Ee,mt.type=ye}function ut(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function gt(Q){const me=Q.target;me.removeEventListener("dispose",gt),Mt(me)}function Mt(Q){gn(Q),Oe.remove(Q)}function gn(Q){const me=Oe.get(Q).programs;me!==void 0&&(me.forEach(function(_e){se.releaseProgram(_e)}),Q.isShaderMaterial&&se.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,me,_e,Ee,ye,pt){me===null&&(me=$e);const it=ye.isMesh&&ye.matrixWorld.determinant()<0,dt=oe(Q,me,_e,Ee,ye);Te.setMaterial(Ee,it);let yt=_e.index,Dt=1;if(Ee.wireframe===!0){if(yt=J.getWireframeAttribute(_e),yt===void 0)return;Dt=2}const qt=_e.drawRange,Ke=_e.attributes.position;let nn=qt.start*Dt,cn=(qt.start+qt.count)*Dt;pt!==null&&(nn=Math.max(nn,pt.start*Dt),cn=Math.min(cn,(pt.start+pt.count)*Dt)),yt!==null?(nn=Math.max(nn,0),cn=Math.min(cn,yt.count)):Ke!=null&&(nn=Math.max(nn,0),cn=Math.min(cn,Ke.count));const un=cn-nn;if(un<0||un===1/0)return;ht.setup(ye,Ee,dt,_e,yt);let Dn,Kt=Je;if(yt!==null&&(Dn=re.get(yt),Kt=Xt,Kt.setIndex(Dn)),ye.isMesh)Ee.wireframe===!0?(Te.setLineWidth(Ee.wireframeLinewidth*At()),Kt.setMode(fe.LINES)):Kt.setMode(fe.TRIANGLES);else if(ye.isLine){let Yt=Ee.linewidth;Yt===void 0&&(Yt=1),Te.setLineWidth(Yt*At()),ye.isLineSegments?Kt.setMode(fe.LINES):ye.isLineLoop?Kt.setMode(fe.LINE_LOOP):Kt.setMode(fe.LINE_STRIP)}else ye.isPoints?Kt.setMode(fe.POINTS):ye.isSprite&&Kt.setMode(fe.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)W0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Kt.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(je.get("WEBGL_multi_draw"))Kt.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const Yt=ye._multiDrawStarts,Xn=ye._multiDrawCounts,yn=ye._multiDrawCount,_i=yt?re.get(yt).bytesPerElement:1,Bn=Oe.get(Ee).currentProgram.getUniforms();for(let Cn=0;Cn<yn;Cn++)Bn.setValue(fe,"_gl_DrawID",Cn),Kt.render(Yt[Cn]/_i,Xn[Cn])}else if(ye.isInstancedMesh)Kt.renderInstances(nn,un,ye.count);else if(_e.isInstancedBufferGeometry){const Yt=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,Xn=Math.min(_e.instanceCount,Yt);Kt.renderInstances(nn,un,Xn)}else Kt.render(nn,un)};function Vn(Q,me,_e){Q.transparent===!0&&Q.side===$r&&Q.forceSinglePass===!1?(Q.side=ba,Q.needsUpdate=!0,ya(Q,me,_e),Q.side=Al,Q.needsUpdate=!0,ya(Q,me,_e),Q.side=$r):ya(Q,me,_e)}this.compile=function(Q,me,_e=null){_e===null&&(_e=Q),g=Ye.get(_e),g.init(me),_.push(g),_e.traverseVisible(function(ye){ye.isLight&&ye.layers.test(me.layers)&&(g.pushLight(ye),ye.castShadow&&g.pushShadow(ye))}),Q!==_e&&Q.traverseVisible(function(ye){ye.isLight&&ye.layers.test(me.layers)&&(g.pushLight(ye),ye.castShadow&&g.pushShadow(ye))}),g.setupLights();const Ee=new Set;return Q.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const pt=ye.material;if(pt)if(Array.isArray(pt))for(let it=0;it<pt.length;it++){const dt=pt[it];Vn(dt,_e,ye),Ee.add(dt)}else Vn(pt,_e,ye),Ee.add(pt)}),g=_.pop(),Ee},this.compileAsync=function(Q,me,_e=null){const Ee=this.compile(Q,me,_e);return new Promise(ye=>{function pt(){if(Ee.forEach(function(it){Oe.get(it).currentProgram.isReady()&&Ee.delete(it)}),Ee.size===0){ye(Q);return}setTimeout(pt,10)}je.get("KHR_parallel_shader_compile")!==null?pt():setTimeout(pt,10)})};let zn=null;function Yi(Q){zn&&zn(Q)}function Gn(){Ni.stop()}function ea(){Ni.start()}const Ni=new yZ;Ni.setAnimationLoop(Yi),typeof self<"u"&&Ni.setContext(self),this.setAnimationLoop=function(Q){zn=Q,Be.setAnimationLoop(Q),Q===null?Ni.stop():Ni.start()},Be.addEventListener("sessionstart",Gn),Be.addEventListener("sessionend",ea),this.render=function(Q,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;if(Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Be.enabled===!0&&Be.isPresenting===!0&&(Be.cameraAutoUpdate===!0&&Be.updateCamera(me),me=Be.getCamera()),Q.isScene===!0&&Q.onBeforeRender(E,Q,me,C),g=Ye.get(Q,_.length),g.init(me),_.push(g),xe.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),Me.setFromProjectionMatrix(xe,ml,me.reversedDepth),pe=this.localClippingEnabled,Se=tt.init(this.clippingPlanes,pe),v=Z.get(Q,x.length),v.init(),x.push(v),Be.enabled===!0&&Be.isPresenting===!0){const pt=E.xr.getDepthSensingMesh();pt!==null&&nr(pt,me,-1/0,E.sortObjects)}nr(Q,me,0,E.sortObjects),v.finish(),E.sortObjects===!0&&v.sort(X,z),ct=Be.enabled===!1||Be.isPresenting===!1||Be.hasDepthSensing()===!1,ct&&Fe.addToRenderList(v,Q),this.info.render.frame++,Se===!0&&tt.beginShadows();const _e=g.state.shadowsArray;mt.render(_e,Q,me),Se===!0&&tt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ee=v.opaque,ye=v.transmissive;if(g.setupLights(),me.isArrayCamera){const pt=me.cameras;if(ye.length>0)for(let it=0,dt=pt.length;it<dt;it++){const yt=pt[it];ta(Ee,ye,Q,yt)}ct&&Fe.render(Q);for(let it=0,dt=pt.length;it<dt;it++){const yt=pt[it];wi(v,Q,yt,yt.viewport)}}else ye.length>0&&ta(Ee,ye,Q,me),ct&&Fe.render(Q),wi(v,Q,me);C!==null&&A===0&&(We.updateMultisampleRenderTarget(C),We.updateRenderTargetMipmap(C)),Q.isScene===!0&&Q.onAfterRender(E,Q,me),ht.resetDefaultState(),D=-1,k=null,_.pop(),_.length>0?(g=_[_.length-1],Se===!0&&tt.setGlobalState(E.clippingPlanes,g.state.camera)):g=null,x.pop(),x.length>0?v=x[x.length-1]:v=null};function nr(Q,me,_e,Ee){if(Q.visible===!1)return;if(Q.layers.test(me.layers)){if(Q.isGroup)_e=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(me);else if(Q.isLight)g.pushLight(Q),Q.castShadow&&g.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||Me.intersectsSprite(Q)){Ee&&Ge.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(xe);const it=ue.update(Q),dt=Q.material;dt.visible&&v.push(Q,it,dt,_e,Ge.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(!Q.frustumCulled||Me.intersectsObject(Q))){const it=ue.update(Q),dt=Q.material;if(Ee&&(Q.boundingSphere!==void 0?(Q.boundingSphere===null&&Q.computeBoundingSphere(),Ge.copy(Q.boundingSphere.center)):(it.boundingSphere===null&&it.computeBoundingSphere(),Ge.copy(it.boundingSphere.center)),Ge.applyMatrix4(Q.matrixWorld).applyMatrix4(xe)),Array.isArray(dt)){const yt=it.groups;for(let Dt=0,qt=yt.length;Dt<qt;Dt++){const Ke=yt[Dt],nn=dt[Ke.materialIndex];nn&&nn.visible&&v.push(Q,it,nn,_e,Ge.z,Ke)}}else dt.visible&&v.push(Q,it,dt,_e,Ge.z,null)}}const pt=Q.children;for(let it=0,dt=pt.length;it<dt;it++)nr(pt[it],me,_e,Ee)}function wi(Q,me,_e,Ee){const ye=Q.opaque,pt=Q.transmissive,it=Q.transparent;g.setupLightsView(_e),Se===!0&&tt.setGlobalState(E.clippingPlanes,_e),Ee&&Te.viewport(P.copy(Ee)),ye.length>0&&zi(ye,me,_e),pt.length>0&&zi(pt,me,_e),it.length>0&&zi(it,me,_e),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1)}function ta(Q,me,_e,Ee){if((_e.isScene===!0?_e.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[Ee.id]===void 0&&(g.state.transmissionRenderTarget[Ee.id]=new Ac(1,1,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")||je.has("EXT_color_buffer_float")?Za:yo,minFilter:dc,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:oi.workingColorSpace}));const pt=g.state.transmissionRenderTarget[Ee.id],it=Ee.viewport||P;pt.setSize(it.z*E.transmissionResolutionScale,it.w*E.transmissionResolutionScale);const dt=E.getRenderTarget(),yt=E.getActiveCubeFace(),Dt=E.getActiveMipmapLevel();E.setRenderTarget(pt),E.getClearColor(G),V=E.getClearAlpha(),V<1&&E.setClearColor(16777215,.5),E.clear(),ct&&Fe.render(_e);const qt=E.toneMapping;E.toneMapping=cf;const Ke=Ee.viewport;if(Ee.viewport!==void 0&&(Ee.viewport=void 0),g.setupLightsView(Ee),Se===!0&&tt.setGlobalState(E.clippingPlanes,Ee),zi(Q,_e,Ee),We.updateMultisampleRenderTarget(pt),We.updateRenderTargetMipmap(pt),je.has("WEBGL_multisampled_render_to_texture")===!1){let nn=!1;for(let cn=0,un=me.length;cn<un;cn++){const Dn=me[cn],Kt=Dn.object,Yt=Dn.geometry,Xn=Dn.material,yn=Dn.group;if(Xn.side===$r&&Kt.layers.test(Ee.layers)){const _i=Xn.side;Xn.side=ba,Xn.needsUpdate=!0,dn(Kt,_e,Ee,Yt,Xn,yn),Xn.side=_i,Xn.needsUpdate=!0,nn=!0}}nn===!0&&(We.updateMultisampleRenderTarget(pt),We.updateRenderTargetMipmap(pt))}E.setRenderTarget(dt,yt,Dt),E.setClearColor(G,V),Ke!==void 0&&(Ee.viewport=Ke),E.toneMapping=qt}function zi(Q,me,_e){const Ee=me.isScene===!0?me.overrideMaterial:null;for(let ye=0,pt=Q.length;ye<pt;ye++){const it=Q[ye],dt=it.object,yt=it.geometry,Dt=it.group;let qt=it.material;qt.allowOverride===!0&&Ee!==null&&(qt=Ee),dt.layers.test(_e.layers)&&dn(dt,me,_e,yt,qt,Dt)}}function dn(Q,me,_e,Ee,ye,pt){Q.onBeforeRender(E,me,_e,Ee,ye,pt),Q.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),ye.onBeforeRender(E,me,_e,Ee,Q,pt),ye.transparent===!0&&ye.side===$r&&ye.forceSinglePass===!1?(ye.side=ba,ye.needsUpdate=!0,E.renderBufferDirect(_e,me,Ee,ye,Q,pt),ye.side=Al,ye.needsUpdate=!0,E.renderBufferDirect(_e,me,Ee,ye,Q,pt),ye.side=$r):E.renderBufferDirect(_e,me,Ee,ye,Q,pt),Q.onAfterRender(E,me,_e,Ee,ye,pt)}function ya(Q,me,_e){me.isScene!==!0&&(me=$e);const Ee=Oe.get(Q),ye=g.state.lights,pt=g.state.shadowsArray,it=ye.state.version,dt=se.getParameters(Q,ye.state,pt,me,_e),yt=se.getProgramCacheKey(dt);let Dt=Ee.programs;Ee.environment=Q.isMeshStandardMaterial?me.environment:null,Ee.fog=me.fog,Ee.envMap=(Q.isMeshStandardMaterial?vt:Et).get(Q.envMap||Ee.environment),Ee.envMapRotation=Ee.environment!==null&&Q.envMap===null?me.environmentRotation:Q.envMapRotation,Dt===void 0&&(Q.addEventListener("dispose",gt),Dt=new Map,Ee.programs=Dt);let qt=Dt.get(yt);if(qt!==void 0){if(Ee.currentProgram===qt&&Ee.lightsStateVersion===it)return ie(Q,dt),qt}else dt.uniforms=se.getUniforms(Q),Q.onBeforeCompile(dt,E),qt=se.acquireProgram(dt,yt),Dt.set(yt,qt),Ee.uniforms=dt.uniforms;const Ke=Ee.uniforms;return(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(Ke.clippingPlanes=tt.uniform),ie(Q,dt),Ee.needsLights=qe(Q),Ee.lightsStateVersion=it,Ee.needsLights&&(Ke.ambientLightColor.value=ye.state.ambient,Ke.lightProbe.value=ye.state.probe,Ke.directionalLights.value=ye.state.directional,Ke.directionalLightShadows.value=ye.state.directionalShadow,Ke.spotLights.value=ye.state.spot,Ke.spotLightShadows.value=ye.state.spotShadow,Ke.rectAreaLights.value=ye.state.rectArea,Ke.ltc_1.value=ye.state.rectAreaLTC1,Ke.ltc_2.value=ye.state.rectAreaLTC2,Ke.pointLights.value=ye.state.point,Ke.pointLightShadows.value=ye.state.pointShadow,Ke.hemisphereLights.value=ye.state.hemi,Ke.directionalShadowMap.value=ye.state.directionalShadowMap,Ke.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Ke.spotShadowMap.value=ye.state.spotShadowMap,Ke.spotLightMatrix.value=ye.state.spotLightMatrix,Ke.spotLightMap.value=ye.state.spotLightMap,Ke.pointShadowMap.value=ye.state.pointShadowMap,Ke.pointShadowMatrix.value=ye.state.pointShadowMatrix),Ee.currentProgram=qt,Ee.uniformsList=null,qt}function Ii(Q){if(Q.uniformsList===null){const me=Q.currentProgram.getUniforms();Q.uniformsList=XM.seqWithValue(me.seq,Q.uniforms)}return Q.uniformsList}function ie(Q,me){const _e=Oe.get(Q);_e.outputColorSpace=me.outputColorSpace,_e.batching=me.batching,_e.batchingColor=me.batchingColor,_e.instancing=me.instancing,_e.instancingColor=me.instancingColor,_e.instancingMorph=me.instancingMorph,_e.skinning=me.skinning,_e.morphTargets=me.morphTargets,_e.morphNormals=me.morphNormals,_e.morphColors=me.morphColors,_e.morphTargetsCount=me.morphTargetsCount,_e.numClippingPlanes=me.numClippingPlanes,_e.numIntersection=me.numClipIntersection,_e.vertexAlphas=me.vertexAlphas,_e.vertexTangents=me.vertexTangents,_e.toneMapping=me.toneMapping}function oe(Q,me,_e,Ee,ye){me.isScene!==!0&&(me=$e),We.resetTextureUnits();const pt=me.fog,it=Ee.isMeshStandardMaterial?me.environment:null,dt=C===null?E.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:_u,yt=(Ee.isMeshStandardMaterial?vt:Et).get(Ee.envMap||it),Dt=Ee.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,qt=!!_e.attributes.tangent&&(!!Ee.normalMap||Ee.anisotropy>0),Ke=!!_e.morphAttributes.position,nn=!!_e.morphAttributes.normal,cn=!!_e.morphAttributes.color;let un=cf;Ee.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(un=E.toneMapping);const Dn=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,Kt=Dn!==void 0?Dn.length:0,Yt=Oe.get(Ee),Xn=g.state.lights;if(Se===!0&&(pe===!0||Q!==k)){const ei=Q===k&&Ee.id===D;tt.setState(Ee,Q,ei)}let yn=!1;Ee.version===Yt.__version?(Yt.needsLights&&Yt.lightsStateVersion!==Xn.state.version||Yt.outputColorSpace!==dt||ye.isBatchedMesh&&Yt.batching===!1||!ye.isBatchedMesh&&Yt.batching===!0||ye.isBatchedMesh&&Yt.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&Yt.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&Yt.instancing===!1||!ye.isInstancedMesh&&Yt.instancing===!0||ye.isSkinnedMesh&&Yt.skinning===!1||!ye.isSkinnedMesh&&Yt.skinning===!0||ye.isInstancedMesh&&Yt.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&Yt.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&Yt.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&Yt.instancingMorph===!1&&ye.morphTexture!==null||Yt.envMap!==yt||Ee.fog===!0&&Yt.fog!==pt||Yt.numClippingPlanes!==void 0&&(Yt.numClippingPlanes!==tt.numPlanes||Yt.numIntersection!==tt.numIntersection)||Yt.vertexAlphas!==Dt||Yt.vertexTangents!==qt||Yt.morphTargets!==Ke||Yt.morphNormals!==nn||Yt.morphColors!==cn||Yt.toneMapping!==un||Yt.morphTargetsCount!==Kt)&&(yn=!0):(yn=!0,Yt.__version=Ee.version);let _i=Yt.currentProgram;yn===!0&&(_i=ya(Ee,me,ye));let Bn=!1,Cn=!1,_n=!1;const fn=_i.getUniforms(),hi=Yt.uniforms;if(Te.useProgram(_i.program)&&(Bn=!0,Cn=!0,_n=!0),Ee.id!==D&&(D=Ee.id,Cn=!0),Bn||k!==Q){Te.buffers.depth.getReversed()&&Q.reversedDepth!==!0&&(Q._reversedDepth=!0,Q.updateProjectionMatrix()),fn.setValue(fe,"projectionMatrix",Q.projectionMatrix),fn.setValue(fe,"viewMatrix",Q.matrixWorldInverse);const Ai=fn.map.cameraPosition;Ai!==void 0&&Ai.setValue(fe,Ne.setFromMatrixPosition(Q.matrixWorld)),ot.logarithmicDepthBuffer&&fn.setValue(fe,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),(Ee.isMeshPhongMaterial||Ee.isMeshToonMaterial||Ee.isMeshLambertMaterial||Ee.isMeshBasicMaterial||Ee.isMeshStandardMaterial||Ee.isShaderMaterial)&&fn.setValue(fe,"isOrthographic",Q.isOrthographicCamera===!0),k!==Q&&(k=Q,Cn=!0,_n=!0)}if(ye.isSkinnedMesh){fn.setOptional(fe,ye,"bindMatrix"),fn.setOptional(fe,ye,"bindMatrixInverse");const ei=ye.skeleton;ei&&(ei.boneTexture===null&&ei.computeBoneTexture(),fn.setValue(fe,"boneTexture",ei.boneTexture,We))}ye.isBatchedMesh&&(fn.setOptional(fe,ye,"batchingTexture"),fn.setValue(fe,"batchingTexture",ye._matricesTexture,We),fn.setOptional(fe,ye,"batchingIdTexture"),fn.setValue(fe,"batchingIdTexture",ye._indirectTexture,We),fn.setOptional(fe,ye,"batchingColorTexture"),ye._colorsTexture!==null&&fn.setValue(fe,"batchingColorTexture",ye._colorsTexture,We));const $i=_e.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0)&&rt.update(ye,_e,_i),(Cn||Yt.receiveShadow!==ye.receiveShadow)&&(Yt.receiveShadow=ye.receiveShadow,fn.setValue(fe,"receiveShadow",ye.receiveShadow)),Ee.isMeshGouraudMaterial&&Ee.envMap!==null&&(hi.envMap.value=yt,hi.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),Ee.isMeshStandardMaterial&&Ee.envMap===null&&me.environment!==null&&(hi.envMapIntensity.value=me.environmentIntensity),Cn&&(fn.setValue(fe,"toneMappingExposure",E.toneMappingExposure),Yt.needsLights&&Ae(hi,_n),pt&&Ee.fog===!0&&be.refreshFogUniforms(hi,pt),be.refreshMaterialUniforms(hi,Ee,q,F,g.state.transmissionRenderTarget[Q.id]),XM.upload(fe,Ii(Yt),hi,We)),Ee.isShaderMaterial&&Ee.uniformsNeedUpdate===!0&&(XM.upload(fe,Ii(Yt),hi,We),Ee.uniformsNeedUpdate=!1),Ee.isSpriteMaterial&&fn.setValue(fe,"center",ye.center),fn.setValue(fe,"modelViewMatrix",ye.modelViewMatrix),fn.setValue(fe,"normalMatrix",ye.normalMatrix),fn.setValue(fe,"modelMatrix",ye.matrixWorld),Ee.isShaderMaterial||Ee.isRawShaderMaterial){const ei=Ee.uniformsGroups;for(let Ai=0,Xs=ei.length;Ai<Xs;Ai++){const mr=ei[Ai];zt.update(mr,_i),zt.bind(mr,_i)}}return _i}function Ae(Q,me){Q.ambientLightColor.needsUpdate=me,Q.lightProbe.needsUpdate=me,Q.directionalLights.needsUpdate=me,Q.directionalLightShadows.needsUpdate=me,Q.pointLights.needsUpdate=me,Q.pointLightShadows.needsUpdate=me,Q.spotLights.needsUpdate=me,Q.spotLightShadows.needsUpdate=me,Q.rectAreaLights.needsUpdate=me,Q.hemisphereLights.needsUpdate=me}function qe(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(Q,me,_e){const Ee=Oe.get(Q);Ee.__autoAllocateDepthBuffer=Q.resolveDepthBuffer===!1,Ee.__autoAllocateDepthBuffer===!1&&(Ee.__useRenderToTexture=!1),Oe.get(Q.texture).__webglTexture=me,Oe.get(Q.depthTexture).__webglTexture=Ee.__autoAllocateDepthBuffer?void 0:_e,Ee.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Q,me){const _e=Oe.get(Q);_e.__webglFramebuffer=me,_e.__useDefaultFramebuffer=me===void 0};const at=fe.createFramebuffer();this.setRenderTarget=function(Q,me=0,_e=0){C=Q,w=me,A=_e;let Ee=!0,ye=null,pt=!1,it=!1;if(Q){const yt=Oe.get(Q);if(yt.__useDefaultFramebuffer!==void 0)Te.bindFramebuffer(fe.FRAMEBUFFER,null),Ee=!1;else if(yt.__webglFramebuffer===void 0)We.setupRenderTarget(Q);else if(yt.__hasExternalTextures)We.rebindTextures(Q,Oe.get(Q.texture).__webglTexture,Oe.get(Q.depthTexture).__webglTexture);else if(Q.depthBuffer){const Ke=Q.depthTexture;if(yt.__boundDepthTexture!==Ke){if(Ke!==null&&Oe.has(Ke)&&(Q.width!==Ke.image.width||Q.height!==Ke.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");We.setupDepthRenderbuffer(Q)}}const Dt=Q.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(it=!0);const qt=Oe.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Array.isArray(qt[me])?ye=qt[me][_e]:ye=qt[me],pt=!0):Q.samples>0&&We.useMultisampledRTT(Q)===!1?ye=Oe.get(Q).__webglMultisampledFramebuffer:Array.isArray(qt)?ye=qt[_e]:ye=qt,P.copy(Q.viewport),B.copy(Q.scissor),H=Q.scissorTest}else P.copy(ce).multiplyScalar(q).floor(),B.copy(he).multiplyScalar(q).floor(),H=$;if(_e!==0&&(ye=at),Te.bindFramebuffer(fe.FRAMEBUFFER,ye)&&Ee&&Te.drawBuffers(Q,ye),Te.viewport(P),Te.scissor(B),Te.setScissorTest(H),pt){const yt=Oe.get(Q.texture);fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_CUBE_MAP_POSITIVE_X+me,yt.__webglTexture,_e)}else if(it){const yt=me;for(let Dt=0;Dt<Q.textures.length;Dt++){const qt=Oe.get(Q.textures[Dt]);fe.framebufferTextureLayer(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0+Dt,qt.__webglTexture,_e,yt)}}else if(Q!==null&&_e!==0){const yt=Oe.get(Q.texture);fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,yt.__webglTexture,_e)}D=-1},this.readRenderTargetPixels=function(Q,me,_e,Ee,ye,pt,it,dt=0){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yt=Oe.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&it!==void 0&&(yt=yt[it]),yt){Te.bindFramebuffer(fe.FRAMEBUFFER,yt);try{const Dt=Q.textures[dt],qt=Dt.format,Ke=Dt.type;if(!ot.textureFormatReadable(qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ot.textureTypeReadable(Ke)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=Q.width-Ee&&_e>=0&&_e<=Q.height-ye&&(Q.textures.length>1&&fe.readBuffer(fe.COLOR_ATTACHMENT0+dt),fe.readPixels(me,_e,Ee,ye,Nt.convert(qt),Nt.convert(Ke),pt))}finally{const Dt=C!==null?Oe.get(C).__webglFramebuffer:null;Te.bindFramebuffer(fe.FRAMEBUFFER,Dt)}}},this.readRenderTargetPixelsAsync=async function(Q,me,_e,Ee,ye,pt,it,dt=0){if(!(Q&&Q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let yt=Oe.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&it!==void 0&&(yt=yt[it]),yt)if(me>=0&&me<=Q.width-Ee&&_e>=0&&_e<=Q.height-ye){Te.bindFramebuffer(fe.FRAMEBUFFER,yt);const Dt=Q.textures[dt],qt=Dt.format,Ke=Dt.type;if(!ot.textureFormatReadable(qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ot.textureTypeReadable(Ke))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const nn=fe.createBuffer();fe.bindBuffer(fe.PIXEL_PACK_BUFFER,nn),fe.bufferData(fe.PIXEL_PACK_BUFFER,pt.byteLength,fe.STREAM_READ),Q.textures.length>1&&fe.readBuffer(fe.COLOR_ATTACHMENT0+dt),fe.readPixels(me,_e,Ee,ye,Nt.convert(qt),Nt.convert(Ke),0);const cn=C!==null?Oe.get(C).__webglFramebuffer:null;Te.bindFramebuffer(fe.FRAMEBUFFER,cn);const un=fe.fenceSync(fe.SYNC_GPU_COMMANDS_COMPLETE,0);return fe.flush(),await Ube(fe,un,4),fe.bindBuffer(fe.PIXEL_PACK_BUFFER,nn),fe.getBufferSubData(fe.PIXEL_PACK_BUFFER,0,pt),fe.deleteBuffer(nn),fe.deleteSync(un),pt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Q,me=null,_e=0){const Ee=Math.pow(2,-_e),ye=Math.floor(Q.image.width*Ee),pt=Math.floor(Q.image.height*Ee),it=me!==null?me.x:0,dt=me!==null?me.y:0;We.setTexture2D(Q,0),fe.copyTexSubImage2D(fe.TEXTURE_2D,_e,0,0,it,dt,ye,pt),Te.unbindTexture()};const Ze=fe.createFramebuffer(),Tt=fe.createFramebuffer();this.copyTextureToTexture=function(Q,me,_e=null,Ee=null,ye=0,pt=null){pt===null&&(ye!==0?(W0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),pt=ye,ye=0):pt=0);let it,dt,yt,Dt,qt,Ke,nn,cn,un;const Dn=Q.isCompressedTexture?Q.mipmaps[pt]:Q.image;if(_e!==null)it=_e.max.x-_e.min.x,dt=_e.max.y-_e.min.y,yt=_e.isBox3?_e.max.z-_e.min.z:1,Dt=_e.min.x,qt=_e.min.y,Ke=_e.isBox3?_e.min.z:0;else{const $i=Math.pow(2,-ye);it=Math.floor(Dn.width*$i),dt=Math.floor(Dn.height*$i),Q.isDataArrayTexture?yt=Dn.depth:Q.isData3DTexture?yt=Math.floor(Dn.depth*$i):yt=1,Dt=0,qt=0,Ke=0}Ee!==null?(nn=Ee.x,cn=Ee.y,un=Ee.z):(nn=0,cn=0,un=0);const Kt=Nt.convert(me.format),Yt=Nt.convert(me.type);let Xn;me.isData3DTexture?(We.setTexture3D(me,0),Xn=fe.TEXTURE_3D):me.isDataArrayTexture||me.isCompressedArrayTexture?(We.setTexture2DArray(me,0),Xn=fe.TEXTURE_2D_ARRAY):(We.setTexture2D(me,0),Xn=fe.TEXTURE_2D),fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,me.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,me.unpackAlignment);const yn=fe.getParameter(fe.UNPACK_ROW_LENGTH),_i=fe.getParameter(fe.UNPACK_IMAGE_HEIGHT),Bn=fe.getParameter(fe.UNPACK_SKIP_PIXELS),Cn=fe.getParameter(fe.UNPACK_SKIP_ROWS),_n=fe.getParameter(fe.UNPACK_SKIP_IMAGES);fe.pixelStorei(fe.UNPACK_ROW_LENGTH,Dn.width),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,Dn.height),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,Dt),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,qt),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,Ke);const fn=Q.isDataArrayTexture||Q.isData3DTexture,hi=me.isDataArrayTexture||me.isData3DTexture;if(Q.isDepthTexture){const $i=Oe.get(Q),ei=Oe.get(me),Ai=Oe.get($i.__renderTarget),Xs=Oe.get(ei.__renderTarget);Te.bindFramebuffer(fe.READ_FRAMEBUFFER,Ai.__webglFramebuffer),Te.bindFramebuffer(fe.DRAW_FRAMEBUFFER,Xs.__webglFramebuffer);for(let mr=0;mr<yt;mr++)fn&&(fe.framebufferTextureLayer(fe.READ_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,Oe.get(Q).__webglTexture,ye,Ke+mr),fe.framebufferTextureLayer(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,Oe.get(me).__webglTexture,pt,un+mr)),fe.blitFramebuffer(Dt,qt,it,dt,nn,cn,it,dt,fe.DEPTH_BUFFER_BIT,fe.NEAREST);Te.bindFramebuffer(fe.READ_FRAMEBUFFER,null),Te.bindFramebuffer(fe.DRAW_FRAMEBUFFER,null)}else if(ye!==0||Q.isRenderTargetTexture||Oe.has(Q)){const $i=Oe.get(Q),ei=Oe.get(me);Te.bindFramebuffer(fe.READ_FRAMEBUFFER,Ze),Te.bindFramebuffer(fe.DRAW_FRAMEBUFFER,Tt);for(let Ai=0;Ai<yt;Ai++)fn?fe.framebufferTextureLayer(fe.READ_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,$i.__webglTexture,ye,Ke+Ai):fe.framebufferTexture2D(fe.READ_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,$i.__webglTexture,ye),hi?fe.framebufferTextureLayer(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,ei.__webglTexture,pt,un+Ai):fe.framebufferTexture2D(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,ei.__webglTexture,pt),ye!==0?fe.blitFramebuffer(Dt,qt,it,dt,nn,cn,it,dt,fe.COLOR_BUFFER_BIT,fe.NEAREST):hi?fe.copyTexSubImage3D(Xn,pt,nn,cn,un+Ai,Dt,qt,it,dt):fe.copyTexSubImage2D(Xn,pt,nn,cn,Dt,qt,it,dt);Te.bindFramebuffer(fe.READ_FRAMEBUFFER,null),Te.bindFramebuffer(fe.DRAW_FRAMEBUFFER,null)}else hi?Q.isDataTexture||Q.isData3DTexture?fe.texSubImage3D(Xn,pt,nn,cn,un,it,dt,yt,Kt,Yt,Dn.data):me.isCompressedArrayTexture?fe.compressedTexSubImage3D(Xn,pt,nn,cn,un,it,dt,yt,Kt,Dn.data):fe.texSubImage3D(Xn,pt,nn,cn,un,it,dt,yt,Kt,Yt,Dn):Q.isDataTexture?fe.texSubImage2D(fe.TEXTURE_2D,pt,nn,cn,it,dt,Kt,Yt,Dn.data):Q.isCompressedTexture?fe.compressedTexSubImage2D(fe.TEXTURE_2D,pt,nn,cn,Dn.width,Dn.height,Kt,Dn.data):fe.texSubImage2D(fe.TEXTURE_2D,pt,nn,cn,it,dt,Kt,Yt,Dn);fe.pixelStorei(fe.UNPACK_ROW_LENGTH,yn),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,_i),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,Bn),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,Cn),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,_n),pt===0&&me.generateMipmaps&&fe.generateMipmap(Xn),Te.unbindTexture()},this.copyTextureToTexture3D=function(Q,me,_e=null,Ee=null,ye=0){return W0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Q,me,_e,Ee,ye)},this.initRenderTarget=function(Q){Oe.get(Q).__webglFramebuffer===void 0&&We.setupRenderTarget(Q)},this.initTexture=function(Q){Q.isCubeTexture?We.setTextureCube(Q,0):Q.isData3DTexture?We.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?We.setTexture2DArray(Q,0):We.setTexture2D(Q,0),Te.unbindTexture()},this.resetState=function(){w=0,A=0,C=null,Te.reset(),ht.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ml}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=oi._getDrawingBufferColorSpace(e),n.unpackColorSpace=oi._getUnpackColorSpace()}}const VSe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mU,AddEquation:kd,AddOperation:iJ,AdditiveAnimationBlendMode:_U,AdditiveBlending:AN,AgXToneMapping:lJ,AlphaFormat:yU,AlwaysCompare:wJ,AlwaysDepth:$T,AlwaysStencilFunc:DN,AmbientLight:rZ,AnimationAction:dZ,AnimationClip:Iy,AnimationLoader:lye,AnimationMixer:pZ,AnimationObjectGroup:Dye,AnimationUtils:rye,ArcCurve:LJ,ArrayCamera:uZ,ArrowHelper:eve,AttachedBindMode:f_,Audio:fZ,AudioAnalyser:_ye,AudioContext:ZU,AudioListener:yye,AudioLoader:mye,AxesHelper:tve,BackSide:ba,BasicDepthPacking:pJ,BasicShadowMap:UK,BatchedMesh:kU,Bone:fS,BooleanKeyframeTrack:Dg,Box2:Fye,Box3:vi,Box3Helper:Zye,BoxGeometry:fp,BoxHelper:Jye,BufferAttribute:Tn,BufferGeometry:An,BufferGeometryLoader:lZ,ByteType:d2,Cache:Qu,Camera:_2,CameraHelper:Kye,CanvasTexture:A0e,CapsuleGeometry:R2,CatmullRomCurve3:PU,CineonToneMapping:sJ,CircleGeometry:k2,ClampToEdgeWrapping:ga,Clock:QU,Color:Ut,ColorKeyframeTrack:XU,ColorManagement:oi,CompressedArrayTexture:M0e,CompressedCubeTexture:T0e,CompressedTexture:C2,CompressedTextureLoader:cye,ConeGeometry:hS,ConstantAlphaFactor:eJ,ConstantColorFactor:ZK,Controls:ive,CubeCamera:kJ,CubeReflectionMapping:mf,CubeRefractionMapping:np,CubeTexture:cS,CubeTextureLoader:nZ,CubeUVReflectionMapping:uv,CubicBezierCurve:LU,CubicBezierCurve3:UU,CubicInterpolant:ZJ,CullFaceBack:TN,CullFaceFront:LK,CullFaceFrontBack:Hge,CullFaceNone:PK,Curve:Cu,CurvePath:BJ,CustomBlending:BK,CustomToneMapping:oJ,CylinderGeometry:lg,Cylindrical:Bye,Data3DTexture:x2,DataArrayTexture:v2,DataTexture:ws,DataTextureLoader:YU,DataUtils:Rm,DecrementStencilOp:Zge,DecrementWrapStencilOp:ebe,DefaultLoadingManager:tZ,DepthFormat:Ey,DepthStencilFormat:My,DepthTexture:IU,DetachedBindMode:gU,DirectionalLight:H2,DirectionalLightHelper:$ye,DiscreteInterpolant:QJ,DodecahedronGeometry:D2,DoubleSide:$r,DstAlphaFactor:XK,DstColorFactor:$K,DynamicCopyUsage:pbe,DynamicDrawUsage:CA,DynamicReadUsage:fbe,EdgesGeometry:PJ,EllipseCurve:O2,EqualCompare:vJ,EqualDepth:JT,EqualStencilFunc:rbe,EquirectangularReflectionMapping:xy,EquirectangularRefractionMapping:h_,Euler:li,EventDispatcher:_f,ExtrudeGeometry:I2,FileLoader:Es,Float16BufferAttribute:CJ,Float32BufferAttribute:ln,FloatType:vr,Fog:w2,FogExp2:S2,FramebufferTexture:E0e,FrontSide:Al,Frustum:kg,FrustumArray:T2,GLBufferAttribute:mZ,GLSL1:gbe,GLSL3:ON,GreaterCompare:xJ,GreaterDepth:QT,GreaterEqualCompare:SJ,GreaterEqualDepth:ZT,GreaterEqualStencilFunc:lbe,GreaterStencilFunc:sbe,GridHelper:Xye,Group:Zu,HalfFloatType:Za,HemisphereLight:iZ,HemisphereLightHelper:qye,IcosahedronGeometry:gv,ImageBitmapLoader:cZ,ImageLoader:__,ImageUtils:TJ,IncrementStencilOp:Jge,IncrementWrapStencilOp:Qge,InstancedBufferAttribute:Mh,InstancedBufferGeometry:G2,InstancedInterleavedBuffer:NA,InstancedMesh:M2,Int16BufferAttribute:n0e,Int32BufferAttribute:i0e,Int8BufferAttribute:Qbe,IntType:fv,InterleavedBuffer:uS,InterleavedBufferAttribute:Io,Interpolant:vv,InterpolateDiscrete:Ty,InterpolateLinear:Ay,InterpolateSmooth:WM,InterpolationSamplingMode:vbe,InterpolationSamplingType:ybe,InvertStencilOp:tbe,KeepStencilOp:pm,KeyframeTrack:Pc,LOD:IJ,LatheGeometry:N2,Layers:ky,LessCompare:yJ,LessDepth:KT,LessEqualCompare:wU,LessEqualDepth:og,LessEqualStencilFunc:abe,LessStencilFunc:ibe,Light:pp,LightProbe:oZ,Line:Th,Line3:bu,LineBasicMaterial:qs,LineCurve:BU,LineCurve3:UJ,LineDashedMaterial:$J,LineLoop:DU,LineSegments:Au,LinearFilter:Wi,LinearInterpolant:qU,LinearMipMapLinearFilter:kN,LinearMipMapNearestFilter:Wge,LinearMipmapLinearFilter:dc,LinearMipmapNearestFilter:G0,LinearSRGBColorSpace:_u,LinearToneMapping:rJ,LinearTransfer:p_,Loader:Cs,LoaderUtils:Xd,LoadingManager:j2,LoopOnce:uJ,LoopPingPong:hJ,LoopRepeat:fJ,MOUSE:zge,Material:ka,MaterialLoader:V2,MathUtils:pc,Matrix2:nB,Matrix3:Wn,Matrix4:Ct,MaxEquation:HK,Mesh:fi,MeshBasicMaterial:go,MeshDepthMaterial:VU,MeshDistanceMaterial:GU,MeshLambertMaterial:XJ,MeshMatcapMaterial:YJ,MeshNormalMaterial:qJ,MeshPhongMaterial:WJ,MeshPhysicalMaterial:Nc,MeshStandardMaterial:yv,MeshToonMaterial:IA,MinEquation:jK,MirroredRepeatWrapping:_y,MixOperation:nJ,MultiplyBlending:RN,MultiplyOperation:oS,NearestFilter:es,NearestMipMapLinearFilter:Gge,NearestMipMapNearestFilter:Vge,NearestMipmapLinearFilter:Tm,NearestMipmapNearestFilter:h2,NeutralToneMapping:cJ,NeverCompare:bJ,NeverDepth:YT,NeverStencilFunc:nbe,NoBlending:lf,NoColorSpace:au,NoToneMapping:cf,NormalAnimationBlendMode:y2,NormalBlending:Ym,NotEqualCompare:_J,NotEqualDepth:eA,NotEqualStencilFunc:obe,NumberKeyframeTrack:ug,Object3D:Ti,ObjectLoader:dye,ObjectSpaceNormalMap:gJ,OctahedronGeometry:dS,OneFactor:GK,OneMinusConstantAlphaFactor:tJ,OneMinusConstantColorFactor:QK,OneMinusDstAlphaFactor:YK,OneMinusDstColorFactor:KK,OneMinusSrcAlphaFactor:XT,OneMinusSrcColorFactor:qK,OrthographicCamera:Ph,PCFShadowMap:f2,PCFSoftShadowMap:M1,PMREMGenerator:FN,Path:OA,PerspectiveCamera:Yr,Plane:hl,PlaneGeometry:dp,PlaneHelper:Qye,PointLight:JU,PointLightHelper:Gye,Points:OU,PointsMaterial:A2,PolarGridHelper:Yye,PolyhedronGeometry:hp,PositionalAudio:xye,PropertyBinding:ki,PropertyMixer:hZ,QuadraticBezierCurve:FU,QuadraticBezierCurve3:zU,Quaternion:Hn,QuaternionKeyframeTrack:fg,QuaternionLinearInterpolant:eZ,RED_GREEN_RGTC2_Format:MA,RED_RGTC1_Format:xU,REVISION:Rg,RGBADepthPacking:mJ,RGBAFormat:Jr,RGBAIntegerFormat:dv,RGBA_ASTC_10x10_Format:vA,RGBA_ASTC_10x5_Format:gA,RGBA_ASTC_10x6_Format:bA,RGBA_ASTC_10x8_Format:yA,RGBA_ASTC_12x10_Format:xA,RGBA_ASTC_12x12_Format:_A,RGBA_ASTC_4x4_Format:lA,RGBA_ASTC_5x4_Format:cA,RGBA_ASTC_5x5_Format:uA,RGBA_ASTC_6x5_Format:fA,RGBA_ASTC_6x6_Format:hA,RGBA_ASTC_8x5_Format:dA,RGBA_ASTC_8x6_Format:pA,RGBA_ASTC_8x8_Format:mA,RGBA_BPTC_Format:k1,RGBA_ETC2_EAC_Format:oA,RGBA_PVRTC_2BPPV1_Format:rA,RGBA_PVRTC_4BPPV1_Format:iA,RGBA_S3TC_DXT1_Format:A1,RGBA_S3TC_DXT3_Format:C1,RGBA_S3TC_DXT5_Format:R1,RGBDepthPacking:Xge,RGBFormat:vU,RGBIntegerFormat:qge,RGB_BPTC_SIGNED_Format:SA,RGB_BPTC_UNSIGNED_Format:wA,RGB_ETC1_Format:aA,RGB_ETC2_Format:sA,RGB_PVRTC_2BPPV1_Format:nA,RGB_PVRTC_4BPPV1_Format:tA,RGB_S3TC_DXT1_Format:T1,RGDepthPacking:Yge,RGFormat:b2,RGIntegerFormat:lS,RawShaderMaterial:GJ,Ray:Tu,Raycaster:pS,RectAreaLight:aZ,RedFormat:Nh,RedIntegerFormat:hv,ReinhardToneMapping:aJ,RenderTarget:MU,RenderTarget3D:Iye,RepeatWrapping:ip,ReplaceStencilOp:Kge,ReverseSubtractEquation:zK,RingGeometry:P2,SIGNED_RED_GREEN_RGTC2_Format:TA,SIGNED_RED_RGTC1_Format:EA,SRGBColorSpace:gs,SRGBTransfer:sr,Scene:pv,ShaderChunk:on,ShaderLib:nu,ShaderMaterial:is,ShadowMaterial:VJ,Shape:Km,ShapeGeometry:L2,ShapePath:nve,ShapeUtils:hu,ShortType:p2,Skeleton:mv,SkeletonHelper:Vye,SkinnedMesh:E2,Source:Pd,Sphere:xr,SphereGeometry:bv,Spherical:gZ,SphericalHarmonics3:sZ,SplineCurve:jU,SpotLight:KU,SpotLightHelper:Hye,Sprite:OJ,SpriteMaterial:RU,SrcAlphaFactor:qT,SrcAlphaSaturateFactor:JK,SrcColorFactor:WK,StaticCopyUsage:dbe,StaticDrawUsage:m_,StaticReadUsage:ube,StereoCamera:gye,StreamCopyUsage:mbe,StreamDrawUsage:cbe,StreamReadUsage:hbe,StringKeyframeTrack:Og,SubtractEquation:FK,SubtractiveBlending:CN,TOUCH:jge,TangentSpaceNormalMap:up,TetrahedronGeometry:U2,Texture:tr,TextureLoader:Ny,TextureUtils:lve,Timer:Lye,TimestampQuery:bbe,TorusGeometry:B2,TorusKnotGeometry:F2,Triangle:Ta,TriangleFanDrawMode:AA,TriangleStripDrawMode:SU,TrianglesDrawMode:dJ,TubeGeometry:z2,UVMapping:tp,Uint16BufferAttribute:TU,Uint32BufferAttribute:AU,Uint8BufferAttribute:e0e,Uint8ClampedBufferAttribute:t0e,Uniform:W2,UniformsGroup:Pye,UniformsLib:Zt,UniformsUtils:b_,UnsignedByteType:yo,UnsignedInt248Type:wy,UnsignedInt5999Type:bU,UnsignedIntType:Tc,UnsignedShort4444Type:m2,UnsignedShort5551Type:g2,UnsignedShortType:Sy,VSMShadowMap:Zc,Vector2:ft,Vector3:Y,Vector4:ni,VectorKeyframeTrack:hg,VideoFrameTexture:w0e,VideoTexture:NJ,WebGL3DRenderTarget:Hbe,WebGLArrayRenderTarget:jbe,WebGLCoordinateSystem:ml,WebGLCubeRenderTarget:CU,WebGLRenderTarget:Ac,WebGLRenderer:aB,WebGLUtils:rB,WebGPUCoordinateSystem:Cy,WebXRController:qM,WireframeGeometry:HU,WrapAroundEnding:d_,ZeroCurvatureEnding:Am,ZeroFactor:VK,ZeroSlopeEnding:Cm,ZeroStencilOp:$ge,createCanvasElement:MJ},Symbol.toStringTag,{value:"Module"}));var EZ={exports:{}},mp={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */mp.ConcurrentRoot=1;mp.ContinuousEventPriority=8;mp.DefaultEventPriority=32;mp.DiscreteEventPriority=2;mp.IdleEventPriority=268435456;mp.LegacyRoot=0;mp.NoEventPriority=0;EZ.exports=mp;var YM=EZ.exports,MZ={exports:{}},TZ={},AZ={exports:{}},CZ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py=I;function GSe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var WSe=typeof Object.is=="function"?Object.is:GSe,qSe=Py.useState,XSe=Py.useEffect,YSe=Py.useLayoutEffect,$Se=Py.useDebugValue;function KSe(t,e){var n=e(),i=qSe({inst:{value:n,getSnapshot:e}}),r=i[0].inst,a=i[1];return YSe(function(){r.value=n,r.getSnapshot=e,xD(r)&&a({inst:r})},[t,n,e]),XSe(function(){return xD(r)&&a({inst:r}),t(function(){xD(r)&&a({inst:r})})},[t]),$Se(n),n}function xD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!WSe(t,n)}catch{return!0}}function JSe(t,e){return e()}var ZSe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?JSe:KSe;CZ.useSyncExternalStore=Py.useSyncExternalStore!==void 0?Py.useSyncExternalStore:ZSe;AZ.exports=CZ;var QSe=AZ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X2=I,ewe=QSe;function twe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nwe=typeof Object.is=="function"?Object.is:twe,iwe=ewe.useSyncExternalStore,rwe=X2.useRef,awe=X2.useEffect,swe=X2.useMemo,owe=X2.useDebugValue;TZ.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var a=rwe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=swe(function(){function l(d){if(!c){if(c=!0,u=d,d=i(d),r!==void 0&&s.hasValue){var m=s.value;if(r(m,d))return f=m}return f=d}if(m=f,nwe(u,d))return m;var y=i(d);return r!==void 0&&r(m,y)?(u=d,m):(u=d,f=y)}var c=!1,u,f,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,i,r]);var o=iwe(t,a[0],a[1]);return awe(function(){s.hasValue=!0,s.value=o},[o]),owe(o),o};MZ.exports=TZ;var lwe=MZ.exports;const RZ=Cc(lwe),Y6=t=>{let e;const n=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const h=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(d=>d(e,h))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(i,r,o);return o},cwe=t=>t?Y6(t):Y6,{useSyncExternalStoreWithSelector:uwe}=RZ,fwe=t=>t;function hwe(t,e=fwe,n){const i=uwe(t.subscribe,t.getState,t.getInitialState,e,n);return ke.useDebugValue(i),i}const $6=(t,e)=>{const n=cwe(t),i=(r,a=e)=>hwe(n,r,a);return Object.assign(i,n),i},kZ=(t,e)=>t?$6(t,e):$6,dwe=t=>typeof t=="object"&&typeof t.then=="function",Dm=[];function DZ(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function OZ(t,e=null,n=!1,i={}){e===null&&(e=[t]);for(const a of Dm)if(DZ(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=Dm.indexOf(r);a!==-1&&Dm.splice(a,1)},promise:(dwe(t)?t:t(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(Dm.push(r),!n)throw r.promise}const pwe=(t,e,n)=>OZ(t,e,!1,n),mwe=(t,e,n)=>void OZ(t,e,!0,n),gwe=t=>{if(t===void 0||t.length===0)Dm.splice(0,Dm.length);else{const e=Dm.find(n=>DZ(t,n.keys,n.equal));e&&e.remove()}};var IZ={exports:{}},NZ={exports:{}},PZ={exports:{}},LZ={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,F){var q=U.length;U.push(F);e:for(;0<q;){var X=q-1>>>1,z=U[X];if(0<r(z,F))U[X]=F,U[q]=z,q=X;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var F=U[0],q=U.pop();if(q!==F){U[0]=q;e:for(var X=0,z=U.length,ce=z>>>1;X<ce;){var he=2*(X+1)-1,$=U[he],Me=he+1,Se=U[Me];if(0>r($,q))Me<z&&0>r(Se,$)?(U[X]=Se,U[Me]=q,X=Me):(U[X]=$,U[he]=q,X=he);else if(Me<z&&0>r(Se,q))U[X]=Se,U[Me]=q,X=Me;else break e}}return F}function r(U,F){var q=U.sortIndex-F.sortIndex;return q!==0?q:U.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,f=null,h=3,d=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function _(U){for(var F=n(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=U)i(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function E(U){if(y=!1,_(U),!m)if(n(l)!==null)m=!0,G();else{var F=n(c);F!==null&&V(E,F.startTime-U)}}var T=!1,w=-1,A=5,C=-1;function D(){return!(t.unstable_now()-C<A)}function k(){if(T){var U=t.unstable_now();C=U;var F=!0;try{e:{m=!1,y&&(y=!1,g(w),w=-1),d=!0;var q=h;try{t:{for(_(U),f=n(l);f!==null&&!(f.expirationTime>U&&D());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var z=X(f.expirationTime<=U);if(U=t.unstable_now(),typeof z=="function"){f.callback=z,_(U),F=!0;break t}f===n(l)&&i(l),_(U)}else i(l);f=n(l)}if(f!==null)F=!0;else{var ce=n(c);ce!==null&&V(E,ce.startTime-U),F=!1}}break e}finally{f=null,h=q,d=!1}F=void 0}}finally{F?P():T=!1}}}var P;if(typeof x=="function")P=function(){x(k)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=k,P=function(){H.postMessage(null)}}else P=function(){v(k,0)};function G(){T||(T=!0,P())}function V(U,F){w=v(function(){U(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,G())},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var q=h;h=F;try{return U()}finally{h=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=h;h=U;try{return F()}finally{h=q}},t.unstable_scheduleCallback=function(U,F,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,U){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=q+z,U={id:u++,callback:F,priorityLevel:U,startTime:q,expirationTime:z,sortIndex:-1},q>X?(U.sortIndex=q,e(c,U),n(l)===null&&U===n(c)&&(y?(g(w),w=-1):y=!0,V(E,q-X))):(U.sortIndex=z,e(l,U),m||d||(m=!0,G())),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var F=h;return function(){var q=h;h=F;try{return U.apply(this,arguments)}finally{h=q}}}})(LZ);PZ.exports=LZ;var jN=PZ.exports;/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){t.exports=function(e){function n(p,b,M,O){return new mie(p,b,M,O)}function i(){}function r(p){var b="https://react.dev/errors/"+p;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)b+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(p){return p===null||typeof p!="object"?null:(p=ZF&&p[ZF]||p["@@iterator"],typeof p=="function"?p:null)}function s(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===_ie?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case jg:return"Fragment";case zg:return"Portal";case XR:return"Profiler";case $F:return"StrictMode";case $R:return"Suspense";case KR:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case Vh:return(p.displayName||"Context")+".Provider";case KF:return(p._context.displayName||"Context")+".Consumer";case YR:var b=p.render;return p=p.displayName,p||(p=b.displayName||b.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case JR:return b=p.displayName||null,b!==null?b:s(p.type)||"Memo";case Gh:b=p._payload,p=p._init;try{return s(p(b))}catch{}}return null}function o(p){if(ZR===void 0)try{throw Error()}catch(M){var b=M.stack.trim().match(/\n( *(at )?)/);ZR=b&&b[1]||"",QF=-1<M.stack.indexOf(`
    at`)?" (<anonymous>)":-1<M.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ZR+p+QF}function l(p,b){if(!p||QR)return"";QR=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(b){var tn=function(){throw Error()};if(Object.defineProperty(tn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tn,[])}catch(Yn){var an=Yn}Reflect.construct(p,[],tn)}else{try{tn.call()}catch(Yn){an=Yn}p.call(tn.prototype)}}else{try{throw Error()}catch(Yn){an=Yn}(tn=p())&&typeof tn.catch=="function"&&tn.catch(function(){})}}catch(Yn){if(Yn&&an&&typeof Yn.stack=="string")return[Yn.stack,an.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=O.DetermineComponentFrameRoot(),le=j[0],Ce=j[1];if(le&&Ce){var He=le.split(`
`),St=Ce.split(`
`);for(L=O=0;O<He.length&&!He[O].includes("DetermineComponentFrameRoot");)O++;for(;L<St.length&&!St[L].includes("DetermineComponentFrameRoot");)L++;if(O===He.length||L===St.length)for(O=He.length-1,L=St.length-1;1<=O&&0<=L&&He[O]!==St[L];)L--;for(;1<=O&&0<=L;O--,L--)if(He[O]!==St[L]){if(O!==1||L!==1)do if(O--,L--,0>L||He[O]!==St[L]){var Gt=`
`+He[O].replace(" at new "," at ");return p.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",p.displayName)),Gt}while(1<=O&&0<=L);break}}}finally{QR=!1,Error.prepareStackTrace=M}return(M=p?p.displayName||p.name:"")?o(M):""}function c(p){switch(p.tag){case 26:case 27:case 5:return o(p.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return p=l(p.type,!1),p;case 11:return p=l(p.type.render,!1),p;case 1:return p=l(p.type,!0),p;default:return""}}function u(p){try{var b="";do b+=c(p),p=p.return;while(p);return b}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}function f(p){var b=p,M=p;if(p.alternate)for(;b.return;)b=b.return;else{p=b;do b=p,b.flags&4098&&(M=b.return),p=b.return;while(p)}return b.tag===3?M:null}function h(p){if(f(p)!==p)throw Error(r(188))}function d(p){var b=p.alternate;if(!b){if(b=f(p),b===null)throw Error(r(188));return b!==p?null:p}for(var M=p,O=b;;){var L=M.return;if(L===null)break;var j=L.alternate;if(j===null){if(O=L.return,O!==null){M=O;continue}break}if(L.child===j.child){for(j=L.child;j;){if(j===M)return h(L),p;if(j===O)return h(L),b;j=j.sibling}throw Error(r(188))}if(M.return!==O.return)M=L,O=j;else{for(var le=!1,Ce=L.child;Ce;){if(Ce===M){le=!0,M=L,O=j;break}if(Ce===O){le=!0,O=L,M=j;break}Ce=Ce.sibling}if(!le){for(Ce=j.child;Ce;){if(Ce===M){le=!0,M=j,O=L;break}if(Ce===O){le=!0,O=j,M=L;break}Ce=Ce.sibling}if(!le)throw Error(r(189))}}if(M.alternate!==O)throw Error(r(190))}if(M.tag!==3)throw Error(r(188));return M.stateNode.current===M?p:b}function m(p){var b=p.tag;if(b===5||b===26||b===27||b===6)return p;for(p=p.child;p!==null;){if(b=m(p),b!==null)return b;p=p.sibling}return null}function y(p){var b=p.tag;if(b===5||b===26||b===27||b===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(b=y(p),b!==null))return b;p=p.sibling}return null}function v(p){return{current:p}}function g(p){0>Vg||(p.current=a3[Vg],a3[Vg]=null,Vg--)}function x(p,b){Vg++,a3[Vg]=p.current,p.current=b}function _(p){return p>>>=0,p===0?32:31-(Lre(p)/Ure|0)|0}function E(p){var b=p&42;if(b!==0)return b;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function T(p,b){var M=p.pendingLanes;if(M===0)return 0;var O=0,L=p.suspendedLanes,j=p.pingedLanes,le=p.warmLanes;p=p.finishedLanes!==0;var Ce=M&134217727;return Ce!==0?(M=Ce&~L,M!==0?O=E(M):(j&=Ce,j!==0?O=E(j):p||(le=Ce&~le,le!==0&&(O=E(le))))):(Ce=M&~L,Ce!==0?O=E(Ce):j!==0?O=E(j):p||(le=M&~le,le!==0&&(O=E(le)))),O===0?0:b!==0&&b!==O&&!(b&L)&&(L=O&-O,le=b&-b,L>=le||L===32&&(le&4194176)!==0)?b:O}function w(p,b){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&b)===0}function A(p,b){switch(p){case 1:case 2:case 4:case 8:return b+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C(){var p=zS;return zS<<=1,!(zS&4194176)&&(zS=128),p}function D(){var p=jS;return jS<<=1,!(jS&62914560)&&(jS=4194304),p}function k(p){for(var b=[],M=0;31>M;M++)b.push(p);return b}function P(p,b){p.pendingLanes|=b,b!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function B(p,b,M,O,L,j){var le=p.pendingLanes;p.pendingLanes=M,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=M,p.entangledLanes&=M,p.errorRecoveryDisabledLanes&=M,p.shellSuspendCounter=0;var Ce=p.entanglements,He=p.expirationTimes,St=p.hiddenUpdates;for(M=le&~M;0<M;){var Gt=31-Zo(M),tn=1<<Gt;Ce[Gt]=0,He[Gt]=-1;var an=St[Gt];if(an!==null)for(St[Gt]=null,Gt=0;Gt<an.length;Gt++){var Yn=an[Gt];Yn!==null&&(Yn.lane&=-536870913)}M&=~tn}O!==0&&H(p,O,0),j!==0&&L===0&&p.tag!==0&&(p.suspendedLanes|=j&~(le&~b))}function H(p,b,M){p.pendingLanes|=b,p.suspendedLanes&=~b;var O=31-Zo(b);p.entangledLanes|=b,p.entanglements[O]=p.entanglements[O]|1073741824|M&4194218}function G(p,b){var M=p.entangledLanes|=b;for(p=p.entanglements;M;){var O=31-Zo(M),L=1<<O;L&b|p[O]&b&&(p[O]|=b),M&=~L}}function V(p){return p&=-p,2<p?8<p?p&134217727?32:268435456:8:2}function U(p){if(Qo&&typeof Qo.onCommitFiberRoot=="function")try{Qo.onCommitFiberRoot(Pv,p,void 0,(p.current.flags&128)===128)}catch{}}function F(p){if(typeof Hre=="function"&&Vre(p),Qo&&typeof Qo.setStrictMode=="function")try{Qo.setStrictMode(Pv,p)}catch{}}function q(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}function X(p,b){if(typeof p=="object"&&p!==null){var M=M8.get(p);return M!==void 0?M:(b={value:p,source:b,stack:u(b)},M8.set(p,b),b)}return{value:p,source:b,stack:u(b)}}function z(p,b){Wg[qg++]=GS,Wg[qg++]=VS,VS=p,GS=b}function ce(p,b,M){Bl[Fl++]=kf,Bl[Fl++]=Df,Bl[Fl++]=Cp,Cp=p;var O=kf;p=Df;var L=32-Zo(O)-1;O&=~(1<<L),M+=1;var j=32-Zo(b)+L;if(30<j){var le=L-L%5;j=(O&(1<<le)-1).toString(32),O>>=le,L-=le,kf=1<<32-Zo(b)+L|M<<L|O,Df=j+p}else kf=1<<j|M<<L|O,Df=p}function he(p){p.return!==null&&(z(p,1),ce(p,1,0))}function $(p){for(;p===VS;)VS=Wg[--qg],Wg[qg]=null,GS=Wg[--qg],Wg[qg]=null;for(;p===Cp;)Cp=Bl[--Fl],Bl[Fl]=null,Df=Bl[--Fl],Bl[Fl]=null,kf=Bl[--Fl],Bl[Fl]=null}function Me(p,b){x(qh,b),x(Lv,p),x(as,null),p=Eie(b),g(as),x(as,p)}function Se(){g(as),g(Lv),g(qh)}function pe(p){p.memoizedState!==null&&x(WS,p);var b=as.current,M=Mie(b,p.type);b!==M&&(x(Lv,p),x(as,M))}function xe(p){Lv.current===p&&(g(as),g(Lv)),WS.current===p&&(g(WS),Rf?Ap._currentValue=Hg:Ap._currentValue2=Hg)}function Ne(p){var b=Error(r(418,""));throw fe(X(b,p)),l3}function Ge(p,b){if(!Ll)throw Error(r(175));yre(p.stateNode,p.type,p.memoizedProps,b,p)||Ne(p)}function $e(p){for(io=p.return;io;)switch(io.tag){case 3:case 27:Ou=!0;return;case 5:case 13:Ou=!1;return;default:io=io.return}}function ct(p){if(!Ll||p!==io)return!1;if(!Pi)return $e(p),Pi=!0,!1;var b=!1;if(Ps?p.tag!==3&&p.tag!==27&&(p.tag!==5||p8(p.type)&&!FS(p.type,p.memoizedProps))&&(b=!0):p.tag!==3&&(p.tag!==5||p8(p.type)&&!FS(p.type,p.memoizedProps))&&(b=!0),b&&Ls&&Ne(p),$e(p),p.tag===13){if(!Ll)throw Error(r(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Ls=_re(p)}else Ls=io?h8(p.stateNode):null;return!0}function At(){Ll&&(Ls=io=null,Pi=!1)}function fe(p){Hc===null?Hc=[p]:Hc.push(p)}function Ve(){for(var p=Xg,b=c3=Xg=0;b<p;){var M=zl[b];zl[b++]=null;var O=zl[b];zl[b++]=null;var L=zl[b];zl[b++]=null;var j=zl[b];if(zl[b++]=null,O!==null&&L!==null){var le=O.pending;le===null?L.next=L:(L.next=le.next,le.next=L),O.pending=L}j!==0&&Ue(M,L,j)}}function je(p,b,M,O){zl[Xg++]=p,zl[Xg++]=b,zl[Xg++]=M,zl[Xg++]=O,c3|=O,p.lanes|=O,p=p.alternate,p!==null&&(p.lanes|=O)}function ot(p,b,M,O){return je(p,b,M,O),Oe(p)}function Te(p,b){return je(p,null,null,b),Oe(p)}function Ue(p,b,M){p.lanes|=M;var O=p.alternate;O!==null&&(O.lanes|=M);for(var L=!1,j=p.return;j!==null;)j.childLanes|=M,O=j.alternate,O!==null&&(O.childLanes|=M),j.tag===22&&(p=j.stateNode,p===null||p._visibility&1||(L=!0)),p=j,j=j.return;L&&b!==null&&p.tag===3&&(j=p.stateNode,L=31-Zo(M),j=j.hiddenUpdates,p=j[L],p===null?j[L]=[b]:p.push(b),b.lane=M|536870912)}function Oe(p){if(50<Wv)throw Wv=0,M3=null,Error(r(185));for(var b=p.return;b!==null;)p=b,b=p.return;return p.tag===3?p.stateNode:null}function We(p){p!==Yg&&p.next===null&&(Yg===null?qS=Yg=p:Yg=Yg.next=p),XS=!0,u3||(u3=!0,se(vt))}function Et(p,b){if(!f3&&XS){f3=!0;do for(var M=!1,O=qS;O!==null;){if(p!==0){var L=O.pendingLanes;if(L===0)var j=0;else{var le=O.suspendedLanes,Ce=O.pingedLanes;j=(1<<31-Zo(42|p)+1)-1,j&=L&~(le&~Ce),j=j&201326677?j&201326677|1:j?j|2:0}j!==0&&(M=!0,ue(O,j))}else j=Ri,j=T(O,O===wr?j:0),!(j&3)||w(O,j)||(M=!0,ue(O,j));O=O.next}while(M);f3=!1}}function vt(){XS=u3=!1;var p=0;$g!==0&&(Iie()&&(p=$g),$g=0);for(var b=jc(),M=null,O=qS;O!==null;){var L=O.next,j=re(O,b);j===0?(O.next=null,M===null?qS=L:M.next=L,L===null&&(Yg=M)):(M=O,(p!==0||j&3)&&(XS=!0)),O=L}Et(p)}function re(p,b){for(var M=p.suspendedLanes,O=p.pingedLanes,L=p.expirationTimes,j=p.pendingLanes&-62914561;0<j;){var le=31-Zo(j),Ce=1<<le,He=L[le];He===-1?(!(Ce&M)||Ce&O)&&(L[le]=A(Ce,b)):He<=b&&(p.expiredLanes|=Ce),j&=~Ce}if(b=wr,M=Ri,M=T(p,p===b?M:0),O=p.callbackNode,M===0||p===b&&Er===2||p.cancelPendingCommit!==null)return O!==null&&O!==null&&s3(O),p.callbackNode=null,p.callbackPriority=0;if(!(M&3)||w(p,M)){if(b=M&-M,b===p.callbackPriority)return b;switch(O!==null&&s3(O),V(M)){case 2:case 8:M=zre;break;case 32:M=o3;break;case 268435456:M=jre;break;default:M=o3}return O=J.bind(null,p),M=HS(M,O),p.callbackPriority=b,p.callbackNode=M,b}return O!==null&&O!==null&&s3(O),p.callbackPriority=2,p.callbackNode=null,2}function J(p,b){var M=p.callbackNode;if(Ep()&&p.callbackNode!==M)return null;var O=Ri;return O=T(p,p===wr?O:0),O===0?null:(CF(p,O,b),re(p,jc()),p.callbackNode!=null&&p.callbackNode===M?J.bind(null,p):null)}function ue(p,b){if(Ep())return null;CF(p,b,!0)}function se(p){Fie?zie(function(){fr&6?HS(E8,p):p()}):HS(E8,p)}function be(){return $g===0&&($g=C()),$g}function Z(p,b){if(Uv===null){var M=Uv=[];h3=0,Kg=be(),Jg={status:"pending",value:void 0,then:function(O){M.push(O)}}}return h3++,b.then(Ye,Ye),b}function Ye(){if(--h3===0&&Uv!==null){Jg!==null&&(Jg.status="fulfilled");var p=Uv;Uv=null,Kg=0,Jg=null;for(var b=0;b<p.length;b++)(0,p[b])()}}function tt(p,b){var M=[],O={status:"pending",value:null,reason:null,then:function(L){M.push(L)}};return p.then(function(){O.status="fulfilled",O.value=b;for(var L=0;L<M.length;L++)(0,M[L])(b)},function(L){for(O.status="rejected",O.reason=L,L=0;L<M.length;L++)(0,M[L])(void 0)}),O}function mt(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fe(p,b){p=p.updateQueue,b.updateQueue===p&&(b.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function rt(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Je(p,b,M){var O=p.updateQueue;if(O===null)return null;if(O=O.shared,fr&2){var L=O.pending;return L===null?b.next=b:(b.next=L.next,L.next=b),O.pending=b,b=Oe(p),Ue(p,null,M),b}return je(p,O,b,M),Oe(p)}function Xt(p,b,M){if(b=b.updateQueue,b!==null&&(b=b.shared,(M&4194176)!==0)){var O=b.lanes;O&=p.pendingLanes,M|=O,b.lanes=M,G(p,M)}}function Nt(p,b){var M=p.updateQueue,O=p.alternate;if(O!==null&&(O=O.updateQueue,M===O)){var L=null,j=null;if(M=M.firstBaseUpdate,M!==null){do{var le={lane:M.lane,tag:M.tag,payload:M.payload,callback:null,next:null};j===null?L=j=le:j=j.next=le,M=M.next}while(M!==null);j===null?L=j=b:j=j.next=b}else L=j=b;M={baseState:O.baseState,firstBaseUpdate:L,lastBaseUpdate:j,shared:O.shared,callbacks:O.callbacks},p.updateQueue=M;return}p=M.lastBaseUpdate,p===null?M.firstBaseUpdate=b:p.next=b,M.lastBaseUpdate=b}function ht(){if(d3){var p=Jg;if(p!==null)throw p}}function zt(p,b,M,O){d3=!1;var L=p.updateQueue;Xh=!1;var j=L.firstBaseUpdate,le=L.lastBaseUpdate,Ce=L.shared.pending;if(Ce!==null){L.shared.pending=null;var He=Ce,St=He.next;He.next=null,le===null?j=St:le.next=St,le=He;var Gt=p.alternate;Gt!==null&&(Gt=Gt.updateQueue,Ce=Gt.lastBaseUpdate,Ce!==le&&(Ce===null?Gt.firstBaseUpdate=St:Ce.next=St,Gt.lastBaseUpdate=He))}if(j!==null){var tn=L.baseState;le=0,Gt=St=He=null,Ce=j;do{var an=Ce.lane&-536870913,Yn=an!==Ce.lane;if(Yn?(Ri&an)===an:(O&an)===an){an!==0&&an===Kg&&(d3=!0),Gt!==null&&(Gt=Gt.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var Vl=p,qv=Ce;an=b;var Up=M;switch(qv.tag){case 1:if(Vl=qv.payload,typeof Vl=="function"){tn=Vl.call(Up,tn,an);break e}tn=Vl;break e;case 3:Vl.flags=Vl.flags&-65537|128;case 0:if(Vl=qv.payload,an=typeof Vl=="function"?Vl.call(Up,tn,an):Vl,an==null)break e;tn=qR({},tn,an);break e;case 2:Xh=!0}}an=Ce.callback,an!==null&&(p.flags|=64,Yn&&(p.flags|=8192),Yn=L.callbacks,Yn===null?L.callbacks=[an]:Yn.push(an))}else Yn={lane:an,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Gt===null?(St=Gt=Yn,He=tn):Gt=Gt.next=Yn,le|=an;if(Ce=Ce.next,Ce===null){if(Ce=L.shared.pending,Ce===null)break;Yn=Ce,Ce=Yn.next,Yn.next=null,L.lastBaseUpdate=Yn,L.shared.pending=null}}while(!0);Gt===null&&(He=tn),L.baseState=He,L.firstBaseUpdate=St,L.lastBaseUpdate=Gt,j===null&&(L.shared.lanes=0),Kh|=le,p.lanes=le,p.memoizedState=tn}}function Re(p,b){if(typeof p!="function")throw Error(r(191,p));p.call(b)}function Be(p,b){var M=p.callbacks;if(M!==null)for(p.callbacks=null,p=0;p<M.length;p++)Re(M[p],b)}function wt(p,b){if(el(p,b))return!0;if(typeof p!="object"||p===null||typeof b!="object"||b===null)return!1;var M=Object.keys(p),O=Object.keys(b);if(M.length!==O.length)return!1;for(O=0;O<M.length;O++){var L=M[O];if(!Gre.call(b,L)||!el(p[L],b[L]))return!1}return!0}function Wt(p){return p=p.status,p==="fulfilled"||p==="rejected"}function ut(){}function gt(p,b,M){switch(M=p[M],M===void 0?p.push(b):M!==b&&(b.then(ut,ut),b=M),b.status){case"fulfilled":return b.value;case"rejected":throw p=b.reason,p===Bv?Error(r(483)):p;default:if(typeof b.status=="string")b.then(ut,ut);else{if(p=wr,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=b,p.status="pending",p.then(function(O){if(b.status==="pending"){var L=b;L.status="fulfilled",L.value=O}},function(O){if(b.status==="pending"){var L=b;L.status="rejected",L.reason=O}})}switch(b.status){case"fulfilled":return b.value;case"rejected":throw p=b.reason,p===Bv?Error(r(483)):p}throw Zg=b,Bv}}function Mt(){if(Zg===null)throw Error(r(459));var p=Zg;return Zg=null,p}function gn(p){var b=Fv;return Fv+=1,Qg===null&&(Qg=[]),gt(Qg,p,b)}function Vn(p,b){b=b.props.ref,p.ref=b!==void 0?b:null}function zn(p,b){throw b.$$typeof===yie?Error(r(525)):(p=Object.prototype.toString.call(b),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":p)))}function Yi(p){var b=p._init;return b(p._payload)}function Gn(p){function b(Qe,ze){if(p){var st=Qe.deletions;st===null?(Qe.deletions=[ze],Qe.flags|=16):st.push(ze)}}function M(Qe,ze){if(!p)return null;for(;ze!==null;)b(Qe,ze),ze=ze.sibling;return null}function O(Qe){for(var ze=new Map;Qe!==null;)Qe.key!==null?ze.set(Qe.key,Qe):ze.set(Qe.index,Qe),Qe=Qe.sibling;return ze}function L(Qe,ze){return Qe=Hh(Qe,ze),Qe.index=0,Qe.sibling=null,Qe}function j(Qe,ze,st){return Qe.index=st,p?(st=Qe.alternate,st!==null?(st=st.index,st<ze?(Qe.flags|=33554434,ze):st):(Qe.flags|=33554434,ze)):(Qe.flags|=1048576,ze)}function le(Qe){return p&&Qe.alternate===null&&(Qe.flags|=33554434),Qe}function Ce(Qe,ze,st,Ft){return ze===null||ze.tag!==6?(ze=VR(st,Qe.mode,Ft),ze.return=Qe,ze):(ze=L(ze,st),ze.return=Qe,ze)}function He(Qe,ze,st,Ft){var vn=st.type;return vn===jg?Gt(Qe,ze,st.props.children,Ft,st.key):ze!==null&&(ze.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===Gh&&Yi(vn)===ze.type)?(ze=L(ze,st.props),Vn(ze,st),ze.return=Qe,ze):(ze=LS(st.type,st.key,st.props,null,Qe.mode,Ft),Vn(ze,st),ze.return=Qe,ze)}function St(Qe,ze,st,Ft){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==st.containerInfo||ze.stateNode.implementation!==st.implementation?(ze=GR(st,Qe.mode,Ft),ze.return=Qe,ze):(ze=L(ze,st.children||[]),ze.return=Qe,ze)}function Gt(Qe,ze,st,Ft,vn){return ze===null||ze.tag!==7?(ze=Mp(st,Qe.mode,Ft,vn),ze.return=Qe,ze):(ze=L(ze,st),ze.return=Qe,ze)}function tn(Qe,ze,st){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=VR(""+ze,Qe.mode,st),ze.return=Qe,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case US:return st=LS(ze.type,ze.key,ze.props,null,Qe.mode,st),Vn(st,ze),st.return=Qe,st;case zg:return ze=GR(ze,Qe.mode,st),ze.return=Qe,ze;case Gh:var Ft=ze._init;return ze=Ft(ze._payload),tn(Qe,ze,st)}if(BS(ze)||a(ze))return ze=Mp(ze,Qe.mode,st,null),ze.return=Qe,ze;if(typeof ze.then=="function")return tn(Qe,gn(ze),st);if(ze.$$typeof===Vh)return tn(Qe,en(Qe,ze),st);zn(Qe,ze)}return null}function an(Qe,ze,st,Ft){var vn=ze!==null?ze.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return vn!==null?null:Ce(Qe,ze,""+st,Ft);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case US:return st.key===vn?He(Qe,ze,st,Ft):null;case zg:return st.key===vn?St(Qe,ze,st,Ft):null;case Gh:return vn=st._init,st=vn(st._payload),an(Qe,ze,st,Ft)}if(BS(st)||a(st))return vn!==null?null:Gt(Qe,ze,st,Ft,null);if(typeof st.then=="function")return an(Qe,ze,gn(st),Ft);if(st.$$typeof===Vh)return an(Qe,ze,en(Qe,st),Ft);zn(Qe,st)}return null}function Yn(Qe,ze,st,Ft,vn){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number"||typeof Ft=="bigint")return Qe=Qe.get(st)||null,Ce(ze,Qe,""+Ft,vn);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case US:return Qe=Qe.get(Ft.key===null?st:Ft.key)||null,He(ze,Qe,Ft,vn);case zg:return Qe=Qe.get(Ft.key===null?st:Ft.key)||null,St(ze,Qe,Ft,vn);case Gh:var kr=Ft._init;return Ft=kr(Ft._payload),Yn(Qe,ze,st,Ft,vn)}if(BS(Ft)||a(Ft))return Qe=Qe.get(st)||null,Gt(ze,Qe,Ft,vn,null);if(typeof Ft.then=="function")return Yn(Qe,ze,st,gn(Ft),vn);if(Ft.$$typeof===Vh)return Yn(Qe,ze,st,en(ze,Ft),vn);zn(ze,Ft)}return null}function Vl(Qe,ze,st,Ft){for(var vn=null,kr=null,Nn=ze,Li=ze=0,Wa=null;Nn!==null&&Li<st.length;Li++){Nn.index>Li?(Wa=Nn,Nn=null):Wa=Nn.sibling;var Ui=an(Qe,Nn,st[Li],Ft);if(Ui===null){Nn===null&&(Nn=Wa);break}p&&Nn&&Ui.alternate===null&&b(Qe,Nn),ze=j(Ui,ze,Li),kr===null?vn=Ui:kr.sibling=Ui,kr=Ui,Nn=Wa}if(Li===st.length)return M(Qe,Nn),Pi&&z(Qe,Li),vn;if(Nn===null){for(;Li<st.length;Li++)Nn=tn(Qe,st[Li],Ft),Nn!==null&&(ze=j(Nn,ze,Li),kr===null?vn=Nn:kr.sibling=Nn,kr=Nn);return Pi&&z(Qe,Li),vn}for(Nn=O(Nn);Li<st.length;Li++)Wa=Yn(Nn,Qe,Li,st[Li],Ft),Wa!==null&&(p&&Wa.alternate!==null&&Nn.delete(Wa.key===null?Li:Wa.key),ze=j(Wa,ze,Li),kr===null?vn=Wa:kr.sibling=Wa,kr=Wa);return p&&Nn.forEach(function(Zh){return b(Qe,Zh)}),Pi&&z(Qe,Li),vn}function qv(Qe,ze,st,Ft){if(st==null)throw Error(r(151));for(var vn=null,kr=null,Nn=ze,Li=ze=0,Wa=null,Ui=st.next();Nn!==null&&!Ui.done;Li++,Ui=st.next()){Nn.index>Li?(Wa=Nn,Nn=null):Wa=Nn.sibling;var Zh=an(Qe,Nn,Ui.value,Ft);if(Zh===null){Nn===null&&(Nn=Wa);break}p&&Nn&&Zh.alternate===null&&b(Qe,Nn),ze=j(Zh,ze,Li),kr===null?vn=Zh:kr.sibling=Zh,kr=Zh,Nn=Wa}if(Ui.done)return M(Qe,Nn),Pi&&z(Qe,Li),vn;if(Nn===null){for(;!Ui.done;Li++,Ui=st.next())Ui=tn(Qe,Ui.value,Ft),Ui!==null&&(ze=j(Ui,ze,Li),kr===null?vn=Ui:kr.sibling=Ui,kr=Ui);return Pi&&z(Qe,Li),vn}for(Nn=O(Nn);!Ui.done;Li++,Ui=st.next())Ui=Yn(Nn,Qe,Li,Ui.value,Ft),Ui!==null&&(p&&Ui.alternate!==null&&Nn.delete(Ui.key===null?Li:Ui.key),ze=j(Ui,ze,Li),kr===null?vn=Ui:kr.sibling=Ui,kr=Ui);return p&&Nn.forEach(function(Jre){return b(Qe,Jre)}),Pi&&z(Qe,Li),vn}function Up(Qe,ze,st,Ft){if(typeof st=="object"&&st!==null&&st.type===jg&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case US:e:{for(var vn=st.key;ze!==null;){if(ze.key===vn){if(vn=st.type,vn===jg){if(ze.tag===7){M(Qe,ze.sibling),Ft=L(ze,st.props.children),Ft.return=Qe,Qe=Ft;break e}}else if(ze.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===Gh&&Yi(vn)===ze.type){M(Qe,ze.sibling),Ft=L(ze,st.props),Vn(Ft,st),Ft.return=Qe,Qe=Ft;break e}M(Qe,ze);break}else b(Qe,ze);ze=ze.sibling}st.type===jg?(Ft=Mp(st.props.children,Qe.mode,Ft,st.key),Ft.return=Qe,Qe=Ft):(Ft=LS(st.type,st.key,st.props,null,Qe.mode,Ft),Vn(Ft,st),Ft.return=Qe,Qe=Ft)}return le(Qe);case zg:e:{for(vn=st.key;ze!==null;){if(ze.key===vn)if(ze.tag===4&&ze.stateNode.containerInfo===st.containerInfo&&ze.stateNode.implementation===st.implementation){M(Qe,ze.sibling),Ft=L(ze,st.children||[]),Ft.return=Qe,Qe=Ft;break e}else{M(Qe,ze);break}else b(Qe,ze);ze=ze.sibling}Ft=GR(st,Qe.mode,Ft),Ft.return=Qe,Qe=Ft}return le(Qe);case Gh:return vn=st._init,st=vn(st._payload),Up(Qe,ze,st,Ft)}if(BS(st))return Vl(Qe,ze,st,Ft);if(a(st)){if(vn=a(st),typeof vn!="function")throw Error(r(150));return st=vn.call(st),qv(Qe,ze,st,Ft)}if(typeof st.then=="function")return Up(Qe,ze,gn(st),Ft);if(st.$$typeof===Vh)return Up(Qe,ze,en(Qe,st),Ft);zn(Qe,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,ze!==null&&ze.tag===6?(M(Qe,ze.sibling),Ft=L(ze,st),Ft.return=Qe,Qe=Ft):(M(Qe,ze),Ft=VR(st,Qe.mode,Ft),Ft.return=Qe,Qe=Ft),le(Qe)):M(Qe,ze)}return function(Qe,ze,st,Ft){try{Fv=0;var vn=Up(Qe,ze,st,Ft);return Qg=null,vn}catch(Nn){if(Nn===Bv)throw Nn;var kr=n(29,Nn,null,Qe.mode);return kr.lanes=Ft,kr.return=Qe,kr}finally{}}}function ea(p,b){p=Pf,x($S,p),x(eb,b),Pf=p|b.baseLanes}function Ni(){x($S,Pf),x(eb,eb.current)}function nr(){Pf=$S.current,g(eb),g($S)}function wi(p){var b=p.alternate;x(Oa,Oa.current&1),x(jl,p),Iu===null&&(b===null||eb.current!==null||b.memoizedState!==null)&&(Iu=p)}function ta(p){if(p.tag===22){if(x(Oa,Oa.current),x(jl,p),Iu===null){var b=p.alternate;b!==null&&b.memoizedState!==null&&(Iu=p)}}else zi()}function zi(){x(Oa,Oa.current),x(jl,jl.current)}function dn(p){g(jl),Iu===p&&(Iu=null),g(Oa)}function ya(p){for(var b=p;b!==null;){if(b.tag===13){var M=b.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||n3(M)||i3(M)))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if(b.flags&128)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function Ii(){throw Error(r(321))}function ie(p,b){if(b===null)return!1;for(var M=0;M<b.length&&M<p.length;M++)if(!el(p[M],b[M]))return!1;return!0}function oe(p,b,M,O,L,j){return Yh=j,si=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,Fn.H=p===null||p.memoizedState===null?Dp:$h,kp=!1,j=M(O,L),kp=!1,tb&&(j=qe(b,M,O,L)),Ae(p),j}function Ae(p){Fn.H=Nu;var b=ur!==null&&ur.next!==null;if(Yh=0,xa=ur=si=null,KS=!1,zv=0,nb=null,b)throw Error(r(300));p===null||Va||(p=p.dependencies,p!==null&&jt(p)&&(Va=!0))}function qe(p,b,M,O){si=p;var L=0;do{if(tb&&(nb=null),zv=0,tb=!1,25<=L)throw Error(r(301));if(L+=1,xa=ur=null,p.updateQueue!=null){var j=p.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}Fn.H=Op,j=b(M,O)}while(tb);return j}function at(){var p=Fn.H,b=p.useState()[0];return b=typeof b.then=="function"?Ee(b):b,p=p.useState()[0],(ur!==null?ur.memoizedState:null)!==p&&(si.flags|=1024),b}function Ze(){var p=JS!==0;return JS=0,p}function Tt(p,b,M){b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~M}function Q(p){if(KS){for(p=p.memoizedState;p!==null;){var b=p.queue;b!==null&&(b.pending=null),p=p.next}KS=!1}Yh=0,xa=ur=si=null,tb=!1,zv=JS=0,nb=null}function me(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xa===null?si.memoizedState=xa=p:xa=xa.next=p,xa}function _e(){if(ur===null){var p=si.alternate;p=p!==null?p.memoizedState:null}else p=ur.next;var b=xa===null?si.memoizedState:xa.next;if(b!==null)xa=b,ur=p;else{if(p===null)throw si.alternate===null?Error(r(467)):Error(r(310));ur=p,p={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},xa===null?si.memoizedState=xa=p:xa=xa.next=p}return xa}function Ee(p){var b=zv;return zv+=1,nb===null&&(nb=[]),p=gt(nb,p,b),b=si,(xa===null?b.memoizedState:xa.next)===null&&(b=b.alternate,Fn.H=b===null||b.memoizedState===null?Dp:$h),p}function ye(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Ee(p);if(p.$$typeof===Vh)return Lt(p)}throw Error(r(438,String(p)))}function pt(p){var b=null,M=si.updateQueue;if(M!==null&&(b=M.memoCache),b==null){var O=si.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(b={data:O.data.map(function(L){return L.slice()}),index:0})))}if(b==null&&(b={data:[],index:0}),M===null&&(M=m3(),si.updateQueue=M),M.memoCache=b,M=b.data[b.index],M===void 0)for(M=b.data[b.index]=Array(p),O=0;O<p;O++)M[O]=xie;return b.index++,M}function it(p,b){return typeof b=="function"?b(p):b}function dt(p){var b=_e();return yt(b,ur,p)}function yt(p,b,M){var O=p.queue;if(O===null)throw Error(r(311));O.lastRenderedReducer=M;var L=p.baseQueue,j=O.pending;if(j!==null){if(L!==null){var le=L.next;L.next=j.next,j.next=le}b.baseQueue=L=j,O.pending=null}if(j=p.baseState,L===null)p.memoizedState=j;else{b=L.next;var Ce=le=null,He=null,St=b,Gt=!1;do{var tn=St.lane&-536870913;if(tn!==St.lane?(Ri&tn)===tn:(Yh&tn)===tn){var an=St.revertLane;if(an===0)He!==null&&(He=He.next={lane:0,revertLane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),tn===Kg&&(Gt=!0);else if((Yh&an)===an){St=St.next,an===Kg&&(Gt=!0);continue}else tn={lane:0,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},He===null?(Ce=He=tn,le=j):He=He.next=tn,si.lanes|=an,Kh|=an;tn=St.action,kp&&M(j,tn),j=St.hasEagerState?St.eagerState:M(j,tn)}else an={lane:tn,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},He===null?(Ce=He=an,le=j):He=He.next=an,si.lanes|=tn,Kh|=tn;St=St.next}while(St!==null&&St!==b);if(He===null?le=j:He.next=Ce,!el(j,p.memoizedState)&&(Va=!0,Gt&&(M=Jg,M!==null)))throw M;p.memoizedState=j,p.baseState=le,p.baseQueue=He,O.lastRenderedState=j}return L===null&&(O.lanes=0),[p.memoizedState,O.dispatch]}function Dt(p){var b=_e(),M=b.queue;if(M===null)throw Error(r(311));M.lastRenderedReducer=p;var O=M.dispatch,L=M.pending,j=b.memoizedState;if(L!==null){M.pending=null;var le=L=L.next;do j=p(j,le.action),le=le.next;while(le!==L);el(j,b.memoizedState)||(Va=!0),b.memoizedState=j,b.baseQueue===null&&(b.baseState=j),M.lastRenderedState=j}return[j,O]}function qt(p,b,M){var O=si,L=_e(),j=Pi;if(j){if(M===void 0)throw Error(r(407));M=M()}else M=b();var le=!el((ur||L).memoizedState,M);if(le&&(L.memoizedState=M,Va=!0),L=L.queue,Sn(cn.bind(null,O,L,p),[p]),L.getSnapshot!==b||le||xa!==null&&xa.memoizedState.tag&1){if(O.flags|=2048,mr(9,nn.bind(null,O,L,M,b),{destroy:void 0},null),wr===null)throw Error(r(349));j||Yh&60||Ke(O,b,M)}return M}function Ke(p,b,M){p.flags|=16384,p={getSnapshot:b,value:M},b=si.updateQueue,b===null?(b=m3(),si.updateQueue=b,b.stores=[p]):(M=b.stores,M===null?b.stores=[p]:M.push(p))}function nn(p,b,M,O){b.value=M,b.getSnapshot=O,un(b)&&Dn(p)}function cn(p,b,M){return M(function(){un(b)&&Dn(p)})}function un(p){var b=p.getSnapshot;p=p.value;try{var M=b();return!el(p,M)}catch{return!0}}function Dn(p){var b=Te(p,2);b!==null&&no(b,p,2)}function Kt(p){var b=me();if(typeof p=="function"){var M=p;if(p=M(),kp){F(!0);try{M()}finally{F(!1)}}}return b.memoizedState=b.baseState=p,b.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:p},b}function Yt(p,b,M,O){return p.baseState=M,yt(p,ur,typeof O=="function"?O:it)}function Xn(p,b,M,O,L){if(Mn(p))throw Error(r(485));if(p=b.action,p!==null){var j={payload:L,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){j.listeners.push(le)}};Fn.T!==null?M(!0):j.isTransition=!1,O(j),M=b.pending,M===null?(j.next=b.pending=j,yn(b,j)):(j.next=M.next,b.pending=M.next=j)}}function yn(p,b){var M=b.action,O=b.payload,L=p.state;if(b.isTransition){var j=Fn.T,le={};Fn.T=le;try{var Ce=M(L,O),He=Fn.S;He!==null&&He(le,Ce),_i(p,b,Ce)}catch(St){Cn(p,b,St)}finally{Fn.T=j}}else try{j=M(L,O),_i(p,b,j)}catch(St){Cn(p,b,St)}}function _i(p,b,M){M!==null&&typeof M=="object"&&typeof M.then=="function"?M.then(function(O){Bn(p,b,O)},function(O){return Cn(p,b,O)}):Bn(p,b,M)}function Bn(p,b,M){b.status="fulfilled",b.value=M,_n(b),p.state=M,b=p.pending,b!==null&&(M=b.next,M===b?p.pending=null:(M=M.next,b.next=M,yn(p,M)))}function Cn(p,b,M){var O=p.pending;if(p.pending=null,O!==null){O=O.next;do b.status="rejected",b.reason=M,_n(b),b=b.next;while(b!==O)}p.action=null}function _n(p){p=p.listeners;for(var b=0;b<p.length;b++)(0,p[b])()}function fn(p,b){return b}function hi(p,b){if(Pi){var M=wr.formState;if(M!==null){e:{var O=si;if(Pi){if(Ls){var L=fre(Ls,Ou);if(L){Ls=h8(L),O=hre(L);break e}}Ne(O)}O=!1}O&&(b=M[0])}}M=me(),M.memoizedState=M.baseState=b,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:b},M.queue=O,M=mn.bind(null,si,O),O.dispatch=M,O=Kt(!1);var j=Ci.bind(null,si,!1,O.queue);return O=me(),L={state:b,dispatch:null,action:p,pending:null},O.queue=L,M=Xn.bind(null,si,L,j,M),L.dispatch=M,O.memoizedState=p,[b,M,!1]}function $i(p){var b=_e();return ei(b,ur,p)}function ei(p,b,M){b=yt(p,b,fn)[0],p=dt(it)[0],b=typeof b=="object"&&b!==null&&typeof b.then=="function"?Ee(b):b;var O=_e(),L=O.queue,j=L.dispatch;return M!==O.memoizedState&&(si.flags|=2048,mr(9,Ai.bind(null,L,M),{destroy:void 0},null)),[b,j,p]}function Ai(p,b){p.action=b}function Xs(p){var b=_e(),M=ur;if(M!==null)return ei(b,M,p);_e(),b=b.memoizedState,M=_e();var O=M.queue.dispatch;return M.memoizedState=p,[b,O,!1]}function mr(p,b,M,O){return p={tag:p,create:b,inst:M,deps:O,next:null},b=si.updateQueue,b===null&&(b=m3(),si.updateQueue=b),M=b.lastEffect,M===null?b.lastEffect=p.next=p:(O=M.next,M.next=p,p.next=O,b.lastEffect=p),p}function wf(){return _e().memoizedState}function jo(p,b,M,O){var L=me();si.flags|=p,L.memoizedState=mr(1|b,M,{destroy:void 0},O===void 0?null:O)}function Lc(p,b,M,O){var L=_e();O=O===void 0?null:O;var j=L.memoizedState.inst;ur!==null&&O!==null&&ie(O,ur.memoizedState.deps)?L.memoizedState=mr(b,M,j,O):(si.flags|=p,L.memoizedState=mr(1|b,M,j,O))}function Ho(p,b){jo(8390656,8,p,b)}function Sn(p,b){Lc(2048,8,p,b)}function Ys(p,b){return Lc(4,2,p,b)}function Il(p,b){return Lc(4,4,p,b)}function Uc(p,b){if(typeof b=="function"){p=p();var M=b(p);return function(){typeof M=="function"?M():b(null)}}if(b!=null)return p=p(),b.current=p,function(){b.current=null}}function Ur(p,b,M){M=M!=null?M.concat([p]):null,Lc(4,4,Uc.bind(null,b,p),M)}function Ef(){}function Vo(p,b){var M=_e();b=b===void 0?null:b;var O=M.memoizedState;return b!==null&&ie(b,O[1])?O[0]:(M.memoizedState=[p,b],p)}function ku(p,b){var M=_e();b=b===void 0?null:b;var O=M.memoizedState;if(b!==null&&ie(b,O[1]))return O[0];if(O=p(),kp){F(!0);try{p()}finally{F(!1)}}return M.memoizedState=[O,b],O}function S(p,b,M){return M===void 0||Yh&1073741824?p.memoizedState=b:(p.memoizedState=M,p=AF(),si.lanes|=p,Kh|=p,M)}function N(p,b,M,O){return el(M,b)?M:eb.current!==null?(p=S(p,M,O),el(p,b)||(Va=!0),p):Yh&42?(p=AF(),si.lanes|=p,Kh|=p,b):(Va=!0,p.memoizedState=M)}function W(p,b,M,O,L){var j=Tp();Eo(j!==0&&8>j?j:8);var le=Fn.T,Ce={};Fn.T=Ce,Ci(p,!1,b,M);try{var He=L(),St=Fn.S;if(St!==null&&St(Ce,He),He!==null&&typeof He=="object"&&typeof He.then=="function"){var Gt=tt(He,O);En(p,b,Gt,Ko(p))}else En(p,b,O,Ko(p))}catch(tn){En(p,b,{then:function(){},status:"rejected",reason:tn},Ko())}finally{Eo(j),Fn.T=le}}function ne(p){var b=p.memoizedState;if(b!==null)return b;b={memoizedState:Hg,baseState:Hg,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:Hg},next:null};var M={};return b.next={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:M},next:null},p.memoizedState=b,p=p.alternate,p!==null&&(p.memoizedState=b),b}function de(){return Lt(Ap)}function Le(){return _e().memoizedState}function Xe(){return _e().memoizedState}function It(p){for(var b=p.return;b!==null;){switch(b.tag){case 24:case 3:var M=Ko();p=rt(M);var O=Je(b,p,M);O!==null&&(no(O,b,M),Xt(O,b,M)),b={cache:jn()},p.payload=b;return}b=b.return}}function Bt(p,b,M){var O=Ko();M={lane:O,revertLane:0,action:M,hasEagerState:!1,eagerState:null,next:null},Mn(p)?Ei(b,M):(M=ot(p,b,M,O),M!==null&&(no(M,p,O),va(M,b,O)))}function mn(p,b,M){var O=Ko();En(p,b,M,O)}function En(p,b,M,O){var L={lane:O,revertLane:0,action:M,hasEagerState:!1,eagerState:null,next:null};if(Mn(p))Ei(b,L);else{var j=p.alternate;if(p.lanes===0&&(j===null||j.lanes===0)&&(j=b.lastRenderedReducer,j!==null))try{var le=b.lastRenderedState,Ce=j(le,M);if(L.hasEagerState=!0,L.eagerState=Ce,el(Ce,le))return je(p,b,L,0),wr===null&&Ve(),!1}catch{}finally{}if(M=ot(p,b,L,O),M!==null)return no(M,p,O),va(M,b,O),!0}return!1}function Ci(p,b,M,O){if(O={lane:2,revertLane:be(),action:O,hasEagerState:!1,eagerState:null,next:null},Mn(p)){if(b)throw Error(r(479))}else b=ot(p,M,O,2),b!==null&&no(b,p,2)}function Mn(p){var b=p.alternate;return p===si||b!==null&&b===si}function Ei(p,b){tb=KS=!0;var M=p.pending;M===null?b.next=b:(b.next=M.next,M.next=b),p.pending=b}function va(p,b,M){if(M&4194176){var O=b.lanes;O&=p.pendingLanes,M|=O,b.lanes=M,G(p,M)}}function cr(p,b,M,O){b=p.memoizedState,M=M(O,b),M=M==null?b:qR({},b,M),p.memoizedState=M,p.lanes===0&&(p.updateQueue.baseState=M)}function Ki(p,b,M,O,L,j,le){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(O,j,le):b.prototype&&b.prototype.isPureReactComponent?!wt(M,O)||!wt(L,j):!0}function Ji(p,b,M,O){p=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(M,O),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(M,O),b.state!==p&&g3.enqueueReplaceState(b,b.state,null)}function Mi(p,b){var M=b;if("ref"in b){M={};for(var O in b)O!=="ref"&&(M[O]=b[O])}if(p=p.defaultProps){M===b&&(M=qR({},M));for(var L in p)M[L]===void 0&&(M[L]=p[L])}return M}function Go(p,b){try{var M=p.onUncaughtError;M(b.value,{componentStack:b.stack})}catch(O){setTimeout(function(){throw O})}}function Mf(p,b,M){try{var O=p.onCaughtError;O(M.value,{componentStack:M.stack,errorBoundary:b.tag===1?b.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function yp(p,b,M){return M=rt(M),M.tag=3,M.payload={element:null},M.callback=function(){Go(p,b)},M}function $s(p){return p=rt(p),p.tag=3,p}function Rs(p,b,M,O){var L=M.type.getDerivedStateFromError;if(typeof L=="function"){var j=O.value;p.payload=function(){return L(j)},p.callback=function(){Mf(b,M,O)}}var le=M.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(p.callback=function(){Mf(b,M,O),typeof L!="function"&&(Jh===null?Jh=new Set([this]):Jh.add(this));var Ce=O.stack;this.componentDidCatch(O.value,{componentStack:Ce!==null?Ce:""})})}function Rv(p,b,M,O,L){if(M.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(b=M.alternate,b!==null&&Rt(b,M,L,!0),M=jl.current,M!==null){switch(M.tag){case 13:return Iu===null?FR():M.alternate===null&&aa===0&&(aa=3),M.flags&=-257,M.flags|=65536,M.lanes=L,O===YS?M.flags|=16384:(b=M.updateQueue,b===null?M.updateQueue=new Set([O]):b.add(O),jR(p,O,L)),!1;case 22:return M.flags|=65536,O===YS?M.flags|=16384:(b=M.updateQueue,b===null?(b={transitions:null,markerInstances:null,retryQueue:new Set([O])},M.updateQueue=b):(M=b.retryQueue,M===null?b.retryQueue=new Set([O]):M.add(O)),jR(p,O,L)),!1}throw Error(r(435,M.tag))}return jR(p,O,L),FR(),!1}if(Pi)return b=jl.current,b!==null?(!(b.flags&65536)&&(b.flags|=256),b.flags|=65536,b.lanes=L,O!==l3&&(p=Error(r(422),{cause:O}),fe(X(p,M)))):(O!==l3&&(b=Error(r(423),{cause:O}),fe(X(b,M))),p=p.current.alternate,p.flags|=65536,L&=-L,p.lanes|=L,O=X(O,M),L=yp(p.stateNode,O,L),Nt(p,L),aa!==4&&(aa=2)),!1;var j=Error(r(520),{cause:O});if(j=X(j,M),Hv===null?Hv=[j]:Hv.push(j),aa!==4&&(aa=2),b===null)return!0;O=X(O,M),M=b;do{switch(M.tag){case 3:return M.flags|=65536,p=L&-L,M.lanes|=p,p=yp(M.stateNode,O,p),Nt(M,p),!1;case 1:if(b=M.type,j=M.stateNode,(M.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Jh===null||!Jh.has(j))))return M.flags|=65536,L&=-L,M.lanes|=L,L=$s(L),Rs(L,p,M,O),Nt(M,L),!1}M=M.return}while(M!==null);return!1}function ha(p,b,M,O){b.child=p===null?T8(b,null,M,O):Rp(b,p.child,M,O)}function vp(p,b,M,O,L){M=M.render;var j=b.ref;if("ref"in O){var le={};for(var Ce in O)Ce!=="ref"&&(le[Ce]=O[Ce])}else le=O;return xt(b),O=oe(p,b,M,le,j,L),Ce=Ze(),p!==null&&!Va?(Tt(p,b,L),Zs(p,b,L)):(Pi&&Ce&&he(b),b.flags|=1,ha(p,b,O,L),b.child)}function Uh(p,b,M,O,L){if(p===null){var j=M.type;return typeof j=="function"&&!HR(j)&&j.defaultProps===void 0&&M.compare===null?(b.tag=15,b.type=j,So(p,b,j,O,L)):(p=LS(M.type,null,O,b,b.mode,L),p.ref=b.ref,p.return=b,b.child=p)}if(j=p.child,!Pl(p,L)){var le=j.memoizedProps;if(M=M.compare,M=M!==null?M:wt,M(le,O)&&p.ref===b.ref)return Zs(p,b,L)}return b.flags|=1,p=Hh(j,O),p.ref=b.ref,p.return=b,b.child=p}function So(p,b,M,O,L){if(p!==null){var j=p.memoizedProps;if(wt(j,O)&&p.ref===b.ref)if(Va=!1,b.pendingProps=O=j,Pl(p,L))p.flags&131072&&(Va=!0);else return b.lanes=p.lanes,Zs(p,b,L)}return xp(p,b,M,O,L)}function Wo(p,b,M){var O=b.pendingProps,L=O.children,j=(b.stateNode._pendingVisibility&2)!==0,le=p!==null?p.memoizedState:null;if(wo(p,b),O.mode==="hidden"||j){if(b.flags&128){if(O=le!==null?le.baseLanes|M:M,p!==null){for(L=b.child=p.child,j=0;L!==null;)j=j|L.lanes|L.childLanes,L=L.sibling;b.childLanes=j&~O}else b.childLanes=0,b.child=null;return Nl(p,b,O,M)}if(M&536870912)b.memoizedState={baseLanes:0,cachePool:null},p!==null&&Jn(b,le!==null?le.cachePool:null),le!==null?ea(b,le):Ni(),ta(b);else return b.lanes=b.childLanes=536870912,Nl(p,b,le!==null?le.baseLanes|M:M,M)}else le!==null?(Jn(b,le.cachePool),ea(b,le),zi(),b.memoizedState=null):(p!==null&&Jn(b,null),Ni(),zi());return ha(p,b,L,M),b.child}function Nl(p,b,M,O){var L=Gr();return L=L===null?null:{parent:Rf?ia._currentValue:ia._currentValue2,pool:L},b.memoizedState={baseLanes:M,cachePool:L},p!==null&&Jn(b,null),Ni(),ta(b),p!==null&&Rt(p,b,O,!0),null}function wo(p,b){var M=b.ref;if(M===null)p!==null&&p.ref!==null&&(b.flags|=2097664);else{if(typeof M!="function"&&typeof M!="object")throw Error(r(284));(p===null||p.ref!==M)&&(b.flags|=2097664)}}function xp(p,b,M,O,L){return xt(b),M=oe(p,b,M,O,void 0,L),O=Ze(),p!==null&&!Va?(Tt(p,b,L),Zs(p,b,L)):(Pi&&O&&he(b),b.flags|=1,ha(p,b,M,L),b.child)}function Ks(p,b,M,O,L,j){return xt(b),b.updateQueue=null,M=qe(b,O,M,L),Ae(p),O=Ze(),p!==null&&!Va?(Tt(p,b,j),Zs(p,b,j)):(Pi&&O&&he(b),b.flags|=1,ha(p,b,M,j),b.child)}function Lg(p,b,M,O,L){if(xt(b),b.stateNode===null){var j=Gg,le=M.contextType;typeof le=="object"&&le!==null&&(j=Lt(le)),j=new M(O,j),b.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=g3,b.stateNode=j,j._reactInternals=b,j=b.stateNode,j.props=O,j.state=b.memoizedState,j.refs={},mt(b),le=M.contextType,j.context=typeof le=="object"&&le!==null?Lt(le):Gg,j.state=b.memoizedState,le=M.getDerivedStateFromProps,typeof le=="function"&&(cr(b,M,le,O),j.state=b.memoizedState),typeof M.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(le=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),le!==j.state&&g3.enqueueReplaceState(j,j.state,null),zt(b,O,j,L),ht(),j.state=b.memoizedState),typeof j.componentDidMount=="function"&&(b.flags|=4194308),O=!0}else if(p===null){j=b.stateNode;var Ce=b.memoizedProps,He=Mi(M,Ce);j.props=He;var St=j.context,Gt=M.contextType;le=Gg,typeof Gt=="object"&&Gt!==null&&(le=Lt(Gt));var tn=M.getDerivedStateFromProps;Gt=typeof tn=="function"||typeof j.getSnapshotBeforeUpdate=="function",Ce=b.pendingProps!==Ce,Gt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Ce||St!==le)&&Ji(b,j,O,le),Xh=!1;var an=b.memoizedState;j.state=an,zt(b,O,j,L),ht(),St=b.memoizedState,Ce||an!==St||Xh?(typeof tn=="function"&&(cr(b,M,tn,O),St=b.memoizedState),(He=Xh||Ki(b,M,He,O,an,St,le))?(Gt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(b.flags|=4194308)):(typeof j.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=O,b.memoizedState=St),j.props=O,j.state=St,j.context=le,O=He):(typeof j.componentDidMount=="function"&&(b.flags|=4194308),O=!1)}else{j=b.stateNode,Fe(p,b),le=b.memoizedProps,Gt=Mi(M,le),j.props=Gt,tn=b.pendingProps,an=j.context,St=M.contextType,He=Gg,typeof St=="object"&&St!==null&&(He=Lt(St)),Ce=M.getDerivedStateFromProps,(St=typeof Ce=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(le!==tn||an!==He)&&Ji(b,j,O,He),Xh=!1,an=b.memoizedState,j.state=an,zt(b,O,j,L),ht();var Yn=b.memoizedState;le!==tn||an!==Yn||Xh||p!==null&&p.dependencies!==null&&jt(p.dependencies)?(typeof Ce=="function"&&(cr(b,M,Ce,O),Yn=b.memoizedState),(Gt=Xh||Ki(b,M,Gt,O,an,Yn,He)||p!==null&&p.dependencies!==null&&jt(p.dependencies))?(St||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(O,Yn,He),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(O,Yn,He)),typeof j.componentDidUpdate=="function"&&(b.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof j.componentDidUpdate!="function"||le===p.memoizedProps&&an===p.memoizedState||(b.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&an===p.memoizedState||(b.flags|=1024),b.memoizedProps=O,b.memoizedState=Yn),j.props=O,j.state=Yn,j.context=He,O=Gt):(typeof j.componentDidUpdate!="function"||le===p.memoizedProps&&an===p.memoizedState||(b.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&an===p.memoizedState||(b.flags|=1024),O=!1)}return j=O,wo(p,b),O=(b.flags&128)!==0,j||O?(j=b.stateNode,M=O&&typeof M.getDerivedStateFromError!="function"?null:j.render(),b.flags|=1,p!==null&&O?(b.child=Rp(b,p.child,null,L),b.child=Rp(b,null,M,L)):ha(p,b,M,L),b.memoizedState=j.state,p=b.child):p=Zs(p,b,L),p}function _p(p,b,M,O){return At(),b.flags|=256,ha(p,b,M,O),b.child}function Bh(p){return{baseLanes:p,cachePool:Fc()}}function Bc(p,b,M){return p=p!==null?p.childLanes&~M:0,b&&(p|=Hl),p}function Du(p,b,M){var O=b.pendingProps,L=!1,j=(b.flags&128)!==0,le;if((le=j)||(le=p!==null&&p.memoizedState===null?!1:(Oa.current&2)!==0),le&&(L=!0,b.flags&=-129),le=(b.flags&32)!==0,b.flags&=-33,p===null){if(Pi){if(L?wi(b):zi(),Pi){var Ce=Ls,He;(He=Ce)&&(Ce=bre(Ce,Ou),Ce!==null?(b.memoizedState={dehydrated:Ce,treeContext:Cp!==null?{id:kf,overflow:Df}:null,retryLane:536870912},He=n(18,null,null,0),He.stateNode=Ce,He.return=b,b.child=He,io=b,Ls=null,He=!0):He=!1),He||Ne(b)}if(Ce=b.memoizedState,Ce!==null&&(Ce=Ce.dehydrated,Ce!==null))return i3(Ce)?b.lanes=16:b.lanes=536870912,null;dn(b)}return Ce=O.children,O=O.fallback,L?(zi(),L=b.mode,Ce=Tf({mode:"hidden",children:Ce},L),O=Mp(O,L,M,null),Ce.return=b,O.return=b,Ce.sibling=O,b.child=Ce,L=b.child,L.memoizedState=Bh(M),L.childLanes=Bc(p,le,M),b.memoizedState=b3,O):(wi(b),Sp(b,Ce))}if(He=p.memoizedState,He!==null&&(Ce=He.dehydrated,Ce!==null)){if(j)b.flags&256?(wi(b),b.flags&=-257,b=Js(p,b,M)):b.memoizedState!==null?(zi(),b.child=p.child,b.flags|=128,b=null):(zi(),L=O.fallback,Ce=b.mode,O=Tf({mode:"visible",children:O.children},Ce),L=Mp(L,Ce,M,null),L.flags|=2,O.return=b,L.return=b,O.sibling=L,b.child=O,Rp(b,p.child,null,M),O=b.child,O.memoizedState=Bh(M),O.childLanes=Bc(p,le,M),b.memoizedState=b3,b=L);else if(wi(b),i3(Ce))le=cre(Ce).digest,O=Error(r(419)),O.stack="",O.digest=le,fe({value:O,source:null,stack:null}),b=Js(p,b,M);else if(Va||Rt(p,b,M,!1),le=(M&p.childLanes)!==0,Va||le){if(le=wr,le!==null){if(O=M&-M,O&42)O=1;else switch(O){case 2:O=1;break;case 8:O=4;break;case 32:O=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:O=64;break;case 268435456:O=134217728;break;default:O=0}if(O=O&(le.suspendedLanes|M)?0:O,O!==0&&O!==He.retryLane)throw He.retryLane=O,Te(p,O),no(le,p,O),C8}n3(Ce)||FR(),b=Js(p,b,M)}else n3(Ce)?(b.flags|=128,b.child=p.child,b=hie.bind(null,p),ure(Ce,b),b=null):(p=He.treeContext,Ll&&(Ls=pre(Ce),io=b,Pi=!0,Hc=null,Ou=!1,p!==null&&(Bl[Fl++]=kf,Bl[Fl++]=Df,Bl[Fl++]=Cp,kf=p.id,Df=p.overflow,Cp=b)),b=Sp(b,O.children),b.flags|=4096);return b}return L?(zi(),L=O.fallback,Ce=b.mode,He=p.child,j=He.sibling,O=Hh(He,{mode:"hidden",children:O.children}),O.subtreeFlags=He.subtreeFlags&31457280,j!==null?L=Hh(j,L):(L=Mp(L,Ce,M,null),L.flags|=2),L.return=b,O.return=b,O.sibling=L,b.child=O,O=L,L=b.child,Ce=p.child.memoizedState,Ce===null?Ce=Bh(M):(He=Ce.cachePool,He!==null?(j=Rf?ia._currentValue:ia._currentValue2,He=He.parent!==j?{parent:j,pool:j}:He):He=Fc(),Ce={baseLanes:Ce.baseLanes|M,cachePool:He}),L.memoizedState=Ce,L.childLanes=Bc(p,le,M),b.memoizedState=b3,O):(wi(b),M=p.child,p=M.sibling,M=Hh(M,{mode:"visible",children:O.children}),M.return=b,M.sibling=null,p!==null&&(le=b.deletions,le===null?(b.deletions=[p],b.flags|=16):le.push(p)),b.child=M,b.memoizedState=null,M)}function Sp(p,b){return b=Tf({mode:"visible",children:b},p.mode),b.return=p,p.child=b}function Tf(p,b){return VF(p,b,0,null)}function Js(p,b,M){return Rp(b,p.child,null,M),p=Sp(b,b.pendingProps.children),p.flags|=2,b.memoizedState=null,p}function qo(p,b,M){p.lanes|=b;var O=p.alternate;O!==null&&(O.lanes|=b),Ie(p.return,b,M)}function ks(p,b,M,O,L){var j=p.memoizedState;j===null?p.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:O,tail:M,tailMode:L}:(j.isBackwards=b,j.rendering=null,j.renderingStartTime=0,j.last=O,j.tail=M,j.tailMode=L)}function ja(p,b,M){var O=b.pendingProps,L=O.revealOrder,j=O.tail;if(ha(p,b,O.children,M),O=Oa.current,O&2)O=O&1|2,b.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=b.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&qo(p,M,b);else if(p.tag===19)qo(p,M,b);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===b)break e;for(;p.sibling===null;){if(p.return===null||p.return===b)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}O&=1}switch(x(Oa,O),L){case"forwards":for(M=b.child,L=null;M!==null;)p=M.alternate,p!==null&&ya(p)===null&&(L=M),M=M.sibling;M=L,M===null?(L=b.child,b.child=null):(L=M.sibling,M.sibling=null),ks(b,!1,L,M,j);break;case"backwards":for(M=null,L=b.child,b.child=null;L!==null;){if(p=L.alternate,p!==null&&ya(p)===null){b.child=L;break}p=L.sibling,L.sibling=M,M=L,L=p}ks(b,!0,M,null,j);break;case"together":ks(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function Zs(p,b,M){if(p!==null&&(b.dependencies=p.dependencies),Kh|=b.lanes,!(M&b.childLanes))if(p!==null){if(Rt(p,b,M,!1),(M&b.childLanes)===0)return null}else return null;if(p!==null&&b.child!==p.child)throw Error(r(153));if(b.child!==null){for(p=b.child,M=Hh(p,p.pendingProps),b.child=M,M.return=b;p.sibling!==null;)p=p.sibling,M=M.sibling=Hh(p,p.pendingProps),M.return=b;M.sibling=null}return b.child}function Pl(p,b){return p.lanes&b?!0:(p=p.dependencies,!!(p!==null&&jt(p)))}function Fh(p,b,M){switch(b.tag){case 3:Me(b,b.stateNode.containerInfo),te(b,ia,p.memoizedState.cache),At();break;case 27:case 5:pe(b);break;case 4:Me(b,b.stateNode.containerInfo);break;case 10:te(b,b.type,b.memoizedProps.value);break;case 13:var O=b.memoizedState;if(O!==null)return O.dehydrated!==null?(wi(b),b.flags|=128,null):M&b.child.childLanes?Du(p,b,M):(wi(b),p=Zs(p,b,M),p!==null?p.sibling:null);wi(b);break;case 19:var L=(p.flags&128)!==0;if(O=(M&b.childLanes)!==0,O||(Rt(p,b,M,!1),O=(M&b.childLanes)!==0),L){if(O)return ja(p,b,M);b.flags|=128}if(L=b.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),x(Oa,Oa.current),O)break;return null;case 22:case 23:return b.lanes=0,Wo(p,b,M);case 24:te(b,ia,p.memoizedState.cache)}return Zs(p,b,M)}function ee(p,b,M){if(p!==null)if(p.memoizedProps!==b.pendingProps)Va=!0;else{if(!Pl(p,M)&&!(b.flags&128))return Va=!1,Fh(p,b,M);Va=!!(p.flags&131072)}else Va=!1,Pi&&b.flags&1048576&&ce(b,GS,b.index);switch(b.lanes=0,b.tag){case 16:e:{p=b.pendingProps;var O=b.elementType,L=O._init;if(O=L(O._payload),b.type=O,typeof O=="function")HR(O)?(p=Mi(O,p),b.tag=1,b=Lg(null,b,O,p,M)):(b.tag=0,b=xp(null,b,O,p,M));else{if(O!=null){if(L=O.$$typeof,L===YR){b.tag=11,b=vp(null,b,O,p,M);break e}else if(L===JR){b.tag=14,b=Uh(null,b,O,p,M);break e}}throw b=s(O)||O,Error(r(306,b,""))}}return b;case 0:return xp(p,b,b.type,b.pendingProps,M);case 1:return O=b.type,L=Mi(O,b.pendingProps),Lg(p,b,O,L,M);case 3:e:{if(Me(b,b.stateNode.containerInfo),p===null)throw Error(r(387));var j=b.pendingProps;L=b.memoizedState,O=L.element,Fe(p,b),zt(b,j,null,M);var le=b.memoizedState;if(j=le.cache,te(b,ia,j),j!==L.cache&&lt(b,[ia],M,!0),ht(),j=le.element,Ll&&L.isDehydrated)if(L={element:j,isDehydrated:!1,cache:le.cache},b.updateQueue.baseState=L,b.memoizedState=L,b.flags&256){b=_p(p,b,j,M);break e}else if(j!==O){O=X(Error(r(424)),b),fe(O),b=_p(p,b,j,M);break e}else for(Ll&&(Ls=dre(b.stateNode.containerInfo),io=b,Pi=!0,Hc=null,Ou=!0),M=T8(b,null,j,M),b.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling;else{if(At(),j===O){b=Zs(p,b,M);break e}ha(p,b,j,M)}b=b.child}return b;case 26:if(Ul)return wo(p,b),p===null?(M=g8(b.type,null,b.pendingProps,null))?b.memoizedState=M:Pi||(b.stateNode=Rre(b.type,b.pendingProps,qh.current,b)):b.memoizedState=g8(b.type,p.memoizedProps,b.pendingProps,p.memoizedState),null;case 27:if(Ps)return pe(b),p===null&&Ps&&Pi&&(O=b.stateNode=S8(b.type,b.pendingProps,qh.current,as.current,!1),io=b,Ou=!0,Ls=d8(O)),O=b.pendingProps.children,p!==null||Pi?ha(p,b,O,M):b.child=Rp(b,null,O,M),wo(p,b),b.child;case 5:return p===null&&Pi&&(Tre(b.type,b.pendingProps,as.current),(L=O=Ls)&&(O=mre(O,b.type,b.pendingProps,Ou),O!==null?(b.stateNode=O,io=b,Ls=d8(O),Ou=!1,L=!0):L=!1),L||Ne(b)),pe(b),L=b.type,j=b.pendingProps,le=p!==null?p.memoizedProps:null,O=j.children,FS(L,j)?O=null:le!==null&&FS(L,le)&&(b.flags|=32),b.memoizedState!==null&&(L=oe(p,b,at,null,null,M),Rf?Ap._currentValue=L:Ap._currentValue2=L),wo(p,b),ha(p,b,O,M),b.child;case 6:return p===null&&Pi&&(Are(b.pendingProps,as.current),(p=M=Ls)&&(M=gre(M,b.pendingProps,Ou),M!==null?(b.stateNode=M,io=b,Ls=null,p=!0):p=!1),p||Ne(b)),null;case 13:return Du(p,b,M);case 4:return Me(b,b.stateNode.containerInfo),O=b.pendingProps,p===null?b.child=Rp(b,null,O,M):ha(p,b,O,M),b.child;case 11:return vp(p,b,b.type,b.pendingProps,M);case 7:return ha(p,b,b.pendingProps,M),b.child;case 8:return ha(p,b,b.pendingProps.children,M),b.child;case 12:return ha(p,b,b.pendingProps.children,M),b.child;case 10:return O=b.pendingProps,te(b,b.type,O.value),ha(p,b,O.children,M),b.child;case 9:return L=b.type._context,O=b.pendingProps.children,xt(b),L=Lt(L),O=O(L),b.flags|=1,ha(p,b,O,M),b.child;case 14:return Uh(p,b,b.type,b.pendingProps,M);case 15:return So(p,b,b.type,b.pendingProps,M);case 19:return ja(p,b,M);case 22:return Wo(p,b,M);case 24:return xt(b),O=Lt(ia),p===null?(L=Gr(),L===null&&(L=wr,j=jn(),L.pooledCache=j,j.refCount++,j!==null&&(L.pooledCacheLanes|=M),L=j),b.memoizedState={parent:O,cache:L},mt(b),te(b,ia,L)):(p.lanes&M&&(Fe(p,b),zt(b,null,null,M),ht()),L=p.memoizedState,j=b.memoizedState,L.parent!==O?(L={parent:O,cache:O},b.memoizedState=L,b.lanes===0&&(b.memoizedState=b.updateQueue.baseState=L),te(b,ia,O)):(O=j.cache,te(b,ia,O),O!==L.cache&&lt(b,[ia],M,!0))),ha(p,b,b.pendingProps.children,M),b.child;case 29:throw b.pendingProps}throw Error(r(156,b.tag))}function te(p,b,M){Rf?(x(ZS,b._currentValue),b._currentValue=M):(x(ZS,b._currentValue2),b._currentValue2=M)}function we(p){var b=ZS.current;Rf?p._currentValue=b:p._currentValue2=b,g(ZS)}function Ie(p,b,M){for(;p!==null;){var O=p.alternate;if((p.childLanes&b)!==b?(p.childLanes|=b,O!==null&&(O.childLanes|=b)):O!==null&&(O.childLanes&b)!==b&&(O.childLanes|=b),p===M)break;p=p.return}}function lt(p,b,M,O){var L=p.child;for(L!==null&&(L.return=p);L!==null;){var j=L.dependencies;if(j!==null){var le=L.child;j=j.firstContext;e:for(;j!==null;){var Ce=j;j=L;for(var He=0;He<b.length;He++)if(Ce.context===b[He]){j.lanes|=M,Ce=j.alternate,Ce!==null&&(Ce.lanes|=M),Ie(j.return,M,p),O||(le=null);break e}j=Ce.next}}else if(L.tag===18){if(le=L.return,le===null)throw Error(r(341));le.lanes|=M,j=le.alternate,j!==null&&(j.lanes|=M),Ie(le,M,p),le=null}else le=L.child;if(le!==null)le.return=L;else for(le=L;le!==null;){if(le===p){le=null;break}if(L=le.sibling,L!==null){L.return=le.return,le=L;break}le=le.return}L=le}}function Rt(p,b,M,O){p=null;for(var L=b,j=!1;L!==null;){if(!j){if(L.flags&524288)j=!0;else if(L.flags&262144)break}if(L.tag===10){var le=L.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var Ce=L.type;el(L.pendingProps.value,le.value)||(p!==null?p.push(Ce):p=[Ce])}}else if(L===WS.current){if(le=L.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(p!==null?p.push(Ap):p=[Ap])}L=L.return}p!==null&&lt(b,p,M,O),b.flags|=262144}function jt(p){for(p=p.firstContext;p!==null;){var b=p.context;if(!el(Rf?b._currentValue:b._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function xt(p){Ip=p,Of=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Lt(p){return rn(Ip,p)}function en(p,b){return Ip===null&&xt(p),rn(p,b)}function rn(p,b){var M=Rf?b._currentValue:b._currentValue2;if(b={context:b,memoizedValue:M,next:null},Of===null){if(p===null)throw Error(r(308));Of=b,p.dependencies={lanes:0,firstContext:b},p.flags|=524288}else Of=Of.next=b;return M}function jn(){return{controller:new qre,data:new Map,refCount:0}}function Rn(p){p.refCount--,p.refCount===0&&Xre(Yre,function(){p.controller.abort()})}function Gr(){var p=Np.current;return p!==null?p:wr.pooledCache}function Jn(p,b){b===null?x(Np,Np.current):x(Np,b.pool)}function Fc(){var p=Gr();return p===null?null:{parent:Rf?ia._currentValue:ia._currentValue2,pool:p}}function Rr(p){p.flags|=4}function Xo(p,b){if(p!==null&&p.child===b.child)return!1;if(b.flags&16)return!0;for(p=b.child;p!==null;){if(p.flags&13878||p.subtreeFlags&13878)return!0;p=p.sibling}return!1}function Af(p,b,M,O){if(Ns)for(M=b.child;M!==null;){if(M.tag===5||M.tag===6)e3(p,M.stateNode);else if(!(M.tag===4||Ps&&M.tag===27)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===b)break;for(;M.sibling===null;){if(M.return===null||M.return===b)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else if(Wh)for(var L=b.child;L!==null;){if(L.tag===5){var j=L.stateNode;M&&O&&(j=u8(j,L.type,L.memoizedProps)),e3(p,j)}else if(L.tag===6)j=L.stateNode,M&&O&&(j=f8(j,L.memoizedProps)),e3(p,j);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)j=L.child,j!==null&&(j.return=L),Af(p,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===b)break;for(;L.sibling===null;){if(L.return===null||L.return===b)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function Qs(p,b,M,O){if(Wh)for(var L=b.child;L!==null;){if(L.tag===5){var j=L.stateNode;M&&O&&(j=u8(j,L.type,L.memoizedProps)),l8(p,j)}else if(L.tag===6)j=L.stateNode,M&&O&&(j=f8(j,L.memoizedProps)),l8(p,j);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)j=L.child,j!==null&&(j.return=L),Qs(p,L,!(L.memoizedProps!==null&&L.memoizedProps.mode==="manual"),!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===b)break;for(;L.sibling===null;){if(L.return===null||L.return===b)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function zh(p,b){if(Wh&&Xo(p,b)){p=b.stateNode;var M=p.containerInfo,O=o8();Qs(O,b,!1,!1),p.pendingChildren=O,Rr(b),lre(M,O)}}function K(p,b,M,O){if(Ns)p.memoizedProps!==O&&Rr(b);else if(Wh){var L=p.stateNode,j=p.memoizedProps;if((p=Xo(p,b))||j!==O){var le=as.current;j=ore(L,M,j,O,!p,null),j===L?b.stateNode=L:(t8(j,M,O,le)&&Rr(b),b.stateNode=j,p?Af(j,b,!1,!1):Rr(b))}else b.stateNode=L}}function ae(p,b,M){if(Pie(b,M)){if(p.flags|=16777216,!r8(b,M))if(OF())p.flags|=8192;else throw Zg=YS,p3}else p.flags&=-16777217}function ge(p,b){if(Dre(b)){if(p.flags|=16777216,!_8(b))if(OF())p.flags|=8192;else throw Zg=YS,p3}else p.flags&=-16777217}function ve(p,b){b!==null&&(p.flags|=4),p.flags&16384&&(b=p.tag!==22?D():536870912,p.lanes|=b,ab|=b)}function De(p,b){if(!Pi)switch(p.tailMode){case"hidden":b=p.tail;for(var M=null;b!==null;)b.alternate!==null&&(M=b),b=b.sibling;M===null?p.tail=null:M.sibling=null;break;case"collapsed":M=p.tail;for(var O=null;M!==null;)M.alternate!==null&&(O=M),M=M.sibling;O===null?b||p.tail===null?p.tail=null:p.tail.sibling=null:O.sibling=null}}function Pe(p){var b=p.alternate!==null&&p.alternate.child===p.child,M=0,O=0;if(b)for(var L=p.child;L!==null;)M|=L.lanes|L.childLanes,O|=L.subtreeFlags&31457280,O|=L.flags&31457280,L.return=p,L=L.sibling;else for(L=p.child;L!==null;)M|=L.lanes|L.childLanes,O|=L.subtreeFlags,O|=L.flags,L.return=p,L=L.sibling;return p.subtreeFlags|=O,p.childLanes=M,b}function _t(p,b,M){var O=b.pendingProps;switch($(b),b.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(b),null;case 1:return Pe(b),null;case 3:return M=b.stateNode,O=null,p!==null&&(O=p.memoizedState.cache),b.memoizedState.cache!==O&&(b.flags|=2048),we(ia),Se(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(p===null||p.child===null)&&(ct(b)?Rr(b):p===null||p.memoizedState.isDehydrated&&!(b.flags&256)||(b.flags|=1024,Hc!==null&&(UR(Hc),Hc=null))),zh(p,b),Pe(b),null;case 26:if(Ul){M=b.type;var L=b.memoizedState;return p===null?(Rr(b),L!==null?(Pe(b),ge(b,L)):(Pe(b),ae(b,M,O))):L?L!==p.memoizedState?(Rr(b),Pe(b),ge(b,L)):(Pe(b),b.flags&=-16777217):(Ns?p.memoizedProps!==O&&Rr(b):K(p,b,M,O),Pe(b),ae(b,M,O)),null}case 27:if(Ps){if(xe(b),M=qh.current,L=b.type,p!==null&&b.stateNode!=null)Ns?p.memoizedProps!==O&&Rr(b):K(p,b,L,O);else{if(!O){if(b.stateNode===null)throw Error(r(166));return Pe(b),null}p=as.current,ct(b)?Ge(b,p):(p=S8(L,O,M,p,!0),b.stateNode=p,Rr(b))}return Pe(b),null}case 5:if(xe(b),M=b.type,p!==null&&b.stateNode!=null)K(p,b,M,O);else{if(!O){if(b.stateNode===null)throw Error(r(166));return Pe(b),null}p=as.current,ct(b)?Ge(b,p):(L=Cie(M,O,qh.current,p,b),Af(L,b,!1,!1),b.stateNode=L,t8(L,M,O,p)&&Rr(b))}return Pe(b),ae(b,b.type,b.pendingProps),null;case 6:if(p&&b.stateNode!=null)M=p.memoizedProps,Ns?M!==O&&Rr(b):Wh&&(M!==O?(b.stateNode=n8(O,qh.current,as.current,b),Rr(b)):b.stateNode=p.stateNode);else{if(typeof O!="string"&&b.stateNode===null)throw Error(r(166));if(p=qh.current,M=as.current,ct(b)){if(!Ll)throw Error(r(176));if(p=b.stateNode,M=b.memoizedProps,O=null,L=io,L!==null)switch(L.tag){case 27:case 5:O=L.memoizedProps}vre(p,M,b,O)||Ne(b)}else b.stateNode=n8(O,p,M,b)}return Pe(b),null;case 13:if(O=b.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(L=ct(b),O!==null&&O.dehydrated!==null){if(p===null){if(!L)throw Error(r(318));if(!Ll)throw Error(r(344));if(L=b.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(r(317));xre(L,b)}else At(),!(b.flags&128)&&(b.memoizedState=null),b.flags|=4;Pe(b),L=!1}else Hc!==null&&(UR(Hc),Hc=null),L=!0;if(!L)return b.flags&256?(dn(b),b):(dn(b),null)}if(dn(b),b.flags&128)return b.lanes=M,b;if(M=O!==null,p=p!==null&&p.memoizedState!==null,M){O=b.child,L=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(L=O.alternate.memoizedState.cachePool.pool);var j=null;O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(j=O.memoizedState.cachePool.pool),j!==L&&(O.flags|=2048)}return M!==p&&M&&(b.child.flags|=8192),ve(b,b.updateQueue),Pe(b),null;case 4:return Se(),zh(p,b),p===null&&Die(b.stateNode.containerInfo),Pe(b),null;case 10:return we(b.type),Pe(b),null;case 19:if(g(Oa),L=b.memoizedState,L===null)return Pe(b),null;if(O=(b.flags&128)!==0,j=L.rendering,j===null)if(O)De(L,!1);else{if(aa!==0||p!==null&&p.flags&128)for(p=b.child;p!==null;){if(j=ya(p),j!==null){for(b.flags|=128,De(L,!1),p=j.updateQueue,b.updateQueue=p,ve(b,p),b.subtreeFlags=0,p=M,M=b.child;M!==null;)HF(M,p),M=M.sibling;return x(Oa,Oa.current&1|2),b.child}p=p.sibling}L.tail!==null&&jc()>Vv&&(b.flags|=128,O=!0,De(L,!1),b.lanes=4194304)}else{if(!O)if(p=ya(j),p!==null){if(b.flags|=128,O=!0,p=p.updateQueue,b.updateQueue=p,ve(b,p),De(L,!0),L.tail===null&&L.tailMode==="hidden"&&!j.alternate&&!Pi)return Pe(b),null}else 2*jc()-L.renderingStartTime>Vv&&M!==536870912&&(b.flags|=128,O=!0,De(L,!1),b.lanes=4194304);L.isBackwards?(j.sibling=b.child,b.child=j):(p=L.last,p!==null?p.sibling=j:b.child=j,L.last=j)}return L.tail!==null?(b=L.tail,L.rendering=b,L.tail=b.sibling,L.renderingStartTime=jc(),b.sibling=null,p=Oa.current,x(Oa,O?p&1|2:p&1),b):(Pe(b),null);case 22:case 23:return dn(b),nr(),O=b.memoizedState!==null,p!==null?p.memoizedState!==null!==O&&(b.flags|=8192):O&&(b.flags|=8192),O?M&536870912&&!(b.flags&128)&&(Pe(b),b.subtreeFlags&6&&(b.flags|=8192)):Pe(b),M=b.updateQueue,M!==null&&ve(b,M.retryQueue),M=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(M=p.memoizedState.cachePool.pool),O=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(O=b.memoizedState.cachePool.pool),O!==M&&(b.flags|=2048),p!==null&&g(Np),null;case 24:return M=null,p!==null&&(M=p.memoizedState.cache),b.memoizedState.cache!==M&&(b.flags|=2048),we(ia),Pe(b),null;case 25:return null}throw Error(r(156,b.tag))}function Pt(p,b){switch($(b),b.tag){case 1:return p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 3:return we(ia),Se(),p=b.flags,p&65536&&!(p&128)?(b.flags=p&-65537|128,b):null;case 26:case 27:case 5:return xe(b),null;case 13:if(dn(b),p=b.memoizedState,p!==null&&p.dehydrated!==null){if(b.alternate===null)throw Error(r(340));At()}return p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 19:return g(Oa),null;case 4:return Se(),null;case 10:return we(b.type),null;case 22:case 23:return dn(b),nr(),p!==null&&g(Np),p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 24:return we(ia),null;case 25:return null;default:return null}}function Ht(p,b){switch($(b),b.tag){case 3:we(ia),Se();break;case 26:case 27:case 5:xe(b);break;case 4:Se();break;case 13:dn(b);break;case 19:g(Oa);break;case 10:we(b.type);break;case 22:case 23:dn(b),nr(),p!==null&&g(Np);break;case 24:we(ia)}}function Jt(p,b){try{var M=b.updateQueue,O=M!==null?M.lastEffect:null;if(O!==null){var L=O.next;M=L;do{if((M.tag&p)===p){O=void 0;var j=M.create,le=M.inst;O=j(),le.destroy=O}M=M.next}while(M!==L)}}catch(Ce){ar(b,b.return,Ce)}}function $t(p,b,M){try{var O=b.updateQueue,L=O!==null?O.lastEffect:null;if(L!==null){var j=L.next;O=j;do{if((O.tag&p)===p){var le=O.inst,Ce=le.destroy;if(Ce!==void 0){le.destroy=void 0,L=b;var He=M;try{Ce()}catch(St){ar(L,He,St)}}}O=O.next}while(O!==j)}}catch(St){ar(b,b.return,St)}}function sn(p){var b=p.updateQueue;if(b!==null){var M=p.stateNode;try{Be(b,M)}catch(O){ar(p,p.return,O)}}}function On(p,b,M){M.props=Mi(p.type,p.memoizedProps),M.state=p.memoizedState;try{M.componentWillUnmount()}catch(O){ar(p,b,O)}}function ai(p,b){try{var M=p.ref;if(M!==null){var O=p.stateNode;switch(p.tag){case 26:case 27:case 5:var L=Ov(O);break;default:L=O}typeof M=="function"?p.refCleanup=M(L):M.current=L}}catch(j){ar(p,b,j)}}function Un(p,b){var M=p.ref,O=p.refCleanup;if(M!==null)if(typeof O=="function")try{O()}catch(L){ar(p,b,L)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof M=="function")try{M(null)}catch(L){ar(p,b,L)}else M.current=null}function ti(p){var b=p.type,M=p.memoizedProps,O=p.stateNode;try{Kie(O,b,M,p)}catch(L){ar(p,p.return,L)}}function wn(p,b,M){try{Jie(p.stateNode,p.type,M,b,p)}catch(O){ar(p,p.return,O)}}function pn(p){return p.tag===5||p.tag===3||(Ul?p.tag===26:!1)||(Ps?p.tag===27:!1)||p.tag===4}function ir(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||pn(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!Ps||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function _r(p,b,M){var O=p.tag;if(O===5||O===6)p=p.stateNode,b?Qie(M,p,b):Yie(M,p);else if(!(O===4||Ps&&O===27)&&(p=p.child,p!==null))for(_r(p,b,M),p=p.sibling;p!==null;)_r(p,b,M),p=p.sibling}function Wr(p,b,M){var O=p.tag;if(O===5||O===6)p=p.stateNode,b?Zie(M,p,b):Xie(M,p);else if(!(O===4||Ps&&O===27)&&(p=p.child,p!==null))for(Wr(p,b,M),p=p.sibling;p!==null;)Wr(p,b,M),p=p.sibling}function ji(p,b,M){p=p.containerInfo;try{c8(p,M)}catch(O){ar(b,b.return,O)}}function Br(p,b){for(Tie(p.containerInfo),Ga=b;Ga!==null;)if(p=Ga,b=p.child,(p.subtreeFlags&1028)!==0&&b!==null)b.return=p,Ga=b;else for(;Ga!==null;){p=Ga;var M=p.alternate;switch(b=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if(b&1024&&M!==null){b=void 0;var O=p,L=M.memoizedProps;M=M.memoizedState;var j=O.stateNode;try{var le=Mi(O.type,L,O.elementType===O.type);b=j.getSnapshotBeforeUpdate(le,M),j.__reactInternalSnapshotBeforeUpdate=b}catch(Ce){ar(O,O.return,Ce)}}break;case 3:b&1024&&Ns&&sre(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(b&1024)throw Error(r(163))}if(b=p.sibling,b!==null){b.return=p.return,Ga=b;break}Ga=p.return}return le=D8,D8=!1,le}function Ds(p,b,M){var O=M.flags;switch(M.tag){case 0:case 11:case 15:rs(p,M),O&4&&Jt(5,M);break;case 1:if(rs(p,M),O&4)if(p=M.stateNode,b===null)try{p.componentDidMount()}catch(Ce){ar(M,M.return,Ce)}else{var L=Mi(M.type,b.memoizedProps);b=b.memoizedState;try{p.componentDidUpdate(L,b,p.__reactInternalSnapshotBeforeUpdate)}catch(Ce){ar(M,M.return,Ce)}}O&64&&sn(M),O&512&&ai(M,M.return);break;case 3:if(rs(p,M),O&64&&(O=M.updateQueue,O!==null)){if(p=null,M.child!==null)switch(M.child.tag){case 27:case 5:p=Ov(M.child.stateNode);break;case 1:p=M.child.stateNode}try{Be(O,p)}catch(Ce){ar(M,M.return,Ce)}}break;case 26:if(Ul){rs(p,M),O&512&&ai(M,M.return);break}case 27:case 5:rs(p,M),b===null&&O&4&&ti(M),O&512&&ai(M,M.return);break;case 12:rs(p,M);break;case 13:rs(p,M),O&4&&Yo(p,M);break;case 22:if(L=M.memoizedState!==null||If,!L){b=b!==null&&b.memoizedState!==null||ra;var j=If,le=ra;If=L,(ra=b)&&!le?zc(p,M,(M.subtreeFlags&8772)!==0):rs(p,M),If=j,ra=le}O&512&&(M.memoizedProps.mode==="manual"?ai(M,M.return):Un(M,M.return));break;default:rs(p,M)}}function Ha(p){var b=p.alternate;b!==null&&(p.alternate=null,Ha(b)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(b=p.stateNode,b!==null&&Nie(b)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Fr(p,b,M){for(M=M.child;M!==null;)eo(p,b,M),M=M.sibling}function eo(p,b,M){if(Qo&&typeof Qo.onCommitFiberUnmount=="function")try{Qo.onCommitFiberUnmount(Pv,M)}catch{}switch(M.tag){case 26:if(Ul){ra||Un(M,b),Fr(p,b,M),M.memoizedState?y8(M.memoizedState):M.stateNode&&x8(M.stateNode);break}case 27:if(Ps){ra||Un(M,b);var O=_a,L=tl;_a=M.stateNode,Fr(p,b,M),Pre(M.stateNode),_a=O,tl=L;break}case 5:ra||Un(M,b);case 6:if(Ns){if(O=_a,L=tl,_a=null,Fr(p,b,M),_a=O,tl=L,_a!==null)if(tl)try{tre(_a,M.stateNode)}catch(j){ar(M,b,j)}else try{ere(_a,M.stateNode)}catch(j){ar(M,b,j)}}else Fr(p,b,M);break;case 18:Ns&&_a!==null&&(tl?Mre(_a,M.stateNode):Ere(_a,M.stateNode));break;case 4:Ns?(O=_a,L=tl,_a=M.stateNode.containerInfo,tl=!0,Fr(p,b,M),_a=O,tl=L):(Wh&&ji(M.stateNode,M,o8()),Fr(p,b,M));break;case 0:case 11:case 14:case 15:ra||$t(2,M,b),ra||$t(4,M,b),Fr(p,b,M);break;case 1:ra||(Un(M,b),O=M.stateNode,typeof O.componentWillUnmount=="function"&&On(M,b,O)),Fr(p,b,M);break;case 21:Fr(p,b,M);break;case 22:ra||Un(M,b),ra=(O=ra)||M.memoizedState!==null,Fr(p,b,M),ra=O;break;default:Fr(p,b,M)}}function Yo(p,b){if(Ll&&b.memoizedState===null&&(p=b.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{wre(p)}catch(M){ar(b,b.return,M)}}function to(p){switch(p.tag){case 13:case 19:var b=p.stateNode;return b===null&&(b=p.stateNode=new k8),b;case 22:return p=p.stateNode,b=p._retryCache,b===null&&(b=p._retryCache=new k8),b;default:throw Error(r(435,p.tag))}}function Os(p,b){var M=to(p);b.forEach(function(O){var L=die.bind(null,p,O);M.has(O)||(M.add(O),O.then(L,L))})}function Sr(p,b){var M=b.deletions;if(M!==null)for(var O=0;O<M.length;O++){var L=M[O],j=p,le=b;if(Ns){var Ce=le;e:for(;Ce!==null;){switch(Ce.tag){case 27:case 5:_a=Ce.stateNode,tl=!1;break e;case 3:_a=Ce.stateNode.containerInfo,tl=!0;break e;case 4:_a=Ce.stateNode.containerInfo,tl=!0;break e}Ce=Ce.return}if(_a===null)throw Error(r(160));eo(j,le,L),_a=null,tl=!1}else eo(j,le,L);j=L.alternate,j!==null&&(j.return=null),L.return=null}if(b.subtreeFlags&13878)for(b=b.child;b!==null;)$o(b,p),b=b.sibling}function $o(p,b){var M=p.alternate,O=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Sr(b,p),rr(p),O&4&&($t(3,p,p.return),Jt(3,p),$t(5,p,p.return));break;case 1:Sr(b,p),rr(p),O&512&&(ra||M===null||Un(M,M.return)),O&64&&If&&(p=p.updateQueue,p!==null&&(O=p.callbacks,O!==null&&(M=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=M===null?O:M.concat(O))));break;case 26:if(Ul){var L=Vc;Sr(b,p),rr(p),O&512&&(ra||M===null||Un(M,M.return)),O&4&&(O=M!==null?M.memoizedState:null,b=p.memoizedState,M===null?b===null?p.stateNode===null?p.stateNode=Cre(L,p.type,p.memoizedProps,p):v8(L,p.type,p.stateNode):p.stateNode=b8(L,b,p.memoizedProps):O!==b?(O===null?M.stateNode!==null&&x8(M.stateNode):y8(O),b===null?v8(L,p.type,p.stateNode):b8(L,b,p.memoizedProps)):b===null&&p.stateNode!==null&&wn(p,p.memoizedProps,M.memoizedProps));break}case 27:if(Ps&&O&4&&p.alternate===null){L=p.stateNode;var j=p.memoizedProps;try{Ire(L),Nre(p.type,j,L,p)}catch(Gt){ar(p,p.return,Gt)}}case 5:if(Sr(b,p),rr(p),O&512&&(ra||M===null||Un(M,M.return)),Ns){if(p.flags&32){b=p.stateNode;try{s8(b)}catch(Gt){ar(p,p.return,Gt)}}O&4&&p.stateNode!=null&&(b=p.memoizedProps,wn(p,b,M!==null?M.memoizedProps:b)),O&1024&&(y3=!0)}break;case 6:if(Sr(b,p),rr(p),O&4&&Ns){if(p.stateNode===null)throw Error(r(162));O=p.memoizedProps,M=M!==null?M.memoizedProps:O,b=p.stateNode;try{$ie(b,M,O)}catch(Gt){ar(p,p.return,Gt)}}break;case 3:if(Ul?(kre(),L=Vc,Vc=r3(b.containerInfo),Sr(b,p),Vc=L):Sr(b,p),rr(p),O&4){if(Ns&&Ll&&M!==null&&M.memoizedState.isDehydrated)try{Sre(b.containerInfo)}catch(Gt){ar(p,p.return,Gt)}if(Wh){O=b.containerInfo,M=b.pendingChildren;try{c8(O,M)}catch(Gt){ar(p,p.return,Gt)}}}y3&&(y3=!1,Is(p));break;case 4:Ul?(M=Vc,Vc=r3(p.stateNode.containerInfo),Sr(b,p),rr(p),Vc=M):(Sr(b,p),rr(p)),O&4&&Wh&&ji(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:Sr(b,p),rr(p);break;case 13:Sr(b,p),rr(p),p.child.flags&8192&&p.memoizedState!==null!=(M!==null&&M.memoizedState!==null)&&(S3=jc()),O&4&&(O=p.updateQueue,O!==null&&(p.updateQueue=null,Os(p,O)));break;case 22:O&512&&(ra||M===null||Un(M,M.return)),L=p.memoizedState!==null;var le=M!==null&&M.memoizedState!==null,Ce=If,He=ra;if(If=Ce||L,ra=He||le,Sr(b,p),ra=He,If=Ce,rr(p),b=p.stateNode,b._current=p,b._visibility&=-3,b._visibility|=b._pendingVisibility&2,O&8192&&(b._visibility=L?b._visibility&-2:b._visibility|1,L&&(b=If||ra,M===null||le||b||na(p)),Ns&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){e:if(M=null,Ns)for(b=p;;){if(b.tag===5||Ul&&b.tag===26||Ps&&b.tag===27){if(M===null){le=M=b;try{j=le.stateNode,L?nre(j):rre(le.stateNode,le.memoizedProps)}catch(Gt){ar(le,le.return,Gt)}}}else if(b.tag===6){if(M===null){le=b;try{var St=le.stateNode;L?ire(St):are(St,le.memoizedProps)}catch(Gt){ar(le,le.return,Gt)}}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===p)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break e;for(;b.sibling===null;){if(b.return===null||b.return===p)break e;M===b&&(M=null),b=b.return}M===b&&(M=null),b.sibling.return=b.return,b=b.sibling}}O&4&&(O=p.updateQueue,O!==null&&(M=O.retryQueue,M!==null&&(O.retryQueue=null,Os(p,M))));break;case 19:Sr(b,p),rr(p),O&4&&(O=p.updateQueue,O!==null&&(p.updateQueue=null,Os(p,O)));break;case 21:break;default:Sr(b,p),rr(p)}}function rr(p){var b=p.flags;if(b&2){try{if(Ns&&(!Ps||p.tag!==27)){e:{for(var M=p.return;M!==null;){if(pn(M)){var O=M;break e}M=M.return}throw Error(r(160))}switch(O.tag){case 27:if(Ps){var L=O.stateNode,j=ir(p);Wr(p,j,L);break}case 5:var le=O.stateNode;O.flags&32&&(s8(le),O.flags&=-33);var Ce=ir(p);Wr(p,Ce,le);break;case 3:case 4:var He=O.stateNode.containerInfo,St=ir(p);_r(p,St,He);break;default:throw Error(r(161))}}}catch(Gt){ar(p,p.return,Gt)}p.flags&=-3}b&4096&&(p.flags&=-4097)}function Is(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var b=p;Is(b),b.tag===5&&b.flags&1024&&Bie(b.stateNode),p=p.sibling}}function rs(p,b){if(b.subtreeFlags&8772)for(b=b.child;b!==null;)Ds(p,b.alternate,b),b=b.sibling}function na(p){for(p=p.child;p!==null;){var b=p;switch(b.tag){case 0:case 11:case 14:case 15:$t(4,b,b.return),na(b);break;case 1:Un(b,b.return);var M=b.stateNode;typeof M.componentWillUnmount=="function"&&On(b,b.return,M),na(b);break;case 26:case 27:case 5:Un(b,b.return),na(b);break;case 22:Un(b,b.return),b.memoizedState===null&&na(b);break;default:na(b)}p=p.sibling}}function zc(p,b,M){for(M=M&&(b.subtreeFlags&8772)!==0,b=b.child;b!==null;){var O=b.alternate,L=p,j=b,le=j.flags;switch(j.tag){case 0:case 11:case 15:zc(L,j,M),Jt(4,j);break;case 1:if(zc(L,j,M),O=j,L=O.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(St){ar(O,O.return,St)}if(O=j,L=O.updateQueue,L!==null){var Ce=O.stateNode;try{var He=L.shared.hiddenCallbacks;if(He!==null)for(L.shared.hiddenCallbacks=null,L=0;L<He.length;L++)Re(He[L],Ce)}catch(St){ar(O,O.return,St)}}M&&le&64&&sn(j),ai(j,j.return);break;case 26:case 27:case 5:zc(L,j,M),M&&O===null&&le&4&&ti(j),ai(j,j.return);break;case 12:zc(L,j,M);break;case 13:zc(L,j,M),M&&le&4&&Yo(L,j);break;case 22:j.memoizedState===null&&zc(L,j,M),ai(j,j.return);break;default:zc(L,j,M)}b=b.sibling}}function DR(p,b){var M=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(M=p.memoizedState.cachePool.pool),p=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(p=b.memoizedState.cachePool.pool),p!==M&&(p!=null&&p.refCount++,M!=null&&Rn(M))}function OR(p,b){p=null,b.alternate!==null&&(p=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==p&&(b.refCount++,p!=null&&Rn(p))}function jh(p,b,M,O){if(b.subtreeFlags&10256)for(b=b.child;b!==null;)_F(p,b,M,O),b=b.sibling}function _F(p,b,M,O){var L=b.flags;switch(b.tag){case 0:case 11:case 15:jh(p,b,M,O),L&2048&&Jt(9,b);break;case 3:jh(p,b,M,O),L&2048&&(p=null,b.alternate!==null&&(p=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==p&&(b.refCount++,p!=null&&Rn(p)));break;case 12:if(L&2048){jh(p,b,M,O),p=b.stateNode;try{var j=b.memoizedProps,le=j.id,Ce=j.onPostCommit;typeof Ce=="function"&&Ce(le,b.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(He){ar(b,b.return,He)}}else jh(p,b,M,O);break;case 23:break;case 22:j=b.stateNode,b.memoizedState!==null?j._visibility&4?jh(p,b,M,O):kv(p,b):j._visibility&4?jh(p,b,M,O):(j._visibility|=4,Ug(p,b,M,O,(b.subtreeFlags&10256)!==0)),L&2048&&DR(b.alternate,b);break;case 24:jh(p,b,M,O),L&2048&&OR(b.alternate,b);break;default:jh(p,b,M,O)}}function Ug(p,b,M,O,L){for(L=L&&(b.subtreeFlags&10256)!==0,b=b.child;b!==null;){var j=p,le=b,Ce=M,He=O,St=le.flags;switch(le.tag){case 0:case 11:case 15:Ug(j,le,Ce,He,L),Jt(8,le);break;case 23:break;case 22:var Gt=le.stateNode;le.memoizedState!==null?Gt._visibility&4?Ug(j,le,Ce,He,L):kv(j,le):(Gt._visibility|=4,Ug(j,le,Ce,He,L)),L&&St&2048&&DR(le.alternate,le);break;case 24:Ug(j,le,Ce,He,L),L&&St&2048&&OR(le.alternate,le);break;default:Ug(j,le,Ce,He,L)}b=b.sibling}}function kv(p,b){if(b.subtreeFlags&10256)for(b=b.child;b!==null;){var M=p,O=b,L=O.flags;switch(O.tag){case 22:kv(M,O),L&2048&&DR(O.alternate,O);break;case 24:kv(M,O),L&2048&&OR(O.alternate,O);break;default:kv(M,O)}b=b.sibling}}function wp(p){if(p.subtreeFlags&ib)for(p=p.child;p!==null;)SF(p),p=p.sibling}function SF(p){switch(p.tag){case 26:wp(p),p.flags&ib&&(p.memoizedState!==null?Ore(Vc,p.memoizedState,p.memoizedProps):a8(p.type,p.memoizedProps));break;case 5:wp(p),p.flags&ib&&a8(p.type,p.memoizedProps);break;case 3:case 4:if(Ul){var b=Vc;Vc=r3(p.stateNode.containerInfo),wp(p),Vc=b}else wp(p);break;case 22:p.memoizedState===null&&(b=p.alternate,b!==null&&b.memoizedState!==null?(b=ib,ib=16777216,wp(p),ib=b):wp(p));break;default:wp(p)}}function wF(p){var b=p.alternate;if(b!==null&&(p=b.child,p!==null)){b.child=null;do b=p.sibling,p.sibling=null,p=b;while(p!==null)}}function Dv(p){var b=p.deletions;if(p.flags&16){if(b!==null)for(var M=0;M<b.length;M++){var O=b[M];Ga=O,MF(O,p)}wF(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)EF(p),p=p.sibling}function EF(p){switch(p.tag){case 0:case 11:case 15:Dv(p),p.flags&2048&&$t(9,p,p.return);break;case 3:Dv(p);break;case 12:Dv(p);break;case 22:var b=p.stateNode;p.memoizedState!==null&&b._visibility&4&&(p.return===null||p.return.tag!==13)?(b._visibility&=-5,NS(p)):Dv(p);break;default:Dv(p)}}function NS(p){var b=p.deletions;if(p.flags&16){if(b!==null)for(var M=0;M<b.length;M++){var O=b[M];Ga=O,MF(O,p)}wF(p)}for(p=p.child;p!==null;){switch(b=p,b.tag){case 0:case 11:case 15:$t(8,b,b.return),NS(b);break;case 22:M=b.stateNode,M._visibility&4&&(M._visibility&=-5,NS(b));break;default:NS(b)}p=p.sibling}}function MF(p,b){for(;Ga!==null;){var M=Ga;switch(M.tag){case 0:case 11:case 15:$t(8,M,b);break;case 23:case 22:if(M.memoizedState!==null&&M.memoizedState.cachePool!==null){var O=M.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:Rn(M.memoizedState.cache)}if(O=M.child,O!==null)O.return=M,Ga=O;else e:for(M=p;Ga!==null;){O=Ga;var L=O.sibling,j=O.return;if(Ha(O),O===M){Ga=null;break e}if(L!==null){L.return=j,Ga=L;break e}Ga=j}}}function IR(p){var b=i8(p);if(b!=null){if(typeof b.memoizedProps["data-testname"]!="string")throw Error(r(364));return b}if(p=jie(p),p===null)throw Error(r(362));return p.stateNode.current}function NR(p,b){var M=p.tag;switch(b.$$typeof){case QS:if(p.type===b.value)return!0;break;case ew:e:{for(b=b.value,p=[p,0],M=0;M<p.length;){var O=p[M++],L=O.tag,j=p[M++],le=b[j];if(L!==5&&L!==26&&L!==27||!Nv(O)){for(;le!=null&&NR(O,le);)j++,le=b[j];if(j===b.length){b=!0;break e}else for(O=O.child;O!==null;)p.push(O,j),O=O.sibling}}b=!1}return b;case tw:if((M===5||M===26||M===27)&&Gie(p.stateNode,b.value))return!0;break;case iw:if((M===5||M===6||M===26||M===27)&&(p=Vie(p),p!==null&&0<=p.indexOf(b.value)))return!0;break;case nw:if((M===5||M===26||M===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===b.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function PR(p){switch(p.$$typeof){case QS:return"<"+(s(p.value)||"Unknown")+">";case ew:return":has("+(PR(p)||"")+")";case tw:return'[role="'+p.value+'"]';case iw:return'"'+p.value+'"';case nw:return'[data-testname="'+p.value+'"]';default:throw Error(r(365))}}function TF(p,b){var M=[];p=[p,0];for(var O=0;O<p.length;){var L=p[O++],j=L.tag,le=p[O++],Ce=b[le];if(j!==5&&j!==26&&j!==27||!Nv(L)){for(;Ce!=null&&NR(L,Ce);)le++,Ce=b[le];if(le===b.length)M.push(L);else for(L=L.child;L!==null;)p.push(L,le),L=L.sibling}}return M}function LR(p,b){if(!Iv)throw Error(r(363));p=IR(p),p=TF(p,b),b=[],p=Array.from(p);for(var M=0;M<p.length;){var O=p[M++],L=O.tag;if(L===5||L===26||L===27)Nv(O)||b.push(O.stateNode);else for(O=O.child;O!==null;)p.push(O),O=O.sibling}return b}function Ko(){if(fr&2&&Ri!==0)return Ri&-Ri;if(Fn.T!==null){var p=Kg;return p!==0?p:be()}return Oie()}function AF(){Hl===0&&(Hl=!(Ri&536870912)||Pi?C():536870912);var p=jl.current;return p!==null&&(p.flags|=32),Hl}function no(p,b,M){(p===wr&&Er===2||p.cancelPendingCommit!==null)&&(Bg(p,0),Cf(p,Ri,Hl,!1)),P(p,M),(!(fr&2)||p!==wr)&&(p===wr&&(!(fr&2)&&(Pp|=M),aa===4&&Cf(p,Ri,Hl,!1)),We(p))}function CF(p,b,M){if(fr&6)throw Error(r(327));var O=!M&&(b&60)===0&&(b&p.expiredLanes)===0||w(p,b),L=O?lie(p,b):zR(p,b,!0),j=O;do{if(L===0){rb&&!O&&Cf(p,b,0,!1);break}else if(L===6)Cf(p,b,0,!Nf);else{if(M=p.current.alternate,j&&!sie(M)){L=zR(p,b,!1),j=!1;continue}if(L===2){if(j=b,p.errorRecoveryDisabledLanes&j)var le=0;else le=p.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){b=le;e:{var Ce=p;L=Hv;var He=Ll&&Ce.current.memoizedState.isDehydrated;if(He&&(Bg(Ce,le).flags|=256),le=zR(Ce,le,!1),le!==2){if(v3&&!He){Ce.errorRecoveryDisabledLanes|=j,Pp|=j,L=4;break e}j=Pu,Pu=L,j!==null&&UR(j)}L=le}if(j=!1,L!==2)continue}}if(L===1){Bg(p,0),Cf(p,b,0,!0);break}e:{switch(O=p,L){case 0:case 1:throw Error(r(345));case 4:if((b&4194176)===b){Cf(O,b,Hl,!Nf);break e}break;case 2:Pu=null;break;case 3:case 5:break;default:throw Error(r(329))}if(O.finishedWork=M,O.finishedLanes=b,(b&62914560)===b&&(j=S3+300-jc(),10<j)){if(Cf(O,b,Hl,!Nf),T(O,0)!==0)break e;O.timeoutHandle=Rie(RF.bind(null,O,M,Pu,rw,_3,b,Hl,Pp,ab,Nf,2,-0,0),j);break e}RF(O,M,Pu,rw,_3,b,Hl,Pp,ab,Nf,0,-0,0)}}break}while(!0);We(p)}function UR(p){Pu===null?Pu=p:Pu.push.apply(Pu,p)}function RF(p,b,M,O,L,j,le,Ce,He,St,Gt,tn,an){var Yn=b.subtreeFlags;if((Yn&8192||(Yn&16785408)===16785408)&&(Lie(),SF(b),b=Uie(),b!==null)){p.cancelPendingCommit=b(BF.bind(null,p,M,O,L,le,Ce,He,1,tn,an)),Cf(p,j,le,!St);return}BF(p,M,O,L,le,Ce,He,Gt,tn,an)}function sie(p){for(var b=p;;){var M=b.tag;if((M===0||M===11||M===15)&&b.flags&16384&&(M=b.updateQueue,M!==null&&(M=M.stores,M!==null)))for(var O=0;O<M.length;O++){var L=M[O],j=L.getSnapshot;L=L.value;try{if(!el(j(),L))return!1}catch{return!1}}if(M=b.child,b.subtreeFlags&16384&&M!==null)M.return=b,b=M;else{if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function Cf(p,b,M,O){b&=~x3,b&=~Pp,p.suspendedLanes|=b,p.pingedLanes&=~b,O&&(p.warmLanes|=b),O=p.expirationTimes;for(var L=b;0<L;){var j=31-Zo(L),le=1<<j;O[j]=-1,L&=~le}M!==0&&H(p,M,b)}function kF(){return fr&6?!0:(Et(0),!1)}function BR(){if(pi!==null){if(Er===0)var p=pi.return;else p=pi,Of=Ip=null,Q(p),Qg=null,Fv=0,p=pi;for(;p!==null;)Ht(p.alternate,p),p=p.return;pi=null}}function Bg(p,b){p.finishedWork=null,p.finishedLanes=0;var M=p.timeoutHandle;M!==t3&&(p.timeoutHandle=t3,kie(M)),M=p.cancelPendingCommit,M!==null&&(p.cancelPendingCommit=null,M()),BR(),wr=p,pi=M=Hh(p.current,null),Ri=b,Er=0,nl=null,Nf=!1,rb=w(p,b),v3=!1,ab=Hl=x3=Pp=Kh=aa=0,Pu=Hv=null,_3=!1,b&8&&(b|=b&32);var O=p.entangledLanes;if(O!==0)for(p=p.entanglements,O&=b;0<O;){var L=31-Zo(O),j=1<<L;b|=p[L],O&=~j}return Pf=b,Ve(),M}function DF(p,b){si=null,Fn.H=Nu,b===Bv?(b=Mt(),Er=3):b===p3?(b=Mt(),Er=4):Er=b===C8?8:b!==null&&typeof b=="object"&&typeof b.then=="function"?6:1,nl=b,pi===null&&(aa=1,Go(p,X(b,p.current)))}function OF(){var p=jl.current;return p===null?!0:(Ri&4194176)===Ri?Iu===null:(Ri&62914560)===Ri||Ri&536870912?p===Iu:!1}function IF(){var p=Fn.H;return Fn.H=Nu,p===null?Nu:p}function NF(){var p=Fn.A;return Fn.A=$re,p}function FR(){aa=4,Nf||(Ri&4194176)!==Ri&&jl.current!==null||(rb=!0),!(Kh&134217727)&&!(Pp&134217727)||wr===null||Cf(wr,Ri,Hl,!1)}function zR(p,b,M){var O=fr;fr|=2;var L=IF(),j=NF();(wr!==p||Ri!==b)&&(rw=null,Bg(p,b)),b=!1;var le=aa;e:do try{if(Er!==0&&pi!==null){var Ce=pi,He=nl;switch(Er){case 8:BR(),le=6;break e;case 3:case 2:case 6:jl.current===null&&(b=!0);var St=Er;if(Er=0,nl=null,Fg(p,Ce,He,St),M&&rb){le=0;break e}break;default:St=Er,Er=0,nl=null,Fg(p,Ce,He,St)}}oie(),le=aa;break}catch(Gt){DF(p,Gt)}while(!0);return b&&p.shellSuspendCounter++,Of=Ip=null,fr=O,Fn.H=L,Fn.A=j,pi===null&&(wr=null,Ri=0,Ve()),le}function oie(){for(;pi!==null;)PF(pi)}function lie(p,b){var M=fr;fr|=2;var O=IF(),L=NF();wr!==p||Ri!==b?(rw=null,Vv=jc()+500,Bg(p,b)):rb=w(p,b);e:do try{if(Er!==0&&pi!==null){b=pi;var j=nl;t:switch(Er){case 1:Er=0,nl=null,Fg(p,b,j,1);break;case 2:if(Wt(j)){Er=0,nl=null,LF(b);break}b=function(){Er===2&&wr===p&&(Er=7),We(p)},j.then(b,b);break e;case 3:Er=7;break e;case 4:Er=5;break e;case 7:Wt(j)?(Er=0,nl=null,LF(b)):(Er=0,nl=null,Fg(p,b,j,7));break;case 5:var le=null;switch(pi.tag){case 26:le=pi.memoizedState;case 5:case 27:var Ce=pi,He=Ce.type,St=Ce.pendingProps;if(le?_8(le):r8(He,St)){Er=0,nl=null;var Gt=Ce.sibling;if(Gt!==null)pi=Gt;else{var tn=Ce.return;tn!==null?(pi=tn,PS(tn)):pi=null}break t}}Er=0,nl=null,Fg(p,b,j,5);break;case 6:Er=0,nl=null,Fg(p,b,j,6);break;case 8:BR(),aa=6;break e;default:throw Error(r(462))}}cie();break}catch(an){DF(p,an)}while(!0);return Of=Ip=null,Fn.H=O,Fn.A=L,fr=M,pi!==null?0:(wr=null,Ri=0,Ve(),aa)}function cie(){for(;pi!==null&&!Bre();)PF(pi)}function PF(p){var b=ee(p.alternate,p,Pf);p.memoizedProps=p.pendingProps,b===null?PS(p):pi=b}function LF(p){var b=p,M=b.alternate;switch(b.tag){case 15:case 0:b=Ks(M,b,b.pendingProps,b.type,void 0,Ri);break;case 11:b=Ks(M,b,b.pendingProps,b.type.render,b.ref,Ri);break;case 5:Q(b);default:Ht(M,b),b=pi=HF(b,Pf),b=ee(M,b,Pf)}p.memoizedProps=p.pendingProps,b===null?PS(p):pi=b}function Fg(p,b,M,O){Of=Ip=null,Q(b),Qg=null,Fv=0;var L=b.return;try{if(Rv(p,L,b,M,Ri)){aa=1,Go(p,X(M,p.current)),pi=null;return}}catch(j){if(L!==null)throw pi=L,j;aa=1,Go(p,X(M,p.current)),pi=null;return}b.flags&32768?(Pi||O===1?p=!0:rb||Ri&536870912?p=!1:(Nf=p=!0,(O===2||O===3||O===6)&&(O=jl.current,O!==null&&O.tag===13&&(O.flags|=16384))),UF(b,p)):PS(b)}function PS(p){var b=p;do{if(b.flags&32768){UF(b,Nf);return}p=b.return;var M=_t(b.alternate,b,Pf);if(M!==null){pi=M;return}if(b=b.sibling,b!==null){pi=b;return}pi=b=p}while(b!==null);aa===0&&(aa=5)}function UF(p,b){do{var M=Pt(p.alternate,p);if(M!==null){M.flags&=32767,pi=M;return}if(M=p.return,M!==null&&(M.flags|=32768,M.subtreeFlags=0,M.deletions=null),!b&&(p=p.sibling,p!==null)){pi=p;return}pi=p=M}while(p!==null);aa=6,pi=null}function BF(p,b,M,O,L,j,le,Ce,He,St){var Gt=Fn.T,tn=Tp();try{Eo(2),Fn.T=null,uie(p,b,M,O,tn,L,j,le,Ce,He,St)}finally{Fn.T=Gt,Eo(tn)}}function uie(p,b,M,O,L,j,le,Ce){do Ep();while(Lp!==null);if(fr&6)throw Error(r(327));var He=p.finishedWork;if(O=p.finishedLanes,He===null)return null;if(p.finishedWork=null,p.finishedLanes=0,He===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var St=He.lanes|He.childLanes;if(St|=c3,B(p,O,St,j,le,Ce),p===wr&&(pi=wr=null,Ri=0),!(He.subtreeFlags&10256)&&!(He.flags&10256)||aw||(aw=!0,w3=St,E3=M,pie(o3,function(){return Ep(),null})),M=(He.flags&15990)!==0,He.subtreeFlags&15990||M?(M=Fn.T,Fn.T=null,j=Tp(),Eo(2),le=fr,fr|=4,Br(p,He),$o(He,p),Aie(p.containerInfo),p.current=He,Ds(p,He.alternate,He),Fre(),fr=le,Eo(j),Fn.T=M):p.current=He,aw?(aw=!1,Lp=p,Gv=O):FF(p,St),St=p.pendingLanes,St===0&&(Jh=null),U(He.stateNode),We(p),b!==null)for(L=p.onRecoverableError,He=0;He<b.length;He++)St=b[He],L(St.value,{componentStack:St.stack});return Gv&3&&Ep(),St=p.pendingLanes,O&4194218&&St&42?p===M3?Wv++:(Wv=0,M3=p):Wv=0,Et(0),null}function FF(p,b){(p.pooledCacheLanes&=b)===0&&(b=p.pooledCache,b!=null&&(p.pooledCache=null,Rn(b)))}function Ep(){if(Lp!==null){var p=Lp,b=w3;w3=0;var M=V(Gv),O=32>M?32:M;M=Fn.T;var L=Tp();try{if(Eo(O),Fn.T=null,Lp===null)var j=!1;else{O=E3,E3=null;var le=Lp,Ce=Gv;if(Lp=null,Gv=0,fr&6)throw Error(r(331));var He=fr;if(fr|=4,EF(le.current),_F(le,le.current,Ce,O),fr=He,Et(0,!1),Qo&&typeof Qo.onPostCommitFiberRoot=="function")try{Qo.onPostCommitFiberRoot(Pv,le)}catch{}j=!0}return j}finally{Eo(L),Fn.T=M,FF(p,b)}}return!1}function zF(p,b,M){b=X(M,b),b=yp(p.stateNode,b,2),p=Je(p,b,2),p!==null&&(P(p,2),We(p))}function ar(p,b,M){if(p.tag===3)zF(p,p,M);else for(;b!==null;){if(b.tag===3){zF(b,p,M);break}else if(b.tag===1){var O=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(Jh===null||!Jh.has(O))){p=X(M,p),M=$s(2),O=Je(b,M,2),O!==null&&(Rs(M,O,b,p),P(O,2),We(O));break}}b=b.return}}function jR(p,b,M){var O=p.pingCache;if(O===null){O=p.pingCache=new Kre;var L=new Set;O.set(b,L)}else L=O.get(b),L===void 0&&(L=new Set,O.set(b,L));L.has(M)||(v3=!0,L.add(M),p=fie.bind(null,p,b,M),b.then(p,p))}function fie(p,b,M){var O=p.pingCache;O!==null&&O.delete(b),p.pingedLanes|=p.suspendedLanes&M,p.warmLanes&=~M,wr===p&&(Ri&M)===M&&(aa===4||aa===3&&(Ri&62914560)===Ri&&300>jc()-S3?!(fr&2)&&Bg(p,0):x3|=M,ab===Ri&&(ab=0)),We(p)}function jF(p,b){b===0&&(b=D()),p=Te(p,b),p!==null&&(P(p,b),We(p))}function hie(p){var b=p.memoizedState,M=0;b!==null&&(M=b.retryLane),jF(p,M)}function die(p,b){var M=0;switch(p.tag){case 13:var O=p.stateNode,L=p.memoizedState;L!==null&&(M=L.retryLane);break;case 19:O=p.stateNode;break;case 22:O=p.stateNode._retryCache;break;default:throw Error(r(314))}O!==null&&O.delete(b),jF(p,M)}function pie(p,b){return HS(p,b)}function mie(p,b,M,O){this.tag=p,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function HR(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Hh(p,b){var M=p.alternate;return M===null?(M=n(p.tag,b,p.key,p.mode),M.elementType=p.elementType,M.type=p.type,M.stateNode=p.stateNode,M.alternate=p,p.alternate=M):(M.pendingProps=b,M.type=p.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=p.flags&31457280,M.childLanes=p.childLanes,M.lanes=p.lanes,M.child=p.child,M.memoizedProps=p.memoizedProps,M.memoizedState=p.memoizedState,M.updateQueue=p.updateQueue,b=p.dependencies,M.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},M.sibling=p.sibling,M.index=p.index,M.ref=p.ref,M.refCleanup=p.refCleanup,M}function HF(p,b){p.flags&=31457282;var M=p.alternate;return M===null?(p.childLanes=0,p.lanes=b,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=M.childLanes,p.lanes=M.lanes,p.child=M.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=M.memoizedProps,p.memoizedState=M.memoizedState,p.updateQueue=M.updateQueue,p.type=M.type,b=M.dependencies,p.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),p}function LS(p,b,M,O,L,j){var le=0;if(O=p,typeof p=="function")HR(p)&&(le=1);else if(typeof p=="string")le=Ul&&Ps?m8(p,M,as.current)?26:w8(p)?27:5:Ul?m8(p,M,as.current)?26:5:Ps&&w8(p)?27:5;else e:switch(p){case jg:return Mp(M.children,L,j,b);case $F:le=8,L|=24;break;case XR:return p=n(12,M,b,L|2),p.elementType=XR,p.lanes=j,p;case $R:return p=n(13,M,b,L),p.elementType=$R,p.lanes=j,p;case KR:return p=n(19,M,b,L),p.elementType=KR,p.lanes=j,p;case JF:return VF(M,L,j,b);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case vie:case Vh:le=10;break e;case KF:le=9;break e;case YR:le=11;break e;case JR:le=14;break e;case Gh:le=16,O=null;break e}le=29,M=Error(r(130,p===null?"null":typeof p,"")),O=null}return b=n(le,M,b,L),b.elementType=p,b.type=O,b.lanes=j,b}function Mp(p,b,M,O){return p=n(7,p,O,b),p.lanes=M,p}function VF(p,b,M,O){p=n(22,p,O,b),p.elementType=JF,p.lanes=M;var L={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var j=L._current;if(j===null)throw Error(r(456));if(!(L._pendingVisibility&2)){var le=Te(j,2);le!==null&&(L._pendingVisibility|=2,no(le,j,2))}},attach:function(){var j=L._current;if(j===null)throw Error(r(456));if(L._pendingVisibility&2){var le=Te(j,2);le!==null&&(L._pendingVisibility&=-3,no(le,j,2))}}};return p.stateNode=L,p}function VR(p,b,M){return p=n(6,p,null,b),p.lanes=M,p}function GR(p,b,M){return b=n(4,p.children!==null?p.children:[],p.key,b),b.lanes=M,b.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},b}function gie(p,b,M,O,L,j,le,Ce){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=t3,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=k(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k(0),this.hiddenUpdates=k(null),this.identifierPrefix=O,this.onUncaughtError=L,this.onCaughtError=j,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ce,this.incompleteTransitions=new Map}function GF(p,b,M,O,L,j,le,Ce,He,St,Gt,tn){return p=new gie(p,b,M,le,Ce,He,St,tn),b=1,j===!0&&(b|=24),j=n(3,null,null,b),p.current=j,j.stateNode=p,b=jn(),b.refCount++,p.pooledCache=b,b.refCount++,j.memoizedState={element:O,isDehydrated:M,cache:b},mt(j),p}function WF(p){return p?(p=Gg,p):Gg}function qF(p){var b=p._reactInternals;if(b===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=d(b),p=p!==null?m(p):null,p===null?null:Ov(p.stateNode)}function XF(p,b,M,O,L,j){L=WF(L),O.context===null?O.context=L:O.pendingContext=L,O=rt(b),O.payload={element:M},j=j===void 0?null:j,j!==null&&(O.callback=j),M=Je(p,O,b),M!==null&&(no(M,p,b),Xt(M,p,b))}function YF(p,b){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var M=p.retryLane;p.retryLane=M!==0&&M<b?M:b}}function WR(p,b){YF(p,b),(p=p.alternate)&&YF(p,b)}var di={},bie=I,Jo=jN,qR=Object.assign,yie=Symbol.for("react.element"),US=Symbol.for("react.transitional.element"),zg=Symbol.for("react.portal"),jg=Symbol.for("react.fragment"),$F=Symbol.for("react.strict_mode"),XR=Symbol.for("react.profiler"),vie=Symbol.for("react.provider"),KF=Symbol.for("react.consumer"),Vh=Symbol.for("react.context"),YR=Symbol.for("react.forward_ref"),$R=Symbol.for("react.suspense"),KR=Symbol.for("react.suspense_list"),JR=Symbol.for("react.memo"),Gh=Symbol.for("react.lazy"),JF=Symbol.for("react.offscreen"),xie=Symbol.for("react.memo_cache_sentinel"),ZF=Symbol.iterator,_ie=Symbol.for("react.client.reference"),Fn=bie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ZR,QF,QR=!1,BS=Array.isArray,Sie=e.rendererVersion,wie=e.rendererPackageName,e8=e.extraDevToolsConfig,Ov=e.getPublicInstance,Eie=e.getRootHostContext,Mie=e.getChildHostContext,Tie=e.prepareForCommit,Aie=e.resetAfterCommit,Cie=e.createInstance,e3=e.appendInitialChild,t8=e.finalizeInitialChildren,FS=e.shouldSetTextContent,n8=e.createTextInstance,Rie=e.scheduleTimeout,kie=e.cancelTimeout,t3=e.noTimeout,Rf=e.isPrimaryRenderer;e.warnsIfNotActing;var Ns=e.supportsMutation,Wh=e.supportsPersistence,Ll=e.supportsHydration,i8=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Die=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Eo=e.setCurrentUpdatePriority,Tp=e.getCurrentUpdatePriority,Oie=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Iie=e.shouldAttemptEagerTransition,Nie=e.detachDeletedInstance;e.requestPostPaintCallback;var Pie=e.maySuspendCommit,r8=e.preloadInstance,Lie=e.startSuspendingCommit,a8=e.suspendInstance,Uie=e.waitForCommitToBeReady,Hg=e.NotPendingTransition,Ap=e.HostTransitionContext,Bie=e.resetFormInstance;e.bindToConsole;var Fie=e.supportsMicrotasks,zie=e.scheduleMicrotask,Iv=e.supportsTestSelectors,jie=e.findFiberRoot,Hie=e.getBoundingRect,Vie=e.getTextContent,Nv=e.isHiddenSubtree,Gie=e.matchAccessibilityRole,Wie=e.setFocusIfFocusable,qie=e.setupIntersectionObserver,Xie=e.appendChild,Yie=e.appendChildToContainer,$ie=e.commitTextUpdate,Kie=e.commitMount,Jie=e.commitUpdate,Zie=e.insertBefore,Qie=e.insertInContainerBefore,ere=e.removeChild,tre=e.removeChildFromContainer,s8=e.resetTextContent,nre=e.hideInstance,ire=e.hideTextInstance,rre=e.unhideInstance,are=e.unhideTextInstance,sre=e.clearContainer,ore=e.cloneInstance,o8=e.createContainerChildSet,l8=e.appendChildToContainerChildSet,lre=e.finalizeContainerChildren,c8=e.replaceContainerChildren,u8=e.cloneHiddenInstance,f8=e.cloneHiddenTextInstance,n3=e.isSuspenseInstancePending,i3=e.isSuspenseInstanceFallback,cre=e.getSuspenseInstanceFallbackErrorDetails,ure=e.registerSuspenseInstanceRetry,fre=e.canHydrateFormStateMarker,hre=e.isFormStateMarkerMatching,h8=e.getNextHydratableSibling,d8=e.getFirstHydratableChild,dre=e.getFirstHydratableChildWithinContainer,pre=e.getFirstHydratableChildWithinSuspenseInstance,mre=e.canHydrateInstance,gre=e.canHydrateTextInstance,bre=e.canHydrateSuspenseInstance,yre=e.hydrateInstance,vre=e.hydrateTextInstance,xre=e.hydrateSuspenseInstance,_re=e.getNextHydratableInstanceAfterSuspenseInstance,Sre=e.commitHydratedContainer,wre=e.commitHydratedSuspenseInstance,Ere=e.clearSuspenseBoundary,Mre=e.clearSuspenseBoundaryFromContainer,p8=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Tre=e.validateHydratableInstance,Are=e.validateHydratableTextInstance,Ul=e.supportsResources,m8=e.isHostHoistableType,r3=e.getHoistableRoot,g8=e.getResource,b8=e.acquireResource,y8=e.releaseResource,Cre=e.hydrateHoistable,v8=e.mountHoistable,x8=e.unmountHoistable,Rre=e.createHoistableInstance,kre=e.prepareToCommitHoistables,Dre=e.mayResourceSuspendCommit,_8=e.preloadResource,Ore=e.suspendResource,Ps=e.supportsSingletons,S8=e.resolveSingletonInstance,Ire=e.clearSingleton,Nre=e.acquireSingletonInstance,Pre=e.releaseSingletonInstance,w8=e.isHostSingletonType,a3=[],Vg=-1,Gg={},Zo=Math.clz32?Math.clz32:_,Lre=Math.log,Ure=Math.LN2,zS=128,jS=4194304,HS=Jo.unstable_scheduleCallback,s3=Jo.unstable_cancelCallback,Bre=Jo.unstable_shouldYield,Fre=Jo.unstable_requestPaint,jc=Jo.unstable_now,E8=Jo.unstable_ImmediatePriority,zre=Jo.unstable_UserBlockingPriority,o3=Jo.unstable_NormalPriority,jre=Jo.unstable_IdlePriority,Hre=Jo.log,Vre=Jo.unstable_setDisableYieldValue,Pv=null,Qo=null,el=typeof Object.is=="function"?Object.is:q,M8=new WeakMap,Wg=[],qg=0,VS=null,GS=0,Bl=[],Fl=0,Cp=null,kf=1,Df="",as=v(null),Lv=v(null),qh=v(null),WS=v(null),io=null,Ls=null,Pi=!1,Hc=null,Ou=!1,l3=Error(r(519)),zl=[],Xg=0,c3=0,qS=null,Yg=null,u3=!1,XS=!1,f3=!1,$g=0,Uv=null,h3=0,Kg=0,Jg=null,Xh=!1,d3=!1,Gre=Object.prototype.hasOwnProperty,Bv=Error(r(460)),p3=Error(r(474)),YS={then:function(){}},Zg=null,Qg=null,Fv=0,Rp=Gn(!0),T8=Gn(!1),eb=v(null),$S=v(0),jl=v(null),Iu=null,Oa=v(0),Yh=0,si=null,ur=null,xa=null,KS=!1,tb=!1,kp=!1,JS=0,zv=0,nb=null,Wre=0,m3=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Nu={readContext:Lt,use:ye,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii};Nu.useCacheRefresh=Ii,Nu.useMemoCache=Ii,Nu.useHostTransitionStatus=Ii,Nu.useFormState=Ii,Nu.useActionState=Ii,Nu.useOptimistic=Ii;var Dp={readContext:Lt,use:ye,useCallback:function(p,b){return me().memoizedState=[p,b===void 0?null:b],p},useContext:Lt,useEffect:Ho,useImperativeHandle:function(p,b,M){M=M!=null?M.concat([p]):null,jo(4194308,4,Uc.bind(null,b,p),M)},useLayoutEffect:function(p,b){return jo(4194308,4,p,b)},useInsertionEffect:function(p,b){jo(4,2,p,b)},useMemo:function(p,b){var M=me();b=b===void 0?null:b;var O=p();if(kp){F(!0);try{p()}finally{F(!1)}}return M.memoizedState=[O,b],O},useReducer:function(p,b,M){var O=me();if(M!==void 0){var L=M(b);if(kp){F(!0);try{M(b)}finally{F(!1)}}}else L=b;return O.memoizedState=O.baseState=L,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:L},O.queue=p,p=p.dispatch=Bt.bind(null,si,p),[O.memoizedState,p]},useRef:function(p){var b=me();return p={current:p},b.memoizedState=p},useState:function(p){p=Kt(p);var b=p.queue,M=mn.bind(null,si,b);return b.dispatch=M,[p.memoizedState,M]},useDebugValue:Ef,useDeferredValue:function(p,b){var M=me();return S(M,p,b)},useTransition:function(){var p=Kt(!1);return p=W.bind(null,si,p.queue,!0,!1),me().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,b,M){var O=si,L=me();if(Pi){if(M===void 0)throw Error(r(407));M=M()}else{if(M=b(),wr===null)throw Error(r(349));Ri&60||Ke(O,b,M)}L.memoizedState=M;var j={value:M,getSnapshot:b};return L.queue=j,Ho(cn.bind(null,O,j,p),[p]),O.flags|=2048,mr(9,nn.bind(null,O,j,M,b),{destroy:void 0},null),M},useId:function(){var p=me(),b=wr.identifierPrefix;if(Pi){var M=Df,O=kf;M=(O&~(1<<32-Zo(O)-1)).toString(32)+M,b=":"+b+"R"+M,M=JS++,0<M&&(b+="H"+M.toString(32)),b+=":"}else M=Wre++,b=":"+b+"r"+M.toString(32)+":";return p.memoizedState=b},useCacheRefresh:function(){return me().memoizedState=It.bind(null,si)}};Dp.useMemoCache=pt,Dp.useHostTransitionStatus=de,Dp.useFormState=hi,Dp.useActionState=hi,Dp.useOptimistic=function(p){var b=me();b.memoizedState=b.baseState=p;var M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return b.queue=M,b=Ci.bind(null,si,!0,M),M.dispatch=b,[p,b]};var $h={readContext:Lt,use:ye,useCallback:Vo,useContext:Lt,useEffect:Sn,useImperativeHandle:Ur,useInsertionEffect:Ys,useLayoutEffect:Il,useMemo:ku,useReducer:dt,useRef:wf,useState:function(){return dt(it)},useDebugValue:Ef,useDeferredValue:function(p,b){var M=_e();return N(M,ur.memoizedState,p,b)},useTransition:function(){var p=dt(it)[0],b=_e().memoizedState;return[typeof p=="boolean"?p:Ee(p),b]},useSyncExternalStore:qt,useId:Le};$h.useCacheRefresh=Xe,$h.useMemoCache=pt,$h.useHostTransitionStatus=de,$h.useFormState=$i,$h.useActionState=$i,$h.useOptimistic=function(p,b){var M=_e();return Yt(M,ur,p,b)};var Op={readContext:Lt,use:ye,useCallback:Vo,useContext:Lt,useEffect:Sn,useImperativeHandle:Ur,useInsertionEffect:Ys,useLayoutEffect:Il,useMemo:ku,useReducer:Dt,useRef:wf,useState:function(){return Dt(it)},useDebugValue:Ef,useDeferredValue:function(p,b){var M=_e();return ur===null?S(M,p,b):N(M,ur.memoizedState,p,b)},useTransition:function(){var p=Dt(it)[0],b=_e().memoizedState;return[typeof p=="boolean"?p:Ee(p),b]},useSyncExternalStore:qt,useId:Le};Op.useCacheRefresh=Xe,Op.useMemoCache=pt,Op.useHostTransitionStatus=de,Op.useFormState=Xs,Op.useActionState=Xs,Op.useOptimistic=function(p,b){var M=_e();return ur!==null?Yt(M,ur,p,b):(M.baseState=p,[p,M.queue.dispatch])};var g3={isMounted:function(p){return(p=p._reactInternals)?f(p)===p:!1},enqueueSetState:function(p,b,M){p=p._reactInternals;var O=Ko(),L=rt(O);L.payload=b,M!=null&&(L.callback=M),b=Je(p,L,O),b!==null&&(no(b,p,O),Xt(b,p,O))},enqueueReplaceState:function(p,b,M){p=p._reactInternals;var O=Ko(),L=rt(O);L.tag=1,L.payload=b,M!=null&&(L.callback=M),b=Je(p,L,O),b!==null&&(no(b,p,O),Xt(b,p,O))},enqueueForceUpdate:function(p,b){p=p._reactInternals;var M=Ko(),O=rt(M);O.tag=2,b!=null&&(O.callback=b),b=Je(p,O,M),b!==null&&(no(b,p,M),Xt(b,p,M))}},A8=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var b=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(b))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},C8=Error(r(461)),Va=!1,b3={dehydrated:null,treeContext:null,retryLane:0},ZS=v(null),Ip=null,Of=null,qre=typeof AbortController<"u"?AbortController:function(){var p=[],b=this.signal={aborted:!1,addEventListener:function(M,O){p.push(O)}};this.abort=function(){b.aborted=!0,p.forEach(function(M){return M()})}},Xre=Jo.unstable_scheduleCallback,Yre=Jo.unstable_NormalPriority,ia={$$typeof:Vh,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},R8=Fn.S;Fn.S=function(p,b){typeof b=="object"&&b!==null&&typeof b.then=="function"&&Z(p,b),R8!==null&&R8(p,b)};var Np=v(null),If=!1,ra=!1,y3=!1,k8=typeof WeakSet=="function"?WeakSet:Set,Ga=null,D8=!1,_a=null,tl=!1,Vc=null,ib=8192,$re={getCacheForType:function(p){var b=Lt(ia),M=b.data.get(p);return M===void 0&&(M=p(),b.data.set(p,M)),M}},QS=0,ew=1,tw=2,nw=3,iw=4;if(typeof Symbol=="function"&&Symbol.for){var jv=Symbol.for;QS=jv("selector.component"),ew=jv("selector.has_pseudo_class"),tw=jv("selector.role"),nw=jv("selector.test_id"),iw=jv("selector.text")}var Kre=typeof WeakMap=="function"?WeakMap:Map,fr=0,wr=null,pi=null,Ri=0,Er=0,nl=null,Nf=!1,rb=!1,v3=!1,Pf=0,aa=0,Kh=0,Pp=0,x3=0,Hl=0,ab=0,Hv=null,Pu=null,_3=!1,S3=0,Vv=1/0,rw=null,Jh=null,aw=!1,Lp=null,Gv=0,w3=0,E3=null,Wv=0,M3=null;return di.attemptContinuousHydration=function(p){if(p.tag===13){var b=Te(p,67108864);b!==null&&no(b,p,67108864),WR(p,67108864)}},di.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var b=Ko(),M=Te(p,b);M!==null&&no(M,p,b),WR(p,b)}},di.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=E(p.pendingLanes);if(b!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;b;){var M=1<<31-Zo(b);p.entanglements[1]|=M,b&=~M}We(p),!(fr&6)&&(Vv=jc()+500,Et(0))}}break;case 13:b=Te(p,2),b!==null&&no(b,p,2),kF(),WR(p,2)}},di.batchedUpdates=function(p,b){return p(b)},di.createComponentSelector=function(p){return{$$typeof:QS,value:p}},di.createContainer=function(p,b,M,O,L,j,le,Ce,He,St){return GF(p,b,!1,null,M,O,j,le,Ce,He,St,null)},di.createHasPseudoClassSelector=function(p){return{$$typeof:ew,value:p}},di.createHydrationContainer=function(p,b,M,O,L,j,le,Ce,He,St,Gt,tn,an){return p=GF(M,O,!0,p,L,j,Ce,He,St,Gt,tn,an),p.context=WF(null),M=p.current,O=Ko(),L=rt(O),L.callback=b??null,Je(M,L,O),p.current.lanes=O,P(p,O),We(p),p},di.createPortal=function(p,b,M){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zg,key:O==null?null:""+O,children:p,containerInfo:b,implementation:M}},di.createRoleSelector=function(p){return{$$typeof:tw,value:p}},di.createTestNameSelector=function(p){return{$$typeof:nw,value:p}},di.createTextSelector=function(p){return{$$typeof:iw,value:p}},di.defaultOnCaughtError=function(p){console.error(p)},di.defaultOnRecoverableError=function(p){A8(p)},di.defaultOnUncaughtError=function(p){A8(p)},di.deferredUpdates=function(p){var b=Fn.T,M=Tp();try{return Eo(32),Fn.T=null,p()}finally{Eo(M),Fn.T=b}},di.discreteUpdates=function(p,b,M,O,L){var j=Fn.T,le=Tp();try{return Eo(2),Fn.T=null,p(b,M,O,L)}finally{Eo(le),Fn.T=j,fr===0&&(Vv=jc()+500)}},di.findAllNodes=LR,di.findBoundingRects=function(p,b){if(!Iv)throw Error(r(363));b=LR(p,b),p=[];for(var M=0;M<b.length;M++)p.push(Hie(b[M]));for(b=p.length-1;0<b;b--){M=p[b];for(var O=M.x,L=O+M.width,j=M.y,le=j+M.height,Ce=b-1;0<=Ce;Ce--)if(b!==Ce){var He=p[Ce],St=He.x,Gt=St+He.width,tn=He.y,an=tn+He.height;if(O>=St&&j>=tn&&L<=Gt&&le<=an){p.splice(b,1);break}else if(O!==St||M.width!==He.width||an<j||tn>le){if(!(j!==tn||M.height!==He.height||Gt<O||St>L)){St>O&&(He.width+=St-O,He.x=O),Gt<L&&(He.width=L-St),p.splice(b,1);break}}else{tn>j&&(He.height+=tn-j,He.y=j),an<le&&(He.height=le-tn),p.splice(b,1);break}}}return p},di.findHostInstance=qF,di.findHostInstanceWithNoPortals=function(p){return p=d(p),p=p!==null?y(p):null,p===null?null:Ov(p.stateNode)},di.findHostInstanceWithWarning=function(p){return qF(p)},di.flushPassiveEffects=Ep,di.flushSyncFromReconciler=function(p){var b=fr;fr|=1;var M=Fn.T,O=Tp();try{if(Eo(2),Fn.T=null,p)return p()}finally{Eo(O),Fn.T=M,fr=b,!(fr&6)&&Et(0)}},di.flushSyncWork=kF,di.focusWithin=function(p,b){if(!Iv)throw Error(r(363));for(p=IR(p),b=TF(p,b),b=Array.from(b),p=0;p<b.length;){var M=b[p++],O=M.tag;if(!Nv(M)){if((O===5||O===26||O===27)&&Wie(M.stateNode))return!0;for(M=M.child;M!==null;)b.push(M),M=M.sibling}}return!1},di.getFindAllNodesFailureDescription=function(p,b){if(!Iv)throw Error(r(363));var M=0,O=[];p=[IR(p),0];for(var L=0;L<p.length;){var j=p[L++],le=j.tag,Ce=p[L++],He=b[Ce];if((le!==5&&le!==26&&le!==27||!Nv(j))&&(NR(j,He)&&(O.push(PR(He)),Ce++,Ce>M&&(M=Ce)),Ce<b.length))for(j=j.child;j!==null;)p.push(j,Ce),j=j.sibling}if(M<b.length){for(p=[];M<b.length;M++)p.push(PR(b[M]));return`findAllNodes was able to match part of the selector:
  `+(O.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},di.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return Ov(p.child.stateNode);default:return p.child.stateNode}},di.injectIntoDevTools=function(){var p={bundleType:0,version:Sie,rendererPackageName:wie,currentDispatcherRef:Fn,findFiberByHostInstance:i8,reconcilerVersion:"19.0.0"};if(e8!==null&&(p.rendererConfig=e8),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)p=!0;else{try{Pv=b.inject(p),Qo=b}catch{}p=!!b.checkDCE}}return p},di.isAlreadyRendering=function(){return!1},di.observeVisibleRects=function(p,b,M,O){if(!Iv)throw Error(r(363));p=LR(p,b);var L=qie(p,M,O).disconnect;return{disconnect:function(){L()}}},di.shouldError=function(){return null},di.shouldSuspend=function(){return!1},di.startHostTransition=function(p,b,M,O){if(p.tag!==5)throw Error(r(476));var L=ne(p).queue;W(p,L,b,Hg,M===null?i:function(){var j=ne(p).next.queue;return En(p,j,{},Ko()),M(O)})},di.updateContainer=function(p,b,M,O){var L=b.current,j=Ko();return XF(L,j,p,b,M,O),j},di.updateContainerSync=function(p,b,M,O){return b.tag===0&&Ep(),XF(b.current,2,p,b,M,O),2},di},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(NZ);var bwe=NZ.exports;IZ.exports=bwe;var ywe=IZ.exports;const vwe=Cc(ywe);function sB(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=sB(i,e,n);if(r)return r;i=e?null:i.sibling}}function UZ(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const oB=UZ(I.createContext(null));let BZ=class extends I.Component{render(){return I.createElement(oB.Provider,{value:this._reactInternals},this.props.children)}};function FZ(){const t=I.useContext(oB);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=I.useId();return I.useMemo(()=>{for(const n of[t,t?.alternate]){if(!n)continue;const i=sB(n,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}const xwe=Symbol.for("react.context"),_we=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===xwe;function Swe(){const t=FZ(),[e]=I.useState(()=>new Map);e.clear();let n=t;for(;n;){const i=n.type;_we(i)&&i!==oB&&!e.has(i)&&e.set(i,I.use(UZ(i))),n=n.return}return e}function zZ(){const t=Swe();return I.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>I.createElement(e,null,I.createElement(n.Provider,{...i,value:t.get(n)})),e=>I.createElement(BZ,{...e})),[t])}function jZ(t){let e=t.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const HZ=t=>t&&t.isOrthographicCamera,wwe=t=>t&&t.hasOwnProperty("current"),Ewe=t=>t!=null&&(typeof t=="string"||typeof t=="number"||t.isColor),mS=((t,e)=>typeof window<"u"&&(((t=window.document)==null?void 0:t.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?I.useLayoutEffect:I.useEffect;function lB(t){const e=I.useRef(t);return mS(()=>void(e.current=t),[t]),e}function Mwe(){const t=FZ(),e=zZ();return I.useMemo(()=>({children:n})=>{const r=!!sB(t,!0,a=>a.type===I.StrictMode)?I.StrictMode:I.Fragment;return R.jsx(r,{children:R.jsx(e,{children:n})})},[t,e])}function Twe({set:t}){return mS(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const Awe=(t=>(t=class extends I.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},t.getDerivedStateFromError=()=>({error:!0}),t))();function VZ(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}function Pb(t){var e;return(e=t.__r3f)==null?void 0:e.root.getState()}const jr={obj:t=>t===Object(t)&&!jr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,nul:t=>t===null,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(jr.str(t)||jr.num(t)||jr.boo(t))return t===e;const a=jr.obj(t);if(a&&i==="reference")return t===e;const s=jr.arr(t);if(s&&n==="reference")return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(a&&n==="shallow"&&i==="shallow"){for(o in r?e:t)if(!jr.equ(t[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:t)if(t[o]!==e[o])return!1;if(jr.und(o)){if(s&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Cwe(t){const e={nodes:{},materials:{},meshes:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material),n.isMesh&&!e.meshes[n.name]&&(e.meshes[n.name]=n)}),e}function Rwe(t){t.type!=="Scene"&&(t.dispose==null||t.dispose());for(const e in t){const n=t[e];n?.type!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const GZ=["children","key","ref"];function kwe(t){const e={};for(const n in t)GZ.includes(n)||(e[n]=t[n]);return e}function PA(t,e,n,i){const r=t;let a=r?.__r3f;return a||(a={root:e,type:n,parent:null,children:[],props:kwe(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function S_(t,e){let n=t[e];if(!e.includes("-"))return{root:t,key:e,target:n};n=t;for(const r of e.split("-")){var i;e=r,t=n,n=(i=n)==null?void 0:i[e]}return{root:t,key:e,target:n}}const K6=/-\d+$/;function LA(t,e){if(jr.str(e.props.attach)){if(K6.test(e.props.attach)){const r=e.props.attach.replace(K6,""),{root:a,key:s}=S_(t.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:n,key:i}=S_(t.object,e.props.attach);e.previousAttach=n[i],n[i]=e.object}else jr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(t.object,e.object))}function UA(t,e){if(jr.str(e.props.attach)){const{root:n,key:i}=S_(t.object,e.props.attach),r=e.previousAttach;r===void 0?delete n[i]:n[i]=r}else e.previousAttach==null||e.previousAttach(t.object,e.object);delete e.previousAttach}const HN=[...GZ,"args","dispose","attach","object","onUpdate","dispose"],J6=new Map;function Dwe(t){let e=J6.get(t.constructor);try{e||(e=new t.constructor,J6.set(t.constructor,e))}catch{}return e}function Owe(t,e){const n={};for(const i in e)if(!HN.includes(i)&&!jr.equ(e[i],t.props[i])){n[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(n[r]=e[r])}for(const i in t.props){if(HN.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=S_(t.object,i);if(r.constructor&&r.constructor.length===0){const s=Dwe(r);jr.und(s)||(n[a]=s[a])}else n[a]=0}return n}const Iwe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Nwe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function su(t,e){var n;const i=t.__r3f,r=i&&jZ(i).getState(),a=i?.eventCount;for(const o in e){let l=e[o];if(HN.includes(o))continue;if(i&&Nwe.test(o)){typeof l=="function"?i.handlers[o]=l:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:c,key:u,target:f}=S_(t,o);if(f instanceof ky&&l instanceof ky)f.mask=l.mask;else if(f instanceof Ut&&Ewe(l))f.set(l);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&typeof f.copy=="function"&&l!=null&&l.constructor&&f.constructor===l.constructor)f.copy(l);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&Array.isArray(l))typeof f.fromArray=="function"?f.fromArray(l):f.set(...l);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&typeof l=="number")typeof f.setScalar=="function"?f.setScalar(l):f.set(l);else{var s;c[u]=l,r&&!r.linear&&Iwe.includes(u)&&(s=c[u])!=null&&s.isTexture&&c[u].format===Jr&&c[u].type===yo&&(c[u].colorSpace=gs)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(n=i.object)!=null&&n.isObject3D&&a!==i.eventCount){const o=i.object,l=r.internal.interaction.indexOf(o);l>-1&&r.internal.interaction.splice(l,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&_v(i),t}function _v(t){var e;if(!t.parent)return;t.props.onUpdate==null||t.props.onUpdate(t.object);const n=(e=t.root)==null||e.getState==null?void 0:e.getState();n&&n.internal.frames===0&&n.invalidate()}function WZ(t,e){t.manual||(HZ(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix())}const lo=t=>t?.isObject3D;function xE(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function qZ(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function Pwe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{qZ(n.capturedMap,e,i,r)})}function Lwe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=t.getState(),f=new Set,h=[],d=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<d.length;g++){const x=Pb(d[g]);x&&(x.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function m(g){const x=Pb(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var _;x.events.compute==null||x.events.compute(l,x,(_=x.previousRoot)==null?void 0:_.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let y=d.flatMap(m).sort((g,x)=>{const _=Pb(g.object),E=Pb(x.object);return!_||!E?g.distance-x.distance:E.events.priority-_.events.priority||g.distance-x.distance}).filter(g=>{const x=xE(g);return f.has(x)?!1:(f.add(x),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const g of y){let x=g.object;for(;x;){var v;(v=x.__r3f)!=null&&v.eventCount&&h.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())f.has(xE(g.intersection))||h.push(g.intersection);return h}function r(l,c,u,f){if(l.length){const h={stopped:!1};for(const d of l){let m=Pb(d.object);if(m||d.object.traverseAncestors(y=>{const v=Pb(y);if(v)return m=v,!1}),m){const{raycaster:y,pointer:v,camera:g,internal:x}=m,_=new Y(v.x,v.y,0).unproject(g),E=D=>{var k,P;return(k=(P=x.capturedMap.get(D))==null?void 0:P.has(d.eventObject))!=null?k:!1},T=D=>{const k={intersection:d,target:c.target};x.capturedMap.has(D)?x.capturedMap.get(D).set(d.eventObject,k):x.capturedMap.set(D,new Map([[d.eventObject,k]])),c.target.setPointerCapture(D)},w=D=>{const k=x.capturedMap.get(D);k&&qZ(x.capturedMap,d.eventObject,k,D)};let A={};for(let D in c){let k=c[D];typeof k!="function"&&(A[D]=k)}let C={...d,...A,pointer:v,intersections:l,stopped:h.stopped,delta:u,unprojectedPoint:_,ray:y.ray,camera:g,stopPropagation(){const D="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!D||D.has(d.eventObject))&&(C.stopped=h.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(k=>k.eventObject===d.eventObject))){const k=l.slice(0,l.indexOf(d));a([...k,d])}},target:{hasPointerCapture:E,setPointerCapture:T,releasePointerCapture:w},currentTarget:{hasPointerCapture:E,setPointerCapture:T,releasePointerCapture:w},nativeEvent:c};if(f(C),h.stopped===!0)break}}}return l}function a(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const h=u.eventObject.__r3f;if(c.hovered.delete(xE(u)),h!=null&&h.eventCount){const d=h.handlers,m={...u,intersections:l};d.onPointerOut==null||d.onPointerOut(m),d.onPointerLeave==null||d.onPointerLeave(m)}}}function s(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),a([]))})}}return function(u){const{onPointerMissed:f,internal:h}=t.getState();h.lastEvent.current=u;const d=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=i(u,d?n:void 0),g=m?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=v.map(_=>_.eventObject)),m&&!v.length&&g<=2&&(s(u,h.interaction),f&&f(u)),d&&a(v);function x(_){const E=_.eventObject,T=E.__r3f;if(!(T!=null&&T.eventCount))return;const w=T.handlers;if(d){if(w.onPointerOver||w.onPointerEnter||w.onPointerOut||w.onPointerLeave){const A=xE(_),C=h.hovered.get(A);C?C.stopped&&_.stopPropagation():(h.hovered.set(A,_),w.onPointerOver==null||w.onPointerOver(_),w.onPointerEnter==null||w.onPointerEnter(_))}w.onPointerMove==null||w.onPointerMove(_)}else{const A=w[l];A?(!m||h.initialHits.includes(E))&&(s(u,h.interaction.filter(C=>!h.initialHits.includes(C))),A(_)):m&&h.initialHits.includes(E)&&s(u,h.interaction.filter(C=>!h.initialHits.includes(C)))}}r(v,u,g,x)}}return{handlePointer:o}}const Z6=t=>!!(t!=null&&t.render),cB=I.createContext(null),Uwe=(t,e)=>{const n=kZ((o,l)=>{const c=new Y,u=new Y,f=new Y;function h(g=l().camera,x=u,_=l().size){const{width:E,height:T,top:w,left:A}=_,C=E/T;x.isVector3?f.copy(x):f.set(...x);const D=g.getWorldPosition(c).distanceTo(f);if(HZ(g))return{width:E/g.zoom,height:T/g.zoom,top:w,left:A,factor:1,distance:D,aspect:C};{const k=g.fov*Math.PI/180,P=2*Math.tan(k/2)*D,B=P*(E/T);return{width:B,height:P,top:w,left:A,factor:E/B,distance:D,aspect:C}}}let d;const m=g=>o(x=>({performance:{...x.performance,current:g}})),y=new ft;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(g=1)=>t(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new QU,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();d&&clearTimeout(d),g.performance.current!==g.performance.min&&m(g.performance.min),d=setTimeout(()=>m(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:g=>o(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,_=0,E=0)=>{const T=l().camera,w={width:g,height:x,top:_,left:E};o(A=>({size:w,viewport:{...A.viewport,...h(T,u,w)}}))},setDpr:g=>o(x=>{const _=VZ(g);return{viewport:{...x.viewport,dpr:_,initialDpr:x.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),o(()=>({frameloop:g}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:I.createRef(),active:!1,frames:0,priority:0,subscribe:(g,x,_)=>{const E=l().internal;return E.priority=E.priority+(x>0?1:0),E.subscribers.push({ref:g,priority:x,store:_}),E.subscribers=E.subscribers.sort((T,w)=>T.priority-w.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(x>0?1:0),T.subscribers=T.subscribers.filter(w=>w.ref!==g))}}}}}),i=n.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return n.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:u,set:f}=n.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==a){r=l,a=c.dpr,WZ(o,l),c.dpr>0&&u.setPixelRatio(c.dpr);const h=typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,h)}o!==s&&(s=o,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};function uB(){const t=I.useContext(cB);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function ui(t=n=>n,e){return uB()(t,e)}function fa(t,e=0){const n=uB(),i=n.getState().internal.subscribe,r=lB(t);return mS(()=>i(r,e,n),[e,i,n]),null}const Q6=new WeakMap,Bwe=t=>{var e;return typeof t=="function"&&(t==null||(e=t.prototype)==null?void 0:e.constructor)===t};function XZ(t,e){return function(n,...i){let r;return Bwe(n)?(r=Q6.get(n),r||(r=new n,Q6.set(n,r))):r=n,t&&t(r),Promise.all(i.map(a=>new Promise((s,o)=>r.load(a,l=>{lo(l?.scene)&&Object.assign(l,Cwe(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l?.message}`))))))}}function Ly(t,e,n,i){const r=Array.isArray(e)?e:[e],a=pwe(XZ(n,i),[t,...r],{equal:jr.equ});return Array.isArray(e)?a:a[0]}Ly.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return mwe(XZ(n),[t,...i])};Ly.clear=function(t,e){const n=Array.isArray(e)?e:[e];return gwe([t,...n])};function Fwe(t){const e=vwe(t);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:I.version}),e}const YZ=0,Uy={},zwe=/^three(?=[A-Z])/,Y2=t=>`${t[0].toUpperCase()}${t.slice(1)}`;let jwe=0;const Hwe=t=>typeof t=="function";function gS(t){if(Hwe(t)){const e=`${jwe++}`;return Uy[e]=t,e}else Object.assign(Uy,t)}function $Z(t,e){const n=Y2(t),i=Uy[n];if(t!=="primitive"&&!i)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(t==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Vwe(t,e,n){var i;return t=Y2(t)in Uy?t:t.replace(zwe,""),$Z(t,e),t==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,PA(e.object,n,t,e)}function Gwe(t){if(!t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?UA(t.parent,t):lo(t.object)&&(t.object.visible=!1),t.isHidden=!0,_v(t)}}function KZ(t){if(t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?LA(t.parent,t):lo(t.object)&&t.props.visible!==!1&&(t.object.visible=!0),t.isHidden=!1,_v(t)}}function fB(t,e,n){const i=e.root.getState();if(!(!t.parent&&t.object!==i.scene)){if(!e.object){var r,a;const s=Uy[Y2(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(su(e.object,e.props),e.props.attach)LA(t,e);else if(lo(e.object)&&lo(t.object)){const s=t.object.children.indexOf(n?.object);if(n&&s!==-1){const o=t.object.children.indexOf(e.object);if(o!==-1){t.object.children.splice(o,1);const l=o<s?s-1:s;t.object.children.splice(l,0,e.object)}else e.object.parent=t.object,t.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),t.object.dispatchEvent({type:"childadded",child:e.object})}else t.object.add(e.object)}for(const s of e.children)fB(e,s);_v(e)}}function _D(t,e){e&&(e.parent=t,t.children.push(e),fB(t,e))}function ej(t,e,n){if(!e||!n)return;e.parent=t;const i=t.children.indexOf(n);i!==-1?t.children.splice(i,0,e):t.children.push(e),fB(t,e,n)}function JZ(t){if(typeof t.dispose=="function"){const e=()=>{try{t.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():jN.unstable_scheduleCallback(jN.unstable_IdlePriority,e)}}function VN(t,e,n){if(!e)return;e.parent=null;const i=t.children.indexOf(e);i!==-1&&t.children.splice(i,1),e.props.attach?UA(t,e):lo(e.object)&&lo(t.object)&&(t.object.remove(e.object),Pwe(jZ(e),e.object));const r=e.props.dispose!==null&&n!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];VN(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&JZ(e.object),n===void 0&&_v(e)}function Wwe(t,e){for(const n of[t,t.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const i=n.ref(e);typeof i=="function"&&(n.refCleanup=i)}else n.ref&&(n.ref.current=e)}const $M=[];function qwe(){for(const[n]of $M){const i=n.parent;if(i){n.props.attach?UA(i,n):lo(n.object)&&lo(i.object)&&i.object.remove(n.object);for(const r of n.children)r.props.attach?UA(n,r):lo(r.object)&&lo(n.object)&&n.object.remove(r.object)}n.isHidden&&KZ(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&JZ(n.object)}for(const[n,i,r]of $M){n.props=i;const a=n.parent;if(a){var t,e;const s=Uy[Y2(n.type)];n.object=(t=n.props.object)!=null?t:new s(...(e=n.props.args)!=null?e:[]),n.object.__r3f=n,Wwe(r,n.object),su(n.object,n.props),n.props.attach?LA(a,n):lo(n.object)&&lo(a.object)&&a.object.add(n.object);for(const o of n.children)o.props.attach?LA(n,o):lo(o.object)&&lo(n.object)&&n.object.add(o.object);_v(n)}}$M.length=0}const SD=()=>{},tj={};let _E=YZ;const Xwe=0,Ywe=4,BA=Fwe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Vwe,removeChild:VN,appendChild:_D,appendInitialChild:_D,insertBefore:ej,appendChildToContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||_D(n,e)},removeChildFromContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||VN(n,e)},insertInContainerBefore(t,e,n){const i=t.getState().scene.__r3f;!e||!n||!i||ej(i,e,n)},getRootHostContext:()=>tj,getChildHostContext:()=>tj,commitUpdate(t,e,n,i,r){var a,s,o;$Z(e,i);let l=!1;if((t.type==="primitive"&&n.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=n.args)==null?void 0:s.length)||(o=i.args)!=null&&o.some((u,f)=>{var h;return u!==((h=n.args)==null?void 0:h[f])}))&&(l=!0),l)$M.push([t,{...i},r]);else{const u=Owe(t,i);Object.keys(u).length&&(Object.assign(t.props,u),su(t.object,u))}(r.sibling===null||(r.flags&Ywe)===Xwe)&&qwe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:t=>t?.object,prepareForCommit:()=>null,preparePortalMount:t=>PA(t.getState().scene,t,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Gwe,unhideInstance:KZ,createTextInstance:SD,hideTextInstance:SD,unhideTextInstance:SD,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:I.createContext(null),setCurrentUpdatePriority(t){_E=t},getCurrentUpdatePriority(){return _E},resolveUpdatePriority(){var t;if(_E!==YZ)return _E;switch(typeof window<"u"&&((t=window.event)==null?void 0:t.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return YM.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return YM.ContinuousEventPriority;default:return YM.DefaultEventPriority}},resetFormInstance(){}}),dg=new Map,Lb={objects:"shallow",strict:!1};function $we(t,e){if(!e&&typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:a}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Kwe(t){const e=dg.get(t),n=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||Uwe(qN,ij),s=n||BA.createContainer(a,YM.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||dg.set(t,{fiber:s,store:a});let o,l,c=!1,u=null;return{async configure(f={}){let h;u=new Promise(ce=>h=ce);let{gl:d,size:m,scene:y,events:v,onCreated:g,shadows:x=!1,linear:_=!1,flat:E=!1,legacy:T=!1,orthographic:w=!1,frameloop:A="always",dpr:C=[1,2],performance:D,raycaster:k,camera:P,onPointerMissed:B}=f,H=a.getState(),G=H.gl;if(!H.gl){const ce={canvas:t,powerPreference:"high-performance",antialias:!0,alpha:!0},he=typeof d=="function"?await d(ce):d;Z6(he)?G=he:G=new aB({...ce,...d}),H.set({gl:G})}let V=H.raycaster;V||H.set({raycaster:V=new pS});const{params:U,...F}=k||{};if(jr.equ(F,V,Lb)||su(V,{...F}),jr.equ(U,V.params,Lb)||su(V,{params:{...V.params,...U}}),!H.camera||H.camera===l&&!jr.equ(l,P,Lb)){l=P;const ce=P?.isCamera,he=ce?P:w?new Ph(0,0,0,0,.1,1e3):new Yr(75,0,.1,1e3);ce||(he.position.z=5,P&&(su(he,P),he.manual||("aspect"in P||"left"in P||"right"in P||"bottom"in P||"top"in P)&&(he.manual=!0,he.updateProjectionMatrix())),!H.camera&&!(P!=null&&P.rotation)&&he.lookAt(0,0,0)),H.set({camera:he}),V.camera=he}if(!H.scene){let ce;y!=null&&y.isScene?(ce=y,PA(ce,a,"",{})):(ce=new pv,PA(ce,a,"",{}),y&&su(ce,y)),H.set({scene:ce})}v&&!H.events.handlers&&H.set({events:v(a)});const q=$we(t,m);if(jr.equ(q,H.size,Lb)||H.setSize(q.width,q.height,q.top,q.left),C&&H.viewport.dpr!==VZ(C)&&H.setDpr(C),H.frameloop!==A&&H.setFrameloop(A),H.onPointerMissed||H.set({onPointerMissed:B}),D&&!jr.equ(D,H.performance,Lb)&&H.set(ce=>({performance:{...ce.performance,...D}})),!H.xr){var X;const ce=(Me,Se)=>{const pe=a.getState();pe.frameloop!=="never"&&ij(Me,!0,pe,Se)},he=()=>{const Me=a.getState();Me.gl.xr.enabled=Me.gl.xr.isPresenting,Me.gl.xr.setAnimationLoop(Me.gl.xr.isPresenting?ce:null),Me.gl.xr.isPresenting||qN(Me)},$={connect(){const Me=a.getState().gl;Me.xr.addEventListener("sessionstart",he),Me.xr.addEventListener("sessionend",he)},disconnect(){const Me=a.getState().gl;Me.xr.removeEventListener("sessionstart",he),Me.xr.removeEventListener("sessionend",he)}};typeof((X=G.xr)==null?void 0:X.addEventListener)=="function"&&$.connect(),H.set({xr:$})}if(G.shadowMap){const ce=G.shadowMap.enabled,he=G.shadowMap.type;if(G.shadowMap.enabled=!!x,jr.boo(x))G.shadowMap.type=M1;else if(jr.str(x)){var z;const $={basic:UK,percentage:f2,soft:M1,variance:Zc};G.shadowMap.type=(z=$[x])!=null?z:M1}else jr.obj(x)&&Object.assign(G.shadowMap,x);(ce!==G.shadowMap.enabled||he!==G.shadowMap.type)&&(G.shadowMap.needsUpdate=!0)}return oi.enabled=!T,c||(G.outputColorSpace=_?_u:gs,G.toneMapping=E?cf:mU),H.legacy!==T&&H.set(()=>({legacy:T})),H.linear!==_&&H.set(()=>({linear:_})),H.flat!==E&&H.set(()=>({flat:E})),d&&!jr.fun(d)&&!Z6(d)&&!jr.equ(d,G,Lb)&&su(G,d),o=g,c=!0,h(),this},render(f){return!c&&!u&&this.configure(),u.then(()=>{BA.updateContainer(R.jsx(Jwe,{store:a,children:f,onCreated:o,rootElement:t}),s,null,()=>{})}),a},unmount(){ZZ(t)}}}function Jwe({store:t,children:e,onCreated:n,rootElement:i}){return mS(()=>{const r=t.getState();r.set(a=>({internal:{...a.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),R.jsx(cB.Provider,{value:t,children:e})}function ZZ(t,e){const n=dg.get(t),i=n?.fiber;if(i){const r=n?.store.getState();r&&(r.internal.active=!1),BA.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,o,l;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Rwe(r.scene),dg.delete(t)}catch{}},500)})}}function Zwe(t,e,n){return R.jsx(Qwe,{children:t,container:e,state:n})}function Qwe({state:t={},children:e,container:n}){const{events:i,size:r,...a}=t,s=uB(),[o]=I.useState(()=>new pS),[l]=I.useState(()=>new ft),c=lB((f,h)=>{let d;if(h.camera&&r){const m=h.camera;d=f.viewport.getCurrentViewport(m,new Y,r),m!==f.camera&&WZ(m,r)}return{...f,...h,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...f.events,...h.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...d},setEvents:m=>h.set(y=>({...y,events:{...y.events,...m}}))}}),u=I.useMemo(()=>{const f=kZ((d,m)=>({...a,set:d,get:m})),h=d=>f.setState(m=>c.current(d,m));return h(s.getState()),s.subscribe(h),f},[s,n]);return R.jsx(R.Fragment,{children:BA.createPortal(R.jsx(cB.Provider,{value:u,children:e}),u,null)})}function QZ(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}const eQ=new Set,tQ=new Set,eEe=new Set,tEe=t=>QZ(t,eQ),nEe=t=>QZ(t,tQ);function wD(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function N1(t,e){switch(t){case"before":return wD(eQ,e);case"after":return wD(tQ,e);case"tail":return wD(eEe,e)}}let ED,MD;function GN(t,e,n){let i=e.clock.getDelta();e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),ED=e.internal.subscribers;for(let r=0;r<ED.length;r++)MD=ED[r],MD.ref.current(MD.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let FA=!1,WN=!1,TD,nj,Ub;function nQ(t){nj=requestAnimationFrame(nQ),FA=!0,TD=0,N1("before",t),WN=!0;for(const n of dg.values()){var e;Ub=n.store.getState(),Ub.internal.active&&(Ub.frameloop==="always"||Ub.internal.frames>0)&&!((e=Ub.gl.xr)!=null&&e.isPresenting)&&(TD+=GN(t,Ub))}if(WN=!1,N1("after",t),TD===0)return N1("tail",t),FA=!1,cancelAnimationFrame(nj)}function qN(t,e=1){var n;if(!t)return dg.forEach(i=>qN(i.store.getState(),e));(n=t.gl.xr)!=null&&n.isPresenting||!t.internal.active||t.frameloop==="never"||(e>1?t.internal.frames=Math.min(60,t.internal.frames+e):WN?t.internal.frames=2:t.internal.frames=1,FA||(FA=!0,requestAnimationFrame(nQ)))}function ij(t,e=!0,n,i){if(e&&N1("before",t),n)GN(t,n,i);else for(const r of dg.values())GN(t,r.store.getState());e&&N1("after",t)}const AD={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function iEe(t){const{handlePointer:e}=Lwe(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(AD).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{const{set:i,events:r}=t.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:n}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[o,l]=AD[a];n.addEventListener(o,s,{passive:l})}},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=AD[r];i.connected.removeEventListener(s,a)}n(r=>({events:{...r.events,connected:void 0}}))}}}}function rj(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function rEe({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=I.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=I.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=I.useRef(!1);I.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,h,d]=I.useMemo(()=>{const g=()=>{if(!o.current.element)return;const{left:x,top:_,width:E,height:T,bottom:w,right:A,x:C,y:D}=o.current.element.getBoundingClientRect(),k={left:x,top:_,width:E,height:T,bottom:w,right:A,x:C,y:D};o.current.element instanceof HTMLElement&&i&&(k.height=o.current.element.offsetHeight,k.width=o.current.element.offsetWidth),Object.freeze(k),u.current&&!lEe(o.current.lastBounds,k)&&s(o.current.lastBounds=k)};return[g,c?rj(g,c):g,l?rj(g,l):g]},[s,i,l,c]);function m(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",d,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function y(){o.current.element&&(o.current.resizeObserver=new r(d),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(g=>g.addEventListener("scroll",d,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const v=g=>{!g||g===o.current.element||(m(),o.current.element=g,o.current.scrollContainers=iQ(g),y())};return sEe(d,!!e),aEe(h),I.useEffect(()=>{m(),y()},[e,d,h]),I.useEffect(()=>m,[]),[v,a,f]}function aEe(t){I.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function sEe(t,e){I.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function iQ(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...iQ(t.parentElement)]}const oEe=["x","y","top","bottom","left","right","width","height"],lEe=(t,e)=>oEe.every(n=>t[n]===e[n]);function cEe({ref:t,children:e,fallback:n,resize:i,style:r,gl:a,events:s=iEe,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:m,dpr:y,performance:v,raycaster:g,camera:x,scene:_,onPointerMissed:E,onCreated:T,...w}){I.useMemo(()=>gS(VSe),[]);const A=Mwe(),[C,D]=rEe({scroll:!0,debounce:{scroll:50,resize:0},...i}),k=I.useRef(null),P=I.useRef(null);I.useImperativeHandle(t,()=>k.current);const B=lB(E),[H,G]=I.useState(!1),[V,U]=I.useState(!1);if(H)throw H;if(V)throw V;const F=I.useRef(null);mS(()=>{const X=k.current;if(D.width>0&&D.height>0&&X){F.current||(F.current=Kwe(X));async function z(){await F.current.configure({gl:a,scene:_,events:s,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:m,dpr:y,performance:v,raycaster:g,camera:x,size:D,onPointerMissed:(...ce)=>B.current==null?void 0:B.current(...ce),onCreated:ce=>{ce.events.connect==null||ce.events.connect(o?wwe(o)?o.current:o:P.current),l&&ce.setEvents({compute:(he,$)=>{const Me=he[l+"X"],Se=he[l+"Y"];$.pointer.set(Me/$.size.width*2-1,-(Se/$.size.height)*2+1),$.raycaster.setFromCamera($.pointer,$.camera)}}),T?.(ce)}}),F.current.render(R.jsx(A,{children:R.jsx(Awe,{set:U,children:R.jsx(I.Suspense,{fallback:R.jsx(Twe,{set:G}),children:e??null})})}))}z()}}),I.useEffect(()=>{const X=k.current;if(X)return()=>ZZ(X)},[]);const q=o?"none":"auto";return R.jsx("div",{ref:P,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q,...r},...w,children:R.jsx("div",{ref:C,style:{width:"100%",height:"100%"},children:R.jsx("canvas",{ref:k,style:{display:"block"},children:n})})})}function uEe(t){return R.jsx(BZ,{children:R.jsx(cEe,{...t})})}const bS=new Y,hB=new Y,fEe=new Y,aj=new ft;function hEe(t,e,n){const i=bS.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,a=n.height/2;return[i.x*r+r,-(i.y*a)+a]}function dEe(t,e){const n=bS.setFromMatrixPosition(t.matrixWorld),i=hB.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),a=e.getWorldDirection(fEe);return r.angleTo(a)>Math.PI/2}function pEe(t,e,n,i){const r=bS.setFromMatrixPosition(t.matrixWorld),a=r.clone();a.project(e),aj.set(a.x,a.y),n.setFromCamera(aj,e);const s=n.intersectObjects(i,!0);if(s.length){const o=s[0].distance;return r.distanceTo(n.ray.origin)<o}return!0}function mEe(t,e){if(e instanceof Ph)return e.zoom;if(e instanceof Yr){const n=bS.setFromMatrixPosition(t.matrixWorld),i=hB.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,a=n.distanceTo(i);return 1/(2*Math.tan(r/2)*a)}else return 1}function gEe(t,e,n){if(e instanceof Yr||e instanceof Ph){const i=bS.setFromMatrixPosition(t.matrixWorld),r=hB.setFromMatrixPosition(e.matrixWorld),a=i.distanceTo(r),s=(n[1]-n[0])/(e.far-e.near),o=n[1]-s*e.far;return Math.round(s*a+o)}}const XN=t=>Math.abs(t)<1e-10?0:t;function rQ(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=XN(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const bEe=(t=>e=>rQ(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),yEe=(t=>(e,n)=>rQ(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function vEe(t){return t&&typeof t=="object"&&"current"in t}const pg=I.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:a,fullscreen:s,portal:o,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:h,castShadow:d,receiveShadow:m,material:y,geometry:v,zIndexRange:g=[16777271,0],calculatePosition:x=hEe,as:_="div",wrapperClass:E,pointerEvents:T="auto",...w},A)=>{const{gl:C,camera:D,scene:k,size:P,raycaster:B,events:H,viewport:G}=ui(),[V]=I.useState(()=>document.createElement(_)),U=I.useRef(null),F=I.useRef(null),q=I.useRef(0),X=I.useRef([0,0]),z=I.useRef(null),ce=I.useRef(null),he=o?.current||H.connected||C.domElement.parentNode,$=I.useRef(null),Me=I.useRef(!1),Se=I.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&vEe(f[0]),[f]);I.useLayoutEffect(()=>{const $e=C.domElement;f&&f==="blending"?($e.style.zIndex=`${Math.floor(g[0]/2)}`,$e.style.position="absolute",$e.style.pointerEvents="none"):($e.style.zIndex=null,$e.style.position=null,$e.style.pointerEvents=null)},[f]),I.useLayoutEffect(()=>{if(F.current){const $e=U.current=PX.createRoot(V);if(k.updateMatrixWorld(),u)V.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ct=x(F.current,D,P);V.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ct[0]}px,${ct[1]}px,0);transform-origin:0 0;`}return he&&(r?he.prepend(V):he.appendChild(V)),()=>{he&&he.removeChild(V),$e.unmount()}}},[he,u]),I.useLayoutEffect(()=>{E&&(V.className=E)},[E]);const pe=I.useMemo(()=>u?{position:"absolute",top:0,left:0,width:P.width,height:P.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:a?"translate3d(-50%,-50%,0)":"none",...s&&{top:-P.height/2,left:-P.width/2,width:P.width,height:P.height},...n},[n,a,s,P,u]),xe=I.useMemo(()=>({position:"absolute",pointerEvents:T}),[T]);I.useLayoutEffect(()=>{if(Me.current=!1,u){var $e;($e=U.current)==null||$e.render(I.createElement("div",{ref:z,style:pe},I.createElement("div",{ref:ce,style:xe},I.createElement("div",{ref:A,className:i,style:n,children:t}))))}else{var ct;(ct=U.current)==null||ct.render(I.createElement("div",{ref:A,style:pe,className:i,children:t}))}});const Ne=I.useRef(!0);fa($e=>{if(F.current){D.updateMatrixWorld(),F.current.updateWorldMatrix(!0,!1);const ct=u?X.current:x(F.current,D,P);if(u||Math.abs(q.current-D.zoom)>e||Math.abs(X.current[0]-ct[0])>e||Math.abs(X.current[1]-ct[1])>e){const At=dEe(F.current,D);let fe=!1;Se&&(Array.isArray(f)?fe=f.map(Te=>Te.current):f!=="blending"&&(fe=[k]));const Ve=Ne.current;if(fe){const Te=pEe(F.current,D,B,fe);Ne.current=Te&&!At}else Ne.current=!At;Ve!==Ne.current&&(h?h(!Ne.current):V.style.display=Ne.current?"block":"none");const je=Math.floor(g[0]/2),ot=f?Se?[g[0],je]:[je-1,0]:g;if(V.style.zIndex=`${gEe(F.current,D,ot)}`,u){const[Te,Ue]=[P.width/2,P.height/2],Oe=D.projectionMatrix.elements[5]*Ue,{isOrthographicCamera:We,top:Et,left:vt,bottom:re,right:J}=D,ue=bEe(D.matrixWorldInverse),se=We?`scale(${Oe})translate(${XN(-(J+vt)/2)}px,${XN((Et+re)/2)}px)`:`translateZ(${Oe}px)`;let be=F.current.matrixWorld;c&&(be=D.matrixWorldInverse.clone().transpose().copyPosition(be).scale(F.current.scale),be.elements[3]=be.elements[7]=be.elements[11]=0,be.elements[15]=1),V.style.width=P.width+"px",V.style.height=P.height+"px",V.style.perspective=We?"":`${Oe}px`,z.current&&ce.current&&(z.current.style.transform=`${se}${ue}translate(${Te}px,${Ue}px)`,ce.current.style.transform=yEe(be,1/((l||10)/400)))}else{const Te=l===void 0?1:mEe(F.current,D)*l;V.style.transform=`translate3d(${ct[0]}px,${ct[1]}px,0) scale(${Te})`}X.current=ct,q.current=D.zoom}}if(!Se&&$.current&&!Me.current)if(u){if(z.current){const ct=z.current.children[0];if(ct!=null&&ct.clientWidth&&ct!=null&&ct.clientHeight){const{isOrthographicCamera:At}=D;if(At||v)w.scale&&(Array.isArray(w.scale)?w.scale instanceof Y?$.current.scale.copy(w.scale.clone().divideScalar(1)):$.current.scale.set(1/w.scale[0],1/w.scale[1],1/w.scale[2]):$.current.scale.setScalar(1/w.scale));else{const fe=(l||10)/400,Ve=ct.clientWidth*fe,je=ct.clientHeight*fe;$.current.scale.set(Ve,je,1)}Me.current=!0}}}else{const ct=V.children[0];if(ct!=null&&ct.clientWidth&&ct!=null&&ct.clientHeight){const At=1/G.factor,fe=ct.clientWidth*At,Ve=ct.clientHeight*At;$.current.scale.set(fe,Ve,1),Me.current=!0}$.current.lookAt($e.camera.position)}});const Ge=I.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return I.createElement("group",ts({},w,{ref:F}),f&&!Se&&I.createElement("mesh",{castShadow:d,receiveShadow:m,ref:$},v||I.createElement("planeGeometry",null),y||I.createElement("shaderMaterial",{side:$r,vertexShader:Ge.vertexShader,fragmentShader:Ge.fragmentShader})))}),yS=parseInt(Rg.replace(/\D+/g,"")),aQ=yS>=125?"uv1":"uv2",xEe=(t,e)=>{const n=t[0].index!==null,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),a={},s={},o=t[0].morphTargetsRelative,l=new An;let c=0;if(t.forEach((u,f)=>{let h=0;if(n!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let d in u.attributes){if(!i.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+'. All geometries must have compatible attributes; make sure "'+d+'" attribute exists among all geometries, or in none of them.'),null;a[d]===void 0&&(a[d]=[]),a[d].push(u.attributes[d]),h++}if(h!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". Make sure all geometries have the same number of attributes."),null;if(o!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let d in u.morphAttributes){if(!r.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+".  .morphAttributes must be consistent throughout all geometries."),null;s[d]===void 0&&(s[d]=[]),s[d].push(u.morphAttributes[d])}l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(u.userData);{let d;if(u.index)d=u.index.count;else if(u.attributes.position!==void 0)d=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,d,f),c+=d}}),n){let u=0;const f=[];t.forEach(h=>{const d=h.index;for(let m=0;m<d.count;++m)f.push(d.getX(m)+u);u+=h.attributes.position.count}),l.setIndex(f)}for(let u in a){const f=sj(a[u]);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,f)}for(let u in s){const f=s[u][0].length;if(f===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let h=0;h<f;++h){const d=[];for(let y=0;y<s[u].length;++y)d.push(s[u][y][h]);const m=sj(d);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(m)}}return l},sj=t=>{let e,n,i,r=0;if(t.forEach(a=>{if(e===void 0&&(e=a.array.constructor),e!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=a.itemSize),n!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=a.normalized),i!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=a.array.length}),e&&n){const a=new e(r);let s=0;return t.forEach(o=>{a.set(o.array,s),s+=o.array.length}),new Tn(a,n,i)}};function oj(t,e){if(e===dJ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===AA||e===SU){let n=t.getIndex();if(n===null){const s=[],o=t.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)s.push(l);t.setIndex(s),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(n)if(e===AA)for(let s=1;s<=i;s++)r.push(n.getX(0)),r.push(n.getX(s)),r.push(n.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(n.getX(s)),r.push(n.getX(s+1)),r.push(n.getX(s+2))):(r.push(n.getX(s+2)),r.push(n.getX(s+1)),r.push(n.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=t.clone();return a.setIndex(r),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}function _Ee(t,e=Math.PI/3){const n=Math.cos(e),i=(1+1e-10)*100,r=[new Y,new Y,new Y],a=new Y,s=new Y,o=new Y,l=new Y;function c(y){const v=~~(y.x*i),g=~~(y.y*i),x=~~(y.z*i);return`${v},${g},${x}`}const u=t.index?t.toNonIndexed():t,f=u.attributes.position,h={};for(let y=0,v=f.count/3;y<v;y++){const g=3*y,x=r[0].fromBufferAttribute(f,g+0),_=r[1].fromBufferAttribute(f,g+1),E=r[2].fromBufferAttribute(f,g+2);a.subVectors(E,_),s.subVectors(x,_);const T=new Y().crossVectors(a,s).normalize();for(let w=0;w<3;w++){const A=r[w],C=c(A);C in h||(h[C]=[]),h[C].push(T)}}const d=new Float32Array(f.count*3),m=new Tn(d,3,!1);for(let y=0,v=f.count/3;y<v;y++){const g=3*y,x=r[0].fromBufferAttribute(f,g+0),_=r[1].fromBufferAttribute(f,g+1),E=r[2].fromBufferAttribute(f,g+2);a.subVectors(E,_),s.subVectors(x,_),o.crossVectors(a,s).normalize();for(let T=0;T<3;T++){const w=r[T],A=c(w),C=h[A];l.set(0,0,0);for(let D=0,k=C.length;D<k;D++){const P=C[D];o.dot(P)>n&&l.add(P)}l.normalize(),m.setXYZ(g+T,l.x,l.y,l.z)}}return u.setAttribute("normal",m),u}var lc=Uint8Array,Ld=Uint16Array,YN=Uint32Array,sQ=new lc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oQ=new lc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),SEe=new lc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lQ=function(t,e){for(var n=new Ld(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new YN(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return[n,r]},cQ=lQ(sQ,2),uQ=cQ[0],wEe=cQ[1];uQ[28]=258,wEe[258]=28;var EEe=lQ(oQ,0),MEe=EEe[0],$N=new Ld(32768);for(var Ir=0;Ir<32768;++Ir){var ld=(Ir&43690)>>>1|(Ir&21845)<<1;ld=(ld&52428)>>>2|(ld&13107)<<2,ld=(ld&61680)>>>4|(ld&3855)<<4,$N[Ir]=((ld&65280)>>>8|(ld&255)<<8)>>>1}var P1=function(t,e,n){for(var i=t.length,r=0,a=new Ld(e);r<i;++r)++a[t[r]-1];var s=new Ld(e);for(r=0;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(n){o=new Ld(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=s[t[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)o[$N[f]>>>l]=c}else for(o=new Ld(i),r=0;r<i;++r)t[r]&&(o[r]=$N[s[t[r]-1]++]>>>15-t[r]);return o},vS=new lc(288);for(var Ir=0;Ir<144;++Ir)vS[Ir]=8;for(var Ir=144;Ir<256;++Ir)vS[Ir]=9;for(var Ir=256;Ir<280;++Ir)vS[Ir]=7;for(var Ir=280;Ir<288;++Ir)vS[Ir]=8;var fQ=new lc(32);for(var Ir=0;Ir<32;++Ir)fQ[Ir]=5;var TEe=P1(vS,9,1),AEe=P1(fQ,5,1),CD=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Xc=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},RD=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},CEe=function(t){return(t/8|0)+(t&7&&1)},REe=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Ld?Ld:t instanceof YN?YN:lc)(n-e);return i.set(t.subarray(e,n)),i},kEe=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new lc(0);var r=!e||n,a=!n||n.i;n||(n={}),e||(e=new lc(i*3));var s=function(pe){var xe=e.length;if(pe>xe){var Ne=new lc(Math.max(xe*2,pe));Ne.set(e),e=Ne}},o=n.f||0,l=n.p||0,c=n.b||0,u=n.l,f=n.d,h=n.m,d=n.n,m=i*8;do{if(!u){n.f=o=Xc(t,l,1);var y=Xc(t,l+1,3);if(l+=3,y)if(y==1)u=TEe,f=AEe,h=9,d=5;else if(y==2){var _=Xc(t,l,31)+257,E=Xc(t,l+10,15)+4,T=_+Xc(t,l+5,31)+1;l+=14;for(var w=new lc(T),A=new lc(19),C=0;C<E;++C)A[SEe[C]]=Xc(t,l+C*3,7);l+=E*3;for(var D=CD(A),k=(1<<D)-1,P=P1(A,D,1),C=0;C<T;){var B=P[Xc(t,l,k)];l+=B&15;var v=B>>>4;if(v<16)w[C++]=v;else{var H=0,G=0;for(v==16?(G=3+Xc(t,l,3),l+=2,H=w[C-1]):v==17?(G=3+Xc(t,l,7),l+=3):v==18&&(G=11+Xc(t,l,127),l+=7);G--;)w[C++]=H}}var V=w.subarray(0,_),U=w.subarray(_);h=CD(V),d=CD(U),u=P1(V,h,1),f=P1(U,d,1)}else throw"invalid block type";else{var v=CEe(l)+4,g=t[v-4]|t[v-3]<<8,x=v+g;if(x>i){if(a)throw"unexpected EOF";break}r&&s(c+g),e.set(t.subarray(v,x),c),n.b=c+=g,n.p=l=x*8;continue}if(l>m){if(a)throw"unexpected EOF";break}}r&&s(c+131072);for(var F=(1<<h)-1,q=(1<<d)-1,X=l;;X=l){var H=u[RD(t,l)&F],z=H>>>4;if(l+=H&15,l>m){if(a)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(z<256)e[c++]=z;else if(z==256){X=l,u=null;break}else{var ce=z-254;if(z>264){var C=z-257,he=sQ[C];ce=Xc(t,l,(1<<he)-1)+uQ[C],l+=he}var $=f[RD(t,l)&q],Me=$>>>4;if(!$)throw"invalid distance";l+=$&15;var U=MEe[Me];if(Me>3){var he=oQ[Me];U+=RD(t,l)&(1<<he)-1,l+=he}if(l>m){if(a)throw"unexpected EOF";break}r&&s(c+131072);for(var Se=c+ce;c<Se;c+=4)e[c]=e[c-U],e[c+1]=e[c+1-U],e[c+2]=e[c+2-U],e[c+3]=e[c+3-U];c=Se}}n.l=u,n.p=X,n.b=c,u&&(o=1,n.m=h,n.d=f,n.n=d)}while(!o);return c==e.length?e:REe(e,0,c)},DEe=new lc(0),OEe=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function SE(t,e){return kEe((OEe(t),t.subarray(2,-4)),e)}var IEe=typeof TextDecoder<"u"&&new TextDecoder,NEe=0;try{IEe.decode(DEe,{stream:!0}),NEe=1}catch{}const PEe=t=>t&&t.isCubeTexture;class LEe extends fi{constructor(e,n){var i,r;const a=PEe(e),o=((r=a?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(o)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,h=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,m=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${yS>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:n?.height||15},radius:{value:n?.radius||100}},v=new gv(1,16),g=new is({uniforms:y,fragmentShader:m,vertexShader:d,side:$r});super(v,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function zA(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Om="srgb",dh="srgb-linear",lj=3001,UEe=3e3;class BEe extends Cs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new VEe(n)}),this.register(function(n){return new GEe(n)}),this.register(function(n){return new QEe(n)}),this.register(function(n){return new eMe(n)}),this.register(function(n){return new tMe(n)}),this.register(function(n){return new qEe(n)}),this.register(function(n){return new XEe(n)}),this.register(function(n){return new YEe(n)}),this.register(function(n){return new $Ee(n)}),this.register(function(n){return new HEe(n)}),this.register(function(n){return new KEe(n)}),this.register(function(n){return new WEe(n)}),this.register(function(n){return new ZEe(n)}),this.register(function(n){return new JEe(n)}),this.register(function(n){return new zEe(n)}),this.register(function(n){return new nMe(n)}),this.register(function(n){return new iMe(n)})}load(e,n,i,r){const a=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const c=Xd.extractUrlBase(e);s=Xd.resolveURL(c,this.path)}else s=Xd.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),a.manager.itemError(e),a.manager.itemEnd(e)},l=new Es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{a.parse(c,s,function(u){n(u),a.manager.itemEnd(e)},o)}catch(u){o(u)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let a;const s={},o={};if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(zA(new Uint8Array(e.slice(0,4)))===hQ){try{s[bi.KHR_BINARY_GLTF]=new rMe(e)}catch(u){r&&r(u);return}a=JSON.parse(s[bi.KHR_BINARY_GLTF].content)}else a=JSON.parse(zA(new Uint8Array(e)));else a=e;if(a.asset===void 0||a.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new bMe(a,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[u.name]=u,s[u.name]=!0}if(a.extensionsUsed)for(let c=0;c<a.extensionsUsed.length;++c){const u=a.extensionsUsed[c],f=a.extensionsRequired||[];switch(u){case bi.KHR_MATERIALS_UNLIT:s[u]=new jEe;break;case bi.KHR_DRACO_MESH_COMPRESSION:s[u]=new aMe(a,this.dracoLoader);break;case bi.KHR_TEXTURE_TRANSFORM:s[u]=new sMe;break;case bi.KHR_MESH_QUANTIZATION:s[u]=new oMe;break;default:f.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,a){i.parse(e,n,r,a)})}}function FEe(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const bi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zEe{constructor(e){this.parser=e,this.name=bi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const a=n[i];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const a=n.json,l=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ut(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],dh);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new H2(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new JU(u),c.distance=f;break;case"spot":c=new KU(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Yf(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,a=i.json.nodes[e],o=(a.extensions&&a.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(n.cache,o,l)})}}class jEe{constructor(){this.name=bi.KHR_MATERIALS_UNLIT}getMaterialType(){return go}extendParams(e,n,i){const r=[];e.color=new Ut(1,1,1),e.opacity=1;const a=n.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const s=a.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],dh),e.opacity=s[3]}a.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",a.baseColorTexture,Om))}return Promise.all(r)}}class HEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name].emissiveStrength;return a!==void 0&&(n.emissiveIntensity=a),Promise.resolve()}}class VEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(n.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&a.push(i.assignTexture(n,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&a.push(i.assignTexture(n,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(a.push(i.assignTexture(n,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const o=s.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new ft(o,o)}return Promise.all(a)}}class GEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return n.dispersion=a.dispersion!==void 0?a.dispersion:0,Promise.resolve()}}class WEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(n.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&a.push(i.assignTexture(n,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(n.iridescenceIOR=s.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&a.push(i.assignTexture(n,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(a)}}class qEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];n.sheenColor=new Ut(0,0,0),n.sheenRoughness=0,n.sheen=1;const s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){const o=s.sheenColorFactor;n.sheenColor.setRGB(o[0],o[1],o[2],dh)}return s.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&a.push(i.assignTexture(n,"sheenColorMap",s.sheenColorTexture,Om)),s.sheenRoughnessTexture!==void 0&&a.push(i.assignTexture(n,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class XEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(n.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&a.push(i.assignTexture(n,"transmissionMap",s.transmissionTexture)),Promise.all(a)}}class YEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];n.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&a.push(i.assignTexture(n,"thicknessMap",s.thicknessTexture)),n.attenuationDistance=s.attenuationDistance||1/0;const o=s.attenuationColor||[1,1,1];return n.attenuationColor=new Ut().setRGB(o[0],o[1],o[2],dh),Promise.all(a)}}class $Ee{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return n.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class KEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];n.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&a.push(i.assignTexture(n,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return n.specularColor=new Ut().setRGB(o[0],o[1],o[2],dh),s.specularColorTexture!==void 0&&a.push(i.assignTexture(n,"specularColorMap",s.specularColorTexture,Om)),Promise.all(a)}}class JEe{constructor(e){this.parser=e,this.name=bi.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return n.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&a.push(i.assignTexture(n,"bumpMap",s.bumpTexture)),Promise.all(a)}}class ZEe{constructor(e){this.parser=e,this.name=bi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Nc}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(n.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(n.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&a.push(i.assignTexture(n,"anisotropyMap",s.anisotropyTexture)),Promise.all(a)}}class QEe{constructor(e){this.parser=e,this.name=bi.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],s=n.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,a.source,s)}}class eMe{constructor(e){this.parser=e,this.name=bi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[n])return null;const s=a.extensions[n],o=r.images[s.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class tMe{constructor(e){this.parser=e,this.name=bi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[n])return null;const s=a.extensions[n],o=r.images[s.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class nMe{constructor(e){this.name=bi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new Uint8Array(o,l,c);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(d){return d.buffer}):s.ready.then(function(){const d=new ArrayBuffer(u*f);return s.decodeGltfBuffer(new Uint8Array(d),u,f,h,r.mode,r.filter),d})})}else return null}}class iMe{constructor(e){this.name=bi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Jl.TRIANGLES&&c.mode!==Jl.TRIANGLE_STRIP&&c.mode!==Jl.TRIANGLE_FAN&&c.mode!==void 0)return null;const s=i.extensions[this.name].attributes,o=[],l={};for(const c in s)o.push(this.parser.getDependency("accessor",s[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,d=[];for(const m of f){const y=new Ct,v=new Y,g=new Hn,x=new Y(1,1,1),_=new M2(m.geometry,m.material,h);for(let E=0;E<h;E++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,E),l.SCALE&&x.fromBufferAttribute(l.SCALE,E),_.setMatrixAt(E,y.compose(v,g,x));for(const E in l)if(E==="_COLOR_0"){const T=l[E];_.instanceColor=new Mh(T.array,T.itemSize,T.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&m.geometry.setAttribute(E,l[E]);Ti.prototype.copy.call(_,m),this.parser.assignFinalMaterial(_),d.push(_)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const hQ="glTF",bx=12,cj={JSON:1313821514,BIN:5130562};class rMe{constructor(e){this.name=bi.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,bx);if(this.header={magic:zA(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==hQ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-bx,r=new DataView(e,bx);let a=0;for(;a<i;){const s=r.getUint32(a,!0);a+=4;const o=r.getUint32(a,!0);if(a+=4,o===cj.JSON){const l=new Uint8Array(e,bx+a,s);this.content=zA(l)}else if(o===cj.BIN){const l=bx+a;this.body=e.slice(l,l+s)}a+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class aMe{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},l={},c={};for(const u in s){const f=KN[u]||u.toLowerCase();o[f]=s[u]}for(const u in e.attributes){const f=KN[u]||u.toLowerCase();if(s[u]!==void 0){const h=i.accessors[e.attributes[u]],d=X0[h.componentType];c[f]=d.name,l[f]=h.normalized===!0}}return n.getDependency("bufferView",a).then(function(u){return new Promise(function(f,h){r.decodeDracoFile(u,function(d){for(const m in d.attributes){const y=d.attributes[m],v=l[m];v!==void 0&&(y.normalized=v)}f(d)},o,c,dh,h)})})}}class sMe{constructor(){this.name=bi.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class oMe{constructor(){this.name=bi.KHR_MESH_QUANTIZATION}}class dQ extends vv{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r*3+r;for(let s=0;s!==r;s++)n[s]=i[a+s];return n}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=r-n,f=(i-n)/u,h=f*f,d=h*f,m=e*c,y=m-c,v=-2*d+3*h,g=d-h,x=1-v,_=g-h+f;for(let E=0;E!==o;E++){const T=s[y+E+o],w=s[y+E+l]*u,A=s[m+E+o],C=s[m+E]*u;a[E]=x*T+_*w+v*A+g*C}return a}}const lMe=new Hn;class cMe extends dQ{interpolate_(e,n,i,r){const a=super.interpolate_(e,n,i,r);return lMe.fromArray(a).normalize().toArray(a),a}}const Jl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},X0={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},uj={9728:es,9729:Wi,9984:h2,9985:G0,9986:Tm,9987:dc},fj={33071:ga,33648:_y,10497:ip},kD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},KN={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...yS>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uMe={CUBICSPLINE:void 0,LINEAR:Ay,STEP:Ty},DD={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function fMe(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new yv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Al})),t.DefaultMaterial}function Qp(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Yf(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function hMe(t,e,n){let i=!1,r=!1,a=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(t);const s=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(i){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;s.push(h)}if(r){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;o.push(h)}if(a){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return i&&(t.morphAttributes.position=u),r&&(t.morphAttributes.normal=f),a&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function dMe(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function pMe(t){let e;const n=t.extensions&&t.extensions[bi.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+OD(n.attributes):e=t.indices+":"+OD(t.attributes)+":"+t.mode,t.targets!==void 0)for(let i=0,r=t.targets.length;i<r;i++)e+=":"+OD(t.targets[i]);return e}function OD(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function JN(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function mMe(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const gMe=new Ct;class bMe{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new FEe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,a=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&a<98?this.textureLoader=new Ny(this.options.manager):this.textureLoader=new cZ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Es(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){const o={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return Qp(a,o,r),Yf(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,a=n.length;r<a;r++){const s=n[r].joints;for(let o=0,l=s.length;o<l;o++)e[s[o]].isBone=!0}for(let r=0,a=e.length;r<a;r++){const s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),a=(s,o)=>{const l=this.associations.get(s);l!=null&&this.associations.set(o,l);for(const[c,u]of s.children.entries())a(u,o.children[c])};return a(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const a=e(n[r]);a&&i.push(a)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(a){return a.loadNode&&a.loadNode(n)});break;case"mesh":r=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(a,s){return i.getDependency(e,s)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[bi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(a,s){i.load(Xd.resolveURL(n.uri,r.path),a,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,a=n.byteOffset||0;return i.slice(a,a+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const s=kD[r.type],o=X0[r.componentType],l=r.normalized===!0,c=new o(r.count*s);return Promise.resolve(new Tn(c,s,l))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(s){const o=s[0],l=kD[r.type],c=X0[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=r.byteOffset||0,d=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let y,v;if(d&&d!==f){const g=Math.floor(h/d),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let _=n.cache.get(x);_||(y=new c(o,g*d,r.count*d/u),_=new uS(y,d/u),n.cache.add(x,_)),v=new Io(_,l,h%d/u,m)}else o===null?y=new c(r.count*l):y=new c(o,h,r.count*l),v=new Tn(y,l,m);if(r.sparse!==void 0){const g=kD.SCALAR,x=X0[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,T=new x(s[1],_,r.sparse.count*g),w=new c(s[2],E,r.sparse.count*l);o!==null&&(v=new Tn(v.array.slice(),v.itemSize,v.normalized));for(let A=0,C=T.length;A<C;A++){const D=T[A];if(v.setX(D,w[A*l]),l>=2&&v.setY(D,w[A*l+1]),l>=3&&v.setZ(D,w[A*l+2]),l>=4&&v.setW(D,w[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const n=this.json,i=this.options,a=n.textures[e].source,s=n.images[a];let o=this.textureLoader;if(s.uri){const l=i.manager.getHandler(s.uri);l!==null&&(o=l)}return this.loadTextureImage(e,a,o)}loadTextureImage(e,n,i){const r=this,a=this.json,s=a.textures[e],o=a.images[n],l=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(u){u.flipY=!1,u.name=s.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const h=(a.samplers||{})[s.sampler]||{};return u.magFilter=uj[h.magFilter]||Wi,u.minFilter=uj[h.minFilter]||dc,u.wrapS=fj[h.wrapS]||ip,u.wrapT=fj[h.wrapT]||ip,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const s=r.images[e],o=self.URL||self.webkitURL;let l=s.uri||"",c=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:s.mimeType});return l=o.createObjectURL(h),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,d){let m=h;n.isImageBitmapLoader===!0&&(m=function(y){const v=new tr(y);v.needsUpdate=!0,h(v)}),n.load(Xd.resolveURL(f,a.path),m,void 0,d)})}).then(function(f){return c===!0&&o.revokeObjectURL(l),Yf(f,s),f.userData.mimeType=s.mimeType||mMe(s.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,n,i,r){const a=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),a.extensions[bi.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[bi.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=a.associations.get(s);s=a.extensions[bi.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),a.associations.set(s,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===lj?Om:dh),"colorSpace"in s?s.colorSpace=r:s.encoding=r===Om?lj:UEe),e[n]=s,s})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,a=n.attributes.color!==void 0,s=n.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new A2,ka.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new qs,ka.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(o,l)),i=l}if(r||a||s){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),a&&(o+="vertex-colors:"),s&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),a&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return yv}loadMaterial(e){const n=this,i=this.json,r=this.extensions,a=i.materials[e];let s;const o={},l=a.extensions||{},c=[];if(l[bi.KHR_MATERIALS_UNLIT]){const f=r[bi.KHR_MATERIALS_UNLIT];s=f.getMaterialType(),c.push(f.extendParams(o,a,n))}else{const f=a.pbrMetallicRoughness||{};if(o.color=new Ut(1,1,1),o.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;o.color.setRGB(h[0],h[1],h[2],dh),o.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(o,"map",f.baseColorTexture,Om)),o.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,o.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(o,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(o,"roughnessMap",f.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,o)})))}a.doubleSided===!0&&(o.side=$r);const u=a.alphaMode||DD.OPAQUE;if(u===DD.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===DD.MASK&&(o.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&s!==go&&(c.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new ft(1,1),a.normalTexture.scale!==void 0)){const f=a.normalTexture.scale;o.normalScale.set(f,f)}if(a.occlusionTexture!==void 0&&s!==go&&(c.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&s!==go){const f=a.emissiveFactor;o.emissive=new Ut().setRGB(f[0],f[1],f[2],dh)}return a.emissiveTexture!==void 0&&s!==go&&c.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,Om)),Promise.all(c).then(function(){const f=new s(o);return a.name&&(f.name=a.name),Yf(f,a),n.associations.set(f,{materials:e}),a.extensions&&Qp(r,f,a),f})}createUniqueName(e){const n=ki.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function a(o){return i[bi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,n).then(function(l){return hj(l,o,n)})}const s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=pMe(c),f=r[u];if(f)s.push(f.promise);else{let h;c.extensions&&c.extensions[bi.KHR_DRACO_MESH_COMPRESSION]?h=a(c):h=hj(new An,c,n),r[u]={primitive:c,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(e){const n=this,i=this.json,r=this.extensions,a=i.meshes[e],s=a.primitives,o=[];for(let l=0,c=s.length;l<c;l++){const u=s[l].material===void 0?fMe(this.cache):this.getDependency("material",s[l].material);o.push(u)}return o.push(n.loadGeometries(s)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let d=0,m=u.length;d<m;d++){const y=u[d],v=s[d];let g;const x=c[d];if(v.mode===Jl.TRIANGLES||v.mode===Jl.TRIANGLE_STRIP||v.mode===Jl.TRIANGLE_FAN||v.mode===void 0)g=a.isSkinnedMesh===!0?new E2(y,x):new fi(y,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),v.mode===Jl.TRIANGLE_STRIP?g.geometry=oj(g.geometry,SU):v.mode===Jl.TRIANGLE_FAN&&(g.geometry=oj(g.geometry,AA));else if(v.mode===Jl.LINES)g=new Au(y,x);else if(v.mode===Jl.LINE_STRIP)g=new Th(y,x);else if(v.mode===Jl.LINE_LOOP)g=new DU(y,x);else if(v.mode===Jl.POINTS)g=new OU(y,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&dMe(g,a),g.name=n.createUniqueName(a.name||"mesh_"+e),Yf(g,a),v.extensions&&Qp(r,g,v),n.assignFinalMaterial(g),f.push(g)}for(let d=0,m=f.length;d<m;d++)n.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return a.extensions&&Qp(r,f[0],a),f[0];const h=new Zu;a.extensions&&Qp(r,h,a),n.associations.set(h,{meshes:e});for(let d=0,m=f.length;d<m;d++)h.add(f[d]);return h})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new Yr(pc.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Ph(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Yf(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,a=n.joints.length;r<a;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const a=r.pop(),s=r,o=[],l=[];for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f){o.push(f);const h=new Ct;a!==null&&h.fromArray(a.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new mv(o,l)})}loadAnimation(e){const n=this.json,i=this,r=n.animations[e],a=r.name?r.name:"animation_"+e,s=[],o=[],l=[],c=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const d=r.channels[f],m=r.samplers[d.sampler],y=d.target,v=y.node,g=r.parameters!==void 0?r.parameters[m.input]:m.input,x=r.parameters!==void 0?r.parameters[m.output]:m.output;y.node!==void 0&&(s.push(this.getDependency("node",v)),o.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",x)),c.push(m),u.push(y))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const h=f[0],d=f[1],m=f[2],y=f[3],v=f[4],g=[];for(let x=0,_=h.length;x<_;x++){const E=h[x],T=d[x],w=m[x],A=y[x],C=v[x];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const D=i._createAnimationTracks(E,T,w,A,C);if(D)for(let k=0;k<D.length;k++)g.push(D[k])}return new Iy(a,void 0,g)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(a){const s=i._getNodeRef(i.meshCache,r.mesh,a);return r.weights!==void 0&&s.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],a=i._loadNodeShallow(e),s=[],o=r.children||[];for(let c=0,u=o.length;c<u;c++)s.push(i.getDependency("node",o[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([a,Promise.all(s),l]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(h,gMe)});for(let d=0,m=f.length;d<m;d++)u.add(f[d]);return u})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=n.nodes[e],s=a.name?r.createUniqueName(a.name):"",o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),a.camera!==void 0&&o.push(r.getDependency("camera",a.camera).then(function(c){return r._getNodeRef(r.cameraCache,a.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(a.isBone===!0?u=new fS:c.length>1?u=new Zu:c.length===1?u=c[0]:u=new Ti,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(a.name&&(u.userData.name=a.name,u.name=s),Yf(u,a),a.extensions&&Qp(i,u,a),a.matrix!==void 0){const f=new Ct;f.fromArray(a.matrix),u.applyMatrix4(f)}else a.translation!==void 0&&u.position.fromArray(a.translation),a.rotation!==void 0&&u.quaternion.fromArray(a.rotation),a.scale!==void 0&&u.scale.fromArray(a.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,a=new Zu;i.name&&(a.name=r.createUniqueName(i.name)),Yf(a,i),i.extensions&&Qp(n,a,i);const s=i.nodes||[],o=[];for(let l=0,c=s.length;l<c;l++)o.push(r.getDependency("node",s[l]));return Promise.all(o).then(function(l){for(let u=0,f=l.length;u<f;u++)a.add(l[u]);const c=u=>{const f=new Map;for(const[h,d]of r.associations)(h instanceof ka||h instanceof tr)&&f.set(h,d);return u.traverse(h=>{const d=r.associations.get(h);d!=null&&f.set(h,d)}),f};return r.associations=c(a),a})}_createAnimationTracks(e,n,i,r,a){const s=[],o=e.name?e.name:e.uuid,l=[];cd[a.path]===cd.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(o);let c;switch(cd[a.path]){case cd.weights:c=ug;break;case cd.rotation:c=fg;break;case cd.position:case cd.scale:c=hg;break;default:switch(i.itemSize){case 1:c=ug;break;case 2:case 3:default:c=hg;break}break}const u=r.interpolation!==void 0?uMe[r.interpolation]:Ay,f=this._getArrayFromAccessor(i);for(let h=0,d=l.length;h<d;h++){const m=new c(l[h]+"."+cd[a.path],n.array,f,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),s.push(m)}return s}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const i=JN(n.constructor),r=new Float32Array(n.length);for(let a=0,s=n.length;a<s;a++)r[a]=n[a]*i;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof fg?cMe:dQ;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function yMe(t,e,n){const i=e.attributes,r=new vi;if(i.POSITION!==void 0){const o=n.json.accessors[i.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new Y(l[0],l[1],l[2]),new Y(c[0],c[1],c[2])),o.normalized){const u=JN(X0[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const o=new Y,l=new Y;for(let c=0,u=a.length;c<u;c++){const f=a[c];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],d=h.min,m=h.max;if(d!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(m[2]))),h.normalized){const y=JN(X0[h.componentType]);l.multiplyScalar(y)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}t.boundingBox=r;const s=new xr;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=s}function hj(t,e,n){const i=e.attributes,r=[];function a(s,o){return n.getDependency("accessor",s).then(function(l){t.setAttribute(o,l)})}for(const s in i){const o=KN[s]||s.toLowerCase();o in t.attributes||r.push(a(i[s],o))}if(e.indices!==void 0&&!t.index){const s=n.getDependency("accessor",e.indices).then(function(o){t.setIndex(o)});r.push(s)}return Yf(t,e),yMe(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?hMe(t,e.targets,n):t})}class vMe extends YU{constructor(e){super(e),this.type=Za}parse(e){const s=function(C,D){switch(C){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(D||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(D||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(D||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(D||""))}},u=`
`,f=function(C,D,k){D=D||1024;let B=C.pos,H=-1,G=0,V="",U=String.fromCharCode.apply(null,new Uint16Array(C.subarray(B,B+128)));for(;0>(H=U.indexOf(u))&&G<D&&B<C.byteLength;)V+=U,G+=U.length,B+=128,U+=String.fromCharCode.apply(null,new Uint16Array(C.subarray(B,B+128)));return-1<H?(C.pos+=G+H+1,V+U.slice(0,H)):!1},h=function(C){const D=/^#\?(\S+)/,k=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*FORMAT=(\S+)\s*$/,H=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,G={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let V,U;for((C.pos>=C.byteLength||!(V=f(C)))&&s(1,"no header found"),(U=V.match(D))||s(3,"bad initial token"),G.valid|=1,G.programtype=U[1],G.string+=V+`
`;V=f(C),V!==!1;){if(G.string+=V+`
`,V.charAt(0)==="#"){G.comments+=V+`
`;continue}if((U=V.match(k))&&(G.gamma=parseFloat(U[1])),(U=V.match(P))&&(G.exposure=parseFloat(U[1])),(U=V.match(B))&&(G.valid|=2,G.format=U[1]),(U=V.match(H))&&(G.valid|=4,G.height=parseInt(U[1],10),G.width=parseInt(U[2],10)),G.valid&2&&G.valid&4)break}return G.valid&2||s(3,"missing format specifier"),G.valid&4||s(3,"missing image size specifier"),G},d=function(C,D,k){const P=D;if(P<8||P>32767||C[0]!==2||C[1]!==2||C[2]&128)return new Uint8Array(C);P!==(C[2]<<8|C[3])&&s(3,"wrong scanline width");const B=new Uint8Array(4*D*k);B.length||s(4,"unable to allocate buffer space");let H=0,G=0;const V=4*P,U=new Uint8Array(4),F=new Uint8Array(V);let q=k;for(;q>0&&G<C.byteLength;){G+4>C.byteLength&&s(1),U[0]=C[G++],U[1]=C[G++],U[2]=C[G++],U[3]=C[G++],(U[0]!=2||U[1]!=2||(U[2]<<8|U[3])!=P)&&s(3,"bad rgbe scanline format");let X=0,z;for(;X<V&&G<C.byteLength;){z=C[G++];const he=z>128;if(he&&(z-=128),(z===0||X+z>V)&&s(3,"bad scanline data"),he){const $=C[G++];for(let Me=0;Me<z;Me++)F[X++]=$}else F.set(C.subarray(G,G+z),X),X+=z,G+=z}const ce=P;for(let he=0;he<ce;he++){let $=0;B[H]=F[he+$],$+=P,B[H+1]=F[he+$],$+=P,B[H+2]=F[he+$],$+=P,B[H+3]=F[he+$],H+=4}q--}return B},m=function(C,D,k,P){const B=C[D+3],H=Math.pow(2,B-128)/255;k[P+0]=C[D+0]*H,k[P+1]=C[D+1]*H,k[P+2]=C[D+2]*H,k[P+3]=1},y=function(C,D,k,P){const B=C[D+3],H=Math.pow(2,B-128)/255;k[P+0]=Rm.toHalfFloat(Math.min(C[D+0]*H,65504)),k[P+1]=Rm.toHalfFloat(Math.min(C[D+1]*H,65504)),k[P+2]=Rm.toHalfFloat(Math.min(C[D+2]*H,65504)),k[P+3]=Rm.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const g=h(v),x=g.width,_=g.height,E=d(v.subarray(v.pos),x,_);let T,w,A;switch(this.type){case vr:A=E.length/4;const C=new Float32Array(A*4);for(let k=0;k<A;k++)m(E,k*4,C,k*4);T=C,w=vr;break;case Za:A=E.length/4;const D=new Uint16Array(A*4);for(let k=0;k<A;k++)y(E,k*4,D,k*4);T=D,w=Za;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:_,data:T,header:g.string,gamma:g.gamma,exposure:g.exposure,type:w}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(s,o){switch(s.type){case vr:case Za:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Wi,s.magFilter=Wi,s.generateMipmaps=!1,s.flipY=!0;break}n&&n(s,o)}return super.load(e,a,i,r)}}const yx=yS>=152;class xMe extends YU{constructor(e){super(e),this.type=Za}parse(e){const D=Math.pow(2.7182818,2.2);function k(ie,oe){for(var Ae=0,qe=0;qe<65536;++qe)(qe==0||ie[qe>>3]&1<<(qe&7))&&(oe[Ae++]=qe);for(var at=Ae-1;Ae<65536;)oe[Ae++]=0;return at}function P(ie){for(var oe=0;oe<16384;oe++)ie[oe]={},ie[oe].len=0,ie[oe].lit=0,ie[oe].p=null}const B={l:0,c:0,lc:0};function H(ie,oe,Ae,qe,at){for(;Ae<ie;)oe=oe<<8|Xt(qe,at),Ae+=8;Ae-=ie,B.l=oe>>Ae&(1<<ie)-1,B.c=oe,B.lc=Ae}const G=new Array(59);function V(ie){for(var oe=0;oe<=58;++oe)G[oe]=0;for(var oe=0;oe<65537;++oe)G[ie[oe]]+=1;for(var Ae=0,oe=58;oe>0;--oe){var qe=Ae+G[oe]>>1;G[oe]=Ae,Ae=qe}for(var oe=0;oe<65537;++oe){var at=ie[oe];at>0&&(ie[oe]=at|G[at]++<<6)}}function U(ie,oe,Ae,qe,at,Ze,Tt){for(var Q=Ae,me=0,_e=0;at<=Ze;at++){if(Q.value-Ae.value>qe)return!1;H(6,me,_e,ie,Q);var Ee=B.l;if(me=B.c,_e=B.lc,Tt[at]=Ee,Ee==63){if(Q.value-Ae.value>qe)throw"Something wrong with hufUnpackEncTable";H(8,me,_e,ie,Q);var ye=B.l+6;if(me=B.c,_e=B.lc,at+ye>Ze+1)throw"Something wrong with hufUnpackEncTable";for(;ye--;)Tt[at++]=0;at--}else if(Ee>=59){var ye=Ee-59+2;if(at+ye>Ze+1)throw"Something wrong with hufUnpackEncTable";for(;ye--;)Tt[at++]=0;at--}}V(Tt)}function F(ie){return ie&63}function q(ie){return ie>>6}function X(ie,oe,Ae,qe){for(;oe<=Ae;oe++){var at=q(ie[oe]),Ze=F(ie[oe]);if(at>>Ze)throw"Invalid table entry";if(Ze>14){var Tt=qe[at>>Ze-14];if(Tt.len)throw"Invalid table entry";if(Tt.lit++,Tt.p){var Q=Tt.p;Tt.p=new Array(Tt.lit);for(var me=0;me<Tt.lit-1;++me)Tt.p[me]=Q[me]}else Tt.p=new Array(1);Tt.p[Tt.lit-1]=oe}else if(Ze)for(var _e=0,me=1<<14-Ze;me>0;me--){var Tt=qe[(at<<14-Ze)+_e];if(Tt.len||Tt.p)throw"Invalid table entry";Tt.len=Ze,Tt.lit=oe,_e++}}return!0}const z={c:0,lc:0};function ce(ie,oe,Ae,qe){ie=ie<<8|Xt(Ae,qe),oe+=8,z.c=ie,z.lc=oe}const he={c:0,lc:0};function $(ie,oe,Ae,qe,at,Ze,Tt,Q,me,_e){if(ie==oe){qe<8&&(ce(Ae,qe,at,Tt),Ae=z.c,qe=z.lc),qe-=8;var Ee=Ae>>qe,Ee=new Uint8Array([Ee])[0];if(me.value+Ee>_e)return!1;for(var ye=Q[me.value-1];Ee-- >0;)Q[me.value++]=ye}else if(me.value<_e)Q[me.value++]=ie;else return!1;he.c=Ae,he.lc=qe}function Me(ie){return ie&65535}function Se(ie){var oe=Me(ie);return oe>32767?oe-65536:oe}const pe={a:0,b:0};function xe(ie,oe){var Ae=Se(ie),qe=Se(oe),at=qe,Ze=Ae+(at&1)+(at>>1),Tt=Ze,Q=Ze-at;pe.a=Tt,pe.b=Q}function Ne(ie,oe){var Ae=Me(ie),qe=Me(oe),at=Ae-(qe>>1)&65535,Ze=qe+at-32768&65535;pe.a=Ze,pe.b=at}function Ge(ie,oe,Ae,qe,at,Ze,Tt){for(var Q=Tt<16384,me=Ae>at?at:Ae,_e=1,Ee;_e<=me;)_e<<=1;for(_e>>=1,Ee=_e,_e>>=1;_e>=1;){for(var ye=0,pt=ye+Ze*(at-Ee),it=Ze*_e,dt=Ze*Ee,yt=qe*_e,Dt=qe*Ee,qt,Ke,nn,cn;ye<=pt;ye+=dt){for(var un=ye,Dn=ye+qe*(Ae-Ee);un<=Dn;un+=Dt){var Kt=un+yt,Yt=un+it,Xn=Yt+yt;Q?(xe(ie[un+oe],ie[Yt+oe]),qt=pe.a,nn=pe.b,xe(ie[Kt+oe],ie[Xn+oe]),Ke=pe.a,cn=pe.b,xe(qt,Ke),ie[un+oe]=pe.a,ie[Kt+oe]=pe.b,xe(nn,cn),ie[Yt+oe]=pe.a,ie[Xn+oe]=pe.b):(Ne(ie[un+oe],ie[Yt+oe]),qt=pe.a,nn=pe.b,Ne(ie[Kt+oe],ie[Xn+oe]),Ke=pe.a,cn=pe.b,Ne(qt,Ke),ie[un+oe]=pe.a,ie[Kt+oe]=pe.b,Ne(nn,cn),ie[Yt+oe]=pe.a,ie[Xn+oe]=pe.b)}if(Ae&_e){var Yt=un+it;Q?xe(ie[un+oe],ie[Yt+oe]):Ne(ie[un+oe],ie[Yt+oe]),qt=pe.a,ie[Yt+oe]=pe.b,ie[un+oe]=qt}}if(at&_e)for(var un=ye,Dn=ye+qe*(Ae-Ee);un<=Dn;un+=Dt){var Kt=un+yt;Q?xe(ie[un+oe],ie[Kt+oe]):Ne(ie[un+oe],ie[Kt+oe]),qt=pe.a,ie[Kt+oe]=pe.b,ie[un+oe]=qt}Ee=_e,_e>>=1}return ye}function $e(ie,oe,Ae,qe,at,Ze,Tt,Q,me,_e){for(var Ee=0,ye=0,pt=Q,it=Math.trunc(at.value+(Ze+7)/8);at.value<it;)for(ce(Ee,ye,Ae,at),Ee=z.c,ye=z.lc;ye>=14;){var dt=Ee>>ye-14&16383,yt=oe[dt];if(yt.len)ye-=yt.len,$(yt.lit,Tt,Ee,ye,Ae,qe,at,me,_e,pt),Ee=he.c,ye=he.lc;else{if(!yt.p)throw"hufDecode issues";var Dt;for(Dt=0;Dt<yt.lit;Dt++){for(var qt=F(ie[yt.p[Dt]]);ye<qt&&at.value<it;)ce(Ee,ye,Ae,at),Ee=z.c,ye=z.lc;if(ye>=qt&&q(ie[yt.p[Dt]])==(Ee>>ye-qt&(1<<qt)-1)){ye-=qt,$(yt.p[Dt],Tt,Ee,ye,Ae,qe,at,me,_e,pt),Ee=he.c,ye=he.lc;break}}if(Dt==yt.lit)throw"hufDecode issues"}}var Ke=8-Ze&7;for(Ee>>=Ke,ye-=Ke;ye>0;){var yt=oe[Ee<<14-ye&16383];if(yt.len)ye-=yt.len,$(yt.lit,Tt,Ee,ye,Ae,qe,at,me,_e,pt),Ee=he.c,ye=he.lc;else throw"hufDecode issues"}return!0}function ct(ie,oe,Ae,qe,at,Ze){var Tt={value:0},Q=Ae.value,me=Je(oe,Ae),_e=Je(oe,Ae);Ae.value+=4;var Ee=Je(oe,Ae);if(Ae.value+=4,me<0||me>=65537||_e<0||_e>=65537)throw"Something wrong with HUF_ENCSIZE";var ye=new Array(65537),pt=new Array(16384);P(pt);var it=qe-(Ae.value-Q);if(U(ie,oe,Ae,it,me,_e,ye),Ee>8*(qe-(Ae.value-Q)))throw"Something wrong with hufUncompress";X(ye,me,_e,pt),$e(ye,pt,ie,oe,Ae,Ee,_e,Ze,at,Tt)}function At(ie,oe,Ae){for(var qe=0;qe<Ae;++qe)oe[qe]=ie[oe[qe]]}function fe(ie){for(var oe=1;oe<ie.length;oe++){var Ae=ie[oe-1]+ie[oe]-128;ie[oe]=Ae}}function Ve(ie,oe){for(var Ae=0,qe=Math.floor((ie.length+1)/2),at=0,Ze=ie.length-1;!(at>Ze||(oe[at++]=ie[Ae++],at>Ze));)oe[at++]=ie[qe++]}function je(ie){for(var oe=ie.byteLength,Ae=new Array,qe=0,at=new DataView(ie);oe>0;){var Ze=at.getInt8(qe++);if(Ze<0){var Tt=-Ze;oe-=Tt+1;for(var Q=0;Q<Tt;Q++)Ae.push(at.getUint8(qe++))}else{var Tt=Ze;oe-=2;for(var me=at.getUint8(qe++),Q=0;Q<Tt+1;Q++)Ae.push(me)}}return Ae}function ot(ie,oe,Ae,qe,at,Ze){var Kt=new DataView(Ze.buffer),Tt=Ae[ie.idx[0]].width,Q=Ae[ie.idx[0]].height,me=3,_e=Math.floor(Tt/8),Ee=Math.ceil(Tt/8),ye=Math.ceil(Q/8),pt=Tt-(Ee-1)*8,it=Q-(ye-1)*8,dt={value:0},yt=new Array(me),Dt=new Array(me),qt=new Array(me),Ke=new Array(me),nn=new Array(me);for(let Bn=0;Bn<me;++Bn)nn[Bn]=oe[ie.idx[Bn]],yt[Bn]=Bn<1?0:yt[Bn-1]+Ee*ye,Dt[Bn]=new Float32Array(64),qt[Bn]=new Uint16Array(64),Ke[Bn]=new Uint16Array(Ee*64);for(let Bn=0;Bn<ye;++Bn){var cn=8;Bn==ye-1&&(cn=it);var un=8;for(let _n=0;_n<Ee;++_n){_n==Ee-1&&(un=pt);for(let fn=0;fn<me;++fn)qt[fn].fill(0),qt[fn][0]=at[yt[fn]++],Te(dt,qe,qt[fn]),Ue(qt[fn],Dt[fn]),Oe(Dt[fn]);We(Dt);for(let fn=0;fn<me;++fn)Et(Dt[fn],Ke[fn],_n*64)}let Cn=0;for(let _n=0;_n<me;++_n){const fn=Ae[ie.idx[_n]].type;for(let hi=8*Bn;hi<8*Bn+cn;++hi){Cn=nn[_n][hi];for(let $i=0;$i<_e;++$i){const ei=$i*64+(hi&7)*8;Kt.setUint16(Cn+0*2*fn,Ke[_n][ei+0],!0),Kt.setUint16(Cn+1*2*fn,Ke[_n][ei+1],!0),Kt.setUint16(Cn+2*2*fn,Ke[_n][ei+2],!0),Kt.setUint16(Cn+3*2*fn,Ke[_n][ei+3],!0),Kt.setUint16(Cn+4*2*fn,Ke[_n][ei+4],!0),Kt.setUint16(Cn+5*2*fn,Ke[_n][ei+5],!0),Kt.setUint16(Cn+6*2*fn,Ke[_n][ei+6],!0),Kt.setUint16(Cn+7*2*fn,Ke[_n][ei+7],!0),Cn+=8*2*fn}}if(_e!=Ee)for(let hi=8*Bn;hi<8*Bn+cn;++hi){const $i=nn[_n][hi]+8*_e*2*fn,ei=_e*64+(hi&7)*8;for(let Ai=0;Ai<un;++Ai)Kt.setUint16($i+Ai*2*fn,Ke[_n][ei+Ai],!0)}}}for(var Dn=new Uint16Array(Tt),Kt=new DataView(Ze.buffer),Yt=0;Yt<me;++Yt){Ae[ie.idx[Yt]].decoded=!0;var Xn=Ae[ie.idx[Yt]].type;if(Ae[Yt].type==2)for(var yn=0;yn<Q;++yn){const Bn=nn[Yt][yn];for(var _i=0;_i<Tt;++_i)Dn[_i]=Kt.getUint16(Bn+_i*2*Xn,!0);for(var _i=0;_i<Tt;++_i)Kt.setFloat32(Bn+_i*2*Xn,Be(Dn[_i]),!0)}}}function Te(ie,oe,Ae){for(var qe,at=1;at<64;)qe=oe[ie.value],qe==65280?at=64:qe>>8==255?at+=qe&255:(Ae[at]=qe,at++),ie.value++}function Ue(ie,oe){oe[0]=Be(ie[0]),oe[1]=Be(ie[1]),oe[2]=Be(ie[5]),oe[3]=Be(ie[6]),oe[4]=Be(ie[14]),oe[5]=Be(ie[15]),oe[6]=Be(ie[27]),oe[7]=Be(ie[28]),oe[8]=Be(ie[2]),oe[9]=Be(ie[4]),oe[10]=Be(ie[7]),oe[11]=Be(ie[13]),oe[12]=Be(ie[16]),oe[13]=Be(ie[26]),oe[14]=Be(ie[29]),oe[15]=Be(ie[42]),oe[16]=Be(ie[3]),oe[17]=Be(ie[8]),oe[18]=Be(ie[12]),oe[19]=Be(ie[17]),oe[20]=Be(ie[25]),oe[21]=Be(ie[30]),oe[22]=Be(ie[41]),oe[23]=Be(ie[43]),oe[24]=Be(ie[9]),oe[25]=Be(ie[11]),oe[26]=Be(ie[18]),oe[27]=Be(ie[24]),oe[28]=Be(ie[31]),oe[29]=Be(ie[40]),oe[30]=Be(ie[44]),oe[31]=Be(ie[53]),oe[32]=Be(ie[10]),oe[33]=Be(ie[19]),oe[34]=Be(ie[23]),oe[35]=Be(ie[32]),oe[36]=Be(ie[39]),oe[37]=Be(ie[45]),oe[38]=Be(ie[52]),oe[39]=Be(ie[54]),oe[40]=Be(ie[20]),oe[41]=Be(ie[22]),oe[42]=Be(ie[33]),oe[43]=Be(ie[38]),oe[44]=Be(ie[46]),oe[45]=Be(ie[51]),oe[46]=Be(ie[55]),oe[47]=Be(ie[60]),oe[48]=Be(ie[21]),oe[49]=Be(ie[34]),oe[50]=Be(ie[37]),oe[51]=Be(ie[47]),oe[52]=Be(ie[50]),oe[53]=Be(ie[56]),oe[54]=Be(ie[59]),oe[55]=Be(ie[61]),oe[56]=Be(ie[35]),oe[57]=Be(ie[36]),oe[58]=Be(ie[48]),oe[59]=Be(ie[49]),oe[60]=Be(ie[57]),oe[61]=Be(ie[58]),oe[62]=Be(ie[62]),oe[63]=Be(ie[63])}function Oe(ie){const oe=.5*Math.cos(.7853975),Ae=.5*Math.cos(3.14159/16),qe=.5*Math.cos(3.14159/8),at=.5*Math.cos(3*3.14159/16),Ze=.5*Math.cos(5*3.14159/16),Tt=.5*Math.cos(3*3.14159/8),Q=.5*Math.cos(7*3.14159/16);for(var me=new Array(4),_e=new Array(4),Ee=new Array(4),ye=new Array(4),pt=0;pt<8;++pt){var it=pt*8;me[0]=qe*ie[it+2],me[1]=Tt*ie[it+2],me[2]=qe*ie[it+6],me[3]=Tt*ie[it+6],_e[0]=Ae*ie[it+1]+at*ie[it+3]+Ze*ie[it+5]+Q*ie[it+7],_e[1]=at*ie[it+1]-Q*ie[it+3]-Ae*ie[it+5]-Ze*ie[it+7],_e[2]=Ze*ie[it+1]-Ae*ie[it+3]+Q*ie[it+5]+at*ie[it+7],_e[3]=Q*ie[it+1]-Ze*ie[it+3]+at*ie[it+5]-Ae*ie[it+7],Ee[0]=oe*(ie[it+0]+ie[it+4]),Ee[3]=oe*(ie[it+0]-ie[it+4]),Ee[1]=me[0]+me[3],Ee[2]=me[1]-me[2],ye[0]=Ee[0]+Ee[1],ye[1]=Ee[3]+Ee[2],ye[2]=Ee[3]-Ee[2],ye[3]=Ee[0]-Ee[1],ie[it+0]=ye[0]+_e[0],ie[it+1]=ye[1]+_e[1],ie[it+2]=ye[2]+_e[2],ie[it+3]=ye[3]+_e[3],ie[it+4]=ye[3]-_e[3],ie[it+5]=ye[2]-_e[2],ie[it+6]=ye[1]-_e[1],ie[it+7]=ye[0]-_e[0]}for(var dt=0;dt<8;++dt)me[0]=qe*ie[16+dt],me[1]=Tt*ie[16+dt],me[2]=qe*ie[48+dt],me[3]=Tt*ie[48+dt],_e[0]=Ae*ie[8+dt]+at*ie[24+dt]+Ze*ie[40+dt]+Q*ie[56+dt],_e[1]=at*ie[8+dt]-Q*ie[24+dt]-Ae*ie[40+dt]-Ze*ie[56+dt],_e[2]=Ze*ie[8+dt]-Ae*ie[24+dt]+Q*ie[40+dt]+at*ie[56+dt],_e[3]=Q*ie[8+dt]-Ze*ie[24+dt]+at*ie[40+dt]-Ae*ie[56+dt],Ee[0]=oe*(ie[dt]+ie[32+dt]),Ee[3]=oe*(ie[dt]-ie[32+dt]),Ee[1]=me[0]+me[3],Ee[2]=me[1]-me[2],ye[0]=Ee[0]+Ee[1],ye[1]=Ee[3]+Ee[2],ye[2]=Ee[3]-Ee[2],ye[3]=Ee[0]-Ee[1],ie[0+dt]=ye[0]+_e[0],ie[8+dt]=ye[1]+_e[1],ie[16+dt]=ye[2]+_e[2],ie[24+dt]=ye[3]+_e[3],ie[32+dt]=ye[3]-_e[3],ie[40+dt]=ye[2]-_e[2],ie[48+dt]=ye[1]-_e[1],ie[56+dt]=ye[0]-_e[0]}function We(ie){for(var oe=0;oe<64;++oe){var Ae=ie[0][oe],qe=ie[1][oe],at=ie[2][oe];ie[0][oe]=Ae+1.5747*at,ie[1][oe]=Ae-.1873*qe-.4682*at,ie[2][oe]=Ae+1.8556*qe}}function Et(ie,oe,Ae){for(var qe=0;qe<64;++qe)oe[Ae+qe]=Rm.toHalfFloat(vt(ie[qe]))}function vt(ie){return ie<=1?Math.sign(ie)*Math.pow(Math.abs(ie),2.2):Math.sign(ie)*Math.pow(D,Math.abs(ie)-1)}function re(ie){return new DataView(ie.array.buffer,ie.offset.value,ie.size)}function J(ie){var oe=ie.viewer.buffer.slice(ie.offset.value,ie.offset.value+ie.size),Ae=new Uint8Array(je(oe)),qe=new Uint8Array(Ae.length);return fe(Ae),Ve(Ae,qe),new DataView(qe.buffer)}function ue(ie){var oe=ie.array.slice(ie.offset.value,ie.offset.value+ie.size),Ae=SE(oe),qe=new Uint8Array(Ae.length);return fe(Ae),Ve(Ae,qe),new DataView(qe.buffer)}function se(ie){for(var oe=ie.viewer,Ae={value:ie.offset.value},qe=new Uint16Array(ie.width*ie.scanlineBlockSize*(ie.channels*ie.type)),at=new Uint8Array(8192),Ze=0,Tt=new Array(ie.channels),Q=0;Q<ie.channels;Q++)Tt[Q]={},Tt[Q].start=Ze,Tt[Q].end=Tt[Q].start,Tt[Q].nx=ie.width,Tt[Q].ny=ie.lines,Tt[Q].size=ie.type,Ze+=Tt[Q].nx*Tt[Q].ny*Tt[Q].size;var me=wt(oe,Ae),_e=wt(oe,Ae);if(_e>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(me<=_e)for(var Q=0;Q<_e-me+1;Q++)at[Q+me]=Nt(oe,Ae);var Ee=new Uint16Array(65536),ye=k(at,Ee),pt=Je(oe,Ae);ct(ie.array,oe,Ae,pt,qe,Ze);for(var Q=0;Q<ie.channels;++Q)for(var it=Tt[Q],dt=0;dt<Tt[Q].size;++dt)Ge(qe,it.start+dt,it.nx,it.size,it.ny,it.nx*it.size,ye);At(Ee,qe,Ze);for(var yt=0,Dt=new Uint8Array(qe.buffer.byteLength),qt=0;qt<ie.lines;qt++)for(var Ke=0;Ke<ie.channels;Ke++){var it=Tt[Ke],nn=it.nx*it.size,cn=new Uint8Array(qe.buffer,it.end*2,nn*2);Dt.set(cn,yt),yt+=nn*2,it.end+=nn}return new DataView(Dt.buffer)}function be(ie){var oe=ie.array.slice(ie.offset.value,ie.offset.value+ie.size),Ae=SE(oe);const qe=ie.lines*ie.channels*ie.width,at=ie.type==1?new Uint16Array(qe):new Uint32Array(qe);let Ze=0,Tt=0;const Q=new Array(4);for(let me=0;me<ie.lines;me++)for(let _e=0;_e<ie.channels;_e++){let Ee=0;switch(ie.type){case 1:Q[0]=Ze,Q[1]=Q[0]+ie.width,Ze=Q[1]+ie.width;for(let ye=0;ye<ie.width;++ye){const pt=Ae[Q[0]++]<<8|Ae[Q[1]++];Ee+=pt,at[Tt]=Ee,Tt++}break;case 2:Q[0]=Ze,Q[1]=Q[0]+ie.width,Q[2]=Q[1]+ie.width,Ze=Q[2]+ie.width;for(let ye=0;ye<ie.width;++ye){const pt=Ae[Q[0]++]<<24|Ae[Q[1]++]<<16|Ae[Q[2]++]<<8;Ee+=pt,at[Tt]=Ee,Tt++}break}}return new DataView(at.buffer)}function Z(ie){var oe=ie.viewer,Ae={value:ie.offset.value},qe=new Uint8Array(ie.width*ie.lines*(ie.channels*ie.type*2)),at={version:ht(oe,Ae),unknownUncompressedSize:ht(oe,Ae),unknownCompressedSize:ht(oe,Ae),acCompressedSize:ht(oe,Ae),dcCompressedSize:ht(oe,Ae),rleCompressedSize:ht(oe,Ae),rleUncompressedSize:ht(oe,Ae),rleRawSize:ht(oe,Ae),totalAcUncompressedCount:ht(oe,Ae),totalDcUncompressedCount:ht(oe,Ae),acCompression:ht(oe,Ae)};if(at.version<2)throw"EXRLoader.parse: "+zi.compression+" version "+at.version+" is unsupported";for(var Ze=new Array,Tt=wt(oe,Ae)-2;Tt>0;){var Q=Ye(oe.buffer,Ae),me=Nt(oe,Ae),_e=me>>2&3,Ee=(me>>4)-1,ye=new Int8Array([Ee])[0],pt=Nt(oe,Ae);Ze.push({name:Q,index:ye,type:pt,compression:_e}),Tt-=Q.length+3}for(var it=zi.channels,dt=new Array(ie.channels),yt=0;yt<ie.channels;++yt){var Dt=dt[yt]={},qt=it[yt];Dt.name=qt.name,Dt.compression=0,Dt.decoded=!1,Dt.type=qt.pixelType,Dt.pLinear=qt.pLinear,Dt.width=ie.width,Dt.height=ie.lines}for(var Ke={idx:new Array(3)},nn=0;nn<ie.channels;++nn)for(var Dt=dt[nn],yt=0;yt<Ze.length;++yt){var cn=Ze[yt];Dt.name==cn.name&&(Dt.compression=cn.compression,cn.index>=0&&(Ke.idx[cn.index]=nn),Dt.offset=nn)}if(at.acCompressedSize>0)switch(at.acCompression){case 0:var Kt=new Uint16Array(at.totalAcUncompressedCount);ct(ie.array,oe,Ae,at.acCompressedSize,Kt,at.totalAcUncompressedCount);break;case 1:var un=ie.array.slice(Ae.value,Ae.value+at.totalAcUncompressedCount),Dn=SE(un),Kt=new Uint16Array(Dn.buffer);Ae.value+=at.totalAcUncompressedCount;break}if(at.dcCompressedSize>0){var Yt={array:ie.array,offset:Ae,size:at.dcCompressedSize},Xn=new Uint16Array(ue(Yt).buffer);Ae.value+=at.dcCompressedSize}if(at.rleRawSize>0){var un=ie.array.slice(Ae.value,Ae.value+at.rleCompressedSize),Dn=SE(un),yn=je(Dn.buffer);Ae.value+=at.rleCompressedSize}for(var _i=0,Bn=new Array(dt.length),yt=0;yt<Bn.length;++yt)Bn[yt]=new Array;for(var Cn=0;Cn<ie.lines;++Cn)for(var _n=0;_n<dt.length;++_n)Bn[_n].push(_i),_i+=dt[_n].width*ie.type*2;ot(Ke,Bn,dt,Kt,Xn,qe);for(var yt=0;yt<dt.length;++yt){var Dt=dt[yt];if(!Dt.decoded)switch(Dt.compression){case 2:for(var fn=0,hi=0,Cn=0;Cn<ie.lines;++Cn){for(var $i=Bn[yt][fn],ei=0;ei<Dt.width;++ei){for(var Ai=0;Ai<2*Dt.type;++Ai)qe[$i++]=yn[hi+Ai*Dt.width*Dt.height];hi++}fn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(qe.buffer)}function Ye(ie,oe){for(var Ae=new Uint8Array(ie),qe=0;Ae[oe.value+qe]!=0;)qe+=1;var at=new TextDecoder().decode(Ae.slice(oe.value,oe.value+qe));return oe.value=oe.value+qe+1,at}function tt(ie,oe,Ae){var qe=new TextDecoder().decode(new Uint8Array(ie).slice(oe.value,oe.value+Ae));return oe.value=oe.value+Ae,qe}function mt(ie,oe){var Ae=rt(ie,oe),qe=Je(ie,oe);return[Ae,qe]}function Fe(ie,oe){var Ae=Je(ie,oe),qe=Je(ie,oe);return[Ae,qe]}function rt(ie,oe){var Ae=ie.getInt32(oe.value,!0);return oe.value=oe.value+4,Ae}function Je(ie,oe){var Ae=ie.getUint32(oe.value,!0);return oe.value=oe.value+4,Ae}function Xt(ie,oe){var Ae=ie[oe.value];return oe.value=oe.value+1,Ae}function Nt(ie,oe){var Ae=ie.getUint8(oe.value);return oe.value=oe.value+1,Ae}const ht=function(ie,oe){let Ae;return"getBigInt64"in DataView.prototype?Ae=Number(ie.getBigInt64(oe.value,!0)):Ae=ie.getUint32(oe.value+4,!0)+Number(ie.getUint32(oe.value,!0)<<32),oe.value+=8,Ae};function zt(ie,oe){var Ae=ie.getFloat32(oe.value,!0);return oe.value+=4,Ae}function Re(ie,oe){return Rm.toHalfFloat(zt(ie,oe))}function Be(ie){var oe=(ie&31744)>>10,Ae=ie&1023;return(ie>>15?-1:1)*(oe?oe===31?Ae?NaN:1/0:Math.pow(2,oe-15)*(1+Ae/1024):6103515625e-14*(Ae/1024))}function wt(ie,oe){var Ae=ie.getUint16(oe.value,!0);return oe.value+=2,Ae}function Wt(ie,oe){return Be(wt(ie,oe))}function ut(ie,oe,Ae,qe){for(var at=Ae.value,Ze=[];Ae.value<at+qe-1;){var Tt=Ye(oe,Ae),Q=rt(ie,Ae),me=Nt(ie,Ae);Ae.value+=3;var _e=rt(ie,Ae),Ee=rt(ie,Ae);Ze.push({name:Tt,pixelType:Q,pLinear:me,xSampling:_e,ySampling:Ee})}return Ae.value+=1,Ze}function gt(ie,oe){var Ae=zt(ie,oe),qe=zt(ie,oe),at=zt(ie,oe),Ze=zt(ie,oe),Tt=zt(ie,oe),Q=zt(ie,oe),me=zt(ie,oe),_e=zt(ie,oe);return{redX:Ae,redY:qe,greenX:at,greenY:Ze,blueX:Tt,blueY:Q,whiteX:me,whiteY:_e}}function Mt(ie,oe){var Ae=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],qe=Nt(ie,oe);return Ae[qe]}function gn(ie,oe){var Ae=Je(ie,oe),qe=Je(ie,oe),at=Je(ie,oe),Ze=Je(ie,oe);return{xMin:Ae,yMin:qe,xMax:at,yMax:Ze}}function Vn(ie,oe){var Ae=["INCREASING_Y"],qe=Nt(ie,oe);return Ae[qe]}function zn(ie,oe){var Ae=zt(ie,oe),qe=zt(ie,oe);return[Ae,qe]}function Yi(ie,oe){var Ae=zt(ie,oe),qe=zt(ie,oe),at=zt(ie,oe);return[Ae,qe,at]}function Gn(ie,oe,Ae,qe,at){if(qe==="string"||qe==="stringvector"||qe==="iccProfile")return tt(oe,Ae,at);if(qe==="chlist")return ut(ie,oe,Ae,at);if(qe==="chromaticities")return gt(ie,Ae);if(qe==="compression")return Mt(ie,Ae);if(qe==="box2i")return gn(ie,Ae);if(qe==="lineOrder")return Vn(ie,Ae);if(qe==="float")return zt(ie,Ae);if(qe==="v2f")return zn(ie,Ae);if(qe==="v3f")return Yi(ie,Ae);if(qe==="int")return rt(ie,Ae);if(qe==="rational")return mt(ie,Ae);if(qe==="timecode")return Fe(ie,Ae);if(qe==="preview")return Ae.value+=at,"skipped";Ae.value+=at}function ea(ie,oe,Ae){const qe={};if(ie.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";qe.version=ie.getUint8(4);const at=ie.getUint8(5);qe.spec={singleTile:!!(at&2),longName:!!(at&4),deepFormat:!!(at&8),multiPart:!!(at&16)},Ae.value=8;for(var Ze=!0;Ze;){var Tt=Ye(oe,Ae);if(Tt==0)Ze=!1;else{var Q=Ye(oe,Ae),me=Je(ie,Ae),_e=Gn(ie,oe,Ae,Q,me);_e===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Q}'.`):qe[Tt]=_e}}if(at&-5)throw console.error("EXRHeader:",qe),"THREE.EXRLoader: provided file is currently unsupported.";return qe}function Ni(ie,oe,Ae,qe,at){const Ze={size:0,viewer:oe,array:Ae,offset:qe,width:ie.dataWindow.xMax-ie.dataWindow.xMin+1,height:ie.dataWindow.yMax-ie.dataWindow.yMin+1,channels:ie.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ie.channels[0].pixelType,uncompress:null,getter:null,format:null,[yx?"colorSpace":"encoding"]:null};switch(ie.compression){case"NO_COMPRESSION":Ze.lines=1,Ze.uncompress=re;break;case"RLE_COMPRESSION":Ze.lines=1,Ze.uncompress=J;break;case"ZIPS_COMPRESSION":Ze.lines=1,Ze.uncompress=ue;break;case"ZIP_COMPRESSION":Ze.lines=16,Ze.uncompress=ue;break;case"PIZ_COMPRESSION":Ze.lines=32,Ze.uncompress=se;break;case"PXR24_COMPRESSION":Ze.lines=16,Ze.uncompress=be;break;case"DWAA_COMPRESSION":Ze.lines=32,Ze.uncompress=Z;break;case"DWAB_COMPRESSION":Ze.lines=256,Ze.uncompress=Z;break;default:throw"EXRLoader.parse: "+ie.compression+" is unsupported"}if(Ze.scanlineBlockSize=Ze.lines,Ze.type==1)switch(at){case vr:Ze.getter=Wt,Ze.inputSize=2;break;case Za:Ze.getter=wt,Ze.inputSize=2;break}else if(Ze.type==2)switch(at){case vr:Ze.getter=zt,Ze.inputSize=4;break;case Za:Ze.getter=Re,Ze.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ze.type+" for "+ie.compression+".";Ze.blockCount=(ie.dataWindow.yMax+1)/Ze.scanlineBlockSize;for(var Tt=0;Tt<Ze.blockCount;Tt++)ht(oe,qe);Ze.outputChannels=Ze.channels==3?4:Ze.channels;const Q=Ze.width*Ze.height*Ze.outputChannels;switch(at){case vr:Ze.byteArray=new Float32Array(Q),Ze.channels<Ze.outputChannels&&Ze.byteArray.fill(1,0,Q);break;case Za:Ze.byteArray=new Uint16Array(Q),Ze.channels<Ze.outputChannels&&Ze.byteArray.fill(15360,0,Q);break;default:console.error("THREE.EXRLoader: unsupported type: ",at);break}return Ze.bytesPerLine=Ze.width*Ze.inputSize*Ze.channels,Ze.outputChannels==4?Ze.format=Jr:Ze.format=Nh,yx?Ze.colorSpace="srgb-linear":Ze.encoding=3e3,Ze}const nr=new DataView(e),wi=new Uint8Array(e),ta={value:0},zi=ea(nr,e,ta),dn=Ni(zi,nr,wi,ta,this.type),ya={value:0},Ii={R:0,G:1,B:2,A:3,Y:0};for(let ie=0;ie<dn.height/dn.scanlineBlockSize;ie++){const oe=Je(nr,ta);dn.size=Je(nr,ta),dn.lines=oe+dn.scanlineBlockSize>dn.height?dn.height-oe:dn.scanlineBlockSize;const qe=dn.size<dn.lines*dn.bytesPerLine?dn.uncompress(dn):re(dn);ta.value+=dn.size;for(let at=0;at<dn.scanlineBlockSize;at++){const Ze=at+ie*dn.scanlineBlockSize;if(Ze>=dn.height)break;for(let Tt=0;Tt<dn.channels;Tt++){const Q=Ii[zi.channels[Tt].name];for(let me=0;me<dn.width;me++){ya.value=(at*(dn.channels*dn.width)+Tt*dn.width+me)*dn.inputSize;const _e=(dn.height-1-Ze)*(dn.width*dn.outputChannels)+me*dn.outputChannels+Q;dn.byteArray[_e]=dn.getter(qe,ya)}}}}return{header:zi,width:dn.width,height:dn.height,data:dn.byteArray,format:dn.format,[yx?"colorSpace":"encoding"]:dn[yx?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(s,o){yx?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=Wi,s.magFilter=Wi,s.generateMipmaps=!1,s.flipY=!1,n&&n(s,o)}return super.load(e,a,i,r)}}const ID=new WeakMap;class _Me extends Cs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const a=new Es(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,s=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,o).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,a).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const i=JSON.stringify(n);if(ID.has(e)){const l=ID.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const a=this.workerNextTaskID++,s=e.byteLength,o=this._getWorker(a,s).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[a]={resolve:c,reject:u},r.postMessage({type:"decode",id:a,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&a&&this._releaseTask(r,a)}),ID.set(e,{key:i,promise:o}),o}_createGeometry(e){const n=new An;e.index&&n.setIndex(new Tn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],a=r.name,s=r.array,o=r.itemSize;n.setAttribute(a,new Tn(s,o))}return n}_loadLibrary(e,n){const i=new Es(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,a)=>{i.load(e,r,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const a=SMe.toString(),s=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(a){const s=a.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,a){return r._taskLoad>a._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function SMe(){let t,e;onmessage=function(s){const o=s.data;switch(o.type){case"init":t=o.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,d=new f.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const m=n(f,h,d,c),y=m.attributes.map(v=>v.array.buffer);m.index&&y.push(m.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:m},y)}catch(m){console.error(m),self.postMessage({type:"error",id:o.id,error:m.message})}finally{f.destroy(d),f.destroy(h)}});break}};function n(s,o,l,c){const u=c.attributeIDs,f=c.attributeTypes;let h,d;const m=o.GetEncodedGeometryType(l);if(m===s.TRIANGULAR_MESH)h=new s.Mesh,d=o.DecodeBufferToMesh(l,h);else if(m===s.POINT_CLOUD)h=new s.PointCloud,d=o.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const y={index:null,attributes:[]};for(const v in u){const g=self[f[v]];let x,_;if(c.useUniqueIDs)_=u[v],x=o.GetAttributeByUniqueId(h,_);else{if(_=o.GetAttributeId(h,s[u[v]]),_===-1)continue;x=o.GetAttribute(h,_)}y.attributes.push(r(s,o,h,v,g,x))}return m===s.TRIANGULAR_MESH&&(y.index=i(s,o,h)),s.destroy(h),y}function i(s,o,l){const u=l.num_faces()*3,f=u*4,h=s._malloc(f);o.GetTrianglesUInt32Array(l,f,h);const d=new Uint32Array(s.HEAPF32.buffer,h,u).slice();return s._free(h),{array:d,itemSize:1}}function r(s,o,l,c,u,f){const h=f.num_components(),m=l.num_points()*h,y=m*u.BYTES_PER_ELEMENT,v=a(s,u),g=s._malloc(y);o.GetAttributeDataArrayForAllPoints(l,f,v,y,g);const x=new u(s.HEAPF32.buffer,g,m).slice();return s._free(g),{name:c,array:x,itemSize:h}}function a(s,o){switch(o){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}const dj=new vi,wE=new Y;class $2 extends G2{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new ln(e,3)),this.setAttribute("uv",new ln(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,i=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),i.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new NA(n,6,1);return this.setAttribute("instanceStart",new Io(i,3,0)),this.setAttribute("instanceEnd",new Io(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,n=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new NA(i,n*2,1);return this.setAttribute("instanceColorStart",new Io(r,n,0)),this.setAttribute("instanceColorEnd",new Io(r,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new HU(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),dj.setFromBufferAttribute(n),this.boundingBox.union(dj))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)wE.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(wE)),wE.fromBufferAttribute(n,a),r=Math.max(r,i.distanceToSquared(wE));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class dB extends $2{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,n=3){const i=e.length-n,r=new Float32Array(2*i);if(n===3)for(let a=0;a<i;a+=n)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5];else for(let a=0;a<i;a+=n)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5],r[2*a+6]=e[a+6],r[2*a+7]=e[a+7];return super.setColors(r,n),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class K2 extends is{constructor(e){super({type:"LineMaterial",uniforms:b_.clone(b_.merge([Zt.common,Zt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ft(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${yS>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const ND=new ni,pj=new Y,mj=new Y,ss=new ni,os=new ni,Fu=new ni,PD=new Y,LD=new Ct,hs=new bu,gj=new Y,EE=new vi,ME=new xr,zu=new ni;let $u,Jm;function bj(t,e,n){return zu.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),zu.multiplyScalar(1/zu.w),zu.x=Jm/n.width,zu.y=Jm/n.height,zu.applyMatrix4(t.projectionMatrixInverse),zu.multiplyScalar(1/zu.w),Math.abs(Math.max(zu.x,zu.y))}function wMe(t,e){const n=t.matrixWorld,i=t.geometry,r=i.attributes.instanceStart,a=i.attributes.instanceEnd,s=Math.min(i.instanceCount,r.count);for(let o=0,l=s;o<l;o++){hs.start.fromBufferAttribute(r,o),hs.end.fromBufferAttribute(a,o),hs.applyMatrix4(n);const c=new Y,u=new Y;$u.distanceSqToSegment(hs.start,hs.end,u,c),u.distanceTo(c)<Jm*.5&&e.push({point:u,pointOnLine:c,distance:$u.origin.distanceTo(u),object:t,face:null,faceIndex:o,uv:null,[aQ]:null})}}function EMe(t,e,n){const i=e.projectionMatrix,a=t.material.resolution,s=t.matrixWorld,o=t.geometry,l=o.attributes.instanceStart,c=o.attributes.instanceEnd,u=Math.min(o.instanceCount,l.count),f=-e.near;$u.at(1,Fu),Fu.w=1,Fu.applyMatrix4(e.matrixWorldInverse),Fu.applyMatrix4(i),Fu.multiplyScalar(1/Fu.w),Fu.x*=a.x/2,Fu.y*=a.y/2,Fu.z=0,PD.copy(Fu),LD.multiplyMatrices(e.matrixWorldInverse,s);for(let h=0,d=u;h<d;h++){if(ss.fromBufferAttribute(l,h),os.fromBufferAttribute(c,h),ss.w=1,os.w=1,ss.applyMatrix4(LD),os.applyMatrix4(LD),ss.z>f&&os.z>f)continue;if(ss.z>f){const _=ss.z-os.z,E=(ss.z-f)/_;ss.lerp(os,E)}else if(os.z>f){const _=os.z-ss.z,E=(os.z-f)/_;os.lerp(ss,E)}ss.applyMatrix4(i),os.applyMatrix4(i),ss.multiplyScalar(1/ss.w),os.multiplyScalar(1/os.w),ss.x*=a.x/2,ss.y*=a.y/2,os.x*=a.x/2,os.y*=a.y/2,hs.start.copy(ss),hs.start.z=0,hs.end.copy(os),hs.end.z=0;const y=hs.closestPointToPointParameter(PD,!0);hs.at(y,gj);const v=pc.lerp(ss.z,os.z,y),g=v>=-1&&v<=1,x=PD.distanceTo(gj)<Jm*.5;if(g&&x){hs.start.fromBufferAttribute(l,h),hs.end.fromBufferAttribute(c,h),hs.start.applyMatrix4(s),hs.end.applyMatrix4(s);const _=new Y,E=new Y;$u.distanceSqToSegment(hs.start,hs.end,E,_),n.push({point:E,pointOnLine:_,distance:$u.origin.distanceTo(E),object:t,face:null,faceIndex:h,uv:null,[aQ]:null})}}}class pB extends fi{constructor(e=new $2,n=new K2({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*n.count);for(let s=0,o=0,l=n.count;s<l;s++,o+=2)pj.fromBufferAttribute(n,s),mj.fromBufferAttribute(i,s),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+pj.distanceTo(mj);const a=new NA(r,2,1);return e.setAttribute("instanceDistanceStart",new Io(a,1,0)),e.setAttribute("instanceDistanceEnd",new Io(a,1,1)),this}raycast(e,n){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;$u=e.ray;const s=this.matrixWorld,o=this.geometry,l=this.material;Jm=l.linewidth+a,o.boundingSphere===null&&o.computeBoundingSphere(),ME.copy(o.boundingSphere).applyMatrix4(s);let c;if(i)c=Jm*.5;else{const f=Math.max(r.near,ME.distanceToPoint($u.origin));c=bj(r,f,l.resolution)}if(ME.radius+=c,$u.intersectsSphere(ME)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),EE.copy(o.boundingBox).applyMatrix4(s);let u;if(i)u=Jm*.5;else{const f=Math.max(r.near,EE.distanceToPoint($u.origin));u=bj(r,f,l.resolution)}EE.expandByScalar(u),$u.intersectsBox(EE)!==!1&&(i?wMe(this,n):EMe(this,r,n))}onBeforeRender(e){const n=this.material.uniforms;n&&n.resolution&&(e.getViewport(ND),this.material.uniforms.resolution.value.set(ND.z,ND.w))}}class pQ extends pB{constructor(e=new dB,n=new K2({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}const MMe=new Y,TMe=new Y,AMe=new Y,CMe=(t,e,n)=>{const i=n.width/2,r=n.height/2;e.updateMatrixWorld(!1);const a=t.project(e);return a.x=a.x*i+i,a.y=-(a.y*r)+r,a},RMe=(t,e,n,i=1)=>{const r=MMe.set(t.x/n.width*2-1,-(t.y/n.height)*2+1,i);return r.unproject(e),r},mQ=(t,e,n,i)=>{const r=CMe(AMe.copy(t),n,i);let a=0;for(let s=0;s<2;++s){const o=TMe.copy(r).setComponent(s,r.getComponent(s)+e),l=RMe(o,n,i,o.z);a=Math.max(a,t.distanceTo(l))}return a},mg=I.forwardRef(function({points:e,color:n=16777215,vertexColors:i,linewidth:r,lineWidth:a,segments:s,dashed:o,...l},c){var u,f;const h=ui(g=>g.size),d=I.useMemo(()=>s?new pB:new pQ,[s]),[m]=I.useState(()=>new K2),y=(i==null||(u=i[0])==null?void 0:u.length)===4?4:3,v=I.useMemo(()=>{const g=s?new $2:new dB,x=e.map(_=>{const E=Array.isArray(_);return _ instanceof Y||_ instanceof ni?[_.x,_.y,_.z]:_ instanceof ft?[_.x,_.y,0]:E&&_.length===3?[_[0],_[1],_[2]]:E&&_.length===2?[_[0],_[1],0]:_});if(g.setPositions(x.flat()),i){n=16777215;const _=i.map(E=>E instanceof Ut?E.toArray():E);g.setColors(_.flat(),y)}return g},[e,s,i,y]);return I.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),I.useLayoutEffect(()=>{o?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0},[o,m]),I.useEffect(()=>()=>{v.dispose(),m.dispose()},[v]),I.createElement("primitive",ts({object:d,ref:c},l),I.createElement("primitive",{object:v,attach:"geometry"}),I.createElement("primitive",ts({object:m,attach:"material",color:n,vertexColors:!!i,resolution:[h.width,h.height],linewidth:(f=r??a)!==null&&f!==void 0?f:1,dashed:o,transparent:y===4},l)))}),kMe=I.forwardRef(function({start:e,end:n,midA:i,midB:r,segments:a=20,...s},o){const l=I.useMemo(()=>{const c=e instanceof Y?e:new Y(...e),u=n instanceof Y?n:new Y(...n),f=i instanceof Y?i:new Y(...i),h=r instanceof Y?r:new Y(...r);return new UU(c,f,h,u).getPoints(a)},[e,n,i,r,a]);return I.createElement(mg,ts({ref:o,points:l},s))}),DMe=I.forwardRef(function({points:e,closed:n=!1,curveType:i="centripetal",tension:r=.5,segments:a=20,vertexColors:s,...o},l){const c=I.useMemo(()=>{const h=e.map(d=>d instanceof Y?d:new Y(...d));return new PU(h,n,i,r)},[e,n,i,r]),u=I.useMemo(()=>c.getPoints(a),[c,a]),f=I.useMemo(()=>{if(!s||s.length<2)return;if(s.length===a+1)return s;const h=s.map(y=>y instanceof Ut?y:new Ut(...y));n&&h.push(h[0].clone());const d=[h[0]],m=a/(h.length-1);for(let y=1;y<a;y++){const v=y%m/m,g=Math.floor(y/m);d.push(h[g].clone().lerp(h[g+1],v))}return d.push(h[h.length-1]),d},[s,a]);return I.createElement(mg,ts({ref:l,points:u,vertexColors:f},o))});function J2(t,e,n,i){var r;return r=class extends is{constructor(a){super({vertexShader:e,fragmentShader:n,...a});for(const s in t)this.uniforms[s]=new W2(t[s]),Object.defineProperty(this,s,{get(){return this.uniforms[s].value},set(o){this.uniforms[s].value=o}});this.uniforms=b_.clone(this.uniforms)}},r.key=pc.generateUUID(),r}const OMe=()=>parseInt(Rg.replace(/\D+/g,"")),gQ=OMe();/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Xr={LEFT:1,RIGHT:2,MIDDLE:4},nt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Bb={NONE:0,IN:1,OUT:-1};function em(t){return t.isPerspectiveCamera}function gd(t){return t.isOrthographicCamera}const ud=Math.PI*2,yj=Math.PI/2,bQ=1e-5,vx=Math.PI/180;function $c(t,e,n){return Math.max(e,Math.min(n,t))}function Mr(t,e=bQ){return Math.abs(t)<e}function Zi(t,e,n=bQ){return Mr(t-e,n)}function vj(t,e){return Math.round(t/e)*e}function xx(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function _x(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function TE(t,e,n,i,r=1/0,a){i=Math.max(1e-4,i);const s=2/i,o=s*a,l=1/(1+o+.48*o*o+.235*o*o*o);let c=t-e;const u=e,f=r*i;c=$c(c,-f,f),e=t-c;const h=(n.value+s*c)*a;n.value=(n.value-s*h)*l;let d=e+(c+h)*l;return u-t>0==d>u&&(d=u,n.value=(d-u)/a),d}function xj(t,e,n,i,r=1/0,a,s){i=Math.max(1e-4,i);const o=2/i,l=o*a,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,f=e.y,h=e.z,d=t.x-u,m=t.y-f,y=t.z-h;const v=u,g=f,x=h,_=r*i,E=_*_,T=d*d+m*m+y*y;if(T>E){const V=Math.sqrt(T);d=d/V*_,m=m/V*_,y=y/V*_}u=t.x-d,f=t.y-m,h=t.z-y;const w=(n.x+o*d)*a,A=(n.y+o*m)*a,C=(n.z+o*y)*a;n.x=(n.x-o*w)*c,n.y=(n.y-o*A)*c,n.z=(n.z-o*C)*c,s.x=u+(d+w)*c,s.y=f+(m+A)*c,s.z=h+(y+C)*c;const D=v-t.x,k=g-t.y,P=x-t.z,B=s.x-v,H=s.y-g,G=s.z-x;return D*B+k*H+P*G>0&&(s.x=v,s.y=g,s.z=x,n.x=(s.x-v)/a,n.y=(s.y-g)/a,n.z=(s.z-x)/a),s}function UD(t,e){e.set(0,0),t.forEach(n=>{e.x+=n.clientX,e.y+=n.clientY}),e.x/=t.length,e.y/=t.length}function BD(t,e){return gd(t)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}let IMe=class{constructor(){this._listeners={}}addEventListener(e,n){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e)}}};var FD;const NMe="3.1.0",AE=1/8,PMe=/Mac/.test((FD=globalThis?.navigator)===null||FD===void 0?void 0:FD.platform);let Pn,_j,CE,zD,To,Zn,Bi,Fb,Sx,ju,Hu,tm,Sj,wj,ol,zb,jb,Ej,jD,Mj,HD,VD,RE,LMe=class ZN extends IMe{static install(e){Pn=e.THREE,_j=Object.freeze(new Pn.Vector3(0,0,0)),CE=Object.freeze(new Pn.Vector3(0,1,0)),zD=Object.freeze(new Pn.Vector3(0,0,1)),To=new Pn.Vector2,Zn=new Pn.Vector3,Bi=new Pn.Vector3,Fb=new Pn.Vector3,Sx=new Pn.Vector3,ju=new Pn.Vector3,Hu=new Pn.Vector3,tm=new Pn.Vector3,Sj=new Pn.Vector3,wj=new Pn.Vector3,ol=new Pn.Spherical,zb=new Pn.Spherical,jb=new Pn.Box3,Ej=new Pn.Box3,jD=new Pn.Sphere,Mj=new Pn.Quaternion,HD=new Pn.Quaternion,VD=new Pn.Matrix4,RE=new Pn.Raycaster}static get ACTION(){return nt}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,n){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=nt.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Bb.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Pn.Vector3,this._focalOffsetVelocity=new Pn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(g,x,_,E)=>{let T,w;if(em(this._camera)){const A=Zn.copy(this._camera.position).sub(this._target),C=this._camera.getEffectiveFOV()*vx,D=A.length()*Math.tan(C*.5);T=this.truckSpeed*g*D/this._elementRect.height,w=this.truckSpeed*x*D/this._elementRect.height}else if(gd(this._camera)){const A=this._camera;T=this.truckSpeed*g*(A.right-A.left)/A.zoom/this._elementRect.width,w=this.truckSpeed*x*(A.top-A.bottom)/A.zoom/this._elementRect.height}else return;E?(_?this.setFocalOffset(this._focalOffsetEnd.x+T,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(T,0,!0),this.forward(-w,!0)):_?this.setFocalOffset(this._focalOffsetEnd.x+T,this._focalOffsetEnd.y+w,this._focalOffsetEnd.z,!0):this.truck(T,w,!0)},this._rotateInternal=(g,x)=>{const _=ud*this.azimuthRotateSpeed*g/this._elementRect.height,E=ud*this.polarRotateSpeed*x/this._elementRect.height;this.rotate(_,E,!0)},this._dollyInternal=(g,x,_)=>{const E=Math.pow(.95,-g*this.dollySpeed),T=this._sphericalEnd.radius,w=this._sphericalEnd.radius*E,A=$c(w,this.minDistance,this.maxDistance),C=A-w;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(w,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(C,!0),this._dollyToNoClamp(A,!0)):this._dollyToNoClamp(A,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?w:A)-T,this._dollyControlCoord.set(x,_)),this._lastDollyDirection=Math.sign(-g)},this._zoomInternal=(g,x,_)=>{const E=Math.pow(.95,g*this.dollySpeed),T=this._zoom,w=this._zoom*E;this.zoomTo(w,!0),this.dollyToCursor&&(this._changedZoom+=w-T,this._dollyControlCoord.set(x,_))},typeof Pn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Pn.Quaternion().setFromUnitVectors(this._camera.up,CE),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=nt.NONE,this._target=new Pn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Pn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Pn.Spherical().setFromVector3(Zn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Pn.Vector3,new Pn.Vector3,new Pn.Vector3,new Pn.Vector3],this._updateNearPlaneCorners(),this._boundary=new Pn.Box3(new Pn.Vector3(-1/0,-1/0,-1/0),new Pn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Pn.Vector2,this.mouseButtons={left:nt.ROTATE,middle:nt.DOLLY,right:nt.TRUCK,wheel:em(this._camera)?nt.DOLLY:gd(this._camera)?nt.ZOOM:nt.NONE},this.touches={one:nt.TOUCH_ROTATE,two:em(this._camera)?nt.TOUCH_DOLLY_TRUCK:gd(this._camera)?nt.TOUCH_ZOOM_TRUCK:nt.NONE,three:nt.TOUCH_TRUCK};const i=new Pn.Vector2,r=new Pn.Vector2,a=new Pn.Vector2,s=g=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),T=g.clientX/E.width,w=g.clientY/E.height;if(T<this._interactiveArea.left||T>this._interactiveArea.right||w<this._interactiveArea.top||w>this._interactiveArea.bottom)return}const x=g.pointerType!=="mouse"?null:(g.buttons&Xr.LEFT)===Xr.LEFT?Xr.LEFT:(g.buttons&Xr.MIDDLE)===Xr.MIDDLE?Xr.MIDDLE:(g.buttons&Xr.RIGHT)===Xr.RIGHT?Xr.RIGHT:null;if(x!==null){const E=this._findPointerByMouseButton(x);E&&this._disposePointer(E)}if((g.buttons&Xr.LEFT)===Xr.LEFT&&this._lockedPointer)return;const _={pointerId:g.pointerId,clientX:g.clientX,clientY:g.clientY,deltaX:0,deltaY:0,mouseButton:x};this._activePointers.push(_),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,h(g)},o=g=>{g.cancelable&&g.preventDefault();const x=g.pointerId,_=this._lockedPointer||this._findPointerById(x);if(_){if(_.clientX=g.clientX,_.clientY=g.clientY,_.deltaX=g.movementX,_.deltaY=g.movementY,this._state=0,g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(g.buttons&Xr.LEFT)===Xr.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(g.buttons&Xr.MIDDLE)===Xr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(g.buttons&Xr.RIGHT)===Xr.RIGHT&&(this._state=this._state|this.mouseButtons.right);d()}},l=g=>{const x=this._findPointerById(g.pointerId);if(!(x&&x===this._lockedPointer)){if(x&&this._disposePointer(x),g.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=nt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=nt.NONE;m()}};let c=-1;const u=g=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===nt.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const w=this._domElement.getBoundingClientRect(),A=g.clientX/w.width,C=g.clientY/w.height;if(A<this._interactiveArea.left||A>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}if(g.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===nt.ROTATE||this.mouseButtons.wheel===nt.TRUCK){const w=performance.now();c-w<1e3&&this._getClientRect(this._elementRect),c=w}const x=PMe?-1:-3,_=g.deltaMode===1||g.ctrlKey?g.deltaY/x:g.deltaY/(x*10),E=this.dollyToCursor?(g.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,T=this.dollyToCursor?(g.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case nt.ROTATE:{this._rotateInternal(g.deltaX,g.deltaY),this._isUserControllingRotate=!0;break}case nt.TRUCK:{this._truckInternal(g.deltaX,g.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case nt.SCREEN_PAN:{this._truckInternal(g.deltaX,g.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case nt.OFFSET:{this._truckInternal(g.deltaX,g.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case nt.DOLLY:{this._dollyInternal(-_,E,T),this._isUserControllingDolly=!0;break}case nt.ZOOM:{this._zoomInternal(-_,E,T),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},f=g=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===ZN.ACTION.NONE){const x=g instanceof PointerEvent?g.pointerId:0,_=this._findPointerById(x);_&&this._disposePointer(_),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}g.preventDefault()}},h=g=>{if(!this._enabled)return;if(UD(this._activePointers,To),this._getClientRect(this._elementRect),i.copy(To),r.copy(To),this._activePointers.length>=2){const _=To.x-this._activePointers[1].clientX,E=To.y-this._activePointers[1].clientY,T=Math.sqrt(_*_+E*E);a.set(0,T);const w=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,A=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(w,A)}if(this._state=0,!g)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in g&&g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(g.buttons&Xr.LEFT)===Xr.LEFT&&(this._state=this._state|this.mouseButtons.left),(g.buttons&Xr.MIDDLE)===Xr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(g.buttons&Xr.RIGHT)===Xr.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&nt.ROTATE)===nt.ROTATE||(this._state&nt.TOUCH_ROTATE)===nt.TOUCH_ROTATE||(this._state&nt.TOUCH_DOLLY_ROTATE)===nt.TOUCH_DOLLY_ROTATE||(this._state&nt.TOUCH_ZOOM_ROTATE)===nt.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&nt.TRUCK)===nt.TRUCK||(this._state&nt.SCREEN_PAN)===nt.SCREEN_PAN||(this._state&nt.TOUCH_TRUCK)===nt.TOUCH_TRUCK||(this._state&nt.TOUCH_SCREEN_PAN)===nt.TOUCH_SCREEN_PAN||(this._state&nt.TOUCH_DOLLY_TRUCK)===nt.TOUCH_DOLLY_TRUCK||(this._state&nt.TOUCH_DOLLY_SCREEN_PAN)===nt.TOUCH_DOLLY_SCREEN_PAN||(this._state&nt.TOUCH_ZOOM_TRUCK)===nt.TOUCH_ZOOM_TRUCK||(this._state&nt.TOUCH_ZOOM_SCREEN_PAN)===nt.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&nt.DOLLY)===nt.DOLLY||(this._state&nt.TOUCH_DOLLY)===nt.TOUCH_DOLLY||(this._state&nt.TOUCH_DOLLY_TRUCK)===nt.TOUCH_DOLLY_TRUCK||(this._state&nt.TOUCH_DOLLY_SCREEN_PAN)===nt.TOUCH_DOLLY_SCREEN_PAN||(this._state&nt.TOUCH_DOLLY_OFFSET)===nt.TOUCH_DOLLY_OFFSET||(this._state&nt.TOUCH_DOLLY_ROTATE)===nt.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&nt.ZOOM)===nt.ZOOM||(this._state&nt.TOUCH_ZOOM)===nt.TOUCH_ZOOM||(this._state&nt.TOUCH_ZOOM_TRUCK)===nt.TOUCH_ZOOM_TRUCK||(this._state&nt.TOUCH_ZOOM_SCREEN_PAN)===nt.TOUCH_ZOOM_SCREEN_PAN||(this._state&nt.TOUCH_ZOOM_OFFSET)===nt.TOUCH_ZOOM_OFFSET||(this._state&nt.TOUCH_ZOOM_ROTATE)===nt.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&nt.OFFSET)===nt.OFFSET||(this._state&nt.TOUCH_OFFSET)===nt.TOUCH_OFFSET||(this._state&nt.TOUCH_DOLLY_OFFSET)===nt.TOUCH_DOLLY_OFFSET||(this._state&nt.TOUCH_ZOOM_OFFSET)===nt.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},d=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,UD(this._activePointers,To);const x=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,_=x?-x.deltaX:r.x-To.x,E=x?-x.deltaY:r.y-To.y;if(r.copy(To),((this._state&nt.ROTATE)===nt.ROTATE||(this._state&nt.TOUCH_ROTATE)===nt.TOUCH_ROTATE||(this._state&nt.TOUCH_DOLLY_ROTATE)===nt.TOUCH_DOLLY_ROTATE||(this._state&nt.TOUCH_ZOOM_ROTATE)===nt.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(_,E),this._isUserControllingRotate=!0),(this._state&nt.DOLLY)===nt.DOLLY||(this._state&nt.ZOOM)===nt.ZOOM){const T=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,w=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,A=this.dollyDragInverted?-1:1;(this._state&nt.DOLLY)===nt.DOLLY?(this._dollyInternal(A*E*AE,T,w),this._isUserControllingDolly=!0):(this._zoomInternal(A*E*AE,T,w),this._isUserControllingZoom=!0)}if((this._state&nt.TOUCH_DOLLY)===nt.TOUCH_DOLLY||(this._state&nt.TOUCH_ZOOM)===nt.TOUCH_ZOOM||(this._state&nt.TOUCH_DOLLY_TRUCK)===nt.TOUCH_DOLLY_TRUCK||(this._state&nt.TOUCH_ZOOM_TRUCK)===nt.TOUCH_ZOOM_TRUCK||(this._state&nt.TOUCH_DOLLY_SCREEN_PAN)===nt.TOUCH_DOLLY_SCREEN_PAN||(this._state&nt.TOUCH_ZOOM_SCREEN_PAN)===nt.TOUCH_ZOOM_SCREEN_PAN||(this._state&nt.TOUCH_DOLLY_OFFSET)===nt.TOUCH_DOLLY_OFFSET||(this._state&nt.TOUCH_ZOOM_OFFSET)===nt.TOUCH_ZOOM_OFFSET||(this._state&nt.TOUCH_DOLLY_ROTATE)===nt.TOUCH_DOLLY_ROTATE||(this._state&nt.TOUCH_ZOOM_ROTATE)===nt.TOUCH_ZOOM_ROTATE){const T=To.x-this._activePointers[1].clientX,w=To.y-this._activePointers[1].clientY,A=Math.sqrt(T*T+w*w),C=a.y-A;a.set(0,A);const D=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,k=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&nt.TOUCH_DOLLY)===nt.TOUCH_DOLLY||(this._state&nt.TOUCH_DOLLY_ROTATE)===nt.TOUCH_DOLLY_ROTATE||(this._state&nt.TOUCH_DOLLY_TRUCK)===nt.TOUCH_DOLLY_TRUCK||(this._state&nt.TOUCH_DOLLY_SCREEN_PAN)===nt.TOUCH_DOLLY_SCREEN_PAN||(this._state&nt.TOUCH_DOLLY_OFFSET)===nt.TOUCH_DOLLY_OFFSET?(this._dollyInternal(C*AE,D,k),this._isUserControllingDolly=!0):(this._zoomInternal(C*AE,D,k),this._isUserControllingZoom=!0)}((this._state&nt.TRUCK)===nt.TRUCK||(this._state&nt.TOUCH_TRUCK)===nt.TOUCH_TRUCK||(this._state&nt.TOUCH_DOLLY_TRUCK)===nt.TOUCH_DOLLY_TRUCK||(this._state&nt.TOUCH_ZOOM_TRUCK)===nt.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(_,E,!1,!1),this._isUserControllingTruck=!0),((this._state&nt.SCREEN_PAN)===nt.SCREEN_PAN||(this._state&nt.TOUCH_SCREEN_PAN)===nt.TOUCH_SCREEN_PAN||(this._state&nt.TOUCH_DOLLY_SCREEN_PAN)===nt.TOUCH_DOLLY_SCREEN_PAN||(this._state&nt.TOUCH_ZOOM_SCREEN_PAN)===nt.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(_,E,!1,!0),this._isUserControllingTruck=!0),((this._state&nt.OFFSET)===nt.OFFSET||(this._state&nt.TOUCH_OFFSET)===nt.TOUCH_OFFSET||(this._state&nt.TOUCH_DOLLY_OFFSET)===nt.TOUCH_DOLLY_OFFSET||(this._state&nt.TOUCH_ZOOM_OFFSET)===nt.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(_,E,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},m=()=>{UD(this._activePointers,To),r.copy(To),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",y),this._domElement.ownerDocument.addEventListener("pointerlockerror",v),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),h())},this.unlockPointer=()=>{var g,x,_;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(g=this._domElement)===null||g===void 0||g.ownerDocument.exitPointerLock(),(x=this._domElement)===null||x===void 0||x.ownerDocument.removeEventListener("pointerlockchange",y),(_=this._domElement)===null||_===void 0||_.ownerDocument.removeEventListener("pointerlockerror",v),this.cancel()};const y=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},v=()=>{this.unlockPointer()};this._addAllEventListeners=g=>{this._domElement=g,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",s),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",u,{passive:!1}),this._domElement.addEventListener("contextmenu",f)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",u,{passive:!1}),this._domElement.removeEventListener("contextmenu",f),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",v))},this.cancel=()=>{this._state!==nt.NONE&&(this._state=nt.NONE,this._activePointers.length=0,m())},n&&this.connect(n),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=$c(e.width,0,1),this._interactiveArea.height=$c(e.height,0,1),this._interactiveArea.x=$c(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=$c(e.y,0,1-this._interactiveArea.height)}addEventListener(e,n){super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}rotate(e,n,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+n,i)}rotateAzimuthTo(e,n=!1){return this.rotateTo(e,this._sphericalEnd.phi,n)}rotatePolarTo(e,n=!1){return this.rotateTo(this._sphericalEnd.theta,e,n)}rotateTo(e,n,i=!1){this._isUserControllingRotate=!1;const r=$c(e,this.minAzimuthAngle,this.maxAzimuthAngle),a=$c(n,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=a,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const s=!i||Zi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Zi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(e,n=!1){return this.dollyTo(this._sphericalEnd.radius-e,n)}dollyTo(e,n=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Bb.NONE,this._changedDolly=0,this._dollyToNoClamp($c(e,this.minDistance,this.maxDistance),n)}_dollyToNoClamp(e,n=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const s=this._collisionTest(),o=Zi(s,this._spherical.radius);if(!(i>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,s)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,n||(this._spherical.radius=this._sphericalEnd.radius);const a=!n||Zi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(a)}dollyInFixed(e,n=!1){this._targetEnd.add(this._getCameraDirection(Sx).multiplyScalar(e)),n||this._target.copy(this._targetEnd);const i=!n||Zi(this._target.x,this._targetEnd.x,this.restThreshold)&&Zi(this._target.y,this._targetEnd.y,this.restThreshold)&&Zi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,n=!1){return this.zoomTo(this._zoomEnd+e,n)}zoomTo(e,n=!1){this._isUserControllingZoom=!1,this._zoomEnd=$c(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,n||(this._zoom=this._zoomEnd);const i=!n||Zi(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,n,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,n,i)}truck(e,n,i=!1){this._camera.updateMatrix(),ju.setFromMatrixColumn(this._camera.matrix,0),Hu.setFromMatrixColumn(this._camera.matrix,1),ju.multiplyScalar(e),Hu.multiplyScalar(-n);const r=Zn.copy(ju).add(Hu),a=Bi.copy(this._targetEnd).add(r);return this.moveTo(a.x,a.y,a.z,i)}forward(e,n=!1){Zn.setFromMatrixColumn(this._camera.matrix,0),Zn.crossVectors(this._camera.up,Zn),Zn.multiplyScalar(e);const i=Bi.copy(this._targetEnd).add(Zn);return this.moveTo(i.x,i.y,i.z,n)}elevate(e,n=!1){return Zn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Zn.x,this._targetEnd.y+Zn.y,this._targetEnd.z+Zn.z,n)}moveTo(e,n,i,r=!1){this._isUserControllingTruck=!1;const a=Zn.set(e,n,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,a,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const s=!r||Zi(this._target.x,this._targetEnd.x,this.restThreshold)&&Zi(this._target.y,this._targetEnd.y,this.restThreshold)&&Zi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}lookInDirectionOf(e,n,i,r=!1){const o=Zn.set(e,n,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(o.x,o.y,o.z,r)}fitToBox(e,n,{cover:i=!1,paddingLeft:r=0,paddingRight:a=0,paddingBottom:s=0,paddingTop:o=0}={}){const l=[],c=e.isBox3?jb.copy(e):jb.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=vj(this._sphericalEnd.theta,yj),f=vj(this._sphericalEnd.phi,yj);l.push(this.rotateTo(u,f,n));const h=Zn.setFromSpherical(this._sphericalEnd).normalize(),d=Mj.setFromUnitVectors(h,zD),m=Zi(Math.abs(h.y),1);m&&d.multiply(HD.setFromAxisAngle(CE,u)),d.multiply(this._yAxisUpSpaceInverse);const y=Ej.makeEmpty();Bi.copy(c.min).applyQuaternion(d),y.expandByPoint(Bi),Bi.copy(c.min).setX(c.max.x).applyQuaternion(d),y.expandByPoint(Bi),Bi.copy(c.min).setY(c.max.y).applyQuaternion(d),y.expandByPoint(Bi),Bi.copy(c.max).setZ(c.min.z).applyQuaternion(d),y.expandByPoint(Bi),Bi.copy(c.min).setZ(c.max.z).applyQuaternion(d),y.expandByPoint(Bi),Bi.copy(c.max).setY(c.min.y).applyQuaternion(d),y.expandByPoint(Bi),Bi.copy(c.max).setX(c.min.x).applyQuaternion(d),y.expandByPoint(Bi),Bi.copy(c.max).applyQuaternion(d),y.expandByPoint(Bi),y.min.x-=r,y.min.y-=s,y.max.x+=a,y.max.y+=o,d.setFromUnitVectors(zD,h),m&&d.premultiply(HD.invert()),d.premultiply(this._yAxisUpSpace);const v=y.getSize(Zn),g=y.getCenter(Bi).applyQuaternion(d);if(em(this._camera)){const x=this.getDistanceToFitBox(v.x,v.y,v.z,i);l.push(this.moveTo(g.x,g.y,g.z,n)),l.push(this.dollyTo(x,n)),l.push(this.setFocalOffset(0,0,0,n))}else if(gd(this._camera)){const x=this._camera,_=x.right-x.left,E=x.top-x.bottom,T=i?Math.max(_/v.x,E/v.y):Math.min(_/v.x,E/v.y);l.push(this.moveTo(g.x,g.y,g.z,n)),l.push(this.zoomTo(T,n)),l.push(this.setFocalOffset(0,0,0,n))}return Promise.all(l)}fitToSphere(e,n){const i=[],a="isObject3D"in e?ZN.createBoundingSphere(e,jD):jD.copy(e);if(i.push(this.moveTo(a.center.x,a.center.y,a.center.z,n)),em(this._camera)){const s=this.getDistanceToFitSphere(a.radius);i.push(this.dollyTo(s,n))}else if(gd(this._camera)){const s=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,l=2*a.radius,c=Math.min(s/l,o/l);i.push(this.zoomTo(c,n))}return i.push(this.setFocalOffset(0,0,0,n)),Promise.all(i)}setLookAt(e,n,i,r,a,s,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Bb.NONE,this._changedDolly=0;const l=Bi.set(r,a,s),c=Zn.set(e,n,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!o||Zi(this._target.x,this._targetEnd.x,this.restThreshold)&&Zi(this._target.y,this._targetEnd.y,this.restThreshold)&&Zi(this._target.z,this._targetEnd.z,this.restThreshold)&&Zi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Zi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Zi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerp(e,n,i,r=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Bb.NONE,this._changedDolly=0;const a=Zn.set(...e.target);if("spherical"in e)ol.set(...e.spherical);else{const f=Bi.set(...e.position);ol.setFromVector3(f.sub(a).applyQuaternion(this._yAxisUpSpace))}const s=Fb.set(...n.target);if("spherical"in n)zb.set(...n.spherical);else{const f=Bi.set(...n.position);zb.setFromVector3(f.sub(s).applyQuaternion(this._yAxisUpSpace))}this._targetEnd.copy(a.lerp(s,i));const o=zb.theta-ol.theta,l=zb.phi-ol.phi,c=zb.radius-ol.radius;this._sphericalEnd.set(ol.radius+c*i,ol.phi+l*i,ol.theta+o*i),this._needsUpdate=!0,r||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!r||Zi(this._target.x,this._targetEnd.x,this.restThreshold)&&Zi(this._target.y,this._targetEnd.y,this.restThreshold)&&Zi(this._target.z,this._targetEnd.z,this.restThreshold)&&Zi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Zi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Zi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,n,i,r,a,s,o,l,c,u,f,h,d,m=!1){return this.lerp({position:[e,n,i],target:[r,a,s]},{position:[o,l,c],target:[u,f,h]},d,m)}setPosition(e,n,i,r=!1){return this.setLookAt(e,n,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,n,i,r=!1){const a=this.getPosition(Zn),s=this.setLookAt(a.x,a.y,a.z,e,n,i,r);return this._sphericalEnd.phi=$c(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),s}setFocalOffset(e,n,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,n,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const a=!r||Zi(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Zi(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Zi(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}setOrbitPoint(e,n,i){this._camera.updateMatrixWorld(),ju.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Hu.setFromMatrixColumn(this._camera.matrixWorldInverse,1),tm.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Zn.set(e,n,i),a=r.distanceTo(this._camera.position),s=r.sub(this._camera.position);ju.multiplyScalar(s.x),Hu.multiplyScalar(s.y),tm.multiplyScalar(s.z),Zn.copy(ju).add(Hu).add(tm),Zn.z=Zn.z+a,this.dollyTo(a,!1),this.setFocalOffset(-Zn.x,Zn.y,-Zn.z,!1),this.moveTo(e,n,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,n,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Pn.Vector4,typeof e=="number"?this._viewport.set(e,n,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,n,i,r=!1){if(BD(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const a=e/n,s=this._camera.getEffectiveFOV()*vx,o=this._camera.aspect;return((r?a>o:a<o)?n:e/o)*.5/Math.tan(s*.5)+i*.5}getDistanceToFitSphere(e){if(BD(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const n=this._camera.getEffectiveFOV()*vx,i=Math.atan(Math.tan(n*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?n:i;return e/Math.sin(r*.5)}getTarget(e,n=!0){return(e&&e.isVector3?e:new Pn.Vector3).copy(n?this._targetEnd:this._target)}getPosition(e,n=!0){return(e&&e.isVector3?e:new Pn.Vector3).setFromSpherical(n?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(n?this._targetEnd:this._target)}getSpherical(e,n=!0){return(e||new Pn.Spherical).copy(n?this._sphericalEnd:this._spherical)}getFocalOffset(e,n=!0){return(e&&e.isVector3?e:new Pn.Vector3).copy(n?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){return this._sphericalEnd.theta=(this._sphericalEnd.theta%ud+ud)%ud,this._sphericalEnd.theta>Math.PI&&(this._sphericalEnd.theta-=ud),this._spherical.theta+=ud*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ud),this}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!Zi(this._camera.up.x,this._cameraUp0.x)||!Zi(this._camera.up.y,this._cameraUp0.y)||!Zi(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Zn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const n=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(n)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,CE),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Zn.subVectors(this._target,this._camera.position).normalize(),n=Bi.crossVectors(e,this._camera.up);this._camera.up.crossVectors(n,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Zn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const n=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,a=Sj.subVectors(this._targetEnd,this._target),s=wj.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(Mr(n))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=TE(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,e),this._needsUpdate=!0}if(Mr(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=TE(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,e),this._needsUpdate=!0}if(Mr(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=TE(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,e),this._needsUpdate=!0}if(Mr(a.x)&&Mr(a.y)&&Mr(a.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;xj(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Mr(s.x)&&Mr(s.y)&&Mr(s.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;xj(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Mr(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=TE(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}if(this.dollyToCursor){if(em(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance,h=this._camera,d=this._getCameraDirection(Sx),m=Zn.copy(d).cross(h.up).normalize();m.lengthSq()===0&&(m.x=1);const y=Bi.crossVectors(m,d),v=this._sphericalEnd.radius*Math.tan(h.getEffectiveFOV()*vx*.5),x=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,_=Fb.copy(this._targetEnd).add(m.multiplyScalar(this._dollyControlCoord.x*v*h.aspect)).add(y.multiplyScalar(this._dollyControlCoord.y*v)),E=Zn.copy(this._targetEnd).lerp(_,x),T=this._lastDollyDirection===Bb.IN&&this._spherical.radius<=this.minDistance,w=this._lastDollyDirection===Bb.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(T||w)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;const C=Bi.copy(d).multiplyScalar(-f);E.add(C)}this._boundary.clampPoint(E,E);const A=Bi.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(A),this._changedDolly-=f,Mr(this._changedDolly)&&(this._changedDolly=0)}else if(gd(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom,h=this._camera,d=Zn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(h.near+h.far)/(h.near-h.far)).unproject(h),m=Bi.set(0,0,-1).applyQuaternion(h.quaternion),y=Fb.copy(d).add(m.multiplyScalar(-d.dot(h.up))),g=-(this._zoom-f-this._zoom)/this._zoom,x=this._getCameraDirection(Sx),_=this._targetEnd.dot(x),E=Zn.copy(this._targetEnd).lerp(y,g),T=E.dot(x),w=x.multiplyScalar(T-_);E.sub(w),this._boundary.clampPoint(E,E);const A=Bi.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(A),this._changedZoom-=f,Mr(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Mr(this._focalOffset.x)||!Mr(this._focalOffset.y)||!Mr(this._focalOffset.z))&&(ju.setFromMatrixColumn(this._camera.matrix,0),Hu.setFromMatrixColumn(this._camera.matrix,1),tm.setFromMatrixColumn(this._camera.matrix,2),ju.multiplyScalar(this._focalOffset.x),Hu.multiplyScalar(-this._focalOffset.y),tm.multiplyScalar(this._focalOffset.z),Zn.copy(ju).add(Hu).add(tm),this._camera.position.add(Zn),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Zn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Mr(n,this.restThreshold)&&Mr(i,this.restThreshold)&&Mr(r,this.restThreshold)&&Mr(a.x,this.restThreshold)&&Mr(a.y,this.restThreshold)&&Mr(a.z,this.restThreshold)&&Mr(s.x,this.restThreshold)&&Mr(s.y,this.restThreshold)&&Mr(s.z,this.restThreshold)&&Mr(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:xx(this.maxDistance),minZoom:this.minZoom,maxZoom:xx(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:xx(this.maxPolarAngle),minAzimuthAngle:xx(this.minAzimuthAngle),maxAzimuthAngle:xx(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Zn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,n=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=_x(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=_x(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=_x(i.maxPolarAngle),this.minAzimuthAngle=_x(i.minAzimuthAngle),this.maxAzimuthAngle=_x(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],n),ol.setFromVector3(Zn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(ol.theta,ol.phi,n),this.dollyTo(ol.radius,n),this.zoomTo(i.zoom,n),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],n),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",NMe),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(n=>n.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(n=>n.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,n,i){const r=n.lengthSq();if(r===0)return e;const a=Bi.copy(n).add(e),o=this._boundary.clampPoint(a,Fb).sub(a),l=o.lengthSq();if(l===0)return e.add(n);if(l===r)return e;if(i===0)return e.add(n).add(o);{const c=1+i*l/n.dot(o);return e.add(Bi.copy(n).multiplyScalar(c)).add(o.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(em(this._camera)){const e=this._camera,n=e.near,i=e.getEffectiveFOV()*vx,r=Math.tan(i*.5)*n,a=r*e.aspect;this._nearPlaneCorners[0].set(-a,-r,0),this._nearPlaneCorners[1].set(a,-r,0),this._nearPlaneCorners[2].set(a,r,0),this._nearPlaneCorners[3].set(-a,r,0)}else if(gd(this._camera)){const e=this._camera,n=1/e.zoom,i=e.left*n,r=e.right*n,a=e.top*n,s=e.bottom*n;this._nearPlaneCorners[0].set(i,a,0),this._nearPlaneCorners[1].set(r,a,0),this._nearPlaneCorners[2].set(r,s,0),this._nearPlaneCorners[3].set(i,s,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||BD(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(Sx);VD.lookAt(_j,i,this._camera.up);for(let r=0;r<4;r++){const a=Bi.copy(this._nearPlaneCorners[r]);a.applyMatrix4(VD);const s=Fb.addVectors(this._target,a);RE.set(s,i),RE.far=this._spherical.radius+1;const o=RE.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const n=this._domElement.getBoundingClientRect();return e.x=n.left,e.y=n.top,this._viewport?(e.x+=this._viewport.x,e.y+=n.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=n.width,e.height=n.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(n=>{const i=()=>{this.removeEventListener("rest",i),n()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,n=new Pn.Sphere){const i=n,r=i.center;jb.makeEmpty(),e.traverseVisible(s=>{s.isMesh&&jb.expandByObject(s)}),jb.getCenter(r);let a=0;return e.traverseVisible(s=>{if(!s.isMesh)return;const o=s;if(!o.geometry)return;const l=o.geometry.clone();l.applyMatrix4(o.matrixWorld);const u=l.attributes.position;for(let f=0,h=u.count;f<h;f++)Zn.fromBufferAttribute(u,f),a=Math.max(a,r.distanceToSquared(Zn))}),i.radius=Math.sqrt(a),i}};const Tj=I.forwardRef((t,e)=>{const{impl:n,camera:i,domElement:r,makeDefault:a,onControlStart:s,onControl:o,onControlEnd:l,onTransitionStart:c,onUpdate:u,onWake:f,onRest:h,onSleep:d,onStart:m,onEnd:y,onChange:v,regress:g,...x}=t,_=n??LMe;I.useMemo(()=>{const V={Box3:vi,MathUtils:{clamp:pc.clamp},Matrix4:Ct,Quaternion:Hn,Raycaster:pS,Sphere:xr,Spherical:gZ,Vector2:ft,Vector3:Y,Vector4:ni};_.install({THREE:V}),gS({CameraControlsImpl:_})},[_]);const E=ui(V=>V.camera),T=ui(V=>V.gl),w=ui(V=>V.invalidate),A=ui(V=>V.events),C=ui(V=>V.setEvents),D=ui(V=>V.set),k=ui(V=>V.get),P=ui(V=>V.performance),B=i||E,H=r||A.connected||T.domElement,G=I.useMemo(()=>new _(B),[_,B]);return fa((V,U)=>{G.update(U)},-1),I.useEffect(()=>(G.connect(H),()=>void G.disconnect()),[H,G]),I.useEffect(()=>{function V(){w(),g&&P.regress()}const U=Me=>{V(),s?.(Me),m?.(Me)},F=Me=>{V(),o?.(Me),v?.(Me)},q=Me=>{l?.(Me),y?.(Me)},X=Me=>{V(),c?.(Me),v?.(Me)},z=Me=>{V(),u?.(Me),v?.(Me)},ce=Me=>{V(),f?.(Me),v?.(Me)},he=Me=>{h?.(Me)},$=Me=>{d?.(Me)};return G.addEventListener("controlstart",U),G.addEventListener("control",F),G.addEventListener("controlend",q),G.addEventListener("transitionstart",X),G.addEventListener("update",z),G.addEventListener("wake",ce),G.addEventListener("rest",he),G.addEventListener("sleep",$),()=>{G.removeEventListener("controlstart",U),G.removeEventListener("control",F),G.removeEventListener("controlend",q),G.removeEventListener("transitionstart",X),G.removeEventListener("update",z),G.removeEventListener("wake",ce),G.removeEventListener("rest",he),G.removeEventListener("sleep",$)}},[G,w,C,g,P,s,o,l,c,u,f,h,d,v,m,y]),I.useEffect(()=>{if(a){const V=k().controls;return D({controls:G}),()=>D({controls:V})}},[a,G]),I.createElement("primitive",ts({ref:e,object:G},x))}),UMe=J2({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Ut,sectionColor:new Ut,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Y,worldPlanePosition:new Y},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${gQ>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),yQ=I.forwardRef(({args:t,cellColor:e="#000000",sectionColor:n="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:a=!1,infiniteGrid:s=!1,fadeDistance:o=100,fadeStrength:l=1,fadeFrom:c=1,cellThickness:u=.5,sectionThickness:f=1,side:h=ba,...d},m)=>{gS({GridMaterial:UMe});const y=I.useRef(null);I.useImperativeHandle(m,()=>y.current,[]);const v=new hl,g=new Y(0,1,0),x=new Y(0,0,0);fa(T=>{v.setFromNormalAndCoplanarPoint(g,x).applyMatrix4(y.current.matrixWorld);const w=y.current.material,A=w.uniforms.worldCamProjPosition,C=w.uniforms.worldPlanePosition;v.projectPoint(T.camera.position,A.value),C.value.set(0,0,0).applyMatrix4(y.current.matrixWorld)});const _={cellSize:i,sectionSize:r,cellColor:e,sectionColor:n,cellThickness:u,sectionThickness:f},E={fadeDistance:o,fadeStrength:l,fadeFrom:c,infiniteGrid:s,followCamera:a};return I.createElement("mesh",ts({ref:y,frustumCulled:!1},d),I.createElement("gridMaterial",ts({transparent:!0,"extensions-derivatives":!0,side:h},_,E)),I.createElement("planeGeometry",{args:t}))}),BMe="modulepreload",FMe=function(t,e){return new URL(t,e).href},Aj={},zMe=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");r=Promise.allSettled(n.map(c=>{if(c=FMe(c,i),c in Aj)return;Aj[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!i)for(let m=s.length-1;m>=0;m--){const y=s[m];if(y.href===c&&(!u||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":BMe,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,y)=>{d.addEventListener("load",m),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return r.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};var vQ={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(tg,function(){var n=function(){function i(d){return s.appendChild(d.dom),d}function r(d){for(var m=0;m<s.children.length;m++)s.children[m].style.display=m===d?"block":"none";a=d}var a=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(d){d.preventDefault(),r(++a%s.children.length)},!1);var o=(performance||Date).now(),l=o,c=0,u=i(new n.Panel("FPS","#0ff","#002")),f=i(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=i(new n.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:s,addPanel:i,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(f.update(d-o,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,h)){var m=performance.memory;h.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return d},update:function(){o=this.end()},domElement:s,setMode:r}};return n.Panel=function(i,r,a){var s=1/0,o=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,f=48*c,h=3*c,d=2*c,m=3*c,y=15*c,v=74*c,g=30*c,x=document.createElement("canvas");x.width=u,x.height=f,x.style.cssText="width:80px;height:48px";var _=x.getContext("2d");return _.font="bold "+9*c+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=a,_.fillRect(0,0,u,f),_.fillStyle=r,_.fillText(i,h,d),_.fillRect(m,y,v,g),_.fillStyle=a,_.globalAlpha=.9,_.fillRect(m,y,v,g),{dom:x,update:function(E,T){s=Math.min(s,E),o=Math.max(o,E),_.fillStyle=a,_.globalAlpha=1,_.fillRect(0,0,u,y),_.fillStyle=r,_.fillText(l(E)+" "+i+" ("+l(s)+"-"+l(o)+")",h,d),_.drawImage(x,m+c,y,v-c,g,m,y,v-c,g),_.fillRect(m+v-c,y,c,g),_.fillStyle=a,_.globalAlpha=.9,_.fillRect(m+v-c,y,c,l((1-E/T)*g))}}},n})})(vQ);var jMe=vQ.exports;const HMe=Cc(jMe);function VMe(t,e=[],n){const[i,r]=I.useState();return I.useLayoutEffect(()=>{const a=t();return r(a),()=>void 0},e),i}function GMe({showPanel:t=0,className:e,parent:n}){const i=VMe(()=>new HMe,[]);return I.useEffect(()=>{if(i){const r=n&&n.current||document.body;i.showPanel(t),r?.appendChild(i.dom);const a=(e??"").split(" ").filter(l=>l);a.length&&i.dom.classList.add(...a);const s=tEe(()=>i.begin()),o=nEe(()=>i.end());return()=>{a.length&&i.dom.classList.remove(...a),r?.removeChild(i.dom),s(),o()}}},[n,i,e,t]),null}const xQ=0,WMe=1,_Q=2,Cj=2,GD=1.25,Rj=1,L1=6*4+4+4,Z2=65535,qMe=Math.pow(2,-24),WD=Symbol("SKIP_GENERATION");function XMe(t){return t.index?t.index.count:t.attributes.position.count}function Sv(t){return XMe(t)/3}function YMe(t,e=ArrayBuffer){return t>65535?new Uint32Array(new e(4*t)):new Uint16Array(new e(2*t))}function $Me(t,e){if(!t.index){const n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=YMe(n,i);t.setIndex(new Tn(r,1));for(let a=0;a<n;a++)r[a]=a}}function SQ(t,e){const n=Sv(t),i=e||t.drawRange,r=i.start/3,a=(i.start+i.count)/3,s=Math.max(0,r),o=Math.min(n,a)-s;return[{offset:Math.floor(s),count:Math.floor(o)}]}function wQ(t,e){if(!t.groups||!t.groups.length)return SQ(t,e);const n=[],i=new Set,r=e||t.drawRange,a=r.start/3,s=(r.start+r.count)/3;for(const l of t.groups){const c=l.start/3,u=(l.start+l.count)/3;i.add(Math.max(a,c)),i.add(Math.min(s,u))}const o=Array.from(i.values()).sort((l,c)=>l-c);for(let l=0;l<o.length-1;l++){const c=o[l],u=o[l+1];n.push({offset:Math.floor(c),count:Math.floor(u-c)})}return n}function KMe(t,e){const n=Sv(t),i=wQ(t,e).sort((s,o)=>s.offset-o.offset),r=i[i.length-1];r.count=Math.min(n-r.offset,r.count);let a=0;return i.forEach(({count:s})=>a+=s),n!==a}function qD(t,e,n,i,r){let a=1/0,s=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0,f=1/0,h=1/0,d=1/0,m=-1/0,y=-1/0,v=-1/0;for(let g=e*6,x=(e+n)*6;g<x;g+=6){const _=t[g+0],E=t[g+1],T=_-E,w=_+E;T<a&&(a=T),w>l&&(l=w),_<f&&(f=_),_>m&&(m=_);const A=t[g+2],C=t[g+3],D=A-C,k=A+C;D<s&&(s=D),k>c&&(c=k),A<h&&(h=A),A>y&&(y=A);const P=t[g+4],B=t[g+5],H=P-B,G=P+B;H<o&&(o=H),G>u&&(u=G),P<d&&(d=P),P>v&&(v=P)}i[0]=a,i[1]=s,i[2]=o,i[3]=l,i[4]=c,i[5]=u,r[0]=f,r[1]=h,r[2]=d,r[3]=m,r[4]=y,r[5]=v}function JMe(t,e=null,n=null,i=null){const r=t.attributes.position,a=t.index?t.index.array:null,s=Sv(t),o=r.normalized;let l;e===null?(l=new Float32Array(s*6),n=0,i=s):(l=e,n=n||0,i=i||s);const c=r.array,u=r.offset||0;let f=3;r.isInterleavedBufferAttribute&&(f=r.data.stride);const h=["getX","getY","getZ"];for(let d=n;d<n+i;d++){const m=d*3,y=d*6;let v=m+0,g=m+1,x=m+2;a&&(v=a[v],g=a[g],x=a[x]),o||(v=v*f+u,g=g*f+u,x=x*f+u);for(let _=0;_<3;_++){let E,T,w;o?(E=r[h[_]](v),T=r[h[_]](g),w=r[h[_]](x)):(E=c[v+_],T=c[g+_],w=c[x+_]);let A=E;T<A&&(A=T),w<A&&(A=w);let C=E;T>C&&(C=T),w>C&&(C=w);const D=(C-A)/2,k=_*2;l[y+k+0]=A+D,l[y+k+1]=D+(Math.abs(A)+D)*qMe}}return l}function oa(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function kj(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){const r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function Dj(t,e){e.set(t)}function Oj(t,e,n){let i,r;for(let a=0;a<3;a++){const s=a+3;i=t[a],r=e[a],n[a]=i<r?i:r,i=t[s],r=e[s],n[s]=i>r?i:r}}function kE(t,e,n){for(let i=0;i<3;i++){const r=e[t+2*i],a=e[t+2*i+1],s=r-a,o=r+a;s<n[i]&&(n[i]=s),o>n[i+3]&&(n[i+3]=o)}}function wx(t){const e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}const Xf=32,ZMe=(t,e)=>t.candidate-e.candidate,fd=new Array(Xf).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),DE=new Float32Array(6);function QMe(t,e,n,i,r,a){let s=-1,o=0;if(a===xQ)s=kj(e),s!==-1&&(o=(e[s]+e[s+3])/2);else if(a===WMe)s=kj(t),s!==-1&&(o=eTe(n,i,r,s));else if(a===_Q){const l=wx(t);let c=GD*r;const u=i*6,f=(i+r)*6;for(let h=0;h<3;h++){const d=e[h],v=(e[h+3]-d)/Xf;if(r<Xf/4){const g=[...fd];g.length=r;let x=0;for(let E=u;E<f;E+=6,x++){const T=g[x];T.candidate=n[E+2*h],T.count=0;const{bounds:w,leftCacheBounds:A,rightCacheBounds:C}=T;for(let D=0;D<3;D++)C[D]=1/0,C[D+3]=-1/0,A[D]=1/0,A[D+3]=-1/0,w[D]=1/0,w[D+3]=-1/0;kE(E,n,w)}g.sort(ZMe);let _=r;for(let E=0;E<_;E++){const T=g[E];for(;E+1<_&&g[E+1].candidate===T.candidate;)g.splice(E+1,1),_--}for(let E=u;E<f;E+=6){const T=n[E+2*h];for(let w=0;w<_;w++){const A=g[w];T>=A.candidate?kE(E,n,A.rightCacheBounds):(kE(E,n,A.leftCacheBounds),A.count++)}}for(let E=0;E<_;E++){const T=g[E],w=T.count,A=r-T.count,C=T.leftCacheBounds,D=T.rightCacheBounds;let k=0;w!==0&&(k=wx(C)/l);let P=0;A!==0&&(P=wx(D)/l);const B=Rj+GD*(k*w+P*A);B<c&&(s=h,c=B,o=T.candidate)}}else{for(let _=0;_<Xf;_++){const E=fd[_];E.count=0,E.candidate=d+v+_*v;const T=E.bounds;for(let w=0;w<3;w++)T[w]=1/0,T[w+3]=-1/0}for(let _=u;_<f;_+=6){let w=~~((n[_+2*h]-d)/v);w>=Xf&&(w=Xf-1);const A=fd[w];A.count++,kE(_,n,A.bounds)}const g=fd[Xf-1];Dj(g.bounds,g.rightCacheBounds);for(let _=Xf-2;_>=0;_--){const E=fd[_],T=fd[_+1];Oj(E.bounds,T.rightCacheBounds,E.rightCacheBounds)}let x=0;for(let _=0;_<Xf-1;_++){const E=fd[_],T=E.count,w=E.bounds,C=fd[_+1].rightCacheBounds;T!==0&&(x===0?Dj(w,DE):Oj(w,DE,DE)),x+=T;let D=0,k=0;x!==0&&(D=wx(DE)/l);const P=r-x;P!==0&&(k=wx(C)/l);const B=Rj+GD*(D*x+k*P);B<c&&(s=h,c=B,o=E.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:s,pos:o}}function eTe(t,e,n,i){let r=0;for(let a=e,s=e+n;a<s;a++)r+=t[a*6+i*2];return r/n}class XD{constructor(){this.boundingData=new Float32Array(6)}}function tTe(t,e,n,i,r,a){let s=i,o=i+r-1;const l=a.pos,c=a.axis*2;for(;;){for(;s<=o&&n[s*6+c]<l;)s++;for(;s<=o&&n[o*6+c]>=l;)o--;if(s<o){for(let u=0;u<3;u++){let f=e[s*3+u];e[s*3+u]=e[o*3+u],e[o*3+u]=f}for(let u=0;u<6;u++){let f=n[s*6+u];n[s*6+u]=n[o*6+u],n[o*6+u]=f}s++,o--}else return s}}function nTe(t,e,n,i,r,a){let s=i,o=i+r-1;const l=a.pos,c=a.axis*2;for(;;){for(;s<=o&&n[s*6+c]<l;)s++;for(;s<=o&&n[o*6+c]>=l;)o--;if(s<o){let u=t[s];t[s]=t[o],t[o]=u;for(let f=0;f<6;f++){let h=n[s*6+f];n[s*6+f]=n[o*6+f],n[o*6+f]=h}s++,o--}else return s}}function Oo(t,e){return e[t+15]===65535}function gl(t,e){return e[t+6]}function mc(t,e){return e[t+14]}function gc(t){return t+8}function bc(t,e){return e[t+6]}function EQ(t,e){return e[t+7]}let MQ,n1,KM,TQ;const iTe=Math.pow(2,32);function QN(t){return"count"in t?1:1+QN(t.left)+QN(t.right)}function rTe(t,e,n){return MQ=new Float32Array(n),n1=new Uint32Array(n),KM=new Uint16Array(n),TQ=new Uint8Array(n),eP(t,e)}function eP(t,e){const n=t/4,i=t/2,r="count"in e,a=e.boundingData;for(let s=0;s<6;s++)MQ[n+s]=a[s];if(r)if(e.buffer){const s=e.buffer;TQ.set(new Uint8Array(s),t);for(let o=t,l=t+s.byteLength;o<l;o+=L1){const c=o/2;Oo(c,KM)||(n1[o/4+6]+=n)}return t+s.byteLength}else{const s=e.offset,o=e.count;return n1[n+6]=s,KM[i+14]=o,KM[i+15]=Z2,t+L1}else{const s=e.left,o=e.right,l=e.splitAxis;let c;if(c=eP(t+L1,s),c/4>iTe)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n1[n+6]=c/4,c=eP(c,o),n1[n+7]=l,c}}function aTe(t,e){const n=(t.index?t.index.count:t.attributes.position.count)/3,i=n>2**16,r=i?4:2,a=e?new SharedArrayBuffer(n*r):new ArrayBuffer(n*r),s=i?new Uint32Array(a):new Uint16Array(a);for(let o=0,l=s.length;o<l;o++)s[o]=o;return s}function sTe(t,e,n,i,r){const{maxDepth:a,verbose:s,maxLeafTris:o,strategy:l,onProgress:c,indirect:u}=r,f=t._indirectBuffer,h=t.geometry,d=h.index?h.index.array:null,m=u?nTe:tTe,y=Sv(h),v=new Float32Array(6);let g=!1;const x=new XD;return qD(e,n,i,x.boundingData,v),E(x,n,i,v),x;function _(T){c&&c(T/y)}function E(T,w,A,C=null,D=0){if(!g&&D>=a&&(g=!0,s&&(console.warn(`MeshBVH: Max depth of ${a} reached when generating BVH. Consider increasing maxDepth.`),console.warn(h))),A<=o||D>=a)return _(w+A),T.offset=w,T.count=A,T;const k=QMe(T.boundingData,C,e,w,A,l);if(k.axis===-1)return _(w+A),T.offset=w,T.count=A,T;const P=m(f,d,e,w,A,k);if(P===w||P===w+A)_(w+A),T.offset=w,T.count=A;else{T.splitAxis=k.axis;const B=new XD,H=w,G=P-w;T.left=B,qD(e,H,G,B.boundingData,v),E(B,H,G,v,D+1);const V=new XD,U=P,F=A-G;T.right=V,qD(e,U,F,V.boundingData,v),E(V,U,F,v,D+1)}return T}}function oTe(t,e){const n=t.geometry;e.indirect&&(t._indirectBuffer=aTe(n,e.useSharedArrayBuffer),KMe(n,e.range)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),t._indirectBuffer||$Me(n,e);const i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=JMe(n),a=e.indirect?SQ(n,e.range):wQ(n,e.range);t._roots=a.map(s=>{const o=sTe(t,r,s.offset,s.count,e),l=QN(o),c=new i(L1*l);return rTe(0,o,c),c})}class Ah{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let i=1/0,r=-1/0;for(let a=0,s=e.length;a<s;a++){const l=e[a][n];i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}setFromPoints(e,n){let i=1/0,r=-1/0;for(let a=0,s=n.length;a<s;a++){const o=n[a],l=e.dot(o);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}Ah.prototype.setFromBox=function(){const t=new Y;return function(n,i){const r=i.min,a=i.max;let s=1/0,o=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){t.x=r.x*l+a.x*(1-l),t.y=r.y*c+a.y*(1-c),t.z=r.z*u+a.z*(1-u);const f=n.dot(t);s=Math.min(f,s),o=Math.max(f,o)}this.min=s,this.max=o}}();const lTe=function(){const t=new Y,e=new Y,n=new Y;return function(r,a,s){const o=r.start,l=t,c=a.start,u=e;n.subVectors(o,c),t.subVectors(r.end,r.start),e.subVectors(a.end,a.start);const f=n.dot(u),h=u.dot(l),d=u.dot(u),m=n.dot(l),v=l.dot(l)*d-h*h;let g,x;v!==0?g=(f*h-m*d)/v:g=0,x=(f+g*h)/d,s.x=g,s.y=x}}(),mB=function(){const t=new ft,e=new Y,n=new Y;return function(r,a,s,o){lTe(r,a,t);let l=t.x,c=t.y;if(l>=0&&l<=1&&c>=0&&c<=1){r.at(l,s),a.at(c,o);return}else if(l>=0&&l<=1){c<0?a.at(0,o):a.at(1,o),r.closestPointToPoint(o,!0,s);return}else if(c>=0&&c<=1){l<0?r.at(0,s):r.at(1,s),a.closestPointToPoint(s,!0,o);return}else{let u;l<0?u=r.start:u=r.end;let f;c<0?f=a.start:f=a.end;const h=e,d=n;if(r.closestPointToPoint(f,!0,e),a.closestPointToPoint(u,!0,n),h.distanceToSquared(f)<=d.distanceToSquared(u)){s.copy(h),o.copy(f);return}else{s.copy(u),o.copy(d);return}}}}(),cTe=function(){const t=new Y,e=new Y,n=new hl,i=new bu;return function(a,s){const{radius:o,center:l}=a,{a:c,b:u,c:f}=s;if(i.start=c,i.end=u,i.closestPointToPoint(l,!0,t).distanceTo(l)<=o||(i.start=c,i.end=f,i.closestPointToPoint(l,!0,t).distanceTo(l)<=o)||(i.start=u,i.end=f,i.closestPointToPoint(l,!0,t).distanceTo(l)<=o))return!0;const y=s.getPlane(n);if(Math.abs(y.distanceToPoint(l))<=o){const g=y.projectPoint(l,e);if(s.containsPoint(g))return!0}return!1}}(),uTe=1e-15;function YD(t){return Math.abs(t)<uTe}class Su extends Ta{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new Y),this.satBounds=new Array(4).fill().map(()=>new Ah),this.points=[this.a,this.b,this.c],this.sphere=new xr,this.plane=new hl,this.needsUpdate=!0}intersectsSphere(e){return cTe(e,this)}update(){const e=this.a,n=this.b,i=this.c,r=this.points,a=this.satAxes,s=this.satBounds,o=a[0],l=s[0];this.getNormal(o),l.setFromPoints(o,r);const c=a[1],u=s[1];c.subVectors(e,n),u.setFromPoints(c,r);const f=a[2],h=s[2];f.subVectors(n,i),h.setFromPoints(f,r);const d=a[3],m=s[3];d.subVectors(i,e),m.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}}Su.prototype.closestPointToSegment=function(){const t=new Y,e=new Y,n=new bu;return function(r,a=null,s=null){const{start:o,end:l}=r,c=this.points;let u,f=1/0;for(let h=0;h<3;h++){const d=(h+1)%3;n.start.copy(c[h]),n.end.copy(c[d]),mB(n,r,t,e),u=t.distanceToSquared(e),u<f&&(f=u,a&&a.copy(t),s&&s.copy(e))}return this.closestPointToPoint(o,t),u=o.distanceToSquared(t),u<f&&(f=u,a&&a.copy(t),s&&s.copy(o)),this.closestPointToPoint(l,t),u=l.distanceToSquared(t),u<f&&(f=u,a&&a.copy(t),s&&s.copy(l)),Math.sqrt(f)}}();Su.prototype.intersectsTriangle=function(){const t=new Su,e=new Array(3),n=new Array(3),i=new Ah,r=new Ah,a=new Y,s=new Y,o=new Y,l=new Y,c=new Y,u=new bu,f=new bu,h=new bu,d=new Y;function m(y,v,g){const x=y.points;let _=0,E=-1;for(let T=0;T<3;T++){const{start:w,end:A}=u;w.copy(x[T]),A.copy(x[(T+1)%3]),u.delta(s);const C=YD(v.distanceToPoint(w));if(YD(v.normal.dot(s))&&C){g.copy(u),_=2;break}const D=v.intersectLine(u,d);if(!D&&C&&d.copy(w),(D||C)&&!YD(d.distanceTo(A))){if(_<=1)(_===1?g.start:g.end).copy(d),C&&(E=_);else if(_>=2){(E===1?g.start:g.end).copy(d),_=2;break}if(_++,_===2&&E===-1)break}}return _}return function(v,g=null,x=!1){this.needsUpdate&&this.update(),v.isExtendedTriangle?v.needsUpdate&&v.update():(t.copy(v),t.update(),v=t);const _=this.plane,E=v.plane;if(Math.abs(_.normal.dot(E.normal))>1-1e-10){const T=this.satBounds,w=this.satAxes;n[0]=v.a,n[1]=v.b,n[2]=v.c;for(let D=0;D<4;D++){const k=T[D],P=w[D];if(i.setFromPoints(P,n),k.isSeparated(i))return!1}const A=v.satBounds,C=v.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let D=0;D<4;D++){const k=A[D],P=C[D];if(i.setFromPoints(P,e),k.isSeparated(i))return!1}for(let D=0;D<4;D++){const k=w[D];for(let P=0;P<4;P++){const B=C[P];if(a.crossVectors(k,B),i.setFromPoints(a,e),r.setFromPoints(a,n),i.isSeparated(r))return!1}}return g&&(x||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),g.start.set(0,0,0),g.end.set(0,0,0)),!0}else{const T=m(this,E,f);if(T===1&&v.containsPoint(f.end))return g&&(g.start.copy(f.end),g.end.copy(f.end)),!0;if(T!==2)return!1;const w=m(v,_,h);if(w===1&&this.containsPoint(h.end))return g&&(g.start.copy(h.end),g.end.copy(h.end)),!0;if(w!==2)return!1;if(f.delta(o),h.delta(l),o.dot(l)<0){let H=h.start;h.start=h.end,h.end=H}const A=f.start.dot(o),C=f.end.dot(o),D=h.start.dot(o),k=h.end.dot(o),P=C<D,B=A<k;return A!==k&&D!==C&&P===B?!1:(g&&(c.subVectors(f.start,h.start),c.dot(o)>0?g.start.copy(f.start):g.start.copy(h.start),c.subVectors(f.end,h.end),c.dot(o)<0?g.end.copy(f.end):g.end.copy(h.end)),!0)}}}();Su.prototype.distanceToPoint=function(){const t=new Y;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();Su.prototype.distanceToTriangle=function(){const t=new Y,e=new Y,n=["a","b","c"],i=new bu,r=new bu;return function(s,o=null,l=null){const c=o||l?i:null;if(this.intersectsTriangle(s,c))return(o||l)&&(o&&c.getCenter(o),l&&c.getCenter(l)),0;let u=1/0;for(let f=0;f<3;f++){let h;const d=n[f],m=s[d];this.closestPointToPoint(m,t),h=m.distanceToSquared(t),h<u&&(u=h,o&&o.copy(t),l&&l.copy(m));const y=this[d];s.closestPointToPoint(y,t),h=y.distanceToSquared(t),h<u&&(u=h,o&&o.copy(y),l&&l.copy(t))}for(let f=0;f<3;f++){const h=n[f],d=n[(f+1)%3];i.set(this[h],this[d]);for(let m=0;m<3;m++){const y=n[m],v=n[(m+1)%3];r.set(s[y],s[v]),mB(i,r,t,e);const g=t.distanceToSquared(e);g<u&&(u=g,o&&o.copy(t),l&&l.copy(e))}}return Math.sqrt(u)}}();class _o{constructor(e,n,i){this.isOrientedBox=!0,this.min=new Y,this.max=new Y,this.matrix=new Ct,this.invMatrix=new Ct,this.points=new Array(8).fill().map(()=>new Y),this.satAxes=new Array(3).fill().map(()=>new Y),this.satBounds=new Array(3).fill().map(()=>new Ah),this.alignedSatBounds=new Array(3).fill().map(()=>new Ah),this.needsUpdate=!1,e&&this.min.copy(e),n&&this.max.copy(n),i&&this.matrix.copy(i)}set(e,n,i){this.min.copy(e),this.max.copy(n),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}_o.prototype.update=function(){return function(){const e=this.matrix,n=this.min,i=this.max,r=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let f=0;f<=1;f++){const h=1*c|2*u|4*f,d=r[h];d.x=c?i.x:n.x,d.y=u?i.y:n.y,d.z=f?i.z:n.z,d.applyMatrix4(e)}const a=this.satBounds,s=this.satAxes,o=r[0];for(let c=0;c<3;c++){const u=s[c],f=a[c],h=1<<c,d=r[h];u.subVectors(o,d),f.setFromPoints(u,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();_o.prototype.intersectsBox=function(){const t=new Ah;return function(n){this.needsUpdate&&this.update();const i=n.min,r=n.max,a=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(t.min=i.x,t.max=r.x,o[0].isSeparated(t)||(t.min=i.y,t.max=r.y,o[1].isSeparated(t))||(t.min=i.z,t.max=r.z,o[2].isSeparated(t)))return!1;for(let l=0;l<3;l++){const c=s[l],u=a[l];if(t.setFromBox(c,n),u.isSeparated(t))return!1}return!0}}();_o.prototype.intersectsTriangle=function(){const t=new Su,e=new Array(3),n=new Ah,i=new Ah,r=new Y;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);const o=this.satBounds,l=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let h=0;h<3;h++){const d=o[h],m=l[h];if(n.setFromPoints(m,e),d.isSeparated(n))return!1}const c=s.satBounds,u=s.satAxes,f=this.points;for(let h=0;h<3;h++){const d=c[h],m=u[h];if(n.setFromPoints(m,f),d.isSeparated(n))return!1}for(let h=0;h<3;h++){const d=l[h];for(let m=0;m<4;m++){const y=u[m];if(r.crossVectors(d,y),n.setFromPoints(r,e),i.setFromPoints(r,f),n.isSeparated(i))return!1}}return!0}}();_o.prototype.closestPointToPoint=function(){return function(e,n){return this.needsUpdate&&this.update(),n.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),n}}();_o.prototype.distanceToPoint=function(){const t=new Y;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();_o.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new bu),n=new Array(12).fill().map(()=>new bu),i=new Y,r=new Y;return function(s,o=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(l||c)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),l&&l.copy(i),c&&c.copy(r)),0;const u=o*o,f=s.min,h=s.max,d=this.points;let m=1/0;for(let v=0;v<8;v++){const g=d[v];r.copy(g).clamp(f,h);const x=g.distanceToSquared(r);if(x<m&&(m=x,l&&l.copy(g),c&&c.copy(r),x<u))return Math.sqrt(x)}let y=0;for(let v=0;v<3;v++)for(let g=0;g<=1;g++)for(let x=0;x<=1;x++){const _=(v+1)%3,E=(v+2)%3,T=g<<_|x<<E,w=1<<v|g<<_|x<<E,A=d[T],C=d[w];e[y].set(A,C);const k=t[v],P=t[_],B=t[E],H=n[y],G=H.start,V=H.end;G[k]=f[k],G[P]=g?f[P]:h[P],G[B]=x?f[B]:h[P],V[k]=h[k],V[P]=g?f[P]:h[P],V[B]=x?f[B]:h[P],y++}for(let v=0;v<=1;v++)for(let g=0;g<=1;g++)for(let x=0;x<=1;x++){r.x=v?h.x:f.x,r.y=g?h.y:f.y,r.z=x?h.z:f.z,this.closestPointToPoint(r,i);const _=r.distanceToSquared(i);if(_<m&&(m=_,l&&l.copy(i),c&&c.copy(r),_<u))return Math.sqrt(_)}for(let v=0;v<12;v++){const g=e[v];for(let x=0;x<12;x++){const _=n[x];mB(g,_,i,r);const E=i.distanceToSquared(r);if(E<m&&(m=E,l&&l.copy(i),c&&c.copy(r),E<u))return Math.sqrt(E)}}return Math.sqrt(m)}}();class gB{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class fTe extends gB{constructor(){super(()=>new Su)}}const yc=new fTe;class hTe{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let n=null;this.setBuffer=i=>{n&&e.push(n),n=i,this.float32Array=new Float32Array(i),this.uint16Array=new Uint16Array(i),this.uint32Array=new Uint32Array(i)},this.clearBuffer=()=>{n=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Pr=new hTe;let Ud,R0;const Hb=[],OE=new gB(()=>new vi);function dTe(t,e,n,i,r,a){Ud=OE.getPrimitive(),R0=OE.getPrimitive(),Hb.push(Ud,R0),Pr.setBuffer(t._roots[e]);const s=tP(0,t.geometry,n,i,r,a);Pr.clearBuffer(),OE.releasePrimitive(Ud),OE.releasePrimitive(R0),Hb.pop(),Hb.pop();const o=Hb.length;return o>0&&(R0=Hb[o-1],Ud=Hb[o-2]),s}function tP(t,e,n,i,r=null,a=0,s=0){const{float32Array:o,uint16Array:l,uint32Array:c}=Pr;let u=t*2;if(Oo(u,l)){const h=gl(t,c),d=mc(u,l);return oa(t,o,Ud),i(h,d,!1,s,a+t,Ud)}else{let k=function(B){const{uint16Array:H,uint32Array:G}=Pr;let V=B*2;for(;!Oo(V,H);)B=gc(B),V=B*2;return gl(B,G)},P=function(B){const{uint16Array:H,uint32Array:G}=Pr;let V=B*2;for(;!Oo(V,H);)B=bc(B,G),V=B*2;return gl(B,G)+mc(V,H)};const h=gc(t),d=bc(t,c);let m=h,y=d,v,g,x,_;if(r&&(x=Ud,_=R0,oa(m,o,x),oa(y,o,_),v=r(x),g=r(_),g<v)){m=d,y=h;const B=v;v=g,g=B,x=_}x||(x=Ud,oa(m,o,x));const E=Oo(m*2,l),T=n(x,E,v,s+1,a+m);let w;if(T===Cj){const B=k(m),G=P(m)-B;w=i(B,G,!0,s+1,a+m,x)}else w=T&&tP(m,e,n,i,r,a,s+1);if(w)return!0;_=R0,oa(y,o,_);const A=Oo(y*2,l),C=n(_,A,g,s+1,a+y);let D;if(C===Cj){const B=k(y),G=P(y)-B;D=i(B,G,!0,s+1,a+y,_)}else D=C&&tP(y,e,n,i,r,a,s+1);return!!D}}const Ex=new Y,$D=new Y;function pTe(t,e,n={},i=0,r=1/0){const a=i*i,s=r*r;let o=1/0,l=null;if(t.shapecast({boundsTraverseOrder:u=>(Ex.copy(e).clamp(u.min,u.max),Ex.distanceToSquared(e)),intersectsBounds:(u,f,h)=>h<o&&h<s,intersectsTriangle:(u,f)=>{u.closestPointToPoint(e,Ex);const h=e.distanceToSquared(Ex);return h<o&&($D.copy(Ex),o=h,l=f),h<a}}),o===1/0)return null;const c=Math.sqrt(o);return n.point?n.point.copy($D):n.point=$D.clone(),n.distance=c,n.faceIndex=l,n}const mTe=parseInt(Rg)>=169,nm=new Y,im=new Y,rm=new Y,IE=new ft,NE=new ft,PE=new ft,Ij=new Y,Nj=new Y,Pj=new Y,Mx=new Y;function gTe(t,e,n,i,r,a,s,o){let l;if(a===ba?l=t.intersectTriangle(i,n,e,!0,r):l=t.intersectTriangle(e,n,i,a!==$r,r),l===null)return null;const c=t.origin.distanceTo(r);return c<s||c>o?null:{distance:c,point:r.clone()}}function bTe(t,e,n,i,r,a,s,o,l,c,u){nm.fromBufferAttribute(e,a),im.fromBufferAttribute(e,s),rm.fromBufferAttribute(e,o);const f=gTe(t,nm,im,rm,Mx,l,c,u);if(f){const h=new Y;Ta.getBarycoord(Mx,nm,im,rm,h),i&&(IE.fromBufferAttribute(i,a),NE.fromBufferAttribute(i,s),PE.fromBufferAttribute(i,o),f.uv=Ta.getInterpolation(Mx,nm,im,rm,IE,NE,PE,new ft)),r&&(IE.fromBufferAttribute(r,a),NE.fromBufferAttribute(r,s),PE.fromBufferAttribute(r,o),f.uv1=Ta.getInterpolation(Mx,nm,im,rm,IE,NE,PE,new ft)),n&&(Ij.fromBufferAttribute(n,a),Nj.fromBufferAttribute(n,s),Pj.fromBufferAttribute(n,o),f.normal=Ta.getInterpolation(Mx,nm,im,rm,Ij,Nj,Pj,new Y),f.normal.dot(t.direction)>0&&f.normal.multiplyScalar(-1));const d={a,b:s,c:o,normal:new Y,materialIndex:0};Ta.getNormal(nm,im,rm,d.normal),f.face=d,f.faceIndex=a,mTe&&(f.barycoord=h)}return f}function Q2(t,e,n,i,r,a,s){const o=i*3;let l=o+0,c=o+1,u=o+2;const f=t.index;t.index&&(l=f.getX(l),c=f.getX(c),u=f.getX(u));const{position:h,normal:d,uv:m,uv1:y}=t.attributes,v=bTe(n,h,d,m,y,l,c,u,e,a,s);return v?(v.faceIndex=i,r&&r.push(v),v):null}function Ca(t,e,n,i){const r=t.a,a=t.b,s=t.c;let o=e,l=e+1,c=e+2;n&&(o=n.getX(o),l=n.getX(l),c=n.getX(c)),r.x=i.getX(o),r.y=i.getY(o),r.z=i.getZ(o),a.x=i.getX(l),a.y=i.getY(l),a.z=i.getZ(l),s.x=i.getX(c),s.y=i.getY(c),s.z=i.getZ(c)}function yTe(t,e,n,i,r,a,s,o){const{geometry:l,_indirectBuffer:c}=t;for(let u=i,f=i+r;u<f;u++)Q2(l,e,n,u,a,s,o)}function vTe(t,e,n,i,r,a,s){const{geometry:o,_indirectBuffer:l}=t;let c=1/0,u=null;for(let f=i,h=i+r;f<h;f++){let d;d=Q2(o,e,n,f,null,a,s),d&&d.distance<c&&(u=d,c=d.distance)}return u}function xTe(t,e,n,i,r,a,s){const{geometry:o}=n,{index:l}=o,c=o.attributes.position;for(let u=t,f=e+t;u<f;u++){let h;if(h=u,Ca(s,h*3,l,c),s.needsUpdate=!0,i(s,h,r,a))return!0}return!1}function _Te(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=t.geometry,i=n.index?n.index.array:null,r=n.attributes.position;let a,s,o,l,c=0;const u=t._roots;for(let h=0,d=u.length;h<d;h++)a=u[h],s=new Uint32Array(a),o=new Uint16Array(a),l=new Float32Array(a),f(0,c),c+=a.byteLength;function f(h,d,m=!1){const y=h*2;if(o[y+15]===Z2){const g=s[h+6],x=o[y+14];let _=1/0,E=1/0,T=1/0,w=-1/0,A=-1/0,C=-1/0;for(let D=3*g,k=3*(g+x);D<k;D++){let P=i[D];const B=r.getX(P),H=r.getY(P),G=r.getZ(P);B<_&&(_=B),B>w&&(w=B),H<E&&(E=H),H>A&&(A=H),G<T&&(T=G),G>C&&(C=G)}return l[h+0]!==_||l[h+1]!==E||l[h+2]!==T||l[h+3]!==w||l[h+4]!==A||l[h+5]!==C?(l[h+0]=_,l[h+1]=E,l[h+2]=T,l[h+3]=w,l[h+4]=A,l[h+5]=C,!0):!1}else{const g=h+8,x=s[h+6],_=g+d,E=x+d;let T=m,w=!1,A=!1;e?T||(w=e.has(_),A=e.has(E),T=!w&&!A):(w=!0,A=!0);const C=T||w,D=T||A;let k=!1;C&&(k=f(g,d,T));let P=!1;D&&(P=f(x,d,T));const B=k||P;if(B)for(let H=0;H<3;H++){const G=g+H,V=x+H,U=l[G],F=l[G+3],q=l[V],X=l[V+3];l[h+H]=U<q?U:q,l[h+H+3]=F>X?F:X}return B}}}function rp(t,e,n,i,r){let a,s,o,l,c,u;const f=1/n.direction.x,h=1/n.direction.y,d=1/n.direction.z,m=n.origin.x,y=n.origin.y,v=n.origin.z;let g=e[t],x=e[t+3],_=e[t+1],E=e[t+3+1],T=e[t+2],w=e[t+3+2];return f>=0?(a=(g-m)*f,s=(x-m)*f):(a=(x-m)*f,s=(g-m)*f),h>=0?(o=(_-y)*h,l=(E-y)*h):(o=(E-y)*h,l=(_-y)*h),a>l||o>s||((o>a||isNaN(a))&&(a=o),(l<s||isNaN(s))&&(s=l),d>=0?(c=(T-v)*d,u=(w-v)*d):(c=(w-v)*d,u=(T-v)*d),a>u||c>s)?!1:((c>a||a!==a)&&(a=c),(u<s||s!==s)&&(s=u),a<=r&&s>=i)}function STe(t,e,n,i,r,a,s,o){const{geometry:l,_indirectBuffer:c}=t;for(let u=i,f=i+r;u<f;u++){let h=c?c[u]:u;Q2(l,e,n,h,a,s,o)}}function wTe(t,e,n,i,r,a,s){const{geometry:o,_indirectBuffer:l}=t;let c=1/0,u=null;for(let f=i,h=i+r;f<h;f++){let d;d=Q2(o,e,n,l?l[f]:f,null,a,s),d&&d.distance<c&&(u=d,c=d.distance)}return u}function ETe(t,e,n,i,r,a,s){const{geometry:o}=n,{index:l}=o,c=o.attributes.position;for(let u=t,f=e+t;u<f;u++){let h;if(h=n.resolveTriangleIndex(u),Ca(s,h*3,l,c),s.needsUpdate=!0,i(s,h,r,a))return!0}return!1}function MTe(t,e,n,i,r,a,s){Pr.setBuffer(t._roots[e]),nP(0,t,n,i,r,a,s),Pr.clearBuffer()}function nP(t,e,n,i,r,a,s){const{float32Array:o,uint16Array:l,uint32Array:c}=Pr,u=t*2;if(Oo(u,l)){const h=gl(t,c),d=mc(u,l);yTe(e,n,i,h,d,r,a,s)}else{const h=gc(t);rp(h,o,i,a,s)&&nP(h,e,n,i,r,a,s);const d=bc(t,c);rp(d,o,i,a,s)&&nP(d,e,n,i,r,a,s)}}const TTe=["x","y","z"];function ATe(t,e,n,i,r,a){Pr.setBuffer(t._roots[e]);const s=iP(0,t,n,i,r,a);return Pr.clearBuffer(),s}function iP(t,e,n,i,r,a){const{float32Array:s,uint16Array:o,uint32Array:l}=Pr;let c=t*2;if(Oo(c,o)){const f=gl(t,l),h=mc(c,o);return vTe(e,n,i,f,h,r,a)}else{const f=EQ(t,l),h=TTe[f],m=i.direction[h]>=0;let y,v;m?(y=gc(t),v=bc(t,l)):(y=bc(t,l),v=gc(t));const x=rp(y,s,i,r,a)?iP(y,e,n,i,r,a):null;if(x){const T=x.point[h];if(m?T<=s[v+f]:T>=s[v+f+3])return x}const E=rp(v,s,i,r,a)?iP(v,e,n,i,r,a):null;return x&&E?x.distance<=E.distance?x:E:x||E||null}}const LE=new vi,Vb=new Su,Gb=new Su,Tx=new Ct,Lj=new _o,UE=new _o;function CTe(t,e,n,i){Pr.setBuffer(t._roots[e]);const r=rP(0,t,n,i);return Pr.clearBuffer(),r}function rP(t,e,n,i,r=null){const{float32Array:a,uint16Array:s,uint32Array:o}=Pr;let l=t*2;if(r===null&&(n.boundingBox||n.computeBoundingBox(),Lj.set(n.boundingBox.min,n.boundingBox.max,i),r=Lj),Oo(l,s)){const u=e.geometry,f=u.index,h=u.attributes.position,d=n.index,m=n.attributes.position,y=gl(t,o),v=mc(l,s);if(Tx.copy(i).invert(),n.boundsTree)return oa(t,a,UE),UE.matrix.copy(Tx),UE.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:x=>UE.intersectsBox(x),intersectsTriangle:x=>{x.a.applyMatrix4(i),x.b.applyMatrix4(i),x.c.applyMatrix4(i),x.needsUpdate=!0;for(let _=y*3,E=(v+y)*3;_<E;_+=3)if(Ca(Gb,_,f,h),Gb.needsUpdate=!0,x.intersectsTriangle(Gb))return!0;return!1}});for(let g=y*3,x=(v+y)*3;g<x;g+=3){Ca(Vb,g,f,h),Vb.a.applyMatrix4(Tx),Vb.b.applyMatrix4(Tx),Vb.c.applyMatrix4(Tx),Vb.needsUpdate=!0;for(let _=0,E=d.count;_<E;_+=3)if(Ca(Gb,_,d,m),Gb.needsUpdate=!0,Vb.intersectsTriangle(Gb))return!0}}else{const u=t+8,f=o[t+6];return oa(u,a,LE),!!(r.intersectsBox(LE)&&rP(u,e,n,i,r)||(oa(f,a,LE),r.intersectsBox(LE)&&rP(f,e,n,i,r)))}}const BE=new Ct,KD=new _o,Ax=new _o,RTe=new Y,kTe=new Y,DTe=new Y,OTe=new Y;function ITe(t,e,n,i={},r={},a=0,s=1/0){e.boundingBox||e.computeBoundingBox(),KD.set(e.boundingBox.min,e.boundingBox.max,n),KD.needsUpdate=!0;const o=t.geometry,l=o.attributes.position,c=o.index,u=e.attributes.position,f=e.index,h=yc.getPrimitive(),d=yc.getPrimitive();let m=RTe,y=kTe,v=null,g=null;r&&(v=DTe,g=OTe);let x=1/0,_=null,E=null;return BE.copy(n).invert(),Ax.matrix.copy(BE),t.shapecast({boundsTraverseOrder:T=>KD.distanceToBox(T),intersectsBounds:(T,w,A)=>A<x&&A<s?(w&&(Ax.min.copy(T.min),Ax.max.copy(T.max),Ax.needsUpdate=!0),!0):!1,intersectsRange:(T,w)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:C=>Ax.distanceToBox(C),intersectsBounds:(C,D,k)=>k<x&&k<s,intersectsRange:(C,D)=>{for(let k=C,P=C+D;k<P;k++){Ca(d,3*k,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let B=T,H=T+w;B<H;B++){Ca(h,3*B,c,l),h.needsUpdate=!0;const G=h.distanceToTriangle(d,m,v);if(G<x&&(y.copy(m),g&&g.copy(v),x=G,_=B,E=k),G<a)return!0}}}});{const A=Sv(e);for(let C=0,D=A;C<D;C++){Ca(d,3*C,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let k=T,P=T+w;k<P;k++){Ca(h,3*k,c,l),h.needsUpdate=!0;const B=h.distanceToTriangle(d,m,v);if(B<x&&(y.copy(m),g&&g.copy(v),x=B,_=k,E=C),B<a)return!0}}}}}),yc.releasePrimitive(h),yc.releasePrimitive(d),x===1/0?null:(i.point?i.point.copy(y):i.point=y.clone(),i.distance=x,i.faceIndex=_,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(BE),y.applyMatrix4(BE),r.distance=y.sub(r.point).length(),r.faceIndex=E),i)}function NTe(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=t.geometry,i=n.index?n.index.array:null,r=n.attributes.position;let a,s,o,l,c=0;const u=t._roots;for(let h=0,d=u.length;h<d;h++)a=u[h],s=new Uint32Array(a),o=new Uint16Array(a),l=new Float32Array(a),f(0,c),c+=a.byteLength;function f(h,d,m=!1){const y=h*2;if(o[y+15]===Z2){const g=s[h+6],x=o[y+14];let _=1/0,E=1/0,T=1/0,w=-1/0,A=-1/0,C=-1/0;for(let D=g,k=g+x;D<k;D++){const P=3*t.resolveTriangleIndex(D);for(let B=0;B<3;B++){let H=P+B;H=i?i[H]:H;const G=r.getX(H),V=r.getY(H),U=r.getZ(H);G<_&&(_=G),G>w&&(w=G),V<E&&(E=V),V>A&&(A=V),U<T&&(T=U),U>C&&(C=U)}}return l[h+0]!==_||l[h+1]!==E||l[h+2]!==T||l[h+3]!==w||l[h+4]!==A||l[h+5]!==C?(l[h+0]=_,l[h+1]=E,l[h+2]=T,l[h+3]=w,l[h+4]=A,l[h+5]=C,!0):!1}else{const g=h+8,x=s[h+6],_=g+d,E=x+d;let T=m,w=!1,A=!1;e?T||(w=e.has(_),A=e.has(E),T=!w&&!A):(w=!0,A=!0);const C=T||w,D=T||A;let k=!1;C&&(k=f(g,d,T));let P=!1;D&&(P=f(x,d,T));const B=k||P;if(B)for(let H=0;H<3;H++){const G=g+H,V=x+H,U=l[G],F=l[G+3],q=l[V],X=l[V+3];l[h+H]=U<q?U:q,l[h+H+3]=F>X?F:X}return B}}}function PTe(t,e,n,i,r,a,s){Pr.setBuffer(t._roots[e]),aP(0,t,n,i,r,a,s),Pr.clearBuffer()}function aP(t,e,n,i,r,a,s){const{float32Array:o,uint16Array:l,uint32Array:c}=Pr,u=t*2;if(Oo(u,l)){const h=gl(t,c),d=mc(u,l);STe(e,n,i,h,d,r,a,s)}else{const h=gc(t);rp(h,o,i,a,s)&&aP(h,e,n,i,r,a,s);const d=bc(t,c);rp(d,o,i,a,s)&&aP(d,e,n,i,r,a,s)}}const LTe=["x","y","z"];function UTe(t,e,n,i,r,a){Pr.setBuffer(t._roots[e]);const s=sP(0,t,n,i,r,a);return Pr.clearBuffer(),s}function sP(t,e,n,i,r,a){const{float32Array:s,uint16Array:o,uint32Array:l}=Pr;let c=t*2;if(Oo(c,o)){const f=gl(t,l),h=mc(c,o);return wTe(e,n,i,f,h,r,a)}else{const f=EQ(t,l),h=LTe[f],m=i.direction[h]>=0;let y,v;m?(y=gc(t),v=bc(t,l)):(y=bc(t,l),v=gc(t));const x=rp(y,s,i,r,a)?sP(y,e,n,i,r,a):null;if(x){const T=x.point[h];if(m?T<=s[v+f]:T>=s[v+f+3])return x}const E=rp(v,s,i,r,a)?sP(v,e,n,i,r,a):null;return x&&E?x.distance<=E.distance?x:E:x||E||null}}const FE=new vi,Wb=new Su,qb=new Su,Cx=new Ct,Uj=new _o,zE=new _o;function BTe(t,e,n,i){Pr.setBuffer(t._roots[e]);const r=oP(0,t,n,i);return Pr.clearBuffer(),r}function oP(t,e,n,i,r=null){const{float32Array:a,uint16Array:s,uint32Array:o}=Pr;let l=t*2;if(r===null&&(n.boundingBox||n.computeBoundingBox(),Uj.set(n.boundingBox.min,n.boundingBox.max,i),r=Uj),Oo(l,s)){const u=e.geometry,f=u.index,h=u.attributes.position,d=n.index,m=n.attributes.position,y=gl(t,o),v=mc(l,s);if(Cx.copy(i).invert(),n.boundsTree)return oa(t,a,zE),zE.matrix.copy(Cx),zE.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:x=>zE.intersectsBox(x),intersectsTriangle:x=>{x.a.applyMatrix4(i),x.b.applyMatrix4(i),x.c.applyMatrix4(i),x.needsUpdate=!0;for(let _=y,E=v+y;_<E;_++)if(Ca(qb,3*e.resolveTriangleIndex(_),f,h),qb.needsUpdate=!0,x.intersectsTriangle(qb))return!0;return!1}});for(let g=y,x=v+y;g<x;g++){const _=e.resolveTriangleIndex(g);Ca(Wb,3*_,f,h),Wb.a.applyMatrix4(Cx),Wb.b.applyMatrix4(Cx),Wb.c.applyMatrix4(Cx),Wb.needsUpdate=!0;for(let E=0,T=d.count;E<T;E+=3)if(Ca(qb,E,d,m),qb.needsUpdate=!0,Wb.intersectsTriangle(qb))return!0}}else{const u=t+8,f=o[t+6];return oa(u,a,FE),!!(r.intersectsBox(FE)&&oP(u,e,n,i,r)||(oa(f,a,FE),r.intersectsBox(FE)&&oP(f,e,n,i,r)))}}const jE=new Ct,JD=new _o,Rx=new _o,FTe=new Y,zTe=new Y,jTe=new Y,HTe=new Y;function VTe(t,e,n,i={},r={},a=0,s=1/0){e.boundingBox||e.computeBoundingBox(),JD.set(e.boundingBox.min,e.boundingBox.max,n),JD.needsUpdate=!0;const o=t.geometry,l=o.attributes.position,c=o.index,u=e.attributes.position,f=e.index,h=yc.getPrimitive(),d=yc.getPrimitive();let m=FTe,y=zTe,v=null,g=null;r&&(v=jTe,g=HTe);let x=1/0,_=null,E=null;return jE.copy(n).invert(),Rx.matrix.copy(jE),t.shapecast({boundsTraverseOrder:T=>JD.distanceToBox(T),intersectsBounds:(T,w,A)=>A<x&&A<s?(w&&(Rx.min.copy(T.min),Rx.max.copy(T.max),Rx.needsUpdate=!0),!0):!1,intersectsRange:(T,w)=>{if(e.boundsTree){const A=e.boundsTree;return A.shapecast({boundsTraverseOrder:C=>Rx.distanceToBox(C),intersectsBounds:(C,D,k)=>k<x&&k<s,intersectsRange:(C,D)=>{for(let k=C,P=C+D;k<P;k++){const B=A.resolveTriangleIndex(k);Ca(d,3*B,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let H=T,G=T+w;H<G;H++){const V=t.resolveTriangleIndex(H);Ca(h,3*V,c,l),h.needsUpdate=!0;const U=h.distanceToTriangle(d,m,v);if(U<x&&(y.copy(m),g&&g.copy(v),x=U,_=H,E=k),U<a)return!0}}}})}else{const A=Sv(e);for(let C=0,D=A;C<D;C++){Ca(d,3*C,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let k=T,P=T+w;k<P;k++){const B=t.resolveTriangleIndex(k);Ca(h,3*B,c,l),h.needsUpdate=!0;const H=h.distanceToTriangle(d,m,v);if(H<x&&(y.copy(m),g&&g.copy(v),x=H,_=k,E=C),H<a)return!0}}}}}),yc.releasePrimitive(h),yc.releasePrimitive(d),x===1/0?null:(i.point?i.point.copy(y):i.point=y.clone(),i.distance=x,i.faceIndex=_,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(jE),y.applyMatrix4(jE),r.distance=y.sub(r.point).length(),r.faceIndex=E),i)}function GTe(){return typeof SharedArrayBuffer<"u"}const U1=new Pr.constructor,jA=new Pr.constructor,xd=new gB(()=>new vi),Xb=new vi,Yb=new vi,ZD=new vi,QD=new vi;let eO=!1;function WTe(t,e,n,i){if(eO)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");eO=!0;const r=t._roots,a=e._roots;let s,o=0,l=0;const c=new Ct().copy(n).invert();for(let u=0,f=r.length;u<f;u++){U1.setBuffer(r[u]),l=0;const h=xd.getPrimitive();oa(0,U1.float32Array,h),h.applyMatrix4(c);for(let d=0,m=a.length;d<m&&(jA.setBuffer(a[d]),s=Kc(0,0,n,c,i,o,l,0,0,h),jA.clearBuffer(),l+=a[d].length,!s);d++);if(xd.releasePrimitive(h),U1.clearBuffer(),o+=r[u].length,s)break}return eO=!1,s}function Kc(t,e,n,i,r,a=0,s=0,o=0,l=0,c=null,u=!1){let f,h;u?(f=jA,h=U1):(f=U1,h=jA);const d=f.float32Array,m=f.uint32Array,y=f.uint16Array,v=h.float32Array,g=h.uint32Array,x=h.uint16Array,_=t*2,E=e*2,T=Oo(_,y),w=Oo(E,x);let A=!1;if(w&&T)u?A=r(gl(e,g),mc(e*2,x),gl(t,m),mc(t*2,y),l,s+e,o,a+t):A=r(gl(t,m),mc(t*2,y),gl(e,g),mc(e*2,x),o,a+t,l,s+e);else if(w){const C=xd.getPrimitive();oa(e,v,C),C.applyMatrix4(n);const D=gc(t),k=bc(t,m);oa(D,d,Xb),oa(k,d,Yb);const P=C.intersectsBox(Xb),B=C.intersectsBox(Yb);A=P&&Kc(e,D,i,n,r,s,a,l,o+1,C,!u)||B&&Kc(e,k,i,n,r,s,a,l,o+1,C,!u),xd.releasePrimitive(C)}else{const C=gc(e),D=bc(e,g);oa(C,v,ZD),oa(D,v,QD);const k=c.intersectsBox(ZD),P=c.intersectsBox(QD);if(k&&P)A=Kc(t,C,n,i,r,a,s,o,l+1,c,u)||Kc(t,D,n,i,r,a,s,o,l+1,c,u);else if(k)if(T)A=Kc(t,C,n,i,r,a,s,o,l+1,c,u);else{const B=xd.getPrimitive();B.copy(ZD).applyMatrix4(n);const H=gc(t),G=bc(t,m);oa(H,d,Xb),oa(G,d,Yb);const V=B.intersectsBox(Xb),U=B.intersectsBox(Yb);A=V&&Kc(C,H,i,n,r,s,a,l,o+1,B,!u)||U&&Kc(C,G,i,n,r,s,a,l,o+1,B,!u),xd.releasePrimitive(B)}else if(P)if(T)A=Kc(t,D,n,i,r,a,s,o,l+1,c,u);else{const B=xd.getPrimitive();B.copy(QD).applyMatrix4(n);const H=gc(t),G=bc(t,m);oa(H,d,Xb),oa(G,d,Yb);const V=B.intersectsBox(Xb),U=B.intersectsBox(Yb);A=V&&Kc(D,H,i,n,r,s,a,l,o+1,B,!u)||U&&Kc(D,G,i,n,r,s,a,l,o+1,B,!u),xd.releasePrimitive(B)}}return A}const HE=new _o,Bj=new vi,qTe={strategy:xQ,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class bB{static serialize(e,n={}){n={cloneBuffers:!0,...n};const i=e.geometry,r=e._roots,a=e._indirectBuffer,s=i.getIndex();let o;return n.cloneBuffers?o={roots:r.map(l=>l.slice()),index:s?s.array.slice():null,indirectBuffer:a?a.slice():null}:o={roots:r,index:s?s.array:null,indirectBuffer:a},o}static deserialize(e,n,i={}){i={setIndex:!0,indirect:!!e.indirectBuffer,...i};const{index:r,roots:a,indirectBuffer:s}=e,o=new bB(n,{...i,[WD]:!0});if(o._roots=a,o._indirectBuffer=s||null,i.setIndex){const l=n.getIndex();if(l===null){const c=new Tn(e.index,1,!1);n.setIndex(c)}else l.array!==r&&(l.array.set(r),l.needsUpdate=!0)}return o}get indirect(){return!!this._indirectBuffer}constructor(e,n={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(n=Object.assign({...qTe,[WD]:!1},n),n.useSharedArrayBuffer&&!GTe())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,n[WD]||(oTe(this,n),!e.boundingBox&&n.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new vi))),this.resolveTriangleIndex=n.indirect?i=>this._indirectBuffer[i]:i=>i}refit(e=null){return(this.indirect?NTe:_Te)(this,e)}traverse(e,n=0){const i=this._roots[n],r=new Uint32Array(i),a=new Uint16Array(i);s(0);function s(o,l=0){const c=o*2,u=a[c+15]===Z2;if(u){const f=r[o+6],h=a[c+14];e(l,u,new Float32Array(i,o*4,6),f,h)}else{const f=o+L1/4,h=r[o+6],d=r[o+7];e(l,u,new Float32Array(i,o*4,6),d)||(s(f,l+1),s(h,l+1))}}}raycast(e,n=Al,i=0,r=1/0){const a=this._roots,s=this.geometry,o=[],l=n.isMaterial,c=Array.isArray(n),u=s.groups,f=l?n.side:n,h=this.indirect?PTe:MTe;for(let d=0,m=a.length;d<m;d++){const y=c?n[u[d].materialIndex].side:f,v=o.length;if(h(this,d,y,e,o,i,r),c){const g=u[d].materialIndex;for(let x=v,_=o.length;x<_;x++)o[x].face.materialIndex=g}}return o}raycastFirst(e,n=Al,i=0,r=1/0){const a=this._roots,s=this.geometry,o=n.isMaterial,l=Array.isArray(n);let c=null;const u=s.groups,f=o?n.side:n,h=this.indirect?UTe:ATe;for(let d=0,m=a.length;d<m;d++){const y=l?n[u[d].materialIndex].side:f,v=h(this,d,y,e,i,r);v!=null&&(c==null||v.distance<c.distance)&&(c=v,l&&(v.face.materialIndex=u[d].materialIndex))}return c}intersectsGeometry(e,n){let i=!1;const r=this._roots,a=this.indirect?BTe:CTe;for(let s=0,o=r.length;s<o&&(i=a(this,s,e,n),!i);s++);return i}shapecast(e){const n=yc.getPrimitive(),i=this.indirect?ETe:xTe;let{boundsTraverseOrder:r,intersectsBounds:a,intersectsRange:s,intersectsTriangle:o}=e;if(s&&o){const f=s;s=(h,d,m,y,v)=>f(h,d,m,y,v)?!0:i(h,d,this,o,m,y,n)}else s||(o?s=(f,h,d,m)=>i(f,h,this,o,d,m,n):s=(f,h,d)=>d);let l=!1,c=0;const u=this._roots;for(let f=0,h=u.length;f<h;f++){const d=u[f];if(l=dTe(this,f,a,s,r,c),l)break;c+=d.byteLength}return yc.releasePrimitive(n),l}bvhcast(e,n,i){let{intersectsRanges:r,intersectsTriangles:a}=i;const s=yc.getPrimitive(),o=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?m=>{const y=this.resolveTriangleIndex(m);Ca(s,y*3,o,l)}:m=>{Ca(s,m*3,o,l)},u=yc.getPrimitive(),f=e.geometry.index,h=e.geometry.attributes.position,d=e.indirect?m=>{const y=e.resolveTriangleIndex(m);Ca(u,y*3,f,h)}:m=>{Ca(u,m*3,f,h)};if(a){const m=(y,v,g,x,_,E,T,w)=>{for(let A=g,C=g+x;A<C;A++){d(A),u.a.applyMatrix4(n),u.b.applyMatrix4(n),u.c.applyMatrix4(n),u.needsUpdate=!0;for(let D=y,k=y+v;D<k;D++)if(c(D),s.needsUpdate=!0,a(s,u,D,A,_,E,T,w))return!0}return!1};if(r){const y=r;r=function(v,g,x,_,E,T,w,A){return y(v,g,x,_,E,T,w,A)?!0:m(v,g,x,_,E,T,w,A)}}else r=m}return WTe(this,e,n,r)}intersectsBox(e,n){return HE.set(e.min,e.max,n),HE.needsUpdate=!0,this.shapecast({intersectsBounds:i=>HE.intersectsBox(i),intersectsTriangle:i=>HE.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:n=>e.intersectsBox(n),intersectsTriangle:n=>n.intersectsSphere(e)})}closestPointToGeometry(e,n,i={},r={},a=0,s=1/0){return(this.indirect?VTe:ITe)(this,e,n,i,r,a,s)}closestPointToPoint(e,n={},i=0,r=1/0){return pTe(this,e,n,i,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{oa(0,new Float32Array(i),Bj),e.union(Bj)}),e}}function Fj(t,e,n){return t===null?null:(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t)}const VE=new Tu,zj=new Y,jj=new Ct,XTe=fi.prototype.raycast,YTe=kU.prototype.raycast,Hj=new Y,ls=new fi,GE=[];function $Te(t,e){this.isBatchedMesh?KTe.call(this,t,e):JTe.call(this,t,e)}function KTe(t,e){if(this.boundsTrees){const n=this.boundsTrees,i=this._drawInfo||this._instanceInfo,r=this._drawRanges||this._geometryInfo,a=this.matrixWorld;ls.material=this.material,ls.geometry=this.geometry;const s=ls.geometry.boundsTree,o=ls.geometry.drawRange;ls.geometry.boundingSphere===null&&(ls.geometry.boundingSphere=new xr);for(let l=0,c=i.length;l<c;l++){if(!this.getVisibleAt(l))continue;const u=i[l].geometryIndex;if(ls.geometry.boundsTree=n[u],this.getMatrixAt(l,ls.matrixWorld).premultiply(a),!ls.geometry.boundsTree){this.getBoundingBoxAt(u,ls.geometry.boundingBox),this.getBoundingSphereAt(u,ls.geometry.boundingSphere);const f=r[u];ls.geometry.setDrawRange(f.start,f.count)}ls.raycast(t,GE);for(let f=0,h=GE.length;f<h;f++){const d=GE[f];d.object=this,d.batchId=l,e.push(d)}GE.length=0}ls.geometry.boundsTree=s,ls.geometry.drawRange=o,ls.material=null,ls.geometry=null}else YTe.call(this,t,e)}function JTe(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;jj.copy(this.matrixWorld).invert(),VE.copy(t.ray).applyMatrix4(jj),Hj.setFromMatrixScale(this.matrixWorld),zj.copy(VE.direction).multiply(Hj);const n=zj.length(),i=t.near/n,r=t.far/n,a=this.geometry.boundsTree;if(t.firstHitOnly===!0){const s=Fj(a.raycastFirst(VE,this.material,i,r),this,t);s&&e.push(s)}else{const s=a.raycast(VE,this.material,i,r);for(let o=0,l=s.length;o<l;o++){const c=Fj(s[o],this,t);c&&e.push(c)}}}else XTe.call(this,t,e)}function ZTe(t={}){return this.boundsTree=new bB(this,t),this.boundsTree}function QTe(){this.boundsTree=null}const Vj=t=>t.isMesh,eAe=I.forwardRef(({enabled:t=!0,firstHitOnly:e=!1,children:n,strategy:i=_Q,verbose:r=!1,setBoundingBox:a=!0,maxDepth:s=40,maxLeafTris:o=10,indirect:l=!1,...c},u)=>{const f=I.useRef(null),h=ui(d=>d.raycaster);return I.useImperativeHandle(u,()=>f.current,[]),I.useEffect(()=>{if(t){const d={strategy:i,verbose:r,setBoundingBox:a,maxDepth:s,maxLeafTris:o,indirect:l},m=f.current;return h.firstHitOnly=e,m.traverse(y=>{Vj(y)&&!y.geometry.boundsTree&&y.raycast===fi.prototype.raycast&&(y.raycast=$Te,y.geometry.computeBoundsTree=ZTe,y.geometry.disposeBoundsTree=QTe,y.geometry.computeBoundsTree(d))}),()=>{delete h.firstHitOnly,m.traverse(y=>{Vj(y)&&y.geometry.boundsTree&&(y.geometry.disposeBoundsTree(),y.raycast=fi.prototype.raycast)})}}},[]),I.createElement("group",ts({ref:f},c),n)}),Gj=(t,e)=>{t.updateRanges[0]=e};function tAe(t){return typeof t=="function"}const Wj=new Ct,qj=new Ct,WE=[],kx=new fi;class nAe extends Zu{constructor(){super(),this.color=new Ut("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;kx.geometry=i.geometry;const r=i.matrixWorld,a=i.userData.instances.indexOf(this.instanceKey);if(!(a===-1||a>i.count)){i.getMatrixAt(a,Wj),qj.multiplyMatrices(r,Wj),kx.matrixWorld=qj,i.material instanceof ka?kx.material.side=i.material.side:kx.material.side=i.material[0].side,kx.raycast(e,WE);for(let s=0,o=WE.length;s<o;s++){const l=WE[s];l.instanceId=a,l.object=this,n.push(l)}WE.length=0}}}const AQ=I.createContext(null),Xj=new Ct,Yj=new Ct,iAe=new Ct,$j=new Y,Kj=new Hn,Jj=new Y,rAe=t=>t.isInstancedBufferAttribute,qu=I.forwardRef(({context:t,children:e,...n},i)=>{I.useMemo(()=>gS({PositionMesh:nAe}),[]);const r=I.useRef(null);I.useImperativeHandle(i,()=>r.current,[]);const{subscribe:a,getParent:s}=I.useContext(t||AQ);return I.useLayoutEffect(()=>a(r),[]),I.createElement("positionMesh",ts({instance:s(),instanceKey:r,ref:r},n),e)}),CQ=I.forwardRef(({context:t,children:e,range:n,limit:i=1e3,frames:r=1/0,...a},s)=>{const[{localContext:o,instance:l}]=I.useState(()=>{const x=I.createContext(null);return{localContext:x,instance:I.forwardRef((_,E)=>I.createElement(qu,ts({context:x},_,{ref:E})))}}),c=I.useRef(null);I.useImperativeHandle(s,()=>c.current,[]);const[u,f]=I.useState([]),[[h,d]]=I.useState(()=>{const x=new Float32Array(i*16);for(let _=0;_<i;_++)iAe.identity().toArray(x,_*16);return[x,new Float32Array([...new Array(i*3)].map(()=>1))]});I.useEffect(()=>{c.current.instanceMatrix.needsUpdate=!0});let m=0,y=0;const v=I.useRef([]);I.useLayoutEffect(()=>{v.current=Object.entries(c.current.geometry.attributes).filter(([x,_])=>rAe(_))}),fa(()=>{if(r===1/0||m<r){c.current.updateMatrix(),c.current.updateMatrixWorld(),Xj.copy(c.current.matrixWorld).invert(),y=Math.min(i,n!==void 0?n:i,u.length),c.current.count=y,Gj(c.current.instanceMatrix,{start:0,count:y*16}),Gj(c.current.instanceColor,{start:0,count:y*3});for(let x=0;x<u.length;x++){const _=u[x].current;_.matrixWorld.decompose($j,Kj,Jj),Yj.compose($j,Kj,Jj).premultiply(Xj),Yj.toArray(h,x*16),c.current.instanceMatrix.needsUpdate=!0,_.color.toArray(d,x*3),c.current.instanceColor.needsUpdate=!0}m++}});const g=I.useMemo(()=>({getParent:()=>c,subscribe:x=>(f(_=>[..._,x]),()=>f(_=>_.filter(E=>E.current!==x.current)))}),[]);return I.createElement("instancedMesh",ts({userData:{instances:u,limit:i,frames:r},matrixAutoUpdate:!1,ref:c,args:[null,null,0],raycast:()=>null},a),I.createElement("instancedBufferAttribute",{attach:"instanceMatrix",args:[h,16],usage:CA}),I.createElement("instancedBufferAttribute",{attach:"instanceColor",args:[d,3],usage:CA}),tAe(e)?I.createElement(o.Provider,{value:g},e(l)):t?I.createElement(t.Provider,{value:g},e):I.createElement(AQ.Provider,{value:g},e))}),RQ=(t,e,n)=>{let i;switch(t){case yo:i=new Uint8ClampedArray(e*n*4);break;case Za:i=new Uint16Array(e*n*4);break;case Tc:i=new Uint32Array(e*n*4);break;case d2:i=new Int8Array(e*n*4);break;case p2:i=new Int16Array(e*n*4);break;case fv:i=new Int32Array(e*n*4);break;case vr:i=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return i};let qE;const aAe=(t,e,n,i)=>{if(qE!==void 0)return qE;const r=new Ac(1,1,i);e.setRenderTarget(r);const a=new fi(new dp,new go({color:16777215}));e.render(a,n),e.setRenderTarget(null);const s=RQ(t,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,s),r.dispose(),a.geometry.dispose(),a.material.dispose(),qE=s[0]!==0,qE};class yB{constructor(e){var n,i,r,a,s,o,l,c,u,f,h,d,m,y,v,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(_){throw this._renderer.setRenderTarget(null),_}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const x={format:Jr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.generateMipmaps:!1,magFilter:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:Wi,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Wi,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS:ga,wrapT:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapT)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT:ga};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=yB.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new pv,this._camera=new Ph,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!aAe(this._type,this._renderer,this._camera,x)){let _;switch(this._type){case Za:_=this._renderer.extensions.has("EXT_color_buffer_float")?vr:void 0;break}_!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${vr}`),this._type=_):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new fi(new dp,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ac(this.width,this.height,x),this._renderTarget.texture.mapping=((v=e.renderTargetOptions)===null||v===void 0?void 0:v.mapping)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping:tp}static instantiateRenderer(){const e=new aB;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=RQ(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new ws(this.toArray(),this.width,this.height,Jr,this._type,e?.mapping||tp,e?.wrapS||ga,e?.wrapT||ga,e?.magFilter||Wi,e?.minFilter||Wi,e?.anisotropy||1,_u);return n.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof is&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof tr&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof tr&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const sAe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,oAe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class lAe extends is{constructor({gamma:e,offsetHdr:n,offsetSdr:i,gainMapMin:r,gainMapMax:a,maxDisplayBoost:s,hdrCapacityMin:o,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:sAe,fragmentShader:oAe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new Y(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new Y().fromArray(n)},offsetSdr:{value:new Y().fromArray(i)},gainMapMin:{value:new Y().fromArray(r)},gainMapMax:{value:new Y().fromArray(a)},weightFactor:{value:(Math.log2(s)-o)/(l-o)}},blending:lf,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class kQ extends Error{}class DQ extends Error{}const Dx=(t,e,n)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(t);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(t);if(r){const a=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(s=>s.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},cAe=t=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(t):e=t.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const i=e.indexOf("x:xmpmeta>",n),r=e.slice(n,i+10);try{const a=Dx(r,"hdrgm:GainMapMin","0"),s=Dx(r,"hdrgm:GainMapMax"),o=Dx(r,"hdrgm:Gamma","1"),l=Dx(r,"hdrgm:OffsetSDR","0.015625"),c=Dx(r,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),f=u?u[1]:"0",h=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!h)throw new Error("Incomplete gainmap metadata");const d=h[1];return{gainMapMin:Array.isArray(a)?a.map(m=>parseFloat(m)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(s)?s.map(m=>parseFloat(m)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(o)?o.map(m=>parseFloat(m)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(m=>parseFloat(m)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(m=>parseFloat(m)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(d)}}catch{}n=e.indexOf("<x:xmpmeta",i)}};class uAe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,i)=>{const r=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const s=a.byteLength;let o=2,l=0,c;for(;o<s;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(a.getUint8(o)!==255){i(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${a.getUint8(o).toString(16)}`));return}if(c=a.getUint8(o+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=o+4;if(a.getUint32(u)===1297106432){const f=u+4;let h;if(a.getUint16(f)===18761)h=!1;else if(a.getUint16(f)===19789)h=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(f+2,!h)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const d=a.getUint32(f+4,!h);if(d<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const m=f+d,y=a.getUint16(m,!h),v=m+2;let g=0;for(let T=v;T<v+12*y;T+=12)a.getUint16(T,!h)===45057&&(g=a.getUint32(T+8,!h));const _=m+2+y*12+4,E=[];for(let T=_;T<_+g*16;T+=16){const w={MPType:a.getUint32(T,!h),size:a.getUint32(T+4,!h),dataOffset:a.getUint32(T+8,!h),dependantImages:a.getUint32(T+12,!h),start:-1,end:-1,isFII:!1};w.dataOffset?(w.start=f+w.dataOffset,w.isFII=!1):(w.start=0,w.isFII=!0),w.end=w.start+w.size,E.push(w)}if(this.options.extractNonFII&&E.length){const T=new Blob([a]),w=[];for(const A of E){if(A.isFII&&!this.options.extractFII)continue;const C=T.slice(A.start,A.end+1,"image/jpeg");w.push(C)}n(w)}}}o+=2+a.getUint16(o+2)}})}}const fAe=async t=>{const e=cAe(t);if(!e)throw new DQ("Gain map XMP metadata not found");const i=await new uAe({extractFII:!0,extractNonFII:!0}).extract(t);if(i.length!==2)throw new kQ("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},Zj=t=>new Promise((e,n)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{n(r)},i.src=URL.createObjectURL(t)});class OQ extends Cs{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new j2}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new lAe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new tr,sdr:new tr});return new yB({width:16,height:16,type:Za,colorSpace:_u,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,i,r){const a=r?new Blob([r],{type:"image/jpeg"}):void 0,s=new Blob([i],{type:"image/jpeg"});let o,l,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([a?Zj(a):Promise.resolve(void 0),Zj(s)]);l=h[0],o=h[1],c=!0}else{const h=await Promise.all([a?createImageBitmap(a,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:"flipY"})]);l=h[0],o=h[1]}const u=new tr(l||new ImageData(2,2),tp,ga,ga,Wi,kN,Jr,yo,1,_u);u.flipY=c,u.needsUpdate=!0;const f=new tr(o,tp,ga,ga,Wi,kN,Jr,yo,1,gs);f.flipY=c,f.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class hAe extends OQ{load([e,n,i],r,a,s){const o=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(o,u,l,c)}catch(D){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(i),typeof s=="function"&&s(D),o.disposeOnDemandRenderer();return}typeof r=="function"&&r(o),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(i),o.disposeOnDemandRenderer()}};let h=!0,d=0,m=0,y=!0,v=0,g=0,x=!0,_=0,E=0;const T=()=>{if(typeof a=="function"){const D=d+v+_,k=m+g+E,P=h&&y&&x;a(new ProgressEvent("progress",{lengthComputable:P,loaded:k,total:D}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(i);const w=new Es(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(e,async D=>{if(typeof D=="string")throw new Error("Invalid sdr buffer");l=D,await f()},D=>{h=D.lengthComputable,m=D.loaded,d=D.total,T()},D=>{this.manager.itemError(e),typeof s=="function"&&s(D)});const A=new Es(this._internalLoadingManager);A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(this.withCredentials),A.load(n,async D=>{if(typeof D=="string")throw new Error("Invalid gainmap buffer");c=D,await f()},D=>{y=D.lengthComputable,g=D.loaded,v=D.total,T()},D=>{this.manager.itemError(n),typeof s=="function"&&s(D)});const C=new Es(this._internalLoadingManager);return C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(i,async D=>{if(typeof D!="string")throw new Error("Invalid metadata string");u=JSON.parse(D),await f()},D=>{x=D.lengthComputable,E=D.loaded,_=D.total,T()},D=>{this.manager.itemError(i),typeof s=="function"&&s(D)}),o}}class dAe extends OQ{load(e,n,i,r){const a=this.prepareQuadRenderer(),s=new Es(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let c,u,f;try{const h=await fAe(l);c=h.sdr,u=h.gainMap,f=h.metadata}catch(h){if(h instanceof DQ||h instanceof kQ)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw h}try{await this.render(a,f,c,u)}catch(h){this.manager.itemError(e),typeof r=="function"&&r(h),a.disposeOnDemandRenderer();return}typeof n=="function"&&n(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof r=="function"&&r(o)}),a}}const w_={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},IQ="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Y0=t=>Array.isArray(t),vB=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function eR({files:t=vB,path:e="",preset:n=void 0,colorSpace:i=void 0,extensions:r}={}){n&&(xB(n),t=w_[n],e=IQ);const a=Y0(t),{extension:s,isCubemap:o}=_B(t),l=SB(s);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);const c=ui(d=>d.gl);I.useLayoutEffect(()=>{if(s!=="webp"&&s!=="jpg"&&s!=="jpeg")return;function d(){Ly.clear(l,a?[t]:t)}c.domElement.addEventListener("webglcontextlost",d,{once:!0})},[t,c.domElement]);const u=Ly(l,a?[t]:t,d=>{(s==="webp"||s==="jpg"||s==="jpeg")&&d.setRenderer(c),d.setPath==null||d.setPath(e),r&&r(d)});let f=a?u[0]:u;if(s==="jpg"||s==="jpeg"||s==="webp"){var h;f=(h=f.renderTarget)==null?void 0:h.texture}return f.mapping=o?mf:xy,f.colorSpace=i??(o?"srgb":"srgb-linear"),f}const pAe={files:vB,path:"",preset:void 0,extensions:void 0};eR.preload=t=>{const e={...pAe,...t};let{files:n,path:i=""}=e;const{preset:r,extensions:a}=e;r&&(xB(r),n=w_[r],i=IQ);const{extension:s}=_B(n);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=SB(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);Ly.preload(o,Y0(n)?[n]:n,l=>{l.setPath==null||l.setPath(i),a&&a(l)})};const mAe={files:vB,preset:void 0};eR.clear=t=>{const e={...mAe,...t};let{files:n}=e;const{preset:i}=e;i&&(xB(i),n=w_[i]);const{extension:r}=_B(n),a=SB(r);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);Ly.clear(a,Y0(n)?[n]:n)};function xB(t){if(!(t in w_))throw new Error("Preset must be one of: "+Object.keys(w_).join(", "))}function _B(t){var e;const n=Y0(t)&&t.length===6,i=Y0(t)&&t.length===3&&t.some(s=>s.endsWith("json")),r=Y0(t)?t[0]:t;return{extension:n?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:i}}function SB(t){return t==="cube"?nZ:t==="hdr"?vMe:t==="exr"?xMe:t==="jpg"||t==="jpeg"?dAe:t==="webp"?hAe:null}const gAe=t=>t.current&&t.current.isScene,bAe=t=>gAe(t)?t.current:t;function wB(t,e,n,i,r={}){var a,s,o,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const c=bAe(e||n),u=c.background,f=c.environment,h={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(a=(s=c.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(o=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return t!=="only"&&(c.environment=i),t&&(c.background=i),su(c,r),()=>{t!=="only"&&(c.environment=f),t&&(c.background=u),su(c,h)}}function EB({scene:t,background:e=!1,map:n,...i}){const r=ui(a=>a.scene);return I.useLayoutEffect(()=>{if(n)return wB(e,t,r,n,i)}),null}function NQ({background:t=!1,scene:e,blur:n,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...l}){const c=eR(l),u=ui(f=>f.scene);return I.useLayoutEffect(()=>wB(t,e,u,c,{backgroundBlurriness:n??i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),I.useEffect(()=>()=>{c.dispose()},[c]),null}function yAe({children:t,near:e=.1,far:n=1e3,resolution:i=256,frames:r=1,map:a,background:s=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h,scene:d,files:m,path:y,preset:v=void 0,extensions:g}){const x=ui(C=>C.gl),_=ui(C=>C.scene),E=I.useRef(null),[T]=I.useState(()=>new pv),w=I.useMemo(()=>{const C=new CU(i);return C.texture.type=Za,C},[i]);I.useEffect(()=>()=>{w.dispose()},[w]),I.useLayoutEffect(()=>{if(r===1){const C=x.autoClear;x.autoClear=!0,E.current.update(x,T),x.autoClear=C}return wB(s,d,_,w.texture,{backgroundBlurriness:o??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h})},[t,T,w.texture,d,_,s,r,x]);let A=1;return fa(()=>{if(r===1/0||A<r){const C=x.autoClear;x.autoClear=!0,E.current.update(x,T),x.autoClear=C,A++}}),I.createElement(I.Fragment,null,Zwe(I.createElement(I.Fragment,null,t,I.createElement("cubeCamera",{ref:E,args:[e,n,w]}),m||v?I.createElement(NQ,{background:!0,files:m,preset:v,path:y,extensions:g}):a?I.createElement(EB,{background:!0,map:a,extensions:g}):null),T))}function vAe(t){var e,n,i,r;const a=eR(t),s=t.map||a;I.useMemo(()=>gS({GroundProjectedEnvImpl:LEe}),[]),I.useEffect(()=>()=>{a.dispose()},[a]);const o=I.useMemo(()=>[s],[s]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return I.createElement(I.Fragment,null,I.createElement(EB,ts({},t,{map:s})),I.createElement("groundProjectedEnvImpl",{args:o,scale:u,height:l,radius:c}))}function xAe(t){return t.ground?I.createElement(vAe,t):t.map?I.createElement(EB,t):t.children?I.createElement(yAe,t):I.createElement(NQ,t)}const _Ae=I.createContext(null);function SAe({iterations:t=10,ms:e=250,threshold:n=.75,step:i=.1,factor:r=.5,flipflops:a=1/0,bounds:s=h=>h>100?[60,100]:[40,60],onIncline:o,onDecline:l,onChange:c,onFallback:u,children:f}){const h=Math.pow(10,0),[d,m]=I.useState(()=>({fps:0,index:0,factor:r,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:v=>{const g=Symbol();return d.subscriptions.set(g,v.current),()=>void d.subscriptions.delete(g)}}));let y=0;return fa(()=>{const{frames:v,averages:g}=d;if(!d.fallback&&g.length<t){v.push(performance.now());const x=v[v.length-1]-v[0];if(x>=e){if(d.fps=Math.round(v.length/x*1e3*h)/h,d.refreshrate=Math.max(d.refreshrate,d.fps),g[d.index++%t]=d.fps,g.length===t){const[_,E]=s(d.refreshrate),T=g.filter(A=>A>=E),w=g.filter(A=>A<_);T.length>t*n&&(d.factor=Math.min(1,d.factor+i),d.flipped++,o&&o(d),d.subscriptions.forEach(A=>A.onIncline&&A.onIncline(d))),w.length>t*n&&(d.factor=Math.max(0,d.factor-i),d.flipped++,l&&l(d),d.subscriptions.forEach(A=>A.onDecline&&A.onDecline(d))),y!==d.factor&&(y=d.factor,c&&c(d),d.subscriptions.forEach(A=>A.onChange&&A.onChange(d))),d.flipped>a&&!d.fallback&&(d.fallback=!0,u&&u(d),d.subscriptions.forEach(A=>A.onFallback&&A.onFallback(d))),d.averages=[]}d.frames=[]}}}),I.createElement(_Ae.Provider,{value:d},f)}const wAe={},Qj=t=>{let e;const n=new Set,i=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const d=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(m=>m(e,d))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(wAe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(i,r,l);return l},EAe=t=>t?Qj(t):Qj,PQ={},{useDebugValue:MAe}=ke,{useSyncExternalStoreWithSelector:TAe}=RZ;let eH=!1;const AAe=t=>t;function CAe(t,e=AAe,n){(PQ?"production":void 0)!=="production"&&n&&!eH&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),eH=!0);const i=TAe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return MAe(i),i}const tH=t=>{(PQ?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?EAe(t):t,n=(i,r)=>CAe(e,i,r);return Object.assign(n,e),n},xS=t=>t?tH(t):tH,_S=I.createContext(null),XE=new Y,nH=new Y,RAe=(t,e,n,i)=>{const r=e.dot(e),a=e.dot(t)-e.dot(n),s=e.dot(i);return s===0?-a/r:(XE.copy(i).multiplyScalar(r/s).sub(e),nH.copy(i).multiplyScalar(a/s).add(n).sub(t),-XE.dot(nH)/XE.dot(XE))},kAe=new Y(0,1,0),iH=new Ct,tO=({direction:t,axis:e})=>{const{translation:n,translationLimits:i,annotations:r,annotationsClass:a,depthTest:s,scale:o,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,opacity:h,renderOrder:d,onDragStart:m,onDrag:y,onDragEnd:v,userData:g}=I.useContext(_S),x=ui(q=>q.controls),_=I.useRef(null),E=I.useRef(null),T=I.useRef(null),w=I.useRef(0),[A,C]=I.useState(!1),D=I.useCallback(q=>{r&&(_.current.innerText=`${n.current[e].toFixed(2)}`,_.current.style.display="block"),q.stopPropagation();const X=new Ct().extractRotation(E.current.matrixWorld),z=q.point.clone(),ce=new Y().setFromMatrixPosition(E.current.matrixWorld),he=t.clone().applyMatrix4(X).normalize();T.current={clickPoint:z,dir:he},w.current=n.current[e],m({component:"Arrow",axis:e,origin:ce,directions:[he]}),x&&(x.enabled=!1),q.target.setPointerCapture(q.pointerId)},[r,t,x,m,n,e]),k=I.useCallback(q=>{if(q.stopPropagation(),A||C(!0),T.current){const{clickPoint:X,dir:z}=T.current,[ce,he]=i?.[e]||[void 0,void 0];let $=RAe(X,z,q.ray.origin,q.ray.direction);ce!==void 0&&($=Math.max($,ce-w.current)),he!==void 0&&($=Math.min($,he-w.current)),n.current[e]=w.current+$,r&&(_.current.innerText=`${n.current[e].toFixed(2)}`),iH.makeTranslation(z.x*$,z.y*$,z.z*$),y(iH)}},[r,y,A,n,i,e]),P=I.useCallback(q=>{r&&(_.current.style.display="none"),q.stopPropagation(),T.current=null,v(),x&&(x.enabled=!0),q.target.releasePointerCapture(q.pointerId)},[r,x,v]),B=I.useCallback(q=>{q.stopPropagation(),C(!1)},[]),{cylinderLength:H,coneWidth:G,coneLength:V,matrixL:U}=I.useMemo(()=>{const q=c?l/o*1.6:o/20,X=c?.2:o/5,z=c?1-X:o-X,ce=new Hn().setFromUnitVectors(kAe,t.clone().normalize()),he=new Ct().makeRotationFromQuaternion(ce);return{cylinderLength:z,coneWidth:q,coneLength:X,matrixL:he}},[t,o,l,c]),F=A?f:u[e];return I.createElement("group",{ref:E},I.createElement("group",{matrix:U,matrixAutoUpdate:!1,onPointerDown:D,onPointerMove:k,onPointerUp:P,onPointerOut:B},r&&I.createElement(pg,{position:[0,-V,0]},I.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:_})),I.createElement("mesh",{visible:!1,position:[0,(H+V)/2,0],userData:g},I.createElement("cylinderGeometry",{args:[G*1.4,G*1.4,H+V,8,1]})),I.createElement(mg,{transparent:!0,raycast:()=>null,depthTest:s,points:[0,0,0,0,H,0],lineWidth:l,side:$r,color:F,opacity:h,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),I.createElement("mesh",{raycast:()=>null,position:[0,H+V/2,0],renderOrder:d},I.createElement("coneGeometry",{args:[G,V,24,1]}),I.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:F,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},nO=new Y,iO=new Y,rO=t=>t*180/Math.PI,DAe=t=>t*Math.PI/180,OAe=(t,e,n,i,r)=>{nO.copy(t).sub(n),iO.copy(e).sub(n);const a=i.dot(i),s=r.dot(r),o=nO.dot(i)/a,l=nO.dot(r)/s,c=iO.dot(i)/a,u=iO.dot(r)/s,f=Math.atan2(l,o);return Math.atan2(u,c)-f},IAe=(t,e)=>{let n=Math.floor(t/e);return n=n<0?n+1:n,t-n*e},rH=t=>{let e=IAe(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},YE=new Ct,aH=new Y,$E=new Tu,aO=new Y,sO=({dir1:t,dir2:e,axis:n})=>{const{rotationLimits:i,annotations:r,annotationsClass:a,depthTest:s,scale:o,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,renderOrder:h,opacity:d,onDragStart:m,onDrag:y,onDragEnd:v,userData:g}=I.useContext(_S),x=ui(F=>F.controls),_=I.useRef(null),E=I.useRef(null),T=I.useRef(0),w=I.useRef(0),A=I.useRef(null),[C,D]=I.useState(!1),k=I.useCallback(F=>{r&&(_.current.innerText=`${rO(w.current).toFixed(0)}º`,_.current.style.display="block"),F.stopPropagation();const q=F.point.clone(),X=new Y().setFromMatrixPosition(E.current.matrixWorld),z=new Y().setFromMatrixColumn(E.current.matrixWorld,0).normalize(),ce=new Y().setFromMatrixColumn(E.current.matrixWorld,1).normalize(),he=new Y().setFromMatrixColumn(E.current.matrixWorld,2).normalize(),$=new hl().setFromNormalAndCoplanarPoint(he,X);A.current={clickPoint:q,origin:X,e1:z,e2:ce,normal:he,plane:$},m({component:"Rotator",axis:n,origin:X,directions:[z,ce,he]}),x&&(x.enabled=!1),F.target.setPointerCapture(F.pointerId)},[r,x,m,n]),P=I.useCallback(F=>{if(F.stopPropagation(),C||D(!0),A.current){const{clickPoint:q,origin:X,e1:z,e2:ce,normal:he,plane:$}=A.current,[Me,Se]=i?.[n]||[void 0,void 0];$E.copy(F.ray),$E.intersectPlane($,aO),$E.direction.negate(),$E.intersectPlane($,aO);let pe=OAe(q,aO,X,z,ce),xe=rO(pe);F.shiftKey&&(xe=Math.round(xe/10)*10,pe=DAe(xe)),Me!==void 0&&Se!==void 0&&Se-Me<2*Math.PI?(pe=rH(pe),pe=pe>Math.PI?pe-2*Math.PI:pe,pe=pc.clamp(pe,Me-T.current,Se-T.current),w.current=T.current+pe):(w.current=rH(T.current+pe),w.current=w.current>Math.PI?w.current-2*Math.PI:w.current),r&&(xe=rO(w.current),_.current.innerText=`${xe.toFixed(0)}º`),YE.makeRotationAxis(he,pe),aH.copy(X).applyMatrix4(YE).sub(X).negate(),YE.setPosition(aH),y(YE)}},[r,y,C,i,n]),B=I.useCallback(F=>{r&&(_.current.style.display="none"),F.stopPropagation(),T.current=w.current,A.current=null,v(),x&&(x.enabled=!0),F.target.releasePointerCapture(F.pointerId)},[r,x,v]),H=I.useCallback(F=>{F.stopPropagation(),D(!1)},[]),G=I.useMemo(()=>{const F=t.clone().normalize(),q=e.clone().normalize();return new Ct().makeBasis(F,q,F.clone().cross(q))},[t,e]),V=c?.65:o*.65,U=I.useMemo(()=>{const q=[];for(let X=0;X<=32;X++){const z=X*(Math.PI/2)/32;q.push(new Y(Math.cos(z)*V,Math.sin(z)*V,0))}return q},[V]);return I.createElement("group",{ref:E,onPointerDown:k,onPointerMove:P,onPointerUp:B,onPointerOut:H,matrix:G,matrixAutoUpdate:!1},r&&I.createElement(pg,{position:[V,V,0]},I.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:_})),I.createElement(mg,{points:U,lineWidth:l*4,visible:!1,userData:g}),I.createElement(mg,{transparent:!0,raycast:()=>null,depthTest:s,points:U,lineWidth:l,side:$r,color:C?f:u[n],opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,renderOrder:h,fog:!1}))},NAe=(t,e,n)=>{const i=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,r=[0,1,2].sort((m,y)=>Math.abs(e.getComponent(y))-Math.abs(e.getComponent(m))),a=i===r[0]?r[1]:r[0],s=t.getComponent(i),o=t.getComponent(a),l=e.getComponent(i),c=e.getComponent(a),u=n.getComponent(i),h=(n.getComponent(a)-u*(o/s))/(c-l*(o/s));return[(u-h*l)/s,h]},KE=new Tu,JE=new Y,sH=new Ct,oO=({dir1:t,dir2:e,axis:n})=>{const{translation:i,translationLimits:r,annotations:a,annotationsClass:s,depthTest:o,scale:l,lineWidth:c,fixed:u,axisColors:f,hoveredColor:h,opacity:d,onDragStart:m,onDrag:y,onDragEnd:v,userData:g}=I.useContext(_S),x=ui(X=>X.controls),_=I.useRef(null),E=I.useRef(null),T=I.useRef(null),w=I.useRef(0),A=I.useRef(0),[C,D]=I.useState(!1),k=I.useCallback(X=>{a&&(_.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`,_.current.style.display="block"),X.stopPropagation();const z=X.point.clone(),ce=new Y().setFromMatrixPosition(E.current.matrixWorld),he=new Y().setFromMatrixColumn(E.current.matrixWorld,0).normalize(),$=new Y().setFromMatrixColumn(E.current.matrixWorld,1).normalize(),Me=new Y().setFromMatrixColumn(E.current.matrixWorld,2).normalize(),Se=new hl().setFromNormalAndCoplanarPoint(Me,ce);T.current={clickPoint:z,e1:he,e2:$,plane:Se},w.current=i.current[(n+1)%3],A.current=i.current[(n+2)%3],m({component:"Slider",axis:n,origin:ce,directions:[he,$,Me]}),x&&(x.enabled=!1),X.target.setPointerCapture(X.pointerId)},[a,x,m,n]),P=I.useCallback(X=>{if(X.stopPropagation(),C||D(!0),T.current){const{clickPoint:z,e1:ce,e2:he,plane:$}=T.current,[Me,Se]=r?.[(n+1)%3]||[void 0,void 0],[pe,xe]=r?.[(n+2)%3]||[void 0,void 0];KE.copy(X.ray),KE.intersectPlane($,JE),KE.direction.negate(),KE.intersectPlane($,JE),JE.sub(z);let[Ne,Ge]=NAe(ce,he,JE);Me!==void 0&&(Ne=Math.max(Ne,Me-w.current)),Se!==void 0&&(Ne=Math.min(Ne,Se-w.current)),pe!==void 0&&(Ge=Math.max(Ge,pe-A.current)),xe!==void 0&&(Ge=Math.min(Ge,xe-A.current)),i.current[(n+1)%3]=w.current+Ne,i.current[(n+2)%3]=A.current+Ge,a&&(_.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`),sH.makeTranslation(Ne*ce.x+Ge*he.x,Ne*ce.y+Ge*he.y,Ne*ce.z+Ge*he.z),y(sH)}},[a,y,C,i,r,n]),B=I.useCallback(X=>{a&&(_.current.style.display="none"),X.stopPropagation(),T.current=null,v(),x&&(x.enabled=!0),X.target.releasePointerCapture(X.pointerId)},[a,x,v]),H=I.useCallback(X=>{X.stopPropagation(),D(!1)},[]),G=I.useMemo(()=>{const X=t.clone().normalize(),z=e.clone().normalize();return new Ct().makeBasis(X,z,X.clone().cross(z))},[t,e]),V=u?1/7:l/7,U=u?.225:l*.225,F=C?h:f[n],q=I.useMemo(()=>[new Y(0,0,0),new Y(0,U,0),new Y(U,U,0),new Y(U,0,0),new Y(0,0,0)],[U]);return I.createElement("group",{ref:E,matrix:G,matrixAutoUpdate:!1},a&&I.createElement(pg,{position:[0,0,0]},I.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:_})),I.createElement("group",{position:[V*1.7,V*1.7,0]},I.createElement("mesh",{visible:!0,onPointerDown:k,onPointerMove:P,onPointerUp:B,onPointerOut:H,scale:U,userData:g},I.createElement("planeGeometry",null),I.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:F,polygonOffset:!0,polygonOffsetFactor:-10,side:$r,fog:!1})),I.createElement(mg,{position:[-U/2,-U/2,0],transparent:!0,depthTest:o,points:q,lineWidth:c,color:F,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,userData:g,fog:!1})))},i1=new Y,oH=new Y,PAe=(t,e,n,i)=>{const r=e.dot(e),a=e.dot(t)-e.dot(n),s=e.dot(i);return s===0?-a/r:(i1.copy(i).multiplyScalar(r/s).sub(e),oH.copy(i).multiplyScalar(a/s).add(n).sub(t),-i1.dot(oH)/i1.dot(i1))},LAe=new Y(0,1,0),Ox=new Y,lH=new Ct,lO=({direction:t,axis:e})=>{const{scaleLimits:n,annotations:i,annotationsClass:r,depthTest:a,scale:s,lineWidth:o,fixed:l,axisColors:c,hoveredColor:u,opacity:f,renderOrder:h,onDragStart:d,onDrag:m,onDragEnd:y,userData:v}=I.useContext(_S),g=ui(X=>X.size),x=ui(X=>X.controls),_=I.useRef(null),E=I.useRef(null),T=I.useRef(null),w=I.useRef(1),A=I.useRef(1),C=I.useRef(null),[D,k]=I.useState(!1),P=l?1.2:1.2*s,B=I.useCallback(X=>{i&&(_.current.innerText=`${A.current.toFixed(2)}`,_.current.style.display="block"),X.stopPropagation();const z=new Ct().extractRotation(E.current.matrixWorld),ce=X.point.clone(),he=new Y().setFromMatrixPosition(E.current.matrixWorld),$=t.clone().applyMatrix4(z).normalize(),Me=E.current.matrixWorld.clone(),Se=Me.clone().invert(),pe=l?1/mQ(E.current.getWorldPosition(i1),s,X.camera,g):1;C.current={clickPoint:ce,dir:$,mPLG:Me,mPLGInv:Se,offsetMultiplier:pe},d({component:"Sphere",axis:e,origin:he,directions:[$]}),x&&(x.enabled=!1),X.target.setPointerCapture(X.pointerId)},[i,x,t,d,e,l,s,g]),H=I.useCallback(X=>{if(X.stopPropagation(),D||k(!0),C.current){const{clickPoint:z,dir:ce,mPLG:he,mPLGInv:$,offsetMultiplier:Me}=C.current,[Se,pe]=n?.[e]||[1e-5,void 0],Ne=PAe(z,ce,X.ray.origin,X.ray.direction)*Me,Ge=l?Ne:Ne/s;let $e=Math.pow(2,Ge*.2);X.shiftKey&&($e=Math.round($e*10)/10),$e=Math.max($e,Se/w.current),pe!==void 0&&($e=Math.min($e,pe/w.current)),A.current=w.current*$e,T.current.position.set(0,P+Ne,0),i&&(_.current.innerText=`${A.current.toFixed(2)}`),Ox.set(1,1,1),Ox.setComponent(e,$e),lH.makeScale(Ox.x,Ox.y,Ox.z).premultiply(he).multiply($),m(lH)}},[i,P,m,D,n,e]),G=I.useCallback(X=>{i&&(_.current.style.display="none"),X.stopPropagation(),w.current=A.current,C.current=null,T.current.position.set(0,P,0),y(),x&&(x.enabled=!0),X.target.releasePointerCapture(X.pointerId)},[i,x,y,P]),V=I.useCallback(X=>{X.stopPropagation(),k(!1)},[]),{radius:U,matrixL:F}=I.useMemo(()=>{const X=l?o/s*1.8:s/22.5,z=new Hn().setFromUnitVectors(LAe,t.clone().normalize()),ce=new Ct().makeRotationFromQuaternion(z);return{radius:X,matrixL:ce}},[t,s,o,l]),q=D?u:c[e];return I.createElement("group",{ref:E},I.createElement("group",{matrix:F,matrixAutoUpdate:!1,onPointerDown:B,onPointerMove:H,onPointerUp:G,onPointerOut:V},i&&I.createElement(pg,{position:[0,P/2,0]},I.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:_})),I.createElement("mesh",{ref:T,position:[0,P,0],renderOrder:h,userData:v},I.createElement("sphereGeometry",{args:[U,12,12]}),I.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:q,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10}))))},cH=new Ct,uH=new Ct,fH=new Ct,ZE=new Ct,cO=new Ct,$b=new Ct,hH=new Ct,dH=new Ct,pH=new Ct,Kb=new vi,uO=new vi,mH=new Y,gH=new Y,bH=new Y,yH=new Y,Ix=new Y,Jb=new Y(1,0,0),Zb=new Y(0,1,0),Qb=new Y(0,0,1),LQ=I.forwardRef(({enabled:t=!0,matrix:e,onDragStart:n,onDrag:i,onDragEnd:r,autoTransform:a=!0,anchor:s,disableAxes:o=!1,disableSliders:l=!1,disableRotations:c=!1,disableScaling:u=!1,activeAxes:f=[!0,!0,!0],offset:h=[0,0,0],rotation:d=[0,0,0],scale:m=1,lineWidth:y=4,fixed:v=!1,translationLimits:g,rotationLimits:x,scaleLimits:_,depthTest:E=!0,renderOrder:T=500,axisColors:w=["#ff2060","#20df80","#2080ff"],hoveredColor:A="#ffff40",annotations:C=!1,annotationsClass:D,opacity:k=1,visible:P=!0,userData:B,children:H,...G},V)=>{const U=ui(pe=>pe.invalidate),F=I.useRef(null),q=I.useRef(null),X=I.useRef(null),z=I.useRef(null),ce=I.useRef([0,0,0]),he=I.useRef(new Y(1,1,1)),$=I.useRef(new Y(1,1,1));I.useLayoutEffect(()=>{s&&(z.current.updateWorldMatrix(!0,!0),ZE.copy(z.current.matrixWorld).invert(),Kb.makeEmpty(),z.current.traverse(pe=>{pe.geometry&&(pe.geometry.boundingBox||pe.geometry.computeBoundingBox(),$b.copy(pe.matrixWorld).premultiply(ZE),uO.copy(pe.geometry.boundingBox),uO.applyMatrix4($b),Kb.union(uO))}),mH.copy(Kb.max).add(Kb.min).multiplyScalar(.5),gH.copy(Kb.max).sub(Kb.min).multiplyScalar(.5),bH.copy(gH).multiply(new Y(...s)).add(mH),yH.set(...h).add(bH),X.current.position.copy(yH),U())});const Me=I.useMemo(()=>({onDragStart:pe=>{cH.copy(q.current.matrix),uH.copy(q.current.matrixWorld),n&&n(pe),U()},onDrag:pe=>{fH.copy(F.current.matrixWorld),ZE.copy(fH).invert(),cO.copy(uH).premultiply(pe),$b.copy(cO).premultiply(ZE),hH.copy(cH).invert(),dH.copy($b).multiply(hH),a&&q.current.matrix.copy($b),i&&i($b,dH,cO,pe),U()},onDragEnd:()=>{r&&r(),U()},translation:ce,translationLimits:g,rotationLimits:x,axisColors:w,hoveredColor:A,opacity:k,scale:m,lineWidth:y,fixed:v,depthTest:E,renderOrder:T,userData:B,annotations:C,annotationsClass:D}),[n,i,r,ce,g,x,_,E,m,y,v,...w,A,k,B,a,C,D]),Se=new Y;return fa(pe=>{if(v){const xe=mQ(X.current.getWorldPosition(Se),m,pe.camera,pe.size);he.current.setScalar(xe)}e&&e instanceof Ct&&(q.current.matrix=e),q.current.updateWorldMatrix(!0,!0),pH.makeRotationFromEuler(X.current.rotation).setPosition(X.current.position).premultiply(q.current.matrixWorld),$.current.setFromMatrixScale(pH),Ix.copy(he.current).divide($.current),(Math.abs(X.current.scale.x-Ix.x)>1e-4||Math.abs(X.current.scale.y-Ix.y)>1e-4||Math.abs(X.current.scale.z-Ix.z)>1e-4)&&(X.current.scale.copy(Ix),pe.invalidate())}),I.useImperativeHandle(V,()=>q.current,[]),I.createElement(_S.Provider,{value:Me},I.createElement("group",{ref:F},I.createElement("group",ts({ref:q,matrix:e,matrixAutoUpdate:!1},G),I.createElement("group",{visible:P,ref:X,position:h,rotation:d},t&&I.createElement(I.Fragment,null,!o&&f[0]&&I.createElement(tO,{axis:0,direction:Jb}),!o&&f[1]&&I.createElement(tO,{axis:1,direction:Zb}),!o&&f[2]&&I.createElement(tO,{axis:2,direction:Qb}),!l&&f[0]&&f[1]&&I.createElement(oO,{axis:2,dir1:Jb,dir2:Zb}),!l&&f[0]&&f[2]&&I.createElement(oO,{axis:1,dir1:Qb,dir2:Jb}),!l&&f[2]&&f[1]&&I.createElement(oO,{axis:0,dir1:Zb,dir2:Qb}),!c&&f[0]&&f[1]&&I.createElement(sO,{axis:2,dir1:Jb,dir2:Zb}),!c&&f[0]&&f[2]&&I.createElement(sO,{axis:1,dir1:Qb,dir2:Jb}),!c&&f[2]&&f[1]&&I.createElement(sO,{axis:0,dir1:Zb,dir2:Qb}),!u&&f[0]&&I.createElement(lO,{axis:0,direction:Jb}),!u&&f[1]&&I.createElement(lO,{axis:1,direction:Zb}),!u&&f[2]&&I.createElement(lO,{axis:2,direction:Qb}))),I.createElement("group",{ref:z},H))))}),xi=ke.createContext(null);/*!
 * hold-event
 * https://github.com/yomotsu/hold-event
 * (c) 2020 @yomotsu
 * Released under the MIT License.
 */var ds;(function(t){t.HOLD_START="holdStart",t.HOLD_END="holdEnd",t.HOLDING="holding"})(ds||(ds={}));class UAe{constructor(){this._listeners={}}addEventListener(e,n){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}removeEventListener(e,n){const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e)}}}class BAe extends UAe{constructor(e){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=n=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:ds.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:n}),this._holding=!0;const i=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i);const r=performance.now();this._deltaTime=r-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:ds.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:n})};this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i)},this._holdEnd=n=>{if(!this._enabled||!this._holding)return;const i=performance.now();this._deltaTime=i-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:ds.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:n}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=e}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled||this._holdEnd())}get holding(){return this._holding}}class Vu extends BAe{constructor(e,n){if(typeof e!="string"){console.error("KeyboardKeyHold: the first argument has to be a KeyboardEvent.code string.");return}super(n),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const i=a=>{FAe(a)||a.code===e&&this._holdStart(a)},r=a=>{a.code===e&&this._holdEnd(a)};document.addEventListener("keydown",i),document.addEventListener("keyup",r),window.addEventListener("blur",this._holdEnd)}}function FAe(t){const e=t.target;return e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.isContentEditable}function ah(t){const e=t.useSceneTree.getState()[""],n=e?.wxyz??[1,0,0,0],i=e?.position??[0,0,0];return new Ct().makeRotationFromQuaternion(new Hn(n[1],n[2],n[3],n[0])).setPosition(i[0],i[1],i[2])}function UQ(t,e){const n=ah(t).invert(),i=e.origin.clone().applyMatrix4(n),r=n.setPosition(0,0,0),a=e.direction.clone().applyMatrix4(r);return new Tu(i,a)}function tR(t){const e=ke.useContext(xi);return BQ(e,t)}function BQ(t,e){let n=!0,i=!1,r=null;function a(o){const l=t.mutable.current;l.sendMessage!==null&&(r=o,n?(l.sendMessage(o),i=!1,n=!1,setTimeout(()=>{n=!0,i&&r&&a(r)},e)):i=!0)}function s(){t.mutable.current.sendMessage!==null&&r!==null&&(t.mutable.current.sendMessage(r),r=null,i=!1)}return{send:a,flush:s}}function fO(t){return t!=null&&t.isTexture!==void 0}function zAe({visible:t,children:e}){const{camera:n}=ui(),i=I.useRef(null),r=new Y;return fa(()=>{i.current&&t&&(i.current.getWorldPosition(r),i.current.scale.setScalar(n.position.distanceTo(r)/20))}),R.jsxs("group",{ref:i,visible:t,children:[R.jsxs(CQ,{limit:6,children:[R.jsx("boxGeometry",{args:[.4,.02,.02]}),R.jsx("meshBasicMaterial",{opacity:.625,transparent:!0}),R.jsx(qu,{position:[.5,0,0],color:"#777777"}),R.jsx(qu,{position:[-.5,0,0],color:"#777777"}),R.jsx(qu,{position:[0,0,.5],rotation:new li(0,Math.PI/2,0),color:"#777777"}),R.jsx(qu,{position:[0,0,-.5],rotation:new li(0,Math.PI/2,0),color:"#777777"}),R.jsx(qu,{position:[0,.5,0],rotation:new li(0,0,Math.PI/2),color:"#999999"}),R.jsx(qu,{position:[0,-.5,0],rotation:new li(0,0,Math.PI/2),color:"#999999"})]}),R.jsxs("mesh",{children:[R.jsx("sphereGeometry",{args:[.04,8,8]}),R.jsx("meshBasicMaterial",{color:"#999999",opacity:.625,transparent:!0})]}),e]})}function jAe({forceShow:t,pivotRef:e,onPivotChange:n,update:i}){const r=I.useContext(xi),a=r.useGui(c=>c.showOrbitOriginTool),s=r.useDevSettings(c=>c.enableOrbitCrosshair),o=r.useGui(c=>c.showOrbitOriginCrosshair);ke.useEffect(i,[a]);const l=a||t;return R.jsxs(LQ,{ref:e,scale:200,lineWidth:3,fixed:!0,axisColors:["#ffaaff","#ff33ff","#ffaaff"],disableScaling:!0,disableAxes:!l,disableRotations:!l,disableSliders:!l,onDragEnd:()=>{n(e.current.matrix)},children:[R.jsx(yQ,{args:[10,10,10,10],infiniteGrid:!0,fadeStrength:0,fadeFrom:0,fadeDistance:1e3,sectionColor:"#ffaaff",cellColor:"#ffccff",side:$r,visible:l}),R.jsx(zAe,{visible:s&&o>0})]})}function HAe(){const t=I.useContext(xi),e=ui(V=>V.camera),n=tR(20).send,i=I.useRef(null),r=I.useRef(null),a=t.mutable.current,s=ke.useCallback(()=>{t.useGui.setState(V=>({showOrbitOriginCrosshair:V.showOrbitOriginCrosshair+1}))},[t]),o=ke.useCallback(()=>{t.useGui.setState(V=>({showOrbitOriginCrosshair:Math.max(0,V.showOrbitOriginCrosshair-1)}))},[t]);ke.useEffect(()=>{t.useGui.setState({showOrbitOriginCrosshair:0})},[]);const[l,c]=I.useState(null),u=.5;fa(V=>{if(l&&a.cameraControl){const U=a.cameraControl,F=U.camera,q=V.clock.getElapsedTime()-l.startTime,X=Math.min(q/l.duration,1),z=X*X*(3-2*X),ce=new Y().copy(l.startUp).lerp(l.targetUp,z).normalize(),he=new Y().copy(l.startLookAt).lerp(l.targetLookAt,z);F.up.copy(ce);const $=new Y;U.getPosition($),U.updateCameraUp(),U.setPosition($.x,$.y,$.z,!1),U.setLookAt($.x,$.y,$.z,he.x,he.y,he.z,!1),X>=1&&c(null)}});const{clock:f}=ui(),h=V=>{if(!a.cameraControl)return;const U=new Y;U.setFromMatrixPosition(V);const F=a.cameraControl,q=a.cameraControl.camera,X=new Y().setFromMatrixColumn(V,1),z=F.getTarget(new Y);c({startUp:q.up.clone(),targetUp:X,startLookAt:z,targetLookAt:U,startTime:f.getElapsedTime(),duration:u})},d=()=>{if(l!==null||!a.cameraControl||!r.current)return;const U=a.cameraControl.getTarget(new Y),F=new Ct().extractRotation(r.current.matrix),q=e.up.clone().normalize(),X=new Y(0,1,0).applyMatrix4(F).normalize(),z=new Y().crossVectors(X,q).normalize(),ce=Math.acos(Math.min(1,Math.max(-1,q.dot(X)))),he=new Ct;z.lengthSq()>1e-4&&he.makeRotationAxis(z,ce);const $=new Ct;$.multiply(he),$.multiply(F),$.setPosition(U),r.current.matrix.copy($),r.current.updateMatrixWorld(!0)};a.resetCameraView=()=>{e.up.set(i.current.camera.up.x,i.current.camera.up.y,i.current.camera.up.z),a.cameraControl.updateCameraUp(),a.cameraControl.setLookAt(i.current.camera.position.x,i.current.camera.position.y,i.current.camera.position.z,i.current.lookAt.x,i.current.lookAt.y,i.current.lookAt.z,!0)};const m=new Hn().setFromEuler(new li(Math.PI,0,0)),y=new Hn,v=new Ct,g=new Y,x=new Hn,_=new Y,E=new Y,T=ke.useCallback(()=>{d();const V=e,U=a.cameraControl,F=a.canvas;if(U===null){setTimeout(T,10);return}const q=ah(t).invert(),X=q.clone().multiply(v.makeRotationFromQuaternion(V.quaternion).setPosition(V.position)).multiply(v.makeRotationFromQuaternion(m));y.setFromRotationMatrix(q),U.getTarget(g).applyQuaternion(y);const z=V.up.clone().applyQuaternion(y);i.current===null&&(i.current={camera:V.clone(),lookAt:U.getTarget(new Y)}),X.decompose(_,x,E),n({type:"ViewerCameraMessage",wxyz:[x.w,x.x,x.y,x.z],position:_.toArray(),image_height:F.height,image_width:F.width,fov:V.fov*Math.PI/180,near:V.near,far:V.far,look_at:[g.x,g.y,g.z],up_direction:[z.x,z.y,z.z]}),P&&console.log(`&initialCameraPosition=${_.x.toFixed(3)},${_.y.toFixed(3)},${_.z.toFixed(3)}&initialCameraLookAt=${g.x.toFixed(3)},${g.y.toFixed(3)},${g.z.toFixed(3)}&initialCameraUp=${z.x.toFixed(3)},${z.y.toFixed(3)},${z.z.toFixed(3)}`)},[e,n]),w=new URLSearchParams(window.location.search),A=w.get("initialCameraPosition"),C=w.get("initialCameraLookAt"),D=w.get("initialCameraUp"),k=w.get("forceOrbitOriginTool")==="1",P=t.useDevSettings(V=>V.logCamera),B=t.useGui(V=>V.websocketConnected),H=ke.useRef(!1);ke.useEffect(()=>{if(!H.current){const V=new Y(...A?A.split(",").map(Number):[3,3,3]);V.applyMatrix4(ah(t));const U=new Y(...C?C.split(",").map(Number):[0,0,0]);U.applyMatrix4(ah(t));const F=new Y(...D?D.split(",").map(Number):[0,0,1]);F.applyMatrix4(ah(t)),F.normalize(),e.up.set(F.x,F.y,F.z),a.cameraControl.updateCameraUp(),a.cameraControl.setLookAt(V.x,V.y,V.z,U.x,U.y,U.z,!1),H.current=!0}a.sendCamera=T,B&&setTimeout(()=>T(),50)},[B,T]);const G=a.canvas;return ke.useEffect(()=>{const V=new ResizeObserver(()=>{T()});return V.observe(G),()=>V.disconnect()},[G]),ke.useEffect(()=>{const V=a.cameraControl,U={w:new Vu("KeyW",1e3/60),a:new Vu("KeyA",1e3/60),s:new Vu("KeyS",1e3/60),d:new Vu("KeyD",1e3/60),q:new Vu("KeyQ",1e3/60),e:new Vu("KeyE",1e3/60),up:new Vu("ArrowUp",1e3/60),down:new Vu("ArrowDown",1e3/60),left:new Vu("ArrowLeft",1e3/60),right:new Vu("ArrowRight",1e3/60)};U.a.addEventListener(ds.HOLDING,F=>{V.truck(-.002*F?.deltaTime,0,!1)}),U.d.addEventListener(ds.HOLDING,F=>{V.truck(.002*F?.deltaTime,0,!1)}),U.w.addEventListener(ds.HOLDING,F=>{V.forward(.002*F?.deltaTime,!1)}),U.s.addEventListener(ds.HOLDING,F=>{V.forward(-.002*F?.deltaTime,!1)}),U.q.addEventListener(ds.HOLDING,F=>{V.elevate(-.002*F?.deltaTime,!1)}),U.e.addEventListener(ds.HOLDING,F=>{V.elevate(.002*F?.deltaTime,!1)}),U.left.addEventListener(ds.HOLDING,F=>{V.rotate(-.05*pc.DEG2RAD*F?.deltaTime,0,!0)}),U.right.addEventListener(ds.HOLDING,F=>{V.rotate(.05*pc.DEG2RAD*F?.deltaTime,0,!0)}),U.up.addEventListener(ds.HOLDING,F=>{V.rotate(0,-.05*pc.DEG2RAD*F?.deltaTime,!0)}),U.down.addEventListener(ds.HOLDING,F=>{V.rotate(0,.05*pc.DEG2RAD*F?.deltaTime,!0)});for(const F of Object.values(U))F.addEventListener(ds.HOLD_START,()=>{s()}),F.addEventListener(ds.HOLD_END,()=>{o()});return()=>{}},[Tj,s,o]),R.jsxs(R.Fragment,{children:[R.jsx(Tj,{ref:V=>a.cameraControl=V,minDistance:.01,dollySpeed:.3,smoothTime:.05,draggingSmoothTime:0,onChange:T,onStart:()=>{s()},onEnd:()=>{o()},makeDefault:!0}),R.jsx(jAe,{forceShow:k,pivotRef:r,onPivotChange:V=>{h(V)},update:d})]})}const SS=ke.createContext(null),MB=J2({screenspace:!1,color:new Ut("black"),opacity:1,thickness:.05,size:new ft},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform float screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace == 0.0) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${gQ>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),VAe=I.forwardRef(function({color:e="black",opacity:n=1,transparent:i=!1,screenspace:r=!1,toneMapped:a=!0,polygonOffset:s=!1,polygonOffsetFactor:o=0,renderOrder:l=0,thickness:c=.05,angle:u=Math.PI,...f},h){const d=I.useRef(null),[m]=I.useState(()=>new MB({side:ba})),v=ui(_=>_.gl).getDrawingBufferSize(new ft),g=I.useRef(0),x=I.useRef();return I.useLayoutEffect(()=>{const _=d.current;if(!_)return;const E=_.parent;if(E&&E.geometry&&(g.current!==u||x.current!==E.geometry)){g.current=u,x.current=E.geometry;let T=_.children[0];T&&(u&&T.geometry.dispose(),_.remove(T)),E.skeleton?(T=new E2,T.material=m,T.bind(E.skeleton,E.bindMatrix),_.add(T)):E.isInstancedMesh?(T=new M2(E.geometry,m,E.count),T.instanceMatrix=E.instanceMatrix,_.add(T)):(T=new fi,T.material=m,_.add(T)),T.geometry=u?_Ee(E.geometry,u):E.geometry}}),I.useLayoutEffect(()=>{const _=d.current;if(!_)return;const E=_.children[0];E&&(E.renderOrder=l,su(E.material,{transparent:i,thickness:c,color:e,opacity:n,size:v,screenspace:r,toneMapped:a,polygonOffset:s,polygonOffsetFactor:o}))}),I.useEffect(()=>()=>{const _=d.current;if(!_)return;const E=_.children[0];E&&(u&&E.geometry.dispose(),_.remove(E))},[]),R.jsx("group",{ref:_=>{d.current=_,typeof h=="function"?h(_):h&&(h.current=_)},...f})});function sh(t={alwaysMounted:!1,creaseAngle:Math.PI}){const e=ke.useRef(null),n=ke.useContext(SS),[i,r]=ke.useState(!0);return fa(()=>{if(n!==null)if(t.alwaysMounted){if(e.current===null)return;e.current.visible=n.current.isHovered}else n.current.isHovered!=i&&r(n.current.isHovered)}),n===null||!i?null:R.jsx(VAe,{ref:e,thickness:10,screenspace:!0,color:16514816,opacity:.8,transparent:!0,angle:t.creaseAngle})}const Wl={instanceMatrix:new Ct,transformMatrix:new Ct,finalMatrix:new Ct,position:new Y,quaternion:new Hn,scale:new Y,oneVector:new Y(1,1,1)},JM=({geometry:t,batched_positions:e,batched_wxyzs:n,batched_scales:i,meshTransform:r,computeBatchIndexFromInstanceIndex:a})=>{const s=ke.useContext(SS),o=ke.useRef(null),l=ui(h=>h.gl),c=ke.useMemo(()=>l.getDrawingBufferSize(new ft),[l]),u=ke.useMemo(()=>t?t.clone():null,[t]),f=ke.useMemo(()=>{const h=new MB({side:ba});return h.thickness=10,h.color=new Ut(16514816),h.opacity=.8,h.size=c,h.transparent=!0,h.screenspace=!0,h.toneMapped=!0,h},[c]);return ke.useEffect(()=>()=>{u&&u.dispose()},[u]),ke.useEffect(()=>()=>{f&&f.dispose()},[f]),fa(()=>{if(!(!o.current||!u||!s)&&(o.current.visible=!1,s.current.isHovered&&s.current.instanceId!==null)){const h=s.current.instanceId,d=a?a(h):h,m=new DataView(e.buffer,e.byteOffset,e.byteLength),y=new DataView(n.buffer,n.byteOffset,n.byteLength),v=i?new DataView(i.buffer,i.byteOffset,i.byteLength):null;if(d>=0&&d*12<e.byteLength){const g=d*3*4,x=d*4*4;if(o.current.position.set(m.getFloat32(g,!0),m.getFloat32(g+4,!0),m.getFloat32(g+8,!0)),o.current.quaternion.set(y.getFloat32(x+4,!0),y.getFloat32(x+8,!0),y.getFloat32(x+12,!0),y.getFloat32(x,!0)),v)if(i.byteLength===n.byteLength/4*3){const _=d*3*4;o.current.scale.set(v.getFloat32(_,!0),v.getFloat32(_+4,!0),v.getFloat32(_+8,!0))}else{const _=d*4,E=v.getFloat32(_,!0);o.current.scale.setScalar(E)}else o.current.scale.set(1,1,1);r&&(Wl.instanceMatrix.compose(o.current.position,o.current.quaternion,o.current.scale),Wl.transformMatrix.compose(r.position,r.rotation,r.scale),Wl.finalMatrix.copy(Wl.instanceMatrix).multiply(Wl.transformMatrix),Wl.finalMatrix.decompose(Wl.position,Wl.quaternion,Wl.scale),o.current.position.copy(Wl.position),o.current.quaternion.copy(Wl.quaternion),o.current.scale.copy(Wl.scale)),o.current.visible=!0}}}),!s||!u?null:R.jsx("mesh",{ref:o,geometry:u,material:f,visible:!1})},GAe=new bv(1),WAe=J2({scale:1,point_ball_norm:0,uniformColor:new Ut(1,1,1)},`
  precision mediump float;

  varying vec3 vPosition;
  varying vec3 vColor; // in the vertex shader
  uniform float scale;
  uniform vec3 uniformColor;

  void main() {
      vPosition = position;
      #ifdef USE_COLOR
      vColor = color;
      #else
      vColor = uniformColor;
      #endif
      vec4 world_pos = modelViewMatrix * vec4(position, 1.0);
      gl_Position = projectionMatrix * world_pos;
      gl_PointSize = (scale / -world_pos.z);
  }
   `,`varying vec3 vPosition;
  varying vec3 vColor;
  uniform float point_ball_norm;

  void main() {
      if (point_ball_norm < 1000.0) {
          float r = pow(
              pow(abs(gl_PointCoord.x - 0.5), point_ball_norm)
              + pow(abs(gl_PointCoord.y - 0.5), point_ball_norm),
              1.0 / point_ball_norm);
          if (r > 0.5) discard;
      }
      gl_FragColor = vec4(vColor, 1.0);
  }
   `),qAe=ke.forwardRef(function({children:e,...n},i){const r=ui(c=>c.get),a=n.props,s=ke.useMemo(()=>{const c=new An;return n.props.precision==="float16"?c.setAttribute("position",new CJ(new Uint16Array(a.points.buffer.slice(a.points.byteOffset,a.points.byteOffset+a.points.byteLength)),3)):c.setAttribute("position",new ln(new Float32Array(a.points.buffer.slice(a.points.byteOffset,a.points.byteOffset+a.points.byteLength)),3)),a.colors.length>3?c.setAttribute("color",new Tn(new Uint8Array(a.colors),3,!0)):a.colors.length<3&&console.error(`Invalid color buffer length, got ${a.colors.length}`),c},[a.points,a.colors]),o=ke.useMemo(()=>{const c=new WAe;return a.colors.length>3?c.vertexColors=!0:(c.vertexColors=!1,c.uniforms.uniformColor.value=new Ut(a.colors[0]/255,a.colors[1]/255,a.colors[2]/255)),c},[a.colors]);ke.useEffect(()=>()=>{s.dispose(),o.dispose()},[s,o]),ke.useEffect(()=>{o.uniforms.scale.value=10,o.uniforms.point_ball_norm.value={square:1/0,diamond:1,circle:2,rounded:3,sparkle:.6}[a.point_shape]},[a.point_shape,o]);const l=new ft;return fa(()=>{o.uniforms.scale.value=a.point_size/Math.tan(r().camera.fov/180*Math.PI/2)*r().gl.getSize(l).height*r().gl.getPixelRatio()}),R.jsx("points",{frustumCulled:!1,ref:i,geometry:s,material:o,children:e})}),XAe=ke.forwardRef(function({showAxes:e=!0,axesLength:n=.5,axesRadius:i=.0125,originRadius:r=void 0,originColor:a=15526912,children:s},o){return r=r??i*2,R.jsxs("group",{ref:o,children:[e&&R.jsxs(R.Fragment,{children:[R.jsxs("mesh",{geometry:GAe,scale:new Y(r,r,r),children:[R.jsx("meshBasicMaterial",{color:a}),R.jsx(sh,{})]}),R.jsxs(CQ,{limit:3,children:[R.jsx("meshBasicMaterial",{}),R.jsx("cylinderGeometry",{args:[i,i,n,16]}),R.jsx(qu,{rotation:new li(0,0,3*Math.PI/2),position:[.5*n,0,0],color:13369344,children:R.jsx(sh,{})}),R.jsx(qu,{position:[0,.5*n,0],color:52224,children:R.jsx(sh,{})}),R.jsx(qu,{rotation:new li(Math.PI/2,0,0),position:[0,0,.5*n],color:204,children:R.jsx(sh,{})})]})]}),s]})}),YAe=ke.forwardRef(function({batched_wxyzs:e,batched_positions:n,batched_scales:i,axes_length:r=.5,axes_radius:a=.0125,children:s},o){const l=ke.useRef(null),c=ke.useMemo(()=>new lg(a,a,r,16),[a,r]),u=ke.useMemo(()=>new go,[]);ke.useEffect(()=>()=>{c.dispose(),u.dispose()},[c,u]);const f=ke.useMemo(()=>({T_frame_framex:new Ct().makeRotationFromEuler(new li(0,0,3*Math.PI/2)).setPosition(.5*r,0,0),T_frame_framey:new Ct().makeRotationFromEuler(new li(0,0,0)).setPosition(0,.5*r,0),T_frame_framez:new Ct().makeRotationFromEuler(new li(Math.PI/2,0,0)).setPosition(0,0,.5*r),red:new Ut(13369344),green:new Ut(52224),blue:new Ut(204)}),[r]);ke.useEffect(()=>{if(!l.current)return;const g=new Ct,x=new Ct,_=new Ct,E=new Ct,T=new Hn,w=new Y,{T_frame_framex:A,T_frame_framey:C,T_frame_framez:D,red:k,green:P,blue:B}=f,H=new DataView(n.buffer,n.byteOffset,n.byteLength),G=new DataView(e.buffer,e.byteOffset,e.byteLength),V=i?new DataView(i.buffer,i.byteOffset,i.byteLength):null,U=e.byteLength/(4*4);for(let F=0;F<U;F++){const q=F*3*4,X=F*4*4,z=i&&i.byteLength===e.byteLength/4*3?F*3*4:F*4;if(V)if(i.byteLength===e.byteLength/4*3)w.set(V.getFloat32(z,!0),V.getFloat32(z+4,!0),V.getFloat32(z+8,!0));else{const ce=V.getFloat32(z,!0);w.set(ce,ce,ce)}else w.set(1,1,1);g.makeRotationFromQuaternion(T.set(G.getFloat32(X+4,!0),G.getFloat32(X+8,!0),G.getFloat32(X+12,!0),G.getFloat32(X,!0))).scale(w).setPosition(H.getFloat32(q,!0),H.getFloat32(q+4,!0),H.getFloat32(q+8,!0)),x.copy(g).multiply(A),_.copy(g).multiply(C),E.copy(g).multiply(D),l.current.setMatrixAt(F*3+0,x),l.current.setMatrixAt(F*3+1,_),l.current.setMatrixAt(F*3+2,E),l.current.setColorAt(F*3+0,k),l.current.setColorAt(F*3+1,P),l.current.setColorAt(F*3+2,B)}l.current.instanceMatrix.needsUpdate=!0,l.current.instanceColor.needsUpdate=!0},[e,n,i,f]);const h=ke.useMemo(()=>new lg(a,a,r,16),[a,r]),d=ke.useMemo(()=>({position:new Y(.5*r,0,0),rotation:new Hn().setFromEuler(new li(0,0,3*Math.PI/2)),scale:new Y(1,1,1)}),[r]),m=ke.useMemo(()=>({position:new Y(0,.5*r,0),rotation:new Hn().setFromEuler(new li(0,0,0)),scale:new Y(1,1,1)}),[r]),y=ke.useMemo(()=>({position:new Y(0,0,.5*r),rotation:new Hn().setFromEuler(new li(Math.PI/2,0,0)),scale:new Y(1,1,1)}),[r]),v=e.byteLength/(4*4)*3;return R.jsxs("group",{ref:o,children:[R.jsx("instancedMesh",{ref:l,args:[c,u,v]}),R.jsx(JM,{geometry:h,batched_positions:n,batched_wxyzs:e,batched_scales:i,meshTransform:d,computeBatchIndexFromInstanceIndex:g=>Math.floor(g/3)}),R.jsx(JM,{geometry:h,batched_positions:n,batched_wxyzs:e,batched_scales:i,meshTransform:m,computeBatchIndexFromInstanceIndex:g=>Math.floor(g/3)}),R.jsx(JM,{geometry:h,batched_positions:n,batched_wxyzs:e,batched_scales:i,meshTransform:y,computeBatchIndexFromInstanceIndex:g=>Math.floor(g/3)}),s]})}),$Ae=ke.forwardRef(function({children:e,...n},i){const[r,a]=ke.useState();return ke.useEffect(()=>{if(n.props._format!==null&&n.props._data!==null){const s=URL.createObjectURL(new Blob([n.props._data],{type:"image/"+n.props._format}));new Ny().load(s,o=>{a(o),URL.revokeObjectURL(s)})}},[n.props._format,n.props._data]),R.jsxs("group",{ref:i,children:[R.jsxs("mesh",{rotation:new li(Math.PI,0,0),castShadow:n.props.cast_shadow,receiveShadow:n.props.receive_shadow,children:[R.jsx(sh,{}),R.jsx("planeGeometry",{attach:"geometry",args:[n.props.render_width,n.props.render_height]}),R.jsx("meshBasicMaterial",{attach:"material",transparent:!0,side:$r,map:r,toneMapped:!1})]}),e]})});function FQ(t){return t[0]<<16|t[1]<<8|t[2]}function vH(t){const e=new ws(Uint8Array.from(t===3?[0,128,255]:[0,64,128,192,255]),t,1,Nh);return e.needsUpdate=!0,e}function KAe(t){throw new Error(`Should never get here! ${t}`)}function xH(t){"map"in t&&t.map?.dispose(),"lightMap"in t&&t.lightMap?.dispose(),"bumpMap"in t&&t.bumpMap?.dispose(),"normalMap"in t&&t.normalMap?.dispose(),"specularMap"in t&&t.specularMap?.dispose(),"envMap"in t&&t.envMap?.dispose(),"alphaMap"in t&&t.alphaMap?.dispose(),"aoMap"in t&&t.aoMap?.dispose(),"displacementMap"in t&&t.displacementMap?.dispose(),"emissiveMap"in t&&t.emissiveMap?.dispose(),"gradientMap"in t&&t.gradientMap?.dispose(),"metalnessMap"in t&&t.metalnessMap?.dispose(),"roughnessMap"in t&&t.roughnessMap?.dispose(),t.dispose()}function wS(t){const e={color:t.color===void 0?16777215:FQ(t.color),wireframe:t.wireframe,transparent:t.opacity!==null,opacity:t.opacity??1,side:{front:Al,back:ba,double:$r}[t.side]};return t.material=="standard"||t.wireframe?new yv({flatShading:t.flat_shading&&!t.wireframe,...e}):t.material=="toon3"?new IA({gradientMap:vH(3),...e}):t.material=="toon5"?new IA({gradientMap:vH(5),...e}):KAe(t.material)}const JAe=ke.forwardRef(function({children:e,...n},i){const[r,a]=ke.useState();ke.useEffect(()=>{if(n.props._format!==null&&n.props._image_data!==null){const v=URL.createObjectURL(new Blob([n.props._image_data],{type:"image/"+n.props._format}));new Ny().load(v,g=>{a(g),URL.revokeObjectURL(v)})}else a(void 0)},[n.props._format,n.props._image_data]);let s=Math.tan(n.props.fov/2),o=s*n.props.aspect,l=1;const c=Math.cbrt(o*s*l/3);o/=c,s/=c,l/=c,o*=n.props.scale,s*=n.props.scale,l*=n.props.scale;const u=ke.useContext(SS),[f,h]=ke.useState(!1);fa(()=>{u!==null&&u.current.isHovered!==f&&h(u.current.isHovered)});const d=[[-1,-1,1],[1,-1,1],[1,-1,1],[1,1,1],[1,1,1],[-1,1,1],[-1,1,1],[-1,-1,1],[-1,-1,1],[0,0,0],[0,0,0],[1,-1,1],[-1,1,1],[0,0,0],[0,0,0],[1,1,1],[0,-1.2,1],r===void 0?[0,-.9,1]:[0,-1,1]].map(v=>[v[0]*o,v[1]*s,v[2]*l]),m=ke.useMemo(()=>{if(n.props.variant!=="filled")return null;const v=new An,g=new Float32Array([0,0,0,-o,-s,l,o,-s,l,o,s,l,-o,s,l]),x=new Uint16Array([0,1,2,0,2,3,0,3,4,0,4,1,1,4,3,1,3,2]);return v.setAttribute("position",new Tn(g,3)),v.setIndex(new Tn(x,1)),v.computeVertexNormals(),v},[o,s,l,n.props.variant]),y=new Ut().setRGB(n.props.color[0]/255,n.props.color[1]/255,n.props.color[2]/255);return R.jsxs("group",{ref:i,children:[R.jsx(mg,{points:d,color:f?16514816:FQ(n.props.color),lineWidth:f?1.5*n.props.line_width:n.props.line_width,segments:!0}),n.props.variant==="filled"&&m&&R.jsx("mesh",{geometry:m,children:R.jsx("meshBasicMaterial",{color:f?16514816:y,transparent:!0,opacity:.3,side:$r,depthWrite:!1})}),r&&R.jsxs("mesh",{position:[0,0,l*.999999],rotation:new li(Math.PI,0,0),castShadow:n.props.cast_shadow,receiveShadow:n.props.receive_shadow,children:[R.jsx("planeGeometry",{attach:"geometry",args:[n.props.aspect*s*2,s*2]}),R.jsx("meshBasicMaterial",{attach:"material",transparent:!0,side:$r,map:r,toneMapped:!1})]}),e]})});var ZAe=(()=>{var t=import.meta.url;return async function(e={}){var n,i=e,r,a,s=new Promise((ee,te)=>{r=ee,a=te}),o=typeof window=="object",l=typeof importScripts=="function",c=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(c){const{createRequire:ee}=await zMe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);var u=ee(import.meta.url)}var f=Object.assign({},i),h="";function d(ee){return i.locateFile?i.locateFile(ee,h):h+ee}var m,y,v;if(c){var g=u("fs"),x=u("path");h=u("url").fileURLToPath(new URL("./",import.meta.url)),m=(ee,te)=>(ee=At(ee)?new URL(ee):x.normalize(ee),g.readFileSync(ee,te?void 0:"utf8")),v=ee=>{var te=m(ee,!0);return te.buffer||(te=new Uint8Array(te)),te},y=(ee,te,we,Ie=!0)=>{ee=At(ee)?new URL(ee):x.normalize(ee),g.readFile(ee,Ie?void 0:"utf8",(lt,Rt)=>{lt?we(lt):te(Ie?Rt.buffer:Rt)})},!i.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else(o||l)&&(l?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),t&&(h=t),h.startsWith("blob:")?h="":h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),m=ee=>{var te=new XMLHttpRequest;return te.open("GET",ee,!1),te.send(null),te.responseText},l&&(v=ee=>{var te=new XMLHttpRequest;return te.open("GET",ee,!1),te.responseType="arraybuffer",te.send(null),new Uint8Array(te.response)}),y=(ee,te,we)=>{if(At(ee)){var Ie=new XMLHttpRequest;Ie.open("GET",ee,!0),Ie.responseType="arraybuffer",Ie.onload=()=>{if(Ie.status==200||Ie.status==0&&Ie.response){te(Ie.response);return}we()},Ie.onerror=we,Ie.send(null);return}fetch(ee,{credentials:"same-origin"}).then(lt=>lt.ok?lt.arrayBuffer():Promise.reject(new Error(lt.status+" : "+lt.url))).then(te,we)});i.print||console.log.bind(console);var _=i.printErr||console.error.bind(console);Object.assign(i,f),f=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var E;i.wasmBinary&&(E=i.wasmBinary);var T,w=!1,A,C,D,k,P,B,H,G;function V(){var ee=T.buffer;i.HEAP8=A=new Int8Array(ee),i.HEAP16=D=new Int16Array(ee),i.HEAPU8=C=new Uint8Array(ee),i.HEAPU16=k=new Uint16Array(ee),i.HEAP32=P=new Int32Array(ee),i.HEAPU32=B=new Uint32Array(ee),i.HEAPF32=H=new Float32Array(ee),i.HEAPF64=G=new Float64Array(ee)}var U=[],F=[],q=[];function X(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)he(i.preRun.shift());Et(U)}function z(){Et(F)}function ce(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Me(i.postRun.shift());Et(q)}function he(ee){U.unshift(ee)}function $(ee){F.unshift(ee)}function Me(ee){q.unshift(ee)}var Se=0,pe=null;function xe(ee){Se++,i.monitorRunDependencies?.(Se)}function Ne(ee){if(Se--,i.monitorRunDependencies?.(Se),Se==0&&pe){var te=pe;pe=null,te()}}function Ge(ee){i.onAbort?.(ee),ee="Aborted("+ee+")",_(ee),w=!0,ee+=". Build with -sASSERTIONS for more info.";var te=new WebAssembly.RuntimeError(ee);throw a(te),te}var $e="data:application/octet-stream;base64,",ct=ee=>ee.startsWith($e),At=ee=>ee.startsWith("file://");function fe(){if(i.locateFile){var ee="Sorter.wasm";return ct(ee)?ee:d(ee)}return new URL(""+new URL("Sorter-Df0J3ZWJ.wasm",import.meta.url).href,import.meta.url).href}var Ve;function je(ee){if(ee==Ve&&E)return new Uint8Array(E);if(v)return v(ee);throw"both async and sync fetching of the wasm failed"}function ot(ee){return E?Promise.resolve().then(()=>je(ee)):new Promise((te,we)=>{y(ee,Ie=>te(new Uint8Array(Ie)),Ie=>{try{te(je(ee))}catch(lt){we(lt)}})})}function Te(ee,te,we){return ot(ee).then(Ie=>WebAssembly.instantiate(Ie,te)).then(we,Ie=>{_(`failed to asynchronously prepare wasm: ${Ie}`),Ge(Ie)})}function Ue(ee,te,we,Ie){return!ee&&typeof WebAssembly.instantiateStreaming=="function"&&!ct(te)&&!At(te)&&!c&&typeof fetch=="function"?fetch(te,{credentials:"same-origin"}).then(lt=>{var Rt=WebAssembly.instantiateStreaming(lt,we);return Rt.then(Ie,function(jt){return _(`wasm streaming compile failed: ${jt}`),_("falling back to ArrayBuffer instantiation"),Te(te,we,Ie)})}):Te(te,we,Ie)}function Oe(){return{a:Tf}}function We(){var ee=Oe();function te(Ie,lt){return Js=Ie.exports,T=Js.z,V(),Dn=Js.C,$(Js.A),Ne(),Js}xe();function we(Ie){te(Ie.instance)}if(i.instantiateWasm)try{return i.instantiateWasm(ee,te)}catch(Ie){_(`Module.instantiateWasm callback failed with error: ${Ie}`),a(Ie)}return Ve||(Ve=fe()),Ue(E,Ve,ee,we).catch(a),{}}var Et=ee=>{for(;ee.length>0;)ee.shift()(i)};i.noExitRuntime;class vt{constructor(te){this.excPtr=te,this.ptr=te-24}set_type(te){B[this.ptr+4>>2]=te}get_type(){return B[this.ptr+4>>2]}set_destructor(te){B[this.ptr+8>>2]=te}get_destructor(){return B[this.ptr+8>>2]}set_caught(te){te=te?1:0,A[this.ptr+12]=te}get_caught(){return A[this.ptr+12]!=0}set_rethrown(te){te=te?1:0,A[this.ptr+13]=te}get_rethrown(){return A[this.ptr+13]!=0}init(te,we){this.set_adjusted_ptr(0),this.set_type(te),this.set_destructor(we)}set_adjusted_ptr(te){B[this.ptr+16>>2]=te}get_adjusted_ptr(){return B[this.ptr+16>>2]}get_exception_ptr(){var te=Zs(this.get_type());if(te)return B[this.excPtr>>2];var we=this.get_adjusted_ptr();return we!==0?we:this.excPtr}}var re=0,J=(ee,te,we)=>{var Ie=new vt(ee);throw Ie.init(te,we),re=ee,re},ue=()=>{Ge("")},se=(ee,te,we,Ie,lt)=>{},be=()=>{for(var ee=new Array(256),te=0;te<256;++te)ee[te]=String.fromCharCode(te);Z=ee},Z,Ye=ee=>{for(var te="",we=ee;C[we];)te+=Z[C[we++]];return te},tt={},mt={},Fe={},rt,Je=ee=>{throw new rt(ee)},Xt,Nt=ee=>{throw new Xt(ee)},ht=(ee,te,we)=>{ee.forEach(function(xt){Fe[xt]=te});function Ie(xt){var Lt=we(xt);Lt.length!==ee.length&&Nt("Mismatched type converter count");for(var en=0;en<ee.length;++en)Re(ee[en],Lt[en])}var lt=new Array(te.length),Rt=[],jt=0;te.forEach((xt,Lt)=>{mt.hasOwnProperty(xt)?lt[Lt]=mt[xt]:(Rt.push(xt),tt.hasOwnProperty(xt)||(tt[xt]=[]),tt[xt].push(()=>{lt[Lt]=mt[xt],++jt,jt===Rt.length&&Ie(lt)}))}),Rt.length===0&&Ie(lt)};function zt(ee,te,we={}){var Ie=te.name;if(ee||Je(`type "${Ie}" must have a positive integer typeid pointer`),mt.hasOwnProperty(ee)){if(we.ignoreDuplicateRegistrations)return;Je(`Cannot register type '${Ie}' twice`)}if(mt[ee]=te,delete Fe[ee],tt.hasOwnProperty(ee)){var lt=tt[ee];delete tt[ee],lt.forEach(Rt=>Rt())}}function Re(ee,te,we={}){if(!("argPackAdvance"in te))throw new TypeError("registerType registeredInstance requires argPackAdvance");return zt(ee,te,we)}var Be=8,wt=(ee,te,we,Ie)=>{te=Ye(te),Re(ee,{name:te,fromWireType:function(lt){return!!lt},toWireType:function(lt,Rt){return Rt?we:Ie},argPackAdvance:Be,readValueFromPointer:function(lt){return this.fromWireType(C[lt])},destructorFunction:null})},Wt=ee=>({count:ee.count,deleteScheduled:ee.deleteScheduled,preservePointerOnDelete:ee.preservePointerOnDelete,ptr:ee.ptr,ptrType:ee.ptrType,smartPtr:ee.smartPtr,smartPtrType:ee.smartPtrType}),ut=ee=>{function te(we){return we.$$.ptrType.registeredClass.name}Je(te(ee)+" instance already deleted")},gt=!1,Mt=ee=>{},gn=ee=>{ee.smartPtr?ee.smartPtrType.rawDestructor(ee.smartPtr):ee.ptrType.registeredClass.rawDestructor(ee.ptr)},Vn=ee=>{ee.count.value-=1;var te=ee.count.value===0;te&&gn(ee)},zn=(ee,te,we)=>{if(te===we)return ee;if(we.baseClass===void 0)return null;var Ie=zn(ee,te,we.baseClass);return Ie===null?null:we.downcast(Ie)},Yi={},Gn=()=>Object.keys(dn).length,ea=()=>{var ee=[];for(var te in dn)dn.hasOwnProperty(te)&&ee.push(dn[te]);return ee},Ni=[],nr=()=>{for(;Ni.length;){var ee=Ni.pop();ee.$$.deleteScheduled=!1,ee.delete()}},wi,ta=ee=>{wi=ee,Ni.length&&wi&&wi(nr)},zi=()=>{i.getInheritedInstanceCount=Gn,i.getLiveInheritedInstances=ea,i.flushPendingDeletes=nr,i.setDelayFunction=ta},dn={},ya=(ee,te)=>{for(te===void 0&&Je("ptr should not be undefined");ee.baseClass;)te=ee.upcast(te),ee=ee.baseClass;return te},Ii=(ee,te)=>(te=ya(ee,te),dn[te]),ie=(ee,te)=>{(!te.ptrType||!te.ptr)&&Nt("makeClassHandle requires ptr and ptrType");var we=!!te.smartPtrType,Ie=!!te.smartPtr;return we!==Ie&&Nt("Both smartPtrType and smartPtr must be specified"),te.count={value:1},Ae(Object.create(ee,{$$:{value:te,writable:!0}}))};function oe(ee){var te=this.getPointee(ee);if(!te)return this.destructor(ee),null;var we=Ii(this.registeredClass,te);if(we!==void 0){if(we.$$.count.value===0)return we.$$.ptr=te,we.$$.smartPtr=ee,we.clone();var Ie=we.clone();return this.destructor(ee),Ie}function lt(){return this.isSmartPointer?ie(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:te,smartPtrType:this,smartPtr:ee}):ie(this.registeredClass.instancePrototype,{ptrType:this,ptr:ee})}var Rt=this.registeredClass.getActualType(te),jt=Yi[Rt];if(!jt)return lt.call(this);var xt;this.isConst?xt=jt.constPointerType:xt=jt.pointerType;var Lt=zn(te,this.registeredClass,xt.registeredClass);return Lt===null?lt.call(this):this.isSmartPointer?ie(xt.registeredClass.instancePrototype,{ptrType:xt,ptr:Lt,smartPtrType:this,smartPtr:ee}):ie(xt.registeredClass.instancePrototype,{ptrType:xt,ptr:Lt})}var Ae=ee=>typeof FinalizationRegistry>"u"?(Ae=te=>te,ee):(gt=new FinalizationRegistry(te=>{Vn(te.$$)}),Ae=te=>{var we=te.$$,Ie=!!we.smartPtr;if(Ie){var lt={$$:we};gt.register(te,lt,te)}return te},Mt=te=>gt.unregister(te),Ae(ee)),qe=()=>{Object.assign(at.prototype,{isAliasOf(ee){if(!(this instanceof at)||!(ee instanceof at))return!1;var te=this.$$.ptrType.registeredClass,we=this.$$.ptr;ee.$$=ee.$$;for(var Ie=ee.$$.ptrType.registeredClass,lt=ee.$$.ptr;te.baseClass;)we=te.upcast(we),te=te.baseClass;for(;Ie.baseClass;)lt=Ie.upcast(lt),Ie=Ie.baseClass;return te===Ie&&we===lt},clone(){if(this.$$.ptr||ut(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var ee=Ae(Object.create(Object.getPrototypeOf(this),{$$:{value:Wt(this.$$)}}));return ee.$$.count.value+=1,ee.$$.deleteScheduled=!1,ee},delete(){this.$$.ptr||ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Je("Object already scheduled for deletion"),Mt(this),Vn(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Je("Object already scheduled for deletion"),Ni.push(this),Ni.length===1&&wi&&wi(nr),this.$$.deleteScheduled=!0,this}})};function at(){}var Ze=(ee,te)=>Object.defineProperty(te,"name",{value:ee}),Tt=(ee,te,we)=>{if(ee[te].overloadTable===void 0){var Ie=ee[te];ee[te]=function(...lt){return ee[te].overloadTable.hasOwnProperty(lt.length)||Je(`Function '${we}' called with an invalid number of arguments (${lt.length}) - expects one of (${ee[te].overloadTable})!`),ee[te].overloadTable[lt.length].apply(this,lt)},ee[te].overloadTable=[],ee[te].overloadTable[Ie.argCount]=Ie}},Q=(ee,te,we)=>{i.hasOwnProperty(ee)?(Je(`Cannot register public name '${ee}' twice`),Tt(i,ee,ee),i.hasOwnProperty(we)&&Je(`Cannot register multiple overloads of a function with the same number of arguments (${we})!`),i[ee].overloadTable[we]=te):i[ee]=te},me=48,_e=57,Ee=ee=>{if(ee===void 0)return"_unknown";ee=ee.replace(/[^a-zA-Z0-9_]/g,"$");var te=ee.charCodeAt(0);return te>=me&&te<=_e?`_${ee}`:ee};function ye(ee,te,we,Ie,lt,Rt,jt,xt){this.name=ee,this.constructor=te,this.instancePrototype=we,this.rawDestructor=Ie,this.baseClass=lt,this.getActualType=Rt,this.upcast=jt,this.downcast=xt,this.pureVirtualFunctions=[]}var pt=(ee,te,we)=>{for(;te!==we;)te.upcast||Je(`Expected null or instance of ${we.name}, got an instance of ${te.name}`),ee=te.upcast(ee),te=te.baseClass;return ee};function it(ee,te){if(te===null)return this.isReference&&Je(`null is not a valid ${this.name}`),0;te.$$||Je(`Cannot pass "${ku(te)}" as a ${this.name}`),te.$$.ptr||Je(`Cannot pass deleted object as a pointer of type ${this.name}`);var we=te.$$.ptrType.registeredClass,Ie=pt(te.$$.ptr,we,this.registeredClass);return Ie}function dt(ee,te){var we;if(te===null)return this.isReference&&Je(`null is not a valid ${this.name}`),this.isSmartPointer?(we=this.rawConstructor(),ee!==null&&ee.push(this.rawDestructor,we),we):0;(!te||!te.$$)&&Je(`Cannot pass "${ku(te)}" as a ${this.name}`),te.$$.ptr||Je(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&te.$$.ptrType.isConst&&Je(`Cannot convert argument of type ${te.$$.smartPtrType?te.$$.smartPtrType.name:te.$$.ptrType.name} to parameter type ${this.name}`);var Ie=te.$$.ptrType.registeredClass;if(we=pt(te.$$.ptr,Ie,this.registeredClass),this.isSmartPointer)switch(te.$$.smartPtr===void 0&&Je("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:te.$$.smartPtrType===this?we=te.$$.smartPtr:Je(`Cannot convert argument of type ${te.$$.smartPtrType?te.$$.smartPtrType.name:te.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:we=te.$$.smartPtr;break;case 2:if(te.$$.smartPtrType===this)we=te.$$.smartPtr;else{var lt=te.clone();we=this.rawShare(we,Ur.toHandle(()=>lt.delete())),ee!==null&&ee.push(this.rawDestructor,we)}break;default:Je("Unsupporting sharing policy")}return we}function yt(ee,te){if(te===null)return this.isReference&&Je(`null is not a valid ${this.name}`),0;te.$$||Je(`Cannot pass "${ku(te)}" as a ${this.name}`),te.$$.ptr||Je(`Cannot pass deleted object as a pointer of type ${this.name}`),te.$$.ptrType.isConst&&Je(`Cannot convert argument of type ${te.$$.ptrType.name} to parameter type ${this.name}`);var we=te.$$.ptrType.registeredClass,Ie=pt(te.$$.ptr,we,this.registeredClass);return Ie}function Dt(ee){return this.fromWireType(B[ee>>2])}var qt=()=>{Object.assign(Ke.prototype,{getPointee(ee){return this.rawGetPointee&&(ee=this.rawGetPointee(ee)),ee},destructor(ee){this.rawDestructor?.(ee)},argPackAdvance:Be,readValueFromPointer:Dt,fromWireType:oe})};function Ke(ee,te,we,Ie,lt,Rt,jt,xt,Lt,en,rn){this.name=ee,this.registeredClass=te,this.isReference=we,this.isConst=Ie,this.isSmartPointer=lt,this.pointeeType=Rt,this.sharingPolicy=jt,this.rawGetPointee=xt,this.rawConstructor=Lt,this.rawShare=en,this.rawDestructor=rn,!lt&&te.baseClass===void 0?Ie?(this.toWireType=it,this.destructorFunction=null):(this.toWireType=yt,this.destructorFunction=null):this.toWireType=dt}var nn=(ee,te,we)=>{i.hasOwnProperty(ee)||Nt("Replacing nonexistent public symbol"),i[ee].overloadTable!==void 0&&we!==void 0||(i[ee]=te,i[ee].argCount=we)},cn=(ee,te,we)=>{ee=ee.replace(/p/g,"i");var Ie=i["dynCall_"+ee];return Ie(te,...we)},un=[],Dn,Kt=ee=>{var te=un[ee];return te||(ee>=un.length&&(un.length=ee+1),un[ee]=te=Dn.get(ee)),te},Yt=(ee,te,we=[])=>{if(ee.includes("j"))return cn(ee,te,we);var Ie=Kt(te)(...we);return Ie},Xn=(ee,te)=>(...we)=>Yt(ee,te,we),yn=(ee,te)=>{ee=Ye(ee);function we(){return ee.includes("j")?Xn(ee,te):Kt(te)}var Ie=we();return typeof Ie!="function"&&Je(`unknown function pointer with signature ${ee}: ${te}`),Ie},_i=(ee,te)=>{var we=Ze(te,function(Ie){this.name=te,this.message=Ie;var lt=new Error(Ie).stack;lt!==void 0&&(this.stack=this.toString()+`
`+lt.replace(/^Error(:[^\n]*)?\n/,""))});return we.prototype=Object.create(ee.prototype),we.prototype.constructor=we,we.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},we},Bn,Cn=ee=>{var te=qo(ee),we=Ye(te);return ja(te),we},_n=(ee,te)=>{var we=[],Ie={};function lt(Rt){if(!Ie[Rt]&&!mt[Rt]){if(Fe[Rt]){Fe[Rt].forEach(lt);return}we.push(Rt),Ie[Rt]=!0}}throw te.forEach(lt),new Bn(`${ee}: `+we.map(Cn).join([", "]))},fn=(ee,te,we,Ie,lt,Rt,jt,xt,Lt,en,rn,jn,Rn)=>{rn=Ye(rn),Rt=yn(lt,Rt),xt&&=yn(jt,xt),en&&=yn(Lt,en),Rn=yn(jn,Rn);var Gr=Ee(rn);Q(Gr,function(){_n(`Cannot construct ${rn} due to unbound types`,[Ie])}),ht([ee,te,we],Ie?[Ie]:[],Jn=>{Jn=Jn[0];var Fc,Rr;Ie?(Fc=Jn.registeredClass,Rr=Fc.instancePrototype):Rr=at.prototype;var Xo=Ze(rn,function(...ge){if(Object.getPrototypeOf(this)!==Af)throw new rt("Use 'new' to construct "+rn);if(Qs.constructor_body===void 0)throw new rt(rn+" has no accessible constructor");var ve=Qs.constructor_body[ge.length];if(ve===void 0)throw new rt(`Tried to invoke ctor of ${rn} with invalid number of parameters (${ge.length}) - expected (${Object.keys(Qs.constructor_body).toString()}) parameters instead!`);return ve.apply(this,ge)}),Af=Object.create(Rr,{constructor:{value:Xo}});Xo.prototype=Af;var Qs=new ye(rn,Xo,Af,Rn,Fc,Rt,xt,en);Qs.baseClass&&(Qs.baseClass.__derivedClasses??=[],Qs.baseClass.__derivedClasses.push(Qs));var zh=new Ke(rn,Qs,!0,!1,!1),K=new Ke(rn+"*",Qs,!1,!1,!1),ae=new Ke(rn+" const*",Qs,!1,!0,!1);return Yi[ee]={pointerType:K,constPointerType:ae},nn(Gr,Xo),[zh,K,ae]})},hi=(ee,te)=>{for(var we=[],Ie=0;Ie<ee;Ie++)we.push(B[te+Ie*4>>2]);return we},$i=ee=>{for(;ee.length;){var te=ee.pop(),we=ee.pop();we(te)}};function ei(ee){for(var te=1;te<ee.length;++te)if(ee[te]!==null&&ee[te].destructorFunction===void 0)return!0;return!1}function Ai(ee,te){if(!(ee instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof ee} which is not a function`);var we=Ze(ee.name||"unknownFunctionName",function(){});we.prototype=ee.prototype;var Ie=new we,lt=ee.apply(Ie,te);return lt instanceof Object?lt:Ie}function Xs(ee,te,we,Ie){for(var lt=ei(ee),Rt=ee.length,jt="",xt="",Lt=0;Lt<Rt-2;++Lt)jt+=(Lt!==0?", ":"")+"arg"+Lt,xt+=(Lt!==0?", ":"")+"arg"+Lt+"Wired";var en=`
        return function (${jt}) {
        if (arguments.length !== ${Rt-2}) {
          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${Rt-2}');
        }`;lt&&(en+=`var destructors = [];
`);var rn=lt?"destructors":"null",jn=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];te&&(en+="var thisWired = classParam['toWireType']("+rn+`, this);
`);for(var Lt=0;Lt<Rt-2;++Lt)en+="var arg"+Lt+"Wired = argType"+Lt+"['toWireType']("+rn+", arg"+Lt+`);
`,jn.push("argType"+Lt);if(te&&(xt="thisWired"+(xt.length>0?", ":"")+xt),en+=(we||Ie?"var rv = ":"")+"invoker(fn"+(xt.length>0?", ":"")+xt+`);
`,lt)en+=`runDestructors(destructors);
`;else for(var Lt=te?1:2;Lt<ee.length;++Lt){var Rn=Lt===1?"thisWired":"arg"+(Lt-2)+"Wired";ee[Lt].destructorFunction!==null&&(en+=`${Rn}_dtor(${Rn});
`,jn.push(`${Rn}_dtor`))}return we&&(en+=`var ret = retType['fromWireType'](rv);
return ret;
`),en+=`}
`,[jn,en]}function mr(ee,te,we,Ie,lt,Rt){var jt=te.length;jt<2&&Je("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var xt=te[1]!==null&&we!==null,Lt=ei(te),en=te[0].name!=="void",rn=[ee,Je,Ie,lt,$i,te[0],te[1]],jn=0;jn<jt-2;++jn)rn.push(te[jn+2]);if(!Lt)for(var jn=xt?1:2;jn<te.length;++jn)te[jn].destructorFunction!==null&&rn.push(te[jn].destructorFunction);let[Rn,Gr]=Xs(te,xt,en,Rt);Rn.push(Gr);var Jn=Ai(Function,Rn)(...rn);return Ze(ee,Jn)}var wf=(ee,te,we,Ie,lt,Rt)=>{var jt=hi(te,we);lt=yn(Ie,lt),ht([],[ee],xt=>{xt=xt[0];var Lt=`constructor ${xt.name}`;if(xt.registeredClass.constructor_body===void 0&&(xt.registeredClass.constructor_body=[]),xt.registeredClass.constructor_body[te-1]!==void 0)throw new rt(`Cannot register multiple constructors with identical number of parameters (${te-1}) for class '${xt.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return xt.registeredClass.constructor_body[te-1]=()=>{_n(`Cannot construct ${xt.name} due to unbound types`,jt)},ht([],jt,en=>(en.splice(1,0,null),xt.registeredClass.constructor_body[te-1]=mr(Lt,en,null,lt,Rt),[])),[]})},jo=ee=>{ee=ee.trim();const te=ee.indexOf("(");return te!==-1?ee.substr(0,te):ee},Lc=(ee,te,we,Ie,lt,Rt,jt,xt,Lt)=>{var en=hi(we,Ie);te=Ye(te),te=jo(te),Rt=yn(lt,Rt),ht([],[ee],rn=>{rn=rn[0];var jn=`${rn.name}.${te}`;te.startsWith("@@")&&(te=Symbol[te.substring(2)]),xt&&rn.registeredClass.pureVirtualFunctions.push(te);function Rn(){_n(`Cannot call ${jn} due to unbound types`,en)}var Gr=rn.registeredClass.instancePrototype,Jn=Gr[te];return Jn===void 0||Jn.overloadTable===void 0&&Jn.className!==rn.name&&Jn.argCount===we-2?(Rn.argCount=we-2,Rn.className=rn.name,Gr[te]=Rn):(Tt(Gr,te,jn),Gr[te].overloadTable[we-2]=Rn),ht([],en,Fc=>{var Rr=mr(jn,Fc,rn,Rt,jt,Lt);return Gr[te].overloadTable===void 0?(Rr.argCount=we-2,Gr[te]=Rr):Gr[te].overloadTable[we-2]=Rr,[]}),[]})},Ho=[],Sn=[],Ys=ee=>{ee>9&&--Sn[ee+1]===0&&(Sn[ee]=void 0,Ho.push(ee))},Il=()=>Sn.length/2-5-Ho.length,Uc=()=>{Sn.push(0,1,void 0,1,null,1,!0,1,!1,1),i.count_emval_handles=Il},Ur={toValue:ee=>(ee||Je("Cannot use deleted val. handle = "+ee),Sn[ee]),toHandle:ee=>{switch(ee){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const te=Ho.pop()||Sn.length;return Sn[te]=ee,Sn[te+1]=1,te}}}},Ef={name:"emscripten::val",fromWireType:ee=>{var te=Ur.toValue(ee);return Ys(ee),te},toWireType:(ee,te)=>Ur.toHandle(te),argPackAdvance:Be,readValueFromPointer:Dt,destructorFunction:null},Vo=ee=>Re(ee,Ef),ku=ee=>{if(ee===null)return"null";var te=typeof ee;return te==="object"||te==="array"||te==="function"?ee.toString():""+ee},S=(ee,te)=>{switch(te){case 4:return function(we){return this.fromWireType(H[we>>2])};case 8:return function(we){return this.fromWireType(G[we>>3])};default:throw new TypeError(`invalid float width (${te}): ${ee}`)}},N=(ee,te,we)=>{te=Ye(te),Re(ee,{name:te,fromWireType:Ie=>Ie,toWireType:(Ie,lt)=>lt,argPackAdvance:Be,readValueFromPointer:S(te,we),destructorFunction:null})},W=(ee,te,we)=>{switch(te){case 1:return we?Ie=>A[Ie]:Ie=>C[Ie];case 2:return we?Ie=>D[Ie>>1]:Ie=>k[Ie>>1];case 4:return we?Ie=>P[Ie>>2]:Ie=>B[Ie>>2];default:throw new TypeError(`invalid integer width (${te}): ${ee}`)}},ne=(ee,te,we,Ie,lt)=>{te=Ye(te);var Rt=rn=>rn;if(Ie===0){var jt=32-8*we;Rt=rn=>rn<<jt>>>jt}var xt=te.includes("unsigned"),Lt=(rn,jn)=>{},en;xt?en=function(rn,jn){return Lt(jn,this.name),jn>>>0}:en=function(rn,jn){return Lt(jn,this.name),jn},Re(ee,{name:te,fromWireType:Rt,toWireType:en,argPackAdvance:Be,readValueFromPointer:W(te,we,Ie!==0),destructorFunction:null})},de=(ee,te,we)=>{var Ie=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],lt=Ie[te];function Rt(jt){var xt=B[jt>>2],Lt=B[jt+4>>2];return new lt(A.buffer,Lt,xt)}we=Ye(we),Re(ee,{name:we,fromWireType:Rt,argPackAdvance:Be,readValueFromPointer:Rt},{ignoreDuplicateRegistrations:!0})},Le=(ee,te,we,Ie)=>{if(!(Ie>0))return 0;for(var lt=we,Rt=we+Ie-1,jt=0;jt<ee.length;++jt){var xt=ee.charCodeAt(jt);if(xt>=55296&&xt<=57343){var Lt=ee.charCodeAt(++jt);xt=65536+((xt&1023)<<10)|Lt&1023}if(xt<=127){if(we>=Rt)break;te[we++]=xt}else if(xt<=2047){if(we+1>=Rt)break;te[we++]=192|xt>>6,te[we++]=128|xt&63}else if(xt<=65535){if(we+2>=Rt)break;te[we++]=224|xt>>12,te[we++]=128|xt>>6&63,te[we++]=128|xt&63}else{if(we+3>=Rt)break;te[we++]=240|xt>>18,te[we++]=128|xt>>12&63,te[we++]=128|xt>>6&63,te[we++]=128|xt&63}}return te[we]=0,we-lt},Xe=(ee,te,we)=>Le(ee,C,te,we),It=ee=>{for(var te=0,we=0;we<ee.length;++we){var Ie=ee.charCodeAt(we);Ie<=127?te++:Ie<=2047?te+=2:Ie>=55296&&Ie<=57343?(te+=4,++we):te+=3}return te},Bt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,mn=(ee,te,we)=>{for(var Ie=te+we,lt=te;ee[lt]&&!(lt>=Ie);)++lt;if(lt-te>16&&ee.buffer&&Bt)return Bt.decode(ee.subarray(te,lt));for(var Rt="";te<lt;){var jt=ee[te++];if(!(jt&128)){Rt+=String.fromCharCode(jt);continue}var xt=ee[te++]&63;if((jt&224)==192){Rt+=String.fromCharCode((jt&31)<<6|xt);continue}var Lt=ee[te++]&63;if((jt&240)==224?jt=(jt&15)<<12|xt<<6|Lt:jt=(jt&7)<<18|xt<<12|Lt<<6|ee[te++]&63,jt<65536)Rt+=String.fromCharCode(jt);else{var en=jt-65536;Rt+=String.fromCharCode(55296|en>>10,56320|en&1023)}}return Rt},En=(ee,te)=>ee?mn(C,ee,te):"",Ci=(ee,te)=>{te=Ye(te);var we=te==="std::string";Re(ee,{name:te,fromWireType(Ie){var lt=B[Ie>>2],Rt=Ie+4,jt;if(we)for(var xt=Rt,Lt=0;Lt<=lt;++Lt){var en=Rt+Lt;if(Lt==lt||C[en]==0){var rn=en-xt,jn=En(xt,rn);jt===void 0?jt=jn:(jt+="\0",jt+=jn),xt=en+1}}else{for(var Rn=new Array(lt),Lt=0;Lt<lt;++Lt)Rn[Lt]=String.fromCharCode(C[Rt+Lt]);jt=Rn.join("")}return ja(Ie),jt},toWireType(Ie,lt){lt instanceof ArrayBuffer&&(lt=new Uint8Array(lt));var Rt,jt=typeof lt=="string";jt||lt instanceof Uint8Array||lt instanceof Uint8ClampedArray||lt instanceof Int8Array||Je("Cannot pass non-string to std::string"),we&&jt?Rt=It(lt):Rt=lt.length;var xt=ks(4+Rt+1),Lt=xt+4;if(B[xt>>2]=Rt,we&&jt)Xe(lt,Lt,Rt+1);else if(jt)for(var en=0;en<Rt;++en){var rn=lt.charCodeAt(en);rn>255&&(ja(Lt),Je("String has UTF-16 code units that do not fit in 8 bits")),C[Lt+en]=rn}else for(var en=0;en<Rt;++en)C[Lt+en]=lt[en];return Ie!==null&&Ie.push(ja,xt),xt},argPackAdvance:Be,readValueFromPointer:Dt,destructorFunction(Ie){ja(Ie)}})},Mn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ei=(ee,te)=>{for(var we=ee,Ie=we>>1,lt=Ie+te/2;!(Ie>=lt)&&k[Ie];)++Ie;if(we=Ie<<1,we-ee>32&&Mn)return Mn.decode(C.subarray(ee,we));for(var Rt="",jt=0;!(jt>=te/2);++jt){var xt=D[ee+jt*2>>1];if(xt==0)break;Rt+=String.fromCharCode(xt)}return Rt},va=(ee,te,we)=>{if(we??=2147483647,we<2)return 0;we-=2;for(var Ie=te,lt=we<ee.length*2?we/2:ee.length,Rt=0;Rt<lt;++Rt){var jt=ee.charCodeAt(Rt);D[te>>1]=jt,te+=2}return D[te>>1]=0,te-Ie},cr=ee=>ee.length*2,Ki=(ee,te)=>{for(var we=0,Ie="";!(we>=te/4);){var lt=P[ee+we*4>>2];if(lt==0)break;if(++we,lt>=65536){var Rt=lt-65536;Ie+=String.fromCharCode(55296|Rt>>10,56320|Rt&1023)}else Ie+=String.fromCharCode(lt)}return Ie},Ji=(ee,te,we)=>{if(we??=2147483647,we<4)return 0;for(var Ie=te,lt=Ie+we-4,Rt=0;Rt<ee.length;++Rt){var jt=ee.charCodeAt(Rt);if(jt>=55296&&jt<=57343){var xt=ee.charCodeAt(++Rt);jt=65536+((jt&1023)<<10)|xt&1023}if(P[te>>2]=jt,te+=4,te+4>lt)break}return P[te>>2]=0,te-Ie},Mi=ee=>{for(var te=0,we=0;we<ee.length;++we){var Ie=ee.charCodeAt(we);Ie>=55296&&Ie<=57343&&++we,te+=4}return te},Go=(ee,te,we)=>{we=Ye(we);var Ie,lt,Rt,jt;te===2?(Ie=Ei,lt=va,jt=cr,Rt=xt=>k[xt>>1]):te===4&&(Ie=Ki,lt=Ji,jt=Mi,Rt=xt=>B[xt>>2]),Re(ee,{name:we,fromWireType:xt=>{for(var Lt=B[xt>>2],en,rn=xt+4,jn=0;jn<=Lt;++jn){var Rn=xt+4+jn*te;if(jn==Lt||Rt(Rn)==0){var Gr=Rn-rn,Jn=Ie(rn,Gr);en===void 0?en=Jn:(en+="\0",en+=Jn),rn=Rn+te}}return ja(xt),en},toWireType:(xt,Lt)=>{typeof Lt!="string"&&Je(`Cannot pass non-string to C++ string type ${we}`);var en=jt(Lt),rn=ks(4+en+te);return B[rn>>2]=en/te,lt(Lt,rn+4,en+te),xt!==null&&xt.push(ja,rn),rn},argPackAdvance:Be,readValueFromPointer:Dt,destructorFunction(xt){ja(xt)}})},Mf=(ee,te)=>{te=Ye(te),Re(ee,{isVoid:!0,name:te,argPackAdvance:0,fromWireType:()=>{},toWireType:(we,Ie)=>{}})},yp=(ee,te,we)=>C.copyWithin(ee,te,te+we),$s=(ee,te)=>{var we=mt[ee];return we===void 0&&Je(`${te} has unknown type ${Cn(ee)}`),we},Rs=(ee,te,we)=>{var Ie=[],lt=ee.toWireType(Ie,we);return Ie.length&&(B[te>>2]=Ur.toHandle(Ie)),lt},Rv=(ee,te,we)=>(ee=Ur.toValue(ee),te=$s(te,"emval::as"),Rs(te,we,ee)),ha={},vp=ee=>{var te=ha[ee];return te===void 0?Ye(ee):te},Uh=[],So=(ee,te,we,Ie,lt)=>(ee=Uh[ee],te=Ur.toValue(te),we=vp(we),ee(te,te[we],Ie,lt)),Wo=ee=>{var te=Uh.length;return Uh.push(ee),te},Nl=(ee,te)=>{for(var we=new Array(ee),Ie=0;Ie<ee;++Ie)we[Ie]=$s(B[te+Ie*4>>2],"parameter "+Ie);return we},wo=(ee,te,we)=>{var Ie=Nl(ee,te),lt=Ie.shift();ee--;var Rt=`return function (obj, func, destructorsRef, args) {
`,jt=0,xt=[];we===0&&xt.push("obj");for(var Lt=["retType"],en=[lt],rn=0;rn<ee;++rn)xt.push("arg"+rn),Lt.push("argType"+rn),en.push(Ie[rn]),Rt+=`  var arg${rn} = argType${rn}.readValueFromPointer(args${jt?"+"+jt:""});
`,jt+=Ie[rn].argPackAdvance;var jn=we===1?"new func":"func.call";Rt+=`  var rv = ${jn}(${xt.join(", ")});
`,lt.isVoid||(Lt.push("emval_returnValue"),en.push(Rs),Rt+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Rt+=`};
`,Lt.push(Rt);var Rn=Ai(Function,Lt)(...en),Gr=`methodCaller<(${Ie.map(Jn=>Jn.name).join(", ")}) => ${lt.name}>`;return Wo(Ze(Gr,Rn))},xp=(ee,te)=>(ee=Ur.toValue(ee),te=Ur.toValue(te),Ur.toHandle(ee[te])),Ks=ee=>{ee>9&&(Sn[ee+1]+=1)},Lg=ee=>Ur.toHandle(vp(ee)),_p=ee=>{var te=Ur.toValue(ee);$i(te),Ys(ee)},Bh=(ee,te)=>{ee=$s(ee,"_emval_take_value");var we=ee.readValueFromPointer(te);return Ur.toHandle(we)},Bc=()=>1073741824,Du=ee=>{var te=T.buffer,we=(ee-te.byteLength+65535)/65536;try{return T.grow(we),V(),1}catch{}},Sp=ee=>{var te=C.length;ee>>>=0;var we=Bc();if(ee>we)return!1;for(var Ie=(Lt,en)=>Lt+(en-Lt%en)%en,lt=1;lt<=4;lt*=2){var Rt=te*(1+.2/lt);Rt=Math.min(Rt,ee+100663296);var jt=Math.min(we,Ie(Math.max(ee,Rt),65536)),xt=Du(jt);if(xt)return!0}return!1};be(),rt=i.BindingError=class extends Error{constructor(te){super(te),this.name="BindingError"}},Xt=i.InternalError=class extends Error{constructor(te){super(te),this.name="InternalError"}},qe(),zi(),qt(),Bn=i.UnboundTypeError=_i(Error,"UnboundTypeError"),Uc();var Tf={n:J,t:ue,s:se,x:wt,r:fn,q:wf,k:Lc,w:Vo,m:N,c:ne,a:de,l:Ci,f:Go,y:Mf,v:yp,h:Rv,o:So,b:Ys,p:wo,i:xp,g:Ks,j:Lg,d:_p,e:Bh,u:Sp},Js=We(),qo=ee=>(qo=Js.B)(ee),ks=ee=>(ks=Js.D)(ee),ja=ee=>(ja=Js.E)(ee),Zs=ee=>(Zs=Js.F)(ee);i.addOnPostRun=Me;var Pl;pe=function ee(){Pl||Fh(),Pl||(pe=ee)};function Fh(){if(Se>0||(X(),Se>0))return;function ee(){Pl||(Pl=!0,i.calledRun=!0,!w&&(z(),r(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),ce()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),ee()},1)):ee()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return Fh(),n=s,n}})();function QAe(t){return new Worker(""+new URL("SplatSortWorker-DiSpcAPr.js",import.meta.url).href,{type:"module",name:t?.name})}const us=[];for(let t=0;t<256;++t)us.push((t+256).toString(16).slice(1));function eCe(t,e=0){return(us[t[e+0]]+us[t[e+1]]+us[t[e+2]]+us[t[e+3]]+"-"+us[t[e+4]]+us[t[e+5]]+"-"+us[t[e+6]]+us[t[e+7]]+"-"+us[t[e+8]]+us[t[e+9]]+"-"+us[t[e+10]]+us[t[e+11]]+us[t[e+12]]+us[t[e+13]]+us[t[e+14]]+us[t[e+15]]).toLowerCase()}let hO;const tCe=new Uint8Array(16);function nCe(){if(!hO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");hO=crypto.getRandomValues.bind(crypto)}return hO(tCe)}const iCe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_H={randomUUID:iCe};function zQ(t,e,n){if(_H.randomUUID&&!t)return _H.randomUUID();t=t||{};const i=t.random??t.rng?.()??nCe();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,eCe(i)}const rCe=J2({numGaussians:0,focal:[1,1],viewport:[640,480],near:1,far:100,depthTest:!0,depthWrite:!1,transparent:!0,textureBuffer:null,textureT_camera_groups:null,transitionInState:0},`precision highp usampler2D; // Most important: ints must be 32-bit.
  precision mediump float;

  // Index from the splat sorter.
  attribute uint sortedIndex;

  // Buffers for splat data; each Gaussian gets 4 floats and 4 int32s. We just
  // copy quadjr for this.
  uniform usampler2D textureBuffer;

  // We could also use a uniform to store transforms, but this would be more
  // limiting in terms of the # of groups we can have.
  uniform sampler2D textureT_camera_groups;

  // Various other uniforms...
  uniform uint numGaussians;
  uniform vec2 focal;
  uniform vec2 viewport;
  uniform float near;
  uniform float far;

  // Fade in state between [0, 1].
  uniform float transitionInState;

  out vec4 vRgba;
  out vec2 vPosition;

  // Function to fetch and construct the i-th transform matrix using texelFetch
  mat4 getGroupTransform(uint i) {
    // Calculate the base index for the i-th transform.
    uint baseIndex = i * 3u;

    // Fetch the texels that represent the first 3 rows of the transform. We
    // choose to use row-major here, since it lets us exclude the fourth row of
    // the matrix.
    vec4 row0 = texelFetch(textureT_camera_groups, ivec2(baseIndex + 0u, 0), 0);
    vec4 row1 = texelFetch(textureT_camera_groups, ivec2(baseIndex + 1u, 0), 0);
    vec4 row2 = texelFetch(textureT_camera_groups, ivec2(baseIndex + 2u, 0), 0);

    // Construct the mat4 with the fetched rows.
    mat4 transform = mat4(row0, row1, row2, vec4(0.0, 0.0, 0.0, 1.0));
    return transpose(transform);
  }

  void main () {
    // Get position + scale from float buffer.
    ivec2 texSize = textureSize(textureBuffer, 0);
    uint texStart = sortedIndex << 1u;
    ivec2 texPos0 = ivec2(texStart % uint(texSize.x), texStart / uint(texSize.x));


    // Fetch from textures.
    uvec4 floatBufferData = texelFetch(textureBuffer, texPos0, 0);
    mat4 T_camera_group = getGroupTransform(floatBufferData.w);

    // Any early return will discard the fragment.
    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);

    // Get center wrt camera. modelViewMatrix is T_cam_world.
    vec3 center = uintBitsToFloat(floatBufferData.xyz);
    vec4 c_cam = T_camera_group * vec4(center, 1);
    if (-c_cam.z < near || -c_cam.z > far)
      return;
    vec4 pos2d = projectionMatrix * c_cam;
    float clip = 1.1 * pos2d.w;
    if (pos2d.x < -clip || pos2d.x > clip || pos2d.y < -clip || pos2d.y > clip)
      return;

    // Read covariance terms.
    ivec2 texPos1 = ivec2((texStart + 1u) % uint(texSize.x), (texStart + 1u) / uint(texSize.x));
    uvec4 intBufferData = texelFetch(textureBuffer, texPos1, 0);

    // Get covariance terms from int buffer.
    uint rgbaUint32 = intBufferData.w;
    vec2 triu01 = unpackHalf2x16(intBufferData.x);
    vec2 triu23 = unpackHalf2x16(intBufferData.y);
    vec2 triu45 = unpackHalf2x16(intBufferData.z);

    // Transition in.
    float startTime = 0.8 * float(sortedIndex) / float(numGaussians);
    float cov_scale = smoothstep(startTime, startTime + 0.2, transitionInState);

    // Do the actual splatting.
    mat3 cov3d = mat3(
        triu01.x, triu01.y, triu23.x,
        triu01.y, triu23.y, triu45.x,
        triu23.x, triu45.x, triu45.y
    );
    mat3 J = mat3(
        // Matrices are column-major.
        focal.x / c_cam.z, 0., 0.0,
        0., focal.y / c_cam.z, 0.0,
        -(focal.x * c_cam.x) / (c_cam.z * c_cam.z), -(focal.y * c_cam.y) / (c_cam.z * c_cam.z), 0.
    );
    mat3 A = J * mat3(T_camera_group);
    mat3 cov_proj = A * cov3d * transpose(A);
    float diag1 = cov_proj[0][0] + 0.3;
    float offDiag = cov_proj[0][1];
    float diag2 = cov_proj[1][1] + 0.3;

    // Eigendecomposition.
    float mid = 0.5 * (diag1 + diag2);
    float radius = length(vec2((diag1 - diag2) / 2.0, offDiag));
    float lambda1 = mid + radius;
    float lambda2 = mid - radius;
    if (lambda2 < 0.0)
      return;
    vec2 diagonalVector = normalize(vec2(offDiag, lambda1 - diag1));
    vec2 v1 = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
    vec2 v2 = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);

    vRgba = vec4(
      float(rgbaUint32 & uint(0xFF)) / 255.0,
      float((rgbaUint32 >> uint(8)) & uint(0xFF)) / 255.0,
      float((rgbaUint32 >> uint(16)) & uint(0xFF)) / 255.0,
      float(rgbaUint32 >> uint(24)) / 255.0
    );

    // Throw the Gaussian off the screen if it's too close, too far, or too small.
    float weightedDeterminant = vRgba.a * (diag1 * diag2 - offDiag * offDiag);
    if (weightedDeterminant < 0.25)
      return;
    vPosition = position.xy;

    gl_Position = vec4(
        vec2(pos2d) / pos2d.w
            + position.x * v1 / viewport * 2.0
            + position.y * v2 / viewport * 2.0, pos2d.z / pos2d.w, 1.);
  }
`,`precision mediump float;

  uniform vec2 viewport;
  uniform vec2 focal;

  in vec4 vRgba;
  in vec2 vPosition;

  void main () {
    float A = -dot(vPosition, vPosition);
    if (A < -4.0) discard;
    float B = exp(A) * vRgba.a;
    if (B < 0.01) discard;  // alphaTest.
    gl_FragColor = vec4(vRgba.rgb, B);
  }`);function aCe(t,e){const n=t.length/8,i=ui(d=>d.gl).capabilities.maxTextureSize,r=new G2;r.instanceCount=n,r.setIndex(new Tn(new Uint32Array([0,2,1,0,3,2]),1)),r.setAttribute("position",new Tn(new Float32Array([-2,-2,2,-2,2,2,-2,2]),2));const a=new Mh(new Uint32Array(n),1);a.setUsage(CA),r.setAttribute("sortedIndex",a);const s=Math.min(n*2,i),o=Math.ceil(n*2/s),l=new Uint32Array(s*o*4);l.set(t);const c=new ws(l,s,o,dv,Tc);c.internalFormat="RGBA32UI",c.needsUpdate=!0;const u=new Float32Array(e*12),f=new ws(u,e*12/4,1,Jr,vr);f.internalFormat="RGBA32F",f.needsUpdate=!0;const h=new rCe;return h.textureBuffer=c,h.textureT_camera_groups=f,h.numGaussians=n,h.focal=[640,480],{geometry:r,material:h,textureBuffer:c,sortedIndexAttribute:a,textureT_camera_groups:f,rowMajorT_camera_groups:u}}function sCe(){const t=ke.useRef({});return ke.useState(()=>xS(e=>({groupBufferFromId:{},nodeRefFromId:t,setBuffer:(n,i)=>e(r=>({groupBufferFromId:{...r.groupBufferFromId,[n]:i}})),removeBuffer:n=>e(i=>{const{[n]:r,...a}=i.groupBufferFromId;return{groupBufferFromId:a}})})))[0]}const ES=ke.createContext(null);function oCe({children:t}){const e=sCe();return R.jsxs(ES.Provider,{value:{useGaussianSplatStore:e,updateCamera:ke.useRef(null),meshPropsRef:ke.useRef(null)},children:[R.jsx(cCe,{}),t]})}const lCe=ke.forwardRef(function({buffer:e,children:n},i){const r=ke.useContext(ES),a=r.useGaussianSplatStore(c=>c.setBuffer),s=r.useGaussianSplatStore(c=>c.removeBuffer),o=r.useGaussianSplatStore(c=>c.nodeRefFromId),l=ke.useMemo(()=>zQ(),[e]);return ke.useEffect(()=>(a(l,e),()=>{s(l),delete o.current[l]}),[e]),R.jsx("group",{ref:c=>{c!==null&&(i!==null&&("current"in i?i.current=c:i(c)),o.current[l]=c)},children:n})});function cCe(){const e=ke.useContext(ES).useGaussianSplatStore(n=>n.groupBufferFromId);return Object.keys(e).length>0?R.jsx(uCe,{}):null}function uCe(){const t=ke.useContext(ES),e=t.useGaussianSplatStore(y=>y.groupBufferFromId),n=t.useGaussianSplatStore(y=>y.nodeRefFromId),i=fCe(e),r=aCe(i.gaussianBuffer,i.numGroups);t.meshPropsRef.current=r;const a=new QAe;let s=!1;a.onmessage=y=>{const v=y.data.sortedIndices;r.sortedIndexAttribute.set(v),r.sortedIndexAttribute.needsUpdate=!0,s||(r.material.uniforms.numGaussians.value=i.numGaussians,r.textureBuffer.needsUpdate=!0,s=!0)};function o(y){a.postMessage(y)}o({setBuffer:i.gaussianBuffer,setGroupIndices:i.groupIndices}),ke.useEffect(()=>()=>{r.textureBuffer.dispose(),r.geometry.dispose(),r.material.dispose(),o({close:!0})});const l=ke.useRef(null),c=new Ct,u=new Float32Array(i.numGroups*4),f=r.rowMajorT_camera_groups.slice().fill(0),h=[],d=ke.useRef(null);ke.useEffect(()=>{(async()=>d.current=new(await ZAe()).Sorter(i.gaussianBuffer,i.groupIndices))()},[i.gaussianBuffer,i.groupIndices]);const m=ke.useCallback(function(v,g,x,_){const E=v.fov*Math.PI/180,T=g/x,w=2*Math.atan(Math.tan(E/2)*T),A=x/(2*Math.tan(E/2)),C=g/(2*Math.tan(w/2));if(r.material===void 0)return;const D=r.material.uniforms;D.focal.value=[C,A],D.near.value=v.near,D.far.value=v.far,D.viewport.value=[g,x],v.updateMatrixWorld();const k=v.matrixWorldInverse,P=[];let B=!1;for(const[G,V]of Object.keys(e).entries()){const U=n.current[V];if(U===void 0)continue;c.copy(k).multiply(U.matrixWorld);const F=c.elements;u.set([F[2],F[6],F[10],F[14]],G*4);const q=c.transpose().elements;r.rowMajorT_camera_groups.set(q.slice(0,12),G*12);let X=U.visible&&U.parent!==null;X&&U.traverseAncestors(z=>{X=X&&z.visible}),P.push(X&&h[G]===!0),h[G]!==X&&(h[G]=X,B=!0)}const H=!r.rowMajorT_camera_groups.every((G,V)=>G===f[V]);if(H)if(_&&d.current!==null){const G=d.current.sort(u);r.sortedIndexAttribute.set(G),r.sortedIndexAttribute.needsUpdate=!0}else o({setTz_camera_groups:u});if(H||B){for(const[G,V]of P.entries())V||(r.rowMajorT_camera_groups[G*12+3]=1e10,r.rowMajorT_camera_groups[G*12+7]=1e10,r.rowMajorT_camera_groups[G*12+11]=1e10);f.set(r.rowMajorT_camera_groups),r.textureT_camera_groups.needsUpdate=!0}},[r]);return t.updateCamera.current=m,fa((y,v)=>{if(l.current===null||a===null||r.rowMajorT_camera_groups.length===0)return;const x=r.material.uniforms;x.transitionInState.value=Math.min(x.transitionInState.value+v*2,1),m(y.camera,y.viewport.dpr*y.size.width,y.viewport.dpr*y.size.height,!1)},-100),R.jsx("mesh",{ref:l,geometry:r.geometry,material:r.material,renderOrder:1e4})}function fCe(t){let e=0;for(const o of Object.values(t))e+=o.length;const n=e/8,i=new Uint32Array(e),r=new Uint32Array(n);let a=0;for(const[o,l]of Object.values(t).entries()){r.fill(o,a/8,(a+l.length)/8),i.set(l,a);for(let c=0;c<l.length;c+=8)i[a+c+3]=o;a+=l.length}const s=Object.keys(t).length;return{numGaussians:n,gaussianBuffer:i,numGroups:s,groupIndices:r}}const Ts=I.createContext({folderDepth:0,setValue:()=>{},messageSender:()=>{},GuiContainer:()=>{throw new Error("GuiComponentContext not initialized")}});var TB="_11mcxao0",jQ="_11mcxao1";function nR(t){if(t!==null){if(Array.isArray(t)){const[e,n,i]=t;return`#${e.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}return t}}function SH(t){return`rgb(${Math.round(t[0])}, ${Math.round(t[1])}, ${Math.round(t[2])})`}function wH(t){return`rgba(${Math.round(t[0])}, ${Math.round(t[1])}, ${Math.round(t[2])}, ${t[3].toFixed(2)})`}function r1(t){const e=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(e)return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])];const n=t.match(/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/);if(n){const i=n[1];let r,a,s;return i.length===3?(r=parseInt(i[0]+i[0],16),a=parseInt(i[1]+i[1],16),s=parseInt(i[2]+i[2],16)):(r=parseInt(i.substring(0,2),16),a=parseInt(i.substring(2,4),16),s=parseInt(i.substring(4,6),16)),[r,a,s]}return null}function QE(t){const e=t.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);if(e)return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])];const n=t.match(/^#([0-9A-Fa-f]{3,8})$/);if(n){const r=n[1];let a,s,o,l=1;if(r.length===3)a=parseInt(r[0]+r[0],16),s=parseInt(r[1]+r[1],16),o=parseInt(r[2]+r[2],16);else if(r.length===4)a=parseInt(r[0]+r[0],16),s=parseInt(r[1]+r[1],16),o=parseInt(r[2]+r[2],16),l=parseInt(r[3]+r[3],16)/255;else if(r.length===6)a=parseInt(r.substring(0,2),16),s=parseInt(r.substring(2,4),16),o=parseInt(r.substring(4,6),16);else if(r.length===8)a=parseInt(r.substring(0,2),16),s=parseInt(r.substring(2,4),16),o=parseInt(r.substring(4,6),16),l=parseInt(r.substring(6,8),16)/255;else return null;return[a,s,o,l]}const i=r1(t);return i?[...i,1]:null}function dO(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function pO(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&Math.abs(t[3]-e[3])<.001}function hCe({uuid:t,props:{visible:e,disabled:n,label:i,color:r,_icon_html:a}}){const{messageSender:s}=ke.useContext(Ts);return e??!0?R.jsx(et,{mx:"xs",pb:"0.5em",children:R.jsx(vs,{id:t,fullWidth:!0,color:nR(r),onClick:()=>s({type:"GuiUpdateMessage",uuid:t,updates:{value:!0}}),style:{height:"2em"},disabled:n??!1,size:"sm",leftSection:a===null?void 0:R.jsx("div",{className:TB,dangerouslySetInnerHTML:{__html:a}}),children:i})}):null}function Ru({uuid:t,label:e,hint:n,children:i}){const{folderDepth:r}=I.useContext(Ts);return n!=null&&(i=R.jsx(Cr,{zIndex:100,label:n,multiline:!0,style:{width:"15rem"},withArrow:!0,openDelay:500,withinPortal:!0,children:R.jsx(et,{children:i})})),e!==void 0&&(i=R.jsx(dCe,{uuid:t,label:e,input:i,folderDepth:r})),R.jsx(et,{pb:"0.5em",px:"xs",children:i})}function dCe(t){return R.jsxs(wh,{align:"center",children:[R.jsx(et,{pr:"xs",style:{width:`${7.25-t.folderDepth*.6375}em`,flexShrink:0,position:"relative"},children:R.jsx(gu,{c:"dimmed",style:{fontSize:"0.875em",fontWeight:"450",lineHeight:"1.375em",letterSpacing:"-0.75px",width:"100%",boxSizing:"content-box"},unselectable:"off",children:R.jsx("label",{htmlFor:t.uuid,children:t.label})})}),R.jsx(et,{style:{flexGrow:1},children:t.input})]})}function HQ(t){return R.jsx(wh,{justify:"space-between",columnGap:"0.5em",children:[...Array(t.n).keys()].map(e=>R.jsx(Tg,{id:e===0?t.uuid:void 0,value:t.value[e],onChange:n=>{const i=[...t.value];i[e]=n===""?0:Number(n),t.onChange(i)},size:"xs",styles:{root:{flexGrow:1,width:0},input:{paddingLeft:"0.5em",paddingRight:"1.75em",textAlign:"right",height:"1.875em",minHeight:"1.875em"},controls:{height:"1.25em",width:"0.825em"}},rightSectionWidth:"1em",decimalScale:t.precision,step:t.step,min:t.min===null?void 0:t.min[e],max:t.max===null?void 0:t.max[e],stepHoldDelay:500,stepHoldInterval:n=>Math.max(1e3/n**2,25),disabled:t.disabled},e))})}function pCe({uuid:t,value:e,props:{label:n,hint:i,visible:r,disabled:a,min:s,max:o,precision:l,step:c,_marks:u}}){const{setValue:f}=ke.useContext(Ts);if(!r)return null;const h=m=>f(t,m),d=R.jsxs(wh,{justify:"space-between",children:[R.jsx(c2,{id:t,className:u===null?jQ:void 0,size:"xs",thumbSize:0,radius:"xs",style:{flexGrow:1},styles:m=>({thumb:{height:"0.75rem",width:"0.5rem",background:m.colors[m.primaryColor][6]},trackContainer:{zIndex:3,position:"relative"},markLabel:{transform:"translate(-50%, 0.05rem)",fontSize:"0.6rem",textAlign:"center"},mark:{transform:"scale(2)"}}),pt:"0.3em",pb:"0.2em",showLabelOnHover:!1,min:s,max:o,step:c??void 0,precision:l,value:e,onChange:h,marks:u===null?[{value:s,label:`${s.toFixed(6).replace(/\.?0+$/,"")}`},{value:o,label:`${o.toFixed(6).replace(/\.?0+$/,"")}`}]:u,disabled:a}),R.jsx(Tg,{value:e,onChange:m=>{m!==""&&h(Number(m))},size:"xs",min:s,max:o,hideControls:!0,step:c??void 0,style:{width:"3rem"},styles:{input:{padding:"0.375em",letterSpacing:"-0.5px",minHeight:"1.875em",height:"1.875em"}},ml:"xs"})]});return R.jsx(Ru,{uuid:t,hint:i,label:n,children:d})}function mCe({uuid:t,value:e,props:{visible:n,label:i,hint:r,disabled:a,precision:s,min:o,max:l,step:c}}){const{setValue:u}=I.useContext(Ts);return n?R.jsx(Ru,{uuid:t,hint:r,label:i,children:R.jsx(Tg,{id:t,value:e,decimalScale:s,min:o??void 0,max:l??void 0,step:c,size:"xs",onChange:f=>{f!==""&&u(t,f)},styles:{input:{minHeight:"1.625rem",height:"1.625rem"},controls:{height:"1.625em",width:"0.825em"}},disabled:a,stepHoldDelay:500,stepHoldInterval:f=>Math.max(1e3/f**2,25)})}):null}function gCe({uuid:t,value:e,props:{hint:n,label:i,disabled:r,visible:a,multiline:s}}){const{setValue:o}=I.useContext(Ts);return a?R.jsx(Ru,{uuid:t,hint:n,label:i,children:s?R.jsx(KC,{value:e,size:"xs",onChange:l=>{o(t,l.target.value)},styles:{input:{padding:"0 0.5em"}},disabled:r,minRows:2,maxRows:6,autosize:!0,resize:"vertical"}):R.jsx(Cg,{value:e,size:"xs",onChange:l=>{o(t,l.target.value)},styles:{input:{minHeight:"1.625rem",height:"1.625rem",padding:"0 0.5em"}},disabled:r})}):null}function bCe({uuid:t,value:e,props:{disabled:n,visible:i,hint:r,label:a}}){const{setValue:s}=I.useContext(Ts);if(!i)return null;let o=R.jsx(Eh,{id:t,checked:e,size:"xs",onChange:l=>{s(t,l.target.checked)},disabled:n});return r!=null&&(o=R.jsx(Cr,{zIndex:100,label:r,multiline:!0,style:{width:"15rem"},withArrow:!0,openDelay:500,withinPortal:!0,children:R.jsx(et,{style:{display:"inline-block"},children:o})})),R.jsx(Ru,{uuid:t,label:a,children:o})}function yCe({uuid:t,value:e,props:{hint:n,label:i,visible:r,disabled:a,min:s,max:o,step:l,precision:c}}){const{setValue:u}=I.useContext(Ts);return r?R.jsx(Ru,{uuid:t,hint:n,label:i,children:R.jsx(HQ,{uuid:t,n:2,value:e,onChange:f=>u(t,f),min:s,max:o,step:l,precision:c,disabled:a})}):null}function vCe({uuid:t,value:e,props:{hint:n,label:i,visible:r,disabled:a,min:s,max:o,step:l,precision:c}}){const{setValue:u}=I.useContext(Ts);return r?R.jsx(Ru,{uuid:t,hint:n,label:i,children:R.jsx(HQ,{uuid:t,n:3,value:e,onChange:f=>u(t,f),min:s,max:o,step:l,precision:c,disabled:a})}):null}function xCe({uuid:t,value:e,props:{hint:n,label:i,disabled:r,visible:a,options:s}}){const{setValue:o}=I.useContext(Ts);return a?R.jsx(Ru,{uuid:t,hint:n,label:i,children:R.jsx(cv,{id:t,radius:"xs",value:e,data:s,onChange:l=>l!==null&&o(t,l),disabled:r,searchable:!0,maxDropdownHeight:400,size:"xs",rightSectionWidth:"1.2em",styles:{input:{padding:"0.5em",letterSpacing:"-0.5px",minHeight:"1.625rem",height:"1.625rem"}},comboboxProps:{zIndex:1e3}})}):null}/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Ce={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=(t,e,n,i)=>{const r=I.forwardRef(({color:a="currentColor",size:s=24,stroke:o=2,title:l,className:c,children:u,...f},h)=>I.createElement("svg",{ref:h,..._Ce[t],width:s,height:s,className:["tabler-icon",`tabler-icon-${e}`,c].join(" "),...t==="filled"?{fill:a}:{strokeWidth:o,stroke:a},...f},[l&&I.createElement("title",{key:"svg-title"},l),...i.map(([d,m])=>I.createElement(d,m)),...Array.isArray(u)?u:[u]]));return r.displayName=`${n}`,r};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const SCe=[["path",{d:"M4 10a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M6 4v4",key:"svg-1"}],["path",{d:"M6 12v8",key:"svg-2"}],["path",{d:"M10 16a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-3"}],["path",{d:"M12 4v10",key:"svg-4"}],["path",{d:"M12 18v2",key:"svg-5"}],["path",{d:"M16 7a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M18 4v1",key:"svg-7"}],["path",{d:"M18 9v11",key:"svg-8"}]],wCe=Xi("outline","adjustments","Adjustments",SCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ECe=[["path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1",key:"svg-0"}]],MCe=Xi("outline","arrow-back","ArrowBack",ECe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const TCe=[["path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5",key:"svg-0"}]],ACe=Xi("outline","brand-github","BrandGithub",TCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const CCe=[["path",{d:"M6 10l6 6l6 -6h-12",key:"svg-0"}]],RCe=Xi("outline","caret-down","CaretDown",CCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const kCe=[["path",{d:"M10 18l6 -6l-6 -6v12",key:"svg-0"}]],DCe=Xi("outline","caret-right","CaretRight",kCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const OCe=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],AB=Xi("outline","check","Check",OCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ICe=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],NCe=Xi("outline","chevron-down","ChevronDown",ICe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const PCe=[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]],LCe=Xi("outline","chevron-left","ChevronLeft",PCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const UCe=[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]],BCe=Xi("outline","chevron-right","ChevronRight",UCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const FCe=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],zCe=Xi("outline","chevron-up","ChevronUp",FCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const jCe=[["path",{d:"M11 18.004h-4.343c-2.572 -.004 -4.657 -2.011 -4.657 -4.487c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.388 0 2.585 .82 3.138 2.007",key:"svg-0"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-1"}]],HCe=Xi("outline","cloud-check","CloudCheck",jCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const VCe=[["path",{d:"M11 7l6 6",key:"svg-0"}],["path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z",key:"svg-1"}]],VQ=Xi("outline","color-picker","ColorPicker",VCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const GCe=[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]],WCe=Xi("outline","copy","Copy",GCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const qCe=[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]],XCe=Xi("outline","device-floppy","DeviceFloppy",qCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const YCe=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]],$Ce=Xi("outline","download","Download",YCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const KCe=[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]],JCe=Xi("outline","eye-off","EyeOff",KCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZCe=[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M13.048 17.942a9.298 9.298 0 0 1 -1.048 .058c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6a17.986 17.986 0 0 1 -1.362 1.975",key:"svg-1"}],["path",{d:"M22 22l-5 -5",key:"svg-2"}],["path",{d:"M17 22l5 -5",key:"svg-3"}]],QCe=Xi("outline","eye-x","EyeX",ZCe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2e=[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]],t2e=Xi("outline","eye","Eye",e2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2e=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 17h6",key:"svg-2"}],["path",{d:"M9 13h6",key:"svg-3"}]],i2e=Xi("outline","file-description","FileDescription",n2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2e=[["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2",key:"svg-0"}],["path",{d:"M19 12h2l-9 -9l-9 9h2v7a2 2 0 0 0 2 2h5.5",key:"svg-1"}],["path",{d:"M16 19h6",key:"svg-2"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-3"}]],a2e=Xi("outline","home-move","HomeMove",r2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2e=[["path",{d:"M2 6m0 2a2 2 0 0 1 2 -2h16a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-16a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M6 10l0 .01",key:"svg-1"}],["path",{d:"M10 10l0 .01",key:"svg-2"}],["path",{d:"M14 10l0 .01",key:"svg-3"}],["path",{d:"M18 10l0 .01",key:"svg-4"}],["path",{d:"M6 14l0 .01",key:"svg-5"}],["path",{d:"M18 14l0 .01",key:"svg-6"}],["path",{d:"M10 14l4 .01",key:"svg-7"}]],o2e=Xi("outline","keyboard","Keyboard",s2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2e=[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]],GQ=Xi("outline","maximize","Maximize",l2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2e=[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]],u2e=Xi("outline","pencil","Pencil",c2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2e=[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]],h2e=Xi("outline","photo","Photo",f2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2e=[["path",{d:"M20 16l-4 4",key:"svg-0"}],["path",{d:"M7 12l5 5l-1.5 1.5a3.536 3.536 0 1 1 -5 -5l1.5 -1.5z",key:"svg-1"}],["path",{d:"M17 12l-5 -5l1.5 -1.5a3.536 3.536 0 1 1 5 5l-1.5 1.5z",key:"svg-2"}],["path",{d:"M3 21l2.5 -2.5",key:"svg-3"}],["path",{d:"M18.5 5.5l2.5 -2.5",key:"svg-4"}],["path",{d:"M10 11l-2 2",key:"svg-5"}],["path",{d:"M13 14l-2 2",key:"svg-6"}],["path",{d:"M16 16l4 4",key:"svg-7"}]],p2e=Xi("outline","plug-connected-x","PlugConnectedX",d2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2e=[["path",{d:"M8 4h1a1 1 0 0 1 1 1v1m-.297 3.711a1 1 0 0 1 -.703 .289h-4a1 1 0 0 1 -1 -1v-4c0 -.275 .11 -.524 .29 -.705",key:"svg-0"}],["path",{d:"M7 17v.01",key:"svg-1"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M7 7v.01",key:"svg-3"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M17 7v.01",key:"svg-5"}],["path",{d:"M20 14v.01",key:"svg-6"}],["path",{d:"M14 14v3",key:"svg-7"}],["path",{d:"M14 20h3",key:"svg-8"}],["path",{d:"M3 3l18 18",key:"svg-9"}]],g2e=Xi("outline","qrcode-off","QrcodeOff",m2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2e=[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M7 17l0 .01",key:"svg-1"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M7 7l0 .01",key:"svg-3"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M17 7l0 .01",key:"svg-5"}],["path",{d:"M14 14l3 0",key:"svg-6"}],["path",{d:"M20 14l0 .01",key:"svg-7"}],["path",{d:"M14 14l0 3",key:"svg-8"}],["path",{d:"M14 20l3 0",key:"svg-9"}],["path",{d:"M17 17l3 0",key:"svg-10"}],["path",{d:"M20 17l0 3",key:"svg-11"}]],y2e=Xi("outline","qrcode","Qrcode",b2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2e=[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]],x2e=Xi("outline","share","Share",v2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2e=[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]],S2e=Xi("outline","x","X",_2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2e=[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]],E2e=Xi("filled","player-pause-filled","PlayerPauseFilled",w2e);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2e=[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]],T2e=Xi("filled","player-play-filled","PlayerPlayFilled",M2e);function A2e({uuid:t,value:e,props:{label:n,hint:i,disabled:r,visible:a}}){const{setValue:s}=I.useContext(Ts),[o,l]=I.useState(SH(e));return I.useEffect(()=>{const c=r1(o);(!c||!dO(c,e))&&l(SH(e))},[e]),a?R.jsx(Ru,{uuid:t,hint:i,label:n,children:R.jsx(ov,{disabled:r,size:"xs",value:o,format:"rgb",eyeDropperIcon:R.jsx(VQ,{size:18,stroke:1.5}),popoverProps:{zIndex:1e3},styles:{input:{height:"1.625rem",minHeight:"1.625rem"}},onChange:c=>{if(l(c),c.startsWith("rgb(")){const u=r1(c);u&&!dO(u,e)&&s(t,u)}},onKeyDown:c=>{if(c.key==="Enter"){const u=r1(o);u&&s(t,u)}},onBlur:()=>{const c=r1(o);c&&!dO(c,e)&&s(t,c)}})}):null}function C2e({uuid:t,value:e,props:{label:n,hint:i,disabled:r,visible:a}}){const{setValue:s}=I.useContext(Ts),[o,l]=I.useState(wH(e));return I.useEffect(()=>{const c=QE(o);(!c||!pO(c,e))&&l(wH(e))},[e,o]),a?R.jsx(Ru,{uuid:t,hint:i,label:n,children:R.jsx(ov,{disabled:r,size:"xs",value:o,format:"rgba",eyeDropperIcon:R.jsx(VQ,{size:18,stroke:1.5}),popoverProps:{zIndex:1e3},styles:{input:{height:"1.625rem",minHeight:"1.625rem"}},onChange:c=>{if(l(c),c.startsWith("rgba(")){const u=QE(c);u&&!pO(u,e)&&s(t,u)}},onKeyDown:c=>{if(c.key==="Enter"){const u=QE(o);u&&s(t,u)}},onBlur:()=>{const c=QE(o);c&&!pO(c,e)&&s(t,c)}})}):null}function R2e({uuid:t,props:{hint:e,label:n,visible:i,disabled:r,options:a}}){const{messageSender:s}=I.useContext(Ts);return i?R.jsx(Ru,{uuid:t,hint:e,label:n,children:R.jsx(wh,{justify:"space-between",columnGap:"xs",children:a.map((o,l)=>R.jsx(vs,{onClick:()=>s({type:"GuiUpdateMessage",uuid:t,updates:{value:o}}),style:{flexGrow:1,wuuidth:0},disabled:r,size:"compact-xs",variant:"outline",children:o},l))})}):null}const lP={},WQ=ke.createContext(lP);function qQ(t){const e=ke.useContext(WQ);return ke.useMemo(function(){return typeof t=="function"?t(e):{...e,...t}},[e,t])}function k2e(t){let e;return t.disableParentContext?e=typeof t.components=="function"?t.components(lP):t.components||lP:e=qQ(t.components),ke.createElement(WQ.Provider,{value:e},t.children)}const D2e=Object.freeze(Object.defineProperty({__proto__:null,MDXProvider:k2e,useMDXComponents:qQ},Symbol.toStringTag,{value:"Module"}));function vc(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?EH(t.position):"start"in t||"end"in t?EH(t):"line"in t||"column"in t?cP(t):""}function cP(t){return MH(t&&t.line)+":"+MH(t&&t.column)}function EH(t){return cP(t&&t.start)+"-"+cP(t&&t.end)}function MH(t){return t&&typeof t=="number"?t:1}class Gi extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",a={},s=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?r=e:!a.cause&&e&&(s=!0,r=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof i=="string"){const l=i.indexOf(":");l===-1?a.ruleId=i:(a.source=i.slice(0,l),a.ruleId=i.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=o?o.line:void 0,this.name=vc(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Gi.prototype.file="";Gi.prototype.name="";Gi.prototype.reason="";Gi.prototype.message="";Gi.prototype.stack="";Gi.prototype.column=void 0;Gi.prototype.line=void 0;Gi.prototype.ancestors=void 0;Gi.prototype.cause=void 0;Gi.prototype.fatal=void 0;Gi.prototype.place=void 0;Gi.prototype.ruleId=void 0;Gi.prototype.source=void 0;const Wu={basename:O2e,dirname:I2e,extname:N2e,join:P2e,sep:"/"};function O2e(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');MS(t);let n=0,i=-1,r=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else i<0&&(a=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let s=-1,o=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else s<0&&(a=!0,s=r+1),o>-1&&(t.codePointAt(r)===e.codePointAt(o--)?o<0&&(i=r):(o=-1,i=s));return n===i?i=s:i<0&&(i=t.length),t.slice(n,i)}function I2e(t){if(MS(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function N2e(t){MS(t);let e=t.length,n=-1,i=0,r=-1,a=0,s;for(;e--;){const o=t.codePointAt(e);if(o===47){if(s){i=e+1;break}continue}n<0&&(s=!0,n=e+1),o===46?r<0?r=e:a!==1&&(a=1):r>-1&&(a=-1)}return r<0||n<0||a===0||a===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function P2e(...t){let e=-1,n;for(;++e<t.length;)MS(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":L2e(n)}function L2e(t){MS(t);const e=t.codePointAt(0)===47;let n=U2e(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function U2e(t,e){let n="",i=0,r=-1,a=0,s=-1,o,l;for(;++s<=t.length;){if(s<t.length)o=t.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(r===s-1||a===1))if(r!==s-1&&a===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",i=0):(n=n.slice(0,l),i=n.length-1-n.lastIndexOf("/")),r=s,a=0;continue}}else if(n.length>0){n="",i=0,r=s,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,s):n=t.slice(r+1,s),i=s-r-1;r=s,a=0}else o===46&&a>-1?a++:a=-1}return n}function MS(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const B2e={cwd:F2e};function F2e(){return"/"}function uP(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function z2e(t){if(typeof t=="string")t=new URL(t);else if(!uP(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return j2e(t)}function j2e(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const mO=["history","path","basename","stem","extname","dirname"];class XQ{constructor(e){let n;e?uP(e)?n={path:e}:typeof e=="string"||H2e(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":B2e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<mO.length;){const a=mO[i];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let r;for(r in n)mO.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?Wu.basename(this.path):void 0}set basename(e){bO(e,"basename"),gO(e,"basename"),this.path=Wu.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Wu.dirname(this.path):void 0}set dirname(e){TH(this.basename,"dirname"),this.path=Wu.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Wu.extname(this.path):void 0}set extname(e){if(gO(e,"extname"),TH(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Wu.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){uP(e)&&(e=z2e(e)),bO(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Wu.basename(this.path,this.extname):void 0}set stem(e){bO(e,"stem"),gO(e,"stem"),this.path=Wu.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new Gi(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function gO(t,e){if(t&&t.includes(Wu.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Wu.sep+"`")}function bO(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function TH(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function H2e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const V2e=["md","markdown","mdown","mkdn","mkd","mdwn","mkdown","ron"],G2e=V2e.map(function(t){return"."+t});function W2e(t,e){const n=q2e(t)?t:new XQ(t),{format:i,...r}=e||{};return{file:n,options:{format:i==="md"||i==="mdx"?i:n.extname&&(r.mdExtensions||G2e).includes(n.extname)?"md":"mdx",...r}}}function q2e(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}const X2e=/[$_\p{ID_Start}]/u,Y2e=/[$_\u{200C}\u{200D}\p{ID_Continue}]/u,$2e=/[-$_\u{200C}\u{200D}\p{ID_Continue}]/u,K2e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,J2e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YQ={};function Yc(t){return t?X2e.test(String.fromCodePoint(t)):!1}function Nx(t,e){const i=(e||YQ).jsx?$2e:Y2e;return t?i.test(String.fromCodePoint(t)):!1}function uf(t,e){return((e||YQ).jsx?J2e:K2e).test(t)}class Z2e{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:e=>this.replacement=e}}replace(e,n,i,r){e&&n&&(i!=null?e[n][i]=r:e[n]=r)}remove(e,n,i){e&&n&&(i!=null?e[n].splice(i,1):delete e[n])}}class Q2e extends Z2e{constructor(e,n){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:i=>this.replacement=i},this.enter=e,this.leave=n}visit(e,n,i,r){if(e){if(this.enter){const s=this.should_skip,o=this.should_remove,l=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,e,n,i,r),this.replacement&&(e=this.replacement,this.replace(n,i,r,e)),this.should_remove&&this.remove(n,i,r);const c=this.should_skip,u=this.should_remove;if(this.should_skip=s,this.should_remove=o,this.replacement=l,c)return e;if(u)return null}let a;for(a in e){const s=e[a];if(s&&typeof s=="object")if(Array.isArray(s)){const o=s;for(let l=0;l<o.length;l+=1){const c=o[l];AH(c)&&(this.visit(c,e,a,l)||l--)}}else AH(s)&&this.visit(s,e,a,null)}if(this.leave){const s=this.replacement,o=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,e,n,i,r),this.replacement&&(e=this.replacement,this.replace(n,i,r,e)),this.should_remove&&this.remove(n,i,r);const l=this.should_remove;if(this.replacement=s,this.should_remove=o,l)return null}}return e}}function AH(t){return t!==null&&typeof t=="object"&&"type"in t&&typeof t.type=="string"}function $0(t,{enter:e,leave:n}){return new Q2e(e,n).visit(t,null)}const yO=/@(jsx|jsxFrag|jsxImportSource|jsxRuntime)\s+(\S+)/g;function eRe(t,e){const n=e||{};let i=n.runtime==="automatic";const r={},a={};$0(t,{enter(s){if(s.type==="Program"){const o=s.comments||[];let l=-1;for(;++l<o.length;){yO.lastIndex=0;let c=yO.exec(o[l].value);for(;c;)r[c[1]]=c[2],c=yO.exec(o[l].value)}if(r.jsxRuntime)if(r.jsxRuntime==="automatic"){if(i=!0,r.jsx)throw new Error("Unexpected `@jsx` pragma w/ automatic runtime");if(r.jsxFrag)throw new Error("Unexpected `@jsxFrag` pragma w/ automatic runtime")}else if(r.jsxRuntime==="classic"){if(i=!1,r.jsxImportSource)throw new Error("Unexpected `@jsxImportSource` w/ classic runtime")}else throw new Error("Unexpected `jsxRuntime` `"+r.jsxRuntime+"`, expected `automatic` or `classic`")}},leave(s){if(s.type==="Program"){const y=[];if(a.fragment&&y.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"Fragment"},local:{type:"Identifier",name:"_Fragment"}}),a.jsx&&y.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsx"},local:{type:"Identifier",name:"_jsx"}}),a.jsxs&&y.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxs"},local:{type:"Identifier",name:"_jsxs"}}),a.jsxDEV&&y.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxDEV"},local:{type:"Identifier",name:"_jsxDEV"}}),y.length>0){let v=0;for(;v<s.body.length;){const g=s.body[v];if("directive"in g&&g.directive)v++;else break}s.body.splice(v,0,{type:"ImportDeclaration",specifiers:y,source:{type:"Literal",value:(r.jsxImportSource||n.importSource||"react")+(n.development?"/jsx-dev-runtime":"/jsx-runtime")}})}}if(s.type!=="JSXElement"&&s.type!=="JSXFragment")return;const o=[];let l=-1;for(;++l<s.children.length;){const y=s.children[l];if(y.type==="JSXExpressionContainer")y.expression.type!=="JSXEmptyExpression"&&o.push(y.expression);else if(y.type==="JSXText"){const v=y.value.replace(/\t/g," ").replace(/ *(\r?\n|\r) */g,`
`).replace(/\n+/g,`
`).replace(/\n+$/,"").replace(/^\n+/,"").replace(/\n/g," ");if(v){const g={type:"Literal",value:v};B1(y,g),o.push(g)}}else y.type!=="JSXElement"&&y.type!=="JSXFragment"&&y.type,o.push(y)}let c;const u=[];let f=[],h;if(s.type==="JSXElement"){if(c=HA(s.openingElement.name),c.type==="Identifier"&&/^[a-z]/.test(c.name)){const x={type:"Literal",value:c.name};B1(c,x),c=x}let y;const v=s.openingElement.attributes;let g=-1;for(;++g<v.length;){const x=v[g];if(x.type==="JSXSpreadAttribute")x.argument.type==="ObjectExpression"?u.push(...x.argument.properties):u.push({type:"SpreadElement",argument:x.argument}),y=!0;else{const _=tRe(x);if(i&&_.key.type==="Identifier"&&_.key.name==="key"){if(y)throw new Error("Expected `key` to come before any spread expressions");const E=_.value;E.type!=="AssignmentPattern"&&E.type!=="ArrayPattern"&&E.type!=="ObjectPattern"&&E.type,h=E}else u.push(_)}}}else i?(a.fragment=!0,c={type:"Identifier",name:"_Fragment"}):c=CH(r.jsxFrag||n.pragmaFrag||"React.Fragment");i?o.length>0&&u.push({type:"Property",key:{type:"Identifier",name:"children"},value:o.length>1?{type:"ArrayExpression",elements:o}:o[0],kind:"init",method:!1,shorthand:!1,computed:!1}):f=o;let d;if(i){f.push({type:"ObjectExpression",properties:u}),h?f.push(h):n.development&&f.push({type:"Identifier",name:"undefined"});const y=o.length>1;if(n.development){a.jsxDEV=!0,d={type:"Identifier",name:"_jsxDEV"},f.push({type:"Literal",value:y});const v={type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"fileName"},value:{type:"Literal",value:n.filePath||"<source.js>"}}]};s.loc&&v.properties.push({type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"lineNumber"},value:{type:"Literal",value:s.loc.start.line}},{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"columnNumber"},value:{type:"Literal",value:s.loc.start.column+1}}),f.push(v,{type:"ThisExpression"})}else y?(a.jsxs=!0,d={type:"Identifier",name:"_jsxs"}):(a.jsx=!0,d={type:"Identifier",name:"_jsx"})}else u.length>0?f.unshift({type:"ObjectExpression",properties:u}):f.length>0&&f.unshift({type:"Literal",value:null}),d=CH(r.jsx||n.pragma||"React.createElement");f.unshift(c);const m={type:"CallExpression",callee:d,arguments:f,optional:!1};B1(s,m),this.replace(m)}})}function tRe(t){let e;if(t.value)if(t.value.type==="JSXExpressionContainer"){const i=t.value.expression;i.type,e=i}else{const i=t.value;i.type!=="JSXElement"&&i.type,e=i,delete e.raw}else e={type:"Literal",value:!0};const n={type:"Property",key:HA(t.name),value:e,kind:"init",method:!1,shorthand:!1,computed:!1};return B1(t,n),n}function HA(t){let e;if(t.type==="JSXMemberExpression"){const n=HA(t.property);e={type:"MemberExpression",object:HA(t.object),property:n,computed:n.type==="Literal",optional:!1}}else t.type==="JSXNamespacedName"?e={type:"Literal",value:t.namespace.name+":"+t.name.name}:e=uf(t.name)?{type:"Identifier",name:t.name}:{type:"Literal",value:t.name};return B1(t,e),e}function CH(t){const e=t.split(".");let n=-1,i;for(;++n<e.length;){const r=uf(e[n])?{type:"Identifier",name:e[n]}:{type:"Literal",value:e[n]};i=i?{type:"MemberExpression",object:i,property:r,computed:!!(n&&r.type==="Literal"),optional:!1}:r}return i}function B1(t,e){const n=["start","end","loc","range","comments"];let i=-1;for(;++i<n.length;){const r=n[i];r in t&&(e[r]=t[r])}}function nRe(t){return function(e,n){eRe(e,{filePath:n.history[0],...t})}}var $Q={exports:{}},iRe={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},eM={exports:{}},RH;function fP(){return RH||(RH=1,function(t,e){(function(n,i){i(e)})(tg,function(n){var i=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],r=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],a="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",s="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},l="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",c={5:l,"5module":l+" export import",6:l+" const class extends export import super"},u=/^in(stanceof)?$/,f=new RegExp("["+s+"]"),h=new RegExp("["+s+a+"]");function d(S,N){for(var W=65536,ne=0;ne<N.length;ne+=2){if(W+=N[ne],W>S)return!1;if(W+=N[ne+1],W>=S)return!0}return!1}function m(S,N){return S<65?S===36:S<91?!0:S<97?S===95:S<123?!0:S<=65535?S>=170&&f.test(String.fromCharCode(S)):N===!1?!1:d(S,r)}function y(S,N){return S<48?S===36:S<58?!0:S<65?!1:S<91?!0:S<97?S===95:S<123?!0:S<=65535?S>=170&&h.test(String.fromCharCode(S)):N===!1?!1:d(S,r)||d(S,i)}var v=function(N,W){W===void 0&&(W={}),this.label=N,this.keyword=W.keyword,this.beforeExpr=!!W.beforeExpr,this.startsExpr=!!W.startsExpr,this.isLoop=!!W.isLoop,this.isAssign=!!W.isAssign,this.prefix=!!W.prefix,this.postfix=!!W.postfix,this.binop=W.binop||null,this.updateContext=null};function g(S,N){return new v(S,{beforeExpr:!0,binop:N})}var x={beforeExpr:!0},_={startsExpr:!0},E={};function T(S,N){return N===void 0&&(N={}),N.keyword=S,E[S]=new v(S,N)}var w={num:new v("num",_),regexp:new v("regexp",_),string:new v("string",_),name:new v("name",_),privateId:new v("privateId",_),eof:new v("eof"),bracketL:new v("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new v("]"),braceL:new v("{",{beforeExpr:!0,startsExpr:!0}),braceR:new v("}"),parenL:new v("(",{beforeExpr:!0,startsExpr:!0}),parenR:new v(")"),comma:new v(",",x),semi:new v(";",x),colon:new v(":",x),dot:new v("."),question:new v("?",x),questionDot:new v("?."),arrow:new v("=>",x),template:new v("template"),invalidTemplate:new v("invalidTemplate"),ellipsis:new v("...",x),backQuote:new v("`",_),dollarBraceL:new v("${",{beforeExpr:!0,startsExpr:!0}),eq:new v("=",{beforeExpr:!0,isAssign:!0}),assign:new v("_=",{beforeExpr:!0,isAssign:!0}),incDec:new v("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new v("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new v("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new v("**",{beforeExpr:!0}),coalesce:g("??",1),_break:T("break"),_case:T("case",x),_catch:T("catch"),_continue:T("continue"),_debugger:T("debugger"),_default:T("default",x),_do:T("do",{isLoop:!0,beforeExpr:!0}),_else:T("else",x),_finally:T("finally"),_for:T("for",{isLoop:!0}),_function:T("function",_),_if:T("if"),_return:T("return",x),_switch:T("switch"),_throw:T("throw",x),_try:T("try"),_var:T("var"),_const:T("const"),_while:T("while",{isLoop:!0}),_with:T("with"),_new:T("new",{beforeExpr:!0,startsExpr:!0}),_this:T("this",_),_super:T("super",_),_class:T("class",_),_extends:T("extends",x),_export:T("export"),_import:T("import",_),_null:T("null",_),_true:T("true",_),_false:T("false",_),_in:T("in",{beforeExpr:!0,binop:7}),_instanceof:T("instanceof",{beforeExpr:!0,binop:7}),_typeof:T("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:T("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:T("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},A=/\r\n?|\n|\u2028|\u2029/,C=new RegExp(A.source,"g");function D(S){return S===10||S===13||S===8232||S===8233}function k(S,N,W){W===void 0&&(W=S.length);for(var ne=N;ne<W;ne++){var de=S.charCodeAt(ne);if(D(de))return ne<W-1&&de===13&&S.charCodeAt(ne+1)===10?ne+2:ne+1}return-1}var P=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,B=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,H=Object.prototype,G=H.hasOwnProperty,V=H.toString,U=Object.hasOwn||function(S,N){return G.call(S,N)},F=Array.isArray||function(S){return V.call(S)==="[object Array]"},q=Object.create(null);function X(S){return q[S]||(q[S]=new RegExp("^(?:"+S.replace(/ /g,"|")+")$"))}function z(S){return S<=65535?String.fromCharCode(S):(S-=65536,String.fromCharCode((S>>10)+55296,(S&1023)+56320))}var ce=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,he=function(N,W){this.line=N,this.column=W};he.prototype.offset=function(N){return new he(this.line,this.column+N)};var $=function(N,W,ne){this.start=W,this.end=ne,N.sourceFile!==null&&(this.source=N.sourceFile)};function Me(S,N){for(var W=1,ne=0;;){var de=k(S,ne,N);if(de<0)return new he(W,N-ne);++W,ne=de}}var Se={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},pe=!1;function xe(S){var N={};for(var W in Se)N[W]=S&&U(S,W)?S[W]:Se[W];if(N.ecmaVersion==="latest"?N.ecmaVersion=1e8:N.ecmaVersion==null?(!pe&&typeof console=="object"&&console.warn&&(pe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),N.ecmaVersion=11):N.ecmaVersion>=2015&&(N.ecmaVersion-=2009),N.allowReserved==null&&(N.allowReserved=N.ecmaVersion<5),(!S||S.allowHashBang==null)&&(N.allowHashBang=N.ecmaVersion>=14),F(N.onToken)){var ne=N.onToken;N.onToken=function(de){return ne.push(de)}}return F(N.onComment)&&(N.onComment=Ne(N,N.onComment)),N}function Ne(S,N){return function(W,ne,de,Le,Xe,It){var Bt={type:W?"Block":"Line",value:ne,start:de,end:Le};S.locations&&(Bt.loc=new $(this,Xe,It)),S.ranges&&(Bt.range=[de,Le]),N.push(Bt)}}var Ge=1,$e=2,ct=4,At=8,fe=16,Ve=32,je=64,ot=128,Te=256,Ue=512,Oe=Ge|$e|Te;function We(S,N){return $e|(S?ct:0)|(N?At:0)}var Et=0,vt=1,re=2,J=3,ue=4,se=5,be=function(N,W,ne){this.options=N=xe(N),this.sourceFile=N.sourceFile,this.keywords=X(c[N.ecmaVersion>=6?6:N.sourceType==="module"?"5module":5]);var de="";N.allowReserved!==!0&&(de=o[N.ecmaVersion>=6?6:N.ecmaVersion===5?5:3],N.sourceType==="module"&&(de+=" await")),this.reservedWords=X(de);var Le=(de?de+" ":"")+o.strict;this.reservedWordsStrict=X(Le),this.reservedWordsStrictBind=X(Le+" "+o.strictBind),this.input=String(W),this.containsEsc=!1,ne?(this.pos=ne,this.lineStart=this.input.lastIndexOf(`
`,ne-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(A).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=N.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&N.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ge),this.regexpState=null,this.privateNameStack=[]},Z={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};be.prototype.parse=function(){var N=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(N)},Z.inFunction.get=function(){return(this.currentVarScope().flags&$e)>0},Z.inGenerator.get=function(){return(this.currentVarScope().flags&At)>0},Z.inAsync.get=function(){return(this.currentVarScope().flags&ct)>0},Z.canAwait.get=function(){for(var S=this.scopeStack.length-1;S>=0;S--){var N=this.scopeStack[S],W=N.flags;if(W&(Te|Ue))return!1;if(W&$e)return(W&ct)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Z.allowSuper.get=function(){var S=this.currentThisScope(),N=S.flags;return(N&je)>0||this.options.allowSuperOutsideMethod},Z.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ot)>0},Z.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Z.allowNewDotTarget.get=function(){for(var S=this.scopeStack.length-1;S>=0;S--){var N=this.scopeStack[S],W=N.flags;if(W&(Te|Ue)||W&$e&&!(W&fe))return!0}return!1},Z.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Te)>0},be.extend=function(){for(var N=[],W=arguments.length;W--;)N[W]=arguments[W];for(var ne=this,de=0;de<N.length;de++)ne=N[de](ne);return ne},be.parse=function(N,W){return new this(W,N).parse()},be.parseExpressionAt=function(N,W,ne){var de=new this(ne,N,W);return de.nextToken(),de.parseExpression()},be.tokenizer=function(N,W){return new this(W,N)},Object.defineProperties(be.prototype,Z);var Ye=be.prototype,tt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Ye.strictDirective=function(S){if(this.options.ecmaVersion<5)return!1;for(;;){B.lastIndex=S,S+=B.exec(this.input)[0].length;var N=tt.exec(this.input.slice(S));if(!N)return!1;if((N[1]||N[2])==="use strict"){B.lastIndex=S+N[0].length;var W=B.exec(this.input),ne=W.index+W[0].length,de=this.input.charAt(ne);return de===";"||de==="}"||A.test(W[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(de)||de==="!"&&this.input.charAt(ne+1)==="=")}S+=N[0].length,B.lastIndex=S,S+=B.exec(this.input)[0].length,this.input[S]===";"&&S++}},Ye.eat=function(S){return this.type===S?(this.next(),!0):!1},Ye.isContextual=function(S){return this.type===w.name&&this.value===S&&!this.containsEsc},Ye.eatContextual=function(S){return this.isContextual(S)?(this.next(),!0):!1},Ye.expectContextual=function(S){this.eatContextual(S)||this.unexpected()},Ye.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||A.test(this.input.slice(this.lastTokEnd,this.start))},Ye.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Ye.semicolon=function(){!this.eat(w.semi)&&!this.insertSemicolon()&&this.unexpected()},Ye.afterTrailingComma=function(S,N){if(this.type===S)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),N||this.next(),!0},Ye.expect=function(S){this.eat(S)||this.unexpected()},Ye.unexpected=function(S){this.raise(S??this.start,"Unexpected token")};var mt=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Ye.checkPatternErrors=function(S,N){if(S){S.trailingComma>-1&&this.raiseRecoverable(S.trailingComma,"Comma is not permitted after the rest element");var W=N?S.parenthesizedAssign:S.parenthesizedBind;W>-1&&this.raiseRecoverable(W,N?"Assigning to rvalue":"Parenthesized pattern")}},Ye.checkExpressionErrors=function(S,N){if(!S)return!1;var W=S.shorthandAssign,ne=S.doubleProto;if(!N)return W>=0||ne>=0;W>=0&&this.raise(W,"Shorthand property assignments are valid only in destructuring patterns"),ne>=0&&this.raiseRecoverable(ne,"Redefinition of __proto__ property")},Ye.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Ye.isSimpleAssignTarget=function(S){return S.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(S.expression):S.type==="Identifier"||S.type==="MemberExpression"};var Fe=be.prototype;Fe.parseTopLevel=function(S){var N=Object.create(null);for(S.body||(S.body=[]);this.type!==w.eof;){var W=this.parseStatement(null,!0,N);S.body.push(W)}if(this.inModule)for(var ne=0,de=Object.keys(this.undefinedExports);ne<de.length;ne+=1){var Le=de[ne];this.raiseRecoverable(this.undefinedExports[Le].start,"Export '"+Le+"' is not defined")}return this.adaptDirectivePrologue(S.body),this.next(),S.sourceType=this.options.sourceType,this.finishNode(S,"Program")};var rt={kind:"loop"},Je={kind:"switch"};Fe.isLet=function(S){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;B.lastIndex=this.pos;var N=B.exec(this.input),W=this.pos+N[0].length,ne=this.input.charCodeAt(W);if(ne===91||ne===92)return!0;if(S)return!1;if(ne===123||ne>55295&&ne<56320)return!0;if(m(ne,!0)){for(var de=W+1;y(ne=this.input.charCodeAt(de),!0);)++de;if(ne===92||ne>55295&&ne<56320)return!0;var Le=this.input.slice(W,de);if(!u.test(Le))return!0}return!1},Fe.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;B.lastIndex=this.pos;var S=B.exec(this.input),N=this.pos+S[0].length,W;return!A.test(this.input.slice(this.pos,N))&&this.input.slice(N,N+8)==="function"&&(N+8===this.input.length||!(y(W=this.input.charCodeAt(N+8))||W>55295&&W<56320))},Fe.isUsingKeyword=function(S,N){if(this.options.ecmaVersion<17||!this.isContextual(S?"await":"using"))return!1;B.lastIndex=this.pos;var W=B.exec(this.input),ne=this.pos+W[0].length;if(A.test(this.input.slice(this.pos,ne)))return!1;if(S){var de=ne+5,Le;if(this.input.slice(ne,de)!=="using"||de===this.input.length||y(Le=this.input.charCodeAt(de))||Le>55295&&Le<56320)return!1;B.lastIndex=de;var Xe=B.exec(this.input);if(Xe&&A.test(this.input.slice(de,de+Xe[0].length)))return!1}if(N){var It=ne+2,Bt;if(this.input.slice(ne,It)==="of"&&(It===this.input.length||!y(Bt=this.input.charCodeAt(It))&&!(Bt>55295&&Bt<56320)))return!1}var mn=this.input.charCodeAt(ne);return m(mn,!0)||mn===92},Fe.isAwaitUsing=function(S){return this.isUsingKeyword(!0,S)},Fe.isUsing=function(S){return this.isUsingKeyword(!1,S)},Fe.parseStatement=function(S,N,W){var ne=this.type,de=this.startNode(),Le;switch(this.isLet(S)&&(ne=w._var,Le="let"),ne){case w._break:case w._continue:return this.parseBreakContinueStatement(de,ne.keyword);case w._debugger:return this.parseDebuggerStatement(de);case w._do:return this.parseDoStatement(de);case w._for:return this.parseForStatement(de);case w._function:return S&&(this.strict||S!=="if"&&S!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(de,!1,!S);case w._class:return S&&this.unexpected(),this.parseClass(de,!0);case w._if:return this.parseIfStatement(de);case w._return:return this.parseReturnStatement(de);case w._switch:return this.parseSwitchStatement(de);case w._throw:return this.parseThrowStatement(de);case w._try:return this.parseTryStatement(de);case w._const:case w._var:return Le=Le||this.value,S&&Le!=="var"&&this.unexpected(),this.parseVarStatement(de,Le);case w._while:return this.parseWhileStatement(de);case w._with:return this.parseWithStatement(de);case w.braceL:return this.parseBlock(!0,de);case w.semi:return this.parseEmptyStatement(de);case w._export:case w._import:if(this.options.ecmaVersion>10&&ne===w._import){B.lastIndex=this.pos;var Xe=B.exec(this.input),It=this.pos+Xe[0].length,Bt=this.input.charCodeAt(It);if(Bt===40||Bt===46)return this.parseExpressionStatement(de,this.parseExpression())}return this.options.allowImportExportEverywhere||(N||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),ne===w._import?this.parseImport(de):this.parseExport(de,W);default:if(this.isAsyncFunction())return S&&this.unexpected(),this.next(),this.parseFunctionStatement(de,!0,!S);var mn=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(mn)return N&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),mn==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(de,!1,mn),this.semicolon(),this.finishNode(de,"VariableDeclaration");var En=this.value,Ci=this.parseExpression();return ne===w.name&&Ci.type==="Identifier"&&this.eat(w.colon)?this.parseLabeledStatement(de,En,Ci,S):this.parseExpressionStatement(de,Ci)}},Fe.parseBreakContinueStatement=function(S,N){var W=N==="break";this.next(),this.eat(w.semi)||this.insertSemicolon()?S.label=null:this.type!==w.name?this.unexpected():(S.label=this.parseIdent(),this.semicolon());for(var ne=0;ne<this.labels.length;++ne){var de=this.labels[ne];if((S.label==null||de.name===S.label.name)&&(de.kind!=null&&(W||de.kind==="loop")||S.label&&W))break}return ne===this.labels.length&&this.raise(S.start,"Unsyntactic "+N),this.finishNode(S,W?"BreakStatement":"ContinueStatement")},Fe.parseDebuggerStatement=function(S){return this.next(),this.semicolon(),this.finishNode(S,"DebuggerStatement")},Fe.parseDoStatement=function(S){return this.next(),this.labels.push(rt),S.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),S.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(S,"DoWhileStatement")},Fe.parseForStatement=function(S){this.next();var N=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(rt),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return N>-1&&this.unexpected(N),this.parseFor(S,null);var W=this.isLet();if(this.type===w._var||this.type===w._const||W){var ne=this.startNode(),de=W?"let":this.value;return this.next(),this.parseVar(ne,!0,de),this.finishNode(ne,"VariableDeclaration"),this.parseForAfterInit(S,ne,N)}var Le=this.isContextual("let"),Xe=!1,It=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(It){var Bt=this.startNode();return this.next(),It==="await using"&&this.next(),this.parseVar(Bt,!0,It),this.finishNode(Bt,"VariableDeclaration"),this.parseForAfterInit(S,Bt,N)}var mn=this.containsEsc,En=new mt,Ci=this.start,Mn=N>-1?this.parseExprSubscripts(En,"await"):this.parseExpression(!0,En);return this.type===w._in||(Xe=this.options.ecmaVersion>=6&&this.isContextual("of"))?(N>-1?(this.type===w._in&&this.unexpected(N),S.await=!0):Xe&&this.options.ecmaVersion>=8&&(Mn.start===Ci&&!mn&&Mn.type==="Identifier"&&Mn.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(S.await=!1)),Le&&Xe&&this.raise(Mn.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Mn,!1,En),this.checkLValPattern(Mn),this.parseForIn(S,Mn)):(this.checkExpressionErrors(En,!0),N>-1&&this.unexpected(N),this.parseFor(S,Mn))},Fe.parseForAfterInit=function(S,N,W){return(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&N.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===w._in?W>-1&&this.unexpected(W):S.await=W>-1),this.parseForIn(S,N)):(W>-1&&this.unexpected(W),this.parseFor(S,N))},Fe.parseFunctionStatement=function(S,N,W){return this.next(),this.parseFunction(S,Nt|(W?0:ht),!1,N)},Fe.parseIfStatement=function(S){return this.next(),S.test=this.parseParenExpression(),S.consequent=this.parseStatement("if"),S.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(S,"IfStatement")},Fe.parseReturnStatement=function(S){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?S.argument=null:(S.argument=this.parseExpression(),this.semicolon()),this.finishNode(S,"ReturnStatement")},Fe.parseSwitchStatement=function(S){this.next(),S.discriminant=this.parseParenExpression(),S.cases=[],this.expect(w.braceL),this.labels.push(Je),this.enterScope(0);for(var N,W=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var ne=this.type===w._case;N&&this.finishNode(N,"SwitchCase"),S.cases.push(N=this.startNode()),N.consequent=[],this.next(),ne?N.test=this.parseExpression():(W&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),W=!0,N.test=null),this.expect(w.colon)}else N||this.unexpected(),N.consequent.push(this.parseStatement(null));return this.exitScope(),N&&this.finishNode(N,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(S,"SwitchStatement")},Fe.parseThrowStatement=function(S){return this.next(),A.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),S.argument=this.parseExpression(),this.semicolon(),this.finishNode(S,"ThrowStatement")};var Xt=[];Fe.parseCatchClauseParam=function(){var S=this.parseBindingAtom(),N=S.type==="Identifier";return this.enterScope(N?Ve:0),this.checkLValPattern(S,N?ue:re),this.expect(w.parenR),S},Fe.parseTryStatement=function(S){if(this.next(),S.block=this.parseBlock(),S.handler=null,this.type===w._catch){var N=this.startNode();this.next(),this.eat(w.parenL)?N.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),N.param=null,this.enterScope(0)),N.body=this.parseBlock(!1),this.exitScope(),S.handler=this.finishNode(N,"CatchClause")}return S.finalizer=this.eat(w._finally)?this.parseBlock():null,!S.handler&&!S.finalizer&&this.raise(S.start,"Missing catch or finally clause"),this.finishNode(S,"TryStatement")},Fe.parseVarStatement=function(S,N,W){return this.next(),this.parseVar(S,!1,N,W),this.semicolon(),this.finishNode(S,"VariableDeclaration")},Fe.parseWhileStatement=function(S){return this.next(),S.test=this.parseParenExpression(),this.labels.push(rt),S.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(S,"WhileStatement")},Fe.parseWithStatement=function(S){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),S.object=this.parseParenExpression(),S.body=this.parseStatement("with"),this.finishNode(S,"WithStatement")},Fe.parseEmptyStatement=function(S){return this.next(),this.finishNode(S,"EmptyStatement")},Fe.parseLabeledStatement=function(S,N,W,ne){for(var de=0,Le=this.labels;de<Le.length;de+=1){var Xe=Le[de];Xe.name===N&&this.raise(W.start,"Label '"+N+"' is already declared")}for(var It=this.type.isLoop?"loop":this.type===w._switch?"switch":null,Bt=this.labels.length-1;Bt>=0;Bt--){var mn=this.labels[Bt];if(mn.statementStart===S.start)mn.statementStart=this.start,mn.kind=It;else break}return this.labels.push({name:N,kind:It,statementStart:this.start}),S.body=this.parseStatement(ne?ne.indexOf("label")===-1?ne+"label":ne:"label"),this.labels.pop(),S.label=W,this.finishNode(S,"LabeledStatement")},Fe.parseExpressionStatement=function(S,N){return S.expression=N,this.semicolon(),this.finishNode(S,"ExpressionStatement")},Fe.parseBlock=function(S,N,W){for(S===void 0&&(S=!0),N===void 0&&(N=this.startNode()),N.body=[],this.expect(w.braceL),S&&this.enterScope(0);this.type!==w.braceR;){var ne=this.parseStatement(null);N.body.push(ne)}return W&&(this.strict=!1),this.next(),S&&this.exitScope(),this.finishNode(N,"BlockStatement")},Fe.parseFor=function(S,N){return S.init=N,this.expect(w.semi),S.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),S.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),S.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(S,"ForStatement")},Fe.parseForIn=function(S,N){var W=this.type===w._in;return this.next(),N.type==="VariableDeclaration"&&N.declarations[0].init!=null&&(!W||this.options.ecmaVersion<8||this.strict||N.kind!=="var"||N.declarations[0].id.type!=="Identifier")&&this.raise(N.start,(W?"for-in":"for-of")+" loop variable declaration may not have an initializer"),S.left=N,S.right=W?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),S.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(S,W?"ForInStatement":"ForOfStatement")},Fe.parseVar=function(S,N,W,ne){for(S.declarations=[],S.kind=W;;){var de=this.startNode();if(this.parseVarId(de,W),this.eat(w.eq)?de.init=this.parseMaybeAssign(N):!ne&&W==="const"&&!(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!ne&&(W==="using"||W==="await using")&&this.options.ecmaVersion>=17&&this.type!==w._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+W+" declaration"):!ne&&de.id.type!=="Identifier"&&!(N&&(this.type===w._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):de.init=null,S.declarations.push(this.finishNode(de,"VariableDeclarator")),!this.eat(w.comma))break}return S},Fe.parseVarId=function(S,N){S.id=N==="using"||N==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(S.id,N==="var"?vt:re,!1)};var Nt=1,ht=2,zt=4;Fe.parseFunction=function(S,N,W,ne,de){this.initFunction(S),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!ne)&&(this.type===w.star&&N&ht&&this.unexpected(),S.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(S.async=!!ne),N&Nt&&(S.id=N&zt&&this.type!==w.name?null:this.parseIdent(),S.id&&!(N&ht)&&this.checkLValSimple(S.id,this.strict||S.generator||S.async?this.treatFunctionsAsVar?vt:re:J));var Le=this.yieldPos,Xe=this.awaitPos,It=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(We(S.async,S.generator)),N&Nt||(S.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(S),this.parseFunctionBody(S,W,!1,de),this.yieldPos=Le,this.awaitPos=Xe,this.awaitIdentPos=It,this.finishNode(S,N&Nt?"FunctionDeclaration":"FunctionExpression")},Fe.parseFunctionParams=function(S){this.expect(w.parenL),S.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Fe.parseClass=function(S,N){this.next();var W=this.strict;this.strict=!0,this.parseClassId(S,N),this.parseClassSuper(S);var ne=this.enterClassBody(),de=this.startNode(),Le=!1;for(de.body=[],this.expect(w.braceL);this.type!==w.braceR;){var Xe=this.parseClassElement(S.superClass!==null);Xe&&(de.body.push(Xe),Xe.type==="MethodDefinition"&&Xe.kind==="constructor"?(Le&&this.raiseRecoverable(Xe.start,"Duplicate constructor in the same class"),Le=!0):Xe.key&&Xe.key.type==="PrivateIdentifier"&&Re(ne,Xe)&&this.raiseRecoverable(Xe.key.start,"Identifier '#"+Xe.key.name+"' has already been declared"))}return this.strict=W,this.next(),S.body=this.finishNode(de,"ClassBody"),this.exitClassBody(),this.finishNode(S,N?"ClassDeclaration":"ClassExpression")},Fe.parseClassElement=function(S){if(this.eat(w.semi))return null;var N=this.options.ecmaVersion,W=this.startNode(),ne="",de=!1,Le=!1,Xe="method",It=!1;if(this.eatContextual("static")){if(N>=13&&this.eat(w.braceL))return this.parseClassStaticBlock(W),W;this.isClassElementNameStart()||this.type===w.star?It=!0:ne="static"}if(W.static=It,!ne&&N>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===w.star)&&!this.canInsertSemicolon()?Le=!0:ne="async"),!ne&&(N>=9||!Le)&&this.eat(w.star)&&(de=!0),!ne&&!Le&&!de){var Bt=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Xe=Bt:ne=Bt)}if(ne?(W.computed=!1,W.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),W.key.name=ne,this.finishNode(W.key,"Identifier")):this.parseClassElementName(W),N<13||this.type===w.parenL||Xe!=="method"||de||Le){var mn=!W.static&&Be(W,"constructor"),En=mn&&S;mn&&Xe!=="method"&&this.raise(W.key.start,"Constructor can't have get/set modifier"),W.kind=mn?"constructor":Xe,this.parseClassMethod(W,de,Le,En)}else this.parseClassField(W);return W},Fe.isClassElementNameStart=function(){return this.type===w.name||this.type===w.privateId||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword},Fe.parseClassElementName=function(S){this.type===w.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),S.computed=!1,S.key=this.parsePrivateIdent()):this.parsePropertyName(S)},Fe.parseClassMethod=function(S,N,W,ne){var de=S.key;S.kind==="constructor"?(N&&this.raise(de.start,"Constructor can't be a generator"),W&&this.raise(de.start,"Constructor can't be an async method")):S.static&&Be(S,"prototype")&&this.raise(de.start,"Classes may not have a static property named prototype");var Le=S.value=this.parseMethod(N,W,ne);return S.kind==="get"&&Le.params.length!==0&&this.raiseRecoverable(Le.start,"getter should have no params"),S.kind==="set"&&Le.params.length!==1&&this.raiseRecoverable(Le.start,"setter should have exactly one param"),S.kind==="set"&&Le.params[0].type==="RestElement"&&this.raiseRecoverable(Le.params[0].start,"Setter cannot use rest params"),this.finishNode(S,"MethodDefinition")},Fe.parseClassField=function(S){return Be(S,"constructor")?this.raise(S.key.start,"Classes can't have a field named 'constructor'"):S.static&&Be(S,"prototype")&&this.raise(S.key.start,"Classes can't have a static field named 'prototype'"),this.eat(w.eq)?(this.enterScope(Ue|je),S.value=this.parseMaybeAssign(),this.exitScope()):S.value=null,this.semicolon(),this.finishNode(S,"PropertyDefinition")},Fe.parseClassStaticBlock=function(S){S.body=[];var N=this.labels;for(this.labels=[],this.enterScope(Te|je);this.type!==w.braceR;){var W=this.parseStatement(null);S.body.push(W)}return this.next(),this.exitScope(),this.labels=N,this.finishNode(S,"StaticBlock")},Fe.parseClassId=function(S,N){this.type===w.name?(S.id=this.parseIdent(),N&&this.checkLValSimple(S.id,re,!1)):(N===!0&&this.unexpected(),S.id=null)},Fe.parseClassSuper=function(S){S.superClass=this.eat(w._extends)?this.parseExprSubscripts(null,!1):null},Fe.enterClassBody=function(){var S={declared:Object.create(null),used:[]};return this.privateNameStack.push(S),S.declared},Fe.exitClassBody=function(){var S=this.privateNameStack.pop(),N=S.declared,W=S.used;if(this.options.checkPrivateFields)for(var ne=this.privateNameStack.length,de=ne===0?null:this.privateNameStack[ne-1],Le=0;Le<W.length;++Le){var Xe=W[Le];U(N,Xe.name)||(de?de.used.push(Xe):this.raiseRecoverable(Xe.start,"Private field '#"+Xe.name+"' must be declared in an enclosing class"))}};function Re(S,N){var W=N.key.name,ne=S[W],de="true";return N.type==="MethodDefinition"&&(N.kind==="get"||N.kind==="set")&&(de=(N.static?"s":"i")+N.kind),ne==="iget"&&de==="iset"||ne==="iset"&&de==="iget"||ne==="sget"&&de==="sset"||ne==="sset"&&de==="sget"?(S[W]="true",!1):ne?!0:(S[W]=de,!1)}function Be(S,N){var W=S.computed,ne=S.key;return!W&&(ne.type==="Identifier"&&ne.name===N||ne.type==="Literal"&&ne.value===N)}Fe.parseExportAllDeclaration=function(S,N){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(S.exported=this.parseModuleExportName(),this.checkExport(N,S.exported,this.lastTokStart)):S.exported=null),this.expectContextual("from"),this.type!==w.string&&this.unexpected(),S.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(S.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(S,"ExportAllDeclaration")},Fe.parseExport=function(S,N){if(this.next(),this.eat(w.star))return this.parseExportAllDeclaration(S,N);if(this.eat(w._default))return this.checkExport(N,"default",this.lastTokStart),S.declaration=this.parseExportDefaultDeclaration(),this.finishNode(S,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())S.declaration=this.parseExportDeclaration(S),S.declaration.type==="VariableDeclaration"?this.checkVariableExport(N,S.declaration.declarations):this.checkExport(N,S.declaration.id,S.declaration.id.start),S.specifiers=[],S.source=null,this.options.ecmaVersion>=16&&(S.attributes=[]);else{if(S.declaration=null,S.specifiers=this.parseExportSpecifiers(N),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),S.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(S.attributes=this.parseWithClause());else{for(var W=0,ne=S.specifiers;W<ne.length;W+=1){var de=ne[W];this.checkUnreserved(de.local),this.checkLocalExport(de.local),de.local.type==="Literal"&&this.raise(de.local.start,"A string literal cannot be used as an exported binding without `from`.")}S.source=null,this.options.ecmaVersion>=16&&(S.attributes=[])}this.semicolon()}return this.finishNode(S,"ExportNamedDeclaration")},Fe.parseExportDeclaration=function(S){return this.parseStatement(null)},Fe.parseExportDefaultDeclaration=function(){var S;if(this.type===w._function||(S=this.isAsyncFunction())){var N=this.startNode();return this.next(),S&&this.next(),this.parseFunction(N,Nt|zt,!1,S)}else if(this.type===w._class){var W=this.startNode();return this.parseClass(W,"nullableID")}else{var ne=this.parseMaybeAssign();return this.semicolon(),ne}},Fe.checkExport=function(S,N,W){S&&(typeof N!="string"&&(N=N.type==="Identifier"?N.name:N.value),U(S,N)&&this.raiseRecoverable(W,"Duplicate export '"+N+"'"),S[N]=!0)},Fe.checkPatternExport=function(S,N){var W=N.type;if(W==="Identifier")this.checkExport(S,N,N.start);else if(W==="ObjectPattern")for(var ne=0,de=N.properties;ne<de.length;ne+=1){var Le=de[ne];this.checkPatternExport(S,Le)}else if(W==="ArrayPattern")for(var Xe=0,It=N.elements;Xe<It.length;Xe+=1){var Bt=It[Xe];Bt&&this.checkPatternExport(S,Bt)}else W==="Property"?this.checkPatternExport(S,N.value):W==="AssignmentPattern"?this.checkPatternExport(S,N.left):W==="RestElement"&&this.checkPatternExport(S,N.argument)},Fe.checkVariableExport=function(S,N){if(S)for(var W=0,ne=N;W<ne.length;W+=1){var de=ne[W];this.checkPatternExport(S,de.id)}},Fe.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},Fe.parseExportSpecifier=function(S){var N=this.startNode();return N.local=this.parseModuleExportName(),N.exported=this.eatContextual("as")?this.parseModuleExportName():N.local,this.checkExport(S,N.exported,N.exported.start),this.finishNode(N,"ExportSpecifier")},Fe.parseExportSpecifiers=function(S){var N=[],W=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(W)W=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;N.push(this.parseExportSpecifier(S))}return N},Fe.parseImport=function(S){return this.next(),this.type===w.string?(S.specifiers=Xt,S.source=this.parseExprAtom()):(S.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),S.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(S.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(S,"ImportDeclaration")},Fe.parseImportSpecifier=function(){var S=this.startNode();return S.imported=this.parseModuleExportName(),this.eatContextual("as")?S.local=this.parseIdent():(this.checkUnreserved(S.imported),S.local=S.imported),this.checkLValSimple(S.local,re),this.finishNode(S,"ImportSpecifier")},Fe.parseImportDefaultSpecifier=function(){var S=this.startNode();return S.local=this.parseIdent(),this.checkLValSimple(S.local,re),this.finishNode(S,"ImportDefaultSpecifier")},Fe.parseImportNamespaceSpecifier=function(){var S=this.startNode();return this.next(),this.expectContextual("as"),S.local=this.parseIdent(),this.checkLValSimple(S.local,re),this.finishNode(S,"ImportNamespaceSpecifier")},Fe.parseImportSpecifiers=function(){var S=[],N=!0;if(this.type===w.name&&(S.push(this.parseImportDefaultSpecifier()),!this.eat(w.comma)))return S;if(this.type===w.star)return S.push(this.parseImportNamespaceSpecifier()),S;for(this.expect(w.braceL);!this.eat(w.braceR);){if(N)N=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;S.push(this.parseImportSpecifier())}return S},Fe.parseWithClause=function(){var S=[];if(!this.eat(w._with))return S;this.expect(w.braceL);for(var N={},W=!0;!this.eat(w.braceR);){if(W)W=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var ne=this.parseImportAttribute(),de=ne.key.type==="Identifier"?ne.key.name:ne.key.value;U(N,de)&&this.raiseRecoverable(ne.key.start,"Duplicate attribute key '"+de+"'"),N[de]=!0,S.push(ne)}return S},Fe.parseImportAttribute=function(){var S=this.startNode();return S.key=this.type===w.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(w.colon),this.type!==w.string&&this.unexpected(),S.value=this.parseExprAtom(),this.finishNode(S,"ImportAttribute")},Fe.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===w.string){var S=this.parseLiteral(this.value);return ce.test(S.value)&&this.raise(S.start,"An export name cannot include a lone surrogate."),S}return this.parseIdent(!0)},Fe.adaptDirectivePrologue=function(S){for(var N=0;N<S.length&&this.isDirectiveCandidate(S[N]);++N)S[N].directive=S[N].expression.raw.slice(1,-1)},Fe.isDirectiveCandidate=function(S){return this.options.ecmaVersion>=5&&S.type==="ExpressionStatement"&&S.expression.type==="Literal"&&typeof S.expression.value=="string"&&(this.input[S.start]==='"'||this.input[S.start]==="'")};var wt=be.prototype;wt.toAssignable=function(S,N,W){if(this.options.ecmaVersion>=6&&S)switch(S.type){case"Identifier":this.inAsync&&S.name==="await"&&this.raise(S.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":S.type="ObjectPattern",W&&this.checkPatternErrors(W,!0);for(var ne=0,de=S.properties;ne<de.length;ne+=1){var Le=de[ne];this.toAssignable(Le,N),Le.type==="RestElement"&&(Le.argument.type==="ArrayPattern"||Le.argument.type==="ObjectPattern")&&this.raise(Le.argument.start,"Unexpected token")}break;case"Property":S.kind!=="init"&&this.raise(S.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(S.value,N);break;case"ArrayExpression":S.type="ArrayPattern",W&&this.checkPatternErrors(W,!0),this.toAssignableList(S.elements,N);break;case"SpreadElement":S.type="RestElement",this.toAssignable(S.argument,N),S.argument.type==="AssignmentPattern"&&this.raise(S.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":S.operator!=="="&&this.raise(S.left.end,"Only '=' operator can be used for specifying default value."),S.type="AssignmentPattern",delete S.operator,this.toAssignable(S.left,N);break;case"ParenthesizedExpression":this.toAssignable(S.expression,N,W);break;case"ChainExpression":this.raiseRecoverable(S.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!N)break;default:this.raise(S.start,"Assigning to rvalue")}else W&&this.checkPatternErrors(W,!0);return S},wt.toAssignableList=function(S,N){for(var W=S.length,ne=0;ne<W;ne++){var de=S[ne];de&&this.toAssignable(de,N)}if(W){var Le=S[W-1];this.options.ecmaVersion===6&&N&&Le&&Le.type==="RestElement"&&Le.argument.type!=="Identifier"&&this.unexpected(Le.argument.start)}return S},wt.parseSpread=function(S){var N=this.startNode();return this.next(),N.argument=this.parseMaybeAssign(!1,S),this.finishNode(N,"SpreadElement")},wt.parseRestBinding=function(){var S=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==w.name&&this.unexpected(),S.argument=this.parseBindingAtom(),this.finishNode(S,"RestElement")},wt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var S=this.startNode();return this.next(),S.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(S,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},wt.parseBindingList=function(S,N,W,ne){for(var de=[],Le=!0;!this.eat(S);)if(Le?Le=!1:this.expect(w.comma),N&&this.type===w.comma)de.push(null);else{if(W&&this.afterTrailingComma(S))break;if(this.type===w.ellipsis){var Xe=this.parseRestBinding();this.parseBindingListItem(Xe),de.push(Xe),this.type===w.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(S);break}else de.push(this.parseAssignableListItem(ne))}return de},wt.parseAssignableListItem=function(S){var N=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(N),N},wt.parseBindingListItem=function(S){return S},wt.parseMaybeDefault=function(S,N,W){if(W=W||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return W;var ne=this.startNodeAt(S,N);return ne.left=W,ne.right=this.parseMaybeAssign(),this.finishNode(ne,"AssignmentPattern")},wt.checkLValSimple=function(S,N,W){N===void 0&&(N=Et);var ne=N!==Et;switch(S.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(S.name)&&this.raiseRecoverable(S.start,(ne?"Binding ":"Assigning to ")+S.name+" in strict mode"),ne&&(N===re&&S.name==="let"&&this.raiseRecoverable(S.start,"let is disallowed as a lexically bound name"),W&&(U(W,S.name)&&this.raiseRecoverable(S.start,"Argument name clash"),W[S.name]=!0),N!==se&&this.declareName(S.name,N,S.start));break;case"ChainExpression":this.raiseRecoverable(S.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":ne&&this.raiseRecoverable(S.start,"Binding member expression");break;case"ParenthesizedExpression":return ne&&this.raiseRecoverable(S.start,"Binding parenthesized expression"),this.checkLValSimple(S.expression,N,W);default:this.raise(S.start,(ne?"Binding":"Assigning to")+" rvalue")}},wt.checkLValPattern=function(S,N,W){switch(N===void 0&&(N=Et),S.type){case"ObjectPattern":for(var ne=0,de=S.properties;ne<de.length;ne+=1){var Le=de[ne];this.checkLValInnerPattern(Le,N,W)}break;case"ArrayPattern":for(var Xe=0,It=S.elements;Xe<It.length;Xe+=1){var Bt=It[Xe];Bt&&this.checkLValInnerPattern(Bt,N,W)}break;default:this.checkLValSimple(S,N,W)}},wt.checkLValInnerPattern=function(S,N,W){switch(N===void 0&&(N=Et),S.type){case"Property":this.checkLValInnerPattern(S.value,N,W);break;case"AssignmentPattern":this.checkLValPattern(S.left,N,W);break;case"RestElement":this.checkLValPattern(S.argument,N,W);break;default:this.checkLValPattern(S,N,W)}};var Wt=function(N,W,ne,de,Le){this.token=N,this.isExpr=!!W,this.preserveSpace=!!ne,this.override=de,this.generator=!!Le},ut={b_stat:new Wt("{",!1),b_expr:new Wt("{",!0),b_tmpl:new Wt("${",!1),p_stat:new Wt("(",!1),p_expr:new Wt("(",!0),q_tmpl:new Wt("`",!0,!0,function(S){return S.tryReadTemplateToken()}),f_stat:new Wt("function",!1),f_expr:new Wt("function",!0),f_expr_gen:new Wt("function",!0,!1,null,!0),f_gen:new Wt("function",!1,!1,null,!0)},gt=be.prototype;gt.initialContext=function(){return[ut.b_stat]},gt.curContext=function(){return this.context[this.context.length-1]},gt.braceIsBlock=function(S){var N=this.curContext();return N===ut.f_expr||N===ut.f_stat?!0:S===w.colon&&(N===ut.b_stat||N===ut.b_expr)?!N.isExpr:S===w._return||S===w.name&&this.exprAllowed?A.test(this.input.slice(this.lastTokEnd,this.start)):S===w._else||S===w.semi||S===w.eof||S===w.parenR||S===w.arrow?!0:S===w.braceL?N===ut.b_stat:S===w._var||S===w._const||S===w.name?!1:!this.exprAllowed},gt.inGeneratorContext=function(){for(var S=this.context.length-1;S>=1;S--){var N=this.context[S];if(N.token==="function")return N.generator}return!1},gt.updateContext=function(S){var N,W=this.type;W.keyword&&S===w.dot?this.exprAllowed=!1:(N=W.updateContext)?N.call(this,S):this.exprAllowed=W.beforeExpr},gt.overrideContext=function(S){this.curContext()!==S&&(this.context[this.context.length-1]=S)},w.parenR.updateContext=w.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var S=this.context.pop();S===ut.b_stat&&this.curContext().token==="function"&&(S=this.context.pop()),this.exprAllowed=!S.isExpr},w.braceL.updateContext=function(S){this.context.push(this.braceIsBlock(S)?ut.b_stat:ut.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(ut.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(S){var N=S===w._if||S===w._for||S===w._with||S===w._while;this.context.push(N?ut.p_stat:ut.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(S){S.beforeExpr&&S!==w._else&&!(S===w.semi&&this.curContext()!==ut.p_stat)&&!(S===w._return&&A.test(this.input.slice(this.lastTokEnd,this.start)))&&!((S===w.colon||S===w.braceL)&&this.curContext()===ut.b_stat)?this.context.push(ut.f_expr):this.context.push(ut.f_stat),this.exprAllowed=!1},w.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},w.backQuote.updateContext=function(){this.curContext()===ut.q_tmpl?this.context.pop():this.context.push(ut.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(S){if(S===w._function){var N=this.context.length-1;this.context[N]===ut.f_expr?this.context[N]=ut.f_expr_gen:this.context[N]=ut.f_gen}this.exprAllowed=!0},w.name.updateContext=function(S){var N=!1;this.options.ecmaVersion>=6&&S!==w.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(N=!0),this.exprAllowed=N};var Mt=be.prototype;Mt.checkPropClash=function(S,N,W){if(!(this.options.ecmaVersion>=9&&S.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(S.computed||S.method||S.shorthand))){var ne=S.key,de;switch(ne.type){case"Identifier":de=ne.name;break;case"Literal":de=String(ne.value);break;default:return}var Le=S.kind;if(this.options.ecmaVersion>=6){de==="__proto__"&&Le==="init"&&(N.proto&&(W?W.doubleProto<0&&(W.doubleProto=ne.start):this.raiseRecoverable(ne.start,"Redefinition of __proto__ property")),N.proto=!0);return}de="$"+de;var Xe=N[de];if(Xe){var It;Le==="init"?It=this.strict&&Xe.init||Xe.get||Xe.set:It=Xe.init||Xe[Le],It&&this.raiseRecoverable(ne.start,"Redefinition of property")}else Xe=N[de]={init:!1,get:!1,set:!1};Xe[Le]=!0}},Mt.parseExpression=function(S,N){var W=this.start,ne=this.startLoc,de=this.parseMaybeAssign(S,N);if(this.type===w.comma){var Le=this.startNodeAt(W,ne);for(Le.expressions=[de];this.eat(w.comma);)Le.expressions.push(this.parseMaybeAssign(S,N));return this.finishNode(Le,"SequenceExpression")}return de},Mt.parseMaybeAssign=function(S,N,W){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(S);this.exprAllowed=!1}var ne=!1,de=-1,Le=-1,Xe=-1;N?(de=N.parenthesizedAssign,Le=N.trailingComma,Xe=N.doubleProto,N.parenthesizedAssign=N.trailingComma=-1):(N=new mt,ne=!0);var It=this.start,Bt=this.startLoc;(this.type===w.parenL||this.type===w.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=S==="await");var mn=this.parseMaybeConditional(S,N);if(W&&(mn=W.call(this,mn,It,Bt)),this.type.isAssign){var En=this.startNodeAt(It,Bt);return En.operator=this.value,this.type===w.eq&&(mn=this.toAssignable(mn,!1,N)),ne||(N.parenthesizedAssign=N.trailingComma=N.doubleProto=-1),N.shorthandAssign>=mn.start&&(N.shorthandAssign=-1),this.type===w.eq?this.checkLValPattern(mn):this.checkLValSimple(mn),En.left=mn,this.next(),En.right=this.parseMaybeAssign(S),Xe>-1&&(N.doubleProto=Xe),this.finishNode(En,"AssignmentExpression")}else ne&&this.checkExpressionErrors(N,!0);return de>-1&&(N.parenthesizedAssign=de),Le>-1&&(N.trailingComma=Le),mn},Mt.parseMaybeConditional=function(S,N){var W=this.start,ne=this.startLoc,de=this.parseExprOps(S,N);if(this.checkExpressionErrors(N))return de;if(this.eat(w.question)){var Le=this.startNodeAt(W,ne);return Le.test=de,Le.consequent=this.parseMaybeAssign(),this.expect(w.colon),Le.alternate=this.parseMaybeAssign(S),this.finishNode(Le,"ConditionalExpression")}return de},Mt.parseExprOps=function(S,N){var W=this.start,ne=this.startLoc,de=this.parseMaybeUnary(N,!1,!1,S);return this.checkExpressionErrors(N)||de.start===W&&de.type==="ArrowFunctionExpression"?de:this.parseExprOp(de,W,ne,-1,S)},Mt.parseExprOp=function(S,N,W,ne,de){var Le=this.type.binop;if(Le!=null&&(!de||this.type!==w._in)&&Le>ne){var Xe=this.type===w.logicalOR||this.type===w.logicalAND,It=this.type===w.coalesce;It&&(Le=w.logicalAND.binop);var Bt=this.value;this.next();var mn=this.start,En=this.startLoc,Ci=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,de),mn,En,Le,de),Mn=this.buildBinary(N,W,S,Ci,Bt,Xe||It);return(Xe&&this.type===w.coalesce||It&&(this.type===w.logicalOR||this.type===w.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Mn,N,W,ne,de)}return S},Mt.buildBinary=function(S,N,W,ne,de,Le){ne.type==="PrivateIdentifier"&&this.raise(ne.start,"Private identifier can only be left side of binary expression");var Xe=this.startNodeAt(S,N);return Xe.left=W,Xe.operator=de,Xe.right=ne,this.finishNode(Xe,Le?"LogicalExpression":"BinaryExpression")},Mt.parseMaybeUnary=function(S,N,W,ne){var de=this.start,Le=this.startLoc,Xe;if(this.isContextual("await")&&this.canAwait)Xe=this.parseAwait(ne),N=!0;else if(this.type.prefix){var It=this.startNode(),Bt=this.type===w.incDec;It.operator=this.value,It.prefix=!0,this.next(),It.argument=this.parseMaybeUnary(null,!0,Bt,ne),this.checkExpressionErrors(S,!0),Bt?this.checkLValSimple(It.argument):this.strict&&It.operator==="delete"&&gn(It.argument)?this.raiseRecoverable(It.start,"Deleting local variable in strict mode"):It.operator==="delete"&&Vn(It.argument)?this.raiseRecoverable(It.start,"Private fields can not be deleted"):N=!0,Xe=this.finishNode(It,Bt?"UpdateExpression":"UnaryExpression")}else if(!N&&this.type===w.privateId)(ne||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Xe=this.parsePrivateIdent(),this.type!==w._in&&this.unexpected();else{if(Xe=this.parseExprSubscripts(S,ne),this.checkExpressionErrors(S))return Xe;for(;this.type.postfix&&!this.canInsertSemicolon();){var mn=this.startNodeAt(de,Le);mn.operator=this.value,mn.prefix=!1,mn.argument=Xe,this.checkLValSimple(Xe),this.next(),Xe=this.finishNode(mn,"UpdateExpression")}}if(!W&&this.eat(w.starstar))if(N)this.unexpected(this.lastTokStart);else return this.buildBinary(de,Le,Xe,this.parseMaybeUnary(null,!1,!1,ne),"**",!1);else return Xe};function gn(S){return S.type==="Identifier"||S.type==="ParenthesizedExpression"&&gn(S.expression)}function Vn(S){return S.type==="MemberExpression"&&S.property.type==="PrivateIdentifier"||S.type==="ChainExpression"&&Vn(S.expression)||S.type==="ParenthesizedExpression"&&Vn(S.expression)}Mt.parseExprSubscripts=function(S,N){var W=this.start,ne=this.startLoc,de=this.parseExprAtom(S,N);if(de.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return de;var Le=this.parseSubscripts(de,W,ne,!1,N);return S&&Le.type==="MemberExpression"&&(S.parenthesizedAssign>=Le.start&&(S.parenthesizedAssign=-1),S.parenthesizedBind>=Le.start&&(S.parenthesizedBind=-1),S.trailingComma>=Le.start&&(S.trailingComma=-1)),Le},Mt.parseSubscripts=function(S,N,W,ne,de){for(var Le=this.options.ecmaVersion>=8&&S.type==="Identifier"&&S.name==="async"&&this.lastTokEnd===S.end&&!this.canInsertSemicolon()&&S.end-S.start===5&&this.potentialArrowAt===S.start,Xe=!1;;){var It=this.parseSubscript(S,N,W,ne,Le,Xe,de);if(It.optional&&(Xe=!0),It===S||It.type==="ArrowFunctionExpression"){if(Xe){var Bt=this.startNodeAt(N,W);Bt.expression=It,It=this.finishNode(Bt,"ChainExpression")}return It}S=It}},Mt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(w.arrow)},Mt.parseSubscriptAsyncArrow=function(S,N,W,ne){return this.parseArrowExpression(this.startNodeAt(S,N),W,!0,ne)},Mt.parseSubscript=function(S,N,W,ne,de,Le,Xe){var It=this.options.ecmaVersion>=11,Bt=It&&this.eat(w.questionDot);ne&&Bt&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var mn=this.eat(w.bracketL);if(mn||Bt&&this.type!==w.parenL&&this.type!==w.backQuote||this.eat(w.dot)){var En=this.startNodeAt(N,W);En.object=S,mn?(En.property=this.parseExpression(),this.expect(w.bracketR)):this.type===w.privateId&&S.type!=="Super"?En.property=this.parsePrivateIdent():En.property=this.parseIdent(this.options.allowReserved!=="never"),En.computed=!!mn,It&&(En.optional=Bt),S=this.finishNode(En,"MemberExpression")}else if(!ne&&this.eat(w.parenL)){var Ci=new mt,Mn=this.yieldPos,Ei=this.awaitPos,va=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var cr=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,Ci);if(de&&!Bt&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Ci,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Mn,this.awaitPos=Ei,this.awaitIdentPos=va,this.parseSubscriptAsyncArrow(N,W,cr,Xe);this.checkExpressionErrors(Ci,!0),this.yieldPos=Mn||this.yieldPos,this.awaitPos=Ei||this.awaitPos,this.awaitIdentPos=va||this.awaitIdentPos;var Ki=this.startNodeAt(N,W);Ki.callee=S,Ki.arguments=cr,It&&(Ki.optional=Bt),S=this.finishNode(Ki,"CallExpression")}else if(this.type===w.backQuote){(Bt||Le)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Ji=this.startNodeAt(N,W);Ji.tag=S,Ji.quasi=this.parseTemplate({isTagged:!0}),S=this.finishNode(Ji,"TaggedTemplateExpression")}return S},Mt.parseExprAtom=function(S,N,W){this.type===w.slash&&this.readRegexp();var ne,de=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),ne=this.startNode(),this.next(),this.type===w.parenL&&!this.allowDirectSuper&&this.raise(ne.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(ne,"Super");case w._this:return ne=this.startNode(),this.next(),this.finishNode(ne,"ThisExpression");case w.name:var Le=this.start,Xe=this.startLoc,It=this.containsEsc,Bt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!It&&Bt.name==="async"&&!this.canInsertSemicolon()&&this.eat(w._function))return this.overrideContext(ut.f_expr),this.parseFunction(this.startNodeAt(Le,Xe),0,!1,!0,N);if(de&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(Le,Xe),[Bt],!1,N);if(this.options.ecmaVersion>=8&&Bt.name==="async"&&this.type===w.name&&!It&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Bt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(w.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Le,Xe),[Bt],!0,N)}return Bt;case w.regexp:var mn=this.value;return ne=this.parseLiteral(mn.value),ne.regex={pattern:mn.pattern,flags:mn.flags},ne;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return ne=this.startNode(),ne.value=this.type===w._null?null:this.type===w._true,ne.raw=this.type.keyword,this.next(),this.finishNode(ne,"Literal");case w.parenL:var En=this.start,Ci=this.parseParenAndDistinguishExpression(de,N);return S&&(S.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Ci)&&(S.parenthesizedAssign=En),S.parenthesizedBind<0&&(S.parenthesizedBind=En)),Ci;case w.bracketL:return ne=this.startNode(),this.next(),ne.elements=this.parseExprList(w.bracketR,!0,!0,S),this.finishNode(ne,"ArrayExpression");case w.braceL:return this.overrideContext(ut.b_expr),this.parseObj(!1,S);case w._function:return ne=this.startNode(),this.next(),this.parseFunction(ne,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>=11?this.parseExprImport(W):this.unexpected();default:return this.parseExprAtomDefault()}},Mt.parseExprAtomDefault=function(){this.unexpected()},Mt.parseExprImport=function(S){var N=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===w.parenL&&!S)return this.parseDynamicImport(N);if(this.type===w.dot){var W=this.startNodeAt(N.start,N.loc&&N.loc.start);return W.name="import",N.meta=this.finishNode(W,"Identifier"),this.parseImportMeta(N)}else this.unexpected()},Mt.parseDynamicImport=function(S){if(this.next(),S.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(w.parenR)?S.options=null:(this.expect(w.comma),this.afterTrailingComma(w.parenR)?S.options=null:(S.options=this.parseMaybeAssign(),this.eat(w.parenR)||(this.expect(w.comma),this.afterTrailingComma(w.parenR)||this.unexpected())));else if(!this.eat(w.parenR)){var N=this.start;this.eat(w.comma)&&this.eat(w.parenR)?this.raiseRecoverable(N,"Trailing comma is not allowed in import()"):this.unexpected(N)}return this.finishNode(S,"ImportExpression")},Mt.parseImportMeta=function(S){this.next();var N=this.containsEsc;return S.property=this.parseIdent(!0),S.property.name!=="meta"&&this.raiseRecoverable(S.property.start,"The only valid meta property for import is 'import.meta'"),N&&this.raiseRecoverable(S.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(S.start,"Cannot use 'import.meta' outside a module"),this.finishNode(S,"MetaProperty")},Mt.parseLiteral=function(S){var N=this.startNode();return N.value=S,N.raw=this.input.slice(this.start,this.end),N.raw.charCodeAt(N.raw.length-1)===110&&(N.bigint=N.value!=null?N.value.toString():N.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(N,"Literal")},Mt.parseParenExpression=function(){this.expect(w.parenL);var S=this.parseExpression();return this.expect(w.parenR),S},Mt.shouldParseArrow=function(S){return!this.canInsertSemicolon()},Mt.parseParenAndDistinguishExpression=function(S,N){var W=this.start,ne=this.startLoc,de,Le=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Xe=this.start,It=this.startLoc,Bt=[],mn=!0,En=!1,Ci=new mt,Mn=this.yieldPos,Ei=this.awaitPos,va;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;)if(mn?mn=!1:this.expect(w.comma),Le&&this.afterTrailingComma(w.parenR,!0)){En=!0;break}else if(this.type===w.ellipsis){va=this.start,Bt.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Bt.push(this.parseMaybeAssign(!1,Ci,this.parseParenItem));var cr=this.lastTokEnd,Ki=this.lastTokEndLoc;if(this.expect(w.parenR),S&&this.shouldParseArrow(Bt)&&this.eat(w.arrow))return this.checkPatternErrors(Ci,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Mn,this.awaitPos=Ei,this.parseParenArrowList(W,ne,Bt,N);(!Bt.length||En)&&this.unexpected(this.lastTokStart),va&&this.unexpected(va),this.checkExpressionErrors(Ci,!0),this.yieldPos=Mn||this.yieldPos,this.awaitPos=Ei||this.awaitPos,Bt.length>1?(de=this.startNodeAt(Xe,It),de.expressions=Bt,this.finishNodeAt(de,"SequenceExpression",cr,Ki)):de=Bt[0]}else de=this.parseParenExpression();if(this.options.preserveParens){var Ji=this.startNodeAt(W,ne);return Ji.expression=de,this.finishNode(Ji,"ParenthesizedExpression")}else return de},Mt.parseParenItem=function(S){return S},Mt.parseParenArrowList=function(S,N,W,ne){return this.parseArrowExpression(this.startNodeAt(S,N),W,!1,ne)};var zn=[];Mt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var S=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===w.dot){var N=this.startNodeAt(S.start,S.loc&&S.loc.start);N.name="new",S.meta=this.finishNode(N,"Identifier"),this.next();var W=this.containsEsc;return S.property=this.parseIdent(!0),S.property.name!=="target"&&this.raiseRecoverable(S.property.start,"The only valid meta property for new is 'new.target'"),W&&this.raiseRecoverable(S.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(S.start,"'new.target' can only be used in functions and class static block"),this.finishNode(S,"MetaProperty")}var ne=this.start,de=this.startLoc;return S.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),ne,de,!0,!1),this.eat(w.parenL)?S.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):S.arguments=zn,this.finishNode(S,"NewExpression")},Mt.parseTemplateElement=function(S){var N=S.isTagged,W=this.startNode();return this.type===w.invalidTemplate?(N||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),W.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):W.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),W.tail=this.type===w.backQuote,this.finishNode(W,"TemplateElement")},Mt.parseTemplate=function(S){S===void 0&&(S={});var N=S.isTagged;N===void 0&&(N=!1);var W=this.startNode();this.next(),W.expressions=[];var ne=this.parseTemplateElement({isTagged:N});for(W.quasis=[ne];!ne.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),W.expressions.push(this.parseExpression()),this.expect(w.braceR),W.quasis.push(ne=this.parseTemplateElement({isTagged:N}));return this.next(),this.finishNode(W,"TemplateLiteral")},Mt.isAsyncProp=function(S){return!S.computed&&S.key.type==="Identifier"&&S.key.name==="async"&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!A.test(this.input.slice(this.lastTokEnd,this.start))},Mt.parseObj=function(S,N){var W=this.startNode(),ne=!0,de={};for(W.properties=[],this.next();!this.eat(w.braceR);){if(ne)ne=!1;else if(this.expect(w.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(w.braceR))break;var Le=this.parseProperty(S,N);S||this.checkPropClash(Le,de,N),W.properties.push(Le)}return this.finishNode(W,S?"ObjectPattern":"ObjectExpression")},Mt.parseProperty=function(S,N){var W=this.startNode(),ne,de,Le,Xe;if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return S?(W.argument=this.parseIdent(!1),this.type===w.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(W,"RestElement")):(W.argument=this.parseMaybeAssign(!1,N),this.type===w.comma&&N&&N.trailingComma<0&&(N.trailingComma=this.start),this.finishNode(W,"SpreadElement"));this.options.ecmaVersion>=6&&(W.method=!1,W.shorthand=!1,(S||N)&&(Le=this.start,Xe=this.startLoc),S||(ne=this.eat(w.star)));var It=this.containsEsc;return this.parsePropertyName(W),!S&&!It&&this.options.ecmaVersion>=8&&!ne&&this.isAsyncProp(W)?(de=!0,ne=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(W)):de=!1,this.parsePropertyValue(W,S,ne,de,Le,Xe,N,It),this.finishNode(W,"Property")},Mt.parseGetterSetter=function(S){var N=S.key.name;this.parsePropertyName(S),S.value=this.parseMethod(!1),S.kind=N;var W=S.kind==="get"?0:1;if(S.value.params.length!==W){var ne=S.value.start;S.kind==="get"?this.raiseRecoverable(ne,"getter should have no params"):this.raiseRecoverable(ne,"setter should have exactly one param")}else S.kind==="set"&&S.value.params[0].type==="RestElement"&&this.raiseRecoverable(S.value.params[0].start,"Setter cannot use rest params")},Mt.parsePropertyValue=function(S,N,W,ne,de,Le,Xe,It){(W||ne)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon)?(S.value=N?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Xe),S.kind="init"):this.options.ecmaVersion>=6&&this.type===w.parenL?(N&&this.unexpected(),S.method=!0,S.value=this.parseMethod(W,ne),S.kind="init"):!N&&!It&&this.options.ecmaVersion>=5&&!S.computed&&S.key.type==="Identifier"&&(S.key.name==="get"||S.key.name==="set")&&this.type!==w.comma&&this.type!==w.braceR&&this.type!==w.eq?((W||ne)&&this.unexpected(),this.parseGetterSetter(S)):this.options.ecmaVersion>=6&&!S.computed&&S.key.type==="Identifier"?((W||ne)&&this.unexpected(),this.checkUnreserved(S.key),S.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=de),N?S.value=this.parseMaybeDefault(de,Le,this.copyNode(S.key)):this.type===w.eq&&Xe?(Xe.shorthandAssign<0&&(Xe.shorthandAssign=this.start),S.value=this.parseMaybeDefault(de,Le,this.copyNode(S.key))):S.value=this.copyNode(S.key),S.kind="init",S.shorthand=!0):this.unexpected()},Mt.parsePropertyName=function(S){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return S.computed=!0,S.key=this.parseMaybeAssign(),this.expect(w.bracketR),S.key;S.computed=!1}return S.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Mt.initFunction=function(S){S.id=null,this.options.ecmaVersion>=6&&(S.generator=S.expression=!1),this.options.ecmaVersion>=8&&(S.async=!1)},Mt.parseMethod=function(S,N,W){var ne=this.startNode(),de=this.yieldPos,Le=this.awaitPos,Xe=this.awaitIdentPos;return this.initFunction(ne),this.options.ecmaVersion>=6&&(ne.generator=S),this.options.ecmaVersion>=8&&(ne.async=!!N),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(We(N,ne.generator)|je|(W?ot:0)),this.expect(w.parenL),ne.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(ne,!1,!0,!1),this.yieldPos=de,this.awaitPos=Le,this.awaitIdentPos=Xe,this.finishNode(ne,"FunctionExpression")},Mt.parseArrowExpression=function(S,N,W,ne){var de=this.yieldPos,Le=this.awaitPos,Xe=this.awaitIdentPos;return this.enterScope(We(W,!1)|fe),this.initFunction(S),this.options.ecmaVersion>=8&&(S.async=!!W),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,S.params=this.toAssignableList(N,!0),this.parseFunctionBody(S,!0,!1,ne),this.yieldPos=de,this.awaitPos=Le,this.awaitIdentPos=Xe,this.finishNode(S,"ArrowFunctionExpression")},Mt.parseFunctionBody=function(S,N,W,ne){var de=N&&this.type!==w.braceL,Le=this.strict,Xe=!1;if(de)S.body=this.parseMaybeAssign(ne),S.expression=!0,this.checkParams(S,!1);else{var It=this.options.ecmaVersion>=7&&!this.isSimpleParamList(S.params);(!Le||It)&&(Xe=this.strictDirective(this.end),Xe&&It&&this.raiseRecoverable(S.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Bt=this.labels;this.labels=[],Xe&&(this.strict=!0),this.checkParams(S,!Le&&!Xe&&!N&&!W&&this.isSimpleParamList(S.params)),this.strict&&S.id&&this.checkLValSimple(S.id,se),S.body=this.parseBlock(!1,void 0,Xe&&!Le),S.expression=!1,this.adaptDirectivePrologue(S.body.body),this.labels=Bt}this.exitScope()},Mt.isSimpleParamList=function(S){for(var N=0,W=S;N<W.length;N+=1){var ne=W[N];if(ne.type!=="Identifier")return!1}return!0},Mt.checkParams=function(S,N){for(var W=Object.create(null),ne=0,de=S.params;ne<de.length;ne+=1){var Le=de[ne];this.checkLValInnerPattern(Le,vt,N?null:W)}},Mt.parseExprList=function(S,N,W,ne){for(var de=[],Le=!0;!this.eat(S);){if(Le)Le=!1;else if(this.expect(w.comma),N&&this.afterTrailingComma(S))break;var Xe=void 0;W&&this.type===w.comma?Xe=null:this.type===w.ellipsis?(Xe=this.parseSpread(ne),ne&&this.type===w.comma&&ne.trailingComma<0&&(ne.trailingComma=this.start)):Xe=this.parseMaybeAssign(!1,ne),de.push(Xe)}return de},Mt.checkUnreserved=function(S){var N=S.start,W=S.end,ne=S.name;if(this.inGenerator&&ne==="yield"&&this.raiseRecoverable(N,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&ne==="await"&&this.raiseRecoverable(N,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Oe)&&ne==="arguments"&&this.raiseRecoverable(N,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(ne==="arguments"||ne==="await")&&this.raise(N,"Cannot use "+ne+" in class static initialization block"),this.keywords.test(ne)&&this.raise(N,"Unexpected keyword '"+ne+"'"),!(this.options.ecmaVersion<6&&this.input.slice(N,W).indexOf("\\")!==-1)){var de=this.strict?this.reservedWordsStrict:this.reservedWords;de.test(ne)&&(!this.inAsync&&ne==="await"&&this.raiseRecoverable(N,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(N,"The keyword '"+ne+"' is reserved"))}},Mt.parseIdent=function(S){var N=this.parseIdentNode();return this.next(!!S),this.finishNode(N,"Identifier"),S||(this.checkUnreserved(N),N.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=N.start)),N},Mt.parseIdentNode=function(){var S=this.startNode();return this.type===w.name?S.name=this.value:this.type.keyword?(S.name=this.type.keyword,(S.name==="class"||S.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=w.name):this.unexpected(),S},Mt.parsePrivateIdent=function(){var S=this.startNode();return this.type===w.privateId?S.name=this.value:this.unexpected(),this.next(),this.finishNode(S,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(S.start,"Private field '#"+S.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(S)),S},Mt.parseYield=function(S){this.yieldPos||(this.yieldPos=this.start);var N=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(N.delegate=!1,N.argument=null):(N.delegate=this.eat(w.star),N.argument=this.parseMaybeAssign(S)),this.finishNode(N,"YieldExpression")},Mt.parseAwait=function(S){this.awaitPos||(this.awaitPos=this.start);var N=this.startNode();return this.next(),N.argument=this.parseMaybeUnary(null,!0,!1,S),this.finishNode(N,"AwaitExpression")};var Yi=be.prototype;Yi.raise=function(S,N){var W=Me(this.input,S);N+=" ("+W.line+":"+W.column+")",this.sourceFile&&(N+=" in "+this.sourceFile);var ne=new SyntaxError(N);throw ne.pos=S,ne.loc=W,ne.raisedAt=this.pos,ne},Yi.raiseRecoverable=Yi.raise,Yi.curPosition=function(){if(this.options.locations)return new he(this.curLine,this.pos-this.lineStart)};var Gn=be.prototype,ea=function(N){this.flags=N,this.var=[],this.lexical=[],this.functions=[]};Gn.enterScope=function(S){this.scopeStack.push(new ea(S))},Gn.exitScope=function(){this.scopeStack.pop()},Gn.treatFunctionsAsVarInScope=function(S){return S.flags&$e||!this.inModule&&S.flags&Ge},Gn.declareName=function(S,N,W){var ne=!1;if(N===re){var de=this.currentScope();ne=de.lexical.indexOf(S)>-1||de.functions.indexOf(S)>-1||de.var.indexOf(S)>-1,de.lexical.push(S),this.inModule&&de.flags&Ge&&delete this.undefinedExports[S]}else if(N===ue){var Le=this.currentScope();Le.lexical.push(S)}else if(N===J){var Xe=this.currentScope();this.treatFunctionsAsVar?ne=Xe.lexical.indexOf(S)>-1:ne=Xe.lexical.indexOf(S)>-1||Xe.var.indexOf(S)>-1,Xe.functions.push(S)}else for(var It=this.scopeStack.length-1;It>=0;--It){var Bt=this.scopeStack[It];if(Bt.lexical.indexOf(S)>-1&&!(Bt.flags&Ve&&Bt.lexical[0]===S)||!this.treatFunctionsAsVarInScope(Bt)&&Bt.functions.indexOf(S)>-1){ne=!0;break}if(Bt.var.push(S),this.inModule&&Bt.flags&Ge&&delete this.undefinedExports[S],Bt.flags&Oe)break}ne&&this.raiseRecoverable(W,"Identifier '"+S+"' has already been declared")},Gn.checkLocalExport=function(S){this.scopeStack[0].lexical.indexOf(S.name)===-1&&this.scopeStack[0].var.indexOf(S.name)===-1&&(this.undefinedExports[S.name]=S)},Gn.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Gn.currentVarScope=function(){for(var S=this.scopeStack.length-1;;S--){var N=this.scopeStack[S];if(N.flags&(Oe|Ue|Te))return N}},Gn.currentThisScope=function(){for(var S=this.scopeStack.length-1;;S--){var N=this.scopeStack[S];if(N.flags&(Oe|Ue|Te)&&!(N.flags&fe))return N}};var Ni=function(N,W,ne){this.type="",this.start=W,this.end=0,N.options.locations&&(this.loc=new $(N,ne)),N.options.directSourceFile&&(this.sourceFile=N.options.directSourceFile),N.options.ranges&&(this.range=[W,0])},nr=be.prototype;nr.startNode=function(){return new Ni(this,this.start,this.startLoc)},nr.startNodeAt=function(S,N){return new Ni(this,S,N)};function wi(S,N,W,ne){return S.type=N,S.end=W,this.options.locations&&(S.loc.end=ne),this.options.ranges&&(S.range[1]=W),S}nr.finishNode=function(S,N){return wi.call(this,S,N,this.lastTokEnd,this.lastTokEndLoc)},nr.finishNodeAt=function(S,N,W,ne){return wi.call(this,S,N,W,ne)},nr.copyNode=function(S){var N=new Ni(this,S.start,this.startLoc);for(var W in S)N[W]=S[W];return N};var ta="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",zi="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",dn=zi+" Extended_Pictographic",ya=dn,Ii=ya+" EBase EComp EMod EPres ExtPict",ie=Ii,oe=ie,Ae={9:zi,10:dn,11:ya,12:Ii,13:ie,14:oe},qe="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",at={9:"",10:"",11:"",12:"",13:"",14:qe},Ze="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Tt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Q=Tt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",me=Q+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",_e=me+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ee=_e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ye=Ee+" "+ta,pt={9:Tt,10:Q,11:me,12:_e,13:Ee,14:ye},it={};function dt(S){var N=it[S]={binary:X(Ae[S]+" "+Ze),binaryOfStrings:X(at[S]),nonBinary:{General_Category:X(Ze),Script:X(pt[S])}};N.nonBinary.Script_Extensions=N.nonBinary.Script,N.nonBinary.gc=N.nonBinary.General_Category,N.nonBinary.sc=N.nonBinary.Script,N.nonBinary.scx=N.nonBinary.Script_Extensions}for(var yt=0,Dt=[9,10,11,12,13,14];yt<Dt.length;yt+=1){var qt=Dt[yt];dt(qt)}var Ke=be.prototype,nn=function(N,W){this.parent=N,this.base=W||this};nn.prototype.separatedFrom=function(N){for(var W=this;W;W=W.parent)for(var ne=N;ne;ne=ne.parent)if(W.base===ne.base&&W!==ne)return!0;return!1},nn.prototype.sibling=function(){return new nn(this.parent,this.base)};var cn=function(N){this.parser=N,this.validFlags="gim"+(N.options.ecmaVersion>=6?"uy":"")+(N.options.ecmaVersion>=9?"s":"")+(N.options.ecmaVersion>=13?"d":"")+(N.options.ecmaVersion>=15?"v":""),this.unicodeProperties=it[N.options.ecmaVersion>=14?14:N.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};cn.prototype.reset=function(N,W,ne){var de=ne.indexOf("v")!==-1,Le=ne.indexOf("u")!==-1;this.start=N|0,this.source=W+"",this.flags=ne,de&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Le&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Le&&this.parser.options.ecmaVersion>=9)},cn.prototype.raise=function(N){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+N)},cn.prototype.at=function(N,W){W===void 0&&(W=!1);var ne=this.source,de=ne.length;if(N>=de)return-1;var Le=ne.charCodeAt(N);if(!(W||this.switchU)||Le<=55295||Le>=57344||N+1>=de)return Le;var Xe=ne.charCodeAt(N+1);return Xe>=56320&&Xe<=57343?(Le<<10)+Xe-56613888:Le},cn.prototype.nextIndex=function(N,W){W===void 0&&(W=!1);var ne=this.source,de=ne.length;if(N>=de)return de;var Le=ne.charCodeAt(N),Xe;return!(W||this.switchU)||Le<=55295||Le>=57344||N+1>=de||(Xe=ne.charCodeAt(N+1))<56320||Xe>57343?N+1:N+2},cn.prototype.current=function(N){return N===void 0&&(N=!1),this.at(this.pos,N)},cn.prototype.lookahead=function(N){return N===void 0&&(N=!1),this.at(this.nextIndex(this.pos,N),N)},cn.prototype.advance=function(N){N===void 0&&(N=!1),this.pos=this.nextIndex(this.pos,N)},cn.prototype.eat=function(N,W){return W===void 0&&(W=!1),this.current(W)===N?(this.advance(W),!0):!1},cn.prototype.eatChars=function(N,W){W===void 0&&(W=!1);for(var ne=this.pos,de=0,Le=N;de<Le.length;de+=1){var Xe=Le[de],It=this.at(ne,W);if(It===-1||It!==Xe)return!1;ne=this.nextIndex(ne,W)}return this.pos=ne,!0},Ke.validateRegExpFlags=function(S){for(var N=S.validFlags,W=S.flags,ne=!1,de=!1,Le=0;Le<W.length;Le++){var Xe=W.charAt(Le);N.indexOf(Xe)===-1&&this.raise(S.start,"Invalid regular expression flag"),W.indexOf(Xe,Le+1)>-1&&this.raise(S.start,"Duplicate regular expression flag"),Xe==="u"&&(ne=!0),Xe==="v"&&(de=!0)}this.options.ecmaVersion>=15&&ne&&de&&this.raise(S.start,"Invalid regular expression flag")};function un(S){for(var N in S)return!0;return!1}Ke.validateRegExpPattern=function(S){this.regexp_pattern(S),!S.switchN&&this.options.ecmaVersion>=9&&un(S.groupNames)&&(S.switchN=!0,this.regexp_pattern(S))},Ke.regexp_pattern=function(S){S.pos=0,S.lastIntValue=0,S.lastStringValue="",S.lastAssertionIsQuantifiable=!1,S.numCapturingParens=0,S.maxBackReference=0,S.groupNames=Object.create(null),S.backReferenceNames.length=0,S.branchID=null,this.regexp_disjunction(S),S.pos!==S.source.length&&(S.eat(41)&&S.raise("Unmatched ')'"),(S.eat(93)||S.eat(125))&&S.raise("Lone quantifier brackets")),S.maxBackReference>S.numCapturingParens&&S.raise("Invalid escape");for(var N=0,W=S.backReferenceNames;N<W.length;N+=1){var ne=W[N];S.groupNames[ne]||S.raise("Invalid named capture referenced")}},Ke.regexp_disjunction=function(S){var N=this.options.ecmaVersion>=16;for(N&&(S.branchID=new nn(S.branchID,null)),this.regexp_alternative(S);S.eat(124);)N&&(S.branchID=S.branchID.sibling()),this.regexp_alternative(S);N&&(S.branchID=S.branchID.parent),this.regexp_eatQuantifier(S,!0)&&S.raise("Nothing to repeat"),S.eat(123)&&S.raise("Lone quantifier brackets")},Ke.regexp_alternative=function(S){for(;S.pos<S.source.length&&this.regexp_eatTerm(S););},Ke.regexp_eatTerm=function(S){return this.regexp_eatAssertion(S)?(S.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(S)&&S.switchU&&S.raise("Invalid quantifier"),!0):(S.switchU?this.regexp_eatAtom(S):this.regexp_eatExtendedAtom(S))?(this.regexp_eatQuantifier(S),!0):!1},Ke.regexp_eatAssertion=function(S){var N=S.pos;if(S.lastAssertionIsQuantifiable=!1,S.eat(94)||S.eat(36))return!0;if(S.eat(92)){if(S.eat(66)||S.eat(98))return!0;S.pos=N}if(S.eat(40)&&S.eat(63)){var W=!1;if(this.options.ecmaVersion>=9&&(W=S.eat(60)),S.eat(61)||S.eat(33))return this.regexp_disjunction(S),S.eat(41)||S.raise("Unterminated group"),S.lastAssertionIsQuantifiable=!W,!0}return S.pos=N,!1},Ke.regexp_eatQuantifier=function(S,N){return N===void 0&&(N=!1),this.regexp_eatQuantifierPrefix(S,N)?(S.eat(63),!0):!1},Ke.regexp_eatQuantifierPrefix=function(S,N){return S.eat(42)||S.eat(43)||S.eat(63)||this.regexp_eatBracedQuantifier(S,N)},Ke.regexp_eatBracedQuantifier=function(S,N){var W=S.pos;if(S.eat(123)){var ne=0,de=-1;if(this.regexp_eatDecimalDigits(S)&&(ne=S.lastIntValue,S.eat(44)&&this.regexp_eatDecimalDigits(S)&&(de=S.lastIntValue),S.eat(125)))return de!==-1&&de<ne&&!N&&S.raise("numbers out of order in {} quantifier"),!0;S.switchU&&!N&&S.raise("Incomplete quantifier"),S.pos=W}return!1},Ke.regexp_eatAtom=function(S){return this.regexp_eatPatternCharacters(S)||S.eat(46)||this.regexp_eatReverseSolidusAtomEscape(S)||this.regexp_eatCharacterClass(S)||this.regexp_eatUncapturingGroup(S)||this.regexp_eatCapturingGroup(S)},Ke.regexp_eatReverseSolidusAtomEscape=function(S){var N=S.pos;if(S.eat(92)){if(this.regexp_eatAtomEscape(S))return!0;S.pos=N}return!1},Ke.regexp_eatUncapturingGroup=function(S){var N=S.pos;if(S.eat(40)){if(S.eat(63)){if(this.options.ecmaVersion>=16){var W=this.regexp_eatModifiers(S),ne=S.eat(45);if(W||ne){for(var de=0;de<W.length;de++){var Le=W.charAt(de);W.indexOf(Le,de+1)>-1&&S.raise("Duplicate regular expression modifiers")}if(ne){var Xe=this.regexp_eatModifiers(S);!W&&!Xe&&S.current()===58&&S.raise("Invalid regular expression modifiers");for(var It=0;It<Xe.length;It++){var Bt=Xe.charAt(It);(Xe.indexOf(Bt,It+1)>-1||W.indexOf(Bt)>-1)&&S.raise("Duplicate regular expression modifiers")}}}}if(S.eat(58)){if(this.regexp_disjunction(S),S.eat(41))return!0;S.raise("Unterminated group")}}S.pos=N}return!1},Ke.regexp_eatCapturingGroup=function(S){if(S.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(S):S.current()===63&&S.raise("Invalid group"),this.regexp_disjunction(S),S.eat(41))return S.numCapturingParens+=1,!0;S.raise("Unterminated group")}return!1},Ke.regexp_eatModifiers=function(S){for(var N="",W=0;(W=S.current())!==-1&&Dn(W);)N+=z(W),S.advance();return N};function Dn(S){return S===105||S===109||S===115}Ke.regexp_eatExtendedAtom=function(S){return S.eat(46)||this.regexp_eatReverseSolidusAtomEscape(S)||this.regexp_eatCharacterClass(S)||this.regexp_eatUncapturingGroup(S)||this.regexp_eatCapturingGroup(S)||this.regexp_eatInvalidBracedQuantifier(S)||this.regexp_eatExtendedPatternCharacter(S)},Ke.regexp_eatInvalidBracedQuantifier=function(S){return this.regexp_eatBracedQuantifier(S,!0)&&S.raise("Nothing to repeat"),!1},Ke.regexp_eatSyntaxCharacter=function(S){var N=S.current();return Kt(N)?(S.lastIntValue=N,S.advance(),!0):!1};function Kt(S){return S===36||S>=40&&S<=43||S===46||S===63||S>=91&&S<=94||S>=123&&S<=125}Ke.regexp_eatPatternCharacters=function(S){for(var N=S.pos,W=0;(W=S.current())!==-1&&!Kt(W);)S.advance();return S.pos!==N},Ke.regexp_eatExtendedPatternCharacter=function(S){var N=S.current();return N!==-1&&N!==36&&!(N>=40&&N<=43)&&N!==46&&N!==63&&N!==91&&N!==94&&N!==124?(S.advance(),!0):!1},Ke.regexp_groupSpecifier=function(S){if(S.eat(63)){this.regexp_eatGroupName(S)||S.raise("Invalid group");var N=this.options.ecmaVersion>=16,W=S.groupNames[S.lastStringValue];if(W)if(N)for(var ne=0,de=W;ne<de.length;ne+=1){var Le=de[ne];Le.separatedFrom(S.branchID)||S.raise("Duplicate capture group name")}else S.raise("Duplicate capture group name");N?(W||(S.groupNames[S.lastStringValue]=[])).push(S.branchID):S.groupNames[S.lastStringValue]=!0}},Ke.regexp_eatGroupName=function(S){if(S.lastStringValue="",S.eat(60)){if(this.regexp_eatRegExpIdentifierName(S)&&S.eat(62))return!0;S.raise("Invalid capture group name")}return!1},Ke.regexp_eatRegExpIdentifierName=function(S){if(S.lastStringValue="",this.regexp_eatRegExpIdentifierStart(S)){for(S.lastStringValue+=z(S.lastIntValue);this.regexp_eatRegExpIdentifierPart(S);)S.lastStringValue+=z(S.lastIntValue);return!0}return!1},Ke.regexp_eatRegExpIdentifierStart=function(S){var N=S.pos,W=this.options.ecmaVersion>=11,ne=S.current(W);return S.advance(W),ne===92&&this.regexp_eatRegExpUnicodeEscapeSequence(S,W)&&(ne=S.lastIntValue),Yt(ne)?(S.lastIntValue=ne,!0):(S.pos=N,!1)};function Yt(S){return m(S,!0)||S===36||S===95}Ke.regexp_eatRegExpIdentifierPart=function(S){var N=S.pos,W=this.options.ecmaVersion>=11,ne=S.current(W);return S.advance(W),ne===92&&this.regexp_eatRegExpUnicodeEscapeSequence(S,W)&&(ne=S.lastIntValue),Xn(ne)?(S.lastIntValue=ne,!0):(S.pos=N,!1)};function Xn(S){return y(S,!0)||S===36||S===95||S===8204||S===8205}Ke.regexp_eatAtomEscape=function(S){return this.regexp_eatBackReference(S)||this.regexp_eatCharacterClassEscape(S)||this.regexp_eatCharacterEscape(S)||S.switchN&&this.regexp_eatKGroupName(S)?!0:(S.switchU&&(S.current()===99&&S.raise("Invalid unicode escape"),S.raise("Invalid escape")),!1)},Ke.regexp_eatBackReference=function(S){var N=S.pos;if(this.regexp_eatDecimalEscape(S)){var W=S.lastIntValue;if(S.switchU)return W>S.maxBackReference&&(S.maxBackReference=W),!0;if(W<=S.numCapturingParens)return!0;S.pos=N}return!1},Ke.regexp_eatKGroupName=function(S){if(S.eat(107)){if(this.regexp_eatGroupName(S))return S.backReferenceNames.push(S.lastStringValue),!0;S.raise("Invalid named reference")}return!1},Ke.regexp_eatCharacterEscape=function(S){return this.regexp_eatControlEscape(S)||this.regexp_eatCControlLetter(S)||this.regexp_eatZero(S)||this.regexp_eatHexEscapeSequence(S)||this.regexp_eatRegExpUnicodeEscapeSequence(S,!1)||!S.switchU&&this.regexp_eatLegacyOctalEscapeSequence(S)||this.regexp_eatIdentityEscape(S)},Ke.regexp_eatCControlLetter=function(S){var N=S.pos;if(S.eat(99)){if(this.regexp_eatControlLetter(S))return!0;S.pos=N}return!1},Ke.regexp_eatZero=function(S){return S.current()===48&&!mr(S.lookahead())?(S.lastIntValue=0,S.advance(),!0):!1},Ke.regexp_eatControlEscape=function(S){var N=S.current();return N===116?(S.lastIntValue=9,S.advance(),!0):N===110?(S.lastIntValue=10,S.advance(),!0):N===118?(S.lastIntValue=11,S.advance(),!0):N===102?(S.lastIntValue=12,S.advance(),!0):N===114?(S.lastIntValue=13,S.advance(),!0):!1},Ke.regexp_eatControlLetter=function(S){var N=S.current();return yn(N)?(S.lastIntValue=N%32,S.advance(),!0):!1};function yn(S){return S>=65&&S<=90||S>=97&&S<=122}Ke.regexp_eatRegExpUnicodeEscapeSequence=function(S,N){N===void 0&&(N=!1);var W=S.pos,ne=N||S.switchU;if(S.eat(117)){if(this.regexp_eatFixedHexDigits(S,4)){var de=S.lastIntValue;if(ne&&de>=55296&&de<=56319){var Le=S.pos;if(S.eat(92)&&S.eat(117)&&this.regexp_eatFixedHexDigits(S,4)){var Xe=S.lastIntValue;if(Xe>=56320&&Xe<=57343)return S.lastIntValue=(de-55296)*1024+(Xe-56320)+65536,!0}S.pos=Le,S.lastIntValue=de}return!0}if(ne&&S.eat(123)&&this.regexp_eatHexDigits(S)&&S.eat(125)&&_i(S.lastIntValue))return!0;ne&&S.raise("Invalid unicode escape"),S.pos=W}return!1};function _i(S){return S>=0&&S<=1114111}Ke.regexp_eatIdentityEscape=function(S){if(S.switchU)return this.regexp_eatSyntaxCharacter(S)?!0:S.eat(47)?(S.lastIntValue=47,!0):!1;var N=S.current();return N!==99&&(!S.switchN||N!==107)?(S.lastIntValue=N,S.advance(),!0):!1},Ke.regexp_eatDecimalEscape=function(S){S.lastIntValue=0;var N=S.current();if(N>=49&&N<=57){do S.lastIntValue=10*S.lastIntValue+(N-48),S.advance();while((N=S.current())>=48&&N<=57);return!0}return!1};var Bn=0,Cn=1,_n=2;Ke.regexp_eatCharacterClassEscape=function(S){var N=S.current();if(fn(N))return S.lastIntValue=-1,S.advance(),Cn;var W=!1;if(S.switchU&&this.options.ecmaVersion>=9&&((W=N===80)||N===112)){S.lastIntValue=-1,S.advance();var ne;if(S.eat(123)&&(ne=this.regexp_eatUnicodePropertyValueExpression(S))&&S.eat(125))return W&&ne===_n&&S.raise("Invalid property name"),ne;S.raise("Invalid property name")}return Bn};function fn(S){return S===100||S===68||S===115||S===83||S===119||S===87}Ke.regexp_eatUnicodePropertyValueExpression=function(S){var N=S.pos;if(this.regexp_eatUnicodePropertyName(S)&&S.eat(61)){var W=S.lastStringValue;if(this.regexp_eatUnicodePropertyValue(S)){var ne=S.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(S,W,ne),Cn}}if(S.pos=N,this.regexp_eatLoneUnicodePropertyNameOrValue(S)){var de=S.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(S,de)}return Bn},Ke.regexp_validateUnicodePropertyNameAndValue=function(S,N,W){U(S.unicodeProperties.nonBinary,N)||S.raise("Invalid property name"),S.unicodeProperties.nonBinary[N].test(W)||S.raise("Invalid property value")},Ke.regexp_validateUnicodePropertyNameOrValue=function(S,N){if(S.unicodeProperties.binary.test(N))return Cn;if(S.switchV&&S.unicodeProperties.binaryOfStrings.test(N))return _n;S.raise("Invalid property name")},Ke.regexp_eatUnicodePropertyName=function(S){var N=0;for(S.lastStringValue="";hi(N=S.current());)S.lastStringValue+=z(N),S.advance();return S.lastStringValue!==""};function hi(S){return yn(S)||S===95}Ke.regexp_eatUnicodePropertyValue=function(S){var N=0;for(S.lastStringValue="";$i(N=S.current());)S.lastStringValue+=z(N),S.advance();return S.lastStringValue!==""};function $i(S){return hi(S)||mr(S)}Ke.regexp_eatLoneUnicodePropertyNameOrValue=function(S){return this.regexp_eatUnicodePropertyValue(S)},Ke.regexp_eatCharacterClass=function(S){if(S.eat(91)){var N=S.eat(94),W=this.regexp_classContents(S);return S.eat(93)||S.raise("Unterminated character class"),N&&W===_n&&S.raise("Negated character class may contain strings"),!0}return!1},Ke.regexp_classContents=function(S){return S.current()===93?Cn:S.switchV?this.regexp_classSetExpression(S):(this.regexp_nonEmptyClassRanges(S),Cn)},Ke.regexp_nonEmptyClassRanges=function(S){for(;this.regexp_eatClassAtom(S);){var N=S.lastIntValue;if(S.eat(45)&&this.regexp_eatClassAtom(S)){var W=S.lastIntValue;S.switchU&&(N===-1||W===-1)&&S.raise("Invalid character class"),N!==-1&&W!==-1&&N>W&&S.raise("Range out of order in character class")}}},Ke.regexp_eatClassAtom=function(S){var N=S.pos;if(S.eat(92)){if(this.regexp_eatClassEscape(S))return!0;if(S.switchU){var W=S.current();(W===99||Lc(W))&&S.raise("Invalid class escape"),S.raise("Invalid escape")}S.pos=N}var ne=S.current();return ne!==93?(S.lastIntValue=ne,S.advance(),!0):!1},Ke.regexp_eatClassEscape=function(S){var N=S.pos;if(S.eat(98))return S.lastIntValue=8,!0;if(S.switchU&&S.eat(45))return S.lastIntValue=45,!0;if(!S.switchU&&S.eat(99)){if(this.regexp_eatClassControlLetter(S))return!0;S.pos=N}return this.regexp_eatCharacterClassEscape(S)||this.regexp_eatCharacterEscape(S)},Ke.regexp_classSetExpression=function(S){var N=Cn,W;if(!this.regexp_eatClassSetRange(S))if(W=this.regexp_eatClassSetOperand(S)){W===_n&&(N=_n);for(var ne=S.pos;S.eatChars([38,38]);){if(S.current()!==38&&(W=this.regexp_eatClassSetOperand(S))){W!==_n&&(N=Cn);continue}S.raise("Invalid character in character class")}if(ne!==S.pos)return N;for(;S.eatChars([45,45]);)this.regexp_eatClassSetOperand(S)||S.raise("Invalid character in character class");if(ne!==S.pos)return N}else S.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(S)){if(W=this.regexp_eatClassSetOperand(S),!W)return N;W===_n&&(N=_n)}},Ke.regexp_eatClassSetRange=function(S){var N=S.pos;if(this.regexp_eatClassSetCharacter(S)){var W=S.lastIntValue;if(S.eat(45)&&this.regexp_eatClassSetCharacter(S)){var ne=S.lastIntValue;return W!==-1&&ne!==-1&&W>ne&&S.raise("Range out of order in character class"),!0}S.pos=N}return!1},Ke.regexp_eatClassSetOperand=function(S){return this.regexp_eatClassSetCharacter(S)?Cn:this.regexp_eatClassStringDisjunction(S)||this.regexp_eatNestedClass(S)},Ke.regexp_eatNestedClass=function(S){var N=S.pos;if(S.eat(91)){var W=S.eat(94),ne=this.regexp_classContents(S);if(S.eat(93))return W&&ne===_n&&S.raise("Negated character class may contain strings"),ne;S.pos=N}if(S.eat(92)){var de=this.regexp_eatCharacterClassEscape(S);if(de)return de;S.pos=N}return null},Ke.regexp_eatClassStringDisjunction=function(S){var N=S.pos;if(S.eatChars([92,113])){if(S.eat(123)){var W=this.regexp_classStringDisjunctionContents(S);if(S.eat(125))return W}else S.raise("Invalid escape");S.pos=N}return null},Ke.regexp_classStringDisjunctionContents=function(S){for(var N=this.regexp_classString(S);S.eat(124);)this.regexp_classString(S)===_n&&(N=_n);return N},Ke.regexp_classString=function(S){for(var N=0;this.regexp_eatClassSetCharacter(S);)N++;return N===1?Cn:_n},Ke.regexp_eatClassSetCharacter=function(S){var N=S.pos;if(S.eat(92))return this.regexp_eatCharacterEscape(S)||this.regexp_eatClassSetReservedPunctuator(S)?!0:S.eat(98)?(S.lastIntValue=8,!0):(S.pos=N,!1);var W=S.current();return W<0||W===S.lookahead()&&ei(W)||Ai(W)?!1:(S.advance(),S.lastIntValue=W,!0)};function ei(S){return S===33||S>=35&&S<=38||S>=42&&S<=44||S===46||S>=58&&S<=64||S===94||S===96||S===126}function Ai(S){return S===40||S===41||S===45||S===47||S>=91&&S<=93||S>=123&&S<=125}Ke.regexp_eatClassSetReservedPunctuator=function(S){var N=S.current();return Xs(N)?(S.lastIntValue=N,S.advance(),!0):!1};function Xs(S){return S===33||S===35||S===37||S===38||S===44||S===45||S>=58&&S<=62||S===64||S===96||S===126}Ke.regexp_eatClassControlLetter=function(S){var N=S.current();return mr(N)||N===95?(S.lastIntValue=N%32,S.advance(),!0):!1},Ke.regexp_eatHexEscapeSequence=function(S){var N=S.pos;if(S.eat(120)){if(this.regexp_eatFixedHexDigits(S,2))return!0;S.switchU&&S.raise("Invalid escape"),S.pos=N}return!1},Ke.regexp_eatDecimalDigits=function(S){var N=S.pos,W=0;for(S.lastIntValue=0;mr(W=S.current());)S.lastIntValue=10*S.lastIntValue+(W-48),S.advance();return S.pos!==N};function mr(S){return S>=48&&S<=57}Ke.regexp_eatHexDigits=function(S){var N=S.pos,W=0;for(S.lastIntValue=0;wf(W=S.current());)S.lastIntValue=16*S.lastIntValue+jo(W),S.advance();return S.pos!==N};function wf(S){return S>=48&&S<=57||S>=65&&S<=70||S>=97&&S<=102}function jo(S){return S>=65&&S<=70?10+(S-65):S>=97&&S<=102?10+(S-97):S-48}Ke.regexp_eatLegacyOctalEscapeSequence=function(S){if(this.regexp_eatOctalDigit(S)){var N=S.lastIntValue;if(this.regexp_eatOctalDigit(S)){var W=S.lastIntValue;N<=3&&this.regexp_eatOctalDigit(S)?S.lastIntValue=N*64+W*8+S.lastIntValue:S.lastIntValue=N*8+W}else S.lastIntValue=N;return!0}return!1},Ke.regexp_eatOctalDigit=function(S){var N=S.current();return Lc(N)?(S.lastIntValue=N-48,S.advance(),!0):(S.lastIntValue=0,!1)};function Lc(S){return S>=48&&S<=55}Ke.regexp_eatFixedHexDigits=function(S,N){var W=S.pos;S.lastIntValue=0;for(var ne=0;ne<N;++ne){var de=S.current();if(!wf(de))return S.pos=W,!1;S.lastIntValue=16*S.lastIntValue+jo(de),S.advance()}return!0};var Ho=function(N){this.type=N.type,this.value=N.value,this.start=N.start,this.end=N.end,N.options.locations&&(this.loc=new $(N,N.startLoc,N.endLoc)),N.options.ranges&&(this.range=[N.start,N.end])},Sn=be.prototype;Sn.next=function(S){!S&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Ho(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Sn.getToken=function(){return this.next(),new Ho(this)},typeof Symbol<"u"&&(Sn[Symbol.iterator]=function(){var S=this;return{next:function(){var N=S.getToken();return{done:N.type===w.eof,value:N}}}}),Sn.nextToken=function(){var S=this.curContext();if((!S||!S.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(w.eof);if(S.override)return S.override(this);this.readToken(this.fullCharCodeAtPos())},Sn.readToken=function(S){return m(S,this.options.ecmaVersion>=6)||S===92?this.readWord():this.getTokenFromCode(S)},Sn.fullCharCodeAtPos=function(){var S=this.input.charCodeAt(this.pos);if(S<=55295||S>=56320)return S;var N=this.input.charCodeAt(this.pos+1);return N<=56319||N>=57344?S:(S<<10)+N-56613888},Sn.skipBlockComment=function(){var S=this.options.onComment&&this.curPosition(),N=this.pos,W=this.input.indexOf("*/",this.pos+=2);if(W===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=W+2,this.options.locations)for(var ne=void 0,de=N;(ne=k(this.input,de,this.pos))>-1;)++this.curLine,de=this.lineStart=ne;this.options.onComment&&this.options.onComment(!0,this.input.slice(N+2,W),N,this.pos,S,this.curPosition())},Sn.skipLineComment=function(S){for(var N=this.pos,W=this.options.onComment&&this.curPosition(),ne=this.input.charCodeAt(this.pos+=S);this.pos<this.input.length&&!D(ne);)ne=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(N+S,this.pos),N,this.pos,W,this.curPosition())},Sn.skipSpace=function(){e:for(;this.pos<this.input.length;){var S=this.input.charCodeAt(this.pos);switch(S){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(S>8&&S<14||S>=5760&&P.test(String.fromCharCode(S)))++this.pos;else break e}}},Sn.finishToken=function(S,N){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var W=this.type;this.type=S,this.value=N,this.updateContext(W)},Sn.readToken_dot=function(){var S=this.input.charCodeAt(this.pos+1);if(S>=48&&S<=57)return this.readNumber(!0);var N=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&S===46&&N===46?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},Sn.readToken_slash=function(){var S=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):S===61?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},Sn.readToken_mult_modulo_exp=function(S){var N=this.input.charCodeAt(this.pos+1),W=1,ne=S===42?w.star:w.modulo;return this.options.ecmaVersion>=7&&S===42&&N===42&&(++W,ne=w.starstar,N=this.input.charCodeAt(this.pos+2)),N===61?this.finishOp(w.assign,W+1):this.finishOp(ne,W)},Sn.readToken_pipe_amp=function(S){var N=this.input.charCodeAt(this.pos+1);if(N===S){if(this.options.ecmaVersion>=12){var W=this.input.charCodeAt(this.pos+2);if(W===61)return this.finishOp(w.assign,3)}return this.finishOp(S===124?w.logicalOR:w.logicalAND,2)}return N===61?this.finishOp(w.assign,2):this.finishOp(S===124?w.bitwiseOR:w.bitwiseAND,1)},Sn.readToken_caret=function(){var S=this.input.charCodeAt(this.pos+1);return S===61?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},Sn.readToken_plus_min=function(S){var N=this.input.charCodeAt(this.pos+1);return N===S?N===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||A.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(w.incDec,2):N===61?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},Sn.readToken_lt_gt=function(S){var N=this.input.charCodeAt(this.pos+1),W=1;return N===S?(W=S===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+W)===61?this.finishOp(w.assign,W+1):this.finishOp(w.bitShift,W)):N===33&&S===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(N===61&&(W=2),this.finishOp(w.relational,W))},Sn.readToken_eq_excl=function(S){var N=this.input.charCodeAt(this.pos+1);return N===61?this.finishOp(w.equality,this.input.charCodeAt(this.pos+2)===61?3:2):S===61&&N===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(S===61?w.eq:w.prefix,1)},Sn.readToken_question=function(){var S=this.options.ecmaVersion;if(S>=11){var N=this.input.charCodeAt(this.pos+1);if(N===46){var W=this.input.charCodeAt(this.pos+2);if(W<48||W>57)return this.finishOp(w.questionDot,2)}if(N===63){if(S>=12){var ne=this.input.charCodeAt(this.pos+2);if(ne===61)return this.finishOp(w.assign,3)}return this.finishOp(w.coalesce,2)}}return this.finishOp(w.question,1)},Sn.readToken_numberSign=function(){var S=this.options.ecmaVersion,N=35;if(S>=13&&(++this.pos,N=this.fullCharCodeAtPos(),m(N,!0)||N===92))return this.finishToken(w.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+z(N)+"'")},Sn.getTokenFromCode=function(S){switch(S){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var N=this.input.charCodeAt(this.pos+1);if(N===120||N===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(N===111||N===79)return this.readRadixNumber(8);if(N===98||N===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(S);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(S);case 124:case 38:return this.readToken_pipe_amp(S);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(S);case 60:case 62:return this.readToken_lt_gt(S);case 61:case 33:return this.readToken_eq_excl(S);case 63:return this.readToken_question();case 126:return this.finishOp(w.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+z(S)+"'")},Sn.finishOp=function(S,N){var W=this.input.slice(this.pos,this.pos+N);return this.pos+=N,this.finishToken(S,W)},Sn.readRegexp=function(){for(var S,N,W=this.pos;;){this.pos>=this.input.length&&this.raise(W,"Unterminated regular expression");var ne=this.input.charAt(this.pos);if(A.test(ne)&&this.raise(W,"Unterminated regular expression"),S)S=!1;else{if(ne==="[")N=!0;else if(ne==="]"&&N)N=!1;else if(ne==="/"&&!N)break;S=ne==="\\"}++this.pos}var de=this.input.slice(W,this.pos);++this.pos;var Le=this.pos,Xe=this.readWord1();this.containsEsc&&this.unexpected(Le);var It=this.regexpState||(this.regexpState=new cn(this));It.reset(W,de,Xe),this.validateRegExpFlags(It),this.validateRegExpPattern(It);var Bt=null;try{Bt=new RegExp(de,Xe)}catch{}return this.finishToken(w.regexp,{pattern:de,flags:Xe,value:Bt})},Sn.readInt=function(S,N,W){for(var ne=this.options.ecmaVersion>=12&&N===void 0,de=W&&this.input.charCodeAt(this.pos)===48,Le=this.pos,Xe=0,It=0,Bt=0,mn=N??1/0;Bt<mn;++Bt,++this.pos){var En=this.input.charCodeAt(this.pos),Ci=void 0;if(ne&&En===95){de&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),It===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Bt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),It=En;continue}if(En>=97?Ci=En-97+10:En>=65?Ci=En-65+10:En>=48&&En<=57?Ci=En-48:Ci=1/0,Ci>=S)break;It=En,Xe=Xe*S+Ci}return ne&&It===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Le||N!=null&&this.pos-Le!==N?null:Xe};function Ys(S,N){return N?parseInt(S,8):parseFloat(S.replace(/_/g,""))}function Il(S){return typeof BigInt!="function"?null:BigInt(S.replace(/_/g,""))}Sn.readRadixNumber=function(S){var N=this.pos;this.pos+=2;var W=this.readInt(S);return W==null&&this.raise(this.start+2,"Expected number in radix "+S),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(W=Il(this.input.slice(N,this.pos)),++this.pos):m(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,W)},Sn.readNumber=function(S){var N=this.pos;!S&&this.readInt(10,void 0,!0)===null&&this.raise(N,"Invalid number");var W=this.pos-N>=2&&this.input.charCodeAt(N)===48;W&&this.strict&&this.raise(N,"Invalid number");var ne=this.input.charCodeAt(this.pos);if(!W&&!S&&this.options.ecmaVersion>=11&&ne===110){var de=Il(this.input.slice(N,this.pos));return++this.pos,m(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,de)}W&&/[89]/.test(this.input.slice(N,this.pos))&&(W=!1),ne===46&&!W&&(++this.pos,this.readInt(10),ne=this.input.charCodeAt(this.pos)),(ne===69||ne===101)&&!W&&(ne=this.input.charCodeAt(++this.pos),(ne===43||ne===45)&&++this.pos,this.readInt(10)===null&&this.raise(N,"Invalid number")),m(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Le=Ys(this.input.slice(N,this.pos),W);return this.finishToken(w.num,Le)},Sn.readCodePoint=function(){var S=this.input.charCodeAt(this.pos),N;if(S===123){this.options.ecmaVersion<6&&this.unexpected();var W=++this.pos;N=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,N>1114111&&this.invalidStringToken(W,"Code point out of bounds")}else N=this.readHexChar(4);return N},Sn.readString=function(S){for(var N="",W=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var ne=this.input.charCodeAt(this.pos);if(ne===S)break;ne===92?(N+=this.input.slice(W,this.pos),N+=this.readEscapedChar(!1),W=this.pos):ne===8232||ne===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(D(ne)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return N+=this.input.slice(W,this.pos++),this.finishToken(w.string,N)};var Uc={};Sn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(S){if(S===Uc)this.readInvalidTemplateToken();else throw S}this.inTemplateElement=!1},Sn.invalidStringToken=function(S,N){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Uc;this.raise(S,N)},Sn.readTmplToken=function(){for(var S="",N=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var W=this.input.charCodeAt(this.pos);if(W===96||W===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===w.template||this.type===w.invalidTemplate)?W===36?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote)):(S+=this.input.slice(N,this.pos),this.finishToken(w.template,S));if(W===92)S+=this.input.slice(N,this.pos),S+=this.readEscapedChar(!0),N=this.pos;else if(D(W)){switch(S+=this.input.slice(N,this.pos),++this.pos,W){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:S+=`
`;break;default:S+=String.fromCharCode(W);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),N=this.pos}else++this.pos}},Sn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Sn.readEscapedChar=function(S){var N=this.input.charCodeAt(++this.pos);switch(++this.pos,N){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return z(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),S){var W=this.pos-1;this.invalidStringToken(W,"Invalid escape sequence in template string")}default:if(N>=48&&N<=55){var ne=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],de=parseInt(ne,8);return de>255&&(ne=ne.slice(0,-1),de=parseInt(ne,8)),this.pos+=ne.length-1,N=this.input.charCodeAt(this.pos),(ne!=="0"||N===56||N===57)&&(this.strict||S)&&this.invalidStringToken(this.pos-1-ne.length,S?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(de)}return D(N)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(N)}},Sn.readHexChar=function(S){var N=this.pos,W=this.readInt(16,S);return W===null&&this.invalidStringToken(N,"Bad character escape sequence"),W},Sn.readWord1=function(){this.containsEsc=!1;for(var S="",N=!0,W=this.pos,ne=this.options.ecmaVersion>=6;this.pos<this.input.length;){var de=this.fullCharCodeAtPos();if(y(de,ne))this.pos+=de<=65535?1:2;else if(de===92){this.containsEsc=!0,S+=this.input.slice(W,this.pos);var Le=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Xe=this.readCodePoint();(N?m:y)(Xe,ne)||this.invalidStringToken(Le,"Invalid Unicode escape"),S+=z(Xe),W=this.pos}else break;N=!1}return S+this.input.slice(W,this.pos)},Sn.readWord=function(){var S=this.readWord1(),N=w.name;return this.keywords.test(S)&&(N=E[S]),this.finishToken(N,S)};var Ur="8.15.0";be.acorn={Parser:be,version:Ur,defaultOptions:Se,Position:he,SourceLocation:$,getLineInfo:Me,Node:Ni,TokenType:v,tokTypes:w,keywordTypes:E,TokContext:Wt,tokContexts:ut,isIdentifierChar:y,isIdentifierStart:m,Token:Ho,isNewLine:D,lineBreak:A,lineBreakG:C,nonASCIIwhitespace:P};function Ef(S,N){return be.parse(S,N)}function Vo(S,N,W){return be.parseExpressionAt(S,N,W)}function ku(S,N){return be.tokenizer(S,N)}n.Node=Ni,n.Parser=be,n.Position=he,n.SourceLocation=$,n.TokContext=Wt,n.Token=Ho,n.TokenType=v,n.defaultOptions=Se,n.getLineInfo=Me,n.isIdentifierChar=y,n.isIdentifierStart=m,n.isNewLine=D,n.keywordTypes=E,n.lineBreak=A,n.lineBreakG=C,n.nonASCIIwhitespace=P,n.parse=Ef,n.parseExpressionAt=Vo,n.tokContexts=ut,n.tokTypes=w,n.tokenizer=ku,n.version=Ur})}(eM,eM.exports)),eM.exports}(function(t){const e=iRe,n=/^[\da-fA-F]+$/,i=/^\d+$/,r=new WeakMap;function a(l){l=l.Parser.acorn||l;let c=r.get(l);if(!c){const u=l.tokTypes,f=l.TokContext,h=l.TokenType,d=new f("<tag",!1),m=new f("</tag",!1),y=new f("<tag>...</tag>",!0,!0),v={tc_oTag:d,tc_cTag:m,tc_expr:y},g={jsxName:new h("jsxName"),jsxText:new h("jsxText",{beforeExpr:!0}),jsxTagStart:new h("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new h("jsxTagEnd")};g.jsxTagStart.updateContext=function(){this.context.push(y),this.context.push(d),this.exprAllowed=!1},g.jsxTagEnd.updateContext=function(x){let _=this.context.pop();_===d&&x===u.slash||_===m?(this.context.pop(),this.exprAllowed=this.curContext()===y):this.exprAllowed=!0},c={tokContexts:v,tokTypes:g},r.set(l,c)}return c}function s(l){if(!l)return l;if(l.type==="JSXIdentifier")return l.name;if(l.type==="JSXNamespacedName")return l.namespace.name+":"+l.name.name;if(l.type==="JSXMemberExpression")return s(l.object)+"."+s(l.property)}t.exports=function(l){return l=l||{},function(c){return o({allowNamespaces:l.allowNamespaces!==!1,allowNamespacedObjects:!!l.allowNamespacedObjects},c)}},Object.defineProperty(t.exports,"tokTypes",{get:function(){return a(fP()).tokTypes},configurable:!0,enumerable:!0});function o(l,c){const u=c.acorn||fP(),f=a(u),h=u.tokTypes,d=f.tokTypes,m=u.tokContexts,y=f.tokContexts.tc_oTag,v=f.tokContexts.tc_cTag,g=f.tokContexts.tc_expr,x=u.isNewLine,_=u.isIdentifierStart,E=u.isIdentifierChar;return class extends c{static get acornJsx(){return f}jsx_readToken(){let T="",w=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let A=this.input.charCodeAt(this.pos);switch(A){case 60:case 123:return this.pos===this.start?A===60&&this.exprAllowed?(++this.pos,this.finishToken(d.jsxTagStart)):this.getTokenFromCode(A):(T+=this.input.slice(w,this.pos),this.finishToken(d.jsxText,T));case 38:T+=this.input.slice(w,this.pos),T+=this.jsx_readEntity(),w=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(A===62?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:x(A)?(T+=this.input.slice(w,this.pos),T+=this.jsx_readNewLine(!0),w=this.pos):++this.pos}}}jsx_readNewLine(T){let w=this.input.charCodeAt(this.pos),A;return++this.pos,w===13&&this.input.charCodeAt(this.pos)===10?(++this.pos,A=T?`
`:`\r
`):A=String.fromCharCode(w),this.options.locations&&(++this.curLine,this.lineStart=this.pos),A}jsx_readString(T){let w="",A=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let C=this.input.charCodeAt(this.pos);if(C===T)break;C===38?(w+=this.input.slice(A,this.pos),w+=this.jsx_readEntity(),A=this.pos):x(C)?(w+=this.input.slice(A,this.pos),w+=this.jsx_readNewLine(!1),A=this.pos):++this.pos}return w+=this.input.slice(A,this.pos++),this.finishToken(h.string,w)}jsx_readEntity(){let T="",w=0,A,C=this.input[this.pos];C!=="&"&&this.raise(this.pos,"Entity must start with an ampersand");let D=++this.pos;for(;this.pos<this.input.length&&w++<10;){if(C=this.input[this.pos++],C===";"){T[0]==="#"?T[1]==="x"?(T=T.substr(2),n.test(T)&&(A=String.fromCharCode(parseInt(T,16)))):(T=T.substr(1),i.test(T)&&(A=String.fromCharCode(parseInt(T,10)))):A=e[T];break}T+=C}return A||(this.pos=D,"&")}jsx_readWord(){let T,w=this.pos;do T=this.input.charCodeAt(++this.pos);while(E(T)||T===45);return this.finishToken(d.jsxName,this.input.slice(w,this.pos))}jsx_parseIdentifier(){let T=this.startNode();return this.type===d.jsxName?T.name=this.value:this.type.keyword?T.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(T,"JSXIdentifier")}jsx_parseNamespacedName(){let T=this.start,w=this.startLoc,A=this.jsx_parseIdentifier();if(!l.allowNamespaces||!this.eat(h.colon))return A;var C=this.startNodeAt(T,w);return C.namespace=A,C.name=this.jsx_parseIdentifier(),this.finishNode(C,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===d.jsxTagEnd)return"";let T=this.start,w=this.startLoc,A=this.jsx_parseNamespacedName();for(this.type===h.dot&&A.type==="JSXNamespacedName"&&!l.allowNamespacedObjects&&this.unexpected();this.eat(h.dot);){let C=this.startNodeAt(T,w);C.object=A,C.property=this.jsx_parseIdentifier(),A=this.finishNode(C,"JSXMemberExpression")}return A}jsx_parseAttributeValue(){switch(this.type){case h.braceL:let T=this.jsx_parseExpressionContainer();return T.expression.type==="JSXEmptyExpression"&&this.raise(T.start,"JSX attributes must only be assigned a non-empty expression"),T;case d.jsxTagStart:case h.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let T=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(T,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let T=this.startNode();return this.next(),T.expression=this.type===h.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(h.braceR),this.finishNode(T,"JSXExpressionContainer")}jsx_parseAttribute(){let T=this.startNode();return this.eat(h.braceL)?(this.expect(h.ellipsis),T.argument=this.parseMaybeAssign(),this.expect(h.braceR),this.finishNode(T,"JSXSpreadAttribute")):(T.name=this.jsx_parseNamespacedName(),T.value=this.eat(h.eq)?this.jsx_parseAttributeValue():null,this.finishNode(T,"JSXAttribute"))}jsx_parseOpeningElementAt(T,w){let A=this.startNodeAt(T,w);A.attributes=[];let C=this.jsx_parseElementName();for(C&&(A.name=C);this.type!==h.slash&&this.type!==d.jsxTagEnd;)A.attributes.push(this.jsx_parseAttribute());return A.selfClosing=this.eat(h.slash),this.expect(d.jsxTagEnd),this.finishNode(A,C?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(T,w){let A=this.startNodeAt(T,w),C=this.jsx_parseElementName();return C&&(A.name=C),this.expect(d.jsxTagEnd),this.finishNode(A,C?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(T,w){let A=this.startNodeAt(T,w),C=[],D=this.jsx_parseOpeningElementAt(T,w),k=null;if(!D.selfClosing){e:for(;;)switch(this.type){case d.jsxTagStart:if(T=this.start,w=this.startLoc,this.next(),this.eat(h.slash)){k=this.jsx_parseClosingElementAt(T,w);break e}C.push(this.jsx_parseElementAt(T,w));break;case d.jsxText:C.push(this.parseExprAtom());break;case h.braceL:C.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}s(k.name)!==s(D.name)&&this.raise(k.start,"Expected corresponding JSX closing tag for <"+s(D.name)+">")}let P=D.name?"Element":"Fragment";return A["opening"+P]=D,A["closing"+P]=k,A.children=C,this.type===h.relational&&this.value==="<"&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(A,"JSX"+P)}jsx_parseText(){let T=this.parseLiteral(this.value);return T.type="JSXText",T}jsx_parseElement(){let T=this.start,w=this.startLoc;return this.next(),this.jsx_parseElementAt(T,w)}parseExprAtom(T){return this.type===d.jsxText?this.jsx_parseText():this.type===d.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(T)}readToken(T){let w=this.curContext();if(w===g)return this.jsx_readToken();if(w===y||w===v){if(_(T))return this.jsx_readWord();if(T==62)return++this.pos,this.finishToken(d.jsxTagEnd);if((T===34||T===39)&&w==y)return this.jsx_readString(T)}return T===60&&this.exprAllowed&&this.input.charCodeAt(this.pos+1)!==33?(++this.pos,this.finishToken(d.jsxTagStart)):super.readToken(T)}updateContext(T){if(this.type==h.braceL){var w=this.curContext();w==y?this.context.push(m.b_expr):w==g?this.context.push(m.b_tmpl):super.updateContext(T),this.exprAllowed=!0}else if(this.type===h.slash&&T===d.jsxTagStart)this.context.length-=2,this.context.push(v),this.exprAllowed=!1;else return super.updateContext(T)}}}})($Q);var rRe=$Q.exports;const KQ=Cc(rRe),{stringify:aRe}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const tM={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},iu=17,sRe={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:iu,ClassExpression:iu,FunctionExpression:iu,ObjectExpression:iu,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function e0(t,e){const{generator:n}=t;if(t.write("("),e!=null&&e.length>0){n[e[0].type](e[0],t);const{length:i}=e;for(let r=1;r<i;r++){const a=e[r];t.write(", "),n[a.type](a,t)}}t.write(")")}function JQ(t,e,n,i){const r=t.expressionsPrecedence[e.type];if(r===iu)return!0;const a=t.expressionsPrecedence[n.type];return r!==a?!i&&r===15&&a===14&&n.operator==="**"||r<a:r!==13&&r!==14?!1:e.operator==="**"&&n.operator==="**"?!i:r===13&&a===13&&(e.operator==="??"||n.operator==="??")?!0:i?tM[e.operator]<=tM[n.operator]:tM[e.operator]<tM[n.operator]}function nM(t,e,n,i){const{generator:r}=t;JQ(t,e,n,i)?(t.write("("),r[e.type](e,t),t.write(")")):r[e.type](e,t)}function oRe(t,e,n,i){const r=e.split(`
`),a=r.length-1;if(t.write(r[0].trim()),a>0){t.write(i);for(let s=1;s<a;s++)t.write(n+r[s].trim()+i);t.write(n+r[a].trim())}}function so(t,e,n,i){const{length:r}=e;for(let a=0;a<r;a++){const s=e[a];t.write(n),s.type[0]==="L"?t.write("// "+s.value.trim()+`
`,s):(t.write("/*"),oRe(t,s.value,n,i),t.write("*/"+i))}}function lRe(t){let e=t;for(;e!=null;){const{type:n}=e;if(n[0]==="C"&&n[1]==="a")return!0;if(n[0]==="M"&&n[1]==="e"&&n[2]==="m")e=e.object;else return!1}}function vO(t,e){const{generator:n}=t,{declarations:i}=e;t.write(e.kind+" ");const{length:r}=i;if(r>0){n.VariableDeclarator(i[0],t);for(let a=1;a<r;a++)t.write(", "),n.VariableDeclarator(i[a],t)}}let kH,DH,OH,IH,NH,PH;const ZQ={Program(t,e){const n=e.indent.repeat(e.indentLevel),{lineEnd:i,writeComments:r}=e;r&&t.comments!=null&&so(e,t.comments,n,i);const a=t.body,{length:s}=a;for(let o=0;o<s;o++){const l=a[o];r&&l.comments!=null&&so(e,l.comments,n,i),e.write(n),this[l.type](l,e),e.write(i)}r&&t.trailingComments!=null&&so(e,t.trailingComments,n,i)},BlockStatement:PH=function(t,e){const n=e.indent.repeat(e.indentLevel++),{lineEnd:i,writeComments:r}=e,a=n+e.indent;e.write("{");const s=t.body;if(s!=null&&s.length>0){e.write(i),r&&t.comments!=null&&so(e,t.comments,a,i);const{length:o}=s;for(let l=0;l<o;l++){const c=s[l];r&&c.comments!=null&&so(e,c.comments,a,i),e.write(a),this[c.type](c,e),e.write(i)}e.write(n)}else r&&t.comments!=null&&(e.write(i),so(e,t.comments,a,i),e.write(n));r&&t.trailingComments!=null&&so(e,t.trailingComments,a,i),e.write("}"),e.indentLevel--},ClassBody:PH,StaticBlock(t,e){e.write("static "),this.BlockStatement(t,e)},EmptyStatement(t,e){e.write(";")},ExpressionStatement(t,e){const n=e.expressionsPrecedence[t.expression.type];n===iu||n===3&&t.expression.left.type[0]==="O"?(e.write("("),this[t.expression.type](t.expression,e),e.write(")")):this[t.expression.type](t.expression,e),e.write(";")},IfStatement(t,e){e.write("if ("),this[t.test.type](t.test,e),e.write(") "),this[t.consequent.type](t.consequent,e),t.alternate!=null&&(e.write(" else "),this[t.alternate.type](t.alternate,e))},LabeledStatement(t,e){this[t.label.type](t.label,e),e.write(": "),this[t.body.type](t.body,e)},BreakStatement(t,e){e.write("break"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},ContinueStatement(t,e){e.write("continue"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},WithStatement(t,e){e.write("with ("),this[t.object.type](t.object,e),e.write(") "),this[t.body.type](t.body,e)},SwitchStatement(t,e){const n=e.indent.repeat(e.indentLevel++),{lineEnd:i,writeComments:r}=e;e.indentLevel++;const a=n+e.indent,s=a+e.indent;e.write("switch ("),this[t.discriminant.type](t.discriminant,e),e.write(") {"+i);const{cases:o}=t,{length:l}=o;for(let c=0;c<l;c++){const u=o[c];r&&u.comments!=null&&so(e,u.comments,a,i),u.test?(e.write(a+"case "),this[u.test.type](u.test,e),e.write(":"+i)):e.write(a+"default:"+i);const{consequent:f}=u,{length:h}=f;for(let d=0;d<h;d++){const m=f[d];r&&m.comments!=null&&so(e,m.comments,s,i),e.write(s),this[m.type](m,e),e.write(i)}}e.indentLevel-=2,e.write(n+"}")},ReturnStatement(t,e){e.write("return"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e)),e.write(";")},ThrowStatement(t,e){e.write("throw "),this[t.argument.type](t.argument,e),e.write(";")},TryStatement(t,e){if(e.write("try "),this[t.block.type](t.block,e),t.handler){const{handler:n}=t;n.param==null?e.write(" catch "):(e.write(" catch ("),this[n.param.type](n.param,e),e.write(") ")),this[n.body.type](n.body,e)}t.finalizer&&(e.write(" finally "),this[t.finalizer.type](t.finalizer,e))},WhileStatement(t,e){e.write("while ("),this[t.test.type](t.test,e),e.write(") "),this[t.body.type](t.body,e)},DoWhileStatement(t,e){e.write("do "),this[t.body.type](t.body,e),e.write(" while ("),this[t.test.type](t.test,e),e.write(");")},ForStatement(t,e){if(e.write("for ("),t.init!=null){const{init:n}=t;n.type[0]==="V"?vO(e,n):this[n.type](n,e)}e.write("; "),t.test&&this[t.test.type](t.test,e),e.write("; "),t.update&&this[t.update.type](t.update,e),e.write(") "),this[t.body.type](t.body,e)},ForInStatement:kH=function(t,e){e.write(`for ${t.await?"await ":""}(`);const{left:n}=t;n.type[0]==="V"?vO(e,n):this[n.type](n,e),e.write(t.type[3]==="I"?" in ":" of "),this[t.right.type](t.right,e),e.write(") "),this[t.body.type](t.body,e)},ForOfStatement:kH,DebuggerStatement(t,e){e.write("debugger;",t)},FunctionDeclaration:DH=function(t,e){e.write((t.async?"async ":"")+(t.generator?"function* ":"function ")+(t.id?t.id.name:""),t),e0(e,t.params),e.write(" "),this[t.body.type](t.body,e)},FunctionExpression:DH,VariableDeclaration(t,e){vO(e,t),e.write(";")},VariableDeclarator(t,e){this[t.id.type](t.id,e),t.init!=null&&(e.write(" = "),this[t.init.type](t.init,e))},ClassDeclaration(t,e){if(e.write("class "+(t.id?`${t.id.name} `:""),t),t.superClass){e.write("extends ");const{superClass:n}=t,{type:i}=n,r=e.expressionsPrecedence[i];(i[0]!=="C"||i[1]!=="l"||i[5]!=="E")&&(r===iu||r<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[t.superClass.type](n,e),e.write(")")):this[n.type](n,e),e.write(" ")}this.ClassBody(t.body,e)},ImportDeclaration(t,e){e.write("import ");const{specifiers:n,attributes:i}=t,{length:r}=n;let a=0;if(r>0){for(;a<r;){a>0&&e.write(", ");const s=n[a],o=s.type[6];if(o==="D")e.write(s.local.name,s),a++;else if(o==="N")e.write("* as "+s.local.name,s),a++;else break}if(a<r){for(e.write("{");;){const s=n[a],{name:o}=s.imported;if(e.write(o,s),o!==s.local.name&&e.write(" as "+s.local.name),++a<r)e.write(", ");else break}e.write("}")}e.write(" from ")}if(this.Literal(t.source,e),i&&i.length>0){e.write(" with { ");for(let s=0;s<i.length;s++)this.ImportAttribute(i[s],e),s<i.length-1&&e.write(", ");e.write(" }")}e.write(";")},ImportAttribute(t,e){this.Identifier(t.key,e),e.write(": "),this.Literal(t.value,e)},ImportExpression(t,e){e.write("import("),this[t.source.type](t.source,e),e.write(")")},ExportDefaultDeclaration(t,e){e.write("export default "),this[t.declaration.type](t.declaration,e),e.expressionsPrecedence[t.declaration.type]!=null&&t.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(t,e){if(e.write("export "),t.declaration)this[t.declaration.type](t.declaration,e);else{e.write("{");const{specifiers:n}=t,{length:i}=n;if(i>0)for(let r=0;;){const a=n[r],{name:s}=a.local;if(e.write(s,a),s!==a.exported.name&&e.write(" as "+a.exported.name),++r<i)e.write(", ");else break}if(e.write("}"),t.source&&(e.write(" from "),this.Literal(t.source,e)),t.attributes&&t.attributes.length>0){e.write(" with { ");for(let r=0;r<t.attributes.length;r++)this.ImportAttribute(t.attributes[r],e),r<t.attributes.length-1&&e.write(", ");e.write(" }")}e.write(";")}},ExportAllDeclaration(t,e){if(t.exported!=null?e.write("export * as "+t.exported.name+" from "):e.write("export * from "),this.Literal(t.source,e),t.attributes&&t.attributes.length>0){e.write(" with { ");for(let n=0;n<t.attributes.length;n++)this.ImportAttribute(t.attributes[n],e),n<t.attributes.length-1&&e.write(", ");e.write(" }")}e.write(";")},MethodDefinition(t,e){t.static&&e.write("static ");const n=t.kind[0];(n==="g"||n==="s")&&e.write(t.kind+" "),t.value.async&&e.write("async "),t.value.generator&&e.write("*"),t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),e0(e,t.value.params),e.write(" "),this[t.value.body.type](t.value.body,e)},ClassExpression(t,e){this.ClassDeclaration(t,e)},ArrowFunctionExpression(t,e){e.write(t.async?"async ":"",t);const{params:n}=t;n!=null&&(n.length===1&&n[0].type[0]==="I"?e.write(n[0].name,n[0]):e0(e,t.params)),e.write(" => "),t.body.type[0]==="O"?(e.write("("),this.ObjectExpression(t.body,e),e.write(")")):this[t.body.type](t.body,e)},ThisExpression(t,e){e.write("this",t)},Super(t,e){e.write("super",t)},RestElement:OH=function(t,e){e.write("..."),this[t.argument.type](t.argument,e)},SpreadElement:OH,YieldExpression(t,e){e.write(t.delegate?"yield*":"yield"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e))},AwaitExpression(t,e){e.write("await ",t),nM(e,t.argument,t)},TemplateLiteral(t,e){const{quasis:n,expressions:i}=t;e.write("`");const{length:r}=i;for(let s=0;s<r;s++){const o=i[s],l=n[s];e.write(l.value.raw,l),e.write("${"),this[o.type](o,e),e.write("}")}const a=n[n.length-1];e.write(a.value.raw,a),e.write("`")},TemplateElement(t,e){e.write(t.value.raw,t)},TaggedTemplateExpression(t,e){nM(e,t.tag,t),this[t.quasi.type](t.quasi,e)},ArrayExpression:NH=function(t,e){if(e.write("["),t.elements.length>0){const{elements:n}=t,{length:i}=n;for(let r=0;;){const a=n[r];if(a!=null&&this[a.type](a,e),++r<i)e.write(", ");else{a==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:NH,ObjectExpression(t,e){const n=e.indent.repeat(e.indentLevel++),{lineEnd:i,writeComments:r}=e,a=n+e.indent;if(e.write("{"),t.properties.length>0){e.write(i),r&&t.comments!=null&&so(e,t.comments,a,i);const s=","+i,{properties:o}=t,{length:l}=o;for(let c=0;;){const u=o[c];if(r&&u.comments!=null&&so(e,u.comments,a,i),e.write(a),this[u.type](u,e),++c<l)e.write(s);else break}e.write(i),r&&t.trailingComments!=null&&so(e,t.trailingComments,a,i),e.write(n+"}")}else r?t.comments!=null?(e.write(i),so(e,t.comments,a,i),t.trailingComments!=null&&so(e,t.trailingComments,a,i),e.write(n+"}")):t.trailingComments!=null?(e.write(i),so(e,t.trailingComments,a,i),e.write(n+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(t,e){t.method||t.kind[0]!=="i"?this.MethodDefinition(t,e):(t.shorthand||(t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),e.write(": ")),this[t.value.type](t.value,e))},PropertyDefinition(t,e){if(t.static&&e.write("static "),t.computed&&e.write("["),this[t.key.type](t.key,e),t.computed&&e.write("]"),t.value==null){t.key.type[0]!=="F"&&e.write(";");return}e.write(" = "),this[t.value.type](t.value,e),e.write(";")},ObjectPattern(t,e){if(e.write("{"),t.properties.length>0){const{properties:n}=t,{length:i}=n;for(let r=0;this[n[r].type](n[r],e),++r<i;)e.write(", ")}e.write("}")},SequenceExpression(t,e){e0(e,t.expressions)},UnaryExpression(t,e){if(t.prefix){const{operator:n,argument:i,argument:{type:r}}=t;e.write(n);const a=JQ(e,i,t);!a&&(n.length>1||r[0]==="U"&&(r[1]==="n"||r[1]==="p")&&i.prefix&&i.operator[0]===n&&(n==="+"||n==="-"))&&e.write(" "),a?(e.write(n.length>1?" (":"("),this[r](i,e),e.write(")")):this[r](i,e)}else this[t.argument.type](t.argument,e),e.write(t.operator)},UpdateExpression(t,e){t.prefix?(e.write(t.operator),this[t.argument.type](t.argument,e)):(this[t.argument.type](t.argument,e),e.write(t.operator))},AssignmentExpression(t,e){this[t.left.type](t.left,e),e.write(" "+t.operator+" "),this[t.right.type](t.right,e)},AssignmentPattern(t,e){this[t.left.type](t.left,e),e.write(" = "),this[t.right.type](t.right,e)},BinaryExpression:IH=function(t,e){const n=t.operator==="in";n&&e.write("("),nM(e,t.left,t,!1),e.write(" "+t.operator+" "),nM(e,t.right,t,!0),n&&e.write(")")},LogicalExpression:IH,ConditionalExpression(t,e){const{test:n}=t,i=e.expressionsPrecedence[n.type];i===iu||i<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[n.type](n,e),e.write(")")):this[n.type](n,e),e.write(" ? "),this[t.consequent.type](t.consequent,e),e.write(" : "),this[t.alternate.type](t.alternate,e)},NewExpression(t,e){e.write("new ");const n=e.expressionsPrecedence[t.callee.type];n===iu||n<e.expressionsPrecedence.CallExpression||lRe(t.callee)?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),e0(e,t.arguments)},CallExpression(t,e){const n=e.expressionsPrecedence[t.callee.type];n===iu||n<e.expressionsPrecedence.CallExpression?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),t.optional&&e.write("?."),e0(e,t.arguments)},ChainExpression(t,e){this[t.expression.type](t.expression,e)},MemberExpression(t,e){const n=e.expressionsPrecedence[t.object.type];n===iu||n<e.expressionsPrecedence.MemberExpression?(e.write("("),this[t.object.type](t.object,e),e.write(")")):this[t.object.type](t.object,e),t.computed?(t.optional&&e.write("?."),e.write("["),this[t.property.type](t.property,e),e.write("]")):(t.optional?e.write("?."):e.write("."),this[t.property.type](t.property,e))},MetaProperty(t,e){e.write(t.meta.name+"."+t.property.name,t)},Identifier(t,e){e.write(t.name,t)},PrivateIdentifier(t,e){e.write(`#${t.name}`,t)},Literal(t,e){t.raw!=null?e.write(t.raw,t):t.regex!=null?this.RegExpLiteral(t,e):t.bigint!=null?e.write(t.bigint+"n",t):e.write(aRe(t.value),t)},RegExpLiteral(t,e){const{regex:n}=t;e.write(`/${n.pattern}/${n.flags}`,t)}},cRe={};class uRe{constructor(e){const n=e??cRe;this.output="",n.output!=null?(this.output=n.output,this.write=this.writeToStream):this.output="",this.generator=n.generator!=null?n.generator:ZQ,this.expressionsPrecedence=n.expressionsPrecedence!=null?n.expressionsPrecedence:sRe,this.indent=n.indent!=null?n.indent:"  ",this.lineEnd=n.lineEnd!=null?n.lineEnd:`
`,this.indentLevel=n.startingIndentLevel!=null?n.startingIndentLevel:0,this.writeComments=n.comments?n.comments:!1,n.sourceMap!=null&&(this.write=n.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=n.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:n.sourceMap.file||n.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,n){this.output+=e,this.map(e,n)}writeToStreamAndMap(e,n){this.output.write(e),this.map(e,n)}map(e,n){if(n!=null){const{type:a}=n;if(a[0]==="L"&&a[2]==="n"){this.column=0,this.line++;return}if(n.loc!=null){const{mapping:s}=this;s.original=n.loc.start,s.name=n.name,this.sourceMap.addMapping(s)}if(a[0]==="T"&&a[8]==="E"||a[0]==="L"&&a[1]==="i"&&typeof n.value=="string"){const{length:s}=e;let{column:o,line:l}=this;for(let c=0;c<s;c++)e[c]===`
`?(o=0,l++):o++;this.column=o,this.line=l;return}}const{length:i}=e,{lineEnd:r}=this;i>0&&(this.lineEndSize>0&&(r.length===1?e[i-1]===r:e.endsWith(r))?(this.line+=this.lineEndSize,this.column=0):this.column+=i)}toString(){return this.output}}function fRe(t,e){const n=new uRe(e);return n.generator[t.type](t,n),n.output}const hRe={};function dRe(t,e){const{SourceMapGenerator:n,filePath:i,handlers:r}=e||hRe,a=n?new n({file:i||"<unknown>.js"}):void 0,s=fRe(t,{comments:!0,generator:{...ZQ,...r},sourceMap:a||void 0}),o=a?a.toJSON():void 0;return{value:s,map:o}}const pRe={JSXAttribute:mRe,JSXClosingElement:gRe,JSXClosingFragment:bRe,JSXElement:yRe,JSXEmptyExpression:vRe,JSXExpressionContainer:xRe,JSXFragment:_Re,JSXIdentifier:SRe,JSXMemberExpression:wRe,JSXNamespacedName:ERe,JSXOpeningElement:MRe,JSXOpeningFragment:TRe,JSXSpreadAttribute:ARe,JSXText:CRe};function mRe(t,e){this[t.name.type](t.name,e),t.value!==null&&t.value!==void 0&&(e.write("="),t.value.type==="Literal"?e.write('"'+QQ(String(t.value.value)).replace(/"/g,"&quot;")+'"',t):this[t.value.type](t.value,e))}function gRe(t,e){e.write("</"),this[t.name.type](t.name,e),e.write(">")}function bRe(t,e){e.write("</>",t)}function yRe(t,e){let n=-1;if(this[t.openingElement.type](t.openingElement,e),t.children)for(;++n<t.children.length;){const i=t.children[n];if(i.type==="JSXSpreadChild")throw new Error("JSX spread children are not supported");this[i.type](i,e)}t.closingElement&&this[t.closingElement.type](t.closingElement,e)}function vRe(){}function xRe(t,e){e.write("{"),this[t.expression.type](t.expression,e),e.write("}")}function _Re(t,e){let n=-1;if(this[t.openingFragment.type](t.openingFragment,e),t.children)for(;++n<t.children.length;){const i=t.children[n];if(i.type==="JSXSpreadChild")throw new Error("JSX spread children are not supported");this[i.type](i,e)}this[t.closingFragment.type](t.closingFragment,e)}function SRe(t,e){e.write(t.name,t)}function wRe(t,e){this[t.object.type](t.object,e),e.write("."),this[t.property.type](t.property,e)}function ERe(t,e){this[t.namespace.type](t.namespace,e),e.write(":"),this[t.name.type](t.name,e)}function MRe(t,e){let n=-1;if(e.write("<"),this[t.name.type](t.name,e),t.attributes)for(;++n<t.attributes.length;)e.write(" "),this[t.attributes[n].type](t.attributes[n],e);e.write(t.selfClosing?" />":">")}function TRe(t,e){e.write("<>",t)}function ARe(t,e){e.write("{"),this.SpreadElement(t,e),e.write("}")}function CRe(t,e){e.write(QQ(t.value).replace(/[<>{}]/g,RRe),t)}function QQ(t){return t.replace(/&(?=[#a-z])/gi,"&amp;")}function RRe(t){return t==="<"?"&lt;":t===">"?"&gt;":t==="{"?"&#123;":"&#125;"}function kRe(){const t=this.data(),e=t.settings||(t.settings={}),n=e.handlers||(e.handlers={});(e.plugins||(e.plugins=[])).push(KQ()),Object.assign(n,pRe)}function DRe(t){const e=this;this.compiler=n;function n(i,r){const a={...e.data("settings"),...t},s=dRe(i,{SourceMapGenerator:a.SourceMapGenerator,filePath:r.path||"unknown.js",handlers:a.handlers});return r.map=s.map,s.value}}function ORe(t,e){const n={type:"Block",value:t.value};e.inherit(t,n),e.comments.push(n);const i={type:"JSXEmptyExpression",comments:[Object.assign({},n,{leading:!1,trailing:!0})]};e.patch(t,i);const r={type:"JSXExpressionContainer",expression:i};return e.patch(t,r),r}function IRe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}class TS{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}TS.prototype.normal={};TS.prototype.property={};TS.prototype.space=void 0;function eee(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new TS(n,i,e)}function hP(t){return t.toLowerCase()}class zo{constructor(e,n){this.attribute=n,this.property=e}}zo.prototype.attribute="";zo.prototype.booleanish=!1;zo.prototype.boolean=!1;zo.prototype.commaOrSpaceSeparated=!1;zo.prototype.commaSeparated=!1;zo.prototype.defined=!1;zo.prototype.mustUseProperty=!1;zo.prototype.number=!1;zo.prototype.overloadedBoolean=!1;zo.prototype.property="";zo.prototype.spaceSeparated=!1;zo.prototype.space=void 0;let NRe=0;const Qn=Ig(),wa=Ig(),dP=Ig(),Vt=Ig(),Tr=Ig(),K0=Ig(),ll=Ig();function Ig(){return 2**++NRe}const pP=Object.freeze(Object.defineProperty({__proto__:null,boolean:Qn,booleanish:wa,commaOrSpaceSeparated:ll,commaSeparated:K0,number:Vt,overloadedBoolean:dP,spaceSeparated:Tr},Symbol.toStringTag,{value:"Module"})),xO=Object.keys(pP);class CB extends zo{constructor(e,n,i,r){let a=-1;if(super(e,n),LH(this,"space",r),typeof i=="number")for(;++a<xO.length;){const s=xO[a];LH(this,xO[a],(i&pP[s])===pP[s])}}}CB.prototype.defined=!0;function LH(t,e,n){n&&(t[e]=n)}function wv(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const a=new CB(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(a.mustUseProperty=!0),e[i]=a,n[hP(i)]=i,n[hP(a.attribute)]=i}return new TS(e,n,t.space)}const tee=wv({properties:{ariaActiveDescendant:null,ariaAtomic:wa,ariaAutoComplete:null,ariaBusy:wa,ariaChecked:wa,ariaColCount:Vt,ariaColIndex:Vt,ariaColSpan:Vt,ariaControls:Tr,ariaCurrent:null,ariaDescribedBy:Tr,ariaDetails:null,ariaDisabled:wa,ariaDropEffect:Tr,ariaErrorMessage:null,ariaExpanded:wa,ariaFlowTo:Tr,ariaGrabbed:wa,ariaHasPopup:null,ariaHidden:wa,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Tr,ariaLevel:Vt,ariaLive:null,ariaModal:wa,ariaMultiLine:wa,ariaMultiSelectable:wa,ariaOrientation:null,ariaOwns:Tr,ariaPlaceholder:null,ariaPosInSet:Vt,ariaPressed:wa,ariaReadOnly:wa,ariaRelevant:null,ariaRequired:wa,ariaRoleDescription:Tr,ariaRowCount:Vt,ariaRowIndex:Vt,ariaRowSpan:Vt,ariaSelected:wa,ariaSetSize:Vt,ariaSort:null,ariaValueMax:Vt,ariaValueMin:Vt,ariaValueNow:Vt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function nee(t,e){return e in t?t[e]:e}function iee(t,e){return nee(t,e.toLowerCase())}const PRe=wv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:K0,acceptCharset:Tr,accessKey:Tr,action:null,allow:null,allowFullScreen:Qn,allowPaymentRequest:Qn,allowUserMedia:Qn,alt:null,as:null,async:Qn,autoCapitalize:null,autoComplete:Tr,autoFocus:Qn,autoPlay:Qn,blocking:Tr,capture:null,charSet:null,checked:Qn,cite:null,className:Tr,cols:Vt,colSpan:null,content:null,contentEditable:wa,controls:Qn,controlsList:Tr,coords:Vt|K0,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Qn,defer:Qn,dir:null,dirName:null,disabled:Qn,download:dP,draggable:wa,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Qn,formTarget:null,headers:Tr,height:Vt,hidden:dP,high:Vt,href:null,hrefLang:null,htmlFor:Tr,httpEquiv:Tr,id:null,imageSizes:null,imageSrcSet:null,inert:Qn,inputMode:null,integrity:null,is:null,isMap:Qn,itemId:null,itemProp:Tr,itemRef:Tr,itemScope:Qn,itemType:Tr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Qn,low:Vt,manifest:null,max:null,maxLength:Vt,media:null,method:null,min:null,minLength:Vt,multiple:Qn,muted:Qn,name:null,nonce:null,noModule:Qn,noValidate:Qn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Qn,optimum:Vt,pattern:null,ping:Tr,placeholder:null,playsInline:Qn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Qn,referrerPolicy:null,rel:Tr,required:Qn,reversed:Qn,rows:Vt,rowSpan:Vt,sandbox:Tr,scope:null,scoped:Qn,seamless:Qn,selected:Qn,shadowRootClonable:Qn,shadowRootDelegatesFocus:Qn,shadowRootMode:null,shape:null,size:Vt,sizes:null,slot:null,span:Vt,spellCheck:wa,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Vt,step:null,style:null,tabIndex:Vt,target:null,title:null,translate:null,type:null,typeMustMatch:Qn,useMap:null,value:wa,width:Vt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Tr,axis:null,background:null,bgColor:null,border:Vt,borderColor:null,bottomMargin:Vt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Qn,declare:Qn,event:null,face:null,frame:null,frameBorder:null,hSpace:Vt,leftMargin:Vt,link:null,longDesc:null,lowSrc:null,marginHeight:Vt,marginWidth:Vt,noResize:Qn,noHref:Qn,noShade:Qn,noWrap:Qn,object:null,profile:null,prompt:null,rev:null,rightMargin:Vt,rules:null,scheme:null,scrolling:wa,standby:null,summary:null,text:null,topMargin:Vt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Vt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Qn,disableRemotePlayback:Qn,prefix:null,property:null,results:Vt,security:null,unselectable:null},space:"html",transform:iee}),LRe=wv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ll,accentHeight:Vt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Vt,amplitude:Vt,arabicForm:null,ascent:Vt,attributeName:null,attributeType:null,azimuth:Vt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Vt,by:null,calcMode:null,capHeight:Vt,className:Tr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Vt,diffuseConstant:Vt,direction:null,display:null,dur:null,divisor:Vt,dominantBaseline:null,download:Qn,dx:null,dy:null,edgeMode:null,editable:null,elevation:Vt,enableBackground:null,end:null,event:null,exponent:Vt,externalResourcesRequired:null,fill:null,fillOpacity:Vt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:K0,g2:K0,glyphName:K0,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Vt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Vt,horizOriginX:Vt,horizOriginY:Vt,id:null,ideographic:Vt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Vt,k:Vt,k1:Vt,k2:Vt,k3:Vt,k4:Vt,kernelMatrix:ll,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Vt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Vt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Vt,overlineThickness:Vt,paintOrder:null,panose1:null,path:null,pathLength:Vt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Tr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Vt,pointsAtY:Vt,pointsAtZ:Vt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ll,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ll,rev:ll,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ll,requiredFeatures:ll,requiredFonts:ll,requiredFormats:ll,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Vt,specularExponent:Vt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Vt,strikethroughThickness:Vt,string:null,stroke:null,strokeDashArray:ll,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Vt,strokeOpacity:Vt,strokeWidth:null,style:null,surfaceScale:Vt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ll,tabIndex:Vt,tableValues:null,target:null,targetX:Vt,targetY:Vt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ll,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Vt,underlineThickness:Vt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Vt,values:null,vAlphabetic:Vt,vMathematical:Vt,vectorEffect:null,vHanging:Vt,vIdeographic:Vt,version:null,vertAdvY:Vt,vertOriginX:Vt,vertOriginY:Vt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Vt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:nee}),ree=wv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),aee=wv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:iee}),see=wv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),URe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},BRe=/[A-Z]/g,UH=/-[a-z]/g,FRe=/^data[-\w.:]+$/i;function zRe(t,e){const n=hP(e);let i=e,r=zo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&FRe.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(UH,HRe);i="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!UH.test(a)){let s=a.replace(BRe,jRe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=CB}return new r(i,e)}function jRe(t){return"-"+t.toLowerCase()}function HRe(t){return t.charAt(1).toUpperCase()}const VRe=eee([tee,PRe,ree,aee,see],"html"),RB=eee([tee,LRe,ree,aee,see],"svg");function GRe(t){return t.join(" ").trim()}var kB={},BH=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,WRe=/\n/g,qRe=/^\s*/,XRe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,YRe=/^:\s*/,$Re=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,KRe=/^[;\s]*/,JRe=/^\s+|\s+$/g,ZRe=`
`,FH="/",zH="*",_m="",QRe="comment",e3e="declaration",t3e=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function r(m){var y=m.match(WRe);y&&(n+=y.length);var v=m.lastIndexOf(ZRe);i=~v?m.length-v:i+m.length}function a(){var m={line:n,column:i};return function(y){return y.position=new s(m),c(),y}}function s(m){this.start=m,this.end={line:n,column:i},this.source=e.source}s.prototype.content=t;function o(m){var y=new Error(e.source+":"+n+":"+i+": "+m);if(y.reason=m,y.filename=e.source,y.line=n,y.column=i,y.source=t,!e.silent)throw y}function l(m){var y=m.exec(t);if(y){var v=y[0];return r(v),t=t.slice(v.length),y}}function c(){l(qRe)}function u(m){var y;for(m=m||[];y=f();)y!==!1&&m.push(y);return m}function f(){var m=a();if(!(FH!=t.charAt(0)||zH!=t.charAt(1))){for(var y=2;_m!=t.charAt(y)&&(zH!=t.charAt(y)||FH!=t.charAt(y+1));)++y;if(y+=2,_m===t.charAt(y-1))return o("End of comment missing");var v=t.slice(2,y-2);return i+=2,r(v),t=t.slice(y),i+=2,m({type:QRe,comment:v})}}function h(){var m=a(),y=l(XRe);if(y){if(f(),!l(YRe))return o("property missing ':'");var v=l($Re),g=m({type:e3e,property:jH(y[0].replace(BH,_m)),value:v?jH(v[0].replace(BH,_m)):_m});return l(KRe),g}}function d(){var m=[];u(m);for(var y;y=h();)y!==!1&&(m.push(y),u(m));return m}return c(),d()};function jH(t){return t?t.replace(JRe,_m):_m}var n3e=tg&&tg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kB,"__esModule",{value:!0});kB.default=r3e;var i3e=n3e(t3e);function r3e(t,e){var n=null;if(!t||typeof t!="string")return n;var i=(0,i3e.default)(t),r=typeof e=="function";return i.forEach(function(a){if(a.type==="declaration"){var s=a.property,o=a.value;r?e(s,o,a):o&&(n=n||{},n[s]=o)}}),n}var iR={};Object.defineProperty(iR,"__esModule",{value:!0});iR.camelCase=void 0;var a3e=/^--[a-zA-Z0-9_-]+$/,s3e=/-([a-z])/g,o3e=/^[^-]+$/,l3e=/^-(webkit|moz|ms|o|khtml)-/,c3e=/^-(ms)-/,u3e=function(t){return!t||o3e.test(t)||a3e.test(t)},f3e=function(t,e){return e.toUpperCase()},HH=function(t,e){return"".concat(e,"-")},h3e=function(t,e){return e===void 0&&(e={}),u3e(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(c3e,HH):t=t.replace(l3e,HH),t.replace(s3e,f3e))};iR.camelCase=h3e;var d3e=tg&&tg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},p3e=d3e(kB),m3e=iR;function mP(t,e){var n={};return!t||typeof t!="string"||(0,p3e.default)(t,function(i,r){i&&r&&(n[(0,m3e.camelCase)(i,e)]=r)}),n}mP.default=mP;var g3e=mP;const b3e=Cc(g3e),gP={}.hasOwnProperty,y3e=/[A-Z]/g,v3e=new Set(["td","th"]);function x3e(t,e){const n=e.schema;let i=n;const r=t.properties||{};n.space==="html"&&t.tagName.toLowerCase()==="svg"&&(i=RB,e.schema=i);const a=e.all(t),s=[];let o,l,c;for(o in r)if(gP.call(r,o)){let f=r[o];const h=zRe(i,o);let d;if(f==null||f===!1||typeof f=="number"&&Number.isNaN(f)||!f&&h.boolean)continue;if(o=e.elementAttributeNameCase==="react"&&h.space?URe[h.property]||h.property:h.attribute,Array.isArray(f)&&(f=h.commaSeparated?IRe(f):GRe(f)),o==="style"){let m=typeof f=="object"?f:_3e(String(f),t.tagName);e.stylePropertyNameCase==="css"&&(m=S3e(m));const y=[];let v;for(v in m)gP.call(m,v)&&y.push({type:"Property",method:!1,shorthand:!1,computed:!1,key:uf(v)?{type:"Identifier",name:v}:{type:"Literal",value:v},value:{type:"Literal",value:String(m[v])},kind:"init"});c=y,d={type:"JSXExpressionContainer",expression:{type:"ObjectExpression",properties:y}}}else if(f===!0)d=null;else if(e.tableCellAlignToStyle&&v3e.has(t.tagName)&&o==="align"){l=String(f);continue}else d={type:"Literal",value:String(f)};uf(o,{jsx:!0})?s.push({type:"JSXAttribute",name:{type:"JSXIdentifier",name:o},value:d}):s.push({type:"JSXSpreadAttribute",argument:{type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,key:{type:"Literal",value:String(o)},value:d||{type:"Literal",value:!0},kind:"init"}]}})}if(l!==void 0){c||(c=[],s.push({type:"JSXAttribute",name:{type:"JSXIdentifier",name:"style"},value:{type:"JSXExpressionContainer",expression:{type:"ObjectExpression",properties:c}}}));const f=e.stylePropertyNameCase==="css"?oee("textAlign"):"textAlign";c.push({type:"Property",method:!1,shorthand:!1,computed:!1,key:uf(f)?{type:"Identifier",name:f}:{type:"Literal",value:f},value:{type:"Literal",value:l},kind:"init"})}e.schema=n;const u={type:"JSXElement",openingElement:{type:"JSXOpeningElement",attributes:s,name:e.createJsxElementName(t.tagName),selfClosing:a.length===0},closingElement:a.length>0?{type:"JSXClosingElement",name:e.createJsxElementName(t.tagName)}:null,children:a};return e.inherit(t,u),u}function _3e(t,e){try{return b3e(t,{reactCompat:!0})}catch(n){const i=n;throw new Error("Could not parse `style` attribute on `"+e+"`",{cause:i})}}function S3e(t){const e={};let n;for(n in t)gP.call(t,n)&&(e[oee(n)]=t[n]);return e}function oee(t){let e=t.replace(y3e,w3e);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function w3e(t){return"-"+t.toLowerCase()}const E3e={}.hasOwnProperty,M3e=[];function VA(t,e){const n=e?[...e].sort(DB):M3e;n.length>0&&lee(t,{comments:n,index:0})}function lee(t,e){if(e.index===e.comments.length)return;const n=[],i=[];let r;for(r in t)if(E3e.call(t,r)){const s=t[r];if(s&&typeof s=="object"&&r!=="comments")if(Array.isArray(s)){let o=-1;for(;++o<s.length;)s[o]&&typeof s[o].type=="string"&&n.push(s[o])}else typeof s.type=="string"&&n.push(s)}n.sort(DB),i.push(...VH(e,t,!1,{leading:!0,trailing:!1}));let a=-1;for(;++a<n.length;)lee(n[a],e);i.push(...VH(e,t,!0,{leading:!1,trailing:n.length>0})),i.length>0&&(t.comments=i)}function VH(t,e,n,i){const r=[];for(;t.comments[t.index]&&DB(t.comments[t.index],e,n)<1;)r.push(Object.assign({},t.comments[t.index++],i));return r}function DB(t,e,n){const i=n?"end":"start";return t.range&&e.range?t.range[0]-e.range[n?1:0]:t.loc&&t.loc.start&&e.loc&&e.loc[i]?t.loc.start.line-e.loc[i].line||t.loc.start.column-e.loc[i].column:"start"in t&&i in e?t.start-e[i]:Number.NaN}function GH(t,e){const n=t.data&&t.data.estree,i=n&&n.comments||[];let r;n&&(e.comments.push(...i),VA(n,n.comments),r=n.body[0]&&n.body[0].type==="ExpressionStatement"&&n.body[0].expression||void 0),r||(r={type:"JSXEmptyExpression"},e.patch(t,r));const a={type:"JSXExpressionContainer",expression:r};return e.inherit(t,a),a}function WH(t,e){const n=e.schema;let i=n;const r=t.attributes||[];let a=-1;t.name&&n.space==="html"&&t.name.toLowerCase()==="svg"&&(i=RB,e.schema=i);const s=e.all(t),o=[];for(;++a<r.length;){const c=r[a],u=c.value;let f;if(c.type==="mdxJsxAttribute"){if(u==null)f=null;else if(typeof u=="object"){const d=u.data&&u.data.estree,m=d&&d.comments||[];let y;d&&(e.comments.push(...m),VA(d,d.comments),y=d.body[0]&&d.body[0].type==="ExpressionStatement"&&d.body[0].expression||void 0),f={type:"JSXExpressionContainer",expression:y||{type:"JSXEmptyExpression"}},e.inherit(u,f)}else f={type:"Literal",value:String(u)};const h={type:"JSXAttribute",name:e.createJsxAttributeName(c.name),value:f};e.inherit(c,h),o.push(h)}else{const h=c.data&&c.data.estree,d=h&&h.comments||[];let m;h&&(e.comments.push(...d),VA(h,h.comments),m=h.body[0]&&h.body[0].type==="ExpressionStatement"&&h.body[0].expression&&h.body[0].expression.type==="ObjectExpression"&&h.body[0].expression.properties&&h.body[0].expression.properties[0]&&h.body[0].expression.properties[0].type==="SpreadElement"&&h.body[0].expression.properties[0].argument||void 0);const y={type:"JSXSpreadAttribute",argument:m||{type:"ObjectExpression",properties:[]}};e.inherit(c,y),o.push(y)}}e.schema=n;const l=t.name?{type:"JSXElement",openingElement:{type:"JSXOpeningElement",attributes:o,name:e.createJsxElementName(t.name),selfClosing:s.length===0},closingElement:s.length>0?{type:"JSXClosingElement",name:e.createJsxElementName(t.name)}:null,children:s}:{type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:s};return e.inherit(t,l),l}function T3e(t,e){const n=t.data&&t.data.estree,i=n&&n.comments||[];n&&(e.comments.push(...i),VA(n,i),e.esm.push(...n.body))}const A3e=/[ \t\n\f\r]/g;function C3e(t){return typeof t=="object"?t.type==="text"?qH(t.value):!1:qH(t)}function qH(t){return t.replace(A3e,"")===""}function R3e(t,e){const n=e.all(t),i=[];let r=-1,a;for(;++r<n.length;){const o=n[r];o.type==="JSXExpressionContainer"&&o.expression.type==="Literal"&&C3e(String(o.expression.value))?a&&a.push(o):(a&&i.push(...a),i.push(o),a=[])}const s={type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:i};return e.inherit(t,s),s}function k3e(t,e){const n=String(t.value||"");if(n){const i={type:"Literal",value:n};e.inherit(t,i);const r={type:"JSXExpressionContainer",expression:i};return e.patch(t,r),r}}const D3e={comment:ORe,doctype:O3e,element:x3e,mdxFlowExpression:GH,mdxJsxFlowElement:WH,mdxJsxTextElement:WH,mdxTextExpression:GH,mdxjsEsm:T3e,root:R3e,text:k3e};function O3e(){}const cee=fee("end"),uee=fee("start");function fee(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function hee(t){const e=uee(t),n=cee(t);if(e&&n)return{start:e,end:n}}const XH={}.hasOwnProperty;function I3e(t,e){const n=e||{};function i(r,...a){let s=i.invalid;const o=i.handlers;if(r&&XH.call(r,t)){const l=String(r[t]);s=XH.call(o,l)?o[l]:i.unknown}if(s)return s.call(this,r,...a)}return i.handlers=n.handlers||{},i.invalid=n.invalid,i.unknown=n.unknown,i}const N3e={}.hasOwnProperty,P3e=new Set(["table","tbody","thead","tfoot","tr"]);function L3e(t){const e=I3e("type",{invalid:U3e,unknown:B3e,handlers:{...D3e,...t.handlers}});return{elementAttributeNameCase:t.elementAttributeNameCase||"react",schema:t.space==="svg"?RB:VRe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1,comments:[],esm:[],all:F3e,createJsxAttributeName:j3e,createJsxElementName:H3e,handle:n,inherit:z3e,patch:dee};function n(i){return e(i,this)}}function U3e(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function B3e(t){throw new Error("Cannot handle unknown node `"+t.type+"`")}function F3e(t){const e=t.children||[];let n=-1;const i=[],r=this.schema.space==="html"&&t.type==="element"&&P3e.has(t.tagName.toLowerCase());for(;++n<e.length;){const a=e[n];if(r&&a.type==="text"&&a.value===`
`)continue;const s=this.handle(a);Array.isArray(s)?i.push(...s):s&&i.push(s)}return i}function z3e(t,e){const n=t.data;let i,r;if(dee(t,e),n){for(r in n)N3e.call(n,r)&&r!=="estree"&&(i||(i={}),i[r]=n[r]);i&&(e.data=i)}}function dee(t,e){const n=hee(t);n&&n.start.offset!==void 0&&n.end.offset!==void 0&&(e.start=n.start.offset,e.end=n.end.offset,e.loc={start:{line:n.start.line,column:n.start.column-1},end:{line:n.end.line,column:n.end.column-1}},e.range=[n.start.offset,n.end.offset])}function j3e(t){const e=pee(t);if(e.type==="JSXMemberExpression")throw new Error("Member expressions in attribute names are not supported");return e}function H3e(t){return pee(t)}function pee(t){if(t.includes(".")){const e=t.split(".");let n=e.shift(),i={type:"JSXIdentifier",name:n};for(;n=e.shift();)i={type:"JSXMemberExpression",object:i,property:{type:"JSXIdentifier",name:n}};return i}if(t.includes(":")){const e=t.split(":");return{type:"JSXNamespacedName",namespace:{type:"JSXIdentifier",name:e[0]},name:{type:"JSXIdentifier",name:e[1]}}}return{type:"JSXIdentifier",name:t}}function V3e(t,e){const n=L3e(e||{});let i=n.handle(t);const r=n.esm;if(i){i.type!=="JSXFragment"&&i.type!=="JSXElement"&&(i={type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:[i]},n.patch(t,i));const s={type:"ExpressionStatement",expression:i};n.patch(t,s),r.push(s)}const a={type:"Program",body:r,sourceType:"module",comments:n.comments};return n.patch(t,a),a}function G3e(t){return function(e){return V3e(e,t)}}function W3e(){return{enter:{mdxFlowExpression:X3e,mdxTextExpression:Y3e},exit:{mdxFlowExpression:YH,mdxFlowExpressionChunk:$H,mdxTextExpression:YH,mdxTextExpressionChunk:$H}}}function q3e(){return{handlers:{mdxFlowExpression:KH,mdxTextExpression:KH},unsafe:[{character:"{",inConstruct:["phrasing"]},{atBreak:!0,character:"{"}]}}function X3e(t){this.enter({type:"mdxFlowExpression",value:""},t),this.buffer()}function Y3e(t){this.enter({type:"mdxTextExpression",value:""},t),this.buffer()}function YH(t){const e=this.resume(),n=t.estree,i=this.stack[this.stack.length-1];i.type==="mdxFlowExpression"||i.type,this.exit(t),i.value=e,n&&(i.data={estree:n})}function $H(t){this.config.enter.data.call(this,t),this.config.exit.data.call(this,t)}function KH(t,e,n){const i=t.value||"";return"{"+n.indentLines(i,function(a,s,o){return(s===0||o?"":"  ")+a})+"}"}function GA(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}const $3e=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],JH={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};function mee(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=48&&e<=57}function K3e(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}function J3e(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}function ZH(t){return J3e(t)||mee(t)}const QH=document.createElement("i");function E_(t){const e="&"+t+";";QH.innerHTML=e;const n=QH.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}const Z3e=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function Q3e(t,e){const n=e||{},i=typeof n.additional=="string"?n.additional.charCodeAt(0):n.additional,r=[];let a=0,s=-1,o="",l,c;n.position&&("start"in n.position||"indent"in n.position?(c=n.position.indent,l=n.position.start):l=n.position);let u=(l?l.line:0)||1,f=(l?l.column:0)||1,h=m(),d;for(a--;++a<=t.length;)if(d===10&&(f=(c?c[s]:0)||1),d=t.charCodeAt(a),d===38){const g=t.charCodeAt(a+1);if(g===9||g===10||g===12||g===32||g===38||g===60||Number.isNaN(g)||i&&g===i){o+=String.fromCharCode(d),f++;continue}const x=a+1;let _=x,E=x,T;if(g===35){E=++_;const H=t.charCodeAt(E);H===88||H===120?(T="hexadecimal",E=++_):T="decimal"}else T="named";let w="",A="",C="";const D=T==="named"?ZH:T==="decimal"?mee:K3e;for(E--;++E<=t.length;){const H=t.charCodeAt(E);if(!D(H))break;C+=String.fromCharCode(H),T==="named"&&$3e.includes(C)&&(w=C,A=E_(C))}let k=t.charCodeAt(E)===59;if(k){E++;const H=T==="named"?E_(C):!1;H&&(w=C,A=H)}let P=1+E-x,B="";if(!(!k&&n.nonTerminated===!1))if(!C)T!=="named"&&y(4,P);else if(T==="named"){if(k&&!A)y(5,1);else if(w!==C&&(E=_+w.length,P=1+E-_,k=!1),!k){const H=w?1:3;if(n.attribute){const G=t.charCodeAt(E);G===61?(y(H,P),A=""):ZH(G)?A="":y(H,P)}else y(H,P)}B=A}else{k||y(2,P);let H=Number.parseInt(C,T==="hexadecimal"?16:10);if(eke(H))y(7,P),B="�";else if(H in JH)y(6,P),B=JH[H];else{let G="";tke(H)&&y(6,P),H>65535&&(H-=65536,G+=String.fromCharCode(H>>>10|55296),H=56320|H&1023),B=G+String.fromCharCode(H)}}if(B){v(),h=m(),a=E-1,f+=E-x+1,r.push(B);const H=m();H.offset++,n.reference&&n.reference.call(n.referenceContext||void 0,B,{start:h,end:H},t.slice(x-1,E)),h=H}else C=t.slice(x-1,E),o+=C,f+=C.length,a=E-1}else d===10&&(u++,s++,f=0),Number.isNaN(d)?v():(o+=String.fromCharCode(d),f++);return r.join("");function m(){return{line:u,column:f,offset:a+((l?l.offset:0)||0)}}function y(g,x){let _;n.warning&&(_=m(),_.column+=x,_.offset+=x,n.warning.call(n.warningContext||void 0,Z3e[g],_,g))}function v(){o&&(r.push(o),n.text&&n.text.call(n.textContext||void 0,o,{start:h,end:m()}),o="")}}function eke(t){return t>=55296&&t<=57343||t>1114111}function tke(t){return t>=1&&t<=8||t===11||t>=13&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534}const nke=/["&'<>`]/g,ike=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rke=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,ake=/[|\\{}()[\]^$+*?.]/g,eV=new WeakMap;function ske(t,e){if(t=t.replace(e.subset?oke(e.subset):nke,i),e.subset||e.escapeOnly)return t;return t.replace(ike,n).replace(rke,i);function n(r,a,s){return e.format((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536,s.charCodeAt(a+2),e)}function i(r,a,s){return e.format(r.charCodeAt(0),s.charCodeAt(a+1),e)}}function oke(t){let e=eV.get(t);return e||(e=lke(t),eV.set(t,e)),e}function lke(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(ake,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function cke(t){return"&#x"+t.toString(16).toUpperCase()+";"}function uke(t,e){return ske(t,Object.assign({format:cke},e))}const gee="  ";function fke(){return{canContainEols:["mdxJsxTextElement"],enter:{mdxJsxFlowTag:i,mdxJsxFlowTagClosingMarker:r,mdxJsxFlowTagAttribute:f,mdxJsxFlowTagExpressionAttribute:h,mdxJsxFlowTagAttributeValueLiteral:t,mdxJsxFlowTagAttributeValueExpression:t,mdxJsxFlowTagSelfClosingMarker:s,mdxJsxTextTag:i,mdxJsxTextTagClosingMarker:r,mdxJsxTextTagAttribute:f,mdxJsxTextTagExpressionAttribute:h,mdxJsxTextTagAttributeValueLiteral:t,mdxJsxTextTagAttributeValueExpression:t,mdxJsxTextTagSelfClosingMarker:s},exit:{mdxJsxFlowTagClosingMarker:o,mdxJsxFlowTagNamePrimary:l,mdxJsxFlowTagNameMember:c,mdxJsxFlowTagNameLocal:u,mdxJsxFlowTagExpressionAttribute:d,mdxJsxFlowTagExpressionAttributeValue:n,mdxJsxFlowTagAttributeNamePrimary:m,mdxJsxFlowTagAttributeNameLocal:y,mdxJsxFlowTagAttributeValueLiteral:v,mdxJsxFlowTagAttributeValueLiteralValue:n,mdxJsxFlowTagAttributeValueExpression:g,mdxJsxFlowTagAttributeValueExpressionValue:n,mdxJsxFlowTagSelfClosingMarker:x,mdxJsxFlowTag:_,mdxJsxTextTagClosingMarker:o,mdxJsxTextTagNamePrimary:l,mdxJsxTextTagNameMember:c,mdxJsxTextTagNameLocal:u,mdxJsxTextTagExpressionAttribute:d,mdxJsxTextTagExpressionAttributeValue:n,mdxJsxTextTagAttributeNamePrimary:m,mdxJsxTextTagAttributeNameLocal:y,mdxJsxTextTagAttributeValueLiteral:v,mdxJsxTextTagAttributeValueLiteralValue:n,mdxJsxTextTagAttributeValueExpression:g,mdxJsxTextTagAttributeValueExpressionValue:n,mdxJsxTextTagSelfClosingMarker:x,mdxJsxTextTag:_}};function t(){this.buffer()}function e(A){return{line:A.line,column:A.column,offset:A.offset}}function n(A){this.config.enter.data.call(this,A),this.config.exit.data.call(this,A)}function i(A){const C={name:void 0,attributes:[],close:!1,selfClosing:!1,start:A.start,end:A.end};this.data.mdxJsxTagStack||(this.data.mdxJsxTagStack=[]),this.data.mdxJsxTag=C,this.buffer()}function r(A){if(this.data.mdxJsxTagStack.length===0)throw new Gi("Unexpected closing slash `/` in tag, expected an open tag first",{start:A.start,end:A.end},"mdast-util-mdx-jsx:unexpected-closing-slash")}function a(A){if(this.data.mdxJsxTag.close)throw new Gi("Unexpected attribute in closing tag, expected the end of the tag",{start:A.start,end:A.end},"mdast-util-mdx-jsx:unexpected-attribute")}function s(A){if(this.data.mdxJsxTag.close)throw new Gi("Unexpected self-closing slash `/` in closing tag, expected the end of the tag",{start:A.start,end:A.end},"mdast-util-mdx-jsx:unexpected-self-closing-slash")}function o(){const A=this.data.mdxJsxTag;A.close=!0}function l(A){const C=this.data.mdxJsxTag;C.name=this.sliceSerialize(A)}function c(A){const C=this.data.mdxJsxTag;C.name+="."+this.sliceSerialize(A)}function u(A){const C=this.data.mdxJsxTag;C.name+=":"+this.sliceSerialize(A)}function f(A){const C=this.data.mdxJsxTag;a.call(this,A),C.attributes.push({type:"mdxJsxAttribute",name:"",value:null,position:{start:e(A.start),end:void 0}})}function h(A){const C=this.data.mdxJsxTag;a.call(this,A),C.attributes.push({type:"mdxJsxExpressionAttribute",value:"",position:{start:e(A.start),end:void 0}}),this.buffer()}function d(A){const C=this.data.mdxJsxTag,D=C.attributes[C.attributes.length-1];D.type;const k=A.estree;D.value=this.resume(),D.position,D.position.end=e(A.end),k&&(D.data={estree:k})}function m(A){const C=this.data.mdxJsxTag,D=C.attributes[C.attributes.length-1];D.type,D.name=this.sliceSerialize(A),D.position,D.position.end=e(A.end)}function y(A){const C=this.data.mdxJsxTag,D=C.attributes[C.attributes.length-1];D.type,D.name+=":"+this.sliceSerialize(A),D.position,D.position.end=e(A.end)}function v(A){const C=this.data.mdxJsxTag,D=C.attributes[C.attributes.length-1];D.value=Q3e(this.resume(),{nonTerminated:!1}),D.position,D.position.end=e(A.end)}function g(A){const C=this.data.mdxJsxTag,D=C.attributes[C.attributes.length-1];D.type;const k={type:"mdxJsxAttributeValueExpression",value:this.resume()},P=A.estree;P&&(k.data={estree:P}),D.value=k,D.position,D.position.end=e(A.end)}function x(){const A=this.data.mdxJsxTag;A.selfClosing=!0}function _(A){const C=this.data.mdxJsxTag,D=this.data.mdxJsxTagStack,k=D[D.length-1];if(C.close&&k.name!==C.name)throw new Gi("Unexpected closing tag `"+w(C)+"`, expected corresponding closing tag for `"+w(k)+"` ("+vc(k)+")",{start:A.start,end:A.end},"mdast-util-mdx-jsx:end-tag-mismatch");this.resume(),C.close?D.pop():this.enter({type:A.type==="mdxJsxTextTag"?"mdxJsxTextElement":"mdxJsxFlowElement",name:C.name||null,attributes:C.attributes,children:[]},A,E),C.selfClosing||C.close?this.exit(A,T):D.push(C)}function E(A,C){const D=this.data.mdxJsxTagStack,k=D[D.length-1],P=A?" before the end of `"+A.type+"`":"",B=A?{start:A.start,end:A.end}:void 0;throw new Gi("Expected a closing tag for `"+w(k)+"` ("+vc({start:C.start,end:C.end})+")"+P,B,"mdast-util-mdx-jsx:end-tag-mismatch")}function T(A,C){const D=this.data.mdxJsxTag;throw new Gi("Expected the closing tag `"+w(D)+"` either after the end of `"+C.type+"` ("+vc(C.end)+") or another opening tag after the start of `"+C.type+"` ("+vc(C.start)+")",{start:A.start,end:A.end},"mdast-util-mdx-jsx:end-tag-mismatch")}function w(A){return"<"+(A.close?"/":"")+(A.name||"")+">"}}function hke(t){const e=t||{},n=e.quote||'"',i=e.quoteSmart||!1,r=e.tightSelfClosing||!1,a=e.printWidth||Number.POSITIVE_INFINITY,s=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize attribute values with `"+n+"` for `options.quote`, expected `\"`, or `'`");return o.peek=pke,{handlers:{mdxJsxFlowElement:o,mdxJsxTextElement:o},unsafe:[{character:"<",inConstruct:["phrasing"]},{atBreak:!0,character:"<"}],fences:!0,resourceLink:!0};function o(l,c,u,f){const h=l.type==="mdxJsxFlowElement",d=l.name?!l.children||l.children.length===0:!1,m=bee(u),y=yee(m),v=u.createTracker(f),g=u.createTracker(f),x=[],_=(h?y:"")+"<"+(l.name||""),E=u.enter(l.type);if(v.move(_),g.move(_),l.attributes&&l.attributes.length>0){if(!l.name)throw new Error("Cannot serialize fragment w/ attributes");let D=-1;for(;++D<l.attributes.length;){const k=l.attributes[D];let P;if(k.type==="mdxJsxExpressionAttribute")P="{"+(k.value||"")+"}";else{if(!k.name)throw new Error("Cannot serialize attribute w/o name");const B=k.value,H=k.name;let G="";if(B!=null)if(typeof B=="object")G="{"+(B.value||"")+"}";else{const V=i&&GA(B,n)>GA(B,s)?s:n;G=V+uke(B,{subset:[V]})+V}P=H+(G?"=":"")+G}x.push(P)}}let T=!1;const w=x.join(" ");h&&(/\r?\n|\r/.test(w)||v.current().now.column+w.length+(d?r?2:3:1)>a)&&(T=!0);let A=v,C=_;if(T){A=g;let D=-1;for(;++D<x.length;)x[D]=y+gee+x[D];C+=A.move(`
`+x.join(`
`)+`
`+y)}else w&&(C+=A.move(" "+w));return d&&(C+=A.move((r||T?"":" ")+"/")),C+=A.move(">"),l.children&&l.children.length>0&&(l.type==="mdxJsxTextElement"?C+=A.move(u.containerPhrasing(l,{...A.current(),before:">",after:"<"})):(A.shift(2),C+=A.move(`
`),C+=A.move(dke(l,u,A.current())),C+=A.move(`
`))),d||(C+=A.move((h?y:"")+"</"+(l.name||"")+">")),E(),C}}function dke(t,e,n){const i=e.indexStack,r=t.children,a=e.createTracker(n),s=yee(bee(e)),o=[];let l=-1;for(i.push(-1);++l<r.length;){const c=r[l];i[i.length-1]=l;const u={before:`
`,after:`
`,...a.current()},f=e.handle(c,t,e,u),h=c.type==="mdxJsxFlowElement"?f:e.indentLines(f,function(d,m,y){return(y?"":s)+d});o.push(a.move(h)),c.type!=="list"&&(e.bulletLastUsed=void 0),l<r.length-1&&o.push(a.move(`

`))}return i.pop(),o.join("")}function bee(t){let e=0,n=t.stack.length;for(;--n>-1;){const i=t.stack[n];if(i==="blockquote"||i==="listItem")break;i==="mdxJsxFlowElement"&&e++}return e}function yee(t){return gee.repeat(t)}function pke(){return"<"}function mke(){return{enter:{mdxjsEsm:bke},exit:{mdxjsEsm:yke,mdxjsEsmData:vke}}}function gke(){return{handlers:{mdxjsEsm:xke}}}function bke(t){this.enter({type:"mdxjsEsm",value:""},t),this.buffer()}function yke(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,this.exit(t);const i=t.estree;n.value=e,i&&(n.data={estree:i})}function vke(t){this.config.enter.data.call(this,t),this.config.exit.data.call(this,t)}function xke(t){return t.value||""}function _ke(){return[W3e(),fke(),mke()]}function Ske(t){return{extensions:[q3e(),hke(t),gke()]}}var wke=fP();const js=gp(/[A-Za-z]/),Gs=gp(/[\dA-Za-z]/),Eke=gp(/[#-'*+\--9=?A-Z^-~]/);function WA(t){return t!==null&&(t<32||t===127)}const bP=gp(/\d/),Mke=gp(/[\dA-Fa-f]/),Tke=gp(/[!-/:-@[-`{-~]/);function hn(t){return t!==null&&t<-2}function Di(t){return t!==null&&(t<0||t===32)}function Kn(t){return t===-2||t===-1||t===32}const rR=gp(new RegExp("\\p{P}|\\p{S}","u")),co=gp(/\s/);function gp(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function yi(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(l){return Kn(l)?(t.enter(n),o(l)):e(l)}function o(l){return Kn(l)&&a++<r?(t.consume(l),o):(t.exit(n),e(l))}}const Ake={}.hasOwnProperty,Cke=Symbol("continue"),_O=Symbol("exit"),Rke=Symbol("skip");function kke(t,e){let n,i;typeof e=="function"?n=e:e&&typeof e=="object"&&(e.enter&&(n=e.enter),e.leave&&(i=e.leave)),r(t,void 0,void 0,[])();function r(a,s,o,l){return SO(a)&&(c.displayName="node ("+a.type+")"),c;function c(){const u=n?tV(n(a,s,o,l)):[];if(u[0]===_O)return u;if(u[0]!==Rke){let f;for(f in a)if(Ake.call(a,f)&&a[f]&&typeof a[f]=="object"&&f!=="data"&&f!=="position"){const h=l.concat(a),d=a[f];if(Array.isArray(d)){const m=d;let y=0;for(;y>-1&&y<m.length;){const v=m[y];if(SO(v)){const g=r(v,f,y,h)();if(g[0]===_O)return g;y=typeof g[1]=="number"?g[1]:y+1}else y++}}else if(SO(d)){const m=r(d,f,void 0,h)();if(m[0]===_O)return m}}}return i?tV(i(a,s,o,l)):u}}}function tV(t){return Array.isArray(t)?t:typeof t=="number"?[Cke,t]:[t]}function SO(t){return!!(t&&typeof t=="object"&&"type"in t&&typeof t.type=="string"&&t.type.length>0)}function vee(t,e){const n=e.prefix||"",i=e.suffix||"",r=Object.assign({},e.acornOptions),a=[],s=[],o=r.onComment,l=r.onToken;let c=!1,u,f;const h=Object.assign({},r,{onComment:a,preserveParens:!0});l&&(h.onToken=s);const d=Dke(t,e.tokenTypes),m=d.value,y=n+m+i,v=e.expression&&nV(m);if(v&&!e.allowEmpty)throw new Gi("Unexpected empty expression",{place:x(0),ruleId:"unexpected-empty-expression",source:"micromark-extension-mdx-expression"});try{u=e.expression&&!v?e.acorn.parseExpressionAt(y,0,h):e.acorn.parse(y,h)}catch(_){const E=_,T=x(E.pos);E.message=String(E.message).replace(/ \(\d+:\d+\)$/,""),E.pos=T.offset,E.loc={line:T.line,column:T.column-1},f=E,c=E.raisedAt>=n.length+m.length||E.message==="Unterminated comment"}if(u&&e.expression&&!v)if(nV(y.slice(u.end,y.length-i.length)))u={type:"Program",start:0,end:n.length+m.length,body:[{type:"ExpressionStatement",expression:u,start:0,end:n.length+m.length}],sourceType:"module",comments:[]};else{const _=x(u.end),E=new Error("Unexpected content after expression");E.pos=_.offset,E.loc={line:_.line,column:_.column-1},f=E,u=void 0}if(u){if(u.comments=a,kke(u,function(_,E,T,w){let A=w[w.length-1],C=E;_.type==="ParenthesizedExpression"&&A&&C&&(typeof T=="number"&&(A=A[C],C=T),A[C]=_.expression),g(_)}),Array.isArray(o))o.push(...a);else if(typeof o=="function")for(const _ of a)o(_.type==="Block",_.value,_.start,_.end,_.loc.start,_.loc.end);for(const _ of s)_.end<=n.length||_.start-n.length>=m.length||(g(_),Array.isArray(l)?l.push(_):l(_))}return{estree:u,error:f,swallow:c};function g(_){const E=x(_.start),T=x(_.end);_.start=E.offset,_.end=T.offset,_.loc={start:{line:E.line,column:E.column-1,offset:E.offset},end:{line:T.line,column:T.column-1,offset:T.offset}},_.range=[_.start,_.end]}function x(_){let E=_-n.length;E<0?E=0:E>m.length&&(E=m.length);let T=Oke(d.stops,E);return T||(T={line:e.start.line,column:e.start.column,offset:e.start.offset}),T}}function nV(t){return/^\s*$/.test(t.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/[^\r\n]*(\r\n|\n|\r)/g,""))}function Dke(t,e){const n={value:"",stops:[]};let i=-1;for(;++i<t.length;){const r=t[i];if(r[0]==="enter"){const a=r[1].type;if(a==="lineEnding"||e.includes(a)){const s=r[2].sliceStream(r[1]);for(;s.length>0&&s[0]===-1;)s.shift();const o=Ike(s);n.stops.push([n.value.length,r[1].start]),n.value+=o,n.stops.push([n.value.length,r[1].end])}}}return n}function Oke(t,e){let n=0;for(;n<t.length&&t[n][0]<=e;)n+=1;if(n===0)return;const[i,r]=t[n-1],a=e-i;return{line:r.line,column:r.column+a,offset:r.offset+a}}function Ike(t){let e=-1;const n=[];let i;for(;++e<t.length;){const r=t[e];let a;if(typeof r=="string")a=r;else switch(r){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a="	";break}case-1:{if(i)continue;a=" ";break}default:a=String.fromCharCode(r)}i=r===-2,n.push(a)}return n.join("")}function oh(t){const e=t||{},n=e.loc||{},i=e.range||[void 0,void 0],r=iV(n.start,i[0]||e.start),a=iV(n.end,i[1]||e.end);if(r&&a)return{start:r,end:a}}function iV(t,e){if(t&&typeof t=="object"){const n="line"in t?wO(t.line):void 0,i="column"in t?wO(t.column):void 0;if(n&&i!==void 0)return{line:n,column:i+1,offset:wO(e)}}}function wO(t){return typeof t=="number"&&t>-1?t:void 0}const Nke=2,k0="https://github.com/micromark/micromark-extension-mdx-expression/tree/main/packages/micromark-extension-mdx-expression",Pke="#unexpected-end-of-file-in-expression-expected-a-corresponding-closing-brace-for-",Lke="#unexpected-lazy-line-in-expression-in-container-expected-line-to-be-prefixed",rV="#unexpected-type-in-code-expected-an-object-spread-spread",Uke="#unexpected-extra-content-in-spread-only-a-single-spread-is-supported",Bke="#could-not-parse-expression-with-acorn";function qA(t,e,n,i,r,a,s,o,l,c,u){const f=this,h=this.events.length+3;let d=0,m,y;return v;function v(E){return t.enter(n),t.enter(i),t.consume(E),t.exit(i),m=f.now(),g}function g(E){if(E===null){if(y)throw y;const T=new Gi("Unexpected end of file in expression, expected a corresponding closing brace for `{`",{place:f.now(),ruleId:"unexpected-eof",source:"micromark-extension-mdx-expression"});throw T.url=k0+Pke,T}if(hn(E))return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),_;if(E===125&&d===0){const T=a?Fke.call(f,a,s,r,h,m,c||!1,l||!1):{type:"ok",estree:void 0};if(T.type==="ok"){t.enter(i),t.consume(E),t.exit(i);const w=t.exit(n);return o&&T.estree&&Object.assign(w,{estree:T.estree}),e}return y=T.message,t.enter(r),t.consume(E),x}return t.enter(r),x(E)}function x(E){return E===125&&d===0||E===null||hn(E)?(t.exit(r),g(E)):(E===123&&!a?d+=1:E===125&&(d-=1),t.consume(E),x)}function _(E){const T=f.now();if(T.line!==m.line&&!u&&f.parser.lazy[T.line]){const w=new Gi("Unexpected lazy line in expression in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",{place:f.now(),ruleId:"unexpected-lazy",source:"micromark-extension-mdx-expression"});throw w.url=k0+Lke,w}return Kn(E)?yi(t,g,"linePrefix",Nke+1)(E):g(E)}}function Fke(t,e,n,i,r,a,s){const o=vee(this.events.slice(i),{acorn:t,tokenTypes:[n],acornOptions:e,start:r,expression:!0,allowEmpty:a,prefix:s?"({":"",suffix:s?"})":""}),l=o.estree;if(s&&l){const c=l.body[0];if(c.type!=="ExpressionStatement"||c.expression.type!=="ObjectExpression"){const u=oh(c),f=new Gi("Unexpected `"+c.type+"` in code: expected an object spread (`{...spread}`)",{place:u.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw f.url=k0+rV,f}if(c.expression.properties[1]){const u=oh(c.expression.properties[1]),f=new Gi("Unexpected extra content in spread: only a single spread is supported",{place:u.start,ruleId:"spread-extra",source:"micromark-extension-mdx-expression"});throw f.url=k0+Uke,f}if(c.expression.properties[0]&&c.expression.properties[0].type!=="SpreadElement"){const u=oh(c.expression.properties[0]),f=new Gi("Unexpected `"+c.expression.properties[0].type+"` in code: only spread elements are supported",{place:u.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw f.url=k0+rV,f}}if(o.error){const c=new Gi("Could not parse expression with acorn",{cause:o.error,place:{line:o.error.loc.line,column:o.error.loc.column+1,offset:o.error.pos},ruleId:"acorn",source:"micromark-extension-mdx-expression"});return c.url=k0+Bke,{type:"nok",message:c}}return{type:"ok",estree:l}}function zke(t){const e=t||{},n=e.addResult,i=e.acorn,r=e.spread;let a=e.allowEmpty,s;if(a==null&&(a=!0),i){if(!i.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");s=Object.assign({ecmaVersion:2024,sourceType:"module"},e.acornOptions)}else if(e.acornOptions||e.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{123:{name:"mdxFlowExpression",tokenize:o,concrete:!0}},text:{123:{name:"mdxTextExpression",tokenize:l}}};function o(c,u,f){const h=this;return d;function d(g){return m(g)}function m(g){return qA.call(h,c,y,"mdxFlowExpression","mdxFlowExpressionMarker","mdxFlowExpressionChunk",i,s,n,r,a)(g)}function y(g){return Kn(g)?yi(c,v,"whitespace")(g):v(g)}function v(g){const x=h.parser.constructs.flow[60],E=(Array.isArray(x)?x:x?[x]:[]).find(function(T){return T.name==="mdxJsxFlowTag"});return g===60&&E?c.attempt(E,v,f)(g):g===null||hn(g)?u(g):f(g)}}function l(c,u){const f=this;return h;function h(d){return qA.call(f,c,u,"mdxTextExpression","mdxTextExpressionMarker","mdxTextExpressionChunk",i,s,n,r,a,!0)(d)}}}const aV="https://github.com/micromark/micromark-extension-mdx-jsx";function xee(t,e,n,i,r,a,s,o,l,c,u,f,h,d,m,y,v,g,x,_,E,T,w,A,C,D,k,P,B,H,G,V){const U=this;let F,q;return X;function X(Z){return t.enter(o),t.enter(l),t.consume(Z),t.exit(l),z}function z(Z){return Di(Z)?n(Z):(F=ce,J(Z))}function ce(Z){if(Z===47)return t.enter(c),t.consume(Z),t.exit(c),F=he,J;if(Z===62)return re(Z);if(Z!==null&&Z>=0&&Yc(Z))return t.enter(f),t.enter(h),t.consume(Z),$;be(Z,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(Z===33?" (note: to create a comment in MDX, use `{/* text */}`)":""))}function he(Z){if(Z===62)return re(Z);if(Z!==null&&Z>=0&&Yc(Z))return t.enter(f),t.enter(h),t.consume(Z),$;be(Z,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(Z===42||Z===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function $(Z){if(Z!==null&&Z>=0&&Nx(Z,{jsx:!0}))return t.consume(Z),$;if(Z===46||Z===47||Z===58||Z===62||Z===123||Di(Z)||co(Z))return t.exit(h),F=Me,J(Z);be(Z,"in name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(Z===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function Me(Z){if(Z===46)return t.enter(d),t.consume(Z),t.exit(d),F=Se,J;if(Z===58)return t.enter(y),t.consume(Z),t.exit(y),F=Ne,J;if(Z===47||Z===62||Z===123||Z!==null&&Z>=0&&Yc(Z))return t.exit(f),ct(Z);be(Z,"after name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Se(Z){if(Z!==null&&Z>=0&&Yc(Z))return t.enter(m),t.consume(Z),pe;be(Z,"before member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function pe(Z){if(Z!==null&&Z>=0&&Nx(Z,{jsx:!0}))return t.consume(Z),pe;if(Z===46||Z===47||Z===62||Z===123||Di(Z)||co(Z))return t.exit(m),F=xe,J(Z);be(Z,"in member name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(Z===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function xe(Z){if(Z===46)return t.enter(d),t.consume(Z),t.exit(d),F=Se,J;if(Z===47||Z===62||Z===123||Z!==null&&Z>=0&&Yc(Z))return t.exit(f),ct(Z);be(Z,"after member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Ne(Z){if(Z!==null&&Z>=0&&Yc(Z))return t.enter(v),t.consume(Z),Ge;be(Z,"before local name","a character that can start a name, such as a letter, `$`, or `_`"+(Z===43||Z!==null&&Z>46&&Z<58?" (note: to create a link in MDX, use `[text](url)`)":""))}function Ge(Z){if(Z!==null&&Z>=0&&Nx(Z,{jsx:!0}))return t.consume(Z),Ge;if(Z===47||Z===62||Z===123||Di(Z)||co(Z))return t.exit(v),F=$e,J(Z);be(Z,"in local name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag")}function $e(Z){if(Z===47||Z===62||Z===123||Z!==null&&Z>=0&&Yc(Z))return t.exit(f),ct(Z);be(Z,"after local name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function ct(Z){if(Z===47)return t.enter(u),t.consume(Z),t.exit(u),F=vt,J;if(Z===62)return re(Z);if(Z===123)return qA.call(U,t,At,g,x,_,i,r,a,!0,!1,s)(Z);if(Z!==null&&Z>=0&&Yc(Z))return t.enter(E),t.enter(T),t.enter(w),t.consume(Z),fe;be(Z,"before attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function At(Z){return F=ct,J(Z)}function fe(Z){if(Z!==null&&Z>=0&&Nx(Z,{jsx:!0}))return t.consume(Z),fe;if(Z===47||Z===58||Z===61||Z===62||Z===123||Di(Z)||co(Z))return t.exit(w),F=Ve,J(Z);be(Z,"in attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function Ve(Z){if(Z===58)return t.enter(A),t.consume(Z),t.exit(A),F=je,J;if(Z===61)return t.exit(T),t.enter(D),t.consume(Z),t.exit(D),F=Ue,J;if(Z===47||Z===62||Z===123||Di(Z)||co(Z)||Z!==null&&Z>=0&&Yc(Z))return t.exit(T),t.exit(E),F=ct,J(Z);be(Z,"after attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function je(Z){if(Z!==null&&Z>=0&&Yc(Z))return t.enter(C),t.consume(Z),ot;be(Z,"before local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function ot(Z){if(Z!==null&&Z>=0&&Nx(Z,{jsx:!0}))return t.consume(Z),ot;if(Z===47||Z===61||Z===62||Z===123||Di(Z)||co(Z))return t.exit(C),t.exit(T),F=Te,J(Z);be(Z,"in local attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function Te(Z){if(Z===61)return t.enter(D),t.consume(Z),t.exit(D),F=Ue,J;if(Z===47||Z===62||Z===123||Z!==null&&Z>=0&&Yc(Z))return t.exit(E),ct(Z);be(Z,"after local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Ue(Z){if(Z===34||Z===39)return t.enter(k),t.enter(P),t.consume(Z),t.exit(P),q=Z,We;if(Z===123)return qA.call(U,t,Oe,H,G,V,i,r,a,!1,!1,s)(Z);be(Z,"before attribute value","a character that can start an attribute value, such as `\"`, `'`, or `{`"+(Z===60?" (note: to use an element or fragment as a prop value in MDX, use `{<element />}`)":""))}function Oe(Z){return t.exit(E),F=ct,J(Z)}function We(Z){return Z===null&&be(Z,"in attribute value","a corresponding closing quote `"+String.fromCodePoint(q)+"`"),Z===q?(t.enter(P),t.consume(Z),t.exit(P),t.exit(k),t.exit(E),q=void 0,F=ct,J):hn(Z)?(F=We,J(Z)):(t.enter(B),Et(Z))}function Et(Z){return Z===null||Z===q||hn(Z)?(t.exit(B),We(Z)):(t.consume(Z),Et)}function vt(Z){if(Z===62)return re(Z);be(Z,"after self-closing slash","`>` to end the tag"+(Z===42||Z===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function re(Z){return t.enter(l),t.consume(Z),t.exit(l),t.exit(o),e}function J(Z){return hn(Z)?(t.enter("lineEnding"),t.consume(Z),t.exit("lineEnding"),se):Kn(Z)||co(Z)?(t.enter("esWhitespace"),ue(Z)):F(Z)}function ue(Z){return hn(Z)?(t.exit("esWhitespace"),J(Z)):Kn(Z)||co(Z)?(t.consume(Z),ue):(t.exit("esWhitespace"),F(Z))}function se(Z){if(!s&&U.parser.lazy[U.now().line]){const Ye=new Gi("Unexpected lazy line in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",U.now(),"micromark-extension-mdx-jsx:unexpected-lazy");throw Ye.url=aV+"#unexpected-lazy-line-in-container-expected-line-to-be",Ye}return J(Z)}function be(Z,Ye,tt){const mt=new Gi("Unexpected "+(Z===null?"end of file":"character `"+(Z===96?"` ` `":String.fromCodePoint(Z))+"` ("+jke(Z)+")")+" "+Ye+", expected "+tt,U.now(),"micromark-extension-mdx-jsx:unexpected-"+(Z===null?"eof":"character"));throw mt.url=aV+(Z===null?"#unexpected-end-of-file-at-expected-expect":"#unexpected-character-at-expected-expect"),mt}}function jke(t){return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Hke(t,e){return{name:"mdxJsxTextTag",tokenize:n};function n(i,r,a){return xee.call(this,i,r,a,t,e.acornOptions,e.addResult,!0,"mdxJsxTextTag","mdxJsxTextTagMarker","mdxJsxTextTagClosingMarker","mdxJsxTextTagSelfClosingMarker","mdxJsxTextTagName","mdxJsxTextTagNamePrimary","mdxJsxTextTagNameMemberMarker","mdxJsxTextTagNameMember","mdxJsxTextTagNamePrefixMarker","mdxJsxTextTagNameLocal","mdxJsxTextTagExpressionAttribute","mdxJsxTextTagExpressionAttributeMarker","mdxJsxTextTagExpressionAttributeValue","mdxJsxTextTagAttribute","mdxJsxTextTagAttributeName","mdxJsxTextTagAttributeNamePrimary","mdxJsxTextTagAttributeNamePrefixMarker","mdxJsxTextTagAttributeNameLocal","mdxJsxTextTagAttributeInitializerMarker","mdxJsxTextTagAttributeValueLiteral","mdxJsxTextTagAttributeValueLiteralMarker","mdxJsxTextTagAttributeValueLiteralValue","mdxJsxTextTagAttributeValueExpression","mdxJsxTextTagAttributeValueExpressionMarker","mdxJsxTextTagAttributeValueExpressionValue")}}function Vke(t,e){return{concrete:!0,name:"mdxJsxFlowTag",tokenize:n};function n(i,r,a){const s=this;return o;function o(f){return l(f)}function l(f){return xee.call(s,i,c,a,t,e.acornOptions,e.addResult,!1,"mdxJsxFlowTag","mdxJsxFlowTagMarker","mdxJsxFlowTagClosingMarker","mdxJsxFlowTagSelfClosingMarker","mdxJsxFlowTagName","mdxJsxFlowTagNamePrimary","mdxJsxFlowTagNameMemberMarker","mdxJsxFlowTagNameMember","mdxJsxFlowTagNamePrefixMarker","mdxJsxFlowTagNameLocal","mdxJsxFlowTagExpressionAttribute","mdxJsxFlowTagExpressionAttributeMarker","mdxJsxFlowTagExpressionAttributeValue","mdxJsxFlowTagAttribute","mdxJsxFlowTagAttributeName","mdxJsxFlowTagAttributeNamePrimary","mdxJsxFlowTagAttributeNamePrefixMarker","mdxJsxFlowTagAttributeNameLocal","mdxJsxFlowTagAttributeInitializerMarker","mdxJsxFlowTagAttributeValueLiteral","mdxJsxFlowTagAttributeValueLiteralMarker","mdxJsxFlowTagAttributeValueLiteralValue","mdxJsxFlowTagAttributeValueExpression","mdxJsxFlowTagAttributeValueExpressionMarker","mdxJsxFlowTagAttributeValueExpressionValue")(f)}function c(f){return Kn(f)?yi(i,u,"whitespace")(f):u(f)}function u(f){const h=s.parser.constructs.flow[123],d=Array.isArray(h)?h:h?[h]:[];let m;for(const y of d)if(y.name==="mdxFlowExpression"){m=y;break}return f===60?o(f):f===123&&m?i.attempt(m,u,a)(f):f===null||hn(f)?r(f):a(f)}}}function Gke(t){const e=t||{},n=e.acorn;let i;if(n){if(!n.parse||!n.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");i=Object.assign({ecmaVersion:2024,sourceType:"module"},e.acornOptions,{locations:!0})}else if(e.acornOptions||e.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{60:Vke(n||void 0,{acornOptions:i,addResult:e.addResult||void 0})},text:{60:Hke(n||void 0,{acornOptions:i,addResult:e.addResult||void 0})}}}function Wke(){return{disable:{null:["autolink","codeIndented","htmlFlow","htmlText"]}}}function Sl(t,e,n,i){const r=t.length;let a=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)s=Array.from(i),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);a<i.length;)s=i.slice(a,a+1e4),s.unshift(e,0),t.splice(...s),a+=1e4,e+=1e4}function ac(t,e){return t.length>0?(Sl(t,t.length,0,e),t):e}function By(t){if(t===null||Di(t)||co(t))return 1;if(rR(t))return 2}function aR(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const a=t[r].resolveAll;a&&!i.includes(a)&&(e=a(e,n),i.push(a))}return e}const yP={name:"attention",resolveAll:qke,tokenize:Xke};function qke(t,e){let n=-1,i,r,a,s,o,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[i][1].end},h={...t[n][1].start};sV(f,-l),sV(h,l),s={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[i][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},a={type:l>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:l>1?"strong":"emphasis",start:{...s.start},end:{...o.end}},t[i][1].end={...s.start},t[n][1].start={...o.end},c=[],t[i][1].end.offset-t[i][1].start.offset&&(c=ac(c,[["enter",t[i][1],e],["exit",t[i][1],e]])),c=ac(c,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",a,e]]),c=ac(c,aR(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),c=ac(c,[["exit",a,e],["enter",o,e],["exit",o,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=ac(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Sl(t,i-1,n-i+3,c),n=i+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Xke(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=By(i);let a;return s;function s(l){return a=l,t.enter("attentionSequence"),o(l)}function o(l){if(l===a)return t.consume(l),o;const c=t.exit("attentionSequence"),u=By(l),f=!u||u===2&&r||n.includes(l),h=!r||r===2&&u||n.includes(i);return c._open=!!(a===42?f:f&&(r||!h)),c._close=!!(a===42?h:h&&(u||!f)),e(l)}}function sV(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Yke={name:"autolink",tokenize:$ke};function $ke(t,e,n){let i=0;return r;function r(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(d){return js(d)?(t.consume(d),s):d===64?n(d):c(d)}function s(d){return d===43||d===45||d===46||Gs(d)?(i=1,o(d)):c(d)}function o(d){return d===58?(t.consume(d),i=0,l):(d===43||d===45||d===46||Gs(d))&&i++<32?(t.consume(d),o):(i=0,c(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||WA(d)?n(d):(t.consume(d),l)}function c(d){return d===64?(t.consume(d),u):Eke(d)?(t.consume(d),c):n(d)}function u(d){return Gs(d)?f(d):n(d)}function f(d){return d===46?(t.consume(d),i=0,u):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):h(d)}function h(d){if((d===45||Gs(d))&&i++<63){const m=d===45?h:f;return t.consume(d),m}return n(d)}}const Ev={partial:!0,tokenize:Kke};function Kke(t,e,n){return i;function i(a){return Kn(a)?yi(t,r,"linePrefix")(a):r(a)}function r(a){return a===null||hn(a)?e(a):n(a)}}const _ee={continuation:{tokenize:Zke},exit:Qke,name:"blockQuote",tokenize:Jke};function Jke(t,e,n){const i=this;return r;function r(s){if(s===62){const o=i.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),a}return n(s)}function a(s){return Kn(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}function Zke(t,e,n){const i=this;return r;function r(s){return Kn(s)?yi(t,a,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return t.attempt(_ee,e,n)(s)}}function Qke(t){t.exit("blockQuote")}const See={name:"characterEscape",tokenize:eDe};function eDe(t,e,n){return i;function i(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),r}function r(a){return Tke(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const wee={name:"characterReference",tokenize:tDe};function tDe(t,e,n){const i=this;let r=0,a,s;return o;function o(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),a=31,s=Gs,u(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,s=Mke,u):(t.enter("characterReferenceValue"),a=7,s=bP,u(f))}function u(f){if(f===59&&r){const h=t.exit("characterReferenceValue");return s===Gs&&!E_(i.sliceSerialize(h))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return s(f)&&r++<a?(t.consume(f),u):n(f)}}const oV={partial:!0,tokenize:iDe},lV={concrete:!0,name:"codeFenced",tokenize:nDe};function nDe(t,e,n){const i=this,r={partial:!0,tokenize:T};let a=0,s=0,o;return l;function l(w){return c(w)}function c(w){const A=i.events[i.events.length-1];return a=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,o=w,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(w)}function u(w){return w===o?(s++,t.consume(w),u):s<3?n(w):(t.exit("codeFencedFenceSequence"),Kn(w)?yi(t,f,"whitespace")(w):f(w))}function f(w){return w===null||hn(w)?(t.exit("codeFencedFence"),i.interrupt?e(w):t.check(oV,y,E)(w)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||hn(w)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(w)):Kn(w)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),yi(t,d,"whitespace")(w)):w===96&&w===o?n(w):(t.consume(w),h)}function d(w){return w===null||hn(w)?f(w):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||hn(w)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(w)):w===96&&w===o?n(w):(t.consume(w),m)}function y(w){return t.attempt(r,E,v)(w)}function v(w){return t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),g}function g(w){return a>0&&Kn(w)?yi(t,x,"linePrefix",a+1)(w):x(w)}function x(w){return w===null||hn(w)?t.check(oV,y,E)(w):(t.enter("codeFlowValue"),_(w))}function _(w){return w===null||hn(w)?(t.exit("codeFlowValue"),x(w)):(t.consume(w),_)}function E(w){return t.exit("codeFenced"),e(w)}function T(w,A,C){let D=0;return k;function k(V){return w.enter("lineEnding"),w.consume(V),w.exit("lineEnding"),P}function P(V){return w.enter("codeFencedFence"),Kn(V)?yi(w,B,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):B(V)}function B(V){return V===o?(w.enter("codeFencedFenceSequence"),H(V)):C(V)}function H(V){return V===o?(D++,w.consume(V),H):D>=s?(w.exit("codeFencedFenceSequence"),Kn(V)?yi(w,G,"whitespace")(V):G(V)):C(V)}function G(V){return V===null||hn(V)?(w.exit("codeFencedFence"),A(V)):C(V)}}}function iDe(t,e,n){const i=this;return r;function r(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a)}function a(s){return i.parser.lazy[i.now().line]?n(s):e(s)}}const EO={name:"codeIndented",tokenize:aDe},rDe={partial:!0,tokenize:sDe};function aDe(t,e,n){const i=this;return r;function r(c){return t.enter("codeIndented"),yi(t,a,"linePrefix",5)(c)}function a(c){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?l(c):hn(c)?t.attempt(rDe,s,l)(c):(t.enter("codeFlowValue"),o(c))}function o(c){return c===null||hn(c)?(t.exit("codeFlowValue"),s(c)):(t.consume(c),o)}function l(c){return t.exit("codeIndented"),e(c)}}function sDe(t,e,n){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?n(s):hn(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r):yi(t,a,"linePrefix",5)(s)}function a(s){const o=i.events[i.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):hn(s)?r(s):n(s)}}const oDe={name:"codeText",previous:cDe,resolve:lDe,tokenize:uDe};function lDe(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function cDe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function uDe(t,e,n){let i=0,r,a;return s;function s(f){return t.enter("codeText"),t.enter("codeTextSequence"),o(f)}function o(f){return f===96?(t.consume(f),i++,o):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(a=t.enter("codeTextSequence"),r=0,u(f)):hn(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||hn(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function u(f){return f===96?(t.consume(f),r++,u):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(a.type="codeTextData",c(f))}}class fDe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Px(this.left,i),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Px(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Px(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Px(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Px(this.left,n.reverse())}}}function Px(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Eee(t){const e={};let n=-1,i,r,a,s,o,l,c;const u=new fDe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(i=u.get(n),n&&i[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=i[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,hDe(u,n)),n=e[n],c=!0);else if(i[1]._container){for(a=n,r=void 0;a--;)if(s=u.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(u.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...u.get(r)[1].start},o=u.slice(r,n),o.unshift(i),u.splice(r,n-r+1,o))}}return Sl(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function hDe(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const a=[];let s=n._tokenizer;s||(s=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const o=s.events,l=[],c={};let u,f,h=-1,d=n,m=0,y=0;const v=[y];for(;d;){for(;t.get(++r)[1]!==d;);a.push(r),d._tokenizer||(u=i.sliceStream(d),d.next||u.push(null),f&&s.defineSkip(d.start),d._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),d._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=d,d=d.next}for(d=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(y=h+1,v.push(y),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(s.events=[],d?(d._tokenizer=void 0,d.previous=void 0):v.pop(),h=v.length;h--;){const g=o.slice(v[h],v[h+1]),x=a.pop();l.push([x,x+g.length-1]),t.splice(x,2,g)}for(l.reverse(),h=-1;++h<l.length;)c[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return c}const dDe={resolve:mDe,tokenize:gDe},pDe={partial:!0,tokenize:bDe};function mDe(t){return Eee(t),t}function gDe(t,e){let n;return i;function i(o){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?a(o):hn(o)?t.check(pDe,s,a)(o):(t.consume(o),r)}function a(o){return t.exit("chunkContent"),t.exit("content"),e(o)}function s(o){return t.consume(o),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function bDe(t,e,n){const i=this;return r;function r(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),yi(t,a,"linePrefix")}function a(s){if(s===null||hn(s))return n(s);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):t.interrupt(i.parser.constructs.flow,n,e)(s)}}function Mee(t,e,n,i,r,a,s,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(g){return g===60?(t.enter(i),t.enter(r),t.enter(a),t.consume(g),t.exit(a),h):g===null||g===32||g===41||WA(g)?n(g):(t.enter(i),t.enter(s),t.enter(o),t.enter("chunkString",{contentType:"string"}),y(g))}function h(g){return g===62?(t.enter(a),t.consume(g),t.exit(a),t.exit(r),t.exit(i),e):(t.enter(o),t.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===62?(t.exit("chunkString"),t.exit(o),h(g)):g===null||g===60||hn(g)?n(g):(t.consume(g),g===92?m:d)}function m(g){return g===60||g===62||g===92?(t.consume(g),d):d(g)}function y(g){return!u&&(g===null||g===41||Di(g))?(t.exit("chunkString"),t.exit(o),t.exit(s),t.exit(i),e(g)):u<c&&g===40?(t.consume(g),u++,y):g===41?(t.consume(g),u--,y):g===null||g===32||g===40||WA(g)?n(g):(t.consume(g),g===92?v:y)}function v(g){return g===40||g===41||g===92?(t.consume(g),y):y(g)}}function Tee(t,e,n,i,r,a){const s=this;let o=0,l;return c;function c(d){return t.enter(i),t.enter(r),t.consume(d),t.exit(r),t.enter(a),u}function u(d){return o>999||d===null||d===91||d===93&&!l||d===94&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?n(d):d===93?(t.exit(a),t.enter(r),t.consume(d),t.exit(r),t.exit(i),e):hn(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),f(d))}function f(d){return d===null||d===91||d===93||hn(d)||o++>999?(t.exit("chunkString"),u(d)):(t.consume(d),l||(l=!Kn(d)),d===92?h:f)}function h(d){return d===91||d===92||d===93?(t.consume(d),o++,f):f(d)}}function Aee(t,e,n,i,r,a){let s;return o;function o(h){return h===34||h===39||h===40?(t.enter(i),t.enter(r),t.consume(h),t.exit(r),s=h===40?41:h,l):n(h)}function l(h){return h===s?(t.enter(r),t.consume(h),t.exit(r),t.exit(i),e):(t.enter(a),c(h))}function c(h){return h===s?(t.exit(a),l(s)):h===null?n(h):hn(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),yi(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===s||h===null||hn(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?f:u)}function f(h){return h===s||h===92?(t.consume(h),u):u(h)}}function F1(t,e){let n;return i;function i(r){return hn(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):Kn(r)?yi(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}function yu(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const yDe={name:"definition",tokenize:xDe},vDe={partial:!0,tokenize:_De};function xDe(t,e,n){const i=this;let r;return a;function a(d){return t.enter("definition"),s(d)}function s(d){return Tee.call(i,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function o(d){return r=yu(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):n(d)}function l(d){return Di(d)?F1(t,c)(d):c(d)}function c(d){return Mee(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function u(d){return t.attempt(vDe,f,f)(d)}function f(d){return Kn(d)?yi(t,h,"whitespace")(d):h(d)}function h(d){return d===null||hn(d)?(t.exit("definition"),i.parser.defined.push(r),e(d)):n(d)}}function _De(t,e,n){return i;function i(o){return Di(o)?F1(t,r)(o):n(o)}function r(o){return Aee(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return Kn(o)?yi(t,s,"whitespace")(o):s(o)}function s(o){return o===null||hn(o)?e(o):n(o)}}const SDe={name:"hardBreakEscape",tokenize:wDe};function wDe(t,e,n){return i;function i(a){return t.enter("hardBreakEscape"),t.consume(a),r}function r(a){return hn(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const EDe={name:"headingAtx",resolve:MDe,tokenize:TDe};function MDe(t,e){let n=t.length-2,i=3,r,a;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},a={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Sl(t,i,n-i+1,[["enter",r,e],["enter",a,e],["exit",a,e],["exit",r,e]])),t}function TDe(t,e,n){let i=0;return r;function r(u){return t.enter("atxHeading"),a(u)}function a(u){return t.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&i++<6?(t.consume(u),s):u===null||Di(u)?(t.exit("atxHeadingSequence"),o(u)):n(u)}function o(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||hn(u)?(t.exit("atxHeading"),e(u)):Kn(u)?yi(t,o,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),o(u))}function c(u){return u===null||u===35||Di(u)?(t.exit("atxHeadingText"),o(u)):(t.consume(u),c)}}const ADe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],cV=["pre","script","style","textarea"],CDe={concrete:!0,name:"htmlFlow",resolveTo:DDe,tokenize:ODe},RDe={partial:!0,tokenize:NDe},kDe={partial:!0,tokenize:IDe};function DDe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function ODe(t,e,n){const i=this;let r,a,s,o,l;return c;function c($){return u($)}function u($){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume($),f}function f($){return $===33?(t.consume($),h):$===47?(t.consume($),a=!0,y):$===63?(t.consume($),r=3,i.interrupt?e:z):js($)?(t.consume($),s=String.fromCharCode($),v):n($)}function h($){return $===45?(t.consume($),r=2,d):$===91?(t.consume($),r=5,o=0,m):js($)?(t.consume($),r=4,i.interrupt?e:z):n($)}function d($){return $===45?(t.consume($),i.interrupt?e:z):n($)}function m($){const Me="CDATA[";return $===Me.charCodeAt(o++)?(t.consume($),o===Me.length?i.interrupt?e:B:m):n($)}function y($){return js($)?(t.consume($),s=String.fromCharCode($),v):n($)}function v($){if($===null||$===47||$===62||Di($)){const Me=$===47,Se=s.toLowerCase();return!Me&&!a&&cV.includes(Se)?(r=1,i.interrupt?e($):B($)):ADe.includes(s.toLowerCase())?(r=6,Me?(t.consume($),g):i.interrupt?e($):B($)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n($):a?x($):_($))}return $===45||Gs($)?(t.consume($),s+=String.fromCharCode($),v):n($)}function g($){return $===62?(t.consume($),i.interrupt?e:B):n($)}function x($){return Kn($)?(t.consume($),x):k($)}function _($){return $===47?(t.consume($),k):$===58||$===95||js($)?(t.consume($),E):Kn($)?(t.consume($),_):k($)}function E($){return $===45||$===46||$===58||$===95||Gs($)?(t.consume($),E):T($)}function T($){return $===61?(t.consume($),w):Kn($)?(t.consume($),T):_($)}function w($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(t.consume($),l=$,A):Kn($)?(t.consume($),w):C($)}function A($){return $===l?(t.consume($),l=null,D):$===null||hn($)?n($):(t.consume($),A)}function C($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||Di($)?T($):(t.consume($),C)}function D($){return $===47||$===62||Kn($)?_($):n($)}function k($){return $===62?(t.consume($),P):n($)}function P($){return $===null||hn($)?B($):Kn($)?(t.consume($),P):n($)}function B($){return $===45&&r===2?(t.consume($),U):$===60&&r===1?(t.consume($),F):$===62&&r===4?(t.consume($),ce):$===63&&r===3?(t.consume($),z):$===93&&r===5?(t.consume($),X):hn($)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(RDe,he,H)($)):$===null||hn($)?(t.exit("htmlFlowData"),H($)):(t.consume($),B)}function H($){return t.check(kDe,G,he)($)}function G($){return t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),V}function V($){return $===null||hn($)?H($):(t.enter("htmlFlowData"),B($))}function U($){return $===45?(t.consume($),z):B($)}function F($){return $===47?(t.consume($),s="",q):B($)}function q($){if($===62){const Me=s.toLowerCase();return cV.includes(Me)?(t.consume($),ce):B($)}return js($)&&s.length<8?(t.consume($),s+=String.fromCharCode($),q):B($)}function X($){return $===93?(t.consume($),z):B($)}function z($){return $===62?(t.consume($),ce):$===45&&r===2?(t.consume($),z):B($)}function ce($){return $===null||hn($)?(t.exit("htmlFlowData"),he($)):(t.consume($),ce)}function he($){return t.exit("htmlFlow"),e($)}}function IDe(t,e,n){const i=this;return r;function r(s){return hn(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a):n(s)}function a(s){return i.parser.lazy[i.now().line]?n(s):e(s)}}function NDe(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Ev,e,n)}}const PDe={name:"htmlText",tokenize:LDe};function LDe(t,e,n){const i=this;let r,a,s;return o;function o(z){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(z),l}function l(z){return z===33?(t.consume(z),c):z===47?(t.consume(z),T):z===63?(t.consume(z),_):js(z)?(t.consume(z),C):n(z)}function c(z){return z===45?(t.consume(z),u):z===91?(t.consume(z),a=0,m):js(z)?(t.consume(z),x):n(z)}function u(z){return z===45?(t.consume(z),d):n(z)}function f(z){return z===null?n(z):z===45?(t.consume(z),h):hn(z)?(s=f,F(z)):(t.consume(z),f)}function h(z){return z===45?(t.consume(z),d):f(z)}function d(z){return z===62?U(z):z===45?h(z):f(z)}function m(z){const ce="CDATA[";return z===ce.charCodeAt(a++)?(t.consume(z),a===ce.length?y:m):n(z)}function y(z){return z===null?n(z):z===93?(t.consume(z),v):hn(z)?(s=y,F(z)):(t.consume(z),y)}function v(z){return z===93?(t.consume(z),g):y(z)}function g(z){return z===62?U(z):z===93?(t.consume(z),g):y(z)}function x(z){return z===null||z===62?U(z):hn(z)?(s=x,F(z)):(t.consume(z),x)}function _(z){return z===null?n(z):z===63?(t.consume(z),E):hn(z)?(s=_,F(z)):(t.consume(z),_)}function E(z){return z===62?U(z):_(z)}function T(z){return js(z)?(t.consume(z),w):n(z)}function w(z){return z===45||Gs(z)?(t.consume(z),w):A(z)}function A(z){return hn(z)?(s=A,F(z)):Kn(z)?(t.consume(z),A):U(z)}function C(z){return z===45||Gs(z)?(t.consume(z),C):z===47||z===62||Di(z)?D(z):n(z)}function D(z){return z===47?(t.consume(z),U):z===58||z===95||js(z)?(t.consume(z),k):hn(z)?(s=D,F(z)):Kn(z)?(t.consume(z),D):U(z)}function k(z){return z===45||z===46||z===58||z===95||Gs(z)?(t.consume(z),k):P(z)}function P(z){return z===61?(t.consume(z),B):hn(z)?(s=P,F(z)):Kn(z)?(t.consume(z),P):D(z)}function B(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),r=z,H):hn(z)?(s=B,F(z)):Kn(z)?(t.consume(z),B):(t.consume(z),G)}function H(z){return z===r?(t.consume(z),r=void 0,V):z===null?n(z):hn(z)?(s=H,F(z)):(t.consume(z),H)}function G(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||Di(z)?D(z):(t.consume(z),G)}function V(z){return z===47||z===62||Di(z)?D(z):n(z)}function U(z){return z===62?(t.consume(z),t.exit("htmlTextData"),t.exit("htmlText"),e):n(z)}function F(z){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),q}function q(z){return Kn(z)?yi(t,X,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):X(z)}function X(z){return t.enter("htmlTextData"),s(z)}}const OB={name:"labelEnd",resolveAll:zDe,resolveTo:jDe,tokenize:HDe},UDe={tokenize:VDe},BDe={tokenize:GDe},FDe={tokenize:WDe};function zDe(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&Sl(t,0,t.length,n),t}function jDe(t,e){let n=t.length,i=0,r,a,s,o;for(;n--;)if(r=t[n][1],a){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(a=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=n);const l={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[a][1].start},end:{...t[s][1].end}},u={type:"labelText",start:{...t[a+i+2][1].end},end:{...t[s-2][1].start}};return o=[["enter",l,e],["enter",c,e]],o=ac(o,t.slice(a+1,a+i+3)),o=ac(o,[["enter",u,e]]),o=ac(o,aR(e.parser.constructs.insideSpan.null,t.slice(a+i+4,s-3),e)),o=ac(o,[["exit",u,e],t[s-2],t[s-1],["exit",c,e]]),o=ac(o,t.slice(s+1)),o=ac(o,[["exit",l,e]]),Sl(t,a,t.length,o),t}function HDe(t,e,n){const i=this;let r=i.events.length,a,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){a=i.events[r][1];break}return o;function o(h){return a?a._inactive?f(h):(s=i.parser.defined.includes(yu(i.sliceSerialize({start:a.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(UDe,u,s?u:f)(h):h===91?t.attempt(BDe,u,s?c:f)(h):s?u(h):f(h)}function c(h){return t.attempt(FDe,u,f)(h)}function u(h){return e(h)}function f(h){return a._balanced=!0,n(h)}}function VDe(t,e,n){return i;function i(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),r}function r(f){return Di(f)?F1(t,a)(f):a(f)}function a(f){return f===41?u(f):Mee(t,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return Di(f)?F1(t,l)(f):u(f)}function o(f){return n(f)}function l(f){return f===34||f===39||f===40?Aee(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return Di(f)?F1(t,u)(f):u(f)}function u(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function GDe(t,e,n){const i=this;return r;function r(o){return Tee.call(i,t,a,s,"reference","referenceMarker","referenceString")(o)}function a(o){return i.parser.defined.includes(yu(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(o):n(o)}function s(o){return n(o)}}function WDe(t,e,n){return i;function i(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),r}function r(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const qDe={name:"labelStartImage",resolveAll:OB.resolveAll,tokenize:XDe};function XDe(t,e,n){const i=this;return r;function r(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),a}function a(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),s):n(o)}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const YDe={name:"labelStartLink",resolveAll:OB.resolveAll,tokenize:$De};function $De(t,e,n){const i=this;return r;function r(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(s):e(s)}}const MO={name:"lineEnding",tokenize:KDe};function KDe(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),yi(t,e,"linePrefix")}}const ZM={name:"thematicBreak",tokenize:JDe};function JDe(t,e,n){let i=0,r;return a;function a(c){return t.enter("thematicBreak"),s(c)}function s(c){return r=c,o(c)}function o(c){return c===r?(t.enter("thematicBreakSequence"),l(c)):i>=3&&(c===null||hn(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===r?(t.consume(c),i++,l):(t.exit("thematicBreakSequence"),Kn(c)?yi(t,o,"whitespace")(c):o(c))}}const Co={continuation:{tokenize:tOe},exit:iOe,name:"list",tokenize:eOe},ZDe={partial:!0,tokenize:rOe},QDe={partial:!0,tokenize:nOe};function eOe(t,e,n){const i=this,r=i.events[i.events.length-1];let a=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return o;function o(d){const m=i.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!i.containerState.marker||d===i.containerState.marker:bP(d)){if(i.containerState.type||(i.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(ZM,n,c)(d):c(d);if(!i.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return n(d)}function l(d){return bP(d)&&++s<10?(t.consume(d),l):(!i.interrupt||s<2)&&(i.containerState.marker?d===i.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),c(d)):n(d)}function c(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||d,t.check(Ev,i.interrupt?n:u,t.attempt(ZDe,h,f))}function u(d){return i.containerState.initialBlankLine=!0,a++,h(d)}function f(d){return Kn(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),h):n(d)}function h(d){return i.containerState.size=a+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function tOe(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Ev,r,a);function r(o){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,yi(t,e,"listItemIndent",i.containerState.size+1)(o)}function a(o){return i.containerState.furtherBlankLines||!Kn(o)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(o)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(QDe,e,s)(o))}function s(o){return i.containerState._closeFlow=!0,i.interrupt=void 0,yi(t,t.attempt(Co,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function nOe(t,e,n){const i=this;return yi(t,r,"listItemIndent",i.containerState.size+1);function r(a){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(a):n(a)}}function iOe(t){t.exit(this.containerState.type)}function rOe(t,e,n){const i=this;return yi(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(a){const s=i.events[i.events.length-1];return!Kn(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const uV={name:"setextUnderline",resolveTo:aOe,tokenize:sOe};function aOe(t,e){let n=t.length,i,r,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const s={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",a?(t.splice(r,0,["enter",s,e]),t.splice(a+1,0,["exit",t[i][1],e]),t[i][1].end={...t[a][1].end}):t[i][1]=s,t.push(["exit",s,e]),t}function sOe(t,e,n){const i=this;let r;return a;function a(c){let u=i.events.length,f;for(;u--;)if(i.events[u][1].type!=="lineEnding"&&i.events[u][1].type!=="linePrefix"&&i.events[u][1].type!=="content"){f=i.events[u][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||f)?(t.enter("setextHeadingLine"),r=c,s(c)):n(c)}function s(c){return t.enter("setextHeadingLineSequence"),o(c)}function o(c){return c===r?(t.consume(c),o):(t.exit("setextHeadingLineSequence"),Kn(c)?yi(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||hn(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const oOe={tokenize:uOe,partial:!0},fV="https://github.com/micromark/micromark-extension-mdxjs-esm",lOe=new Set(["ExportAllDeclaration","ExportDefaultDeclaration","ExportNamedDeclaration","ImportDeclaration"]);function cOe(t){const e={tokenize:r,concrete:!0};if(!t||!t.acorn||!t.acorn.parse)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");const n=t.acorn,i=Object.assign({ecmaVersion:2024,sourceType:"module"},t.acornOptions,{locations:!0});return{flow:{101:e,105:e}};function r(a,s,o){const l=this,c=l.parser.definedModuleSpecifiers||(l.parser.definedModuleSpecifiers=[]),u=this.events.length+1;let f="";return l.interrupt?o:h;function h(x){return l.now().column>1?o(x):(a.enter("mdxjsEsm"),a.enter("mdxjsEsmData"),a.consume(x),f+=String.fromCharCode(x),d)}function d(x){return js(x)?(a.consume(x),f+=String.fromCharCode(x),d):(f==="import"||f==="export")&&x===32?(a.consume(x),m):o(x)}function m(x){return x===null||hn(x)?(a.exit("mdxjsEsmData"),y(x)):(a.consume(x),m)}function y(x){return x===null?g(x):hn(x)?a.check(oOe,g,v)(x):(a.enter("mdxjsEsmData"),m(x))}function v(x){return a.enter("lineEnding"),a.consume(x),a.exit("lineEnding"),y}function g(x){const _=vee(l.events.slice(u),{acorn:n,acornOptions:i,tokenTypes:["mdxjsEsmData"],prefix:c.length>0?"var "+c.join(",")+`
`:""});if(_.error){if(x!==null&&_.swallow)return v(x);const T=new Gi("Could not parse import/exports with acorn",{cause:_.error,place:{line:_.error.loc.line,column:_.error.loc.column+1,offset:_.error.pos},ruleId:"acorn",source:"micromark-extension-mdxjs-esm"});throw T.url=fV+"#could-not-parse-importexports-with-acorn",T}c.length>0&&_.estree.body.shift();let E=-1;for(;++E<_.estree.body.length;){const T=_.estree.body[E];if(!lOe.has(T.type)){const w=new Gi("Unexpected `"+T.type+"` in code: only import/exports are supported",{place:oh(T),ruleId:"non-esm",source:"micromark-extension-mdxjs-esm"});throw w.url=fV+"#unexpected-type-in-code-only-importexports-are-supported",w}if(T.type==="ImportDeclaration"&&!l.interrupt){let w=-1;for(;++w<T.specifiers.length;){const A=T.specifiers[w];c.push(A.local.name)}}}return Object.assign(a.exit("mdxjsEsm"),t.addResult?{estree:_.estree}:void 0),s(x)}}}function uOe(t,e,n){return i;function i(r){return t.enter("lineEndingBlank"),t.consume(r),t.exit("lineEndingBlank"),t.attempt(Ev,e,n)}}const hV={}.hasOwnProperty;function IB(t){const e={};let n=-1;for(;++n<t.length;)fOe(e,t[n]);return e}function fOe(t,e){let n;for(n in e){const r=(hV.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let s;if(a)for(s in a){hV.call(r,s)||(r[s]=[]);const o=a[s];hOe(r[s],Array.isArray(o)?o:o?[o]:[])}}}function hOe(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Sl(t,0,0,i)}function dOe(t){const e=Object.assign({acorn:wke.Parser.extend(KQ()),acornOptions:{ecmaVersion:2024,sourceType:"module"},addResult:!0},t);return IB([cOe(e),zke(e),Gke(e),Wke()])}const pOe={};function mOe(t){const e=this,n=t||pOe,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),a=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),s=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(dOe(n)),a.push(_ke()),s.push(Ske(n))}const gOe={};function NB(t,e){const n=gOe,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Cee(t,i,r)}function Cee(t,e,n){if(bOe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return dV(t.children,e,n)}return Array.isArray(t)?dV(t,e,n):""}function dV(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=Cee(t[r],e,n);return i.join("")}function bOe(t){return!!(t&&typeof t=="object")}function Ree(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Mv(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const a=t.charCodeAt(n);let s="";if(a===37&&Gs(t.charCodeAt(n+1))&&Gs(t.charCodeAt(n+2)))r=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const o=t.charCodeAt(n+1);a<56320&&o>56319&&o<57344?(s=String.fromCharCode(a,o),r=1):s="�"}else s=String.fromCharCode(a);s&&(e.push(t.slice(i,n),encodeURIComponent(s)),i=n+r+1,s=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}const yOe={tokenize:vOe};function vOe(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),yi(t,e,"linePrefix")}function r(o){return t.enter("paragraph"),a(o)}function a(o){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,s(o)}function s(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return hn(o)?(t.consume(o),t.exit("chunkText"),a):(t.consume(o),s)}}const xOe={tokenize:_Oe},pV={tokenize:SOe};function _Oe(t){const e=this,n=[];let i=0,r,a,s;return o;function o(_){if(i<n.length){const E=n[i];return e.containerState=E[1],t.attempt(E[0].continuation,l,c)(_)}return c(_)}function l(_){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&x();const E=e.events.length;let T=E,w;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){w=e.events[T][1].end;break}g(i);let A=E;for(;A<e.events.length;)e.events[A][1].end={...w},A++;return Sl(e.events,T+1,0,e.events.slice(E)),e.events.length=A,c(_)}return o(_)}function c(_){if(i===n.length){if(!r)return h(_);if(r.currentConstruct&&r.currentConstruct.concrete)return m(_);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(pV,u,f)(_)}function u(_){return r&&x(),g(i),h(_)}function f(_){return e.parser.lazy[e.now().line]=i!==n.length,s=e.now().offset,m(_)}function h(_){return e.containerState={},t.attempt(pV,d,m)(_)}function d(_){return i++,n.push([e.currentConstruct,e.containerState]),h(_)}function m(_){if(_===null){r&&x(),g(0),t.consume(_);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:a}),y(_)}function y(_){if(_===null){v(t.exit("chunkFlow"),!0),g(0),t.consume(_);return}return hn(_)?(t.consume(_),v(t.exit("chunkFlow")),i=0,e.interrupt=void 0,o):(t.consume(_),y)}function v(_,E){const T=e.sliceStream(_);if(E&&T.push(null),_.previous=a,a&&(a.next=_),a=_,r.defineSkip(_.start),r.write(T),e.parser.lazy[_.start.line]){let w=r.events.length;for(;w--;)if(r.events[w][1].start.offset<s&&(!r.events[w][1].end||r.events[w][1].end.offset>s))return;const A=e.events.length;let C=A,D,k;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(D){k=e.events[C][1].end;break}D=!0}for(g(i),w=A;w<e.events.length;)e.events[w][1].end={...k},w++;Sl(e.events,C+1,0,e.events.slice(A)),e.events.length=w}}function g(_){let E=n.length;for(;E-- >_;){const T=n[E];e.containerState=T[1],T[0].exit.call(e,t)}n.length=_}function x(){r.write([null]),a=void 0,r=void 0,e.containerState._closeFlow=void 0}}function SOe(t,e,n){return yi(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const wOe={tokenize:EOe};function EOe(t){const e=this,n=t.attempt(Ev,i,t.attempt(this.parser.constructs.flowInitial,r,yi(t,t.attempt(this.parser.constructs.flow,r,t.attempt(dDe,r)),"linePrefix")));return n;function i(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const MOe={resolveAll:Dee()},TOe=kee("string"),AOe=kee("text");function kee(t){return{resolveAll:Dee(t==="text"?COe:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],a=n.attempt(r,s,o);return s;function s(u){return c(u)?a(u):o(u)}function o(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),a(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=r[u];let h=-1;if(f)for(;++h<f.length;){const d=f[h];if(!d.previous||d.previous.call(i,i.previous))return!0}return!1}}}function Dee(t){return e;function e(n,i){let r=-1,a;for(;++r<=n.length;)a===void 0?n[r]&&n[r][1].type==="data"&&(a=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==a+2&&(n[a][1].end=n[r-1][1].end,n.splice(a+2,r-a-2),r=a+2),a=void 0);return t?t(n,i):n}}function COe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let a=r.length,s=-1,o=0,l;for(;a--;){const c=r[a];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)o++,s--;if(s)break;s=-1}else if(c===-2)l=!0,o++;else if(c!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(o=0),o){const c={type:n===t.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:i.start._bufferIndex+s,_index:i.start._index+a,line:i.end.line,column:i.end.column-o,offset:i.end.offset-o},end:{...i.end}};i.end={...c.start},i.start.offset===i.end.offset?Object.assign(i,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const ROe={42:Co,43:Co,45:Co,48:Co,49:Co,50:Co,51:Co,52:Co,53:Co,54:Co,55:Co,56:Co,57:Co,62:_ee},kOe={91:yDe},DOe={[-2]:EO,[-1]:EO,32:EO},OOe={35:EDe,42:ZM,45:[uV,ZM],60:CDe,61:uV,95:ZM,96:lV,126:lV},IOe={38:wee,92:See},NOe={[-5]:MO,[-4]:MO,[-3]:MO,33:qDe,38:wee,42:yP,60:[Yke,PDe],91:YDe,92:[SDe,See],93:OB,95:yP,96:oDe},POe={null:[yP,MOe]},LOe={null:[42,95]},UOe={null:[]},BOe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:LOe,contentInitial:kOe,disable:UOe,document:ROe,flow:OOe,flowInitial:DOe,insideSpan:POe,string:IOe,text:NOe},Symbol.toStringTag,{value:"Module"}));function FOe(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},a=[];let s=[],o=[];const l={attempt:A(T),check:A(w),consume:x,enter:_,exit:E,interrupt:A(w,{interrupt:!0})},c={code:null,containerState:{},defineSkip:y,events:[],now:m,parser:t,previous:null,sliceSerialize:h,sliceStream:d,write:f};let u=e.tokenize.call(c,l);return e.resolveAll&&a.push(e),c;function f(P){return s=ac(s,P),v(),s[s.length-1]!==null?[]:(C(e,0),c.events=aR(a,c.events,c),c.events)}function h(P,B){return jOe(d(P),B)}function d(P){return zOe(s,P)}function m(){const{_bufferIndex:P,_index:B,line:H,column:G,offset:V}=i;return{_bufferIndex:P,_index:B,line:H,column:G,offset:V}}function y(P){r[P.line]=P.column,k()}function v(){let P;for(;i._index<s.length;){const B=s[i._index];if(typeof B=="string")for(P=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===P&&i._bufferIndex<B.length;)g(B.charCodeAt(i._bufferIndex));else g(B)}}function g(P){u=u(P)}function x(P){hn(P)?(i.line++,i.column=1,i.offset+=P===-3?2:1,k()):P!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),c.previous=P}function _(P,B){const H=B||{};return H.type=P,H.start=m(),c.events.push(["enter",H,c]),o.push(H),H}function E(P){const B=o.pop();return B.end=m(),c.events.push(["exit",B,c]),B}function T(P,B){C(P,B.from)}function w(P,B){B.restore()}function A(P,B){return H;function H(G,V,U){let F,q,X,z;return Array.isArray(G)?he(G):"tokenize"in G?he([G]):ce(G);function ce(pe){return xe;function xe(Ne){const Ge=Ne!==null&&pe[Ne],$e=Ne!==null&&pe.null,ct=[...Array.isArray(Ge)?Ge:Ge?[Ge]:[],...Array.isArray($e)?$e:$e?[$e]:[]];return he(ct)(Ne)}}function he(pe){return F=pe,q=0,pe.length===0?U:$(pe[q])}function $(pe){return xe;function xe(Ne){return z=D(),X=pe,pe.partial||(c.currentConstruct=pe),pe.name&&c.parser.constructs.disable.null.includes(pe.name)?Se():pe.tokenize.call(B?Object.assign(Object.create(c),B):c,l,Me,Se)(Ne)}}function Me(pe){return P(X,z),V}function Se(pe){return z.restore(),++q<F.length?$(F[q]):U}}}function C(P,B){P.resolveAll&&!a.includes(P)&&a.push(P),P.resolve&&Sl(c.events,B,c.events.length-B,P.resolve(c.events.slice(B),c)),P.resolveTo&&(c.events=P.resolveTo(c.events,c))}function D(){const P=m(),B=c.previous,H=c.currentConstruct,G=c.events.length,V=Array.from(o);return{from:G,restore:U};function U(){i=P,c.previous=B,c.currentConstruct=H,c.events.length=G,o=V,k()}}function k(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function zOe(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,a=e.end._bufferIndex;let s;if(n===r)s=[t[n].slice(i,a)];else{if(s=t.slice(n,r),i>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(i):s.shift()}a>0&&s.push(t[r].slice(0,a))}return s}function jOe(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const a=t[n];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(a)}r=a===-2,i.push(s)}return i.join("")}function HOe(t){const i={constructs:IB([BOe,...(t||{}).extensions||[]]),content:r(yOe),defined:[],document:r(xOe),flow:r(wOe),lazy:{},string:r(TOe),text:r(AOe)};return i;function r(a){return s;function s(o){return FOe(i,a,o)}}}function VOe(t){for(;!Eee(t););return t}const mV=/[\0\t\n\r]/g;function GOe(){let t=1,e="",n=!0,i;return r;function r(a,s,o){const l=[];let c,u,f,h,d;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),f=0,e="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if(mV.lastIndex=f,c=mV.exec(a),h=c&&c.index!==void 0?c.index:a.length,d=a.charCodeAt(h),!c){e=a.slice(f);break}if(d===10&&f===h&&i)l.push(-3),i=void 0;else switch(i&&(l.push(-5),i=void 0),f<h&&(l.push(a.slice(f,h)),t+=h-f),d){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:i=!0,t=1}f=h+1}return o&&(i&&l.push(-5),e&&l.push(e),l.push(null)),l}}const WOe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function qOe(t){return t.replace(WOe,XOe)}function XOe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),a=r===120||r===88;return Ree(n.slice(a?2:1),a?16:10)}return E_(n)||t}const Oee={}.hasOwnProperty;function YOe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),$Oe(n)(VOe(HOe(n).document().write(GOe()(t,e,!0))))}function $Oe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Oe),autolinkProtocol:D,autolinkEmail:D,atxHeading:a(je),blockQuote:a($e),characterEscape:D,characterReference:D,codeFenced:a(ct),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(ct,s),codeText:a(At,s),codeTextData:D,data:D,codeFlowValue:D,definition:a(fe),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Ve),hardBreakEscape:a(ot),hardBreakTrailing:a(ot),htmlFlow:a(Te,s),htmlFlowData:D,htmlText:a(Te,s),htmlTextData:D,image:a(Ue),label:s,link:a(Oe),listItem:a(Et),listItemValue:h,listOrdered:a(We,f),listUnordered:a(We),paragraph:a(vt),reference:$,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(je),strong:a(re),thematicBreak:a(ue)},exit:{atxHeading:l(),atxHeadingSequence:T,autolink:l(),autolinkEmail:Ge,autolinkProtocol:Ne,blockQuote:l(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:Se,characterReferenceMarkerNumeric:Se,characterReferenceValue:pe,characterReference:xe,codeFenced:l(v),codeFencedFence:y,codeFencedFenceInfo:d,codeFencedFenceMeta:m,codeFlowValue:k,codeIndented:l(g),codeText:l(V),codeTextData:k,data:k,definition:l(),definitionDestinationString:E,definitionLabelString:x,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(B),hardBreakTrailing:l(B),htmlFlow:l(H),htmlFlowData:k,htmlText:l(G),htmlTextData:k,image:l(F),label:X,labelText:q,lineEnding:P,link:l(U),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Me,resourceDestinationString:z,resourceTitleString:ce,resource:he,setextHeading:l(C),setextHeadingLineSequence:A,setextHeadingText:w,strong:l(),thematicBreak:l()}};Iee(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(se){let be={type:"root",children:[]};const Z={stack:[be],tokenStack:[],config:e,enter:o,exit:c,buffer:s,resume:u,data:n},Ye=[];let tt=-1;for(;++tt<se.length;)if(se[tt][1].type==="listOrdered"||se[tt][1].type==="listUnordered")if(se[tt][0]==="enter")Ye.push(tt);else{const mt=Ye.pop();tt=r(se,mt,tt)}for(tt=-1;++tt<se.length;){const mt=e[se[tt][0]];Oee.call(mt,se[tt][1].type)&&mt[se[tt][1].type].call(Object.assign({sliceSerialize:se[tt][2].sliceSerialize},Z),se[tt][1])}if(Z.tokenStack.length>0){const mt=Z.tokenStack[Z.tokenStack.length-1];(mt[1]||gV).call(Z,void 0,mt[0])}for(be.position={start:hd(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:hd(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},tt=-1;++tt<e.transforms.length;)be=e.transforms[tt](be)||be;return be}function r(se,be,Z){let Ye=be-1,tt=-1,mt=!1,Fe,rt,Je,Xt;for(;++Ye<=Z;){const Nt=se[Ye];switch(Nt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Nt[0]==="enter"?tt++:tt--,Xt=void 0;break}case"lineEndingBlank":{Nt[0]==="enter"&&(Fe&&!Xt&&!tt&&!Je&&(Je=Ye),Xt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xt=void 0}if(!tt&&Nt[0]==="enter"&&Nt[1].type==="listItemPrefix"||tt===-1&&Nt[0]==="exit"&&(Nt[1].type==="listUnordered"||Nt[1].type==="listOrdered")){if(Fe){let ht=Ye;for(rt=void 0;ht--;){const zt=se[ht];if(zt[1].type==="lineEnding"||zt[1].type==="lineEndingBlank"){if(zt[0]==="exit")continue;rt&&(se[rt][1].type="lineEndingBlank",mt=!0),zt[1].type="lineEnding",rt=ht}else if(!(zt[1].type==="linePrefix"||zt[1].type==="blockQuotePrefix"||zt[1].type==="blockQuotePrefixWhitespace"||zt[1].type==="blockQuoteMarker"||zt[1].type==="listItemIndent"))break}Je&&(!rt||Je<rt)&&(Fe._spread=!0),Fe.end=Object.assign({},rt?se[rt][1].start:Nt[1].end),se.splice(rt||Ye,0,["exit",Fe,Nt[2]]),Ye++,Z++}if(Nt[1].type==="listItemPrefix"){const ht={type:"listItem",_spread:!1,start:Object.assign({},Nt[1].start),end:void 0};Fe=ht,se.splice(Ye,0,["enter",ht,Nt[2]]),Ye++,Z++,Je=void 0,Xt=!0}}}return se[be][1]._spread=mt,Z}function a(se,be){return Z;function Z(Ye){o.call(this,se(Ye),Ye),be&&be.call(this,Ye)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(se,be,Z){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([be,Z||void 0]),se.position={start:hd(be.start),end:void 0}}function l(se){return be;function be(Z){se&&se.call(this,Z),c.call(this,Z)}}function c(se,be){const Z=this.stack.pop(),Ye=this.tokenStack.pop();if(Ye)Ye[0].type!==se.type&&(be?be.call(this,se,Ye[0]):(Ye[1]||gV).call(this,se,Ye[0]));else throw new Error("Cannot close `"+se.type+"` ("+vc({start:se.start,end:se.end})+"): it’s not open");Z.position.end=hd(se.end)}function u(){return NB(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(se){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];be.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function d(){const se=this.resume(),be=this.stack[this.stack.length-1];be.lang=se}function m(){const se=this.resume(),be=this.stack[this.stack.length-1];be.meta=se}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const se=this.resume(),be=this.stack[this.stack.length-1];be.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const se=this.resume(),be=this.stack[this.stack.length-1];be.value=se.replace(/(\r?\n|\r)$/g,"")}function x(se){const be=this.resume(),Z=this.stack[this.stack.length-1];Z.label=be,Z.identifier=yu(this.sliceSerialize(se)).toLowerCase()}function _(){const se=this.resume(),be=this.stack[this.stack.length-1];be.title=se}function E(){const se=this.resume(),be=this.stack[this.stack.length-1];be.url=se}function T(se){const be=this.stack[this.stack.length-1];if(!be.depth){const Z=this.sliceSerialize(se).length;be.depth=Z}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function A(se){const be=this.stack[this.stack.length-1];be.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function D(se){const Z=this.stack[this.stack.length-1].children;let Ye=Z[Z.length-1];(!Ye||Ye.type!=="text")&&(Ye=J(),Ye.position={start:hd(se.start),end:void 0},Z.push(Ye)),this.stack.push(Ye)}function k(se){const be=this.stack.pop();be.value+=this.sliceSerialize(se),be.position.end=hd(se.end)}function P(se){const be=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Z=be.children[be.children.length-1];Z.position.end=hd(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(be.type)&&(D.call(this,se),k.call(this,se))}function B(){this.data.atHardBreak=!0}function H(){const se=this.resume(),be=this.stack[this.stack.length-1];be.value=se}function G(){const se=this.resume(),be=this.stack[this.stack.length-1];be.value=se}function V(){const se=this.resume(),be=this.stack[this.stack.length-1];be.value=se}function U(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=be,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function F(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=be,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function q(se){const be=this.sliceSerialize(se),Z=this.stack[this.stack.length-2];Z.label=qOe(be),Z.identifier=yu(be).toLowerCase()}function X(){const se=this.stack[this.stack.length-1],be=this.resume(),Z=this.stack[this.stack.length-1];if(this.data.inReference=!0,Z.type==="link"){const Ye=se.children;Z.children=Ye}else Z.alt=be}function z(){const se=this.resume(),be=this.stack[this.stack.length-1];be.url=se}function ce(){const se=this.resume(),be=this.stack[this.stack.length-1];be.title=se}function he(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function Me(se){const be=this.resume(),Z=this.stack[this.stack.length-1];Z.label=be,Z.identifier=yu(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function Se(se){this.data.characterReferenceType=se.type}function pe(se){const be=this.sliceSerialize(se),Z=this.data.characterReferenceType;let Ye;Z?(Ye=Ree(be,Z==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ye=E_(be);const tt=this.stack[this.stack.length-1];tt.value+=Ye}function xe(se){const be=this.stack.pop();be.position.end=hd(se.end)}function Ne(se){k.call(this,se);const be=this.stack[this.stack.length-1];be.url=this.sliceSerialize(se)}function Ge(se){k.call(this,se);const be=this.stack[this.stack.length-1];be.url="mailto:"+this.sliceSerialize(se)}function $e(){return{type:"blockquote",children:[]}}function ct(){return{type:"code",lang:null,meta:null,value:""}}function At(){return{type:"inlineCode",value:""}}function fe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ve(){return{type:"emphasis",children:[]}}function je(){return{type:"heading",depth:0,children:[]}}function ot(){return{type:"break"}}function Te(){return{type:"html",value:""}}function Ue(){return{type:"image",title:null,url:"",alt:null}}function Oe(){return{type:"link",title:null,url:"",children:[]}}function We(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function Et(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function vt(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function J(){return{type:"text",value:""}}function ue(){return{type:"thematicBreak"}}}function hd(t){return{line:t.line,column:t.column,offset:t.offset}}function Iee(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?Iee(t,i):KOe(t,i)}}function KOe(t,e){let n;for(n in e)if(Oee.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function gV(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+vc({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+vc({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+vc({start:e.start,end:e.end})+") is still open")}function JOe(t){const e=this;e.parser=n;function n(i){return YOe(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ZOe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function QOe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function eIe(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function tIe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nIe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function iIe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Mv(i.toLowerCase()),a=t.footnoteOrder.indexOf(i);let s,o=t.footnoteCounts.get(i);o===void 0?(o=0,t.footnoteOrder.push(i),s=t.footnoteOrder.length):s=a+1,o+=1,t.footnoteCounts.set(i,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function rIe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aIe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Nee(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),a=r[0];a&&a.type==="text"?a.value="["+a.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function sIe(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return Nee(t,e);const r={src:Mv(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const a={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,a),t.applyData(e,a)}function oIe(t,e){const n={src:Mv(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function lIe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function cIe(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return Nee(t,e);const r={href:Mv(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const a={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function uIe(t,e){const n={href:Mv(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function fIe(t,e,n){const i=t.all(e),r=n?hIe(n):Pee(e),a={},s=[];if(typeof e.checked=="boolean"){const u=i[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},i.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<i.length;){const u=i[o];(r||o!==0||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!r?s.push(...u.children):s.push(u)}const l=i[i.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:s};return t.patch(e,c),t.applyData(e,c)}function hIe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=Pee(n[i])}return e}function Pee(t){const e=t.spread;return e??t.children.length>1}function dIe(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,a),t.applyData(e,a)}function pIe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mIe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function gIe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bIe(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],s),r.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},o=uee(e.children[1]),l=cee(e.children[e.children.length-1]);o&&l&&(s.position={start:o,end:l}),r.push(s)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function yIe(t,e,n){const i=n?n.children:void 0,a=(i?i.indexOf(e):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,o=s?s.length:e.children.length;let l=-1;const c=[];for(;++l<o;){const f=e.children[l],h={},d=s?s[l]:void 0;d&&(h.align=d);let m={type:"element",tagName:a,properties:h,children:[]};f&&(m.children=t.all(f),t.patch(f,m),m=t.applyData(f,m)),c.push(m)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function vIe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const bV=9,yV=32;function xIe(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const a=[];for(;i;)a.push(vV(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return a.push(vV(e.slice(r),r>0,!1)),a.join("")}function vV(t,e,n){let i=0,r=t.length;if(e){let a=t.codePointAt(i);for(;a===bV||a===yV;)i++,a=t.codePointAt(i)}if(n){let a=t.codePointAt(r-1);for(;a===bV||a===yV;)r--,a=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function _Ie(t,e){const n={type:"text",value:xIe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function SIe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const wIe={blockquote:ZOe,break:QOe,code:eIe,delete:tIe,emphasis:nIe,footnoteReference:iIe,heading:rIe,html:aIe,imageReference:sIe,image:oIe,inlineCode:lIe,linkReference:cIe,link:uIe,listItem:fIe,list:dIe,paragraph:pIe,root:mIe,strong:gIe,table:bIe,tableCell:vIe,tableRow:yIe,text:_Ie,thematicBreak:SIe,toml:iM,yaml:iM,definition:iM,footnoteDefinition:iM};function iM(){}const Lee=-1,sR=0,z1=1,XA=2,PB=3,LB=4,UB=5,BB=6,Uee=7,Bee=8,xV=typeof self=="object"?self:globalThis,EIe=(t,e)=>{const n=(r,a)=>(t.set(a,r),r),i=r=>{if(t.has(r))return t.get(r);const[a,s]=e[r];switch(a){case sR:case Lee:return n(s,r);case z1:{const o=n([],r);for(const l of s)o.push(i(l));return o}case XA:{const o=n({},r);for(const[l,c]of s)o[i(l)]=i(c);return o}case PB:return n(new Date(s),r);case LB:{const{source:o,flags:l}=s;return n(new RegExp(o,l),r)}case UB:{const o=n(new Map,r);for(const[l,c]of s)o.set(i(l),i(c));return o}case BB:{const o=n(new Set,r);for(const l of s)o.add(i(l));return o}case Uee:{const{name:o,message:l}=s;return n(new xV[o](l),r)}case Bee:return n(BigInt(s),r);case"BigInt":return n(Object(BigInt(s)),r);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:o}=new Uint8Array(s);return n(new DataView(o),s)}}return n(new xV[a](s),r)};return i},_V=t=>EIe(new Map,t)(0),t0="",{toString:MIe}={},{keys:TIe}=Object,Lx=t=>{const e=typeof t;if(e!=="object"||!t)return[sR,e];const n=MIe.call(t).slice(8,-1);switch(n){case"Array":return[z1,t0];case"Object":return[XA,t0];case"Date":return[PB,t0];case"RegExp":return[LB,t0];case"Map":return[UB,t0];case"Set":return[BB,t0];case"DataView":return[z1,n]}return n.includes("Array")?[z1,n]:n.includes("Error")?[Uee,n]:[XA,n]},rM=([t,e])=>t===sR&&(e==="function"||e==="symbol"),AIe=(t,e,n,i)=>{const r=(s,o)=>{const l=i.push(s)-1;return n.set(o,l),l},a=s=>{if(n.has(s))return n.get(s);let[o,l]=Lx(s);switch(o){case sR:{let u=s;switch(l){case"bigint":o=Bee,u=s.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return r([Lee],s)}return r([o,u],s)}case z1:{if(l){let h=s;return l==="DataView"?h=new Uint8Array(s.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(s)),r([l,[...h]],s)}const u=[],f=r([o,u],s);for(const h of s)u.push(a(h));return f}case XA:{if(l)switch(l){case"BigInt":return r([l,s.toString()],s);case"Boolean":case"Number":case"String":return r([l,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const u=[],f=r([o,u],s);for(const h of TIe(s))(t||!rM(Lx(s[h])))&&u.push([a(h),a(s[h])]);return f}case PB:return r([o,s.toISOString()],s);case LB:{const{source:u,flags:f}=s;return r([o,{source:u,flags:f}],s)}case UB:{const u=[],f=r([o,u],s);for(const[h,d]of s)(t||!(rM(Lx(h))||rM(Lx(d))))&&u.push([a(h),a(d)]);return f}case BB:{const u=[],f=r([o,u],s);for(const h of s)(t||!rM(Lx(h)))&&u.push(a(h));return f}}const{message:c}=s;return r([o,{name:l,message:c}],s)};return a},SV=(t,{json:e,lossy:n}={})=>{const i=[];return AIe(!(e||n),!!e,new Map,i)(t),i},YA=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?_V(SV(t,e)):structuredClone(t):(t,e)=>_V(SV(t,e));function CIe(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function RIe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function kIe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||CIe,i=t.options.footnoteBackLabel||RIe,r=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",s=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),f=String(c.identifier).toUpperCase(),h=Mv(f.toLowerCase());let d=0;const m=[],y=t.footnoteCounts.get(f);for(;y!==void 0&&++d<=y;){m.length>0&&m.push({type:"text",value:" "});let x=typeof n=="string"?n:n(l,d);typeof x=="string"&&(x={type:"text",value:x}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(l,d),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const v=u[u.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const x=v.children[v.children.length-1];x&&x.type==="text"?x.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...m)}else u.push(...m);const g={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(c,g),o.push(g)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...YA(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const oR=function(t){if(t==null)return NIe;if(typeof t=="function")return lR(t);if(typeof t=="object")return Array.isArray(t)?DIe(t):OIe(t);if(typeof t=="string")return IIe(t);throw new Error("Expected function, string, or object as test")};function DIe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=oR(t[n]);return lR(i);function i(...r){let a=-1;for(;++a<e.length;)if(e[a].apply(this,r))return!0;return!1}}function OIe(t){const e=t;return lR(n);function n(i){const r=i;let a;for(a in t)if(r[a]!==e[a])return!1;return!0}}function IIe(t){return lR(e);function e(n){return n&&n.type===t}}function lR(t){return e;function e(n,i,r){return!!(PIe(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function NIe(){return!0}function PIe(t){return t!==null&&typeof t=="object"&&"type"in t}const Fee=[],LIe=!0,vP=!1,UIe="skip";function zee(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const a=oR(r),s=i?-1:1;o(t,void 0,[])();function o(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const d=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return h;function h(){let d=Fee,m,y,v;if((!e||a(l,c,u[u.length-1]||void 0))&&(d=BIe(n(l,u)),d[0]===vP))return d;if("children"in l&&l.children){const g=l;if(g.children&&d[0]!==UIe)for(y=(i?g.children.length:-1)+s,v=u.concat(g);y>-1&&y<g.children.length;){const x=g.children[y];if(m=o(x,y,v)(),m[0]===vP)return m;y=typeof m[1]=="number"?m[1]:y+s}}return d}}}function BIe(t){return Array.isArray(t)?t:typeof t=="number"?[LIe,t]:t==null?Fee:[t]}function AS(t,e,n,i){let r,a,s;typeof e=="function"&&typeof n!="function"?(a=void 0,s=e,r=n):(a=e,s=n,r=i),zee(t,a,o,r);function o(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return s(l,f,u)}}const xP={}.hasOwnProperty,FIe={};function zIe(t,e){const n=e||FIe,i=new Map,r=new Map,a=new Map,s={...wIe,...n.handlers},o={all:c,applyData:HIe,definitionById:i,footnoteById:r,footnoteCounts:a,footnoteOrder:[],handlers:s,one:l,options:n,patch:jIe,wrap:GIe};return AS(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?i:r,h=String(u.identifier).toUpperCase();f.has(h)||f.set(h,u)}}),o;function l(u,f){const h=u.type,d=o.handlers[h];if(xP.call(o.handlers,h)&&d)return d(o,u,f);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in u){const{children:y,...v}=u,g=YA(v);return g.children=o.all(u),g}return YA(u)}return(o.options.unknownHandler||VIe)(o,u,f)}function c(u){const f=[];if("children"in u){const h=u.children;let d=-1;for(;++d<h.length;){const m=o.one(h[d],u);if(m){if(d&&h[d-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=wV(m.value)),!Array.isArray(m)&&m.type==="element")){const y=m.children[0];y&&y.type==="text"&&(y.value=wV(y.value))}Array.isArray(m)?f.push(...m):f.push(m)}}}return f}}function jIe(t,e){t.position&&(e.position=hee(t))}function HIe(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,a=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const s="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:s}}n.type==="element"&&a&&Object.assign(n.properties,YA(a)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function VIe(t,e){const n=e.data||{},i="value"in e&&!(xP.call(n,"hProperties")||xP.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function GIe(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function wV(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function EV(t,e){const n=zIe(t,e),i=n.one(t,void 0),r=kIe(n),a=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&a.children.push({type:"text",value:`
`},r),a}function WIe(t,e){return t&&"run"in t?async function(n,i){const r=EV(n,{file:i,...e});await t.run(r,i)}:function(n,i){return EV(n,{file:i,...t||e})}}function MV(t){if(t)throw t}var QM=Object.prototype.hasOwnProperty,jee=Object.prototype.toString,TV=Object.defineProperty,AV=Object.getOwnPropertyDescriptor,CV=function(e){return typeof Array.isArray=="function"?Array.isArray(e):jee.call(e)==="[object Array]"},RV=function(e){if(!e||jee.call(e)!=="[object Object]")return!1;var n=QM.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&QM.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var r;for(r in e);return typeof r>"u"||QM.call(e,r)},kV=function(e,n){TV&&n.name==="__proto__"?TV(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},DV=function(e,n){if(n==="__proto__")if(QM.call(e,n)){if(AV)return AV(e,n).value}else return;return e[n]},qIe=function t(){var e,n,i,r,a,s,o=arguments[0],l=1,c=arguments.length,u=!1;for(typeof o=="boolean"&&(u=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)i=DV(o,n),r=DV(e,n),o!==r&&(u&&r&&(RV(r)||(a=CV(r)))?(a?(a=!1,s=i&&CV(i)?i:[]):s=i&&RV(i)?i:{},kV(o,{name:n,newValue:t(u,s,r)})):typeof r<"u"&&kV(o,{name:n,newValue:r}));return o};const TO=Cc(qIe);function _P(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function XIe(){const t=[],e={run:n,use:i};return e;function n(...r){let a=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...r);function o(l,...c){const u=t[++a];let f=-1;if(l){s(l);return}for(;++f<r.length;)(c[f]===null||c[f]===void 0)&&(c[f]=r[f]);r=c,u?YIe(u,o)(...c):s(null,...c)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function YIe(t,e){let n;return i;function i(...s){const o=t.length>s.length;let l;o&&s.push(r);try{l=t.apply(this,s)}catch(c){const u=c;if(o&&n)throw u;return r(u)}o||(l&&l.then&&typeof l.then=="function"?l.then(a,r):l instanceof Error?r(l):a(l))}function r(s,...o){n||(n=!0,e(s,...o))}function a(s){r(null,s)}}const $Ie=function(t){const i=this.constructor.prototype,r=i[t],a=function(){return r.apply(a,arguments)};return Object.setPrototypeOf(a,i),a},KIe={}.hasOwnProperty;class FB extends $Ie{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=XIe()}copy(){const e=new FB;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(TO(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(RO("data",this.frozen),this.namespace[e]=n,this):KIe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(RO("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=aM(e),i=this.parser||this.Parser;return AO("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),AO("process",this.parser||this.Parser),CO("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(a,s){const o=aM(e),l=i.parse(o);i.run(l,o,function(u,f,h){if(u||!f||!h)return c(u);const d=f,m=i.stringify(d,h);QIe(m)?h.value=m:h.result=m,c(u,h)});function c(u,f){u||!f?s(u):a?a(f):n(void 0,f)}}}processSync(e){let n=!1,i;return this.freeze(),AO("processSync",this.parser||this.Parser),CO("processSync",this.compiler||this.Compiler),this.process(e,r),IV("processSync","process",n),i;function r(a,s){n=!0,MV(a),i=s}}run(e,n,i){OV(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?a(void 0,i):new Promise(a);function a(s,o){const l=aM(n);r.run(e,l,c);function c(u,f,h){const d=f||e;u?o(u):s?s(d):i(void 0,d,h)}}}runSync(e,n){let i=!1,r;return this.run(e,n,a),IV("runSync","run",i),r;function a(s,o){MV(s),r=o,i=!0}}stringify(e,n){this.freeze();const i=aM(n),r=this.compiler||this.Compiler;return CO("stringify",r),OV(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(RO("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?o(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(c.plugins),c.settings&&(r.settings=TO(!0,r.settings,c.settings))}function o(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];a(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,h=-1;for(;++f<i.length;)if(i[f][0]===c){h=f;break}if(h===-1)i.push([c,...u]);else if(u.length>0){let[d,...m]=u;const y=i[h][1];_P(y)&&_P(d)&&(d=TO(!0,y,d)),i[h]=[c,d,...m]}}}}const JIe=new FB().freeze();function AO(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function CO(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function RO(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function OV(t){if(!_P(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function IV(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function aM(t){return ZIe(t)?t:new XQ(t)}function ZIe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function QIe(t){return typeof t=="string"||eNe(t)}function eNe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}function _d(t,e){const n=["start","end","loc","range"];let i=-1;for(;++i<n.length;){const r=n[i];r in t&&(e[r]=t[r])}}function zB(t,e){let n=-1;const i=[],r=[];let a;for(;++n<t.length;){const s=t[n];s.type==="ImportNamespaceSpecifier"?a=s:r.push(s)}if(a){const s={type:"VariableDeclarator",id:a.local,init:e};_d(a,s),i.push(s)}return i.push({type:"VariableDeclarator",id:{type:"ObjectPattern",properties:r.map(function(s){let o=s.type==="ImportSpecifier"?s.imported:s.type==="ExportSpecifier"?s.exported:{type:"Identifier",name:"default"},l=s.local;s.type==="ExportSpecifier"&&(l=o,o=s.local),l.type;const c={type:"Property",kind:"init",shorthand:o.type==="Identifier"&&l.type==="Identifier"&&o.name===l.name,method:!1,computed:!1,key:o,value:l};return _d(s,c),c})},init:a?{type:"Identifier",name:a.local.name}:e}),i}function Yd(t){let e=-1,n;for(;++e<t.length;){const i=t[e],r=typeof i=="string"&&uf(i)?{type:"Identifier",name:i}:{type:"Literal",value:i};n=n?{type:"MemberExpression",object:n,property:r,computed:r.type==="Literal",optional:!1}:r}return n.type,n}function NV(t){let e=-1,n;for(;++e<t.length;){const i=t[e];typeof i=="string"&&uf(i,{jsx:!0});const r={type:"JSXIdentifier",name:i};n=n?{type:"JSXMemberExpression",object:n,property:r}:r}return n}function tNe(t){const{outputFormat:e}=t||{};return function(n){if(n.comments&&(n.comments=n.comments.filter(function(i){return!i.data?._mdxIsPragmaComment})),e==="function-body"){let i=0;for(;i<n.body.length;){const a=n.body[i];if("directive"in a&&a.directive)i++;else break}const r=n.body[i];r&&r.type==="ImportDeclaration"&&typeof r.source.value=="string"&&/\/jsx-(dev-)?runtime$/.test(r.source.value)&&(n.body[i]={type:"VariableDeclaration",kind:"const",declarations:zB(r.specifiers,Yd(["arguments",0]))})}}}function Hee(){const t=[{block:!1,defined:[]}];return{enter:e,exit:n,scopes:t};function e(a){if(a.type==="ArrowFunctionExpression"){t.push({block:!1,defined:[]});for(const s of a.params)r(s,!1)}else if(a.type==="BlockStatement"||a.type==="DoWhileStatement"||a.type==="ForInStatement"||a.type==="ForOfStatement"||a.type==="ForStatement"||a.type==="WhileStatement")t.push({block:!0,defined:[]});else if(a.type==="CatchClause")t.push({block:!0,defined:[]}),a.param&&r(a.param,!0);else if(a.type==="ClassDeclaration")i(a.id.name,!1);else if(a.type==="FunctionDeclaration"){i(a.id.name,!1),t.push({block:!1,defined:[]});for(const s of a.params)r(s,!1)}else if(a.type==="FunctionExpression"){a.id&&i(a.id.name,!1),t.push({block:!1,defined:[]});for(const s of a.params)r(s,!1)}else if(a.type==="ImportDeclaration")for(const s of a.specifiers)i(s.local.name,!1);else if(a.type==="VariableDeclaration")for(const s of a.declarations)r(s.id,a.kind!=="var")}function n(a){if(a.type==="ArrowFunctionExpression"||a.type==="FunctionDeclaration"||a.type==="FunctionExpression"){const s=t.pop();s.block}else if(a.type==="BlockStatement"||a.type==="CatchClause"||a.type==="DoWhileStatement"||a.type==="ForInStatement"||a.type==="ForOfStatement"||a.type==="ForStatement"||a.type==="WhileStatement"){const s=t.pop();s.block}}function i(a,s){let o=t.length,l;for(;o--&&(l=t[o],!(s||!l.block)););l.defined.push(a)}function r(a,s){if(a.type==="ArrayPattern")for(const o of a.elements)o&&r(o,s);else if(a.type==="AssignmentPattern")r(a.left,s);else if(a.type==="Identifier")i(a.name,s);else if(a.type==="ObjectPattern")for(const o of a.properties)o.type==="Property"?r(o.value,s):(o.type,r(o,s));else a.type,r(a.argument,s)}}function nNe(t){return t.type==="FunctionDeclaration"?{...t,type:"FunctionExpression"}:(t.type,{...t,type:"ClassExpression"})}function iNe(t){return t.type==="FunctionDeclaration"||t.type==="ClassDeclaration"||t.type==="VariableDeclaration"}function rNe(t){const e=t.baseUrl||void 0,n=typeof e=="object"?e.href:e,i=t.outputFormat||"program",r=t.pragma===void 0?"React.createElement":t.pragma,a=t.pragmaFrag===void 0?"React.Fragment":t.pragmaFrag,s=t.pragmaImportSource||"react",o=t.jsxImportSource||"react",l=t.jsxRuntime||"automatic";return function(u,f){const h=[],d=[];let m=0,y,v,g;if(l==="classic"&&a&&sM(u,"@jsxFrag",a),l==="classic"&&r&&sM(u,"@jsx",r),l==="automatic"&&o&&sM(u,"@jsxImportSource",o),sM(u,"@jsxRuntime",l),l==="classic"&&s){if(!r)throw new Error("Missing `pragma` in classic runtime with `pragmaImportSource`");T({type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:{type:"Identifier",name:r.split(".")[0]}}],source:{type:"Literal",value:s}})}for(g of u.body)if(g.type==="ExportDefaultDeclaration")y&&f.fail("Unexpected duplicate layout, expected a single layout (previous: "+vc(oh(y))+")",{ancestors:[u,g],place:oh(g),ruleId:"duplicate-layout",source:"recma-document"}),y=g,d.push({type:"VariableDeclaration",kind:"const",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"MDXLayout"},init:iNe(g.declaration)?nNe(g.declaration):g.declaration}]});else if(g.type==="ExportNamedDeclaration"&&g.source){const w=g.source;g.specifiers=g.specifiers.filter(function(A){if(A.exported.type==="Identifier"&&A.exported.name==="default"){y&&f.fail("Unexpected duplicate layout, expected a single layout (previous: "+vc(oh(y))+")",{ancestors:[u,g,A],place:oh(g),ruleId:"duplicate-layout",source:"recma-document"}),y=A;const C=[];if(A.local.type==="Identifier"&&A.local.name==="default")C.push({type:"ImportDefaultSpecifier",local:{type:"Identifier",name:"MDXLayout"}});else{const P={type:"ImportSpecifier",imported:A.local,local:{type:"Identifier",name:"MDXLayout"}};_d(A.local,P),C.push(P)}const D={type:"Literal",value:w.value};_d(w,D);const k={type:"ImportDeclaration",specifiers:C,source:D};return _d(A,k),T(k),!1}return!0}),g.specifiers.length>0&&E(g)}else g.type==="ExportNamedDeclaration"||g.type==="ExportAllDeclaration"?E(g):g.type==="ImportDeclaration"?T(g):g.type==="ExpressionStatement"&&(g.expression.type==="JSXElement"||g.expression.type==="JSXFragment")?(v=!0,d.push(...c(g.expression,i,!!y))):d.push(g);v||d.push(...c(void 0,i,!!y)),h.push(["MDXContent","default"]),i==="function-body"&&d.push({type:"ReturnStatement",argument:{type:"ObjectExpression",properties:[...Array.from({length:m}).map(function(w,A){return{type:"SpreadElement",argument:{type:"Identifier",name:"_exportAll"+(A+1)}}}),...h.map(function(w){return{type:"Property",kind:"init",method:!1,computed:!1,shorthand:typeof w=="string",key:{type:"Identifier",name:typeof w=="string"?w:w[1]},value:{type:"Identifier",name:typeof w=="string"?w:w[0]}}})]}}),u.body=d;let x=!1,_=!1;(n||i==="function-body")&&$0(u,{enter(w){if((w.type==="ExportAllDeclaration"||w.type==="ExportNamedDeclaration"||w.type==="ImportDeclaration")&&w.source){let A=w.source.value;try{new URL(A)}catch{(A.startsWith("/")||A.startsWith("./")||A.startsWith("../"))&&(A=new URL(A,n).href)}const C={type:"Literal",value:A};_d(w.source,C),w.source=C;return}if(w.type==="ImportExpression"){_=!0;const A={type:"CallExpression",callee:{type:"Identifier",name:"_resolveDynamicMdxSpecifier"},arguments:[w.source],optional:!1};w.source=A;return}if(w.type==="MemberExpression"&&"object"in w&&w.object.type==="MetaProperty"&&w.property.type==="Identifier"&&w.object.meta.name==="import"&&w.object.property.name==="meta"&&w.property.name==="url"){x=!0;const A={type:"Identifier",name:"_importMetaUrl"};_d(w,A),this.replace(A)}}}),_&&(n||(x=!0),u.body.push(aNe(n?{type:"Literal",value:n}:{type:"Identifier",name:"_importMetaUrl"}))),x&&u.body.unshift(...sNe());function E(w){if(w.type==="ExportNamedDeclaration"){if(w.declaration){const A=Hee();$0(w,{enter(C){A.enter(C),(C.type==="ArrowFunctionExpression"||C.type==="FunctionDeclaration"||C.type==="FunctionExpression")&&(this.skip(),A.exit(C))},leave:A.exit}),h.push(...A.scopes[0].defined)}for(g of w.specifiers)g.exported.type==="Identifier"?h.push(g.exported.name):(g.exported.value,h.push(g.exported.value))}T(w)}function T(w){let A,C;if(i==="function-body")if(w.type==="ImportDeclaration"||w.type==="ExportAllDeclaration"||w.type==="ExportNamedDeclaration"&&w.source){w.source;const D={type:"ImportExpression",source:w.source};_d(w,D),C={type:"AwaitExpression",argument:D},(w.type==="ImportDeclaration"||w.type==="ExportNamedDeclaration")&&w.specifiers.length===0?A={type:"ExpressionStatement",expression:C}:A={type:"VariableDeclaration",kind:"const",declarations:w.type==="ExportAllDeclaration"?[{type:"VariableDeclarator",id:{type:"Identifier",name:"_exportAll"+ ++m},init:C}]:zB(w.specifiers,C)}}else if(w.declaration)A=w.declaration;else{const D=[];for(const k of w.specifiers)k.exported.type==="Identifier"&&k.local.type==="Identifier"&&k.local.name!==k.exported.name&&D.push({type:"VariableDeclarator",id:k.exported,init:k.local});D.length>0&&(A={type:"VariableDeclaration",kind:"const",declarations:D})}else A=w;A&&d.push(A)}};function c(u,f,h){let m={type:"JSXElement",openingElement:{type:"JSXOpeningElement",name:{type:"JSXIdentifier",name:"MDXLayout"},attributes:[{type:"JSXSpreadAttribute",argument:{type:"Identifier",name:"props"}}],selfClosing:!1},closingElement:{type:"JSXClosingElement",name:{type:"JSXIdentifier",name:"MDXLayout"}},children:[{type:"JSXElement",openingElement:{type:"JSXOpeningElement",name:{type:"JSXIdentifier",name:"_createMdxContent"},attributes:[{type:"JSXSpreadAttribute",argument:{type:"Identifier",name:"props"}}],selfClosing:!0},closingElement:null,children:[]}]};h||(m={type:"ConditionalExpression",test:{type:"Identifier",name:"MDXLayout"},consequent:m,alternate:{type:"CallExpression",callee:{type:"Identifier",name:"_createMdxContent"},arguments:[{type:"Identifier",name:"props"}],optional:!1}});let y=u||{type:"Identifier",name:"undefined"};y.type==="JSXFragment"&&y.children.length===1&&y.children[0].type==="JSXElement"&&(y=y.children[0]);let v=!1;$0(y,{enter(x){if(x.type==="ArrowFunctionExpression"||x.type==="FunctionDeclaration"||x.type==="FunctionExpression")return this.skip();(x.type==="AwaitExpression"||x.type==="ForOfStatement"&&x.await)&&(v=!0)}});const g={type:"FunctionDeclaration",id:{type:"Identifier",name:"MDXContent"},params:[{type:"AssignmentPattern",left:{type:"Identifier",name:"props"},right:{type:"ObjectExpression",properties:[]}}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:m}]}};return[{type:"FunctionDeclaration",async:v,id:{type:"Identifier",name:"_createMdxContent"},params:[{type:"Identifier",name:"props"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:y}]}},f==="program"?{type:"ExportDefaultDeclaration",declaration:g}:g]}}function sM(t,e,n){t.comments?.unshift({type:"Block",value:e+" "+n,data:{_mdxIsPragmaComment:!0}})}function aNe(t){return{type:"FunctionDeclaration",id:{type:"Identifier",name:"_resolveDynamicMdxSpecifier"},generator:!1,async:!1,params:[{type:"Identifier",name:"d"}],body:{type:"BlockStatement",body:[{type:"IfStatement",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:"d"}},operator:"!==",right:{type:"Literal",value:"string"}},consequent:{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}},alternate:null},{type:"TryStatement",block:{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:{type:"NewExpression",callee:{type:"Identifier",name:"URL"},arguments:[{type:"Identifier",name:"d"}]}},{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}}]},handler:{type:"CatchClause",param:null,body:{type:"BlockStatement",body:[]}},finalizer:null},{type:"IfStatement",test:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"CallExpression",callee:Yd(["d","startsWith"]),arguments:[{type:"Literal",value:"/"}],optional:!1},operator:"||",right:{type:"CallExpression",callee:Yd(["d","startsWith"]),arguments:[{type:"Literal",value:"./"}],optional:!1}},operator:"||",right:{type:"CallExpression",callee:Yd(["d","startsWith"]),arguments:[{type:"Literal",value:"../"}],optional:!1}},consequent:{type:"ReturnStatement",argument:{type:"MemberExpression",object:{type:"NewExpression",callee:{type:"Identifier",name:"URL"},arguments:[{type:"Identifier",name:"d"},t]},property:{type:"Identifier",name:"href"},computed:!1,optional:!1}},alternate:null},{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}}]}}}function sNe(){return[{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"_importMetaUrl"},init:Yd(["arguments",0,"baseUrl"])}],kind:"const"},{type:"IfStatement",test:{type:"UnaryExpression",operator:"!",prefix:!0,argument:{type:"Identifier",name:"_importMetaUrl"}},consequent:{type:"ThrowStatement",argument:{type:"NewExpression",callee:{type:"Identifier",name:"Error"},arguments:[{type:"Literal",value:"Unexpected missing `options.baseUrl` needed to support `export … from`, `import`, or `import.meta.url` when generating `function-body`"}]}},alternate:null}]}function PV(t){let e=-1,n;for(;++e<t.length;){const i=t[e];n=n?{type:"BinaryExpression",left:n,operator:"+",right:i}:i}return n}function oNe(t){const{development:e,outputFormat:n,providerImportSource:i}=t;return function(r,a){const s=Hee(),o=[];let l=!1,c=!1;if($0(r,{enter(u){s.enter(u),(u.type==="FunctionDeclaration"||u.type==="FunctionExpression"||u.type==="ArrowFunctionExpression")&&(o.push({components:[],idToInvalidComponentName:new Map,node:u,objects:[],references:{},tags:[]}),n0(u,"MDXContent")&&!kO(s.scopes,"MDXLayout")&&o[0].components.push("MDXLayout"));const f=o[0];if(!(!f||!n0(f.node,"_createMdxContent")&&!i)&&u.type==="JSXElement"){let h=u.openingElement.name;if(h.type==="JSXMemberExpression"){const d=[];for(;h.type==="JSXMemberExpression";)d.unshift(h.property.name),h=h.object;d.unshift(h.name);const m=d.join("."),y=h.name,v=kO(s.scopes,y);!Object.hasOwn(f.references,m)&&(!v||o.length===1&&o[0].node.type==="FunctionDeclaration"&&n0(o[0].node,"_createMdxContent"))&&(f.references[m]={component:!0,node:u}),!f.objects.includes(y)&&!v&&f.objects.push(y)}else if(h.type!=="JSXNamespacedName"){if(uf(h.name)&&!/^[a-z]/.test(h.name)){const d=h.name;kO(s.scopes,d)||(d!=="MDXLayout"&&!Object.hasOwn(f.references,d)&&(f.references[d]={component:!0,node:u}),f.components.includes(d)||f.components.push(d))}else if(!(u.data&&u.data._mdxExplicitJsx)){const d=h.name;f.tags.includes(d)||f.tags.push(d);let m=["_components",d];if(uf(d)===!1){let y=f.idToInvalidComponentName.get(d);y===void 0&&(y=`_component${f.idToInvalidComponentName.size}`,f.idToInvalidComponentName.set(d,y)),m=[y]}u.openingElement.name=NV(m),u.closingElement&&(u.closingElement.name=NV(m))}}}},leave(u){s.exit(u);const f=[],h=[],d=[],m=[];if(u.type==="FunctionDeclaration"||u.type==="FunctionExpression"||u.type==="ArrowFunctionExpression"){const y=o[o.length-1];let v;for(v of y.tags.sort())f.push({type:"Property",kind:"init",key:uf(v)?{type:"Identifier",name:v}:{type:"Literal",value:v},value:{type:"Literal",value:v},method:!1,shorthand:!1,computed:!1});h.push(...y.components);for(v of y.objects)h.includes(v)||h.push(v);h.sort();const g=[];if(f.length>0||h.length>0||y.idToInvalidComponentName.size>0){if(i&&(l=!0,d.push({type:"CallExpression",callee:{type:"Identifier",name:"_provideComponents"},arguments:[],optional:!1})),(n0(y.node,"MDXContent")||n0(y.node,"_createMdxContent"))&&d.push(Yd(["props","components"])),f.length>0||d.length>1)for(const A of d)f.push({type:"SpreadElement",argument:A});let T=f.length>0?{type:"ObjectExpression",properties:f}:{type:"LogicalExpression",operator:"||",left:d[0],right:{type:"ObjectExpression",properties:[]}},w;if(h.length>0&&(w={type:"ObjectPattern",properties:h.map(function(A){return{type:"Property",kind:"init",key:{type:"Identifier",name:A==="MDXLayout"?"wrapper":A},value:{type:"Identifier",name:A},method:!1,shorthand:A!=="MDXLayout",computed:!1}})}),y.tags.length>0&&(m.push({type:"VariableDeclarator",id:{type:"Identifier",name:"_components"},init:T}),T={type:"Identifier",name:"_components"}),n0(y.node,"_createMdxContent"))for(const[A,C]of[...y.idToInvalidComponentName].sort(function([D],[k]){return D.localeCompare(k)}))m.push({type:"VariableDeclarator",id:{type:"Identifier",name:C},init:{type:"MemberExpression",object:{type:"Identifier",name:"_components"},property:{type:"Literal",value:A},computed:!0,optional:!1}});w&&m.push({type:"VariableDeclarator",id:w,init:T}),m.length>0&&g.push({type:"VariableDeclaration",kind:"const",declarations:m})}let x;for(x in y.references)if(Object.hasOwn(y.references,x)){const T=x.split(".");let w=0;for(;++w<T.length;){const A=T.slice(0,w).join(".");Object.hasOwn(y.references,A)||(y.references[A]={component:!1,node:y.references[x].node})}}const _=Object.keys(y.references).sort();let E=-1;for(;++E<_.length;){const T=_[E],w=y.references[T],A=vc(oh(w.node)),C=[{type:"Literal",value:T},{type:"Literal",value:w.component}];c=!0,e&&A&&C.push({type:"Literal",value:A}),g.push({type:"IfStatement",test:{type:"UnaryExpression",operator:"!",prefix:!0,argument:Yd(T.split("."))},consequent:{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"_missingMdxReference"},arguments:C,optional:!1}},alternate:void 0})}g.length>0&&(u.body.type!=="BlockStatement"&&(u.body={type:"BlockStatement",body:[{type:"ReturnStatement",argument:u.body}]}),u.body.body.unshift(...g)),o.pop()}}}),l&&i&&r.body.unshift(lNe(i,n)),c){const u=[{type:"Literal",value:"Expected "},{type:"ConditionalExpression",test:{type:"Identifier",name:"component"},consequent:{type:"Literal",value:"component"},alternate:{type:"Literal",value:"object"}},{type:"Literal",value:" `"},{type:"Identifier",name:"id"},{type:"Literal",value:"` to be defined: you likely forgot to import, pass, or provide it."}],f=[{type:"Identifier",name:"id"},{type:"Identifier",name:"component"}];e&&(u.push({type:"ConditionalExpression",test:{type:"Identifier",name:"place"},consequent:PV([{type:"Literal",value:"\nIt’s referenced in your code at `"},{type:"Identifier",name:"place"},{type:"Literal",value:(a.path?"` in `"+a.path:"")+"`"}]),alternate:{type:"Literal",value:""}}),f.push({type:"Identifier",name:"place"})),r.body.push({type:"FunctionDeclaration",id:{type:"Identifier",name:"_missingMdxReference"},generator:!1,async:!1,params:f,body:{type:"BlockStatement",body:[{type:"ThrowStatement",argument:{type:"NewExpression",callee:{type:"Identifier",name:"Error"},arguments:[PV(u)]}}]}})}n==="function-body"&&r.body.unshift({type:"ExpressionStatement",expression:{type:"Literal",value:"use strict"},directive:"use strict"})}}function lNe(t,e){const n=[{type:"ImportSpecifier",imported:{type:"Identifier",name:"useMDXComponents"},local:{type:"Identifier",name:"_provideComponents"}}];return e==="function-body"?{type:"VariableDeclaration",kind:"const",declarations:zB(n,Yd(["arguments",0]))}:{type:"ImportDeclaration",specifiers:n,source:{type:"Literal",value:t}}}function n0(t,e){return!!(t&&"id"in t&&t.id&&t.id.name===e)}function kO(t,e){let n=t.length;for(;n--;)if(t[n].defined.includes(e))return!0;return!1}function cNe(){return function(t){AS(t,"raw",function(e,n,i){if(i&&typeof n=="number")return i.children.splice(n,1),n})}}const uNe=/\s+/g,fNe=/[\t\n\v\f\r ]+/g;function hNe(t,e){e?typeof e=="string"&&(e={style:e}):e={};const n=e.preserveLineEndings?dNe:pNe;return String(t).replace(e.style==="html"?fNe:uNe,e.trim?mNe(n):n)}function dNe(t){const e=/\r?\n|\r/.exec(t);return e?e[0]:" "}function pNe(){return" "}function mNe(t){return e;function e(n,i,r){return i===0||i+n.length===r.length?"":t(n)}}function gNe(){return function(t){AS(t,function(e,n,i){let r=-1,a=!0,s=!1;if(i&&typeof n=="number"&&e.type==="paragraph"){const o=e.children;for(;++r<o.length;){const l=o[r];if(l.type==="mdxJsxTextElement"||l.type==="mdxTextExpression")s=!0;else if(!(l.type==="text"&&hNe(l.value,{style:"html",trim:!0})==="")){a=!1;break}}if(a&&s){r=-1;const l=[];for(;++r<o.length;){const c=o[r];c.type==="mdxJsxTextElement"&&(c.type="mdxJsxFlowElement"),c.type==="mdxTextExpression"&&(c.type="mdxFlowExpression"),c.type==="text"&&/^[\t\r\n ]+$/.test(String(c.value))||l.push(c)}return i.children.splice(n,1,...l),n}}if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement"){const o=e.data||(e.data={});o._mdxExplicitJsx=!0}(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression"||e.type==="mdxjsEsm")&&e.data&&e.data.estree&&$0(e.data.estree,{enter(o){if(o.type==="JSXElement"){const l=o.data||(o.data={});l._mdxExplicitJsx=!0}}})})}}const bNe=["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"];let LV=!1;function yNe(t){const e=t||{};e.format,(e.jsxRuntime==="classic"||e.pragma||e.pragmaFrag||e.pragmaImportSource)&&!LV&&(LV=!0,console.warn("Unexpected deprecated option `jsxRuntime: 'classic'`, `pragma`, `pragmaFrag`, or `pragmaImportSource`; see <https://mdxjs.com/migrating/v3/> on how to migrate"));const n=JIe().use(JOe);e.format!=="md"&&n.use(mOe);const i=e.remarkRehypeOptions||{};return n.use(gNe).use(e.remarkPlugins||[]).use(WIe,{...i,allowDangerousHtml:!0,passThrough:[...i.passThrough||[],...bNe]}).use(e.rehypePlugins||[]),e.format==="md"&&n.use(cNe),n.use(G3e,e).use(rNe,e).use(oNe,e),e.jsx||n.use(nRe,e).use(tNe,e),n.use(kRe).use(DRe,e).use(e.recmaPlugins||[]),n}function vNe(t,e){const{file:n,options:i}=W2e(t,e);return yNe(i).process(n)}function xNe(t){const{Fragment:e,baseUrl:n,development:i,jsx:r,jsxDEV:a,jsxs:s,useMDXComponents:o,...l}=t||{};if(!e)throw new Error("Expected `Fragment` given to `evaluate`");if(i){if(!a)throw new Error("Expected `jsxDEV` given to `evaluate`")}else{if(!r)throw new Error("Expected `jsx` given to `evaluate`");if(!s)throw new Error("Expected `jsxs` given to `evaluate`")}return{compiletime:{...l,development:i,outputFormat:"function-body",providerImportSource:o?"#":void 0},runtime:{Fragment:e,baseUrl:n,jsx:r,jsxDEV:a,jsxs:s,useMDXComponents:o}}}const _Ne=Object.getPrototypeOf(Vee).constructor;async function Vee(t,e){return new _Ne(String(t))(e)}async function SNe(t,e){const{compiletime:n,runtime:i}=xNe(e);return Vee(await vNe(t,n),i)}function wNe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ENe(t,e,n){const r=oR((n||{}).ignore||[]),a=MNe(e);let s=-1;for(;++s<a.length;)zee(t,"text",o);function o(c,u){let f=-1,h;for(;++f<u.length;){const d=u[f],m=h?h.children:void 0;if(r(d,m?m.indexOf(d):void 0,h))return;h=d}if(h)return l(c,u)}function l(c,u){const f=u[u.length-1],h=a[s][0],d=a[s][1];let m=0;const v=f.children.indexOf(c);let g=!1,x=[];h.lastIndex=0;let _=h.exec(c.value);for(;_;){const E=_.index,T={index:_.index,input:_.input,stack:[...u,c]};let w=d(..._,T);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?h.lastIndex=E+1:(m!==E&&x.push({type:"text",value:c.value.slice(m,E)}),Array.isArray(w)?x.push(...w):w&&x.push(w),m=E+_[0].length,g=!0),!h.global)break;_=h.exec(c.value)}return g?(m<c.value.length&&x.push({type:"text",value:c.value.slice(m)}),f.children.splice(v,1,...x)):x=[c],v+x.length}}function MNe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const r=n[i];e.push([TNe(r[0]),ANe(r[1])])}return e}function TNe(t){return typeof t=="string"?new RegExp(wNe(t),"g"):t}function ANe(t){return typeof t=="function"?t:function(){return t}}const DO="phrasing",OO=["autolink","link","image","label"];function CNe(){return{transforms:[PNe],enter:{literalAutolink:kNe,literalAutolinkEmail:IO,literalAutolinkHttp:IO,literalAutolinkWww:IO},exit:{literalAutolink:NNe,literalAutolinkEmail:INe,literalAutolinkHttp:DNe,literalAutolinkWww:ONe}}}function RNe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:DO,notInConstruct:OO},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:DO,notInConstruct:OO},{character:":",before:"[ps]",after:"\\/",inConstruct:DO,notInConstruct:OO}]}}function kNe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function IO(t){this.config.enter.autolinkProtocol.call(this,t)}function DNe(t){this.config.exit.autolinkProtocol.call(this,t)}function ONe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function INe(t){this.config.exit.autolinkEmail.call(this,t)}function NNe(t){this.exit(t)}function PNe(t){ENe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,LNe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),UNe]],{ignore:["link","linkReference"]})}function LNe(t,e,n,i,r){let a="";if(!Gee(r)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!BNe(n)))return!1;const s=FNe(n+i);if(!s[0])return!1;const o={type:"link",title:null,url:a+e+s[0],children:[{type:"text",value:e+s[0]}]};return s[1]?[o,{type:"text",value:s[1]}]:o}function UNe(t,e,n,i){return!Gee(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function BNe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function FNe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const r=GA(t,"(");let a=GA(t,")");for(;i!==-1&&r>a;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),a++;return[t,n]}function Gee(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||co(n)||rR(n))&&(!e||n!==47)}Wee.peek=YNe;function zNe(){this.buffer()}function jNe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function HNe(){this.buffer()}function VNe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function GNe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=yu(this.sliceSerialize(t)).toLowerCase(),n.label=e}function WNe(t){this.exit(t)}function qNe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=yu(this.sliceSerialize(t)).toLowerCase(),n.label=e}function XNe(t){this.exit(t)}function YNe(){return"["}function Wee(t,e,n,i){const r=n.createTracker(i);let a=r.move("[^");const s=n.enter("footnoteReference"),o=n.enter("reference");return a+=r.move(n.safe(n.associationId(t),{after:"]",before:a})),o(),s(),a+=r.move("]"),a}function $Ne(){return{enter:{gfmFootnoteCallString:zNe,gfmFootnoteCall:jNe,gfmFootnoteDefinitionLabelString:HNe,gfmFootnoteDefinition:VNe},exit:{gfmFootnoteCallString:GNe,gfmFootnoteCall:WNe,gfmFootnoteDefinitionLabelString:qNe,gfmFootnoteDefinition:XNe}}}function KNe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Wee},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,a,s){const o=a.createTracker(s);let l=o.move("[^");const c=a.enter("footnoteDefinition"),u=a.enter("label");return l+=o.move(a.safe(a.associationId(i),{before:l,after:"]"})),u(),l+=o.move("]:"),i.children&&i.children.length>0&&(o.shift(4),l+=o.move((e?`
`:" ")+a.indentLines(a.containerFlow(i,o.current()),e?qee:JNe))),c(),l}}function JNe(t,e,n){return e===0?t:qee(t,e,n)}function qee(t,e,n){return(n?"":"    ")+t}const ZNe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Xee.peek=iPe;function QNe(){return{canContainEols:["delete"],enter:{strikethrough:tPe},exit:{strikethrough:nPe}}}function ePe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:ZNe}],handlers:{delete:Xee}}}function tPe(t){this.enter({type:"delete",children:[]},t)}function nPe(t){this.exit(t)}function Xee(t,e,n,i){const r=n.createTracker(i),a=n.enter("strikethrough");let s=r.move("~~");return s+=n.containerPhrasing(t,{...r.current(),before:s,after:"~"}),s+=r.move("~~"),a(),s}function iPe(){return"~"}function rPe(t){return t.length}function aPe(t,e){const n=e||{},i=(n.align||[]).concat(),r=n.stringLength||rPe,a=[],s=[],o=[],l=[];let c=0,u=-1;for(;++u<t.length;){const y=[],v=[];let g=-1;for(t[u].length>c&&(c=t[u].length);++g<t[u].length;){const x=sPe(t[u][g]);if(n.alignDelimiters!==!1){const _=r(x);v[g]=_,(l[g]===void 0||_>l[g])&&(l[g]=_)}y.push(x)}s[u]=y,o[u]=v}let f=-1;if(typeof i=="object"&&"length"in i)for(;++f<c;)a[f]=UV(i[f]);else{const y=UV(i);for(;++f<c;)a[f]=y}f=-1;const h=[],d=[];for(;++f<c;){const y=a[f];let v="",g="";y===99?(v=":",g=":"):y===108?v=":":y===114&&(g=":");let x=n.alignDelimiters===!1?1:Math.max(1,l[f]-v.length-g.length);const _=v+"-".repeat(x)+g;n.alignDelimiters!==!1&&(x=v.length+x+g.length,x>l[f]&&(l[f]=x),d[f]=x),h[f]=_}s.splice(1,0,h),o.splice(1,0,d),u=-1;const m=[];for(;++u<s.length;){const y=s[u],v=o[u];f=-1;const g=[];for(;++f<c;){const x=y[f]||"";let _="",E="";if(n.alignDelimiters!==!1){const T=l[f]-(v[f]||0),w=a[f];w===114?_=" ".repeat(T):w===99?T%2?(_=" ".repeat(T/2+.5),E=" ".repeat(T/2-.5)):(_=" ".repeat(T/2),E=_):E=" ".repeat(T)}n.delimiterStart!==!1&&!f&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&x==="")&&(n.delimiterStart!==!1||f)&&g.push(" "),n.alignDelimiters!==!1&&g.push(_),g.push(x),n.alignDelimiters!==!1&&g.push(E),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&g.push("|")}m.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return m.join(`
`)}function sPe(t){return t==null?"":String(t)}function UV(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function oPe(t,e,n,i){const r=n.enter("blockquote"),a=n.createTracker(i);a.move("> "),a.shift(2);const s=n.indentLines(n.containerFlow(t,a.current()),lPe);return r(),s}function lPe(t,e,n){return">"+(n?"":" ")+t}function cPe(t,e){return BV(t,e.inConstruct,!0)&&!BV(t,e.notInConstruct,!1)}function BV(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function FV(t,e,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&cPe(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function uPe(t,e){const n=String(t);let i=n.indexOf(e),r=i,a=0,s=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++a>s&&(s=a):a=1,r=i+e.length,i=n.indexOf(e,r);return s}function fPe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function hPe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function dPe(t,e,n,i){const r=hPe(n),a=t.value||"",s=r==="`"?"GraveAccent":"Tilde";if(fPe(t,n)){const f=n.enter("codeIndented"),h=n.indentLines(a,pPe);return f(),h}const o=n.createTracker(i),l=r.repeat(Math.max(uPe(a,r)+1,3)),c=n.enter("codeFenced");let u=o.move(l);if(t.lang){const f=n.enter(`codeFencedLang${s}`);u+=o.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...o.current()})),f()}if(t.lang&&t.meta){const f=n.enter(`codeFencedMeta${s}`);u+=o.move(" "),u+=o.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...o.current()})),f()}return u+=o.move(`
`),a&&(u+=o.move(a+`
`)),u+=o.move(l),c(),u}function pPe(t,e,n){return(n?"":"    ")+t}function jB(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function mPe(t,e,n,i){const r=jB(n),a=r==='"'?"Quote":"Apostrophe",s=n.enter("definition");let o=n.enter("label");const l=n.createTracker(i);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),o(),!t.url||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),o(),t.title&&(o=n.enter(`title${a}`),c+=l.move(" "+r),c+=l.move(n.safe(t.title,{before:c,after:r,...l.current()})),c+=l.move(r),o()),s(),c}function gPe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function M_(t){return"&#x"+t.toString(16).toUpperCase()+";"}function $A(t,e,n){const i=By(t),r=By(e);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Yee.peek=bPe;function Yee(t,e,n,i){const r=gPe(n),a=n.enter("emphasis"),s=n.createTracker(i),o=s.move(r);let l=s.move(n.containerPhrasing(t,{after:r,before:o,...s.current()}));const c=l.charCodeAt(0),u=$A(i.before.charCodeAt(i.before.length-1),c,r);u.inside&&(l=M_(c)+l.slice(1));const f=l.charCodeAt(l.length-1),h=$A(i.after.charCodeAt(0),f,r);h.inside&&(l=l.slice(0,-1)+M_(f));const d=s.move(r);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+l+d}function bPe(t,e,n){return n.options.emphasis||"*"}function yPe(t,e){let n=!1;return AS(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,vP}),!!((!t.depth||t.depth<3)&&NB(t)&&(e.options.setext||n))}function vPe(t,e,n,i){const r=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(i);if(yPe(t,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return f(),u(),h+`
`+(r===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const s="#".repeat(r),o=n.enter("headingAtx"),l=n.enter("phrasing");a.move(s+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(c)&&(c=M_(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),l(),o(),c}$ee.peek=xPe;function $ee(t){return t.value||""}function xPe(){return"<"}Kee.peek=_Pe;function Kee(t,e,n,i){const r=jB(n),a=r==='"'?"Quote":"Apostrophe",s=n.enter("image");let o=n.enter("label");const l=n.createTracker(i);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),o(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),o(),t.title&&(o=n.enter(`title${a}`),c+=l.move(" "+r),c+=l.move(n.safe(t.title,{before:c,after:r,...l.current()})),c+=l.move(r),o()),c+=l.move(")"),s(),c}function _Pe(){return"!"}Jee.peek=SPe;function Jee(t,e,n,i){const r=t.referenceType,a=n.enter("imageReference");let s=n.enter("label");const o=n.createTracker(i);let l=o.move("![");const c=n.safe(t.alt,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...o.current()});return s(),n.stack=u,a(),r==="full"||!c||c!==f?l+=o.move(f+"]"):r==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function SPe(){return"!"}Zee.peek=wPe;function Zee(t,e,n){let i=t.value||"",r="`",a=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++a<n.unsafe.length;){const s=n.unsafe[a],o=n.compilePattern(s);let l;if(s.atBreak)for(;l=o.exec(i);){let c=l.index;i.charCodeAt(c)===10&&i.charCodeAt(c-1)===13&&c--,i=i.slice(0,c)+" "+i.slice(l.index+1)}}return r+i+r}function wPe(){return"`"}function Qee(t,e){const n=NB(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}ete.peek=EPe;function ete(t,e,n,i){const r=jB(n),a=r==='"'?"Quote":"Apostrophe",s=n.createTracker(i);let o,l;if(Qee(t,n)){const u=n.stack;n.stack=[],o=n.enter("autolink");let f=s.move("<");return f+=s.move(n.containerPhrasing(t,{before:f,after:">",...s.current()})),f+=s.move(">"),o(),n.stack=u,f}o=n.enter("link"),l=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(t,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(t.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(t.url,{before:c,after:t.title?" ":")",...s.current()}))),l(),t.title&&(l=n.enter(`title${a}`),c+=s.move(" "+r),c+=s.move(n.safe(t.title,{before:c,after:r,...s.current()})),c+=s.move(r),l()),c+=s.move(")"),o(),c}function EPe(t,e,n){return Qee(t,n)?"<":"["}tte.peek=MPe;function tte(t,e,n,i){const r=t.referenceType,a=n.enter("linkReference");let s=n.enter("label");const o=n.createTracker(i);let l=o.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...o.current()});return s(),n.stack=u,a(),r==="full"||!c||c!==f?l+=o.move(f+"]"):r==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function MPe(){return"["}function HB(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function TPe(t){const e=HB(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function APe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function nte(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function CPe(t,e,n,i){const r=n.enter("list"),a=n.bulletCurrent;let s=t.ordered?APe(n):HB(n);const o=t.ordered?s==="."?")":".":TPe(n);let l=e&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((s==="*"||s==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),nte(n)===s&&u){let f=-1;for(;++f<t.children.length;){const h=t.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=o),n.bulletCurrent=s;const c=n.containerFlow(t,i);return n.bulletLastUsed=s,n.bulletCurrent=a,r(),c}function RPe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function kPe(t,e,n,i){const r=RPe(n);let a=n.bulletCurrent||HB(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let s=a.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(s=Math.ceil(s/4)*4);const o=n.createTracker(i);o.move(a+" ".repeat(s-a.length)),o.shift(s);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,o.current()),u);return l(),c;function u(f,h,d){return h?(d?"":" ".repeat(s))+f:(d?a:a+" ".repeat(s-a.length))+f}}function DPe(t,e,n,i){const r=n.enter("paragraph"),a=n.enter("phrasing"),s=n.containerPhrasing(t,i);return a(),r(),s}const OPe=oR(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function IPe(t,e,n,i){return(t.children.some(function(s){return OPe(s)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function NPe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}ite.peek=PPe;function ite(t,e,n,i){const r=NPe(n),a=n.enter("strong"),s=n.createTracker(i),o=s.move(r+r);let l=s.move(n.containerPhrasing(t,{after:r,before:o,...s.current()}));const c=l.charCodeAt(0),u=$A(i.before.charCodeAt(i.before.length-1),c,r);u.inside&&(l=M_(c)+l.slice(1));const f=l.charCodeAt(l.length-1),h=$A(i.after.charCodeAt(0),f,r);h.inside&&(l=l.slice(0,-1)+M_(f));const d=s.move(r+r);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+l+d}function PPe(t,e,n){return n.options.strong||"*"}function LPe(t,e,n,i){return n.safe(t.value,i)}function UPe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function BPe(t,e,n){const i=(nte(n)+(n.options.ruleSpaces?" ":"")).repeat(UPe(n));return n.options.ruleSpaces?i.slice(0,-1):i}const rte={blockquote:oPe,break:FV,code:dPe,definition:mPe,emphasis:Yee,hardBreak:FV,heading:vPe,html:$ee,image:Kee,imageReference:Jee,inlineCode:Zee,link:ete,linkReference:tte,list:CPe,listItem:kPe,paragraph:DPe,root:IPe,strong:ite,text:LPe,thematicBreak:BPe};function FPe(){return{enter:{table:zPe,tableData:zV,tableHeader:zV,tableRow:HPe},exit:{codeText:VPe,table:jPe,tableData:NO,tableHeader:NO,tableRow:NO}}}function zPe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function jPe(t){this.exit(t),this.data.inTable=void 0}function HPe(t){this.enter({type:"tableRow",children:[]},t)}function NO(t){this.exit(t)}function zV(t){this.enter({type:"tableCell",children:[]},t)}function VPe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,GPe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function GPe(t,e){return e==="|"?e:t}function WPe(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:s,tableCell:l,tableRow:o}};function s(d,m,y,v){return c(u(d,y,v),d.align)}function o(d,m,y,v){const g=f(d,y,v),x=c([g]);return x.slice(0,x.indexOf(`
`))}function l(d,m,y,v){const g=y.enter("tableCell"),x=y.enter("phrasing"),_=y.containerPhrasing(d,{...v,before:a,after:a});return x(),g(),_}function c(d,m){return aPe(d,{align:m,alignDelimiters:i,padding:n,stringLength:r})}function u(d,m,y){const v=d.children;let g=-1;const x=[],_=m.enter("table");for(;++g<v.length;)x[g]=f(v[g],m,y);return _(),x}function f(d,m,y){const v=d.children;let g=-1;const x=[],_=m.enter("tableRow");for(;++g<v.length;)x[g]=l(v[g],d,m,y);return _(),x}function h(d,m,y){let v=rte.inlineCode(d,m,y);return y.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function qPe(){return{exit:{taskListCheckValueChecked:jV,taskListCheckValueUnchecked:jV,paragraph:YPe}}}function XPe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:$Pe}}}function jV(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function YPe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=e.children;let a=-1,s;for(;++a<r.length;){const o=r[a];if(o.type==="paragraph"){s=o;break}}s===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function $Pe(t,e,n,i){const r=t.children[0],a=typeof t.checked=="boolean"&&r&&r.type==="paragraph",s="["+(t.checked?"x":" ")+"] ",o=n.createTracker(i);a&&o.move(s);let l=rte.listItem(t,e,n,{...i,...o.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+s}}function KPe(){return[CNe(),$Ne(),QNe(),FPe(),qPe()]}function JPe(t){return{extensions:[RNe(),KNe(t),ePe(),WPe(t),XPe()]}}const ZPe={tokenize:rLe,partial:!0},ate={tokenize:aLe,partial:!0},ste={tokenize:sLe,partial:!0},ote={tokenize:oLe,partial:!0},QPe={tokenize:lLe,partial:!0},lte={name:"wwwAutolink",tokenize:nLe,previous:ute},cte={name:"protocolAutolink",tokenize:iLe,previous:fte},Lh={name:"emailAutolink",tokenize:tLe,previous:hte},Sf={};function eLe(){return{text:Sf}}let am=48;for(;am<123;)Sf[am]=Lh,am++,am===58?am=65:am===91&&(am=97);Sf[43]=Lh;Sf[45]=Lh;Sf[46]=Lh;Sf[95]=Lh;Sf[72]=[Lh,cte];Sf[104]=[Lh,cte];Sf[87]=[Lh,lte];Sf[119]=[Lh,lte];function tLe(t,e,n){const i=this;let r,a;return s;function s(f){return!SP(f)||!hte.call(i,i.previous)||VB(i.events)?n(f):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),o(f))}function o(f){return SP(f)?(t.consume(f),o):f===64?(t.consume(f),l):n(f)}function l(f){return f===46?t.check(QPe,u,c)(f):f===45||f===95||Gs(f)?(a=!0,t.consume(f),l):u(f)}function c(f){return t.consume(f),r=!0,l}function u(f){return a&&r&&js(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(f)):n(f)}}function nLe(t,e,n){const i=this;return r;function r(s){return s!==87&&s!==119||!ute.call(i,i.previous)||VB(i.events)?n(s):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(ZPe,t.attempt(ate,t.attempt(ste,a),n),n)(s))}function a(s){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(s)}}function iLe(t,e,n){const i=this;let r="",a=!1;return s;function s(f){return(f===72||f===104)&&fte.call(i,i.previous)&&!VB(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(f),t.consume(f),o):n(f)}function o(f){if(js(f)&&r.length<5)return r+=String.fromCodePoint(f),t.consume(f),o;if(f===58){const h=r.toLowerCase();if(h==="http"||h==="https")return t.consume(f),l}return n(f)}function l(f){return f===47?(t.consume(f),a?c:(a=!0,l)):n(f)}function c(f){return f===null||WA(f)||Di(f)||co(f)||rR(f)?n(f):t.attempt(ate,t.attempt(ste,u),n)(f)}function u(f){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(f)}}function rLe(t,e,n){let i=0;return r;function r(s){return(s===87||s===119)&&i<3?(i++,t.consume(s),r):s===46&&i===3?(t.consume(s),a):n(s)}function a(s){return s===null?n(s):e(s)}}function aLe(t,e,n){let i,r,a;return s;function s(c){return c===46||c===95?t.check(ote,l,o)(c):c===null||Di(c)||co(c)||c!==45&&rR(c)?l(c):(a=!0,t.consume(c),s)}function o(c){return c===95?i=!0:(r=i,i=void 0),t.consume(c),s}function l(c){return r||i||!a?n(c):e(c)}}function sLe(t,e){let n=0,i=0;return r;function r(s){return s===40?(n++,t.consume(s),r):s===41&&i<n?a(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?t.check(ote,e,a)(s):s===null||Di(s)||co(s)?e(s):(t.consume(s),r)}function a(s){return s===41&&i++,t.consume(s),r}}function oLe(t,e,n){return i;function i(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(t.consume(o),i):o===38?(t.consume(o),a):o===93?(t.consume(o),r):o===60||o===null||Di(o)||co(o)?e(o):n(o)}function r(o){return o===null||o===40||o===91||Di(o)||co(o)?e(o):i(o)}function a(o){return js(o)?s(o):n(o)}function s(o){return o===59?(t.consume(o),i):js(o)?(t.consume(o),s):n(o)}}function lLe(t,e,n){return i;function i(a){return t.consume(a),r}function r(a){return Gs(a)?n(a):e(a)}}function ute(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Di(t)}function fte(t){return!js(t)}function hte(t){return!(t===47||SP(t))}function SP(t){return t===43||t===45||t===46||t===95||Gs(t)}function VB(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const cLe={tokenize:bLe,partial:!0};function uLe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:pLe,continuation:{tokenize:mLe},exit:gLe}},text:{91:{name:"gfmFootnoteCall",tokenize:dLe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:fLe,resolveTo:hLe}}}}function fLe(t,e,n){const i=this;let r=i.events.length;const a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s;for(;r--;){const l=i.events[r][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!s||!s._balanced)return n(l);const c=yu(i.sliceSerialize({start:s.end,end:i.now()}));return c.codePointAt(0)!==94||!a.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function hLe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...o),t}function dLe(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a=0,s;return o;function o(f){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(t.enter("gfmFootnoteCallMarker"),t.consume(f),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(f){if(a>999||f===93&&!s||f===null||f===91||Di(f))return n(f);if(f===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return r.includes(yu(i.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(f)}return Di(f)||(s=!0),a++,t.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(t.consume(f),a++,c):c(f)}}function pLe(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a,s=0,o;return l;function l(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(m)}function u(m){if(s>999||m===93&&!o||m===null||m===91||Di(m))return n(m);if(m===93){t.exit("chunkString");const y=t.exit("gfmFootnoteDefinitionLabelString");return a=yu(i.sliceSerialize(y)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return Di(m)||(o=!0),s++,t.consume(m),m===92?f:u}function f(m){return m===91||m===92||m===93?(t.consume(m),s++,u):u(m)}function h(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),r.includes(a)||r.push(a),yi(t,d,"gfmFootnoteDefinitionWhitespace")):n(m)}function d(m){return e(m)}}function mLe(t,e,n){return t.check(Ev,e,t.attempt(cLe,e,n))}function gLe(t){t.exit("gfmFootnoteDefinition")}function bLe(t,e,n){const i=this;return yi(t,r,"gfmFootnoteDefinitionIndent",5);function r(a){const s=i.events[i.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?e(a):n(a)}}function yLe(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:a,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(s,o){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let c=l;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[l][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[l][1].end)},f={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[l][1].start)},h=[["enter",u,o],["enter",s[c][1],o],["exit",s[c][1],o],["enter",f,o]],d=o.parser.constructs.insideSpan.null;d&&Sl(h,h.length,0,aR(d,s.slice(c+1,l),o)),Sl(h,h.length,0,[["exit",f,o],["enter",s[l][1],o],["exit",s[l][1],o],["exit",u,o]]),Sl(s,c-1,l-c+3,h),l=c+h.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function a(s,o,l){const c=this.previous,u=this.events;let f=0;return h;function h(m){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(m):(s.enter("strikethroughSequenceTemporary"),d(m))}function d(m){const y=By(c);if(m===126)return f>1?l(m):(s.consume(m),f++,d);if(f<2&&!n)return l(m);const v=s.exit("strikethroughSequenceTemporary"),g=By(m);return v._open=!g||g===2&&!!y,v._close=!y||y===2&&!!g,o(m)}}}class vLe{constructor(){this.map=[]}add(e,n,i){xLe(this,e,n,i)}consume(e){if(this.map.sort(function(a,s){return a[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const a of r)e.push(a);r=i.pop()}this.map.length=0}}function xLe(t,e,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...i);return}r+=1}t.map.push([e,n,i])}}function _Le(t,e){let n=!1;const i=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=i.length-1;i[a]=i[a]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function SLe(){return{flow:{null:{name:"table",tokenize:wLe,resolveAll:ELe}}}}function wLe(t,e,n){const i=this;let r=0,a=0,s;return o;function o(k){let P=i.events.length-1;for(;P>-1;){const G=i.events[P][1].type;if(G==="lineEnding"||G==="linePrefix")P--;else break}const B=P>-1?i.events[P][1].type:null,H=B==="tableHead"||B==="tableRow"?w:l;return H===w&&i.parser.lazy[i.now().line]?n(k):H(k)}function l(k){return t.enter("tableHead"),t.enter("tableRow"),c(k)}function c(k){return k===124||(s=!0,a+=1),u(k)}function u(k){return k===null?n(k):hn(k)?a>1?(a=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),d):n(k):Kn(k)?yi(t,u,"whitespace")(k):(a+=1,s&&(s=!1,r+=1),k===124?(t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),s=!0,u):(t.enter("data"),f(k)))}function f(k){return k===null||k===124||Di(k)?(t.exit("data"),u(k)):(t.consume(k),k===92?h:f)}function h(k){return k===92||k===124?(t.consume(k),f):f(k)}function d(k){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(k):(t.enter("tableDelimiterRow"),s=!1,Kn(k)?yi(t,m,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):m(k))}function m(k){return k===45||k===58?v(k):k===124?(s=!0,t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),y):T(k)}function y(k){return Kn(k)?yi(t,v,"whitespace")(k):v(k)}function v(k){return k===58?(a+=1,s=!0,t.enter("tableDelimiterMarker"),t.consume(k),t.exit("tableDelimiterMarker"),g):k===45?(a+=1,g(k)):k===null||hn(k)?E(k):T(k)}function g(k){return k===45?(t.enter("tableDelimiterFiller"),x(k)):T(k)}function x(k){return k===45?(t.consume(k),x):k===58?(s=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(k),t.exit("tableDelimiterMarker"),_):(t.exit("tableDelimiterFiller"),_(k))}function _(k){return Kn(k)?yi(t,E,"whitespace")(k):E(k)}function E(k){return k===124?m(k):k===null||hn(k)?!s||r!==a?T(k):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(k)):T(k)}function T(k){return n(k)}function w(k){return t.enter("tableRow"),A(k)}function A(k){return k===124?(t.enter("tableCellDivider"),t.consume(k),t.exit("tableCellDivider"),A):k===null||hn(k)?(t.exit("tableRow"),e(k)):Kn(k)?yi(t,A,"whitespace")(k):(t.enter("data"),C(k))}function C(k){return k===null||k===124||Di(k)?(t.exit("data"),A(k)):(t.consume(k),k===92?D:C)}function D(k){return k===92||k===124?(t.consume(k),C):C(k)}}function ELe(t,e){let n=-1,i=!0,r=0,a=[0,0,0,0],s=[0,0,0,0],o=!1,l=0,c,u,f;const h=new vLe;for(;++n<t.length;){const d=t[n],m=d[1];d[0]==="enter"?m.type==="tableHead"?(o=!1,l!==0&&(HV(h,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",c,e]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(i=!0,f=void 0,a=[0,0,0,0],s=[0,n+1,0,0],o&&(o=!1,u={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",u,e]])),r=m.type==="tableDelimiterRow"?2:u?3:1):r&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(i=!1,s[2]===0&&(a[1]!==0&&(s[0]=s[1],f=oM(h,e,a,r,void 0,f),a=[0,0,0,0]),s[2]=n)):m.type==="tableCellDivider"&&(i?i=!1:(a[1]!==0&&(s[0]=s[1],f=oM(h,e,a,r,void 0,f)),a=s,s=[a[1],n,0,0])):m.type==="tableHead"?(o=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,a[1]!==0?(s[0]=s[1],f=oM(h,e,a,r,n,f)):s[1]!==0&&(f=oM(h,e,s,r,n,f)),r=0):r&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(s[3]=n)}for(l!==0&&HV(h,e,l,c,u),h.consume(e.events),n=-1;++n<e.events.length;){const d=e.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=_Le(e.events,n))}return t}function oM(t,e,n,i,r,a){const s=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(a.end=Object.assign({},h0(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const l=h0(e.events,n[1]);if(a={type:s,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const c=h0(e.events,n[2]),u=h0(e.events,n[3]),f={type:o,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",f,e]]),i!==2){const h=e.events[n[2]],d=e.events[n[3]];if(h[1].end=Object.assign({},d[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,y=n[3]-n[2]-1;t.add(m,y,[])}}t.add(n[3]+1,0,[["exit",f,e]])}return r!==void 0&&(a.end=Object.assign({},h0(e.events,r)),t.add(r,0,[["exit",a,e]]),a=void 0),a}function HV(t,e,n,i,r){const a=[],s=h0(e.events,n);r&&(r.end=Object.assign({},s),a.push(["exit",r,e])),i.end=Object.assign({},s),a.push(["exit",i,e]),t.add(n+1,0,a)}function h0(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const MLe={name:"tasklistCheck",tokenize:ALe};function TLe(){return{text:{91:MLe}}}function ALe(t,e,n){const i=this;return r;function r(l){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),a)}function a(l){return Di(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),s):n(l)}function s(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),o):n(l)}function o(l){return hn(l)?e(l):Kn(l)?t.check({tokenize:CLe},e,n)(l):n(l)}}function CLe(t,e,n){return yi(t,i,"whitespace");function i(r){return r===null?n(r):e(r)}}function RLe(t){return IB([eLe(),uLe(),yLe(t),SLe(),TLe()])}const kLe={};function DLe(t){const e=this,n=t||kLe,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),a=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),s=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(RLe(n)),a.push(KPe()),s.push(JPe(n))}const OLe=function(t){return ILe(t)};function ILe(t){return NLe(e);function e(n){return n&&n.type===t}}function NLe(t){return e;function e(n,...i){return!!(n&&typeof n=="object"&&"type"in n&&t.call(this,n,...i))}}const PLe=!0,VV=!1,LLe="skip",ULe=function(t,e,n,i){const r=OLe(e),a=1;s(t,void 0,[])();function s(o,l,c){const u=o&&typeof o=="object"?o:{};if(typeof u.type=="string"){const h=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(o.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=[],d,m,y;if(r(o,l,c[c.length-1]||null)&&(h=BLe(n(o,c)),h[0]===VV))return h;if(o.children&&h[0]!==LLe)for(m=-1+a,y=c.concat(o);m>-1&&m<o.children.length;){if(d=s(o.children[m],m,y)(),d[0]===VV)return d;m=typeof d[1]=="number"?d[1]:m+a}return h}}};function BLe(t){return Array.isArray(t)?t:typeof t=="number"?[PLe,t]:[t]}const FLe=function(t,e,n,i){ULe(t,e,r);function r(a,s){const o=s[s.length-1];return n(a,o?o.children.indexOf(a):null,o)}};function zLe(t){return"children"in t?dte(t):"value"in t?t.value:""}function jLe(t){return t.type==="text"?t.value:"children"in t?dte(t):""}function dte(t){let e=-1;const n=[];for(;++e<t.children.length;)n[e]=jLe(t.children[e]);return n.join("")}function GB(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pte(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function CS(){}var T_=.7,KA=1/T_,J0="\\s*([+-]?\\d+)\\s*",A_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ff="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HLe=/^#([0-9a-f]{3,8})$/,VLe=new RegExp(`^rgb\\(${J0},${J0},${J0}\\)$`),GLe=new RegExp(`^rgb\\(${ff},${ff},${ff}\\)$`),WLe=new RegExp(`^rgba\\(${J0},${J0},${J0},${A_}\\)$`),qLe=new RegExp(`^rgba\\(${ff},${ff},${ff},${A_}\\)$`),XLe=new RegExp(`^hsl\\(${A_},${ff},${ff}\\)$`),YLe=new RegExp(`^hsla\\(${A_},${ff},${ff},${A_}\\)$`),GV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GB(CS,cR,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:WV,formatHex:WV,formatHex8:$Le,formatHsl:KLe,formatRgb:qV,toString:qV});function WV(){return this.rgb().formatHex()}function $Le(){return this.rgb().formatHex8()}function KLe(){return mte(this).formatHsl()}function qV(){return this.rgb().formatRgb()}function cR(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=HLe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?XV(e):n===3?new No(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?lM(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?lM(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=VLe.exec(t))?new No(e[1],e[2],e[3],1):(e=GLe.exec(t))?new No(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=WLe.exec(t))?lM(e[1],e[2],e[3],e[4]):(e=qLe.exec(t))?lM(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XLe.exec(t))?KV(e[1],e[2]/100,e[3]/100,1):(e=YLe.exec(t))?KV(e[1],e[2]/100,e[3]/100,e[4]):GV.hasOwnProperty(t)?XV(GV[t]):t==="transparent"?new No(NaN,NaN,NaN,0):null}function XV(t){return new No(t>>16&255,t>>8&255,t&255,1)}function lM(t,e,n,i){return i<=0&&(t=e=n=NaN),new No(t,e,n,i)}function JLe(t){return t instanceof CS||(t=cR(t)),t?(t=t.rgb(),new No(t.r,t.g,t.b,t.opacity)):new No}function ZLe(t,e,n,i){return arguments.length===1?JLe(t):new No(t,e,n,i??1)}function No(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}GB(No,ZLe,pte(CS,{brighter(t){return t=t==null?KA:Math.pow(KA,t),new No(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?T_:Math.pow(T_,t),new No(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new No(Zm(this.r),Zm(this.g),Zm(this.b),JA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YV,formatHex:YV,formatHex8:QLe,formatRgb:$V,toString:$V}));function YV(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}`}function QLe(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}${Im((isNaN(this.opacity)?1:this.opacity)*255)}`}function $V(){const t=JA(this.opacity);return`${t===1?"rgb(":"rgba("}${Zm(this.r)}, ${Zm(this.g)}, ${Zm(this.b)}${t===1?")":`, ${t})`}`}function JA(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Im(t){return t=Zm(t),(t<16?"0":"")+t.toString(16)}function KV(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ou(t,e,n,i)}function mte(t){if(t instanceof ou)return new ou(t.h,t.s,t.l,t.opacity);if(t instanceof CS||(t=cR(t)),!t)return new ou;if(t instanceof ou)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(e===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new ou(s,o,l,t.opacity)}function e4e(t,e,n,i){return arguments.length===1?mte(t):new ou(t,e,n,i??1)}function ou(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}GB(ou,e4e,pte(CS,{brighter(t){return t=t==null?KA:Math.pow(KA,t),new ou(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?T_:Math.pow(T_,t),new ou(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new No(PO(t>=240?t-240:t+120,r,i),PO(t,r,i),PO(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ou(JV(this.h),cM(this.s),cM(this.l),JA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=JA(this.opacity);return`${t===1?"hsl(":"hsla("}${JV(this.h)}, ${cM(this.s)*100}%, ${cM(this.l)*100}%${t===1?")":`, ${t})`}`}}));function JV(t){return t=(t||0)%360,t<0?t+360:t}function cM(t){return Math.max(0,Math.min(1,t||0))}function PO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function t4e(t){return t===void 0&&(t={customClassName:"gfm-color-chip"}),function(e){FLe(e,"element",function(n){if(n.tagName==="code"&&n.properties){var i=zLe(n),r=cR(i);r&&n.children.push({type:"element",tagName:"span",properties:{className:[t.customClassName],style:"background-color: "+r.formatHex()+";"},children:[]})}})}}function n4e(){return t=>{AS(t,"element",(e,n,i)=>{e.tagName==="code"&&i&&i.type==="element"&&i.tagName==="pre"&&(e.properties={block:!0,...e.properties})})}}function i4e(t){return R.jsx(gu,{...t})}function r4e(t){return R.jsx(qm,{...t})}function i0(t,e){return R.jsx(u2,{order:e,...t})}function ZV(t,e,n){return t.className=="contains-task-list"?R.jsx(vy,{type:n,...t,listStyleType:"none",children:e}):R.jsx(vy,{type:n,...t,children:e})}function a4e(t,e){return R.jsx(vy.Item,{...t,children:e})}function s4e(t,e){return R.jsx(X4,{...t,children:e})}function o4e(t){return R.jsx(V4,{...t})}function l4e(t){return R.jsx("cite",{style:{display:"block",fontSize:"0.875rem",marginTop:"0.625rem",color:"#909296",overflow:"hidden",textOverflow:"ellipsis"},...t})}function c4e(t){return R.jsx(Ic,{...t,highlightOnHover:!0,withColumnBorders:!0})}function u4e(t){return R.jsx(iS,{maw:240,mx:"auto",radius:"md",...t})}const f4e={p:t=>i4e(t),a:t=>r4e(t),h1:t=>i0(t,1),h2:t=>i0(t,2),h3:t=>i0(t,3),h4:t=>i0(t,4),h5:t=>i0(t,5),h6:t=>i0(t,6),ul:t=>ZV(t,t.children??"","unordered"),ol:t=>ZV(t,t.children??"","ordered"),li:t=>a4e(t,t.children??""),code:t=>s4e(t,t.children??""),pre:t=>R.jsx(R.Fragment,{children:t.children}),blockquote:t=>o4e(t),Cite:t=>l4e(t),table:t=>c4e(t),img:t=>u4e(t),"*":()=>R.jsx(R.Fragment,{})};async function h4e(t){const{default:e}=await SNe(t,{...nae,...D2e,development:!1,remarkPlugins:[DLe],rehypePlugins:[n4e,t4e]});return e}function d4e(t){const[e,n]=I.useState(null);return I.useEffect(()=>{try{h4e(t.children??"").then(i=>{n(R.jsx(i,{components:f4e}))})}catch{n(R.jsx(u2,{order:2,children:"Error Parsing Markdown..."}))}},[t.children]),e}const p4e=I.createContext(null),LO={didCatch:!1,error:null};class m4e extends I.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=LO}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,i,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];(n=(i=this.props).onReset)===null||n===void 0||n.call(i,{args:a,reason:"imperative-api"}),this.setState(LO)}}componentDidCatch(e,n){var i,r;(i=(r=this.props).onError)===null||i===void 0||i.call(r,e,n)}componentDidUpdate(e,n){const{didCatch:i}=this.state,{resetKeys:r}=this.props;if(i&&n.error!==null&&g4e(e.resetKeys,r)){var a,s;(a=(s=this.props).onReset)===null||a===void 0||a.call(s,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(LO)}}render(){const{children:e,fallbackRender:n,FallbackComponent:i,fallback:r}=this.props,{didCatch:a,error:s}=this.state;let o=e;if(a){const l={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")o=n(l);else if(i)o=I.createElement(i,l);else if(r!==void 0)o=r;else throw s}return I.createElement(p4e.Provider,{value:{didCatch:a,error:s,resetErrorBoundary:this.resetErrorBoundary}},o)}}function g4e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,i)=>!Object.is(n,e[i]))}function b4e({props:{visible:t,_markdown:e}}){return t?R.jsx(et,{pb:"xs",px:"sm",style:{maxWidth:"95%"},children:R.jsx(m4e,{fallback:R.jsx(gu,{style:{textAlign:"center"},children:"Markdown Failed to Render"}),children:R.jsx(d4e,{children:e})})}):null}var WB="_3o7djo0",y4e="_3o7djo1",v4e="_3o7djo2";const QV=ke.memo(function({jsonStr:e,aspectRatio:n,onExpand:i}){const[r,a]=ke.useState(!1);if(e==="")return R.jsx("div",{});const s=JSON.parse(e);s.layout.uirevision="true";const{ref:o,width:l}=VX();s.layout.width=l,s.layout.height=l*n;const c=ke.useRef(null);return ke.useEffect(()=>{Plotly.react(c.current,s.data,s.layout,s.config)},[s]),R.jsxs(Ms,{ref:o,className:WB,withBorder:!0,style:{position:"relative"},onMouseEnter:i?()=>a(!0):void 0,onMouseLeave:i?()=>a(!1):void 0,children:[R.jsx("div",{ref:c}),i&&r&&R.jsx(Cr,{label:"Expand plot",children:R.jsx(kl,{onClick:i,variant:"subtle",color:"gray",size:"sm",style:{position:"absolute",bottom:8,right:8,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",zIndex:1001},children:R.jsx(GQ,{size:14})})})]})});function x4e({props:{visible:t,_plotly_json_str:e,aspect:n}}){if(!t)return null;const[i,{open:r,close:a}]=wc(!1);return R.jsxs(et,{children:[R.jsx(QV,{jsonStr:e,aspectRatio:n,onExpand:r}),R.jsx(xo,{opened:i,onClose:a,size:"xl",children:R.jsx(QV,{jsonStr:e,aspectRatio:n})})]})}var gte={exports:{}};const _4e=!0,za="u-",S4e="uplot",w4e=za+"hz",E4e=za+"vt",M4e=za+"title",T4e=za+"wrap",A4e=za+"under",C4e=za+"over",R4e=za+"axis",Sm=za+"off",k4e=za+"select",D4e=za+"cursor-x",O4e=za+"cursor-y",I4e=za+"cursor-pt",N4e=za+"legend",P4e=za+"live",L4e=za+"inline",U4e=za+"series",B4e=za+"marker",eG=za+"label",F4e=za+"value",a1="width",s1="height",Ux="top",tG="bottom",r0="left",UO="right",qB="#000",nG=qB+"0",BO="mousemove",iG="mousedown",FO="mouseup",rG="mouseenter",aG="mouseleave",sG="dblclick",z4e="resize",j4e="scroll",oG="change",ZA="dppxchange",XB="--",Tv=typeof window<"u",wP=Tv?document:null,Z0=Tv?window:null,H4e=Tv?navigator:null;let Hi,uM;function EP(){let t=devicePixelRatio;Hi!=t&&(Hi=t,uM&&TP(oG,uM,EP),uM=matchMedia(`(min-resolution: ${Hi-.001}dppx) and (max-resolution: ${Hi+.001}dppx)`),Qm(oG,uM,EP),Z0.dispatchEvent(new CustomEvent(ZA)))}function cl(t,e){if(e!=null){let n=t.classList;!n.contains(e)&&n.add(e)}}function MP(t,e){let n=t.classList;n.contains(e)&&n.remove(e)}function Dr(t,e,n){t.style[e]=n+"px"}function Jc(t,e,n,i){let r=wP.createElement(t);return e!=null&&cl(r,e),n?.insertBefore(r,i),r}function $l(t,e){return Jc("div",t,e)}const lG=new WeakMap;function Gu(t,e,n,i,r){let a="translate("+e+"px,"+n+"px)",s=lG.get(t);a!=s&&(t.style.transform=a,lG.set(t,a),e<0||n<0||e>i||n>r?cl(t,Sm):MP(t,Sm))}const cG=new WeakMap;function uG(t,e,n){let i=e+n,r=cG.get(t);i!=r&&(cG.set(t,i),t.style.background=e,t.style.borderColor=n)}const fG=new WeakMap;function hG(t,e,n,i){let r=e+""+n,a=fG.get(t);r!=a&&(fG.set(t,r),t.style.height=n+"px",t.style.width=e+"px",t.style.marginLeft=i?-e/2+"px":0,t.style.marginTop=i?-n/2+"px":0)}const YB={passive:!0},V4e={...YB,capture:!0};function Qm(t,e,n,i){e.addEventListener(t,n,i?V4e:YB)}function TP(t,e,n,i){e.removeEventListener(t,n,YB)}Tv&&EP();function tu(t,e,n,i){let r;n=n||0,i=i||e.length-1;let a=i<=2147483647;for(;i-n>1;)r=a?n+i>>1:wl((n+i)/2),e[r]<t?n=r:i=r;return t-e[n]<=e[i]-t?n:i}function bte(t){return(n,i,r)=>{let a=-1,s=-1;for(let o=i;o<=r;o++)if(t(n[o])){a=o;break}for(let o=r;o>=i;o--)if(t(n[o])){s=o;break}return[a,s]}}const yte=t=>t!=null,vte=t=>t!=null&&t>0,uR=bte(yte),G4e=bte(vte);function W4e(t,e,n,i=0,r=!1){let a=r?G4e:uR,s=r?vte:yte;[e,n]=a(t,e,n);let o=t[e],l=t[e];if(e>-1)if(i==1)o=t[e],l=t[n];else if(i==-1)o=t[n],l=t[e];else for(let c=e;c<=n;c++){let u=t[c];s(u)&&(u<o?o=u:u>l&&(l=u))}return[o??gr,l??-gr]}function fR(t,e,n,i){let r=mG(t),a=mG(e);t==e&&(r==-1?(t*=n,e/=n):(t/=n,e*=n));let s=n==10?ph:xte,o=r==1?wl:tc,l=a==1?tc:wl,c=o(s(Na(t))),u=l(s(Na(e))),f=Fy(n,c),h=Fy(n,u);return n==10&&(c<0&&(f=br(f,-c)),u<0&&(h=br(h,-u))),i||n==2?(t=f*r,e=h*a):(t=Ete(t,f),e=hR(e,h)),[t,e]}function $B(t,e,n,i){let r=fR(t,e,n,i);return t==0&&(r[0]=0),e==0&&(r[1]=0),r}const KB=.1,dG={mode:3,pad:KB},j1={pad:0,soft:null,mode:0},q4e={min:j1,max:j1};function QA(t,e,n,i){return dR(n)?pG(t,e,n):(j1.pad=n,j1.soft=i?0:null,j1.mode=i?3:0,pG(t,e,q4e))}function Fi(t,e){return t??e}function X4e(t,e,n){for(e=Fi(e,0),n=Fi(n,t.length-1);e<=n;){if(t[e]!=null)return!0;e++}return!1}function pG(t,e,n){let i=n.min,r=n.max,a=Fi(i.pad,0),s=Fi(r.pad,0),o=Fi(i.hard,-gr),l=Fi(r.hard,gr),c=Fi(i.soft,gr),u=Fi(r.soft,-gr),f=Fi(i.mode,0),h=Fi(r.mode,0),d=e-t,m=ph(d),y=bo(Na(t),Na(e)),v=ph(y),g=Na(v-m);(d<1e-24||g>10)&&(d=0,(t==0||e==0)&&(d=1e-24,f==2&&c!=gr&&(a=0),h==2&&u!=-gr&&(s=0)));let x=d||y||1e3,_=ph(x),E=Fy(10,wl(_)),T=x*(d==0?t==0?.1:1:a),w=br(Ete(t-T,E/10),24),A=t>=c&&(f==1||f==3&&w<=c||f==2&&w>=c)?c:gr,C=bo(o,w<A&&t>=A?A:lu(A,w)),D=x*(d==0?e==0?.1:1:s),k=br(hR(e+D,E/10),24),P=e<=u&&(h==1||h==3&&k>=u||h==2&&k<=u)?u:-gr,B=lu(l,k>P&&e<=P?P:bo(P,k));return C==B&&C==0&&(B=100),[C,B]}const Y4e=new Intl.NumberFormat(Tv?H4e.language:"en-US"),JB=t=>Y4e.format(t),Dl=Math,eT=Dl.PI,Na=Dl.abs,wl=Dl.floor,Ia=Dl.round,tc=Dl.ceil,lu=Dl.min,bo=Dl.max,Fy=Dl.pow,mG=Dl.sign,ph=Dl.log10,xte=Dl.log2,$4e=(t,e=1)=>Dl.sinh(t)*e,zO=(t,e=1)=>Dl.asinh(t/e),gr=1/0;function gG(t){return(ph((t^t>>31)-(t>>31))|0)+1}function AP(t,e,n){return lu(bo(t,e),n)}function _te(t){return typeof t=="function"}function Si(t){return _te(t)?t:()=>t}const K4e=()=>{},Ste=t=>t,wte=(t,e)=>e,J4e=t=>null,bG=t=>!0,yG=(t,e)=>t==e,Z4e=/\.\d*?(?=9{6,}|0{6,})/gm,gg=t=>{if(Tte(t)||ap.has(t))return t;const e=`${t}`,n=e.match(Z4e);if(n==null)return t;let i=n[0].length-1;if(e.indexOf("e-")!=-1){let[r,a]=e.split("e");return+`${gg(r)}e${a}`}return br(t,i)};function gm(t,e){return gg(br(gg(t/e))*e)}function hR(t,e){return gg(tc(gg(t/e))*e)}function Ete(t,e){return gg(wl(gg(t/e))*e)}function br(t,e=0){if(Tte(t))return t;let n=10**e,i=t*n*(1+Number.EPSILON);return Ia(i)/n}const ap=new Map;function Mte(t){return((""+t).split(".")[1]||"").length}function C_(t,e,n,i){let r=[],a=i.map(Mte);for(let s=e;s<n;s++){let o=Na(s),l=br(Fy(t,s),o);for(let c=0;c<i.length;c++){let u=t==10?+`${i[c]}e${s}`:i[c]*l,f=(s>=0?0:o)+(s>=a[c]?0:a[c]),h=t==10?u:br(u,f);r.push(h),ap.set(h,f)}}return r}const H1={},ZB=[],zy=[null,null],Sd=Array.isArray,Tte=Number.isInteger,Q4e=t=>t===void 0;function vG(t){return typeof t=="string"}function dR(t){let e=!1;if(t!=null){let n=t.constructor;e=n==null||n==Object}return e}function eUe(t){return t!=null&&typeof t=="object"}const tUe=Object.getPrototypeOf(Uint8Array),Ate="__proto__";function jy(t,e=dR){let n;if(Sd(t)){let i=t.find(r=>r!=null);if(Sd(i)||e(i)){n=Array(t.length);for(let r=0;r<t.length;r++)n[r]=jy(t[r],e)}else n=t.slice()}else if(t instanceof tUe)n=t.slice();else if(e(t)){n={};for(let i in t)i!=Ate&&(n[i]=jy(t[i],e))}else n=t;return n}function Ea(t){let e=arguments;for(let n=1;n<e.length;n++){let i=e[n];for(let r in i)r!=Ate&&(dR(t[r])?Ea(t[r],jy(i[r])):t[r]=jy(i[r]))}return t}const nUe=0,iUe=1,rUe=2;function aUe(t,e,n){for(let i=0,r,a=-1;i<e.length;i++){let s=e[i];if(s>a){for(r=s-1;r>=0&&t[r]==null;)t[r--]=null;for(r=s+1;r<n&&t[r]==null;)t[a=r++]=null}}}function sUe(t,e){if(cUe(t)){let s=t[0].slice();for(let o=1;o<t.length;o++)s.push(...t[o].slice(1));return uUe(s[0])||(s=lUe(s)),s}let n=new Set;for(let s=0;s<t.length;s++){let l=t[s][0],c=l.length;for(let u=0;u<c;u++)n.add(l[u])}let i=[Array.from(n).sort((s,o)=>s-o)],r=i[0].length,a=new Map;for(let s=0;s<r;s++)a.set(i[0][s],s);for(let s=0;s<t.length;s++){let o=t[s],l=o[0];for(let c=1;c<o.length;c++){let u=o[c],f=Array(r).fill(void 0),h=e?e[s][c]:iUe,d=[];for(let m=0;m<u.length;m++){let y=u[m],v=a.get(l[m]);y===null?h!=nUe&&(f[v]=y,h==rUe&&d.push(v)):f[v]=y}aUe(f,d,r),i.push(f)}}return i}const oUe=typeof queueMicrotask>"u"?t=>Promise.resolve().then(t):queueMicrotask;function lUe(t){let e=t[0],n=e.length,i=Array(n);for(let a=0;a<i.length;a++)i[a]=a;i.sort((a,s)=>e[a]-e[s]);let r=[];for(let a=0;a<t.length;a++){let s=t[a],o=Array(n);for(let l=0;l<n;l++)o[l]=s[i[l]];r.push(o)}return r}function cUe(t){let e=t[0][0],n=e.length;for(let i=1;i<t.length;i++){let r=t[i][0];if(r.length!=n)return!1;if(r!=e){for(let a=0;a<n;a++)if(r[a]!=e[a])return!1}}return!0}function uUe(t,e=100){const n=t.length;if(n<=1)return!0;let i=0,r=n-1;for(;i<=r&&t[i]==null;)i++;for(;r>=i&&t[r]==null;)r--;if(r<=i)return!0;const a=bo(1,wl((r-i+1)/e));for(let s=t[i],o=i+a;o<=r;o+=a){const l=t[o];if(l!=null){if(l<=s)return!1;s=l}}return!0}const Cte=["January","February","March","April","May","June","July","August","September","October","November","December"],Rte=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function kte(t){return t.slice(0,3)}const fUe=Rte.map(kte),hUe=Cte.map(kte),dUe={MMMM:Cte,MMM:hUe,WWWW:Rte,WWW:fUe};function Bx(t){return(t<10?"0":"")+t}function pUe(t){return(t<10?"00":t<100?"0":"")+t}const mUe={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>Bx(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>Bx(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>Bx(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return e==0?12:e>12?e-12:e},AA:t=>t.getHours()>=12?"PM":"AM",aa:t=>t.getHours()>=12?"pm":"am",a:t=>t.getHours()>=12?"p":"a",mm:t=>Bx(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>Bx(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>pUe(t.getMilliseconds())};function QB(t,e){e=e||dUe;let n=[],i=/\{([a-z]+)\}|[^{]+/gi,r;for(;r=i.exec(t);)n.push(r[0][0]=="{"?mUe[r[1]]:r[0]);return a=>{let s="";for(let o=0;o<n.length;o++)s+=typeof n[o]=="string"?n[o]:n[o](a,e);return s}}const gUe=new Intl.DateTimeFormat().resolvedOptions().timeZone;function bUe(t,e){let n;return e=="UTC"||e=="Etc/UTC"?n=new Date(+t+t.getTimezoneOffset()*6e4):e==gUe?n=t:(n=new Date(t.toLocaleString("en-US",{timeZone:e})),n.setMilliseconds(t.getMilliseconds())),n}const Dte=t=>t%1==0,eC=[1,2,2.5,5],yUe=C_(10,-32,0,eC),Ote=C_(10,0,32,eC),vUe=Ote.filter(Dte),bm=yUe.concat(Ote),eF=`
`,Ite="{YYYY}",xG=eF+Ite,Nte="{M}/{D}",o1=eF+Nte,fM=o1+"/{YY}",Pte="{aa}",xUe="{h}:{mm}",d0=xUe+Pte,_G=eF+d0,SG=":{ss}",Qi=null;function Lte(t){let e=t*1e3,n=e*60,i=n*60,r=i*24,a=r*30,s=r*365,l=(t==1?C_(10,0,3,eC).filter(Dte):C_(10,-3,0,eC)).concat([e,e*5,e*10,e*15,e*30,n,n*5,n*10,n*15,n*30,i,i*2,i*3,i*4,i*6,i*8,i*12,r,r*2,r*3,r*4,r*5,r*6,r*7,r*8,r*9,r*10,r*15,a,a*2,a*3,a*4,a*6,s,s*2,s*5,s*10,s*25,s*50,s*100]);const c=[[s,Ite,Qi,Qi,Qi,Qi,Qi,Qi,1],[r*28,"{MMM}",xG,Qi,Qi,Qi,Qi,Qi,1],[r,Nte,xG,Qi,Qi,Qi,Qi,Qi,1],[i,"{h}"+Pte,fM,Qi,o1,Qi,Qi,Qi,1],[n,d0,fM,Qi,o1,Qi,Qi,Qi,1],[e,SG,fM+" "+d0,Qi,o1+" "+d0,Qi,_G,Qi,1],[t,SG+".{fff}",fM+" "+d0,Qi,o1+" "+d0,Qi,_G,Qi,1]];function u(f){return(h,d,m,y,v,g)=>{let x=[],_=v>=s,E=v>=a&&v<s,T=f(m),w=br(T*t,3),A=jO(T.getFullYear(),_?0:T.getMonth(),E||_?1:T.getDate()),C=br(A*t,3);if(E||_){let D=E?v/a:0,k=_?v/s:0,P=w==C?w:br(jO(A.getFullYear()+k,A.getMonth()+D,1)*t,3),B=new Date(Ia(P/t)),H=B.getFullYear(),G=B.getMonth();for(let V=0;P<=y;V++){let U=jO(H+k*V,G+D*V,1),F=U-f(br(U*t,3));P=br((+U+F)*t,3),P<=y&&x.push(P)}}else{let D=v>=r?r:v,k=wl(m)-wl(w),P=C+k+hR(w-C,D);x.push(P);let B=f(P),H=B.getHours()+B.getMinutes()/n+B.getSeconds()/i,G=v/i,V=h.axes[d]._space,U=g/V;for(;P=br(P+v,t==1?0:3),!(P>y);)if(G>1){let F=wl(br(H+G,6))%24,z=f(P).getHours()-F;z>1&&(z=-1),P-=z*i,H=(H+G)%24;let ce=x[x.length-1];br((P-ce)/v,3)*U>=.7&&x.push(P)}else x.push(P)}return x}}return[l,c,u]}const[_Ue,SUe,wUe]=Lte(1),[EUe,MUe,TUe]=Lte(.001);C_(2,-53,53,[1]);function wG(t,e){return t.map(n=>n.map((i,r)=>r==0||r==8||i==null?i:e(r==1||n[8]==0?i:n[1]+i)))}function EG(t,e){return(n,i,r,a,s)=>{let o=e.find(m=>s>=m[0])||e[e.length-1],l,c,u,f,h,d;return i.map(m=>{let y=t(m),v=y.getFullYear(),g=y.getMonth(),x=y.getDate(),_=y.getHours(),E=y.getMinutes(),T=y.getSeconds(),w=v!=l&&o[2]||g!=c&&o[3]||x!=u&&o[4]||_!=f&&o[5]||E!=h&&o[6]||T!=d&&o[7]||o[1];return l=v,c=g,u=x,f=_,h=E,d=T,w(y)})}}function AUe(t,e){let n=QB(e);return(i,r,a,s,o)=>r.map(l=>n(t(l)))}function jO(t,e,n){return new Date(t,e,n)}function MG(t,e){return e(t)}const CUe="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function TG(t,e){return(n,i,r,a)=>a==null?XB:e(t(i))}function RUe(t,e){let n=t.series[e];return n.width?n.stroke(t,e):n.points.width?n.points.stroke(t,e):null}function kUe(t,e){return t.series[e].fill(t,e)}const DUe={show:!0,live:!0,isolate:!1,mount:K4e,markers:{show:!0,width:2,stroke:RUe,fill:kUe,dash:"solid"},idx:null,idxs:null,values:[]};function OUe(t,e){let n=t.cursor.points,i=$l(),r=n.size(t,e);Dr(i,a1,r),Dr(i,s1,r);let a=r/-2;Dr(i,"marginLeft",a),Dr(i,"marginTop",a);let s=n.width(t,e,r);return s&&Dr(i,"borderWidth",s),i}function IUe(t,e){let n=t.series[e].points;return n._fill||n._stroke}function NUe(t,e){let n=t.series[e].points;return n._stroke||n._fill}function PUe(t,e){return t.series[e].points.size}const HO=[0,0];function LUe(t,e,n){return HO[0]=e,HO[1]=n,HO}function hM(t,e,n,i=!0){return r=>{r.button==0&&(!i||r.target==e)&&n(r)}}function VO(t,e,n,i=!0){return r=>{(!i||r.target==e)&&n(r)}}const UUe={show:!0,x:!0,y:!0,lock:!1,move:LUe,points:{one:!1,show:OUe,size:PUe,width:0,stroke:NUe,fill:IUe},bind:{mousedown:hM,mouseup:hM,click:hM,dblclick:hM,mousemove:VO,mouseleave:VO,mouseenter:VO},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(t,e)=>{e.stopPropagation(),e.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(t,e,n,i,r)=>i-r,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ute={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},tF=Ea({},Ute,{filter:wte}),Bte=Ea({},tF,{size:10}),Fte=Ea({},Ute,{show:!1}),nF='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',zte="bold "+nF,jte=1.5,AG={show:!0,scale:"x",stroke:qB,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:zte,side:2,grid:tF,ticks:Bte,border:Fte,font:nF,lineGap:jte,rotate:0},BUe="Value",FUe="Time",CG={show:!0,scale:"x",auto:!1,sorted:1,min:gr,max:-gr,idxs:[]};function zUe(t,e,n,i,r){return e.map(a=>a==null?"":JB(a))}function jUe(t,e,n,i,r,a,s){let o=[],l=ap.get(r)||0;n=s?n:br(hR(n,r),l);for(let c=n;c<=i;c=br(c+r,l))o.push(Object.is(c,-0)?0:c);return o}function CP(t,e,n,i,r,a,s){const o=[],l=t.scales[t.axes[e].scale].log,c=l==10?ph:xte,u=wl(c(n));r=Fy(l,u),l==10&&(r=bm[tu(r,bm)]);let f=n,h=r*l;l==10&&(h=bm[tu(h,bm)]);do o.push(f),f=f+r,l==10&&!ap.has(f)&&(f=br(f,ap.get(r))),f>=h&&(r=f,h=r*l,l==10&&(h=bm[tu(h,bm)]));while(f<=i);return o}function HUe(t,e,n,i,r,a,s){let l=t.scales[t.axes[e].scale].asinh,c=i>l?CP(t,e,bo(l,n),i,r):[l],u=i>=0&&n<=0?[0]:[];return(n<-l?CP(t,e,bo(l,-i),-n,r):[l]).reverse().map(h=>-h).concat(u,c)}const Hte=/./,VUe=/[12357]/,GUe=/[125]/,RG=/1/,RP=(t,e,n,i)=>t.map((r,a)=>e==4&&r==0||a%i==0&&n.test(r.toExponential()[r<0?1:0])?r:null);function WUe(t,e,n,i,r){let a=t.axes[n],s=a.scale,o=t.scales[s],l=t.valToPos,c=a._space,u=l(10,s),f=l(9,s)-u>=c?Hte:l(7,s)-u>=c?VUe:l(5,s)-u>=c?GUe:RG;if(f==RG){let h=Na(l(1,s)-u);if(h<c)return RP(e.slice().reverse(),o.distr,f,tc(c/h)).reverse()}return RP(e,o.distr,f,1)}function qUe(t,e,n,i,r){let a=t.axes[n],s=a.scale,o=a._space,l=t.valToPos,c=Na(l(1,s)-l(2,s));return c<o?RP(e.slice().reverse(),3,Hte,tc(o/c)).reverse():e}function XUe(t,e,n,i){return i==null?XB:e==null?"":JB(e)}const kG={show:!0,scale:"y",stroke:qB,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:zte,side:3,grid:tF,ticks:Bte,border:Fte,font:nF,lineGap:jte,rotate:0};function YUe(t,e){let n=3+(t||1)*2;return br(n*e,3)}function $Ue(t,e){let{scale:n,idxs:i}=t.series[0],r=t._data[0],a=t.valToPos(r[i[0]],n,!0),s=t.valToPos(r[i[1]],n,!0),o=Na(s-a),l=t.series[e],c=o/(l.points.space*Hi);return i[1]-i[0]<=c}const DG={scale:null,auto:!0,sorted:0,min:gr,max:-gr},Vte=(t,e,n,i,r)=>r,OG={show:!0,auto:!0,sorted:0,gaps:Vte,alpha:1,facets:[Ea({},DG,{scale:"x"}),Ea({},DG,{scale:"y"})]},IG={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Vte,alpha:1,points:{show:$Ue,filter:null},values:null,min:gr,max:-gr,idxs:[],path:null,clip:null};function KUe(t,e,n,i,r){return n/10}const Gte={time:_4e,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},JUe=Ea({},Gte,{time:!1,ori:1}),NG={};function Wte(t,e){let n=NG[t];return n||(n={key:t,plots:[],sub(i){n.plots.push(i)},unsub(i){n.plots=n.plots.filter(r=>r!=i)},pub(i,r,a,s,o,l,c){for(let u=0;u<n.plots.length;u++)n.plots[u]!=r&&n.plots[u].pub(i,r,a,s,o,l,c)}},t!=null&&(NG[t]=n)),n}const Hy=1,kP=2;function Ng(t,e,n){const i=t.mode,r=t.series[e],a=i==2?t._data[e]:t._data,s=t.scales,o=t.bbox;let l=a[0],c=i==2?a[1]:a[e],u=i==2?s[r.facets[0].scale]:s[t.series[0].scale],f=i==2?s[r.facets[1].scale]:s[r.scale],h=o.left,d=o.top,m=o.width,y=o.height,v=t.valToPosH,g=t.valToPosV;return u.ori==0?n(r,l,c,u,f,v,g,h,d,m,y,mR,Av,bR,Xte,$te):n(r,l,c,u,f,g,v,d,h,y,m,gR,Cv,aF,Yte,Kte)}function iF(t,e){let n=0,i=0,r=Fi(t.bands,ZB);for(let a=0;a<r.length;a++){let s=r[a];s.series[0]==e?n=s.dir:s.series[1]==e&&(s.dir==1?i|=1:i|=2)}return[n,i==1?-1:i==2?1:i==3?2:0]}function ZUe(t,e,n,i,r){let a=t.mode,s=t.series[e],o=a==2?s.facets[1].scale:s.scale,l=t.scales[o];return r==-1?l.min:r==1?l.max:l.distr==3?l.dir==1?l.min:l.max:0}function mh(t,e,n,i,r,a){return Ng(t,e,(s,o,l,c,u,f,h,d,m,y,v)=>{let g=s.pxRound;const x=c.dir*(c.ori==0?1:-1),_=c.ori==0?Av:Cv;let E,T;x==1?(E=n,T=i):(E=i,T=n);let w=g(f(o[E],c,y,d)),A=g(h(l[E],u,v,m)),C=g(f(o[T],c,y,d)),D=g(h(a==1?u.max:u.min,u,v,m)),k=new Path2D(r);return _(k,C,D),_(k,w,D),_(k,w,A),k})}function pR(t,e,n,i,r,a){let s=null;if(t.length>0){s=new Path2D;const o=e==0?bR:aF;let l=n;for(let f=0;f<t.length;f++){let h=t[f];if(h[1]>h[0]){let d=h[0]-l;d>0&&o(s,l,i,d,i+a),l=h[1]}}let c=n+r-l,u=10;c>0&&o(s,l,i-u/2,c,i+a+u)}return s}function QUe(t,e,n){let i=t[t.length-1];i&&i[0]==e?i[1]=n:t.push([e,n])}function rF(t,e,n,i,r,a,s){let o=[],l=t.length;for(let c=r==1?n:i;c>=n&&c<=i;c+=r)if(e[c]===null){let f=c,h=c;if(r==1)for(;++c<=i&&e[c]===null;)h=c;else for(;--c>=n&&e[c]===null;)h=c;let d=a(t[f]),m=h==f?d:a(t[h]),y=f-r;d=s<=0&&y>=0&&y<l?a(t[y]):d;let g=h+r;m=s>=0&&g>=0&&g<l?a(t[g]):m,m>=d&&o.push([d,m])}return o}function PG(t){return t==0?Ste:t==1?Ia:e=>gm(e,t)}function qte(t){let e=t==0?mR:gR,n=t==0?(r,a,s,o,l,c)=>{r.arcTo(a,s,o,l,c)}:(r,a,s,o,l,c)=>{r.arcTo(s,a,l,o,c)},i=t==0?(r,a,s,o,l)=>{r.rect(a,s,o,l)}:(r,a,s,o,l)=>{r.rect(s,a,l,o)};return(r,a,s,o,l,c=0,u=0)=>{c==0&&u==0?i(r,a,s,o,l):(c=lu(c,o/2,l/2),u=lu(u,o/2,l/2),e(r,a+c,s),n(r,a+o,s,a+o,s+l,c),n(r,a+o,s+l,a,s+l,u),n(r,a,s+l,a,s,u),n(r,a,s,a+o,s,c),r.closePath())}}const mR=(t,e,n)=>{t.moveTo(e,n)},gR=(t,e,n)=>{t.moveTo(n,e)},Av=(t,e,n)=>{t.lineTo(e,n)},Cv=(t,e,n)=>{t.lineTo(n,e)},bR=qte(0),aF=qte(1),Xte=(t,e,n,i,r,a)=>{t.arc(e,n,i,r,a)},Yte=(t,e,n,i,r,a)=>{t.arc(n,e,i,r,a)},$te=(t,e,n,i,r,a,s)=>{t.bezierCurveTo(e,n,i,r,a,s)},Kte=(t,e,n,i,r,a,s)=>{t.bezierCurveTo(n,e,r,i,s,a)};function Jte(t){return(e,n,i,r,a)=>Ng(e,n,(s,o,l,c,u,f,h,d,m,y,v)=>{let{pxRound:g,points:x}=s,_,E;c.ori==0?(_=mR,E=Xte):(_=gR,E=Yte);const T=br(x.width*Hi,3);let w=(x.size-x.width)/2*Hi,A=br(w*2,3),C=new Path2D,D=new Path2D,{left:k,top:P,width:B,height:H}=e.bbox;bR(D,k-A,P-A,B+A*2,H+A*2);const G=V=>{if(l[V]!=null){let U=g(f(o[V],c,y,d)),F=g(h(l[V],u,v,m));_(C,U+w,F),E(C,U,F,w,0,eT*2)}};if(a)a.forEach(G);else for(let V=i;V<=r;V++)G(V);return{stroke:T>0?C:null,fill:C,clip:D,flags:Hy|kP}})}function Zte(t){return(e,n,i,r,a,s)=>{i!=r&&(a!=i&&s!=i&&t(e,n,i),a!=r&&s!=r&&t(e,n,r),t(e,n,s))}}const eBe=Zte(Av),tBe=Zte(Cv);function Qte(t){const e=Fi(t?.alignGaps,0);return(n,i,r,a)=>Ng(n,i,(s,o,l,c,u,f,h,d,m,y,v)=>{[r,a]=uR(l,r,a);let g=s.pxRound,x=H=>g(f(H,c,y,d)),_=H=>g(h(H,u,v,m)),E,T;c.ori==0?(E=Av,T=eBe):(E=Cv,T=tBe);const w=c.dir*(c.ori==0?1:-1),A={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Hy},C=A.stroke;let D=!1;if(a-r>=y*4){let H=$=>n.posToVal($,c.key,!0),G=null,V=null,U,F,q,X=x(o[w==1?r:a]),z=x(o[r]),ce=x(o[a]),he=H(w==1?z+1:ce-1);for(let $=w==1?r:a;$>=r&&$<=a;$+=w){let Me=o[$],pe=(w==1?Me<he:Me>he)?X:x(Me),xe=l[$];pe==X?xe!=null?(F=xe,G==null?(E(C,pe,_(F)),U=G=V=F):F<G?G=F:F>V&&(V=F)):xe===null&&(D=!0):(G!=null&&T(C,X,_(G),_(V),_(U),_(F)),xe!=null?(F=xe,E(C,pe,_(F)),G=V=U=F):(G=V=null,xe===null&&(D=!0)),X=pe,he=H(X+w))}G!=null&&G!=V&&q!=X&&T(C,X,_(G),_(V),_(U),_(F))}else for(let H=w==1?r:a;H>=r&&H<=a;H+=w){let G=l[H];G===null?D=!0:G!=null&&E(C,x(o[H]),_(G))}let[P,B]=iF(n,i);if(s.fill!=null||P!=0){let H=A.fill=new Path2D(C),G=s.fillTo(n,i,s.min,s.max,P),V=_(G),U=x(o[r]),F=x(o[a]);w==-1&&([F,U]=[U,F]),E(H,F,V),E(H,U,V)}if(!s.spanGaps){let H=[];D&&H.push(...rF(o,l,r,a,w,x,e)),A.gaps=H=s.gaps(n,i,r,a,H),A.clip=pR(H,c.ori,d,m,y,v)}return B!=0&&(A.band=B==2?[mh(n,i,r,a,C,-1),mh(n,i,r,a,C,1)]:mh(n,i,r,a,C,B)),A})}function nBe(t){const e=Fi(t.align,1),n=Fi(t.ascDesc,!1),i=Fi(t.alignGaps,0),r=Fi(t.extend,!1);return(a,s,o,l)=>Ng(a,s,(c,u,f,h,d,m,y,v,g,x,_)=>{[o,l]=uR(f,o,l);let E=c.pxRound,{left:T,width:w}=a.bbox,A=z=>E(m(z,h,x,v)),C=z=>E(y(z,d,_,g)),D=h.ori==0?Av:Cv;const k={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Hy},P=k.stroke,B=h.dir*(h.ori==0?1:-1);let H=C(f[B==1?o:l]),G=A(u[B==1?o:l]),V=G,U=G;r&&e==-1&&(U=T,D(P,U,H)),D(P,G,H);for(let z=B==1?o:l;z>=o&&z<=l;z+=B){let ce=f[z];if(ce==null)continue;let he=A(u[z]),$=C(ce);e==1?D(P,he,H):D(P,V,$),D(P,he,$),H=$,V=he}let F=V;r&&e==1&&(F=T+w,D(P,F,H));let[q,X]=iF(a,s);if(c.fill!=null||q!=0){let z=k.fill=new Path2D(P),ce=c.fillTo(a,s,c.min,c.max,q),he=C(ce);D(z,F,he),D(z,U,he)}if(!c.spanGaps){let z=[];z.push(...rF(u,f,o,l,B,A,i));let ce=c.width*Hi/2,he=n||e==1?ce:-ce,$=n||e==-1?-ce:ce;z.forEach(Me=>{Me[0]+=he,Me[1]+=$}),k.gaps=z=c.gaps(a,s,o,l,z),k.clip=pR(z,h.ori,v,g,x,_)}return X!=0&&(k.band=X==2?[mh(a,s,o,l,P,-1),mh(a,s,o,l,P,1)]:mh(a,s,o,l,P,X)),k})}function LG(t,e,n,i,r,a,s=gr){if(t.length>1){let o=null;for(let l=0,c=1/0;l<t.length;l++)if(e[l]!==void 0){if(o!=null){let u=Na(t[l]-t[o]);u<c&&(c=u,s=Na(n(t[l],i,r,a)-n(t[o],i,r,a)))}o=l}}return s}function iBe(t){t=t||H1;const e=Fi(t.size,[.6,gr,1]),n=t.align||0,i=t.gap||0;let r=t.radius;r=r==null?[0,0]:typeof r=="number"?[r,0]:r;const a=Si(r),s=1-e[0],o=Fi(e[1],gr),l=Fi(e[2],1),c=Fi(t.disp,H1),u=Fi(t.each,d=>{}),{fill:f,stroke:h}=c;return(d,m,y,v)=>Ng(d,m,(g,x,_,E,T,w,A,C,D,k,P)=>{let B=g.pxRound,H=n,G=i*Hi,V=o*Hi,U=l*Hi,F,q;E.ori==0?[F,q]=a(d,m):[q,F]=a(d,m);const X=E.dir*(E.ori==0?1:-1);let z=E.ori==0?bR:aF,ce=E.ori==0?u:(ue,se,be,Z,Ye,tt,mt)=>{u(ue,se,be,Ye,Z,mt,tt)},he=Fi(d.bands,ZB).find(ue=>ue.series[0]==m),$=he!=null?he.dir:0,Me=g.fillTo(d,m,g.min,g.max,$),Se=B(A(Me,T,P,D)),pe,xe,Ne,Ge=k,$e=B(g.width*Hi),ct=!1,At=null,fe=null,Ve=null,je=null;f!=null&&($e==0||h!=null)&&(ct=!0,At=f.values(d,m,y,v),fe=new Map,new Set(At).forEach(ue=>{ue!=null&&fe.set(ue,new Path2D)}),$e>0&&(Ve=h.values(d,m,y,v),je=new Map,new Set(Ve).forEach(ue=>{ue!=null&&je.set(ue,new Path2D)})));let{x0:ot,size:Te}=c;if(ot!=null&&Te!=null){H=1,x=ot.values(d,m,y,v),ot.unit==2&&(x=x.map(be=>d.posToVal(C+be*k,E.key,!0)));let ue=Te.values(d,m,y,v);Te.unit==2?xe=ue[0]*k:xe=w(ue[0],E,k,C)-w(0,E,k,C),Ge=LG(x,_,w,E,k,C,Ge),Ne=Ge-xe+G}else Ge=LG(x,_,w,E,k,C,Ge),Ne=Ge*s+G,xe=Ge-Ne;Ne<1&&(Ne=0),$e>=xe/2&&($e=0),Ne<5&&(B=Ste);let Ue=Ne>0,Oe=Ge-Ne-(Ue?$e:0);xe=B(AP(Oe,U,V)),pe=(H==0?xe/2:H==X?0:xe)-H*X*((H==0?G/2:0)+(Ue?$e/2:0));const We={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Et=ct?null:new Path2D;let vt=null;if(he!=null)vt=d.data[he.series[1]];else{let{y0:ue,y1:se}=c;ue!=null&&se!=null&&(_=se.values(d,m,y,v),vt=ue.values(d,m,y,v))}let re=F*xe,J=q*xe;for(let ue=X==1?y:v;ue>=y&&ue<=v;ue+=X){let se=_[ue];if(se==null)continue;if(vt!=null){let Je=vt[ue]??0;if(se-Je==0)continue;Se=A(Je,T,P,D)}let be=E.distr!=2||c!=null?x[ue]:ue,Z=w(be,E,k,C),Ye=A(Fi(se,Me),T,P,D),tt=B(Z-pe),mt=B(bo(Ye,Se)),Fe=B(lu(Ye,Se)),rt=mt-Fe;if(se!=null){let Je=se<0?J:re,Xt=se<0?re:J;ct?($e>0&&Ve[ue]!=null&&z(je.get(Ve[ue]),tt,Fe+wl($e/2),xe,bo(0,rt-$e),Je,Xt),At[ue]!=null&&z(fe.get(At[ue]),tt,Fe+wl($e/2),xe,bo(0,rt-$e),Je,Xt)):z(Et,tt,Fe+wl($e/2),xe,bo(0,rt-$e),Je,Xt),ce(d,m,ue,tt-$e/2,Fe,xe+$e,rt)}}return $e>0?We.stroke=ct?je:Et:ct||(We._fill=g.width==0?g._fill:g._stroke??g._fill,We.width=0),We.fill=ct?fe:Et,We})}function rBe(t,e){const n=Fi(e?.alignGaps,0);return(i,r,a,s)=>Ng(i,r,(o,l,c,u,f,h,d,m,y,v,g)=>{[a,s]=uR(c,a,s);let x=o.pxRound,_=F=>x(h(F,u,v,m)),E=F=>x(d(F,f,g,y)),T,w,A;u.ori==0?(T=mR,A=Av,w=$te):(T=gR,A=Cv,w=Kte);const C=u.dir*(u.ori==0?1:-1);let D=_(l[C==1?a:s]),k=D,P=[],B=[];for(let F=C==1?a:s;F>=a&&F<=s;F+=C)if(c[F]!=null){let X=l[F],z=_(X);P.push(k=z),B.push(E(c[F]))}const H={stroke:t(P,B,T,A,w,x),fill:null,clip:null,band:null,gaps:null,flags:Hy},G=H.stroke;let[V,U]=iF(i,r);if(o.fill!=null||V!=0){let F=H.fill=new Path2D(G),q=o.fillTo(i,r,o.min,o.max,V),X=E(q);A(F,k,X),A(F,D,X)}if(!o.spanGaps){let F=[];F.push(...rF(l,c,a,s,C,_,n)),H.gaps=F=o.gaps(i,r,a,s,F),H.clip=pR(F,u.ori,m,y,v,g)}return U!=0&&(H.band=U==2?[mh(i,r,a,s,G,-1),mh(i,r,a,s,G,1)]:mh(i,r,a,s,G,U)),H})}function aBe(t){return rBe(sBe,t)}function sBe(t,e,n,i,r,a){const s=t.length;if(s<2)return null;const o=new Path2D;if(n(o,t[0],e[0]),s==2)i(o,t[1],e[1]);else{let l=Array(s),c=Array(s-1),u=Array(s-1),f=Array(s-1);for(let h=0;h<s-1;h++)u[h]=e[h+1]-e[h],f[h]=t[h+1]-t[h],c[h]=u[h]/f[h];l[0]=c[0];for(let h=1;h<s-1;h++)c[h]===0||c[h-1]===0||c[h-1]>0!=c[h]>0?l[h]=0:(l[h]=3*(f[h-1]+f[h])/((2*f[h]+f[h-1])/c[h-1]+(f[h]+2*f[h-1])/c[h]),isFinite(l[h])||(l[h]=0));l[s-1]=c[s-2];for(let h=0;h<s-1;h++)r(o,t[h]+f[h]/3,e[h]+l[h]*f[h]/3,t[h+1]-f[h]/3,e[h+1]-l[h+1]*f[h]/3,t[h+1],e[h+1])}return o}const DP=new Set;function UG(){for(let t of DP)t.syncRect(!0)}Tv&&(Qm(z4e,Z0,UG),Qm(j4e,Z0,UG,!0),Qm(ZA,Z0,()=>{Ws.pxRatio=Hi}));const oBe=Qte(),lBe=Jte();function BG(t,e,n,i){return(i?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map((a,s)=>OP(a,s,e,n))}function cBe(t,e){return t.map((n,i)=>i==0?{}:Ea({},e,n))}function OP(t,e,n,i){return Ea({},e==0?n:i,t)}function ene(t,e,n){return e==null?zy:[e,n]}const uBe=ene;function fBe(t,e,n){return e==null?zy:QA(e,n,KB,!0)}function tne(t,e,n,i){return e==null?zy:fR(e,n,t.scales[i].log,!1)}const hBe=tne;function nne(t,e,n,i){return e==null?zy:$B(e,n,t.scales[i].log,!1)}const dBe=nne;function pBe(t,e,n,i,r){let a=bo(gG(t),gG(e)),s=e-t,o=tu(r/i*s,n);do{let l=n[o],c=i*l/s;if(c>=r&&a+(l<5?ap.get(l):0)<=17)return[l,c]}while(++o<n.length);return[0,0]}function FG(t){let e,n;return t=t.replace(/(\d+)px/,(i,r)=>(e=Ia((n=+r)*Hi))+"px"),[t,e,n]}function mBe(t){t.show&&[t.font,t.labelFont].forEach(e=>{let n=br(e[2]*Hi,1);e[0]=e[0].replace(/[0-9.]+px/,n+"px"),e[1]=n})}function Ws(t,e,n){const i={mode:Fi(t.mode,1)},r=i.mode;function a(K,ae,ge,ve){let De=ae.valToPct(K);return ve+ge*(ae.dir==-1?1-De:De)}function s(K,ae,ge,ve){let De=ae.valToPct(K);return ve+ge*(ae.dir==-1?De:1-De)}function o(K,ae,ge,ve){return ae.ori==0?a(K,ae,ge,ve):s(K,ae,ge,ve)}i.valToPosH=a,i.valToPosV=s;let l=!1;i.status=0;const c=i.root=$l(S4e);if(t.id!=null&&(c.id=t.id),cl(c,t.class),t.title){let K=$l(M4e,c);K.textContent=t.title}const u=Jc("canvas"),f=i.ctx=u.getContext("2d"),h=$l(T4e,c);Qm("click",h,K=>{K.target===m&&(Mn!=Bt||Ei!=mn)&&cr.click(i,K)},!0);const d=i.under=$l(A4e,h);h.appendChild(u);const m=i.over=$l(C4e,h);t=jy(t);const y=+Fi(t.pxAlign,1),v=PG(y);(t.plugins||[]).forEach(K=>{K.opts&&(t=K.opts(i,t)||t)});const g=t.ms||.001,x=i.series=r==1?BG(t.series||[],CG,IG,!1):cBe(t.series||[null],OG),_=i.axes=BG(t.axes||[],AG,kG,!0),E=i.scales={},T=i.bands=t.bands||[];T.forEach(K=>{K.fill=Si(K.fill||null),K.dir=Fi(K.dir,-1)});const w=r==2?x[1].facets[0].scale:x[0].scale,A={axes:Sn,series:_n},C=(t.drawOrder||["axes","series"]).map(K=>A[K]);function D(K){const ae=K.distr==3?ge=>ph(ge>0?ge:K.clamp(i,ge,K.min,K.max,K.key)):K.distr==4?ge=>zO(ge,K.asinh):K.distr==100?ge=>K.fwd(ge):ge=>ge;return ge=>{let ve=ae(ge),{_min:De,_max:Pe}=K,_t=Pe-De;return(ve-De)/_t}}function k(K){let ae=E[K];if(ae==null){let ge=(t.scales||H1)[K]||H1;if(ge.from!=null){k(ge.from);let ve=Ea({},E[ge.from],ge,{key:K});ve.valToPct=D(ve),E[K]=ve}else{ae=E[K]=Ea({},K==w?Gte:JUe,ge),ae.key=K;let ve=ae.time,De=ae.range,Pe=Sd(De);if((K!=w||r==2&&!ve)&&(Pe&&(De[0]==null||De[1]==null)&&(De={min:De[0]==null?dG:{mode:1,hard:De[0],soft:De[0]},max:De[1]==null?dG:{mode:1,hard:De[1],soft:De[1]}},Pe=!1),!Pe&&dR(De))){let _t=De;De=(Pt,Ht,Jt)=>Ht==null?zy:QA(Ht,Jt,_t)}ae.range=Si(De||(ve?uBe:K==w?ae.distr==3?hBe:ae.distr==4?dBe:ene:ae.distr==3?tne:ae.distr==4?nne:fBe)),ae.auto=Si(Pe?!1:ae.auto),ae.clamp=Si(ae.clamp||KUe),ae._min=ae._max=null,ae.valToPct=D(ae)}}}k("x"),k("y"),r==1&&x.forEach(K=>{k(K.scale)}),_.forEach(K=>{k(K.scale)});for(let K in t.scales)k(K);const P=E[w],B=P.distr;let H,G;P.ori==0?(cl(c,w4e),H=a,G=s):(cl(c,E4e),H=s,G=a);const V={};for(let K in E){let ae=E[K];(ae.min!=null||ae.max!=null)&&(V[K]={min:ae.min,max:ae.max},ae.min=ae.max=null)}const U=t.tzDate||(K=>new Date(Ia(K/g))),F=t.fmtDate||QB,q=g==1?wUe(U):TUe(U),X=EG(U,wG(g==1?SUe:MUe,F)),z=TG(U,MG(CUe,F)),ce=[],he=i.legend=Ea({},DUe,t.legend),$=i.cursor=Ea({},UUe,{drag:{y:r==2}},t.cursor),Me=he.show,Se=$.show,pe=he.markers;he.idxs=ce,pe.width=Si(pe.width),pe.dash=Si(pe.dash),pe.stroke=Si(pe.stroke),pe.fill=Si(pe.fill);let xe,Ne,Ge,$e=[],ct=[],At,fe=!1,Ve={};if(he.live){const K=x[1]?x[1].values:null;fe=K!=null,At=fe?K(i,1,0):{_:0};for(let ae in At)Ve[ae]=XB}if(Me)if(xe=Jc("table",N4e,c),Ge=Jc("tbody",null,xe),he.mount(i,xe),fe){Ne=Jc("thead",null,xe,Ge);let K=Jc("tr",null,Ne);Jc("th",null,K);for(var je in At)Jc("th",eG,K).textContent=je}else cl(xe,L4e),he.live&&cl(xe,P4e);const ot={show:!0},Te={show:!1};function Ue(K,ae){if(ae==0&&(fe||!he.live||r==2))return zy;let ge=[],ve=Jc("tr",U4e,Ge,Ge.childNodes[ae]);cl(ve,K.class),K.show||cl(ve,Sm);let De=Jc("th",null,ve);if(pe.show){let Pt=$l(B4e,De);if(ae>0){let Ht=pe.width(i,ae);Ht&&(Pt.style.border=Ht+"px "+pe.dash(i,ae)+" "+pe.stroke(i,ae)),Pt.style.background=pe.fill(i,ae)}}let Pe=$l(eG,De);K.label instanceof HTMLElement?Pe.appendChild(K.label):Pe.textContent=K.label,ae>0&&(pe.show||(Pe.style.color=K.width>0?pe.stroke(i,ae):pe.fill(i,ae)),We("click",De,Pt=>{if($._lock)return;Yi(Pt);let Ht=x.indexOf(K);if((Pt.ctrlKey||Pt.metaKey)!=he.isolate){let Jt=x.some(($t,sn)=>sn>0&&sn!=Ht&&$t.show);x.forEach(($t,sn)=>{sn>0&&Rs(sn,Jt?sn==Ht?ot:Te:ot,!0,Jn.setSeries)})}else Rs(Ht,{show:!K.show},!0,Jn.setSeries)},!1),Ni&&We(rG,De,Pt=>{$._lock||(Yi(Pt),Rs(x.indexOf(K),wo,!0,Jn.setSeries))},!1));for(var _t in At){let Pt=Jc("td",F4e,ve);Pt.textContent="--",ge.push(Pt)}return[ve,ge]}const Oe=new Map;function We(K,ae,ge,ve=!0){const De=Oe.get(ae)||{},Pe=$.bind[K](i,ae,ge,ve);Pe&&(Qm(K,ae,De[K]=Pe),Oe.set(ae,De))}function Et(K,ae,ge){const ve=Oe.get(ae)||{};for(let De in ve)(K==null||De==K)&&(TP(De,ae,ve[De]),delete ve[De]);K==null&&Oe.delete(ae)}let vt=0,re=0,J=0,ue=0,se=0,be=0,Z=se,Ye=be,tt=J,mt=ue,Fe=0,rt=0,Je=0,Xt=0;i.bbox={};let Nt=!1,ht=!1,zt=!1,Re=!1,Be=!1,wt=!1;function Wt(K,ae,ge){(ge||K!=i.width||ae!=i.height)&&ut(K,ae),Ys(!1),zt=!0,ht=!0,Vo()}function ut(K,ae){i.width=vt=J=K,i.height=re=ue=ae,se=be=0,Vn(),zn();let ge=i.bbox;Fe=ge.left=gm(se*Hi,.5),rt=ge.top=gm(be*Hi,.5),Je=ge.width=gm(J*Hi,.5),Xt=ge.height=gm(ue*Hi,.5)}const gt=3;function Mt(){let K=!1,ae=0;for(;!K;){ae++;let ge=Lc(ae),ve=Ho(ae);K=ae==gt||ge&&ve,K||(ut(i.width,i.height),ht=!0)}}function gn({width:K,height:ae}){Wt(K,ae)}i.setSize=gn;function Vn(){let K=!1,ae=!1,ge=!1,ve=!1;_.forEach((De,Pe)=>{if(De.show&&De._show){let{side:_t,_size:Pt}=De,Ht=_t%2,Jt=De.label!=null?De.labelSize:0,$t=Pt+Jt;$t>0&&(Ht?(J-=$t,_t==3?(se+=$t,ve=!0):ge=!0):(ue-=$t,_t==0?(be+=$t,K=!0):ae=!0))}}),oe[0]=K,oe[1]=ge,oe[2]=ae,oe[3]=ve,J-=Ze[1]+Ze[3],se+=Ze[3],ue-=Ze[2]+Ze[0],be+=Ze[0]}function zn(){let K=se+J,ae=be+ue,ge=se,ve=be;function De(Pe,_t){switch(Pe){case 1:return K+=_t,K-_t;case 2:return ae+=_t,ae-_t;case 3:return ge-=_t,ge+_t;case 0:return ve-=_t,ve+_t}}_.forEach((Pe,_t)=>{if(Pe.show&&Pe._show){let Pt=Pe.side;Pe._pos=De(Pt,Pe._size),Pe.label!=null&&(Pe._lpos=De(Pt,Pe.labelSize))}})}if($.dataIdx==null){let K=$.hover,ae=K.skip=new Set(K.skip??[]);ae.add(void 0);let ge=K.prox=Si(K.prox),ve=K.bias??=0;$.dataIdx=(De,Pe,_t,Pt)=>{if(Pe==0)return _t;let Ht=_t,Jt=ge(De,Pe,_t,Pt)??gr,$t=Jt>=0&&Jt<gr,sn=P.ori==0?J:ue,On=$.left,ai=e[0],Un=e[Pe];if(ae.has(Un[_t])){Ht=null;let ti=null,wn=null,pn;if(ve==0||ve==-1)for(pn=_t;ti==null&&pn-- >0;)ae.has(Un[pn])||(ti=pn);if(ve==0||ve==1)for(pn=_t;wn==null&&pn++<Un.length;)ae.has(Un[pn])||(wn=pn);if(ti!=null||wn!=null)if($t){let ir=ti==null?-1/0:H(ai[ti],P,sn,0),_r=wn==null?1/0:H(ai[wn],P,sn,0),Wr=On-ir,ji=_r-On;Wr<=ji?Wr<=Jt&&(Ht=ti):ji<=Jt&&(Ht=wn)}else Ht=wn==null?ti:ti==null?wn:_t-ti<=wn-_t?ti:wn}else $t&&Na(On-H(ai[_t],P,sn,0))>Jt&&(Ht=null);return Ht}}const Yi=K=>{$.event=K};$.idxs=ce,$._lock=!1;let Gn=$.points;Gn.show=Si(Gn.show),Gn.size=Si(Gn.size),Gn.stroke=Si(Gn.stroke),Gn.width=Si(Gn.width),Gn.fill=Si(Gn.fill);const ea=i.focus=Ea({},t.focus||{alpha:.3},$.focus),Ni=ea.prox>=0,nr=Ni&&Gn.one;let wi=[],ta=[],zi=[];function dn(K,ae){let ge=Gn.show(i,ae);if(ge instanceof HTMLElement)return cl(ge,I4e),cl(ge,K.class),Gu(ge,-10,-10,J,ue),m.insertBefore(ge,wi[ae]),ge}function ya(K,ae){if(r==1||ae>0){let ge=r==1&&E[K.scale].time,ve=K.value;K.value=ge?vG(ve)?TG(U,MG(ve,F)):ve||z:ve||XUe,K.label=K.label||(ge?FUe:BUe)}if(nr||ae>0){K.width=K.width==null?1:K.width,K.paths=K.paths||oBe||J4e,K.fillTo=Si(K.fillTo||ZUe),K.pxAlign=+Fi(K.pxAlign,y),K.pxRound=PG(K.pxAlign),K.stroke=Si(K.stroke||null),K.fill=Si(K.fill||null),K._stroke=K._fill=K._paths=K._focus=null;let ge=YUe(bo(1,K.width),1),ve=K.points=Ea({},{size:ge,width:bo(1,ge*.2),stroke:K.stroke,space:ge*2,paths:lBe,_stroke:null,_fill:null},K.points);ve.show=Si(ve.show),ve.filter=Si(ve.filter),ve.fill=Si(ve.fill),ve.stroke=Si(ve.stroke),ve.paths=Si(ve.paths),ve.pxAlign=K.pxAlign}if(Me){let ge=Ue(K,ae);$e.splice(ae,0,ge[0]),ct.splice(ae,0,ge[1]),he.values.push(null)}if(Se){ce.splice(ae,0,null);let ge=null;nr?ae==0&&(ge=dn(K,ae)):ae>0&&(ge=dn(K,ae)),wi.splice(ae,0,ge),ta.splice(ae,0,0),zi.splice(ae,0,0)}Rn("addSeries",ae)}function Ii(K,ae){ae=ae??x.length,K=r==1?OP(K,ae,CG,IG):OP(K,ae,{},OG),x.splice(ae,0,K),ya(x[ae],ae)}i.addSeries=Ii;function ie(K){if(x.splice(K,1),Me){he.values.splice(K,1),ct.splice(K,1);let ae=$e.splice(K,1)[0];Et(null,ae.firstChild),ae.remove()}Se&&(ce.splice(K,1),wi.splice(K,1)[0].remove(),ta.splice(K,1),zi.splice(K,1)),Rn("delSeries",K)}i.delSeries=ie;const oe=[!1,!1,!1,!1];function Ae(K,ae){if(K._show=K.show,K.show){let ge=K.side%2,ve=E[K.scale];ve==null&&(K.scale=ge?x[1].scale:w,ve=E[K.scale]);let De=ve.time;K.size=Si(K.size),K.space=Si(K.space),K.rotate=Si(K.rotate),Sd(K.incrs)&&K.incrs.forEach(_t=>{!ap.has(_t)&&ap.set(_t,Mte(_t))}),K.incrs=Si(K.incrs||(ve.distr==2?vUe:De?g==1?_Ue:EUe:bm)),K.splits=Si(K.splits||(De&&ve.distr==1?q:ve.distr==3?CP:ve.distr==4?HUe:jUe)),K.stroke=Si(K.stroke),K.grid.stroke=Si(K.grid.stroke),K.ticks.stroke=Si(K.ticks.stroke),K.border.stroke=Si(K.border.stroke);let Pe=K.values;K.values=Sd(Pe)&&!Sd(Pe[0])?Si(Pe):De?Sd(Pe)?EG(U,wG(Pe,F)):vG(Pe)?AUe(U,Pe):Pe||X:Pe||zUe,K.filter=Si(K.filter||(ve.distr>=3&&ve.log==10?WUe:ve.distr==3&&ve.log==2?qUe:wte)),K.font=FG(K.font),K.labelFont=FG(K.labelFont),K._size=K.size(i,null,ae,0),K._space=K._rotate=K._incrs=K._found=K._splits=K._values=null,K._size>0&&(oe[ae]=!0,K._el=$l(R4e,h))}}function qe(K,ae,ge,ve){let[De,Pe,_t,Pt]=ge,Ht=ae%2,Jt=0;return Ht==0&&(Pt||Pe)&&(Jt=ae==0&&!De||ae==2&&!_t?Ia(AG.size/3):0),Ht==1&&(De||_t)&&(Jt=ae==1&&!Pe||ae==3&&!Pt?Ia(kG.size/2):0),Jt}const at=i.padding=(t.padding||[qe,qe,qe,qe]).map(K=>Si(Fi(K,qe))),Ze=i._padding=at.map((K,ae)=>K(i,ae,oe,0));let Tt,Q=null,me=null;const _e=r==1?x[0].idxs:null;let Ee=null,ye=!1;function pt(K,ae){if(e=K??[],i.data=i._data=e,r==2){Tt=0;for(let ge=1;ge<x.length;ge++)Tt+=e[ge][0].length}else{e.length==0&&(i.data=i._data=e=[[]]),Ee=e[0],Tt=Ee.length;let ge=e;if(B==2){ge=e.slice();let ve=ge[0]=Array(Tt);for(let De=0;De<Tt;De++)ve[De]=De}i._data=e=ge}if(Ys(!0),Rn("setData"),B==2&&(zt=!0),ae!==!1){let ge=P;ge.auto(i,ye)?it():$s(w,ge.min,ge.max),Re=Re||$.left>=0,wt=!0,Vo()}}i.setData=pt;function it(){ye=!0;let K,ae;r==1&&(Tt>0?(Q=_e[0]=0,me=_e[1]=Tt-1,K=e[0][Q],ae=e[0][me],B==2?(K=Q,ae=me):K==ae&&(B==3?[K,ae]=fR(K,K,P.log,!1):B==4?[K,ae]=$B(K,K,P.log,!1):P.time?ae=K+Ia(86400/g):[K,ae]=QA(K,ae,KB,!0))):(Q=_e[0]=K=null,me=_e[1]=ae=null)),$s(w,K,ae)}let dt,yt,Dt,qt,Ke,nn,cn,un,Dn,Kt;function Yt(K,ae,ge,ve,De,Pe){K??=nG,ge??=ZB,ve??="butt",De??=nG,Pe??="round",K!=dt&&(f.strokeStyle=dt=K),De!=yt&&(f.fillStyle=yt=De),ae!=Dt&&(f.lineWidth=Dt=ae),Pe!=Ke&&(f.lineJoin=Ke=Pe),ve!=nn&&(f.lineCap=nn=ve),ge!=qt&&f.setLineDash(qt=ge)}function Xn(K,ae,ge,ve){ae!=yt&&(f.fillStyle=yt=ae),K!=cn&&(f.font=cn=K),ge!=un&&(f.textAlign=un=ge),ve!=Dn&&(f.textBaseline=Dn=ve)}function yn(K,ae,ge,ve,De=0){if(ve.length>0&&K.auto(i,ye)&&(ae==null||ae.min==null)){let Pe=Fi(Q,0),_t=Fi(me,ve.length-1),Pt=ge.min==null?W4e(ve,Pe,_t,De,K.distr==3):[ge.min,ge.max];K.min=lu(K.min,ge.min=Pt[0]),K.max=bo(K.max,ge.max=Pt[1])}}const _i={min:null,max:null};function Bn(){for(let ve in E){let De=E[ve];V[ve]==null&&(De.min==null||V[w]!=null&&De.auto(i,ye))&&(V[ve]=_i)}for(let ve in E){let De=E[ve];V[ve]==null&&De.from!=null&&V[De.from]!=null&&(V[ve]=_i)}V[w]!=null&&Ys(!0);let K={};for(let ve in V){let De=V[ve];if(De!=null){let Pe=K[ve]=jy(E[ve],eUe);if(De.min!=null)Ea(Pe,De);else if(ve!=w||r==2)if(Tt==0&&Pe.from==null){let _t=Pe.range(i,null,null,ve);Pe.min=_t[0],Pe.max=_t[1]}else Pe.min=gr,Pe.max=-gr}}if(Tt>0){x.forEach((ve,De)=>{if(r==1){let Pe=ve.scale,_t=V[Pe];if(_t==null)return;let Pt=K[Pe];if(De==0){let Ht=Pt.range(i,Pt.min,Pt.max,Pe);Pt.min=Ht[0],Pt.max=Ht[1],Q=tu(Pt.min,e[0]),me=tu(Pt.max,e[0]),me-Q>1&&(e[0][Q]<Pt.min&&Q++,e[0][me]>Pt.max&&me--),ve.min=Ee[Q],ve.max=Ee[me]}else ve.show&&ve.auto&&yn(Pt,_t,ve,e[De],ve.sorted);ve.idxs[0]=Q,ve.idxs[1]=me}else if(De>0&&ve.show&&ve.auto){let[Pe,_t]=ve.facets,Pt=Pe.scale,Ht=_t.scale,[Jt,$t]=e[De],sn=K[Pt],On=K[Ht];sn!=null&&yn(sn,V[Pt],Pe,Jt,Pe.sorted),On!=null&&yn(On,V[Ht],_t,$t,_t.sorted),ve.min=_t.min,ve.max=_t.max}});for(let ve in K){let De=K[ve],Pe=V[ve];if(De.from==null&&(Pe==null||Pe.min==null)){let _t=De.range(i,De.min==gr?null:De.min,De.max==-gr?null:De.max,ve);De.min=_t[0],De.max=_t[1]}}}for(let ve in K){let De=K[ve];if(De.from!=null){let Pe=K[De.from];if(Pe.min==null)De.min=De.max=null;else{let _t=De.range(i,Pe.min,Pe.max,ve);De.min=_t[0],De.max=_t[1]}}}let ae={},ge=!1;for(let ve in K){let De=K[ve],Pe=E[ve];if(Pe.min!=De.min||Pe.max!=De.max){Pe.min=De.min,Pe.max=De.max;let _t=Pe.distr;Pe._min=_t==3?ph(Pe.min):_t==4?zO(Pe.min,Pe.asinh):_t==100?Pe.fwd(Pe.min):Pe.min,Pe._max=_t==3?ph(Pe.max):_t==4?zO(Pe.max,Pe.asinh):_t==100?Pe.fwd(Pe.max):Pe.max,ae[ve]=ge=!0}}if(ge){x.forEach((ve,De)=>{r==2?De>0&&ae.y&&(ve._paths=null):ae[ve.scale]&&(ve._paths=null)});for(let ve in ae)zt=!0,Rn("setScale",ve);Se&&$.left>=0&&(Re=wt=!0)}for(let ve in V)V[ve]=null}function Cn(K){let ae=AP(Q-1,0,Tt-1),ge=AP(me+1,0,Tt-1);for(;K[ae]==null&&ae>0;)ae--;for(;K[ge]==null&&ge<Tt-1;)ge++;return[ae,ge]}function _n(){if(Tt>0){let K=x.some(ae=>ae._focus)&&Kt!=ea.alpha;K&&(f.globalAlpha=Kt=ea.alpha),x.forEach((ae,ge)=>{if(ge>0&&ae.show&&(fn(ge,!1),fn(ge,!0),ae._paths==null)){let ve=Kt;Kt!=ae.alpha&&(f.globalAlpha=Kt=ae.alpha);let De=r==2?[0,e[ge][0].length-1]:Cn(e[ge]);ae._paths=ae.paths(i,ge,De[0],De[1]),Kt!=ve&&(f.globalAlpha=Kt=ve)}}),x.forEach((ae,ge)=>{if(ge>0&&ae.show){let ve=Kt;Kt!=ae.alpha&&(f.globalAlpha=Kt=ae.alpha),ae._paths!=null&&hi(ge,!1);{let De=ae._paths!=null?ae._paths.gaps:null,Pe=ae.points.show(i,ge,Q,me,De),_t=ae.points.filter(i,ge,Pe,De);(Pe||_t)&&(ae.points._paths=ae.points.paths(i,ge,Q,me,_t),hi(ge,!0))}Kt!=ve&&(f.globalAlpha=Kt=ve),Rn("drawSeries",ge)}}),K&&(f.globalAlpha=Kt=1)}}function fn(K,ae){let ge=ae?x[K].points:x[K];ge._stroke=ge.stroke(i,K),ge._fill=ge.fill(i,K)}function hi(K,ae){let ge=ae?x[K].points:x[K],{stroke:ve,fill:De,clip:Pe,flags:_t,_stroke:Pt=ge._stroke,_fill:Ht=ge._fill,_width:Jt=ge.width}=ge._paths;Jt=br(Jt*Hi,3);let $t=null,sn=Jt%2/2;ae&&Ht==null&&(Ht=Jt>0?"#fff":Pt);let On=ge.pxAlign==1&&sn>0;if(On&&f.translate(sn,sn),!ae){let ai=Fe-Jt/2,Un=rt-Jt/2,ti=Je+Jt,wn=Xt+Jt;$t=new Path2D,$t.rect(ai,Un,ti,wn)}ae?Ai(Pt,Jt,ge.dash,ge.cap,Ht,ve,De,_t,Pe):$i(K,Pt,Jt,ge.dash,ge.cap,Ht,ve,De,_t,$t,Pe),On&&f.translate(-sn,-sn)}function $i(K,ae,ge,ve,De,Pe,_t,Pt,Ht,Jt,$t){let sn=!1;Ht!=0&&T.forEach((On,ai)=>{if(On.series[0]==K){let Un=x[On.series[1]],ti=e[On.series[1]],wn=(Un._paths||H1).band;Sd(wn)&&(wn=On.dir==1?wn[0]:wn[1]);let pn,ir=null;Un.show&&wn&&X4e(ti,Q,me)?(ir=On.fill(i,ai)||Pe,pn=Un._paths.clip):wn=null,Ai(ae,ge,ve,De,ir,_t,Pt,Ht,Jt,$t,pn,wn),sn=!0}}),sn||Ai(ae,ge,ve,De,Pe,_t,Pt,Ht,Jt,$t)}const ei=Hy|kP;function Ai(K,ae,ge,ve,De,Pe,_t,Pt,Ht,Jt,$t,sn){Yt(K,ae,ge,ve,De),(Ht||Jt||sn)&&(f.save(),Ht&&f.clip(Ht),Jt&&f.clip(Jt)),sn?(Pt&ei)==ei?(f.clip(sn),$t&&f.clip($t),mr(De,_t),Xs(K,Pe,ae)):Pt&kP?(mr(De,_t),f.clip(sn),Xs(K,Pe,ae)):Pt&Hy&&(f.save(),f.clip(sn),$t&&f.clip($t),mr(De,_t),f.restore(),Xs(K,Pe,ae)):(mr(De,_t),Xs(K,Pe,ae)),(Ht||Jt||sn)&&f.restore()}function Xs(K,ae,ge){ge>0&&(ae instanceof Map?ae.forEach((ve,De)=>{f.strokeStyle=dt=De,f.stroke(ve)}):ae!=null&&K&&f.stroke(ae))}function mr(K,ae){ae instanceof Map?ae.forEach((ge,ve)=>{f.fillStyle=yt=ve,f.fill(ge)}):ae!=null&&K&&f.fill(ae)}function wf(K,ae,ge,ve){let De=_[K],Pe;if(ve<=0)Pe=[0,0];else{let _t=De._space=De.space(i,K,ae,ge,ve),Pt=De._incrs=De.incrs(i,K,ae,ge,ve,_t);Pe=pBe(ae,ge,Pt,ve,_t)}return De._found=Pe}function jo(K,ae,ge,ve,De,Pe,_t,Pt,Ht,Jt){let $t=_t%2/2;y==1&&f.translate($t,$t),Yt(Pt,_t,Ht,Jt,Pt),f.beginPath();let sn,On,ai,Un,ti=De+(ve==0||ve==3?-Pe:Pe);ge==0?(On=De,Un=ti):(sn=De,ai=ti);for(let wn=0;wn<K.length;wn++)ae[wn]!=null&&(ge==0?sn=ai=K[wn]:On=Un=K[wn],f.moveTo(sn,On),f.lineTo(ai,Un));f.stroke(),y==1&&f.translate(-$t,-$t)}function Lc(K){let ae=!0;return _.forEach((ge,ve)=>{if(!ge.show)return;let De=E[ge.scale];if(De.min==null){ge._show&&(ae=!1,ge._show=!1,Ys(!1));return}else ge._show||(ae=!1,ge._show=!0,Ys(!1));let Pe=ge.side,_t=Pe%2,{min:Pt,max:Ht}=De,[Jt,$t]=wf(ve,Pt,Ht,_t==0?J:ue);if($t==0)return;let sn=De.distr==2,On=ge._splits=ge.splits(i,ve,Pt,Ht,Jt,$t,sn),ai=De.distr==2?On.map(pn=>Ee[pn]):On,Un=De.distr==2?Ee[On[1]]-Ee[On[0]]:Jt,ti=ge._values=ge.values(i,ge.filter(i,ai,ve,$t,Un),ve,$t,Un);ge._rotate=Pe==2?ge.rotate(i,ti,ve,$t):0;let wn=ge._size;ge._size=tc(ge.size(i,ti,ve,K)),wn!=null&&ge._size!=wn&&(ae=!1)}),ae}function Ho(K){let ae=!0;return at.forEach((ge,ve)=>{let De=ge(i,ve,oe,K);De!=Ze[ve]&&(ae=!1),Ze[ve]=De}),ae}function Sn(){for(let K=0;K<_.length;K++){let ae=_[K];if(!ae.show||!ae._show)continue;let ge=ae.side,ve=ge%2,De,Pe,_t=ae.stroke(i,K),Pt=ge==0||ge==3?-1:1,[Ht,Jt]=ae._found;if(ae.label!=null){let rr=ae.labelGap*Pt,Is=Ia((ae._lpos+rr)*Hi);Xn(ae.labelFont[0],_t,"center",ge==2?Ux:tG),f.save(),ve==1?(De=Pe=0,f.translate(Is,Ia(rt+Xt/2)),f.rotate((ge==3?-eT:eT)/2)):(De=Ia(Fe+Je/2),Pe=Is);let rs=_te(ae.label)?ae.label(i,K,Ht,Jt):ae.label;f.fillText(rs,De,Pe),f.restore()}if(Jt==0)continue;let $t=E[ae.scale],sn=ve==0?Je:Xt,On=ve==0?Fe:rt,ai=ae._splits,Un=$t.distr==2?ai.map(rr=>Ee[rr]):ai,ti=$t.distr==2?Ee[ai[1]]-Ee[ai[0]]:Ht,wn=ae.ticks,pn=ae.border,ir=wn.show?wn.size:0,_r=Ia(ir*Hi),Wr=Ia((ae.alignTo==2?ae._size-ir-ae.gap:ae.gap)*Hi),ji=ae._rotate*-eT/180,Br=v(ae._pos*Hi),Ds=(_r+Wr)*Pt,Ha=Br+Ds;Pe=ve==0?Ha:0,De=ve==1?Ha:0;let Fr=ae.font[0],eo=ae.align==1?r0:ae.align==2?UO:ji>0?r0:ji<0?UO:ve==0?"center":ge==3?UO:r0,Yo=ji||ve==1?"middle":ge==2?Ux:tG;Xn(Fr,_t,eo,Yo);let to=ae.font[1]*ae.lineGap,Os=ai.map(rr=>v(o(rr,$t,sn,On))),Sr=ae._values;for(let rr=0;rr<Sr.length;rr++){let Is=Sr[rr];if(Is!=null){ve==0?De=Os[rr]:Pe=Os[rr],Is=""+Is;let rs=Is.indexOf(`
`)==-1?[Is]:Is.split(/\n/gm);for(let na=0;na<rs.length;na++){let zc=rs[na];ji?(f.save(),f.translate(De,Pe+na*to),f.rotate(ji),f.fillText(zc,0,0),f.restore()):f.fillText(zc,De,Pe+na*to)}}}wn.show&&jo(Os,wn.filter(i,Un,K,Jt,ti),ve,ge,Br,_r,br(wn.width*Hi,3),wn.stroke(i,K),wn.dash,wn.cap);let $o=ae.grid;$o.show&&jo(Os,$o.filter(i,Un,K,Jt,ti),ve,ve==0?2:1,ve==0?rt:Fe,ve==0?Xt:Je,br($o.width*Hi,3),$o.stroke(i,K),$o.dash,$o.cap),pn.show&&jo([Br],[1],ve==0?1:0,ve==0?1:2,ve==1?rt:Fe,ve==1?Xt:Je,br(pn.width*Hi,3),pn.stroke(i,K),pn.dash,pn.cap)}Rn("drawAxes")}function Ys(K){x.forEach((ae,ge)=>{ge>0&&(ae._paths=null,K&&(r==1?(ae.min=null,ae.max=null):ae.facets.forEach(ve=>{ve.min=null,ve.max=null})))})}let Il=!1,Uc=!1,Ur=[];function Ef(){Uc=!1;for(let K=0;K<Ur.length;K++)Rn(...Ur[K]);Ur.length=0}function Vo(){Il||(oUe(S),Il=!0)}function ku(K,ae=!1){Il=!0,Uc=ae,K(i),S(),ae&&Ur.length>0&&queueMicrotask(Ef)}i.batch=ku;function S(){if(Nt&&(Bn(),Nt=!1),zt&&(Mt(),zt=!1),ht){if(Dr(d,r0,se),Dr(d,Ux,be),Dr(d,a1,J),Dr(d,s1,ue),Dr(m,r0,se),Dr(m,Ux,be),Dr(m,a1,J),Dr(m,s1,ue),Dr(h,a1,vt),Dr(h,s1,re),u.width=Ia(vt*Hi),u.height=Ia(re*Hi),_.forEach(({_el:K,_show:ae,_size:ge,_pos:ve,side:De})=>{if(K!=null)if(ae){let Pe=De===3||De===0?ge:0,_t=De%2==1;Dr(K,_t?"left":"top",ve-Pe),Dr(K,_t?"width":"height",ge),Dr(K,_t?"top":"left",_t?be:se),Dr(K,_t?"height":"width",_t?ue:J),MP(K,Sm)}else cl(K,Sm)}),dt=yt=Dt=Ke=nn=cn=un=Dn=qt=null,Kt=1,ja(!0),se!=Z||be!=Ye||J!=tt||ue!=mt){Ys(!1);let K=J/tt,ae=ue/mt;if(Se&&!Re&&$.left>=0){$.left*=K,$.top*=ae,de&&Gu(de,Ia($.left),0,J,ue),Le&&Gu(Le,0,Ia($.top),J,ue);for(let ge=0;ge<wi.length;ge++){let ve=wi[ge];ve!=null&&(ta[ge]*=K,zi[ge]*=ae,Gu(ve,tc(ta[ge]),tc(zi[ge]),J,ue))}}if(Mi.show&&!Be&&Mi.left>=0&&Mi.width>0){Mi.left*=K,Mi.width*=K,Mi.top*=ae,Mi.height*=ae;for(let ge in Fh)Dr(Go,ge,Mi[ge])}Z=se,Ye=be,tt=J,mt=ue}Rn("setSize"),ht=!1}vt>0&&re>0&&(f.clearRect(0,0,u.width,u.height),Rn("drawClear"),C.forEach(K=>K()),Rn("draw")),Mi.show&&Be&&(Mf(Mi),Be=!1),Se&&Re&&(qo(null,!0,!1),Re=!1),he.show&&he.live&&wt&&(Tf(),wt=!1),l||(l=!0,i.status=1,Rn("ready")),ye=!1,Il=!1}i.redraw=(K,ae)=>{zt=ae||!1,K!==!1?$s(w,P.min,P.max):Vo()};function N(K,ae){let ge=E[K];if(ge.from==null){if(Tt==0){let ve=ge.range(i,ae.min,ae.max,K);ae.min=ve[0],ae.max=ve[1]}if(ae.min>ae.max){let ve=ae.min;ae.min=ae.max,ae.max=ve}if(Tt>1&&ae.min!=null&&ae.max!=null&&ae.max-ae.min<1e-16)return;K==w&&ge.distr==2&&Tt>0&&(ae.min=tu(ae.min,e[0]),ae.max=tu(ae.max,e[0]),ae.min==ae.max&&ae.max++),V[K]=ae,Nt=!0,Vo()}}i.setScale=N;let W,ne,de,Le,Xe,It,Bt,mn,En,Ci,Mn,Ei,va=!1;const cr=$.drag;let Ki=cr.x,Ji=cr.y;Se&&($.x&&(W=$l(D4e,m)),$.y&&(ne=$l(O4e,m)),P.ori==0?(de=W,Le=ne):(de=ne,Le=W),Mn=$.left,Ei=$.top);const Mi=i.select=Ea({show:!0,over:!0,left:0,width:0,top:0,height:0},t.select),Go=Mi.show?$l(k4e,Mi.over?m:d):null;function Mf(K,ae){if(Mi.show){for(let ge in K)Mi[ge]=K[ge],ge in Fh&&Dr(Go,ge,K[ge]);ae!==!1&&Rn("setSelect")}}i.setSelect=Mf;function yp(K){if(x[K].show)Me&&MP($e[K],Sm);else if(Me&&cl($e[K],Sm),Se){let ge=nr?wi[0]:wi[K];ge!=null&&Gu(ge,-10,-10,J,ue)}}function $s(K,ae,ge){N(K,{min:ae,max:ge})}function Rs(K,ae,ge,ve){ae.focus!=null&&xp(K),ae.show!=null&&x.forEach((De,Pe)=>{Pe>0&&(K==Pe||K==null)&&(De.show=ae.show,yp(Pe),r==2?($s(De.facets[0].scale,null,null),$s(De.facets[1].scale,null,null)):$s(De.scale,null,null),Vo())}),ge!==!1&&Rn("setSeries",K,ae),ve&&Xo("setSeries",i,K,ae)}i.setSeries=Rs;function Rv(K,ae){Ea(T[K],ae)}function ha(K,ae){K.fill=Si(K.fill||null),K.dir=Fi(K.dir,-1),ae=ae??T.length,T.splice(ae,0,K)}function vp(K){K==null?T.length=0:T.splice(K,1)}i.addBand=ha,i.setBand=Rv,i.delBand=vp;function Uh(K,ae){x[K].alpha=ae,Se&&wi[K]!=null&&(wi[K].style.opacity=ae),Me&&$e[K]&&($e[K].style.opacity=ae)}let So,Wo,Nl;const wo={focus:!0};function xp(K){if(K!=Nl){let ae=K==null,ge=ea.alpha!=1;x.forEach((ve,De)=>{if(r==1||De>0){let Pe=ae||De==0||De==K;ve._focus=ae?null:Pe,ge&&Uh(De,Pe?1:ea.alpha)}}),Nl=K,ge&&Vo()}}Me&&Ni&&We(aG,xe,K=>{$._lock||(Yi(K),Nl!=null&&Rs(null,wo,!0,Jn.setSeries))});function Ks(K,ae,ge){let ve=E[ae];ge&&(K=K/Hi-(ve.ori==1?be:se));let De=J;ve.ori==1&&(De=ue,K=De-K),ve.dir==-1&&(K=De-K);let Pe=ve._min,_t=ve._max,Pt=K/De,Ht=Pe+(_t-Pe)*Pt,Jt=ve.distr;return Jt==3?Fy(10,Ht):Jt==4?$4e(Ht,ve.asinh):Jt==100?ve.bwd(Ht):Ht}function Lg(K,ae){let ge=Ks(K,w,ae);return tu(ge,e[0],Q,me)}i.valToIdx=K=>tu(K,e[0]),i.posToIdx=Lg,i.posToVal=Ks,i.valToPos=(K,ae,ge)=>E[ae].ori==0?a(K,E[ae],ge?Je:J,ge?Fe:0):s(K,E[ae],ge?Xt:ue,ge?rt:0),i.setCursor=(K,ae,ge)=>{Mn=K.left,Ei=K.top,qo(null,ae,ge)};function _p(K,ae){Dr(Go,r0,Mi.left=K),Dr(Go,a1,Mi.width=ae)}function Bh(K,ae){Dr(Go,Ux,Mi.top=K),Dr(Go,s1,Mi.height=ae)}let Bc=P.ori==0?_p:Bh,Du=P.ori==1?_p:Bh;function Sp(){if(Me&&he.live)for(let K=r==2?1:0;K<x.length;K++){if(K==0&&fe)continue;let ae=he.values[K],ge=0;for(let ve in ae)ct[K][ge++].firstChild.nodeValue=ae[ve]}}function Tf(K,ae){if(K!=null&&(K.idxs?K.idxs.forEach((ge,ve)=>{ce[ve]=ge}):Q4e(K.idx)||ce.fill(K.idx),he.idx=ce[0]),Me&&he.live){for(let ge=0;ge<x.length;ge++)(ge>0||r==1&&!fe)&&Js(ge,ce[ge]);Sp()}wt=!1,ae!==!1&&Rn("setLegend")}i.setLegend=Tf;function Js(K,ae){let ge=x[K],ve=K==0&&B==2?Ee:e[K],De;fe?De=ge.values(i,K,ae)??Ve:(De=ge.value(i,ae==null?null:ve[ae],K,ae),De=De==null?Ve:{_:De}),he.values[K]=De}function qo(K,ae,ge){En=Mn,Ci=Ei,[Mn,Ei]=$.move(i,Mn,Ei),$.left=Mn,$.top=Ei,Se&&(de&&Gu(de,Ia(Mn),0,J,ue),Le&&Gu(Le,0,Ia(Ei),J,ue));let ve,De=Q>me;So=gr,Wo=null;let Pe=P.ori==0?J:ue,_t=P.ori==1?J:ue;if(Mn<0||Tt==0||De){ve=$.idx=null;for(let Pt=0;Pt<x.length;Pt++){let Ht=wi[Pt];Ht!=null&&Gu(Ht,-10,-10,J,ue)}Ni&&Rs(null,wo,!0,K==null&&Jn.setSeries),he.live&&(ce.fill(ve),wt=!0)}else{let Pt,Ht,Jt;r==1&&(Pt=P.ori==0?Mn:Ei,Ht=Ks(Pt,w),ve=$.idx=tu(Ht,e[0],Q,me),Jt=H(e[0][ve],P,Pe,0));let $t=-10,sn=-10,On=0,ai=0,Un=!0,ti="",wn="";for(let pn=r==2?1:0;pn<x.length;pn++){let ir=x[pn],_r=ce[pn],Wr=_r==null?null:r==1?e[pn][_r]:e[pn][1][_r],ji=$.dataIdx(i,pn,ve,Ht),Br=ji==null?null:r==1?e[pn][ji]:e[pn][1][ji];if(wt=wt||Br!=Wr||ji!=_r,ce[pn]=ji,pn>0&&ir.show){let Ds=ji==null?-10:ji==ve?Jt:H(r==1?e[0][ji]:e[pn][0][ji],P,Pe,0),Ha=Br==null?-10:G(Br,r==1?E[ir.scale]:E[ir.facets[1].scale],_t,0);if(Ni&&Br!=null){let Fr=P.ori==1?Mn:Ei,eo=Na(ea.dist(i,pn,ji,Ha,Fr));if(eo<So){let Yo=ea.bias;if(Yo!=0){let to=Ks(Fr,ir.scale),Os=Br>=0?1:-1,Sr=to>=0?1:-1;Sr==Os&&(Sr==1?Yo==1?Br>=to:Br<=to:Yo==1?Br<=to:Br>=to)&&(So=eo,Wo=pn)}else So=eo,Wo=pn}}if(wt||nr){let Fr,eo;P.ori==0?(Fr=Ds,eo=Ha):(Fr=Ha,eo=Ds);let Yo,to,Os,Sr,$o,rr,Is=!0,rs=Gn.bbox;if(rs!=null){Is=!1;let na=rs(i,pn);Os=na.left,Sr=na.top,Yo=na.width,to=na.height}else Os=Fr,Sr=eo,Yo=to=Gn.size(i,pn);if(rr=Gn.fill(i,pn),$o=Gn.stroke(i,pn),nr)pn==Wo&&So<=ea.prox&&($t=Os,sn=Sr,On=Yo,ai=to,Un=Is,ti=rr,wn=$o);else{let na=wi[pn];na!=null&&(ta[pn]=Os,zi[pn]=Sr,hG(na,Yo,to,Is),uG(na,rr,$o),Gu(na,tc(Os),tc(Sr),J,ue))}}}}if(nr){let pn=ea.prox,ir=Nl==null?So<=pn:So>pn||Wo!=Nl;if(wt||ir){let _r=wi[0];_r!=null&&(ta[0]=$t,zi[0]=sn,hG(_r,On,ai,Un),uG(_r,ti,wn),Gu(_r,tc($t),tc(sn),J,ue))}}}if(Mi.show&&va)if(K!=null){let[Pt,Ht]=Jn.scales,[Jt,$t]=Jn.match,[sn,On]=K.cursor.sync.scales,ai=K.cursor.drag;if(Ki=ai._x,Ji=ai._y,Ki||Ji){let{left:Un,top:ti,width:wn,height:pn}=K.select,ir=K.scales[sn].ori,_r=K.posToVal,Wr,ji,Br,Ds,Ha,Fr=Pt!=null&&Jt(Pt,sn),eo=Ht!=null&&$t(Ht,On);Fr&&Ki?(ir==0?(Wr=Un,ji=wn):(Wr=ti,ji=pn),Br=E[Pt],Ds=H(_r(Wr,sn),Br,Pe,0),Ha=H(_r(Wr+ji,sn),Br,Pe,0),Bc(lu(Ds,Ha),Na(Ha-Ds))):Bc(0,Pe),eo&&Ji?(ir==1?(Wr=Un,ji=wn):(Wr=ti,ji=pn),Br=E[Ht],Ds=G(_r(Wr,On),Br,_t,0),Ha=G(_r(Wr+ji,On),Br,_t,0),Du(lu(Ds,Ha),Na(Ha-Ds))):Du(0,_t)}else ee()}else{let Pt=Na(En-Xe),Ht=Na(Ci-It);if(P.ori==1){let On=Pt;Pt=Ht,Ht=On}Ki=cr.x&&Pt>=cr.dist,Ji=cr.y&&Ht>=cr.dist;let Jt=cr.uni;Jt!=null?Ki&&Ji&&(Ki=Pt>=Jt,Ji=Ht>=Jt,!Ki&&!Ji&&(Ht>Pt?Ji=!0:Ki=!0)):cr.x&&cr.y&&(Ki||Ji)&&(Ki=Ji=!0);let $t,sn;Ki&&(P.ori==0?($t=Bt,sn=Mn):($t=mn,sn=Ei),Bc(lu($t,sn),Na(sn-$t)),Ji||Du(0,_t)),Ji&&(P.ori==1?($t=Bt,sn=Mn):($t=mn,sn=Ei),Du(lu($t,sn),Na(sn-$t)),Ki||Bc(0,Pe)),!Ki&&!Ji&&(Bc(0,0),Du(0,0))}if(cr._x=Ki,cr._y=Ji,K==null){if(ge){if(Fc!=null){let[Pt,Ht]=Jn.scales;Jn.values[0]=Pt!=null?Ks(P.ori==0?Mn:Ei,Pt):null,Jn.values[1]=Ht!=null?Ks(P.ori==1?Mn:Ei,Ht):null}Xo(BO,i,Mn,Ei,J,ue,ve)}if(Ni){let Pt=ge&&Jn.setSeries,Ht=ea.prox;Nl==null?So<=Ht&&Rs(Wo,wo,!0,Pt):So>Ht?Rs(null,wo,!0,Pt):Wo!=Nl&&Rs(Wo,wo,!0,Pt)}}wt&&(he.idx=ve,Tf()),ae!==!1&&Rn("setCursor")}let ks=null;Object.defineProperty(i,"rect",{get(){return ks==null&&ja(!1),ks}});function ja(K=!1){K?ks=null:(ks=m.getBoundingClientRect(),Rn("syncRect",ks))}function Zs(K,ae,ge,ve,De,Pe,_t){$._lock||va&&K!=null&&K.movementX==0&&K.movementY==0||(Pl(K,ae,ge,ve,De,Pe,_t,!1,K!=null),K!=null?qo(null,!0,!0):qo(ae,!0,!1))}function Pl(K,ae,ge,ve,De,Pe,_t,Pt,Ht){if(ks==null&&ja(!1),Yi(K),K!=null)ge=K.clientX-ks.left,ve=K.clientY-ks.top;else{if(ge<0||ve<0){Mn=-10,Ei=-10;return}let[Jt,$t]=Jn.scales,sn=ae.cursor.sync,[On,ai]=sn.values,[Un,ti]=sn.scales,[wn,pn]=Jn.match,ir=ae.axes[0].side%2==1,_r=P.ori==0?J:ue,Wr=P.ori==1?J:ue,ji=ir?Pe:De,Br=ir?De:Pe,Ds=ir?ve:ge,Ha=ir?ge:ve;if(Un!=null?ge=wn(Jt,Un)?o(On,E[Jt],_r,0):-10:ge=_r*(Ds/ji),ti!=null?ve=pn($t,ti)?o(ai,E[$t],Wr,0):-10:ve=Wr*(Ha/Br),P.ori==1){let Fr=ge;ge=ve,ve=Fr}}Ht&&(ae==null||ae.cursor.event.type==BO)&&((ge<=1||ge>=J-1)&&(ge=gm(ge,J)),(ve<=1||ve>=ue-1)&&(ve=gm(ve,ue))),Pt?(Xe=ge,It=ve,[Bt,mn]=$.move(i,ge,ve)):(Mn=ge,Ei=ve)}const Fh={width:0,height:0,left:0,top:0};function ee(){Mf(Fh,!1)}let te,we,Ie,lt;function Rt(K,ae,ge,ve,De,Pe,_t){va=!0,Ki=Ji=cr._x=cr._y=!1,Pl(K,ae,ge,ve,De,Pe,_t,!0,!1),K!=null&&(We(FO,wP,jt,!1),Xo(iG,i,Bt,mn,J,ue,null));let{left:Pt,top:Ht,width:Jt,height:$t}=Mi;te=Pt,we=Ht,Ie=Jt,lt=$t}function jt(K,ae,ge,ve,De,Pe,_t){va=cr._x=cr._y=!1,Pl(K,ae,ge,ve,De,Pe,_t,!1,!0);let{left:Pt,top:Ht,width:Jt,height:$t}=Mi,sn=Jt>0||$t>0,On=te!=Pt||we!=Ht||Ie!=Jt||lt!=$t;if(sn&&On&&Mf(Mi),cr.setScale&&sn&&On){let ai=Pt,Un=Jt,ti=Ht,wn=$t;if(P.ori==1&&(ai=Ht,Un=$t,ti=Pt,wn=Jt),Ki&&$s(w,Ks(ai,w),Ks(ai+Un,w)),Ji)for(let pn in E){let ir=E[pn];pn!=w&&ir.from==null&&ir.min!=gr&&$s(pn,Ks(ti+wn,pn),Ks(ti,pn))}ee()}else $.lock&&($._lock=!$._lock,qo(ae,!0,K!=null));K!=null&&(Et(FO,wP),Xo(FO,i,Mn,Ei,J,ue,null))}function xt(K,ae,ge,ve,De,Pe,_t){if($._lock)return;Yi(K);let Pt=va;if(va){let Ht=!0,Jt=!0,$t=10,sn,On;P.ori==0?(sn=Ki,On=Ji):(sn=Ji,On=Ki),sn&&On&&(Ht=Mn<=$t||Mn>=J-$t,Jt=Ei<=$t||Ei>=ue-$t),sn&&Ht&&(Mn=Mn<Bt?0:J),On&&Jt&&(Ei=Ei<mn?0:ue),qo(null,!0,!0),va=!1}Mn=-10,Ei=-10,ce.fill(null),qo(null,!0,!0),Pt&&(va=Pt)}function Lt(K,ae,ge,ve,De,Pe,_t){$._lock||(Yi(K),it(),ee(),K!=null&&Xo(sG,i,Mn,Ei,J,ue,null))}function en(){_.forEach(mBe),Wt(i.width,i.height,!0)}Qm(ZA,Z0,en);const rn={};rn.mousedown=Rt,rn.mousemove=Zs,rn.mouseup=jt,rn.dblclick=Lt,rn.setSeries=(K,ae,ge,ve)=>{let De=Jn.match[2];ge=De(i,ae,ge),ge!=-1&&Rs(ge,ve,!0,!1)},Se&&(We(iG,m,Rt),We(BO,m,Zs),We(rG,m,K=>{Yi(K),ja(!1)}),We(aG,m,xt),We(sG,m,Lt),DP.add(i),i.syncRect=ja);const jn=i.hooks=t.hooks||{};function Rn(K,ae,ge){Uc?Ur.push([K,ae,ge]):K in jn&&jn[K].forEach(ve=>{ve.call(null,i,ae,ge)})}(t.plugins||[]).forEach(K=>{for(let ae in K.hooks)jn[ae]=(jn[ae]||[]).concat(K.hooks[ae])});const Gr=(K,ae,ge)=>ge,Jn=Ea({key:null,setSeries:!1,filters:{pub:bG,sub:bG},scales:[w,x[1]?x[1].scale:null],match:[yG,yG,Gr],values:[null,null]},$.sync);Jn.match.length==2&&Jn.match.push(Gr),$.sync=Jn;const Fc=Jn.key,Rr=Wte(Fc);function Xo(K,ae,ge,ve,De,Pe,_t){Jn.filters.pub(K,ae,ge,ve,De,Pe,_t)&&Rr.pub(K,ae,ge,ve,De,Pe,_t)}Rr.sub(i);function Af(K,ae,ge,ve,De,Pe,_t){Jn.filters.sub(K,ae,ge,ve,De,Pe,_t)&&rn[K](null,ae,ge,ve,De,Pe,_t)}i.pub=Af;function Qs(){Rr.unsub(i),DP.delete(i),Oe.clear(),TP(ZA,Z0,en),c.remove(),xe?.remove(),Rn("destroy")}i.destroy=Qs;function zh(){Rn("init",t,e),pt(e||t.data,!1),V[w]?N(w,V[w]):it(),Be=Mi.show&&(Mi.width>0||Mi.height>0),Re=wt=!0,Wt(t.width,t.height)}return x.forEach(ya),_.forEach(Ae),n?n instanceof HTMLElement?(n.appendChild(c),zh()):n(i,zh):zh(),i}Ws.assign=Ea;Ws.fmtNum=JB;Ws.rangeNum=QA;Ws.rangeLog=fR;Ws.rangeAsinh=$B;Ws.orient=Ng;Ws.pxRatio=Hi;Ws.join=sUe;Ws.fmtDate=QB,Ws.tzDate=bUe;Ws.sync=Wte;{Ws.addGap=QUe,Ws.clipGaps=pR;let t=Ws.paths={points:Jte};t.linear=Qte,t.stepped=nBe,t.bars=iBe,t.spline=aBe}const gBe=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"})),bBe=Zre(gBe);(function(t,e){(function(i,r){t.exports=r(I,bBe)})(tg,(n,i)=>(()=>{var r={"./common/index.ts":(l,c,u)=>{u.r(c),u.d(c,{dataMatch:()=>d,optionsUpdateState:()=>h});var f=function(m,y){var v={};for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&y.indexOf(g)<0&&(v[g]=m[g]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,g=Object.getOwnPropertySymbols(m);x<g.length;x++)y.indexOf(g[x])<0&&Object.prototype.propertyIsEnumerable.call(m,g[x])&&(v[g[x]]=m[g[x]]);return v};Object.is||Object.defineProperty(Object,"is",{value:function(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}});var h=function(y,v){var g=y.width,x=y.height,_=f(y,["width","height"]),E=v.width,T=v.height,w=f(v,["width","height"]),A="keep";if((x!==T||g!==E)&&(A="update"),Object.keys(_).length!==Object.keys(w).length)return"create";for(var C=0,D=Object.keys(_);C<D.length;C++){var k=D[C];if(!Object.is(_[k],w[k])){A="create";break}}return A},d=function(y,v){return y.length!==v.length?!1:y.every(function(g,x){var _=v[x];return g.length!==_.length?!1:g.every(function(E,T){return E===_[T]})})}},react:l=>{l.exports=n},uplot:l=>{l.exports=i}},a={};function s(l){var c=a[l];if(c!==void 0)return c.exports;var u=a[l]={exports:{}};return r[l](u,u.exports,s),u.exports}s.n=l=>{var c=l&&l.__esModule?()=>l.default:()=>l;return s.d(c,{a:c}),c},s.d=(l,c)=>{for(var u in c)s.o(c,u)&&!s.o(l,u)&&Object.defineProperty(l,u,{enumerable:!0,get:c[u]})},s.o=(l,c)=>Object.prototype.hasOwnProperty.call(l,c),s.r=l=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var o={};return(()=>{/*!*******************************!*\
  !*** ./react/uplot-react.tsx ***!
  \*******************************/s.r(o),s.d(o,{default:()=>d});var l=s("react"),c=s.n(l),u=s("uplot"),f=s.n(u),h=s("./common/index.ts");function d(m){var y=m.options,v=m.data,g=m.target,x=m.onDelete,_=m.onCreate,E=m.resetScales,T=E===void 0?!0:E,w=m.className,A=(0,l.useRef)(null),C=(0,l.useRef)(null),D=(0,l.useRef)(y),k=(0,l.useRef)(g),P=(0,l.useRef)(v),B=(0,l.useRef)(_),H=(0,l.useRef)(x);(0,l.useEffect)(function(){B.current=_,H.current=x});var G=(0,l.useCallback)(function(U){var F;U&&((F=H.current)===null||F===void 0||F.call(H,U),U.destroy(),A.current=null)},[]),V=(0,l.useCallback)(function(){var U,F=new(f())(D.current,P.current,k.current||C.current);A.current=F,(U=B.current)===null||U===void 0||U.call(B,F)},[]);return(0,l.useEffect)(function(){return V(),function(){G(A.current)}},[V,G]),(0,l.useEffect)(function(){if(D.current!==y){var U=(0,h.optionsUpdateState)(D.current,y);D.current=y,!A.current||U==="create"?(G(A.current),V()):U==="update"&&A.current.setSize({width:y.width,height:y.height})}},[y,V,G]),(0,l.useEffect)(function(){P.current!==v&&(A.current?(0,h.dataMatch)(P.current,v)||(T?A.current.setData(v,!0):(A.current.setData(v,!1),A.current.redraw())):(P.current=v,V()),P.current=v)},[v,T,V]),(0,l.useEffect)(function(){return k.current!==g&&(k.current=g,V()),function(){return G(A.current)}},[g,V,G]),g?null:c().createElement("div",{ref:C,className:w})}})(),o=o.default,o})())})(gte);var yBe=gte.exports;const vBe=Cc(yBe);function zG({props:t,onExpand:e}){const[n,i]=I.useState(!1),{ref:r,width:a}=VX(),[s,o,l]=I.useMemo(()=>{const d=t.data.map(v=>new Float64Array(v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength)));let m=1/0,y=-1/0;for(const v of d[0])v<m&&(m=v),v>y&&(y=v);return[d,m,y]},[t.data]),c=I.useMemo(()=>({width:a,height:a/t.aspect,title:t.title||void 0,mode:t.mode||void 0,series:t.series||[],cursor:t.cursor||void 0,bands:t.bands||void 0,scales:t.scales||void 0,axes:t.axes||void 0,legend:t.legend||void 0,focus:t.focus||void 0}),[a,t]),[u,f]=I.useState(),h=I.useRef({relMin:0,relMax:1});return I.useEffect(()=>{if(!u)return;const d=Object.keys(u.scales)[0],m=u.scales[d];if(m.auto===!1)return;const y=l-o;return u.setScale(d,{min:o+h.current.relMin*y,max:o+h.current.relMax*y}),()=>{h.current={relMin:((m.min??0)-o)/y,relMax:((m.max??1)-o)/y}}},[o,l,u]),R.jsxs(Ms,{ref:r,className:WB,withBorder:!0,style:{position:"relative"},onMouseEnter:e?()=>i(!0):void 0,onMouseLeave:e?()=>i(!1):void 0,children:[c&&R.jsx(vBe,{resetScales:!1,onCreate:d=>{f(d)},onDelete:()=>{f(void 0)},options:c,data:s}),e&&n&&R.jsx(Cr,{label:"Expand plot",children:R.jsx(kl,{onClick:e,variant:"subtle",color:"gray",size:"sm",style:{position:"absolute",top:8,right:8,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)"},children:R.jsx(GQ,{size:14})})})]})}function xBe(t){const[e,{open:n,close:i}]=wc(!1);return t.props.visible===!1?null:R.jsxs(et,{children:[R.jsx(zG,{...t,onExpand:n}),R.jsx(xo,{opened:e,onClose:i,size:"xl",children:R.jsx(zG,{...t})})]})}function _Be({props:{_tab_labels:t,_tab_icons_html:e,_tab_container_ids:n,visible:i}}){const{GuiContainer:r}=I.useContext(Ts);return i?R.jsxs(rh,{radius:"xs",defaultValue:"0",style:{marginTop:"-0.55em"},children:[R.jsx(rh.List,{children:t.map((a,s)=>R.jsx(rh.Tab,{value:s.toString(),styles:{tabSection:{marginRight:"0.5em"},tab:{padding:"0.75em"}},leftSection:e[s]===null?void 0:R.jsx("div",{className:TB,dangerouslySetInnerHTML:{__html:e[s]}}),children:a},s))}),n.map((a,s)=>R.jsx(rh.Panel,{value:s.toString(),children:R.jsx(r,{containerUuid:a})},a))]}):null}function SBe({uuid:t,props:{label:e,visible:n,expand_by_default:i},nextGuiUuid:r}){const a=I.useContext(xi),[s,{toggle:o}]=wc(i),l=a.useGui(d=>d.guiUuidSetFromContainerUuid[t]),c=I.useContext(Ts),u=l===void 0||Object.keys(l).length===0,f=a.useGui(d=>r==null?null:d.guiConfigFromUuid[r]?.type),h=s?zCe:NCe;return n?R.jsxs(Ms,{withBorder:!0,className:WB,mb:f==="GuiFolderMessage"?"md":void 0,children:[R.jsxs(Ms,{className:y4e,style:{cursor:u?void 0:"pointer"},onClick:o,children:[e,R.jsx(h,{className:v4e,style:{display:u?"none":void 0}})]}),R.jsx(_h,{in:s&&!u,children:R.jsx(et,{pt:"0.2em",children:R.jsx(Ts.Provider,{value:{...c,folderDepth:c.folderDepth+1},children:R.jsx(c.GuiContainer,{containerUuid:t})})})}),R.jsx(_h,{in:!(s&&!u),children:R.jsx(et,{p:"xs"})})]}):null}function wBe(t,e,n){return Math.max(e,Math.min(n,t))}function EBe({min:t,max:e,step:n=1,value:i,onChange:r,marks:a,fixedEndpoints:s=!1,minRange:o,precision:l=2,id:c,className:u,disabled:f=!1,pt:h,pb:d}){const[m,y]=I.useState(null),v=I.useRef(null),g=Da(),{colorScheme:x}=tv(),_=D=>(D-t)/(e-t)*100,E=D=>{if(!v.current)return 0;const k=v.current.getBoundingClientRect(),B=(D-k.left)/k.width*(e-t)+t;return n?Math.round(B/n)*n:parseFloat(B.toFixed(l))},T=D=>{if(i.length===0)return-1;let k=1/0,P=0;return i.forEach((B,H)=>{const G=Math.abs(B-D);G<k&&(k=G,P=H)}),P},w=I.useCallback((D,k)=>{const P=[...i];P[k]=wBe(D,t,e);const B=o||n;k<P.length-1&&P[k]>P[k+1]-B&&(P[k]=P[k+1]-B),k>0&&P[k]<P[k-1]+B&&(P[k]=P[k-1]+B),!(s&&(k===0||k===P.length-1))&&r(P)},[i,r,t,e,n,o,s]),A=D=>{if(f||i.length===0)return;const k=E(D.clientX),P=T(k);if(P===-1)return;y(P);const B=G=>{const V=E(G.clientX);w(V,P)},H=()=>{y(null),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",H)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",H)},C=(D,k)=>{if(D.stopPropagation(),f||i.length===0||k>=i.length)return;y(k);const P=H=>{const G=E(H.clientX);w(G,k)},B=()=>{y(null),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",B)};return R.jsx(et,{id:c,className:`multi-slider ${u||""} ${f?"disabled":""}`,pt:h,pb:d,children:R.jsxs("div",{ref:v,className:"multi-slider-track-container",onMouseDown:A,children:[R.jsx("div",{className:"multi-slider-track"}),i.map((D,k)=>R.jsx(Cr,{label:D.toFixed(l),opened:m===k,position:"top",offset:10,transitionProps:{transition:"fade",duration:0},withinPortal:!0,children:R.jsx("div",{className:`multi-slider-thumb ${m===k?"active":""}`,style:{left:`${_(D)}%`,backgroundColor:f?void 0:g.colors[g.primaryColor][x==="dark"?5:6]},onMouseDown:P=>C(P,k)})},`thumb-${k}`)),a&&a.map((D,k)=>R.jsxs("div",{className:"multi-slider-mark-wrapper",style:{left:`${_(D.value)}%`},children:[R.jsx("div",{className:"multi-slider-mark"}),D.label&&D.label!==null&&R.jsx("div",{className:"multi-slider-mark-label",children:D.label})]},`mark-${k}`))]})})}function MBe({uuid:t,value:e,props:{label:n,hint:i,visible:r,disabled:a,min:s,max:o,precision:l,step:c,_marks:u,fixed_endpoints:f,min_range:h}}){const{setValue:d}=ke.useContext(Ts);if(!r)return null;const m=v=>d(t,v),y=R.jsx(et,{px:"0.1em",children:R.jsx(EBe,{id:t,className:u===null?jQ:void 0,min:s,max:o,step:c??void 0,fixedEndpoints:f,precision:l,minRange:h??void 0,marks:u===null?[{value:s,label:`${s.toFixed(6).replace(/\.?0+$/,"")}`},{value:o,label:`${o.toFixed(6).replace(/\.?0+$/,"")}`}]:u,value:e,onChange:m,disabled:a})});return R.jsx(Ru,{uuid:t,hint:i,label:n,children:y})}function TBe({uuid:t,props:{disabled:e,mime_type:n,color:i,_icon_html:r,label:a}}){const s=I.useContext(xi),o=ke.useRef(null),{isUploading:l,upload:c}=ABe({viewer:s,componentUuid:t});return R.jsxs(et,{mx:"xs",mb:"0.5em",children:[R.jsx("input",{type:"file",style:{display:"none"},id:`file_upload_${t}`,name:"file",accept:n,ref:o,onChange:u=>{const f=u.target;f.files&&c(f.files[0])}}),R.jsx(vs,{id:t,fullWidth:!0,color:nR(i),onClick:()=>{o.current!==null&&(o.current.value=o.current.defaultValue,o.current.click())},style:{height:"2em"},disabled:e||l,size:"sm",leftSection:r===null?void 0:R.jsx("div",{className:TB,dangerouslySetInnerHTML:{__html:r}}),children:a})]})}function ABe({viewer:t,componentUuid:e}){const n=t.useGui(l=>l.updateUploadState),i=t.useGui(l=>l.uploadsInProgress[e]),r=i?.totalBytes,a=ke.useMemo(()=>{if(r===void 0)return"";let l=r;const c=["B","K","M","G","T","P"];let u=0;for(;l>=100&&u<c.length-1;)l/=1024,u+=1;return`${l.toFixed(1)}${c[u]}`},[r]);ke.useEffect(()=>{if(i===void 0)return;const{notificationId:l,filename:c}=i;if(i.uploadedBytes===0)_s.show({id:l,title:`Uploading ${c} (${a})`,message:R.jsx(pf,{size:"sm",value:0}),autoClose:!1,withCloseButton:!1,loading:!0});else{const u=i.uploadedBytes/i.totalBytes,f=u===1;_s.update({id:l,title:`Uploading ${c} (${a})`,message:f?"File uploaded successfully.":R.jsx(pf,{size:"sm",transitionDuration:10,value:100*u}),autoClose:f,withCloseButton:f,loading:!f,icon:f?R.jsx(AB,{}):void 0})}},[i,a]);const s=i!==void 0&&i.uploadedBytes<i.totalBytes;async function o(l){const c=t.mutable.current,u=512*1024,f=Math.ceil(l.size/u),h=zQ(),d="upload-"+h;n({componentId:e,uploadedBytes:0,totalBytes:l.size,filename:l.name,notificationId:d}),c.sendMessage({type:"FileTransferStartUpload",source_component_uuid:e,transfer_uuid:h,filename:l.name,mime_type:l.type,size_bytes:l.size,part_count:f});for(let m=0;m<f;m++){const y=m*u,v=(m+1)*u,x=await l.slice(y,v).arrayBuffer();c.sendMessage({type:"FileTransferPart",source_component_uuid:e,transfer_uuid:h,part_index:m,content:new Uint8Array(x)})}}return{isUploading:s,upload:o}}function CBe({value:t,props:{visible:e,color:n,animated:i}}){return e?R.jsx(et,{pb:"xs",px:"xs",children:R.jsx(pf,{radius:"xs",color:nR(n),value:t,animated:i,transitionDuration:0})}):null}function RBe({props:t}){if(!t.visible)return null;const[e,n]=I.useState(null);return I.useEffect(()=>{if(t._data===null)n(null);else{const i=URL.createObjectURL(new Blob([t._data],{type:"image/"+t._format}));return n(i),()=>{URL.revokeObjectURL(i)}}},[t._data,t._format]),e===null?null:R.jsxs(et,{px:"xs",children:[t.label===null?null:R.jsx(gu,{fz:"sm",style:{display:"block"},children:t.label}),R.jsx("img",{src:e,style:{maxWidth:"100%",height:"auto"}})]})}function kBe({props:t}){return t.visible?R.jsx("div",{dangerouslySetInnerHTML:{__html:t.content}}):null}function sF({containerUuid:t}){const n=ke.useContext(xi).useGui(a=>a.updateGuiProps),i=tR(50).send;function r(a,s){n(a,{value:s}),i({type:"GuiUpdateMessage",uuid:a,updates:{value:s}})}return R.jsx(Ts.Provider,{value:{folderDepth:0,GuiContainer:jG,messageSender:i,setValue:r},children:R.jsx(jG,{containerUuid:t})})}function jG({containerUuid:t}){const e=ke.useContext(xi),n=e.useGui(o=>o.guiUuidSetFromContainerUuid[t])??{},i=[...Object.keys(n)],r=e.useGui(o=>o.guiOrderFromUuid);if(n===void 0)return null;let a=i.map(o=>({uuid:o,order:r[o]}));return a=a.sort((o,l)=>o.order-l.order),R.jsx(et,{pt:"xs",children:a.map((o,l)=>R.jsx(DBe,{guiUuid:o.uuid,nextGuiUuid:a[l+1]?.uuid??null},o.uuid))})}function DBe(t){const n=ke.useContext(xi).useGui(i=>i.guiConfigFromUuid[t.guiUuid]);if(n===void 0)return console.error("Tried to render non-existent component",t.guiUuid),null;switch(n.type){case"GuiFolderMessage":return R.jsx(SBe,{...n,nextGuiUuid:t.nextGuiUuid});case"GuiTabGroupMessage":return R.jsx(_Be,{...n});case"GuiMarkdownMessage":return R.jsx(b4e,{...n});case"GuiHtmlMessage":return R.jsx(kBe,{...n});case"GuiPlotlyMessage":return R.jsx(x4e,{...n});case"GuiUplotMessage":return R.jsx(xBe,{...n});case"GuiImageMessage":return R.jsx(RBe,{...n});case"GuiButtonMessage":return R.jsx(hCe,{...n});case"GuiUploadButtonMessage":return R.jsx(TBe,{...n});case"GuiSliderMessage":return R.jsx(pCe,{...n});case"GuiMultiSliderMessage":return R.jsx(MBe,{...n});case"GuiNumberMessage":return R.jsx(mCe,{...n});case"GuiTextMessage":return R.jsx(gCe,{...n});case"GuiCheckboxMessage":return R.jsx(bCe,{...n});case"GuiVector2Message":return R.jsx(yCe,{...n});case"GuiVector3Message":return R.jsx(vCe,{...n});case"GuiDropdownMessage":return R.jsx(xCe,{...n});case"GuiRgbMessage":return R.jsx(A2e,{...n});case"GuiRgbaMessage":return R.jsx(C2e,{...n});case"GuiButtonGroupMessage":return R.jsx(R2e,{...n});case"GuiProgressBarMessage":return R.jsx(CBe,{...n});default:OBe(n)}}function OBe(t){throw new Error("Unexpected object: "+t.type)}const IBe=I.forwardRef(function({points:e,color:n=16777215,vertexColors:i,linewidth:r,lineWidth:a,segments:s,dashed:o,...l},c){const u=ui(y=>y.size),f=I.useMemo(()=>s?new pB:new pQ,[s]),[h]=I.useState(()=>new K2),d=3,m=I.useMemo(()=>{const y=s?new $2:new dB;if(y.setPositions(e),i){const v=new Float32Array(i).map(g=>g/255);n=16777215,y.setColors(v,d)}return y},[e,s,i,d]);return I.useLayoutEffect(()=>{f.computeLineDistances()},[e,f]),I.useLayoutEffect(()=>{o?h.defines.USE_DASH="":delete h.defines.USE_DASH,h.needsUpdate=!0},[o,h]),I.useEffect(()=>()=>{m.dispose(),h.dispose()},[m]),R.jsxs("primitive",{object:f,ref:c,...l,children:[R.jsx("primitive",{object:m,attach:"geometry"}),R.jsx("primitive",{object:h,attach:"material",color:n,vertexColors:!!i,resolution:[u.width,u.height],linewidth:r??a??1,dashed:o,transparent:!1,...l})]})}),HG={"shadow-camera-near":.001,"shadow-camera-far":500,"shadow-bias":-1e-5,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-radius":4},GO=new Ct;class yR{constructor(e){e=e||{},this.zNear=e.webGL===!0?-1:0,this.vertices={near:[new Y,new Y,new Y,new Y],far:[new Y,new Y,new Y,new Y]},e.projectionMatrix!==void 0&&this.setFromProjectionMatrix(e.projectionMatrix,e.maxFar||1e4)}setFromProjectionMatrix(e,n){const i=this.zNear,r=e.elements[2*4+3]===0;return GO.copy(e).invert(),this.vertices.near[0].set(1,1,i),this.vertices.near[1].set(1,-1,i),this.vertices.near[2].set(-1,-1,i),this.vertices.near[3].set(-1,1,i),this.vertices.near.forEach(function(a){a.applyMatrix4(GO)}),this.vertices.far[0].set(1,1,1),this.vertices.far[1].set(1,-1,1),this.vertices.far[2].set(-1,-1,1),this.vertices.far[3].set(-1,1,1),this.vertices.far.forEach(function(a){a.applyMatrix4(GO);const s=Math.abs(a.z);r?a.z*=Math.min(n/s,1):a.multiplyScalar(Math.min(n/s,1))}),this.vertices}split(e,n){for(;e.length>n.length;)n.push(new yR);n.length=e.length;for(let i=0;i<e.length;i++){const r=n[i];if(i===0)for(let a=0;a<4;a++)r.vertices.near[a].copy(this.vertices.near[a]);else for(let a=0;a<4;a++)r.vertices.near[a].lerpVectors(this.vertices.near[a],this.vertices.far[a],e[i-1]);if(i===e.length-1)for(let a=0;a<4;a++)r.vertices.far[a].copy(this.vertices.far[a]);else for(let a=0;a<4;a++)r.vertices.far[a].lerpVectors(this.vertices.near[a],this.vertices.far[a],e[i])}}toSpace(e,n){for(let i=0;i<4;i++)n.vertices.near[i].copy(this.vertices.near[i]).applyMatrix4(e),n.vertices.far[i].copy(this.vertices.far[i]).applyMatrix4(e)}}const VG={lights_fragment_begin:`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

vec3 geometryClearcoatNormal = vec3( 0.0 );

#ifdef USE_CLEARCOAT

	geometryClearcoatNormal = clearcoatNormal;

#endif

#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		// Iridescence F0 approximation
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif

IncidentLight directLight;

#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

		pointLight = pointLights[ i ];

		getPointLightInfo( pointLight, geometryPosition, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;

		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

	SpotLight spotLight;
 	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;

	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

		spotLight = spotLights[ i ];

		getSpotLightInfo( spotLight, geometryPosition, directLight );

  		// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;

		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && defined( USE_CSM ) && defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	float linearDepth = (vViewPosition.z) / (shadowFar - cameraNear);
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#if defined( USE_SHADOWMAP ) && defined( CSM_FADE )
		vec2 cascade;
		float cascadeCenter;
		float closestEdge;
		float margin;
		float csmx;
		float csmy;

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];
			getDirectionalLightInfo( directionalLight, directLight );

			#if ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
				// NOTE: Depth gets larger away from the camera.
				// cascade.x is closer, cascade.y is further
				cascade = CSM_cascades[ i ];
				cascadeCenter = ( cascade.x + cascade.y ) / 2.0;
				closestEdge = linearDepth < cascadeCenter ? cascade.x : cascade.y;
				margin = 0.25 * pow( closestEdge, 2.0 );
				csmx = cascade.x - margin / 2.0;
				csmy = cascade.y + margin / 2.0;
				if( linearDepth >= csmx && ( linearDepth < csmy || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 ) ) {

					float dist = min( linearDepth - csmx, csmy - linearDepth );
					float ratio = clamp( dist / margin, 0.0, 1.0 );

					vec3 prevColor = directLight.color;
					directionalLightShadow = directionalLightShadows[ i ];
					directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

					bool shouldFadeLastCascade = UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth > cascadeCenter;
					directLight.color = mix( prevColor, directLight.color, shouldFadeLastCascade ? ratio : 1.0 );

					ReflectedLight prevLight = reflectedLight;
					RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

					bool shouldBlend = UNROLLED_LOOP_INDEX != CSM_CASCADES - 1 || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth < cascadeCenter;
					float blendRatio = shouldBlend ? ratio : 1.0;

					reflectedLight.directDiffuse = mix( prevLight.directDiffuse, reflectedLight.directDiffuse, blendRatio );
					reflectedLight.directSpecular = mix( prevLight.directSpecular, reflectedLight.directSpecular, blendRatio );
					reflectedLight.indirectDiffuse = mix( prevLight.indirectDiffuse, reflectedLight.indirectDiffuse, blendRatio );
					reflectedLight.indirectSpecular = mix( prevLight.indirectSpecular, reflectedLight.indirectSpecular, blendRatio );

				}
			#endif

		}
		#pragma unroll_loop_end
	#elif defined (USE_SHADOWMAP)

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];
			getDirectionalLightInfo( directionalLight, directLight );

			#if ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )

				directionalLightShadow = directionalLightShadows[ i ];
				if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y) directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

				if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && (linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1)) RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

			#endif

		}
		#pragma unroll_loop_end

	#elif ( NUM_DIR_LIGHT_SHADOWS > 0 )
		// note: no loop here - all CSM lights are in fact one light only
		getDirectionalLightInfo( directionalLights[0], directLight );
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	#endif

	#if ( NUM_DIR_LIGHTS > NUM_DIR_LIGHT_SHADOWS)
		// compute the lights not casting shadows (if any)

		#pragma unroll_loop_start
		for ( int i = NUM_DIR_LIGHT_SHADOWS; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];

			getDirectionalLightInfo( directionalLight, directLight );

			RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

		}
		#pragma unroll_loop_end

	#endif

#endif


#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && !defined( USE_CSM ) && !defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

		directionalLight = directionalLights[ i ];

		getDirectionalLightInfo( directionalLight, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

	RectAreaLight rectAreaLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if defined( RE_IndirectDiffuse )

	vec3 iblIrradiance = vec3( 0.0 );

	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

	#if defined( USE_LIGHT_PROBES )

		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );

	#endif

	#if ( NUM_HEMI_LIGHTS > 0 )

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );

		}
		#pragma unroll_loop_end

	#endif

#endif

#if defined( RE_IndirectSpecular )

	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );

#endif
`,lights_pars_begin:`
#if defined( USE_CSM ) && defined( CSM_CASCADES )
uniform vec2 CSM_cascades[CSM_CASCADES];
uniform float cameraNear;
uniform float shadowFar;
#endif
	`+on.lights_pars_begin},GG=new Ct,WO=new yR({webGL:!0}),Wf=new Y,Fx=new vi,qO=[],XO=[],YO=new Ct,WG=new Ct,NBe=new Y(0,1,0);class PBe{constructor(e){this.camera=e.camera,this.parent=e.parent,this.cascades=e.cascades||3,this.maxFar=e.maxFar||1e5,this.mode=e.mode||"practical",this.shadowMapSize=e.shadowMapSize||2048,this.shadowBias=e.shadowBias||1e-6,this.lightDirection=e.lightDirection||new Y(1,-1,1).normalize(),this.lightIntensity=e.lightIntensity||3,this.lightNear=e.lightNear||1,this.lightFar=e.lightFar||2e3,this.lightMargin=e.lightMargin||200,this.customSplitsCallback=e.customSplitsCallback,this.fade=!1,this.mainFrustum=new yR({webGL:!0}),this.frustums=[],this.breaks=[],this.lights=[],this.shaders=new Map,this._createLights(),this.updateFrustums(),this._injectInclude()}_createLights(){for(let e=0;e<this.cascades;e++){const n=new H2(16777215,this.lightIntensity);n.castShadow=!0,n.shadow.mapSize.width=this.shadowMapSize,n.shadow.mapSize.height=this.shadowMapSize,n.shadow.camera.near=this.lightNear,n.shadow.camera.far=this.lightFar,n.shadow.bias=this.shadowBias,this.parent.add(n),this.parent.add(n.target),this.lights.push(n)}}_initCascades(){const e=this.camera;e.updateProjectionMatrix(),this.mainFrustum.setFromProjectionMatrix(e.projectionMatrix,this.maxFar),this.mainFrustum.split(this.breaks,this.frustums)}_updateShadowBounds(){const e=this.frustums;for(let n=0;n<e.length;n++){const r=this.lights[n].shadow.camera,a=this.frustums[n],s=a.vertices.near,o=a.vertices.far,l=o[0];let c;l.distanceTo(o[2])>l.distanceTo(s[2])?c=o[2]:c=s[2];let u=l.distanceTo(c);if(this.fade){const f=this.camera,h=Math.max(f.far,this.maxFar),d=a.vertices.far[0].z/(h-f.near),m=.25*Math.pow(d,2)*(h-f.near);u+=m}r.left=-u/2,r.right=u/2,r.top=u/2,r.bottom=-u/2,r.updateProjectionMatrix()}}_getBreaks(){const e=this.camera,n=Math.min(e.far,this.maxFar);switch(this.breaks.length=0,this.mode){case"uniform":i(this.cascades,e.near,n,this.breaks);break;case"logarithmic":r(this.cascades,e.near,n,this.breaks);break;case"practical":a(this.cascades,e.near,n,.5,this.breaks);break;case"custom":this.customSplitsCallback===void 0&&console.error("CSM: Custom split scheme callback not defined."),this.customSplitsCallback(this.cascades,e.near,n,this.breaks);break}function i(s,o,l,c){for(let u=1;u<s;u++)c.push((o+(l-o)*u/s)/l);c.push(1)}function r(s,o,l,c){for(let u=1;u<s;u++)c.push(o*(l/o)**(u/s)/l);c.push(1)}function a(s,o,l,c,u){qO.length=0,XO.length=0,r(s,o,l,XO),i(s,o,l,qO);for(let f=1;f<s;f++)u.push(pc.lerp(qO[f-1],XO[f-1],c));u.push(1)}}update(){const e=this.camera,n=this.frustums;YO.lookAt(new Y,this.lightDirection,NBe),WG.copy(YO).invert();for(let i=0;i<n.length;i++){const r=this.lights[i],a=r.shadow.camera,s=(a.right-a.left)/this.shadowMapSize,o=(a.top-a.bottom)/this.shadowMapSize;GG.multiplyMatrices(WG,e.matrixWorld),n[i].toSpace(GG,WO);const l=WO.vertices.near,c=WO.vertices.far;Fx.makeEmpty();for(let u=0;u<4;u++)Fx.expandByPoint(l[u]),Fx.expandByPoint(c[u]);Fx.getCenter(Wf),Wf.z=Fx.max.z+this.lightMargin,Wf.x=Math.floor(Wf.x/s)*s,Wf.y=Math.floor(Wf.y/o)*o,Wf.applyMatrix4(YO),r.position.copy(Wf),r.target.position.copy(Wf),r.target.position.x+=this.lightDirection.x,r.target.position.y+=this.lightDirection.y,r.target.position.z+=this.lightDirection.z}}_injectInclude(){on.lights_fragment_begin=VG.lights_fragment_begin,on.lights_pars_begin=VG.lights_pars_begin}setupMaterial(e){e.defines=e.defines||{},e.defines.USE_CSM=1,e.defines.CSM_CASCADES=this.cascades,this.fade&&(e.defines.CSM_FADE="");const n=[],i=this,r=this.shaders;e.onBeforeCompile=function(a){const s=Math.min(i.camera.far,i.maxFar);i._getExtendedBreaks(n),a.uniforms.CSM_cascades={value:n},a.uniforms.cameraNear={value:i.camera.near},a.uniforms.shadowFar={value:s},r.set(e,a)},r.set(e,null)}_updateUniforms(){const e=Math.min(this.camera.far,this.maxFar);this.shaders.forEach(function(i,r){if(i!==null){const a=i.uniforms;this._getExtendedBreaks(a.CSM_cascades.value),a.cameraNear.value=this.camera.near,a.shadowFar.value=e}!this.fade&&"CSM_FADE"in r.defines?(delete r.defines.CSM_FADE,r.needsUpdate=!0):this.fade&&!("CSM_FADE"in r.defines)&&(r.defines.CSM_FADE="",r.needsUpdate=!0)},this)}_getExtendedBreaks(e){for(;e.length<this.breaks.length;)e.push(new ft);e.length=this.breaks.length;for(let n=0;n<this.cascades;n++){const i=this.breaks[n],r=this.breaks[n-1]||0;e[n].x=r,e[n].y=i}}updateFrustums(){this._getBreaks(),this._initCascades(),this._updateShadowBounds(),this._updateUniforms()}remove(){for(let e=0;e<this.lights.length;e++)this.parent.remove(this.lights[e].target),this.parent.remove(this.lights[e])}dispose(){const e=this.shaders;e.forEach(function(n,i){delete i.onBeforeCompile,delete i.defines.USE_CSM,delete i.defines.CSM_CASCADES,delete i.defines.CSM_FADE,n!==null&&(delete n.uniforms.CSM_cascades,delete n.uniforms.cameraNear,delete n.uniforms.shadowFar),i.needsUpdate=!0}),e.clear()}}let qG="",XG="",dM=0;class LBe{instance;args;constructor(e){this.args=e,dM===0&&(qG=on.lights_fragment_begin,XG=on.lights_pars_begin)}attach(){this.instance||(this.instance=new PBe(this.args),dM++)}dispose(){this.instance&&(this.instance.remove(),this.instance.dispose(),this.instance=void 0,dM--,dM===0&&(on.lights_fragment_begin=qG,on.lights_pars_begin=XG))}}function YG(t){t.traverse(e=>{const n=e;n.isMesh&&n.material&&(Array.isArray(n.material)?n.material.forEach(i=>{i.needsUpdate=!0}):n.material.needsUpdate=!0)})}function IP({maxFar:t=30,shadowMapSize:e=1024,lightIntensity:n=.25,cascades:i=3,fade:r=!0,position:a=[0,0,0],shadowBias:s=-1e-5,lightFar:o=2e3,lightMargin:l=200,lightNear:c=1e-4,mode:u="practical",color:f=16777215,castShadow:h=!0}){return h?R.jsx(UBe,{maxFar:t,shadowMapSize:e,lightIntensity:n/i,cascades:i,fade:r,position:a,shadowBias:s,lightFar:o,lightMargin:l,lightNear:c,mode:u,color:f},"csm-shadow"):R.jsx("directionalLight",{intensity:n,position:a,color:f!==void 0?new Ut(f):void 0})}function UBe({maxFar:t,shadowMapSize:e,lightIntensity:n,cascades:i,fade:r,position:a=[0,-1,0],shadowBias:s,lightFar:o,lightMargin:l,lightNear:c,mode:u,color:f}){const h=ui(w=>w.camera),{scene:d}=ui(),m=I.useMemo(()=>{let w=d;for(;w;){if(w instanceof pv)return w;w=w.parent}throw new Error("Could not find scene object in r3f context!")},[d]),y=I.useMemo(()=>new Y(-a[0],-a[1],-a[2]).normalize(),[a]),v=I.useRef(null),g=I.useMemo(()=>new Y,[]),x=I.useMemo(()=>new Y(0,0,0),[]),_=I.useMemo(()=>new Y,[]),E=I.useMemo(()=>new LBe({camera:h,cascades:i,lightDirection:y.clone(),lightFar:o,lightIntensity:n,lightMargin:l,lightNear:c,maxFar:t,mode:u,parent:m,shadowBias:s,shadowMapSize:e}),[h,m,i,y,o,n,l,c,t,u,s,e]),T=I.useMemo(()=>new Ut(f),[f]);return I.useEffect(()=>{E.instance&&(E.instance.lights.forEach(w=>{w.color=T}),E.instance.fade=r??!1)},[E,T,r]),fa(()=>{!E.instance||!v.current||(v.current.getWorldPosition(g),_.subVectors(x,g).normalize(),E.instance.lightDirection.copy(_),E.instance.update())}),I.useEffect(()=>(YG(m),()=>{requestAnimationFrame(()=>{YG(m)})}),[m]),I.useEffect(()=>(E.attach(),E.instance&&E.instance.lights.forEach(w=>{w.color=T}),()=>{E.dispose()}),[E,T]),R.jsx(R.Fragment,{children:R.jsx("group",{position:a,ref:v})})}const BBe=ke.forwardRef(function({children:e,...n},i){const r=ke.useMemo(()=>wS(n.props),[n.props.material,n.props.color,n.props.wireframe,n.props.opacity,n.props.flat_shading,n.props.side]),a=ke.useMemo(()=>{const s=new An;return s.setAttribute("position",new Tn(new Float32Array(n.props.vertices.buffer.slice(n.props.vertices.byteOffset,n.props.vertices.byteOffset+n.props.vertices.byteLength)),3)),s.setIndex(new Tn(new Uint32Array(n.props.faces.buffer.slice(n.props.faces.byteOffset,n.props.faces.byteOffset+n.props.faces.byteLength)),1)),s.computeVertexNormals(),s.computeBoundingSphere(),s},[n.props.vertices.buffer,n.props.faces.buffer]);return ke.useEffect(()=>()=>{a&&a.dispose()},[a]),ke.useEffect(()=>()=>{r&&r.dispose()},[r]),R.jsxs("mesh",{ref:i,geometry:a,material:r,castShadow:n.props.cast_shadow,receiveShadow:n.props.receive_shadow,children:[R.jsx(sh,{alwaysMounted:!0}),e]})});let $O=null;const FBe=ke.forwardRef(function({children:e,...n},i){const r=ke.useMemo(()=>wS(n.props),[n.props.material,n.props.color,n.props.wireframe,n.props.opacity,n.props.flat_shading,n.props.side]);return $O===null&&($O=new fp(1,1,1)),ke.useEffect(()=>()=>{r&&r.dispose()},[r]),R.jsxs("group",{ref:i,children:[R.jsx("mesh",{geometry:$O,scale:n.props.dimensions,material:r,castShadow:n.props.cast_shadow,receiveShadow:n.props.receive_shadow,children:R.jsx(sh,{alwaysMounted:!0})}),e]})}),KO=new Map,zBe=ke.forwardRef(function({children:e,...n},i){const r=ke.useMemo(()=>wS(n.props),[n.props.material,n.props.color,n.props.wireframe,n.props.opacity,n.props.flat_shading,n.props.side]),a=ke.useMemo(()=>(KO.has(n.props.subdivisions)||KO.set(n.props.subdivisions,new gv(1,n.props.subdivisions)),KO.get(n.props.subdivisions)),[n.props.subdivisions]);return ke.useEffect(()=>()=>{a&&a.dispose()},[a]),ke.useEffect(()=>()=>{r&&r.dispose()},[r]),R.jsxs("group",{ref:i,children:[R.jsx("mesh",{ref:i,geometry:a,scale:n.props.radius,material:r,castShadow:n.props.cast_shadow,receiveShadow:n.props.receive_shadow,children:R.jsx(sh,{alwaysMounted:!0})}),e]})}),jBe=ke.forwardRef(function({children:e,...n},i){const r=ke.useContext(xi),a=ke.useMemo(()=>wS(n.props),[n.props.material,n.props.color,n.props.wireframe,n.props.opacity,n.props.flat_shading,n.props.side]),s=ke.useRef(),{geometry:o,skeleton:l}=ke.useMemo(()=>{const u=new An;u.setAttribute("position",new Tn(new Float32Array(n.props.vertices.buffer.slice(n.props.vertices.byteOffset,n.props.vertices.byteOffset+n.props.vertices.byteLength)),3)),u.setIndex(new Tn(new Uint32Array(n.props.faces.buffer.slice(n.props.faces.byteOffset,n.props.faces.byteOffset+n.props.faces.byteLength)),1)),u.computeVertexNormals(),u.computeBoundingSphere();const f=new Float32Array(n.props.bone_wxyzs.buffer.slice(n.props.bone_wxyzs.byteOffset,n.props.bone_wxyzs.byteOffset+n.props.bone_wxyzs.byteLength)),h=new Float32Array(n.props.bone_positions.buffer.slice(n.props.bone_positions.byteOffset,n.props.bone_positions.byteOffset+n.props.bone_positions.byteLength)),d=[];s.current=d;for(let g=0;g<h.length/3;g++)d.push(new fS);const m=[],y=new Hn;d.forEach((g,x)=>{y.set(f[x*4+1],f[x*4+2],f[x*4+3],f[x*4+0]);const _=new Ct;_.makeRotationFromQuaternion(y),_.setPosition(h[x*3+0],h[x*3+1],h[x*3+2]),_.invert(),m.push(_),g.setRotationFromQuaternion(y),g.position.set(h[x*3+0],h[x*3+1],h[x*3+2])});const v=new mv(d,m);return u.setAttribute("skinIndex",new Tn(new Uint16Array(n.props.skin_indices.buffer.slice(n.props.skin_indices.byteOffset,n.props.skin_indices.byteOffset+n.props.skin_indices.byteLength)),4)),u.setAttribute("skinWeight",new Tn(new Float32Array(n.props.skin_weights.buffer.slice(n.props.skin_weights.byteOffset,n.props.skin_weights.byteOffset+n.props.skin_weights.byteLength)),4)),v.init(),{geometry:u,skeleton:v}},[n.props.vertices.buffer,n.props.faces.buffer,n.props.skin_indices.buffer,n.props.skin_weights?.buffer,n.props.bone_wxyzs.buffer,n.props.bone_positions.buffer]),c=r.mutable.current;return ke.useEffect(()=>{const u=c.skinnedMeshState[n.name];return u.initialized=!1,()=>{l&&l.dispose(),o&&o.dispose()}},[l,o,n.name,c.skinnedMeshState]),ke.useEffect(()=>()=>{a&&a.dispose()},[a]),fa(()=>{const u=c.nodeRefFromName[n.name];if(u===void 0)return;const f=c.skinnedMeshState[n.name],h=s.current;l!==void 0&&h!==void 0&&(f.initialized||(h.forEach(d=>{u.add(d)}),f.initialized=!0),h.forEach((d,m)=>{const y=f.poses[m].wxyz,v=f.poses[m].position;d.quaternion.set(y[1],y[2],y[3],y[0]),d.position.set(v[0],v[1],v[2])}))}),R.jsxs("skinnedMesh",{ref:i,geometry:o,material:a,skeleton:l,castShadow:n.props.cast_shadow,receiveShadow:n.props.receive_shadow,frustumCulled:!1,children:[R.jsx(sh,{alwaysMounted:!0}),e]})});function JO(t,e,n){n[0]=t[0]>e[0]?e[0]:t[0],n[1]=t[1]<e[1]?e[1]:t[1],n[2]=t[2]>e[2]?e[2]:t[2],n[3]=t[3]<e[3]?e[3]:t[3],n[4]=t[4]>e[4]?e[4]:t[4],n[5]=t[5]<e[5]?e[5]:t[5]}function HBe(t,e,n){let i=!1;const r=t[0]>e[0]?e[0]:t[0],a=t[1]<e[1]?e[1]:t[1],s=t[2]>e[2]?e[2]:t[2],o=t[3]<e[3]?e[3]:t[3],l=t[4]>e[4]?e[4]:t[4],c=t[5]<e[5]?e[5]:t[5];return n[0]>r&&(n[0]=r,i=!0),n[1]<a&&(n[1]=a,i=!0),n[2]>s&&(n[2]=s,i=!0),n[3]<o&&(n[3]=o,i=!0),n[4]>l&&(n[4]=l,i=!0),n[5]<c&&(n[5]=c,i=!0),i}function VBe(t,e){return!(e[0]>t[0]||e[1]<t[1]||e[2]>t[2]||e[3]<t[3]||e[4]>t[4]||e[5]<t[5])}function GBe(t,e){let n=!1;return e[0]>t[0]&&(e[0]=t[0],n=!0),e[1]<t[1]&&(e[1]=t[1],n=!0),e[2]>t[2]&&(e[2]=t[2],n=!0),e[3]<t[3]&&(e[3]=t[3],n=!0),e[4]>t[4]&&(e[4]=t[4],n=!0),e[5]<t[5]&&(e[5]=t[5],n=!0),n}function pM(t,e){t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e}function a0(t){const e=t[1]-t[0],n=t[3]-t[2],i=t[5]-t[4];return 2*(e*n+n*i+i*e)}function sm(t,e){const n=t[0]>e[0]?e[0]:t[0],i=t[1]<e[1]?e[1]:t[1],r=t[2]>e[2]?e[2]:t[2],a=t[3]<e[3]?e[3]:t[3],s=t[4]>e[4]?e[4]:t[4],o=t[5]<e[5]?e[5]:t[5],l=i-n,c=a-r,u=o-s;return 2*(l*c+c*u+u*l)}function WBe(t){const e=t[1]-t[0],n=t[3]-t[2],i=t[5]-t[4];return e>n?e>i?0:2:n>i?1:2}function l1(t,e){const n=t[0]-e[0],i=e[0]-t[1];let r=n>i?n:i;r<0&&(r=0);const a=t[2]-e[1],s=e[1]-t[3];let o=a>s?a:s;o<0&&(o=0);const l=t[4]-e[2],c=e[2]-t[5];let u=l>c?l:c;return u<0&&(u=0),r*r+o*o+u*u}function qBe(t,e){let n,i,r,a,s,o;const l=t[0]-e[0],c=e[0]-t[1];l>c?(n=l,i=c):(n=c,i=l),n<0&&(n=0);const u=t[2]-e[1],f=e[1]-t[3];u>f?(r=u,a=f):(r=f,a=u),r<0&&(r=0);const h=t[4]-e[2],d=e[2]-t[5];return h>d?(s=h,o=d):(s=d,o=h),s<0&&(s=0),{min:n*n+r*r+s*s,max:i*i+a*a+o*o}}let XBe=class{constructor(){this.array=[]}clear(){this.array=[]}push(e){const n=this.array,i=e.inheritedCost,r=n.length>6?n.length-6:0;let a;for(a=n.length-1;a>=r&&!(i<=n[a].inheritedCost);a--);a>n.length-7&&n.splice(a+1,0,e)}pop(){return this.array.pop()}},YBe=class{constructor(e=!1){this.root=null,this._sortedList=new XBe,this.count=0,this.highPrecision=e,this._typeArray=e?Float64Array:Float32Array}createFromArray(e,n,i,r=0){const a=n.length,s=this._typeArray;s!==(n[0].BYTES_PER_ELEMENT===4?Float32Array:Float64Array)&&console.warn("Different precision.");const o=new s(6);let l,c;this.root=u(0,a,null);function u(m,y,v){if(y===1){const E=n[m];r>0&&pM(E,r);const T={box:E,object:e[m],parent:v};return i&&i(T),T}const g=f(m,y);h();let x=d(m,y);(x===m||x===m+y)&&(x=m+(y>>1));const _={box:g,parent:v};return _.left=u(m,x-m,_),_.right=u(x,y-x+m,_),_}function f(m,y){const v=new s(6),g=m+y;v[0]=1/0,v[1]=-1/0,v[2]=1/0,v[3]=-1/0,v[4]=1/0,v[5]=-1/0,o[0]=1/0,o[1]=-1/0,o[2]=1/0,o[3]=-1/0,o[4]=1/0,o[5]=-1/0;for(let x=m;x<g;x++){const _=n[x],E=_[0],T=_[1],w=_[2],A=_[3],C=_[4],D=_[5];v[0]>E&&(v[0]=E),v[1]<T&&(v[1]=T),v[2]>w&&(v[2]=w),v[3]<A&&(v[3]=A),v[4]>C&&(v[4]=C),v[5]<D&&(v[5]=D);const k=(T+E)*.5,P=(A+w)*.5,B=(D+C)*.5;o[0]>k&&(o[0]=k),o[1]<k&&(o[1]=k),o[2]>P&&(o[2]=P),o[3]<P&&(o[3]=P),o[4]>B&&(o[4]=B),o[5]<B&&(o[5]=B)}return v[0]-=r,v[1]+=r,v[2]-=r,v[3]+=r,v[4]-=r,v[5]+=r,v}function h(){l=WBe(o)*2,c=(o[l]+o[l+1])*.5}function d(m,y){let v=m,g=m+y-1;for(;v<=g;){const x=n[v];if((x[l+1]+x[l])*.5>=c)for(;;){const _=n[g];if((_[l+1]+_[l])*.5<c){const E=e[v];e[v]=e[g],e[g]=E;const T=n[v];n[v]=n[g],n[g]=T,g--;break}if(g--,g<=v)return v}v++}return v}}insert(e,n,i){i>0&&pM(n,i);const r=this.createLeafNode(e,n);return this.root===null?this.root=r:this.insertLeaf(r),this.count++,r}insertRange(e,n,i,r){console.warn("Method not optimized yet. It just calls 'insert' N times.");const a=e.length,s=i>0?i:i?null:0;for(let o=0;o<a;o++){const l=this.insert(e[o],n[o],s??i[o]);r&&r(l)}}move(e,n){if(!e.parent||VBe(e.box,e.parent.box)){n>0&&pM(e.box,n);return}n>0&&pM(e.box,n);const i=this.delete(e);this.insertLeaf(e,i),this.count++}delete(e){const n=e.parent;if(n===null)return this.root=null,null;const i=n.parent,r=n.left===e?n.right:n.left;return r.parent=i,e.parent=null,i===null?(this.root=r,n):(i.left===n?i.left=r:i.right=r,this.refit(i),this.count--,n)}clear(){this.root=null}insertLeaf(e,n){const i=this.findBestSibling(e.box),r=i.parent;n===void 0?n=this.createInternalNode(r,i,e):(n.parent=r,n.left=i,n.right=e),i.parent=n,e.parent=n,r===null?this.root=n:r.left===i?r.left=n:r.right=n,this.refitAndRotate(e,i)}createLeafNode(e,n){return{box:n,object:e,parent:null}}createInternalNode(e,n,i){return{parent:e,left:n,right:i,box:new this._typeArray(6)}}findBestSibling(e){const n=this.root;let i=n,r=sm(e,n.box);const a=a0(e);if(n.object!==void 0)return n;const s=this._sortedList;s.clear();let o={node:n,inheritedCost:r-a0(n.box)};do{const{node:l,inheritedCost:c}=o;if(a+c>=r)break;const u=l.left,f=l.right,h=sm(e,u.box)+c,d=h-a0(u.box),m=sm(e,f.box)+c,y=m-a0(f.box);if(h>m?r>m&&(i=f,r=m):r>h&&(i=u,r=h),y>d){if(a+d>=r||(u.object===void 0&&s.push({node:u,inheritedCost:d}),a+y>=r))continue;f.object===void 0&&s.push({node:f,inheritedCost:y})}else{if(a+y>=r||(f.object===void 0&&s.push({node:f,inheritedCost:y}),a+d>=r))continue;u.object===void 0&&s.push({node:u,inheritedCost:d})}}while(o=s.pop());return i}refit(e){for(JO(e.left.box,e.right.box,e.box);e=e.parent;)if(!HBe(e.left.box,e.right.box,e.box))return}refitAndRotate(e,n){const i=e.box;e=e.parent;const r=e.box;for(JO(i,n.box,r);e=e.parent;){const a=e.box;if(!GBe(i,a))return;const s=e.left,o=e.right,l=s.box,c=o.box;let u=null,f=null,h=0;if(o.object===void 0){const d=o.left,m=o.right,y=a0(o.box),v=y-sm(l,d.box),g=y-sm(l,m.box);v>g?v>0&&(u=s,f=m,h=v):g>0&&(u=s,f=d,h=g)}if(s.object===void 0){const d=s.left,m=s.right,y=a0(s.box),v=y-sm(c,d.box),g=y-sm(c,m.box);v>g?v>h&&(u=o,f=m):g>h&&(u=o,f=d)}u!==null&&this.swap(u,f)}}swap(e,n){const i=e.parent,r=n.parent,a=r.box;i.left===e?i.left=n:i.right=n,r.left===n?r.left=e:r.right=e,e.parent=r,n.parent=i,JO(r.left.box,r.right.box,a)}};const oF=0,$Be=1;let KBe=class{constructor(e,n){this.coordinateSystem=n,this.array=e?new Float64Array(24):new Float32Array(24)}setFromProjectionMatrix(e){if(this.updatePlane(0,e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),this.updatePlane(1,e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),this.updatePlane(2,e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),this.updatePlane(3,e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),this.updatePlane(4,e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14]),this.coordinateSystem===oF)this.updatePlane(5,e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]);else if(this.coordinateSystem===$Be)this.updatePlane(5,e[2],e[6],e[10],e[14]);else throw new Error("Invalid coordinate system: "+this.coordinateSystem);return this}updatePlane(e,n,i,r,a){const s=this.array,o=e*4,l=Math.sqrt(n*n+i*i+r*r);s[o+0]=n/l,s[o+1]=i/l,s[o+2]=r/l,s[o+3]=a/l}intersectsBoxMask(e,n){const i=this.array;let r,a,s,o,l,c;for(let u=0;u<6;u++){if(!(n&32>>u))continue;const f=u*4,h=i[f+0],d=i[f+1],m=i[f+2],y=i[f+3];if(h>0?(r=e[1],o=e[0]):(r=e[0],o=e[1]),d>0?(a=e[3],l=e[2]):(a=e[2],l=e[3]),m>0?(s=e[5],c=e[4]):(s=e[4],c=e[5]),h*r+d*a+m*s<-y)return-1;h*o+d*l+m*c>-y&&(n^=32>>u)}return n}isIntersected(e,n){const i=this.array;for(let r=0;r<6;r++){if(!(n&32>>r))continue;const a=r*4,s=i[a+0],o=i[a+1],l=i[a+2],c=i[a+3],u=s>0?e[1]:e[0],f=o>0?e[3]:e[2],h=l>0?e[5]:e[4];if(s*u+o*f+l*h<-c)return!1}return!0}isIntersectedMargin(e,n,i){if(n===0)return!0;const r=this.array;for(let a=0;a<6;a++){if(!(n&32>>a))continue;const s=a*4,o=r[s+0],l=r[s+1],c=r[s+2],u=r[s+3],f=o>0?e[1]-i:e[0]+i,h=l>0?e[3]-i:e[2]+i,d=c>0?e[5]-i:e[4]+i;if(o*f+l*h+c*d<-u)return!1}return!0}};function $G(t,e,n,i,r,a){let s=i[0],o=e[0],l=n[0],c=(t[s]-o)*l,u=(t[s^1]-o)*l,f=c>0?c:0,h=u<1/0?u:1/0;return s=i[1],o=e[1],l=n[1],c=(t[s+2]-o)*l,c>h||(u=(t[s^3]-o)*l,f>u)||(f=c>f?c:f,h=u<h?u:h,s=i[2],o=e[2],l=n[2],c=(t[s+4]-o)*l,c>h)||(u=(t[s^5]-o)*l,f>u)?!1:(f=c>f?c:f,h=u<h?u:h,f<=a&&h>=r)}function KG(t,e){return t[1]>=e[0]&&e[1]>=t[0]&&t[3]>=e[2]&&e[3]>=t[2]&&t[5]>=e[4]&&e[5]>=t[4]}function JBe(t,e,n){return l1(n,t)<=e*e}class ZBe{constructor(e,n=oF){this._sign=new Uint8Array(3),this.builder=e;const i=e.highPrecision;this.frustum=new KBe(i,n),this._dirInv=i?new Float64Array(3):new Float32Array(3)}get root(){return this.builder.root}createFromArray(e,n,i,r){e?.length>0&&this.builder.createFromArray(e,n,i,r)}insert(e,n,i){return this.builder.insert(e,n,i)}insertRange(e,n,i,r){e?.length>0&&this.builder.insertRange(e,n,i,r)}move(e,n){this.builder.move(e,n)}delete(e){return this.builder.delete(e)}clear(){this.builder.clear()}traverse(e){if(this.root===null)return;n(this.root,0);function n(i,r){if(i.object!==void 0){e(i,r);return}e(i,r)||(n(i.left,r+1),n(i.right,r+1))}}intersectsRay(e,n,i,r=0,a=1/0){if(this.root===null)return!1;const s=this._dirInv,o=this._sign;return s[0]=1/e[0],s[1]=1/e[1],s[2]=1/e[2],o[0]=s[0]<0?1:0,o[1]=s[1]<0?1:0,o[2]=s[2]<0?1:0,l(this.root);function l(c){return $G(c.box,n,s,o,r,a)?c.object!==void 0?i(c.object):l(c.left)||l(c.right):!1}}intersectsBox(e,n){if(this.root===null)return!1;return i(this.root);function i(r){return KG(e,r.box)?r.object!==void 0?n(r.object):i(r.left)||i(r.right):!1}}intersectsSphere(e,n,i){if(this.root===null)return!1;return r(this.root);function r(a){return JBe(e,n,a.box)?a.object!==void 0?i(a.object):r(a.left)||r(a.right):!1}}isNodeIntersected(e,n){const i=e.box;let r;for(;r=e.parent;){const s=r.left===e?r.right:r.left;if(a(s))return!0;e=r}return!1;function a(s){return KG(i,s.box)?s.object!==void 0?n(s.object):a(s.left)||a(s.right):!1}}rayIntersections(e,n,i,r=0,a=1/0){if(this.root===null)return;const s=this._dirInv,o=this._sign;s[0]=1/e[0],s[1]=1/e[1],s[2]=1/e[2],o[0]=s[0]<0?1:0,o[1]=s[1]<0?1:0,o[2]=s[2]<0?1:0,l(this.root);function l(c){if($G(c.box,n,s,o,r,a)){if(c.object!==void 0){i(c.object);return}l(c.left),l(c.right)}}}frustumCulling(e,n){if(this.root===null)return;const i=this.frustum.setFromProjectionMatrix(e);r(this.root,63);function r(s,o){if(s.object!==void 0){i.isIntersected(s.box,o)&&n(s,i,o);return}if(o=i.intersectsBoxMask(s.box,o),!(o<0)){if(o===0){a(s.left),a(s.right);return}r(s.left,o),r(s.right,o)}}function a(s){if(s.object!==void 0){n(s,i,0);return}a(s.left),a(s.right)}}frustumCullingLOD(e,n,i,r){if(this.root===null)return;const a=this.frustum.setFromProjectionMatrix(e);s(this.root,63,null);function s(c,u,f){const h=c.box;if(f===null&&(f=l(h)),c.object!==void 0){a.isIntersected(h,u)&&r(c,f,a,u);return}if(u=a.intersectsBoxMask(h,u),!(u<0)){if(u===0){o(c.left,f),o(c.right,f);return}s(c.left,u,f),s(c.right,u,f)}}function o(c,u){if(u===null&&(u=l(c.box)),c.object!==void 0){r(c,u,a,0);return}o(c.left,u),o(c.right,u)}function l(c){const{min:u,max:f}=qBe(c,n);for(let h=i.length-1;h>0;h--)if(f>=i[h])return u>=i[h]?h:null;return 0}}closestPointToPoint(e,n){if(this.root===null)return;let i=1/0;return r(this.root),Math.sqrt(i);function r(a){if(a.object!==void 0){if(n){const l=n(a.object)??l1(a.box,e);l<i&&(i=l)}else i=l1(a.box,e);return}const s=l1(a.left.box,e),o=l1(a.right.box,e);s<o?s<i&&(r(a.left),o<i&&r(a.right)):o<i&&(r(a.right),s<i&&r(a.left))}}}function JG(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.z,e}function ZG(t,e){const n=t.min,i=t.max;return e[0]=n.x,e[1]=i.x,e[2]=n.y,e[3]=i.y,e[4]=n.z,e[5]=i.z,e}class ine{constructor(e,n,i){if(this.isInstanceEntity=!0,this.position=new Y,this.scale=new Y(1,1,1),this.quaternion=new Hn,this.id=n,this.owner=e,i){const r=this.quaternion,a=this.rotation=new li;a._onChange(()=>r.setFromEuler(a,!1)),r._onChange(()=>a.setFromQuaternion(r,void 0,!1))}}get visible(){return this.owner.getVisibilityAt(this.id)}set visible(e){this.owner.setVisibilityAt(this.id,e)}get active(){return this.owner.getActiveAt(this.id)}set active(e){this.owner.setActiveAt(this.id,e)}get color(){return this.owner.getColorAt(this.id)}set color(e){this.owner.setColorAt(this.id,e)}get opacity(){return this.owner.getOpacityAt(this.id)}set opacity(e){this.owner.setOpacityAt(this.id,e)}get morph(){return this.owner.getMorphAt(this.id)}set morph(e){this.owner.setMorphAt(this.id,e)}get matrix(){return this.owner.getMatrixAt(this.id)}get matrixWorld(){return this.matrix.premultiply(this.owner.matrixWorld)}setMatrixIdentity(){var e;const n=this.owner,i=n.matricesTexture._data,r=this.id,a=r*16;i[a+0]=1,i[a+1]=0,i[a+2]=0,i[a+3]=0,i[a+4]=0,i[a+5]=1,i[a+6]=0,i[a+7]=0,i[a+8]=0,i[a+9]=0,i[a+10]=1,i[a+11]=0,i[a+12]=0,i[a+13]=0,i[a+14]=0,i[a+15]=1,n.matricesTexture.enqueueUpdate(r),(e=n.bvh)==null||e.move(r)}updateMatrix(){var e;const n=this.owner,i=this.position,r=this.quaternion,a=this.scale,s=n.matricesTexture._data,o=this.id,l=o*16,c=r._x,u=r._y,f=r._z,h=r._w,d=c+c,m=u+u,y=f+f,v=c*d,g=c*m,x=c*y,_=u*m,E=u*y,T=f*y,w=h*d,A=h*m,C=h*y,D=a.x,k=a.y,P=a.z;s[l+0]=(1-(_+T))*D,s[l+1]=(g+C)*D,s[l+2]=(x-A)*D,s[l+3]=0,s[l+4]=(g-C)*k,s[l+5]=(1-(v+T))*k,s[l+6]=(E+w)*k,s[l+7]=0,s[l+8]=(x+A)*P,s[l+9]=(E-w)*P,s[l+10]=(1-(v+_))*P,s[l+11]=0,s[l+12]=i.x,s[l+13]=i.y,s[l+14]=i.z,s[l+15]=1,n.matricesTexture.enqueueUpdate(o),(e=n.bvh)==null||e.move(o)}updateMatrixPosition(){var e;const n=this.owner,i=this.position,r=n.matricesTexture._data,a=this.id,s=a*16;r[s+12]=i.x,r[s+13]=i.y,r[s+14]=i.z,n.matricesTexture.enqueueUpdate(a),(e=n.bvh)==null||e.move(a)}getUniform(e,n){return this.owner.getUniformAt(this.id,e,n)}updateBones(e=!0,n){this.owner.setBonesAt(this.id,e,n)}setUniform(e,n){this.owner.setUniformAt(this.id,e,n)}copyTo(e){e.position.copy(this.position),e.scale.copy(this.scale),e.quaternion.copy(this.quaternion),this.rotation&&e.rotation.copy(this.rotation)}applyMatrix4(e){return this.matrix.premultiply(e).decompose(this.position,this.quaternion,this.scale),this}applyQuaternion(e){return this.quaternion.premultiply(e),this}rotateOnAxis(e,n){return mM.setFromAxisAngle(e,n),this.quaternion.multiply(mM),this}rotateOnWorldAxis(e,n){return mM.setFromAxisAngle(e,n),this.quaternion.premultiply(mM),this}rotateX(e){return this.rotateOnAxis(e7,e)}rotateY(e){return this.rotateOnAxis(t7,e)}rotateZ(e){return this.rotateOnAxis(n7,e)}translateOnAxis(e,n){return QG.copy(e).applyQuaternion(this.quaternion),this.position.add(QG.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(e7,e)}translateY(e){return this.translateOnAxis(t7,e)}translateZ(e){return this.translateOnAxis(n7,e)}remove(){return this.owner.removeInstances(this.id),this}}const mM=new Hn,QG=new Y,e7=new Y(1,0,0),t7=new Y(0,1,0),n7=new Y(0,0,1);class QBe{constructor(e,n=0,i=!1,r=!0){this.nodesMap=new Map,this.LODsMap=new Map,this._geoBoundingSphere=null,this._sphereTarget=null,this.target=e,this.accurateCulling=r,this._margin=n;const a=e._geometry;if(a.boundingBox||a.computeBoundingBox(),this.geoBoundingBox=a.boundingBox,i){a.boundingSphere||a.computeBoundingSphere();const s=a.boundingSphere.center;s.x===0&&s.y===0&&s.z===0?(this._geoBoundingSphere=a.boundingSphere,this._sphereTarget={centerX:0,centerY:0,centerZ:0,maxScale:0}):(console.warn('"getBoxFromSphere" is ignored because geometry is not centered.'),i=!1)}this.bvh=new ZBe(new YBe,oF),this._origin=new Float32Array(3),this._dir=new Float32Array(3),this._cameraPos=new Float32Array(3),this._getBoxFromSphere=i}create(){const e=this.target._instancesCount,n=this.target._instancesArrayCount,i=new Array(e),r=new Uint32Array(e);let a=0;this.clear();for(let s=0;s<n;s++)this.target.getActiveAt(s)&&(i[a]=this.getBox(s,new Float32Array(6)),r[a]=s,a++);this.bvh.createFromArray(r,i,s=>{this.nodesMap.set(s.object,s)},this._margin)}insert(e){const n=this.bvh.insert(e,this.getBox(e,new Float32Array(6)),this._margin);this.nodesMap.set(e,n)}insertRange(e){const n=e.length,i=new Array(n);for(let r=0;r<n;r++)i[r]=this.getBox(e[r],new Float32Array(6));this.bvh.insertRange(e,i,this._margin,r=>{this.nodesMap.set(r.object,r)})}move(e){const n=this.nodesMap.get(e);n&&(this.getBox(e,n.box),this.bvh.move(n,this._margin))}delete(e){const n=this.nodesMap.get(e);n&&(this.bvh.delete(n),this.nodesMap.delete(e))}clear(){this.bvh.clear(),this.nodesMap.clear()}frustumCulling(e,n){this._margin>0&&this.accurateCulling?this.bvh.frustumCulling(e.elements,(i,r,a)=>{r.isIntersectedMargin(i.box,a,this._margin)&&n(i)}):this.bvh.frustumCulling(e.elements,n)}frustumCullingLOD(e,n,i,r){this.LODsMap.has(i)||this.LODsMap.set(i,new Float32Array(i.length));const a=this.LODsMap.get(i);for(let o=0;o<i.length;o++)a[o]=i[o].distance;const s=this._cameraPos;s[0]=n.x,s[1]=n.y,s[2]=n.z,this._margin>0&&this.accurateCulling?this.bvh.frustumCullingLOD(e.elements,s,a,(o,l,c,u)=>{c.isIntersectedMargin(o.box,u,this._margin)&&r(o,l)}):this.bvh.frustumCullingLOD(e.elements,s,a,r)}raycast(e,n){const i=e.ray,r=this._origin,a=this._dir;JG(i.origin,r),JG(i.direction,a),this.bvh.rayIntersections(a,r,n,e.near,e.far)}intersectBox(e,n){this._boxArray||(this._boxArray=new Float32Array(6));const i=this._boxArray;return ZG(e,i),this.bvh.intersectsBox(i,n)}getBox(e,n){if(this._getBoxFromSphere){const i=this.target.matricesTexture._data,{centerX:r,centerY:a,centerZ:s,maxScale:o}=this.getSphereFromMatrix_centeredGeometry(e,i,this._sphereTarget),l=this._geoBoundingSphere.radius*o;n[0]=r-l,n[1]=r+l,n[2]=a-l,n[3]=a+l,n[4]=s-l,n[5]=s+l}else i7.copy(this.geoBoundingBox).applyMatrix4(this.target.getMatrixAt(e)),ZG(i7,n);return n}getSphereFromMatrix_centeredGeometry(e,n,i){const r=e*16,a=n[r+0],s=n[r+1],o=n[r+2],l=n[r+4],c=n[r+5],u=n[r+6],f=n[r+8],h=n[r+9],d=n[r+10],m=a*a+s*s+o*o,y=l*l+c*c+u*u,v=f*f+h*h+d*d;return i.maxScale=Math.sqrt(Math.max(m,y,v)),i.centerX=n[r+12],i.centerY=n[r+13],i.centerZ=n[r+14],i}}const i7=new vi;class eFe extends mZ{constructor(e,n,i,r,a,s=1){const o=e.createBuffer();super(o,n,i,r,a.length/i),this.isGLInstancedBufferAttribute=!0,this._needsUpdate=!1,this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s,this.array=a,this._cacheArray=a,e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,a,e.DYNAMIC_DRAW)}update(e,n){if(!this._needsUpdate||n===0)return;const i=e.getContext();i.bindBuffer(i.ARRAY_BUFFER,this.buffer),this.array===this._cacheArray?i.bufferSubData(i.ARRAY_BUFFER,0,this.array,0,n):(i.bufferData(i.ARRAY_BUFFER,this.array,i.DYNAMIC_DRAW),this._cacheArray=this.array),this._needsUpdate=!1}clone(){return this}}function rne(t,e){return Math.max(e,Math.ceil(Math.sqrt(t/e))*e)}function tFe(t,e,n,i){e===3&&(console.warn('"channels" cannot be 3. Set to 4. More info: https://github.com/mrdoob/three.js/pull/23228'),e=4);const r=rne(i,n),a=new t(r*r*e),s=t.name.includes("Float"),o=t.name.includes("Uint"),l=s?vr:o?Tc:fv;let c;switch(e){case 1:c=s?Nh:hv;break;case 2:c=s?b2:lS;break;case 4:c=s?Jr:dv;break}return{array:a,size:r,type:l,format:c}}let tC=class extends ws{constructor(e,n,i,r,a,s){n===3&&(n=4);const{array:o,format:l,size:c,type:u}=tFe(e,n,i,r);super(o,c,c,l,u),this.partialUpdate=!0,this.maxUpdateCalls=1/0,this._utils=null,this._needsUpdate=!1,this._lastWidth=null,this._data=o,this._channels=n,this._pixelsPerInstance=i,this._stride=i*n,this._rowToUpdate=new Array(c),this._uniformMap=a,this._fetchUniformsInFragmentShader=s,this.needsUpdate=!0}resize(e){const n=rne(e,this._pixelsPerInstance);if(n===this.image.width)return;const i=this._data,r=this._channels;this._rowToUpdate.length=n;const a=i.constructor,s=new a(n*n*r),o=Math.min(i.length,s.length);s.set(new a(i.buffer,0,o)),this.dispose(),this.image={data:s,height:n,width:n},this._data=s}enqueueUpdate(e){if(this._needsUpdate=!0,!this.partialUpdate)return;const n=this.image.width/this._pixelsPerInstance,i=Math.floor(e/n);this._rowToUpdate[i]=!0}update(e){const n=e.properties.get(this),i=this.version>0&&n.__version!==this.version,r=this._lastWidth!==null&&this._lastWidth!==this.image.width;if(!this._needsUpdate||!n.__webglTexture||i||r){this._lastWidth=this.image.width,this._needsUpdate=!1;return}if(this._needsUpdate=!1,!this.partialUpdate){this.needsUpdate=!0;return}const a=this.getUpdateRowsInfo();a.length!==0&&(a.length>this.maxUpdateCalls?this.needsUpdate=!0:this.updateRows(n,e,a),this._rowToUpdate.fill(!1))}getUpdateRowsInfo(){const e=this._rowToUpdate,n=[];for(let i=0,r=e.length;i<r;i++)if(e[i]){const a=i;for(;i<r&&e[i];i++);n.push({row:a,count:i-a})}return n}updateRows(e,n,i){const r=n.state,a=n.getContext();this._utils??(this._utils=new rB(a,n.extensions,n.capabilities));const s=this._utils.convert(this.format),o=this._utils.convert(this.type),{data:l,width:c}=this.image,u=this._channels;r.bindTexture(a.TEXTURE_2D,e.__webglTexture);const f=oi.getPrimaries(oi.workingColorSpace),h=this.colorSpace===au?null:oi.getPrimaries(this.colorSpace),d=this.colorSpace===au||f===h?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,this.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,this.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);for(const{count:m,row:y}of i)a.texSubImage2D(a.TEXTURE_2D,0,0,y,c,m,s,o,l,y*c*u);this.onUpdate&&this.onUpdate(this)}setUniformAt(e,n,i){const{offset:r,size:a}=this._uniformMap.get(n),s=this._stride;a===1?this._data[e*s+r]=i:i.toArray(this._data,e*s+r)}getUniformAt(e,n,i){const{offset:r,size:a}=this._uniformMap.get(n),s=this._stride;return a===1?this._data[e*s+r]:i.fromArray(this._data,e*s+r)}getUniformsGLSL(e,n,i){const r=this.getUniformsVertexGLSL(e,n,i),a=this.getUniformsFragmentGLSL(e,n,i);return{vertex:r,fragment:a}}getUniformsVertexGLSL(e,n,i){if(this._fetchUniformsInFragmentShader)return`
        flat varying ${i} ez_v${n}; 
        void main() {
          ez_v${n} = ${n};`;const r=this.texelsFetchGLSL(e,n),a=this.getFromTexelsGLSL(),{assignVarying:s,declareVarying:o}=this.getVarying();return`
      uniform highp sampler2D ${e};  
      ${o}
      void main() {
        ${r}
        ${a}
        ${s}`}getUniformsFragmentGLSL(e,n,i){if(!this._fetchUniformsInFragmentShader){const{declareVarying:s,getVarying:o}=this.getVarying();return`
      ${s}
      void main() {
        ${o}`}const r=this.texelsFetchGLSL(e,`ez_v${n}`),a=this.getFromTexelsGLSL();return`
      uniform highp sampler2D ${e};  
      flat varying ${i} ez_v${n};
      void main() {
        ${r}
        ${a}`}texelsFetchGLSL(e,n){const i=this._pixelsPerInstance;let r=`
      int size = textureSize(${e}, 0).x;
      int j = int(${n}) * ${i};
      int x = j % size;
      int y = j / size;
    `;for(let a=0;a<i;a++)r+=`vec4 ez_texel${a} = texelFetch(${e}, ivec2(x + ${a}, y), 0);
`;return r}getFromTexelsGLSL(){const e=this._uniformMap;let n="";for(const[i,{type:r,offset:a,size:s}]of e){const o=Math.floor(a/this._channels);if(r==="mat3")n+=`mat3 ${i} = mat3(ez_texel${o}.rgb, vec3(ez_texel${o}.a, ez_texel${o+1}.rg), vec3(ez_texel${o+1}.ba, ez_texel${o+2}.r));
`;else if(r==="mat4")n+=`mat4 ${i} = mat4(ez_texel${o}, ez_texel${o+1}, ez_texel${o+2}, ez_texel${o+3});
`;else{const l=this.getUniformComponents(a,s);n+=`${r} ${i} = ez_texel${o}.${l};
`}}return n}getVarying(){const e=this._uniformMap;let n="",i="",r="";for(const[a,{type:s}]of e)n+=`flat varying ${s} ez_v${a};
`,i+=`ez_v${a} = ${a};
`,r+=`${s} ${a} = ez_v${a};
`;return{declareVarying:n,assignVarying:i,getVarying:r}}getUniformComponents(e,n){const i=e%this._channels;let r="";for(let a=0;a<n;a++)r+=nFe[i+a];return r}copy(e){return super.copy(e),this.partialUpdate=e.partialUpdate,this.maxUpdateCalls=e.maxUpdateCalls,this._channels=e._channels,this._pixelsPerInstance=e._pixelsPerInstance,this._stride=e._stride,this._rowToUpdate=e._rowToUpdate,this._uniformMap=e._uniformMap,this._fetchUniformsInFragmentShader=e._fetchUniformsInFragmentShader,this}};const nFe=["r","g","b","a"];let qn=class extends fi{constructor(e,n,i={},r){if(!e)throw new Error('"geometry" is mandatory.');if(!n)throw new Error('"material" is mandatory.');const{allowsEuler:a,renderer:s,createEntities:o}=i;super(e,null),this.type="InstancedMesh2",this.isInstancedMesh2=!0,this.instances=null,this.instanceIndex=null,this.colorsTexture=null,this.morphTexture=null,this.boneTexture=null,this.uniformsTexture=null,this.boundingBox=null,this.boundingSphere=null,this.bvh=null,this.customSort=null,this.raycastOnlyFrustum=!1,this.LODinfo=null,this.autoUpdate=!0,this.bindMode=f_,this.bindMatrix=null,this.bindMatrixInverse=null,this.skeleton=null,this.onFrustumEnter=null,this._renderer=null,this._instancesCount=0,this._instancesArrayCount=0,this._perObjectFrustumCulled=!0,this._sortObjects=!1,this._indexArrayNeedsUpdate=!1,this._useOpacity=!1,this._currentMaterial=null,this._customProgramCacheKeyBase=null,this._onBeforeCompileBase=null,this._propertiesGetBase=null,this._propertiesGetMap=new WeakMap,this._properties=new WeakMap,this._freeIds=[],this.isInstancedMesh=!0,this.instanceMatrix=new Mh(new Float32Array(0),16),this.instanceColor=null,this._customProgramCacheKey=()=>`ezInstancedMesh2_${this.id}_${!!this.colorsTexture}_${this._useOpacity}_${!!this.boneTexture}_${!!this.uniformsTexture}_${this._customProgramCacheKeyBase.call(this._currentMaterial)}`,this._onBeforeCompile=(c,u)=>{if(this._onBeforeCompileBase&&this._onBeforeCompileBase.call(this._currentMaterial,c,u),c.instancing=!1,c.defines??(c.defines={}),c.defines.USE_INSTANCING_INDIRECT="",c.uniforms.matricesTexture={value:this.matricesTexture},this.uniformsTexture){c.uniforms.uniformsTexture={value:this.uniformsTexture};const{vertex:f,fragment:h}=this.uniformsTexture.getUniformsGLSL("uniformsTexture","instanceIndex","uint");c.vertexShader=c.vertexShader.replace("void main() {",f),c.fragmentShader=c.fragmentShader.replace("void main() {",h)}this.colorsTexture&&c.fragmentShader.includes("#include <color_pars_fragment>")&&(c.defines.USE_INSTANCING_COLOR_INDIRECT="",c.uniforms.colorsTexture={value:this.colorsTexture},c.vertexShader=c.vertexShader.replace("<color_vertex>","<instanced_color_vertex>"),c.vertexColors&&(c.defines.USE_VERTEX_COLOR=""),this._useOpacity?c.defines.USE_COLOR_ALPHA="":c.defines.USE_COLOR=""),this.boneTexture&&(c.defines.USE_SKINNING="",c.defines.USE_INSTANCING_SKINNING="",c.uniforms.bindMatrix={value:this.bindMatrix},c.uniforms.bindMatrixInverse={value:this.bindMatrixInverse},c.uniforms.bonesPerInstance={value:this.skeleton.bones.length},c.uniforms.boneTexture={value:this.boneTexture})};const l=i.capacity>0?i.capacity:iFe;this._renderer=s,this._capacity=l,this._parentLOD=r,this._geometry=e,this.material=n,this._allowsEuler=a??!1,this._tempInstance=new ine(this,-1,a),this.availabilityArray=r?.availabilityArray??new Array(l*2),this._createEntities=o,this.initIndexAttribute(),this.initMatricesTexture()}get capacity(){return this._capacity}get instancesCount(){return this._instancesCount}get perObjectFrustumCulled(){return this._perObjectFrustumCulled}set perObjectFrustumCulled(e){this._perObjectFrustumCulled=e,this._indexArrayNeedsUpdate=!0}get sortObjects(){return this._sortObjects}set sortObjects(e){this._sortObjects=e,this._indexArrayNeedsUpdate=!0}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.patchGeometry(e)}onBeforeShadow(e,n,i,r,a,s,o){var l,c,u;this.patchMaterial(e,s),!(!this.instanceIndex||o&&!this.isFirstGroup(o.materialIndex))&&(this.autoUpdate&&this.performFrustumCulling(r,i),this.matricesTexture.update(e),(l=this.colorsTexture)==null||l.update(e),(c=this.uniformsTexture)==null||c.update(e),(u=this.boneTexture)==null||u.update(e))}onBeforeRender(e,n,i,r,a,s){var o,l,c;if(this.patchMaterial(e,a),!this.instanceIndex){this._renderer=e;return}s&&!this.isFirstGroup(s.materialIndex)||(this.autoUpdate&&this.performFrustumCulling(i),this.matricesTexture.update(e),(o=this.colorsTexture)==null||o.update(e),(l=this.uniformsTexture)==null||l.update(e),(c=this.boneTexture)==null||c.update(e))}onAfterShadow(e,n,i,r,a,s,o){this.unpatchMaterial(e,s)}onAfterRender(e,n,i,r,a,s){this.unpatchMaterial(e,a),!(this.instanceIndex||s&&!this.isLastGroup(s.materialIndex))&&this.initIndexAttribute()}isFirstGroup(e){const n=this.material;for(let i=0;i<=e;i++)if(n[i].visible)return i===e}isLastGroup(e){const n=this.material;for(let i=n.length-1;i>=e;i--)if(n[i].visible)return i===e}initIndexAttribute(){if(!this._renderer){this.count=0;return}const e=this._renderer.getContext(),n=this._capacity,i=new Uint32Array(n);for(let r=0;r<n;r++)i[r]=r;this.instanceIndex=new eFe(e,e.UNSIGNED_INT,1,4,i),this._geometry.setAttribute("instanceIndex",this.instanceIndex)}initMatricesTexture(){this._parentLOD||(this.matricesTexture=new tC(Float32Array,4,4,this._capacity))}initColorsTexture(){this._parentLOD||(this.colorsTexture=new tC(Float32Array,4,1,this._capacity),this.colorsTexture.colorSpace=oi.workingColorSpace,this.colorsTexture._data.fill(1),this.materialsNeedsUpdate())}materialsNeedsUpdate(){if(this.material.isMaterial){this.material.needsUpdate=!0;return}for(const e of this.material)e.needsUpdate=!0}patchGeometry(e){const n=e.getAttribute("instanceIndex");if(n){if(n===this.instanceIndex)return;console.warn("The geometry has been cloned because it was already used."),e=e.clone(),e.deleteAttribute("instanceIndex")}this.instanceIndex&&e.setAttribute("instanceIndex",this.instanceIndex)}patchMaterial(e,n){this._currentMaterial=n,this._customProgramCacheKeyBase=n.customProgramCacheKey,this._onBeforeCompileBase=n.onBeforeCompile,n.customProgramCacheKey=this._customProgramCacheKey,n.onBeforeCompile=this._onBeforeCompile;const i=e.properties;if(!this._properties.has(n)){const r={};this._properties.set(n,r);const a=this._propertiesGetBase=i.get;this._propertiesGetMap.set(n,s=>{if(s===n){if(n.isMeshDistanceMaterial){const o=a(s);r.light=o.light}return r}return a(s)})}i.get=this._propertiesGetMap.get(n)}unpatchMaterial(e,n){this._currentMaterial=null,e.properties.get=this._propertiesGetBase,n.onBeforeCompile=this._onBeforeCompileBase,n.customProgramCacheKey=this._customProgramCacheKeyBase,this._onBeforeCompileBase=null,this._customProgramCacheKeyBase=null}computeBVH(e={}){this.bvh||(this.bvh=new QBe(this,e.margin,e.getBBoxFromBSphere,e.accurateCulling)),this.bvh.clear(),this.bvh.create()}disposeBVH(){this.bvh=null}setMatrixAt(e,n){var i;if(n.toArray(this.matricesTexture._data,e*16),this.instances){const r=this.instances[e];n.decompose(r.position,r.quaternion,r.scale)}this.matricesTexture.enqueueUpdate(e),(i=this.bvh)==null||i.move(e)}getMatrixAt(e,n=rFe){return n.fromArray(this.matricesTexture._data,e*16)}getPositionAt(e,n=aFe){const i=e*16,r=this.matricesTexture._data;return n.x=r[i+12],n.y=r[i+13],n.z=r[i+14],n}getPositionAndMaxScaleOnAxisAt(e,n){const i=e*16,r=this.matricesTexture._data,a=r[i+0],s=r[i+1],o=r[i+2],l=a*a+s*s+o*o,c=r[i+4],u=r[i+5],f=r[i+6],h=c*c+u*u+f*f,d=r[i+8],m=r[i+9],y=r[i+10],v=d*d+m*m+y*y;return n.x=r[i+12],n.y=r[i+13],n.z=r[i+14],Math.sqrt(Math.max(l,h,v))}applyMatrixAtToSphere(e,n,i,r){const a=e*16,s=this.matricesTexture._data,o=s[a+0],l=s[a+1],c=s[a+2],u=s[a+3],f=s[a+4],h=s[a+5],d=s[a+6],m=s[a+7],y=s[a+8],v=s[a+9],g=s[a+10],x=s[a+11],_=s[a+12],E=s[a+13],T=s[a+14],w=s[a+15],A=n.center,C=i.x,D=i.y,k=i.z,P=1/(u*C+m*D+x*k+w);A.x=(o*C+f*D+y*k+_)*P,A.y=(l*C+h*D+v*k+E)*P,A.z=(c*C+d*D+g*k+T)*P;const B=o*o+l*l+c*c,H=f*f+h*h+d*d,G=y*y+v*v+g*g;n.radius=r*Math.sqrt(Math.max(B,H,G))}setVisibilityAt(e,n){this.availabilityArray[e*2]=n,this._indexArrayNeedsUpdate=!0}getVisibilityAt(e){return this.availabilityArray[e*2]}setActiveAt(e,n){this.availabilityArray[e*2+1]=n,this._indexArrayNeedsUpdate=!0}getActiveAt(e){return this.availabilityArray[e*2+1]}getActiveAndVisibilityAt(e){const n=e*2,i=this.availabilityArray;return i[n]&&i[n+1]}setActiveAndVisibilityAt(e,n){const i=e*2,r=this.availabilityArray;r[i]=n,r[i+1]=n,this._indexArrayNeedsUpdate=!0}setColorAt(e,n){this.colorsTexture===null&&this.initColorsTexture(),n.isColor?n.toArray(this.colorsTexture._data,e*4):s7.set(n).toArray(this.colorsTexture._data,e*4),this.colorsTexture.enqueueUpdate(e)}getColorAt(e,n=s7){return n.fromArray(this.colorsTexture._data,e*4)}setOpacityAt(e,n){this._useOpacity||(this.colorsTexture===null?this.initColorsTexture():this.materialsNeedsUpdate(),this._useOpacity=!0),this.colorsTexture._data[e*4+3]=n,this.colorsTexture.enqueueUpdate(e)}getOpacityAt(e){return this._useOpacity?this.colorsTexture._data[e*4+3]:1}copyTo(e,n){this.getMatrixAt(e,n.matrix).decompose(n.position,n.quaternion,n.scale)}computeBoundingBox(){const e=this._geometry,n=this._instancesArrayCount;this.boundingBox??(this.boundingBox=new vi),e.boundingBox===null&&e.computeBoundingBox();const i=e.boundingBox,r=this.boundingBox;r.makeEmpty();for(let a=0;a<n;a++)this.getActiveAt(a)&&(r7.copy(i).applyMatrix4(this.getMatrixAt(a)),r.union(r7))}computeBoundingSphere(){const e=this._geometry,n=this._instancesArrayCount;this.boundingSphere??(this.boundingSphere=new xr),e.boundingSphere===null&&e.computeBoundingSphere();const i=e.boundingSphere,r=this.boundingSphere;r.makeEmpty();for(let a=0;a<n;a++)this.getActiveAt(a)&&(a7.copy(i).applyMatrix4(this.getMatrixAt(a)),r.union(a7))}clone(e){const n={capacity:this._capacity,renderer:this._renderer,allowsEuler:this._allowsEuler,createEntities:this._createEntities};return new this.constructor(this.geometry,this.material,n).copy(this,e)}copy(e,n){return super.copy(e,n),this.count=e._capacity,this._instancesCount=e._instancesCount,this._instancesArrayCount=e._instancesArrayCount,this._capacity=e._capacity,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this.matricesTexture=e.matricesTexture.clone(),this.matricesTexture.image.data=this.matricesTexture.image.data.slice(),e.colorsTexture!==null&&(this.colorsTexture=e.colorsTexture.clone(),this.colorsTexture.image.data=this.colorsTexture.image.data.slice()),e.uniformsTexture!==null&&(this.uniformsTexture=e.uniformsTexture.clone(),this.uniformsTexture.image.data=this.uniformsTexture.image.data.slice()),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone(),this.morphTexture.image.data=this.morphTexture.image.data.slice()),e.boneTexture!==null&&(this.boneTexture=e.boneTexture.clone(),this.boneTexture.image.data=this.boneTexture.image.data.slice()),this}dispose(){var e,n,i,r;this.dispatchEvent({type:"dispose"}),this.matricesTexture.dispose(),(e=this.colorsTexture)==null||e.dispose(),(n=this.morphTexture)==null||n.dispose(),(i=this.boneTexture)==null||i.dispose(),(r=this.uniformsTexture)==null||r.dispose()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMatrixInverse&&(this.bindMode===f_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gU?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("Unrecognized bindMode: "+this.bindMode))}};const iFe=1e3,r7=new vi,a7=new xr,rFe=new Ct,s7=new Ut,aFe=new Y;qn.prototype.resizeBuffers=function(t){var e;const n=this._capacity;this._capacity=t;const i=Math.min(t,n);if(this.instanceIndex){const r=new Uint32Array(t);r.set(new Uint32Array(this.instanceIndex.array.buffer,0,i)),this.instanceIndex.array=r}if(this.LODinfo){for(const r of this.LODinfo.objects)if(r._capacity=t,r.instanceIndex){const a=new Uint32Array(t);a.set(new Uint32Array(r.instanceIndex.array.buffer,0,i)),r.instanceIndex.array=a}}if(this.availabilityArray.length=t*2,this.matricesTexture.resize(t),this.colorsTexture&&(this.colorsTexture.resize(t),t>n&&this.colorsTexture._data.fill(1,n*4)),this.morphTexture){const r=this.morphTexture.image.data,a=r.length/n;this.morphTexture.dispose(),this.morphTexture=new ws(new Float32Array(a*t),a,t,Nh,vr),this.morphTexture.image.data.set(r)}return(e=this.uniformsTexture)==null||e.resize(t),this};qn.prototype.setInstancesArrayCount=function(t){if(t<this._instancesArrayCount){const n=this.bvh;if(n)for(let i=this._instancesArrayCount-1;i>=t;i--)this.getActiveAt(i)&&n.delete(i);this._instancesArrayCount=t;return}if(t>this._capacity){let n=this._capacity+(this._capacity>>1)+512;for(;n<t;)n+=(n>>1)+512;this.resizeBuffers(n)}const e=this._instancesArrayCount;this._instancesArrayCount=t,this._createEntities&&this.createEntities(e)};function ane(t,e){return t.depth-e.depth}function sne(t,e){return e.depth-t.depth}class sFe{constructor(){this.array=[],this.pool=[]}push(e,n){const i=this.pool,r=this.array,a=r.length;a>=i.length&&i.push({depth:null,index:null,depthSort:null});const s=i[a];s.depth=e,s.index=n,r.push(s)}reset(){this.array.length=0}}const nC=new kg,du=new sFe,bg=new Ct,Q0=new Ct,vR=new Y,RS=new Y,ey=new Y,oFe=new Y,ru=new xr;qn.prototype.performFrustumCulling=function(t,e=t){if(!this._parentLOD&&this._instancesArrayCount===0){this.count=0;return}const n=this.LODinfo,i=t!==e;let r;if(n){r=i?n.shadowRender??n.render:n.render;for(const a of n.objects)a.count=0}r?.levels.length>0?this.frustumCullingLOD(r,t,e):this._parentLOD||this.frustumCulling(t),this.instanceIndex.update(this._renderer,this.count)};qn.prototype.frustumCulling=function(t){var e;const n=this._sortObjects,i=this._perObjectFrustumCulled,r=this.instanceIndex.array;if(this.instanceIndex._needsUpdate=!0,!i&&!n){this.updateIndexArray();return}if(n&&(Q0.copy(this.matrixWorld).invert(),RS.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Q0),vR.set(0,0,-1).transformDirection(t.matrixWorld).transformDirection(Q0)),i?(bg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse).multiply(this.matrixWorld),this.bvh?this.BVHCulling(t):this.linearCulling(t)):this.updateRenderList(),n){const a=this.customSort;a===null?du.array.sort((e=this.material)!=null&&e.transparent?sne:ane):a(du.array);const s=du.array,o=s.length;for(let l=0;l<o;l++)r[l]=s[l].index;this.count=o,du.reset()}};qn.prototype.updateIndexArray=function(){if(!this._indexArrayNeedsUpdate)return;const t=this.instanceIndex.array,e=this._instancesArrayCount;let n=0;for(let i=0;i<e;i++)this.getActiveAndVisibilityAt(i)&&(t[n++]=i);this.count=n,this._indexArrayNeedsUpdate=!1};qn.prototype.updateRenderList=function(){const t=this._instancesArrayCount;for(let e=0;e<t;e++)if(this.getActiveAndVisibilityAt(e)){const n=this.getPositionAt(e).sub(RS).dot(vR);du.push(n,e)}};qn.prototype.BVHCulling=function(t){const e=this.instanceIndex.array,n=this._instancesArrayCount,i=this._sortObjects,r=this.onFrustumEnter;let a=0;this.bvh.frustumCulling(bg,s=>{const o=s.object;if(o<n&&this.getVisibilityAt(o)&&(!r||r(o,t)))if(i){const l=this.getPositionAt(o).sub(RS).dot(vR);du.push(l,o)}else e[a++]=o}),this.count=a};qn.prototype.linearCulling=function(t){const e=this.instanceIndex.array;this.geometry.boundingSphere||this.geometry.computeBoundingSphere();const n=this._geometry.boundingSphere,i=n.radius,r=n.center,a=this._instancesArrayCount,s=r.x===0&&r.y===0&&r.z===0,o=this._sortObjects,l=this.onFrustumEnter;let c=0;nC.setFromProjectionMatrix(bg);for(let u=0;u<a;u++)if(this.getActiveAndVisibilityAt(u)){if(s){const f=this.getPositionAndMaxScaleOnAxisAt(u,ru.center);ru.radius=i*f}else this.applyMatrixAtToSphere(u,ru,r,i);if(nC.intersectsSphere(ru)&&(!l||l(u,t)))if(o){const f=oFe.subVectors(ru.center,RS).dot(vR);du.push(f,u)}else e[c++]=u}this.count=c};qn.prototype.frustumCullingLOD=function(t,e,n){var i,r;const{count:a,levels:s}=t,o=e===n&&this._sortObjects;for(let c=0;c<s.length;c++)a[c]=0,s[c].object.instanceIndex&&(s[c].object.instanceIndex._needsUpdate=!0);bg.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse).multiply(this.matrixWorld),Q0.copy(this.matrixWorld).invert(),RS.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Q0),ey.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Q0);const l=t.levels.map(c=>c.object.instanceIndex.array);if(this.bvh?this.BVHCullingLOD(t,l,o,e,n):this.linearCullingLOD(t,l,o,e,n),o){const c=this.customSort,u=du.array;let f=0,h=s[1].distance;c===null?u.sort((i=s[0].object.material)!=null&&i.transparent?sne:ane):c(u);for(let d=0,m=u.length;d<m;d++){const y=u[d];y.depth>h&&(f++,h=((r=s[f+1])==null?void 0:r.distance)??1/0),l[f][a[f]++]=y.index}du.reset()}for(let c=0;c<s.length;c++){const u=s[c].object;u.count=a[c]}};qn.prototype.BVHCullingLOD=function(t,e,n,i,r){const{count:a,levels:s}=t,o=this._instancesArrayCount,l=this.onFrustumEnter;n?this.bvh.frustumCulling(bg,c=>{const u=c.object;if(u<o&&this.getVisibilityAt(u)&&(!l||l(u,i,r))){const f=this.getPositionAt(u).distanceToSquared(ey);du.push(f,u)}}):this.bvh.frustumCullingLOD(bg,ey,s,(c,u)=>{const f=c.object;if(f<o&&this.getVisibilityAt(f)){if(u===null){const h=this.getPositionAt(f).distanceToSquared(ey);u=this.getObjectLODIndexForDistance(s,h)}(!l||l(f,i,r,u))&&(e[u][a[u]++]=f)}})};qn.prototype.linearCullingLOD=function(t,e,n,i,r){const{count:a,levels:s}=t;this.geometry.boundingSphere||this.geometry.computeBoundingSphere();const o=this._geometry.boundingSphere,l=o.radius,c=o.center,u=this._instancesArrayCount,f=c.x===0&&c.y===0&&c.z===0,h=this.onFrustumEnter;nC.setFromProjectionMatrix(bg);for(let d=0;d<u;d++)if(this.getActiveAndVisibilityAt(d)){if(f){const m=this.getPositionAndMaxScaleOnAxisAt(d,ru.center);ru.radius=l*m}else this.applyMatrixAtToSphere(d,ru,c,l);if(nC.intersectsSphere(ru))if(n){if(!h||h(d,i,r))continue;const m=ru.center.distanceToSquared(ey);du.push(m,d)}else{const m=ru.center.distanceToSquared(ey),y=this.getObjectLODIndexForDistance(s,m);(!h||h(d,i,r,y))&&(e[y][a[y]++]=d)}}};qn.prototype.clearTempInstance=function(t){const e=this._tempInstance;return e.id=t,this.clearInstance(e)};qn.prototype.clearTempInstancePosition=function(t){const e=this._tempInstance;return e.id=t,e.position.set(0,0,0),e};qn.prototype.clearInstance=function(t){return t.position.set(0,0,0),t.scale.set(1,1,1),t.quaternion.identity(),t};qn.prototype.updateInstances=function(t){const e=this._instancesArrayCount,n=this.instances;for(let i=0;i<e;i++){if(!this.getActiveAt(i))continue;const r=n?n[i]:this.clearTempInstance(i);t(r,i),r.updateMatrix()}return this};qn.prototype.updateInstancesPosition=function(t){const e=this._instancesArrayCount,n=this.instances;for(let i=0;i<e;i++){if(!this.getActiveAt(i))continue;const r=n?n[i]:this.clearTempInstancePosition(i);t(r,i),r.updateMatrixPosition()}return this};qn.prototype.createEntities=function(t){const e=this._instancesArrayCount;if(!this.instances)this.instances=new Array(e);else if(this.instances.length<e)this.instances.length=e;else return this;const n=this.instances;for(let i=t;i<e;i++)n[i]||(n[i]=new ine(this,i,this._allowsEuler));return this};qn.prototype.addInstances=function(t,e){!e&&this.bvh&&console.warn("InstancedMesh2: if `computeBVH()` has already been called, it is better to valorize the instances in the `onCreation` callback for better performance.");const n=this._freeIds;if(n.length>0){let a=-1;const s=Math.min(n.length,t),o=n.length-s;for(let l=n.length-1;l>=o;l--){const c=n[l];c>a&&(a=c),this.addInstance(c,e)}n.length-=s,t-=s,this._instancesArrayCount=Math.max(a+1,this._instancesArrayCount)}const i=this._instancesArrayCount,r=i+t;this.setInstancesArrayCount(r);for(let a=i;a<r;a++)this.addInstance(a,e);return this};qn.prototype.addInstance=function(t,e){var n;this._instancesCount++,this.setActiveAndVisibilityAt(t,!0);const i=this.instances?this.clearInstance(this.instances[t]):this.clearTempInstance(t);e?(e(i,t),i.updateMatrix()):i.setMatrixIdentity(),(n=this.bvh)==null||n.insert(t)};qn.prototype.removeInstances=function(...t){const e=this._freeIds,n=this.bvh;for(const i of t)i<this._instancesArrayCount&&this.getActiveAt(i)&&(this.setActiveAt(i,!1),e.push(i),n?.delete(i),this._instancesCount--);for(let i=this._instancesArrayCount-1;i>=0&&!this.getActiveAt(i);i--)this._instancesArrayCount--;return this};qn.prototype.clearInstances=function(){var t;if(this._instancesCount=0,this._instancesArrayCount=0,this._freeIds.length=0,(t=this.bvh)==null||t.clear(),this.LODinfo)for(const e of this.LODinfo.objects)e.count=0;return this};qn.prototype.getObjectLODIndexForDistance=function(t,e){for(let n=t.length-1;n>0;n--){const i=t[n],r=i.distance-i.distance*i.hysteresis;if(e>=r)return n}return 0};qn.prototype.setFirstLODDistance=function(t=0,e=0){if(this._parentLOD)throw new Error("Cannot create LOD for this InstancedMesh2.");return this.LODinfo||(this.LODinfo={render:null,shadowRender:null,objects:[this]}),this.LODinfo.render||(this.LODinfo.render={levels:[{distance:t,hysteresis:e,object:this}],count:[0]}),this};qn.prototype.addLOD=function(t,e,n=0,i=0){var r;if(this._parentLOD)throw new Error("Cannot create LOD for this InstancedMesh2.");if(!((r=this.LODinfo)!=null&&r.render)&&n===0)throw new Error('Cannot set distance to 0 for the first LOD. Use "setFirstLODDistance" before use "addLOD".');return this.setFirstLODDistance(0,i),this.addLevel(this.LODinfo.render,t,e,n,i),this};qn.prototype.addShadowLOD=function(t,e=0,n=0){if(this._parentLOD)throw new Error("Cannot create LOD for this InstancedMesh2.");this.LODinfo||(this.LODinfo={render:null,shadowRender:null,objects:[this]}),this.LODinfo.shadowRender||(this.LODinfo.shadowRender={levels:[],count:[]});const i=this.addLevel(this.LODinfo.shadowRender,t,null,e,n);return i.castShadow=!0,this.castShadow=!0,this};qn.prototype.addLevel=function(t,e,n,i,r){const a=this.LODinfo.objects,s=t.levels;let o,l;i=i**2;const c=a.findIndex(u=>u.geometry===e);if(c===-1){const u={capacity:this._capacity,renderer:this._renderer};l=new qn(e,n??new is,u,this),l.frustumCulled=!1,this.patchLevel(l),a.push(l),this.add(l)}else l=a[c],n&&(l.material=n);for(o=0;o<s.length&&!(i<s[o].distance);o++);return s.splice(o,0,{distance:i,hysteresis:r,object:l}),t.count.push(0),l};qn.prototype.patchLevel=function(t){Object.defineProperty(t,"matricesTexture",{get(){return this._parentLOD.matricesTexture}}),Object.defineProperty(t,"colorsTexture",{get(){return this._parentLOD.colorsTexture}}),Object.defineProperty(t,"uniformsTexture",{get(){return this._parentLOD.uniformsTexture}}),Object.defineProperty(t,"morphTexture",{get(){return this._parentLOD.morphTexture}}),Object.defineProperty(t,"boneTexture",{get(){return this._parentLOD.boneTexture}}),Object.defineProperty(t,"skeleton",{get(){return this._parentLOD.skeleton}}),Object.defineProperty(t,"bindMatrixInverse",{get(){return this._parentLOD.bindMatrixInverse}}),Object.defineProperty(t,"bindMatrix",{get(){return this._parentLOD.bindMatrix}})};const lFe=new fi;qn.prototype.getMorphAt=function(t,e=lFe){const n=e.morphTargetInfluences,i=this.morphTexture.source.data.data,r=n.length+1,a=t*r+1;for(let s=0;s<n.length;s++)n[s]=i[a+s];return e};qn.prototype.setMorphAt=function(t,e){const n=e.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&!this._parentLOD&&(this.morphTexture=new ws(new Float32Array(i*this._capacity),i,this._capacity,Nh,vr));const r=this.morphTexture.source.data.data;let a=0;for(const l of n)a+=l;const s=this._geometry.morphTargetsRelative?1:1-a,o=i*t;r[o]=s,r.set(n,o+1),this.morphTexture.needsUpdate=!0};const ZO=[],iC=new fi,cFe=new Tu,o7=new Y,l7=new Y,c7=new Ct,u7=new xr;qn.prototype.raycast=function(t,e){if(this._parentLOD||!this.material||this._instancesArrayCount===0||!this.instanceIndex)return;iC.geometry=this._geometry,iC.material=this.material;const n=t.ray,i=t.near,r=t.far;c7.copy(this.matrixWorld).invert(),l7.setFromMatrixScale(this.matrixWorld),o7.copy(t.ray.direction).multiply(l7);const a=o7.length();t.ray=cFe.copy(t.ray).applyMatrix4(c7),t.near/=a,t.far/=a,this.raycastInstances(t,e),t.ray=n,t.near=i,t.far=r};qn.prototype.raycastInstances=function(t,e){if(this.bvh)this.bvh.raycast(t,n=>this.checkObjectIntersection(t,n,e));else{if(this.boundingSphere===null&&this.computeBoundingSphere(),u7.copy(this.boundingSphere),!t.ray.intersectsSphere(u7))return;const n=this.instanceIndex.array,i=this.raycastOnlyFrustum&&this._perObjectFrustumCulled?this.count:this._instancesArrayCount;for(let r=0;r<i;r++)this.checkObjectIntersection(t,n[r],e)}};qn.prototype.checkObjectIntersection=function(t,e,n){if(!(e>this._instancesArrayCount||!this.getActiveAndVisibilityAt(e))){this.getMatrixAt(e,iC.matrixWorld),iC.raycast(t,ZO);for(const i of ZO)i.instanceId=e,i.object=this,n.push(i);ZO.length=0}};qn.prototype.initSkeleton=function(t,e=!0){if(t&&this.skeleton!==t&&!this._parentLOD){const n=t.bones;if(this.skeleton=t,this.bindMatrix=new Ct,this.bindMatrixInverse=new Ct,this.boneTexture=new tC(Float32Array,4,4*n.length,this._capacity),e)for(const i of n)i.matrixAutoUpdate=!1,i.matrixWorldAutoUpdate=!1;this.materialsNeedsUpdate()}};qn.prototype.setBonesAt=function(t,e=!0,n){const i=this.skeleton;if(!i)throw new Error('"setBonesAt" cannot be called before "initSkeleton"');const r=i.bones,a=i.boneInverses;for(let s=0,o=r.length;s<o;s++){const l=r[s];e&&(n!=null&&n.has(l.name)||l.updateMatrix(),l.matrixWorld.multiplyMatrices(l.parent.matrixWorld,l.matrix)),this.multiplyBoneMatricesAt(t,s,l.matrixWorld,a[s])}this.boneTexture.enqueueUpdate(t)};qn.prototype.multiplyBoneMatricesAt=function(t,e,n,i){const r=(t*this.skeleton.bones.length+e)*16,a=n.elements,s=i.elements,o=this.boneTexture._data,l=a[0],c=a[4],u=a[8],f=a[12],h=a[1],d=a[5],m=a[9],y=a[13],v=a[2],g=a[6],x=a[10],_=a[14],E=a[3],T=a[7],w=a[11],A=a[15],C=s[0],D=s[4],k=s[8],P=s[12],B=s[1],H=s[5],G=s[9],V=s[13],U=s[2],F=s[6],q=s[10],X=s[14],z=s[3],ce=s[7],he=s[11],$=s[15];o[r+0]=l*C+c*B+u*U+f*z,o[r+4]=l*D+c*H+u*F+f*ce,o[r+8]=l*k+c*G+u*q+f*he,o[r+12]=l*P+c*V+u*X+f*$,o[r+1]=h*C+d*B+m*U+y*z,o[r+5]=h*D+d*H+m*F+y*ce,o[r+9]=h*k+d*G+m*q+y*he,o[r+13]=h*P+d*V+m*X+y*$,o[r+2]=v*C+g*B+x*U+_*z,o[r+6]=v*D+g*H+x*F+_*ce,o[r+10]=v*k+g*G+x*q+_*he,o[r+14]=v*P+g*V+x*X+_*$,o[r+3]=E*C+T*B+w*U+A*z,o[r+7]=E*D+T*H+w*F+A*ce,o[r+11]=E*k+T*G+w*q+A*he,o[r+15]=E*P+T*V+w*X+A*$};qn.prototype.getUniformAt=function(t,e,n){if(!this.uniformsTexture)throw new Error(`Before get/set uniform, it's necessary to use "initUniformsPerInstance".`);return this.uniformsTexture.getUniformAt(t,e,n)};qn.prototype.setUniformAt=function(t,e,n){if(!this.uniformsTexture)throw new Error(`Before get/set uniform, it's necessary to use "initUniformsPerInstance".`);this.uniformsTexture.setUniformAt(t,e,n),this.uniformsTexture.enqueueUpdate(t)};qn.prototype.initUniformsPerInstance=function(t){if(!this._parentLOD){const{channels:e,pixelsPerInstance:n,uniformMap:i,fetchInFragmentShader:r}=this.getUniformSchemaResult(t);this.uniformsTexture=new tC(Float32Array,e,n,this._capacity,i,r),this.materialsNeedsUpdate()}};qn.prototype.getUniformSchemaResult=function(t){let e=0;const n=new Map,i=[],r=t.vertex??{},a=t.fragment??{};let s=!0;for(const c in r){const u=r[c],f=this.getUniformSize(u);e+=f,i.push({name:c,type:u,size:f}),s=!1}for(const c in a)if(!r[c]){const u=a[c],f=this.getUniformSize(u);e+=f,i.push({name:c,type:u,size:f})}i.sort((c,u)=>u.size-c.size);const o=[];for(const{name:c,size:u,type:f}of i){const h=this.getUniformOffset(u,o);n.set(c,{offset:h,size:u,type:f})}const l=Math.ceil(e/4);return{channels:Math.min(e,4),pixelsPerInstance:l,uniformMap:n,fetchInFragmentShader:s}};qn.prototype.getUniformOffset=function(t,e){if(t<4){for(let i=0;i<e.length;i++)if(e[i]+t<=4){const r=i*4+e[i];return e[i]+=t,r}}const n=e.length*4;for(;t>0;t-=4)e.push(t);return n};qn.prototype.getUniformSize=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;case"mat3":return 9;case"mat4":return 16;default:throw new Error(`Invalid uniform type: ${t}`)}};var uFe=`#ifdef USE_INSTANCING_INDIRECT\r
  attribute uint instanceIndex;\r
  uniform highp sampler2D matricesTexture;  

  mat4 getInstancedMatrix() {\r
    int size = textureSize( matricesTexture, 0 ).x;\r
    int j = int( instanceIndex ) * 4;\r
    int x = j % size;\r
    int y = j / size;\r
    vec4 v1 = texelFetch( matricesTexture, ivec2( x, y ), 0 );\r
    vec4 v2 = texelFetch( matricesTexture, ivec2( x + 1, y ), 0 );\r
    vec4 v3 = texelFetch( matricesTexture, ivec2( x + 2, y ), 0 );\r
    vec4 v4 = texelFetch( matricesTexture, ivec2( x + 3, y ), 0 );\r
    return mat4( v1, v2, v3, v4 );\r
  }\r
#endif`,fFe=`#ifdef USE_INSTANCING_COLOR_INDIRECT\r
  uniform highp sampler2D colorsTexture;

  #ifdef USE_COLOR_ALPHA\r
    vec4 getColorTexture() {\r
      int size = textureSize( colorsTexture, 0 ).x;\r
      int j = int( instanceIndex );\r
      int x = j % size;\r
      int y = j / size;\r
      return texelFetch( colorsTexture, ivec2( x, y ), 0 );\r
    }\r
  #else\r
    vec3 getColorTexture() {\r
      int size = textureSize( colorsTexture, 0 ).x;\r
      int j = int( instanceIndex );\r
      int x = j % size;\r
      int y = j / size;\r
      return texelFetch( colorsTexture, ivec2( x, y ), 0 ).rgb;\r
    }\r
  #endif\r
#endif`,hFe=`#ifdef USE_INSTANCING_INDIRECT\r
  mat4 instanceMatrix = getInstancedMatrix();

  #ifdef USE_INSTANCING_COLOR_INDIRECT\r
    vColor *= getColorTexture();\r
  #endif\r
#endif`,dFe=`#ifdef USE_INSTANCING_COLOR_INDIRECT\r
  #ifdef USE_VERTEX_COLOR\r
    vColor = color;\r
  #else\r
    #ifdef USE_COLOR_ALPHA\r
      vColor = vec4( 1.0 );\r
    #else\r
      vColor = vec3( 1.0 );\r
    #endif\r
  #endif\r
#endif`,pFe=`#ifdef USE_SKINNING\r
  uniform mat4 bindMatrix;\r
  uniform mat4 bindMatrixInverse;\r
  uniform highp sampler2D boneTexture;

  #ifdef USE_INSTANCING_SKINNING\r
    uniform int bonesPerInstance;\r
  #endif

  mat4 getBoneMatrix( const in float i ) {\r
    int size = textureSize( boneTexture, 0 ).x;

    #ifdef USE_INSTANCING_SKINNING\r
      int j = ( bonesPerInstance * int( instanceIndex ) + int( i ) ) * 4;\r
    #else\r
      int j = int( i ) * 4;\r
    #endif

    int x = j % size;\r
    int y = j / size;\r
    vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\r
    vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\r
    vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\r
    vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\r
    return mat4( v1, v2, v3, v4 );\r
  }\r
#endif`;on.instanced_pars_vertex=uFe;on.instanced_color_pars_vertex=fFe;on.instanced_vertex=hFe;on.instanced_color_vertex=dFe;function lF(t){return t.replace("#ifdef USE_INSTANCING","#if defined USE_INSTANCING || defined USE_INSTANCING_INDIRECT")}on.project_vertex=lF(on.project_vertex);on.worldpos_vertex=lF(on.worldpos_vertex);on.defaultnormal_vertex=lF(on.defaultnormal_vertex);on.batching_pars_vertex=on.batching_pars_vertex.concat(`
#include <instanced_pars_vertex>`);on.color_pars_vertex=on.color_pars_vertex.concat(`
#include <instanced_color_pars_vertex>`);on.batching_vertex=on.batching_vertex.concat(`
#include <instanced_vertex>`);on.skinning_pars_vertex=pFe;on.morphinstance_vertex&&(on.morphinstance_vertex=on.morphinstance_vertex.replaceAll("gl_InstanceID","instanceIndex"));(function(){var t="b9H79TebbbeJq9Geueu9Geub9Gbb9Gvuuuuueu9Gduueu9Gluuuueu9Gvuuuuub9Gouuuuuub9Gluuuub9GiuuueuiKLdilevlevlooroowwvwbDDbelve9Weiiviebeoweuec:G:Qdkr;RiOo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWVbe8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9c9V919U9KbdE9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949wWV79P9V9UbiY9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWVbl8E9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWV9c9V919U9Kbv8A9TW79O9V9Wt9FW9U9J9V9KW69U9KW949wWV79P9V9UboE9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JWbra9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JW9c9V919U9KbwL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9p9JtbDK9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9r919HtbqL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVT949WbkE9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OWbPa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OW9ttV9P9Wbsa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9WbzK9TW79O9V9Wt9F79W9Ht9P9H29t9VVt9sW9T9H9WbHl79IV9RbODwebcekdQXq;A9pLdbk;QqeKu8Jjjjjbcjo9Rgv8Kjjjjbcbhodnalcefae0mbabcbRbN:kjjbc:GeV86bbavcjdfcbcjdzNjjjb8AdnaiTmbavcjdfadalz:tjjjb8Akabaefhrabcefhwavalfcbcbcjdal9RalcFe0EzNjjjb8Aavavcjdfalz:tjjjbhDcj;abal9Uc;WFbGgecjdaecjd6Ehqcbhkindndnaiak9nmbaDcjlfcbcjdzNjjjb8Aaqaiak9Rakaqfai6Egxcsfgecl4cifcd4hmadakal2fhPdndndnaec9WGgsTmbcbhzaPhHawhOxekdnaxmbalheinaraw9Ram6miawcbamzNjjjbamfhwaecufgembxvkkcbhAaPhOinaDaAfRbbhCaDcjlfheaOhoaxhXinaeaoRbbgQaC9RgCcetaCcKtcK91cr4786bbaoalfhoaecefheaQhCaXcufgXmbkaraw9Ram6mdaOcefhOawcbamzNjjjbamfhwaAcefgAal9hmbxlkkindnaxTmbaDazfRbbhCaDcjlfheaHhoaxhXinaeaoRbbgQaC9RgCcetaCcKtcK91cr4786bbaoalfhoaecefheaQhCaXcufgXmbkkaraO9Ram6mearaOcbamzNjjjbgLamfgw9RcK6mecbhKaDcjlfhOinaDcjlfaKfhYcwhAczhQceheindndnaegXce9hmbcuhoaYRbbmecbhodninaogecsSmeaecefhoaOaefcefRbbTmbkkcucbaecs6EhoxekaXcethocuaXtc;:bGcFb7hCcbheinaoaCaOaefRbb9nfhoaecefgecz9hmbkkaoaQaoaQ6geEhQaXaAaeEhAaXcetheaXcl6mbkdndndndnaAcufPdiebkaLaKco4fgeaeRbbcdciaAclSEaKci4coGtV86bbaAcw9hmeawaY8Pbb83bbawcwfaYcwf8Pbb83bbawczfhwxdkaLaKco4fgeaeRbbceaKci4coGtV86bbkdncwaA9Tg8Ambinawcb86bbawcefhwxbkkcuaAtcu7hYcbhEaOh3ina3hea8AhCcbhoinaeRbbgQaYcFeGgXaQaX6EaoaAtVhoaecefheaCcufgCmbkawao86bba3a8Afh3awcefhwaEa8AfgEcz6mbkcbheindnaOaefRbbgoaX6mbawao86bbawcefhwkaecefgecz9hmbkkdnaKczfgKas9pmbaOczfhOaraw9RcL0mekkaKas6meawTmeaHcefhHawhOazcefgzalSmixbkkcbhoxikcbhoaraw9Ralcaalca0E6mddnalc8F0mbawcbcaal9RgezNjjjbaefhwkawaDcjdfalz:tjjjbalfab9RhoxdkaDaPaxcufal2falz:tjjjb8Aaxakfhkawmbkcbhokavcjof8Kjjjjbaok9heeuaecaaeca0Eabcj;abae9Uc;WFbGgdcjdadcjd6Egdfcufad9Uae2adcl4cifcd4adV2fcefkmbcbabBdN:kjjbk:zse5u8Jjjjjbc;ae9Rgl8Kjjjjbcbhvdnaici9UgocHfae0mbabcbyd:e:kjjbgrc;GeV86bbalc;abfcFecjezNjjjb8AalcUfgw9cu83ibalc8WfgD9cu83ibalcyfgq9cu83ibalcafgk9cu83ibalcKfgx9cu83ibalczfgm9cu83ibal9cu83iwal9cu83ibabaefc9WfhPabcefgsaofhednaiTmbcmcsarcb9kgzEhHcbhOcbhAcbhCcbhXcbhQindnaeaP9nmbcbhvxikaQcufhvadaCcdtfgLydbhKaLcwfydbhYaLclfydbh8AcbhEdndndninalc;abfavcsGcitfgoydlh3dndndnaoydbgoaK9hmba3a8ASmekdnaoa8A9hmba3aY9hmbaEcefhExekaoaY9hmea3aK9hmeaEcdfhEkaEc870mdaXcufhvaLaEciGcx2goc:y1jjbfydbcdtfydbh3aLaocN1jjbfydbcdtfydbh8AaLaoc:q1jjbfydbcdtfydbhKcbhodnindnalavcsGcdtfydba39hmbaohYxdkcuhYavcufhvaocefgocz9hmbkkaOa3aOSgvaYce9iaYaH9oVgoGfhOdndndncbcsavEaYaoEgvcs9hmbarce9imba3a3aAa3cefaASgvEgAcefSmecmcsavEhvkasavaEcdtc;WeGV86bbavcs9hmea3aA9Rgvcetavc8F917hvinaeavcFb0crtavcFbGV86bbaecefheavcje6hoavcr4hvaoTmbka3hAxvkcPhvasaEcdtcPV86bba3hAkavTmiavaH9omicdhocehEaQhYxlkavcufhvaEclfgEc;ab9hmbkkdnaLceaYaOSceta8AaOSEcx2gvc:q1jjbfydbcdtfydbgKTaLavcN1jjbfydbcdtfydbg8AceSGaLavc:y1jjbfydbcdtfydbg3cdSGaOcb9hGazGg5ce9hmbaw9cu83ibaD9cu83ibaq9cu83ibak9cu83ibax9cu83ibam9cu83ibal9cu83iwal9cu83ibcbhOkcbhEaXcufgvhodnindnalaocsGcdtfydba8A9hmbaEhYxdkcuhYaocufhoaEcefgEcz9hmbkkcbhodnindnalavcsGcdtfydba39hmbaohExdkcuhEavcufhvaocefgocz9hmbkkaOaKaOSg8EfhLdndnaYcm0mbaYcefhYxekcbcsa8AaLSgvEhYaLavfhLkdndnaEcm0mbaEcefhExekcbcsa3aLSgvEhEaLavfhLkc9:cua8EEh8FcbhvaEaYcltVgacFeGhodndndninavcj1jjbfRbbaoSmeavcefgvcz9hmbxdkka5aKaO9havcm0VVmbasavc;WeV86bbxekasa8F86bbaeaa86bbaecefhekdna8EmbaKaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaKhAkdnaYcs9hmba8AaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka8AhAkdnaEcs9hmba3aA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka3hAkalaXcdtfaKBdbaXcefcsGhvdndnaYPzbeeeeeeeeeeeeeebekalavcdtfa8ABdbaXcdfcsGhvkdndnaEPzbeeeeeeeeeeeeeebekalavcdtfa3BdbavcefcsGhvkcihoalc;abfaQcitfgEaKBdlaEa8ABdbaQcefcsGhYcdhEavhXaLhOxekcdhoalaXcdtfa3BdbcehEaXcefcsGhXaQhYkalc;abfaYcitfgva8ABdlava3Bdbalc;abfaQaEfcsGcitfgva3BdlavaKBdbascefhsaQaofcsGhQaCcifgCai6mbkkcbhvaeaP0mbcbhvinaeavfavcj1jjbfRbb86bbavcefgvcz9hmbkaeab9Ravfhvkalc;aef8KjjjjbavkZeeucbhddninadcefgdc8F0meceadtae6mbkkadcrfcFeGcr9Uci2cdfabci9U2cHfkmbcbabBd:e:kjjbk:ydewu8Jjjjjbcz9Rhlcbhvdnaicvfae0mbcbhvabcbRb:e:kjjbc;qeV86bbal9cb83iwabcefhoabaefc98fhrdnaiTmbcbhwcbhDindnaoar6mbcbskadaDcdtfydbgqalcwfawaqav9Rgvavc8F91gv7av9Rc507gwcdtfgkydb9Rgvc8E91c9:Gavcdt7awVhvinaoavcFb0gecrtavcFbGV86bbavcr4hvaocefhoaembkakaqBdbaqhvaDcefgDai9hmbkkcbhvaoar0mbaocbBbbaoab9RclfhvkavkBeeucbhddninadcefgdc8F0meceadtae6mbkkadcwfcFeGcr9Uab2cvfk:bvli99dui99ludnaeTmbcuadcetcuftcu7:Yhvdndncuaicuftcu7:YgoJbbbZMgr:lJbbb9p9DTmbar:Ohwxekcjjjj94hwkcbhicbhDinalclfIdbgrJbbbbJbbjZalIdbgq:lar:lMalcwfIdbgk:lMgr:varJbbbb9BEgrNhxaqarNhrdndnakJbbbb9GTmbaxhqxekJbbjZar:l:tgqaq:maxJbbbb9GEhqJbbjZax:l:tgxax:marJbbbb9GEhrkdndnalcxfIdbgxJbbj:;axJbbj:;9GEgkJbbjZakJbbjZ9FEavNJbbbZJbbb:;axJbbbb9GEMgx:lJbbb9p9DTmbax:Ohmxekcjjjj94hmkdndnaqJbbj:;aqJbbj:;9GEgxJbbjZaxJbbjZ9FEaoNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:OhPxekcjjjj94hPkdndnarJbbj:;arJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;arJbbbb9GEMgr:lJbbb9p9DTmbar:Ohsxekcjjjj94hskdndnadcl9hmbabaifgzas86bbazcifam86bbazcdfaw86bbazcefaP86bbxekabaDfgzas87ebazcofam87ebazclfaw87ebazcdfaP87ebkalczfhlaiclfhiaDcwfhDaecufgembkkk;hlld99eud99eudnaeTmbdndncuaicuftcu7:YgvJbbbZMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikaic;8FiGhrinabcofcicdalclfIdb:lalIdb:l9EgialcwfIdb:lalaicdtfIdb:l9EEgialcxfIdb:lalaicdtfIdb:l9EEgiarV87ebdndnJbbj:;JbbjZalaicdtfIdbJbbbb9DEgoalaicd7cdtfIdbJ;Zl:1ZNNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabcdfaq87ebdndnalaicefciGcdtfIdbJ;Zl:1ZNaoNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabaq87ebdndnaoalaicufciGcdtfIdbJ;Zl:1ZNNgoJbbj:;aoJbbj:;9GEgwJbbjZawJbbjZ9FEavNJbbbZJbbb:;aoJbbbb9GEMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikabclfai87ebabcwfhbalczfhlaecufgembkkk;3viDue99eu8Jjjjjbcjd9Rgo8Kjjjjbadcd4hrdndndndnavcd9hmbadcl6meaohwarhDinawc:CuBdbawclfhwaDcufgDmbkaeTmiadcl6mdarcdthqalhkcbhxinaohwakhDarhminawawydbgPcbaDIdbgs:8cL4cFeGc:cufasJbbbb9BEgzaPaz9kEBdbaDclfhDawclfhwamcufgmmbkakaqfhkaxcefgxaeSmixbkkaeTmdxekaeTmekarcdthkavce9hhqadcl6hdcbhxindndndnaqmbadmdc:CuhDalhwarhminaDcbawIdbgs:8cL4cFeGc:cufasJbbbb9BEgPaDaP9kEhDawclfhwamcufgmmbxdkkc:CuhDdndnavPleddbdkadmdaohwalhmarhPinawcbamIdbgs:8cL4cFeGgzc;:bazc;:b9kEc:cufasJbbbb9BEBdbamclfhmawclfhwaPcufgPmbxdkkadmecbhwarhminaoawfcbalawfIdbgs:8cL4cFeGgPc8AaPc8A9kEc:cufasJbbbb9BEBdbawclfhwamcufgmmbkkadmbcbhwarhPinaDhmdnavceSmbaoawfydbhmkdndnalawfIdbgscjjj;8iamai9RcefgmcLt9R::NJbbbZJbbb:;asJbbbb9GEMgs:lJbbb9p9DTmbas:Ohzxekcjjjj94hzkabawfazcFFFrGamcKtVBdbawclfhwaPcufgPmbkkabakfhbalakfhlaxcefgxae9hmbkkaocjdf8Kjjjjbk;HqdCui998Jjjjjbc:qd9Rgv8Kjjjjbavc:Sefcbc;KbzNjjjb8AcbhodnadTmbcbhoaiTmbdnabae9hmbavcuadcdtgradcFFFFi0Ecbyd:m:kjjbHjjjjbbgeBd:SeavceBd:mdaeabarz:tjjjb8Akavc:GefcwfcbBdbav9cb83i:Geavc:Gefaeadaiavc:Sefz:njjjbavyd:Gehwadci9UgDcbyd:m:kjjbHjjjjbbhravc:Sefavyd:mdgqcdtfarBdbavaqcefgkBd:mdarcbaDzNjjjbhxavc:SefakcdtfcuaicdtaicFFFFi0Ecbyd:m:kjjbHjjjjbbgmBdbavaqcdfgPBd:mdawhramhkinakalIdbalarydbgscwascw6Ecdtfc;ebfIdbMUdbarclfhrakclfhkaicufgimbkavc:SefaPcdtfcuaDcdtadcFFFF970Ecbyd:m:kjjbHjjjjbbgPBdbdnadci6mbaehraPhkaDhiinakamarydbcdtfIdbamarclfydbcdtfIdbMamarcwfydbcdtfIdbMUdbarcxfhrakclfhkaicufgimbkkaqcifhoavc;qbfhzavhravyd:KehHavyd:OehOcbhscbhkcbhAcehCinarhXcihQaeakci2gLcdtfgrydbhdarclfydbhqabaAcx2fgicwfarcwfydbgKBdbaiclfaqBdbaiadBdbaxakfce86bbazaKBdwazaqBdlazadBdbaPakcdtfcbBdbdnasTmbcihQaXhiinazaQcdtfaiydbgrBdbaQaraK9harad9haraq9hGGfhQaiclfhiascufgsmbkkaAcefhAcbhsinaOaHaeasaLfcdtfydbcdtgifydbcdtfgKhrawaifgqydbgdhidnadTmbdninarydbakSmearclfhraicufgiTmdxbkkaraKadcdtfc98fydbBdbaqaqydbcufBdbkascefgsci9hmbkdndnaQTmbcuhkJbbbbhYcbhqavyd:KehKavyd:OehLindndnawazaqcdtfydbcdtgsfydbgrmbaqcefhqxekaqcs0hiamasfgdIdbh8AadalcbaqcefgqaiEcdtfIdbalarcwarcw6Ecdtfc;ebfIdbMgEUdbaEa8A:thEarcdthiaLaKasfydbcdtfhrinaParydbgscdtfgdaEadIdbMg8AUdba8AaYaYa8A9DgdEhYasakadEhkarclfhraic98fgimbkkaqaQ9hmbkakcu9hmekaCaD9pmdindnaxaCfRbbmbaChkxdkaDaCcefgC9hmbxikkaQczaQcz6EhsazhraXhzakcu9hmbkkaocdtavc:Seffc98fhrdninaoTmearydbcbyd1:kjjbH:bjjjbbarc98fhraocufhoxbkkavc:qdf8Kjjjjbk;IlevucuaicdtgvaicFFFFi0Egocbyd:m:kjjbHjjjjbbhralalyd9GgwcdtfarBdbalawcefBd9GabarBdbaocbyd:m:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdlcuadcdtadcFFFFi0Ecbyd:m:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdwabydbcbavzNjjjb8Aadci9UhDdnadTmbabydbhoaehladhrinaoalydbcdtfgvavydbcefBdbalclfhlarcufgrmbkkdnaiTmbabydbhlabydlhrcbhvaihoinaravBdbarclfhralydbavfhvalclfhlaocufgombkkdnadci6mbabydlhrabydwhvcbhlinaecwfydbhoaeclfydbhdaraeydbcdtfgwawydbgwcefBdbavawcdtfalBdbaradcdtfgdadydbgdcefBdbavadcdtfalBdbaraocdtfgoaoydbgocefBdbavaocdtfalBdbaecxfheaDalcefgl9hmbkkdnaiTmbabydlheabydbhlinaeaeydbalydb9RBdbalclfhlaeclfheaicufgimbkkkQbabaeadaic:01jjbz:mjjjbkQbabaeadaic:C:jjjbz:mjjjbk9DeeuabcFeaicdtzNjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk;Wkivuo99lu8Jjjjjbc;W;Gb9Rgl8Kjjjjbcbhvalcj;Gbfcbc;KbzNjjjb8AalcuadcdtadcFFFFi0Egocbyd:m:kjjbHjjjjbbgrBdj9GalceBd;G9GalcFFF;7rBdwal9cFFF;7;3FF:;Fb83dbalcFFF97Bd;S9Gal9cFFF;7FFF:;u83d;K9Gaicd4hwdndnadmbJFFuFhDJFFuuhqJFFuuhkJFFuFhxJFFuuhmJFFuFhPxekawcdthsaehzincbhiinalaifgHazaifIdbgDaHIdbgxaxaD9EEUdbalc;K;GbfaifgHaDaHIdbgxaxaD9DEUdbaiclfgicx9hmbkazasfhzavcefgvad9hmbkalIdwhqalId;S9GhDalIdlhkalId;O9GhxalIdbhmalId;K9GhPkdndnadTmbJbbbbJbbjZJbbbbaPam:tgPaPJbbbb9DEgPaxak:tgxaxaP9DEgxaDaq:tgDaDax9DEgD:vaDJbbbb9BEhDawcdthsarhHadhzindndnaDaeIdbam:tNJb;au9eNJbbbZMgx:lJbbb9p9DTmbax:Ohixekcjjjj94hikaicztaicwtcj;GiGVaicsGVc:p;G:dKGcH2c;d;H:WKGcv2c;j:KM;jbGhvdndnaDaeclfIdbak:tNJb;au9eNJbbbZMgx:lJbbb9p9DTmbax:Ohixekcjjjj94hikaicztaicwtcj;GiGVaicsGVc:p;G:dKGcH2c;d;H:WKGcq2cM;j:KMeGavVhvdndnaDaecwfIdbaq:tNJb;au9eNJbbbZMgx:lJbbb9p9DTmbax:Ohixekcjjjj94hikaHavaicztaicwtcj;GiGVaicsGVc:p;G:dKGcH2c;d;H:WKGcC2c:KM;j:KdGVBdbaeasfheaHclfhHazcufgzmbkalcbcj;GbzNjjjbhiarhHadheinaiaHydbgzcFrGcx2fgvavydbcefBdbaiazcq4cFrGcx2fgvavydlcefBdlaiazcC4cFrGcx2fgzazydwcefBdwaHclfhHaecufgembxdkkalcbcj;GbzNjjjb8AkcbhHcbhzcbhecbhvinalaHfgiydbhsaiazBdbaicwfgwydbhOawavBdbaiclfgiydbhwaiaeBdbasazfhzaOavfhvawaefheaHcxfgHcj;Gb9hmbkcbhHalaocbyd:m:kjjbHjjjjbbgiBd:e9GdnadTmbabhzinazaHBdbazclfhzadaHcefgH9hmbkabhHadhzinalaraHydbgecdtfydbcFrGcx2fgvavydbgvcefBdbaiavcdtfaeBdbaHclfhHazcufgzmbkaihHadhzinalaraHydbgecdtfydbcq4cFrGcx2fgvavydlgvcefBdlabavcdtfaeBdbaHclfhHazcufgzmbkabhHadhzinalaraHydbgecdtfydbcC4cFrGcx2fgvavydwgvcefBdwaiavcdtfaeBdbaHclfhHazcufgzmbkcbhHinabaiydbcdtfaHBdbaiclfhiadaHcefgH9hmbkkclhidninaic98Smealcj;Gbfaifydbcbyd1:kjjbH:bjjjbbaic98fhixbkkalc;W;Gbf8Kjjjjbk9teiucbcbyd:q:kjjbgeabcifc98GfgbBd:q:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd:q:kjjbgeabcrfc94GfgbBd:q:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd:q:kjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd:q:kjjbfgdBd:q:kjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk:Iddbcjwk:edb4:h9w9N94:P:gW:j9O:ye9Pbbbbbbebbbdbbbebbbdbbbbbbbdbbbbbbbebbbbbbb:l29hZ;69:9kZ;N;76Z;rg97Z;z;o9xZ8J;B85Z;:;u9yZ;b;k9HZ:2;Z9DZ9e:l9mZ59A8KZ:r;T3Z:A:zYZ79OHZ;j4::8::Y:D9V8:bbbb9s:49:Z8R:hBZ9M9M;M8:L;z;o8:;8:PG89q;x:J878R:hQ8::M:B;e87bbbbbbjZbbjZbbjZ:E;V;N8::Y:DsZ9i;H;68:xd;R8:;h0838:;W:NoZbbbb:WV9O8:uf888:9i;H;68:9c9G;L89;n;m9m89;D8Ko8:bbbbf:8tZ9m836ZS:2AZL;zPZZ818EZ9e:lxZ;U98F8:819E;68:bc:eqkzebbbebbbdbbba:vbb",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(r(t),{}).then(function(d){n=d.instance,n.exports.__wasm_call_ctors(),n.exports.meshopt_encodeVertexVersion(0),n.exports.meshopt_encodeIndexVersion(1)});function r(d){for(var m=new Uint8Array(d.length),y=0;y<d.length;++y){var v=d.charCodeAt(y);m[y]=v>96?v-97:v>64?v-39:v+4}for(var g=0,y=0;y<d.length;++y)m[g++]=m[y]<60?e[m[y]]:(m[y]-60)*64+m[++y];return m.buffer.slice(0,g)}function a(d){if(!d)throw new Error("Assertion failed")}function s(d){return new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}function o(d,m,y,v){var g=n.exports.sbrk,x=g(m.length*4),_=g(y*4),E=new Uint8Array(n.exports.memory.buffer),T=s(m);E.set(T,x),v&&v(x,x,m.length,y);var w=d(_,x,m.length,y);E=new Uint8Array(n.exports.memory.buffer);var A=new Uint32Array(y);new Uint8Array(A.buffer).set(E.subarray(_,_+y*4)),T.set(E.subarray(x,x+m.length*4)),g(x-g(0));for(var C=0;C<m.length;++C)m[C]=A[m[C]];return[A,w]}function l(d,m,y,v){var g=n.exports.sbrk,x=g(y*4),_=g(y*v),E=new Uint8Array(n.exports.memory.buffer);E.set(s(m),_),d(x,_,y,v),E=new Uint8Array(n.exports.memory.buffer);var T=new Uint32Array(y);return new Uint8Array(T.buffer).set(E.subarray(x,x+y*4)),g(x-g(0)),T}function c(d,m,y,v,g){var x=n.exports.sbrk,_=x(m),E=x(v*g),T=new Uint8Array(n.exports.memory.buffer);T.set(s(y),E);var w=d(_,m,E,v,g),A=new Uint8Array(w);return A.set(T.subarray(_,_+w)),x(_-x(0)),A}function u(d){for(var m=0,y=0;y<d.length;++y){var v=d[y];m=m<v?v:m}return m}function f(d,m){if(a(m==2||m==4),m==4)return new Uint32Array(d.buffer,d.byteOffset,d.byteLength/4);var y=new Uint16Array(d.buffer,d.byteOffset,d.byteLength/2);return new Uint32Array(y)}function h(d,m,y,v,g,x,_){var E=n.exports.sbrk,T=E(y*v),w=E(y*x),A=new Uint8Array(n.exports.memory.buffer);A.set(s(m),w),d(T,y,v,g,w,_);var C=new Uint8Array(y*v);return C.set(A.subarray(T,T+y*v)),E(T-E(0)),C}return{ready:i,supported:!0,reorderMesh:function(d,m,y){var v=m?y?n.exports.meshopt_optimizeVertexCacheStrip:n.exports.meshopt_optimizeVertexCache:void 0;return o(n.exports.meshopt_optimizeVertexFetchRemap,d,u(d)+1,v)},reorderPoints:function(d,m){return a(d instanceof Float32Array),a(d.length%m==0),a(m>=3),l(n.exports.meshopt_spatialSortRemap,d,d.length/m,m*4)},encodeVertexBuffer:function(d,m,y){a(y>0&&y<=256),a(y%4==0);var v=n.exports.meshopt_encodeVertexBufferBound(m,y);return c(n.exports.meshopt_encodeVertexBuffer,v,d,m,y)},encodeIndexBuffer:function(d,m,y){a(y==2||y==4),a(m%3==0);var v=f(d,y),g=n.exports.meshopt_encodeIndexBufferBound(m,u(v)+1);return c(n.exports.meshopt_encodeIndexBuffer,g,v,m,4)},encodeIndexSequence:function(d,m,y){a(y==2||y==4);var v=f(d,y),g=n.exports.meshopt_encodeIndexSequenceBound(m,u(v)+1);return c(n.exports.meshopt_encodeIndexSequence,g,v,m,4)},encodeGltfBuffer:function(d,m,y,v){var g={ATTRIBUTES:this.encodeVertexBuffer,TRIANGLES:this.encodeIndexBuffer,INDICES:this.encodeIndexSequence};return a(g[v]),g[v](d,m,y)},encodeFilterOct:function(d,m,y,v){return a(y==4||y==8),a(v>=1&&v<=16),h(n.exports.meshopt_encodeFilterOct,d,m,y,v,16)},encodeFilterQuat:function(d,m,y,v){return a(y==8),a(v>=4&&v<=16),h(n.exports.meshopt_encodeFilterQuat,d,m,y,v,16)},encodeFilterExp:function(d,m,y,v,g){a(y>0&&y%4==0),a(v>=1&&v<=24);var x={Separate:0,SharedVector:1,SharedComponent:2,Clamped:3};return h(n.exports.meshopt_encodeFilterExp,d,m,y,v,y,g?x[g]:1)}}})();(function(){var t="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q:Odkr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq;w8Wqdbk;esezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9Uc;WFbGgocjdaocjd6EhDaicefhocbhqdnindndndnaeaq9nmbaDaeaq9RaqaDfae6Egkcsfglcl4cifcd4hxalc9WGgmTmecbhPawcjdfhsaohzinaraz9Rax6mvarazaxfgo9RcK6mvczhlcbhHinalgic9WfgOawcj;cbffhldndndndndnazaOco4fRbbaHcoG4ciGPlbedibkal9cb83ibalcwf9cb83ibxikalaoRblaoRbbgOco4gAaAciSgAE86bbawcj;cbfaifglcGfaoclfaAfgARbbaOcl4ciGgCaCciSgCE86bbalcVfaAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc7faAaCfgARbbaOciGgOaOciSgOE86bbalctfaAaOfgARbbaoRbegOco4gCaCciSgCE86bbalc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc93faAaCfgARbbaOciGgOaOciSgOE86bbalc94faAaOfgARbbaoRbdgOco4gCaCciSgCE86bbalc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc97faAaCfgARbbaOciGgOaOciSgOE86bbalc98faAaOfgORbbaoRbigoco4gAaAciSgAE86bbalc99faOaAfgORbbaocl4ciGgAaAciSgAE86bbalc9:faOaAfgORbbaocd4ciGgAaAciSgAE86bbalcufaOaAfglRbbaociGgoaociSgoE86bbalaofhoxdkalaoRbwaoRbbgOcl4gAaAcsSgAE86bbawcj;cbfaifglcGfaocwfaAfgARbbaOcsGgOaOcsSgOE86bbalcVfaAaOfgORbbaoRbegAcl4gCaCcsSgCE86bbalc7faOaCfgORbbaAcsGgAaAcsSgAE86bbalctfaOaAfgORbbaoRbdgAcl4gCaCcsSgCE86bbalc91faOaCfgORbbaAcsGgAaAcsSgAE86bbalc4faOaAfgORbbaoRbigAcl4gCaCcsSgCE86bbalc93faOaCfgORbbaAcsGgAaAcsSgAE86bbalc94faOaAfgORbbaoRblgAcl4gCaCcsSgCE86bbalc95faOaCfgORbbaAcsGgAaAcsSgAE86bbalc96faOaAfgORbbaoRbvgAcl4gCaCcsSgCE86bbalc97faOaCfgORbbaAcsGgAaAcsSgAE86bbalc98faOaAfgORbbaoRbogAcl4gCaCcsSgCE86bbalc99faOaCfgORbbaAcsGgAaAcsSgAE86bbalc9:faOaAfgORbbaoRbrgocl4gAaAcsSgAE86bbalcufaOaAfglRbbaocsGgoaocsSgoE86bbalaofhoxekalao8Pbb83bbalcwfaocwf8Pbb83bbaoczfhokdnaiam9pmbaHcdfhHaiczfhlarao9RcL0mekkaiam6mvaoTmvdnakTmbawaPfRbbhHawcj;cbfhlashiakhOinaialRbbgzce4cbazceG9R7aHfgH86bbaiadfhialcefhlaOcufgOmbkkascefhsaohzaPcefgPad9hmbxikkcbc99arao9Radcaadca0ESEhoxlkaoaxad2fhCdnakmbadhlinaoTmlarao9Rax6mlaoaxfhoalcufglmbkaChoxekcbhmawcjdfhAinarao9Rax6miawamfRbbhHawcj;cbfhlaAhiakhOinaialRbbgzce4cbazceG9R7aHfgH86bbaiadfhialcefhlaOcufgOmbkaAcefhAaoaxfhoamcefgmad9hmbkaChokabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqaombkc9:hoxekc9:hokavcj;ebf8Kjjjjbaok;cseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgwce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhDaicefgqarfhidnaeTmbcmcsawceSEhkcbhxcbhmcbhPcbhwcbhlindnaiaD9nmbc9:hoxikdndnaqRbbgoc;Ve0mbavc;abfalaocu7gscl4fcsGcitfgzydlhrazydbhzdnaocsGgHak9pmbavawasfcsGcdtfydbaxaHEhoaHThsdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkaxasfhxcdhHavawcdtfaoBdbawasfhwcehsalhOxdkdndnaHcsSmbaHc987aHamffcefhoxekaicefhoai8SbbgHcFeGhsdndnaHcu9mmbaohixekaicvfhiascFbGhscrhHdninao8SbbgOcFbGaHtasVhsaOcu9kmeaocefhoaHcrfgHc8J9hmbxdkkaocefhikasce4cbasceG9R7amfhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhHavawcdtfaoBdbcehsawcefhwalhOaohmxekdnaocpe0mbaxcefgHavawaDaocsGfRbbgocl49RcsGcdtfydbaocz6gzEhravawao9RcsGcdtfydbaHazfgAaocsGgHEhoaHThCdndnadcd9hmbabaPcetfgHax87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHaxBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfaxBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgOaxBdlaOarBdbavawazfgwcsGcdtfaoBdbalcefcsGhOawaCfhwaxhzaAaCfhxxekaxcbaiRbbgOEgzaoc;:eSgHfhraOcsGhCaOcl4hAdndnaOcs0mbarcefhoxekarhoavawaA9RcsGcdtfydbhrkdndnaCmbaocefhxxekaohxavawaO9RcsGcdtfydbhokdndnaHTmbaicefhHxekaicdfhHai8SbegscFeGhzdnascu9kmbaicofhXazcFbGhzcrhidninaH8SbbgscFbGaitazVhzascu9kmeaHcefhHaicrfgic8J9hmbkaXhHxekaHcefhHkazce4cbazceG9R7amfgmhzkdndnaAcsSmbaHhsxekaHcefhsaH8SbbgicFeGhrdnaicu9kmbaHcvfhXarcFbGhrcrhidninas8SbbgHcFbGaitarVhraHcu9kmeascefhsaicrfgic8J9hmbkaXhsxekascefhskarce4cbarceG9R7amfgmhrkdndnaCcsSmbashixekascefhias8SbbgocFeGhHdnaocu9kmbascvfhXaHcFbGhHcrhodninai8SbbgscFbGaotaHVhHascu9kmeaicefhiaocrfgoc8J9hmbkaXhixekaicefhikaHce4cbaHceG9R7amfgmhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfazBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgXazBdlaXarBdbavawaOcz6aAcsSVfgwcsGcdtfaoBdbawaCTaCcsSVfhwalcefcsGhOkaqcefhqavc;abfaOcitfgOarBdlaOaoBdbavc;abfalasfcsGcitfgraoBdlarazBdbawcsGhwalaHfcsGhlaPcifgPae6mbkkcbc99aiaDSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;oiliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabaiavcefciGfcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavciGfgkcd7cetfaD87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavcufciGfcetfaD87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohvxekcjjjj94hvkabakcetfav87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj98Gcjjj;8if::NUdbabclfhbadcufgdmbkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklzNbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q:6dkr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq:p9sqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk:N8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhlaicefhodnaeTmbadTmbalc;WFbGglcjdalcjd6EhwcbhDinawaeaD9RaDawfae6Egqcsfglc9WGgkci2hxakcethmalcl4cifcd4hPabaDad2fhsakc;ab6hzcbhHincbhOaohAdndninaraA9RaP6meavcj;cbfaOak2fhCaAaPfhocbhidnazmbarao9Rc;Gb6mbcbhlinaCalfhidndndndndnaAalco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaiaopbbbpklbaoczfhokdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaiaopbbbpklzaoczfhokdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaiaopbbbpklaaoczfhokdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WaoclfaYpQbfaXc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WaocwfaYpQbfaXc:q:yjjbfRbbfhoxekaiaopbbbpkl8Waoczfhokalc;abfhialcjefak0meaihlarao9Rc;Fb0mbkkdnaiak9pmbaici4hlinarao9RcK6miaCaifhXdndndndndnaAaico4fRbbalcoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpkbbxikaXaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkbbaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaXaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkbbaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaXaopbbbpkbbaoczfhokalcdfhlaiczfgiak6mbkkaoTmeaohAaOcefgOclSmdxbkkc9:hoxlkdnakTmbavcjdfaHfhiavaHfpbdbhYcbhXinaiavcj;cbfaXfglpblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLalakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEalamfpblbg3cep9Ta3aQp9op9Hp9rg3alaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfglaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaladfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfglaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaladfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfglaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaladfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfhiaXczfgXak6mbkkaHclfgHad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfgDae6mbkkcbc99arao9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk::seHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgwce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhDaicefgqarfhidnaeTmbcmcsawceSEhkcbhxcbhmcbhPcbhwcbhlindnaiaD9nmbc9:hoxikdndnaqRbbgoc;Ve0mbavc;abfalaocu7gscl4fcsGcitfgzydlhrazydbhzdnaocsGgHak9pmbavawasfcsGcdtfydbaxaHEhoaHThsdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkaxasfhxcdhHavawcdtfaoBdbawasfhwcehsalhOxdkdndnaHcsSmbaHc987aHamffcefhoxekaicefhoai8SbbgHcFeGhsdndnaHcu9mmbaohixekaicvfhiascFbGhscrhHdninao8SbbgOcFbGaHtasVhsaOcu9kmeaocefhoaHcrfgHc8J9hmbxdkkaocefhikasce4cbasceG9R7amfhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhHavawcdtfaoBdbcehsawcefhwalhOaohmxekdnaocpe0mbaxcefgHavawaDaocsGfRbbgocl49RcsGcdtfydbaocz6gzEhravawao9RcsGcdtfydbaHazfgAaocsGgHEhoaHThCdndnadcd9hmbabaPcetfgHax87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHaxBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfaxBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgOaxBdlaOarBdbavawazfgwcsGcdtfaoBdbalcefcsGhOawaCfhwaxhzaAaCfhxxekaxcbaiRbbgOEgzaoc;:eSgHfhraOcsGhCaOcl4hAdndnaOcs0mbarcefhoxekarhoavawaA9RcsGcdtfydbhrkdndnaCmbaocefhxxekaohxavawaO9RcsGcdtfydbhokdndnaHTmbaicefhHxekaicdfhHai8SbegscFeGhzdnascu9kmbaicofhXazcFbGhzcrhidninaH8SbbgscFbGaitazVhzascu9kmeaHcefhHaicrfgic8J9hmbkaXhHxekaHcefhHkazce4cbazceG9R7amfgmhzkdndnaAcsSmbaHhsxekaHcefhsaH8SbbgicFeGhrdnaicu9kmbaHcvfhXarcFbGhrcrhidninas8SbbgHcFbGaitarVhraHcu9kmeascefhsaicrfgic8J9hmbkaXhsxekascefhskarce4cbarceG9R7amfgmhrkdndnaCcsSmbashixekascefhias8SbbgocFeGhHdnaocu9kmbascvfhXaHcFbGhHcrhodninai8SbbgscFbGaotaHVhHascu9kmeaicefhiaocrfgoc8J9hmbkaXhixekaicefhikaHce4cbaHceG9R7amfgmhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfazBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgXazBdlaXarBdbavawaOcz6aAcsSVfgwcsGcdtfaoBdbawaCTaCcsSVfhwalcefcsGhOkaqcefhqavc;abfaOcitfgOarBdlaOaoBdbavc;abfalasfcsGcitfgraoBdlarazBdbawcsGhwalaHfcsGhlaPcifgPae6mbkkcbc99aiaDSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:wPliuo97eue978Jjjjjbca9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalaeSmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskdnalTmbcbhvabhdinadczfgxaxpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;Meawaqawamp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oaoarpmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalaeSmbaiaeciGgvcitgdfcbcaad9R;8kbaiabalcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;Meawaqawamp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oaoarpmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaDakp;Mearp;Keamp9oaqakp;Mearp;Keczp:Rep9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalaeSmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaDakp;Mearp;Keamp9oaqakp;Mearp;Keczp:Rep9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepkbbadczfhdaeclfgeav6mbkkdnavalSmbaialciGgecdtgdVcbc;abad9R;8kbaiabavcdtfgvad;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepklbkavaiad;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz:Dbb",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=WebAssembly.validate(n)?o(e):o(t),a,s=WebAssembly.instantiate(r,{}).then(function(g){a=g.instance,a.exports.__wasm_call_ctors()});function o(g){for(var x=new Uint8Array(g.length),_=0;_<g.length;++_){var E=g.charCodeAt(_);x[_]=E>96?E-97:E>64?E-39:E+4}for(var T=0,_=0;_<g.length;++_)x[T++]=x[_]<60?i[x[_]]:(x[_]-60)*64+x[++_];return x.buffer.slice(0,T)}function l(g,x,_,E,T,w,A){var C=g.exports.sbrk,D=E+3&-4,k=C(D*T),P=C(w.length),B=new Uint8Array(g.exports.memory.buffer);B.set(w,P);var H=x(k,E,T,P,w.length);if(H==0&&A&&A(k,D,T),_.set(B.subarray(k,k+E*T)),C(k-C(0)),H!=0)throw new Error("Malformed buffer data: "+H)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},f=[],h=0;function d(g){var x={object:new Worker(g),pending:0,requests:{}};return x.object.onmessage=function(_){var E=_.data;x.pending-=E.count,x.requests[E.id][E.action](E.value),delete x.requests[E.id]},x}function m(g){for(var x="self.ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(r)+"]), {}).then(function(result) { result.instance.exports.__wasm_call_ctors(); return result.instance; });self.onmessage = "+v.name+";"+l.toString()+v.toString(),_=new Blob([x],{type:"text/javascript"}),E=URL.createObjectURL(_),T=f.length;T<g;++T)f[T]=d(E);for(var T=g;T<f.length;++T)f[T].object.postMessage({});f.length=g,URL.revokeObjectURL(E)}function y(g,x,_,E,T){for(var w=f[0],A=1;A<f.length;++A)f[A].pending<w.pending&&(w=f[A]);return new Promise(function(C,D){var k=new Uint8Array(_),P=++h;w.pending+=g,w.requests[P]={resolve:C,reject:D},w.object.postMessage({id:P,count:g,size:x,source:k,mode:E,filter:T},[k.buffer])})}function v(g){var x=g.data;if(!x.id)return self.close();self.ready.then(function(_){try{var E=new Uint8Array(x.count*x.size);l(_,_.exports[x.mode],E,x.count,x.size,x.source,_.exports[x.filter]),self.postMessage({id:x.id,count:x.count,action:"resolve",value:E},[E.buffer])}catch(T){self.postMessage({id:x.id,count:x.count,action:"reject",value:T})}})}return{ready:s,supported:!0,useWorkers:function(g){m(g)},decodeVertexBuffer:function(g,x,_,E,T){l(a,a.exports.meshopt_decodeVertexBuffer,g,x,_,E,a.exports[c[T]])},decodeIndexBuffer:function(g,x,_,E){l(a,a.exports.meshopt_decodeIndexBuffer,g,x,_,E)},decodeIndexSequence:function(g,x,_,E){l(a,a.exports.meshopt_decodeIndexSequence,g,x,_,E)},decodeGltfBuffer:function(g,x,_,E,T,w){l(a,a.exports[u[T]],g,x,_,E,a.exports[c[w]])},decodeGltfBufferAsync:function(g,x,_,E,T){return f.length>0?y(g,x,_,u[E],c[T]):s.then(function(){var w=new Uint8Array(g*x);return l(a,a.exports[u[E]],w,g,x,_,a.exports[c[T]]),w})}}})();var mFe=function(){var t="b9H79Tebbbe9Hk9Geueu9Geub9Gbb9Gsuuuuuuuuuuuu99uueu9Gvuuuuub9Gvuuuuue999Gquuuuuuu99uueu9Gwuuuuuu99ueu9Giuuue999Gluuuueu9GiuuueuizsdilvoirwDbqqbeqlve9Weiiviebeoweuecj:Pdkr:Tewo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bbz9TW79O9V9Wt9F79P9T9W29P9M95bl8E9TW79O9V9Wt9F79P9T9W29P9M959x9Pt9OcttV9P9I91tW7bvQ9TW79O9V9Wt9F79P9T9W29P9M959q9V9P9Ut7boX9TW79O9V9Wt9F79P9T9W29P9M959t9J9H2Wbra9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9Wbwl79IV9RbDDwebcekdmxq;UMesdbk:kfvKue99euY99Qu8Jjjjjbc;W;qb9Rgs8Kjjjjbcbhzascxfcbc;Kbz:ljjjb8AdnabaeSmbabaeadcdtz:kjjjb8AkdnamcdGTmbalcrfci4gHcbyd;S1jjbHjjjjbbheascxfasyd2gOcdtfaeBdbasaOcefBd2aecbaHz:ljjjbhAcbhlcbhednadTmbcbhlabheadhHinaAaeydbgOci4fgCaCRbbgCceaOcrGgOtV86bbaCcu7aO4ceGalfhlaeclfheaHcufgHmbkcualcdtalcFFFFi0Ehekaecbyd;S1jjbHjjjjbbhzascxfasyd2gecdtfazBdbasaecefBd2alcd4alfhOcehHinaHgecethHaeaO6mbkcbhXcuaecdtgOaecFFFFi0Ecbyd;S1jjbHjjjjbbhHascxfasyd2gCcdtfaHBdbasaCcefBd2aHcFeaOz:ljjjbhQdnadTmbaecufhCcbhLinabaXcdtfgKydbgAc:v;t;h;Ev2hOcbhedndninaQaOaCGgOcdtfgYydbgHcuSmeazaHcdtfydbaASmdaecefgeaOfhOaeaC9nmbxdkkazaLcdtfaABdbaYaLBdbaLhHaLcefhLkaKaHBdbaXcefgXad9hmbkkaQcbyd;O1jjbH:bjjjbbasasyd2cufBd2kcualcefgecdtaecFFFFi0Ecbyd;S1jjbHjjjjbbh8Aascxfasyd2gecdtfa8ABdbasa8ABdlasaecefBd2cuadcitadcFFFFe0Ecbyd;S1jjbHjjjjbbhEascxfasyd2gecdtfaEBdbasaEBdwasaecefBd2asclfabadalcbz:cjjjbcualcdtg3alcFFFFi0Eg5cbyd;S1jjbHjjjjbbhQascxfasyd2gecdtfaQBdbasaecefBd2a5cbyd;S1jjbHjjjjbbh8Eascxfasyd2gecdtfa8EBdbasaecefBd2alcd4alfhOcehHinaHgecethHaeaO6mbkcbhLcuaecdtgOaecFFFFi0Ecbyd;S1jjbHjjjjbbhHascxfasyd2gCcdtfaHBdbasaCcefBd2aHcFeaOz:ljjjbhXdnalTmbavcd4hCaecufhHinaLhednazTmbazaLcdtfydbhekaiaeaC2cdtfgeydlgOcH4aO7c:F:b:DD2aeydbgOcH4aO7c;D;O:B8J27aeydwgecH4ae7c:3F;N8N27aHGheaLcdth8FdndndndndnazTmbaza8FfhKcbhOinaXaecdtfgYydbgAcuSmlaiazaAcdtfydbaC2cdtfaiaKydbaC2cdtfcxz:ojjjbTmiaOcefgOaefaHGheaOaH9nmbxdkkaiaLaC2cdtfhKcbhOinaXaecdtfgYydbgAcuSmiaiaAaC2cdtfaKcxz:ojjjbTmdaOcefgOaefaHGheaOaH9nmbkkcbhYkaYydbgecu9hmekaYaLBdbaLhekaQa8FfaeBdbaLcefgLal9hmbkcbhea8EhHinaHaeBdbaHclfhHalaecefge9hmbkcbheaQhHa8EhOindnaeaHydbgCSmbaOa8EaCcdtfgCydbBdbaCaeBdbkaHclfhHaOclfhOalaecefge9hmbkkcbhaaXcbyd;O1jjbH:bjjjbbasasyd2cufBd2alcbyd;S1jjbHjjjjbbhXascxfasyd2gecdtfaXBdbasaecefBd2a5cbyd;S1jjbHjjjjbbheascxfasyd2gHcdtfaeBdbasaHcefBd2a5cbyd;S1jjbHjjjjbbhHascxfasyd2gOcdtfaHBdbasaOcefBd2aecFea3z:ljjjbhhaHcFea3z:ljjjbhgdnalTmbaEcwfh8Jindna8AaagOcefgacdtfydbgCa8AaOcdtgefydbgHSmbaCaH9Rh8FaEaHcitfh3agaefh8KahaefhLcbhAindndna3aAcitfydbgYaO9hmbaLaOBdba8KaOBdbxekdna8AaYcdtg8LfgeclfydbgHaeydbgeSmbaEaecitgCfydbaOSmeaHae9Rh8Maecu7aHfhKa8JaCfhHcbheinaKaeSmeaecefheaHydbhCaHcwfhHaCaO9hmbkaea8M6mekaga8LfgeaOaYaeydbcuSEBdbaLaYaOaLydbcuSEBdbkaAcefgAa8F9hmbkkaaal9hmbkaQhHa8EhOaghCahhAcbheindndnaeaHydbgY9hmbdnaeaOydbgY9hmbaAydbhYdnaCydbgKcu9hmbaYcu9hmbaXaefcb86bbxikaXaefhLdnaeaKSmbaeaYSmbaLce86bbxikaLcl86bbxdkdnaea8EaYcdtgKfydb9hmbdnaCydbgLcuSmbaeaLSmbaAydbg8FcuSmbaea8FSmbagaKfydbg3cuSmba3aYSmbahaKfydbgKcuSmbaKaYSmbdnaQaLcdtfydbgYaQaKcdtfydb9hmbaYaQa8FcdtfydbgKSmbaKaQa3cdtfydb9hmbaXaefcd86bbxlkaXaefcl86bbxikaXaefcl86bbxdkaXaefcl86bbxekaXaefaXaYfRbb86bbkaHclfhHaOclfhOaCclfhCaAclfhAalaecefge9hmbkdnaqTmbdndnazTmbazheaQhHalhOindnaqaeydbfRbbTmbaXaHydbfcl86bbkaeclfheaHclfhHaOcufgOmbxdkkaQhealhHindnaqRbbTmbaXaeydbfcl86bbkaqcefhqaeclfheaHcufgHmbkkaQhealhOaXhHindnaXaeydbfRbbcl9hmbaHcl86bbkaeclfheaHcefhHaOcufgOmbkkamceGTmbaXhealhHindnaeRbbce9hmbaecl86bbkaecefheaHcufgHmbkkcualcx2alc;v:Q;v:Qe0Ecbyd;S1jjbHjjjjbbhaascxfasyd2gecdtfaaBdbasaecefBd2aaaialavazz:djjjbh8NdndnaDmbcbhycbh8Jxekcbh8JawhecbhHindnaeIdbJbbbb9ETmbasc;Wbfa8JcdtfaHBdba8Jcefh8JkaeclfheaDaHcefgH9hmbkcua8Jal2gecdtaecFFFFi0Ecbyd;S1jjbHjjjjbbhyascxfasyd2gecdtfayBdbasaecefBd2alTmba8JTmbarcd4hLdnazTmba8JcdthicbhYayhKinaoazaYcdtfydbaL2cdtfhAasc;WbfheaKhHa8JhOinaHaAaeydbcdtgCfIdbawaCfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKaifhKaYcefgYal9hmbxdkka8JcdthicbhYayhKinaoaYaL2cdtfhAasc;WbfheaKhHa8JhOinaHaAaeydbcdtgCfIdbawaCfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKaifhKaYcefgYal9hmbkkcualc8S2gHalc;D;O;f8U0EgCcbyd;S1jjbHjjjjbbheascxfasyd2gOcdtfaeBdbasaOcefBd2aecbaHz:ljjjbhqdndndndna8JTmbaCcbyd;S1jjbHjjjjbbhvascxfasyd2gecdtfavBdbcehOasaecefBd2avcbaHz:ljjjb8Acua8Jal2gecltgHaecFFFFb0Ecbyd;S1jjbHjjjjbbhrascxfasyd2gecdtfarBdbasaecefBd2arcbaHz:ljjjb8AadmexikcbhvadTmecbhrkcbhAabhHindnaaaHclfydbgYcx2fgeIdbaaaHydbgKcx2fgOIdbg8P:tgIaaaHcwfydbgLcx2fgCIdlaOIdlg8R:tg8SNaCIdba8P:tgRaeIdla8R:tg8UN:tg8Va8VNa8UaCIdwaOIdwg8W:tg8XNa8SaeIdwa8W:tg8UN:tg8Sa8SNa8UaRNa8XaIN:tgIaINMM:rgRJbbbb9ETmba8VaR:vh8VaIaR:vhIa8SaR:vh8SkaqaQaKcdtfydbc8S2fgea8SaR:rgRa8SNNg8UaeIdbMUdbaeaIaRaINg8YNg8XaeIdlMUdlaea8VaRa8VNg8ZNg80aeIdwMUdwaea8Ya8SNg8YaeIdxMUdxaea8Za8SNg81aeIdzMUdzaea8ZaINg8ZaeIdCMUdCaea8SaRa8Va8WNa8Sa8PNa8RaINMM:mg8RNg8PNg8SaeIdKMUdKaeaIa8PNgIaeId3MUd3aea8Va8PNg8VaeIdaMUdaaea8Pa8RNg8PaeId8KMUd8KaeaRaeIdyMUdyaqaQaYcdtfydbc8S2fgea8UaeIdbMUdbaea8XaeIdlMUdlaea80aeIdwMUdwaea8YaeIdxMUdxaea81aeIdzMUdzaea8ZaeIdCMUdCaea8SaeIdKMUdKaeaIaeId3MUd3aea8VaeIdaMUdaaea8PaeId8KMUd8KaeaRaeIdyMUdyaqaQaLcdtfydbc8S2fgea8UaeIdbMUdbaea8XaeIdlMUdlaea80aeIdwMUdwaea8YaeIdxMUdxaea81aeIdzMUdzaea8ZaeIdCMUdCaea8SaeIdKMUdKaeaIaeId3MUd3aea8VaeIdaMUdaaea8PaeId8KMUd8KaeaRaeIdyMUdyaHcxfhHaAcifgAad6mbkcbhiabhKinabaicdtfhYcbhHinaXaYaHc:G1jjbfydbcdtfydbgOfRbbhedndnaXaKaHfydbgCfRbbgAc99fcFeGcpe0mbaeceSmbaecd9hmekdnaAcufcFeGce0mbahaCcdtfydbaO9hmekdnaecufcFeGce0mbagaOcdtfydbaC9hmekdnaAcv2aefcj1jjbfRbbTmbaQaOcdtfydbaQaCcdtfydb0mekJbbacJbbacJbbjZaeceSEaAceSEh8ZdnaaaYaHc:K1jjbfydbcdtfydbcx2fgeIdwaaaCcx2fgAIdwg8R:tg8VaaaOcx2fgLIdwa8R:tg8Sa8SNaLIdbaAIdbg8W:tgIaINaLIdlaAIdlg8U:tgRaRNMMg8PNa8Va8SNaeIdba8W:tg80aINaRaeIdla8U:tg8YNMMg8Xa8SN:tg8Va8VNa80a8PNa8XaIN:tg8Sa8SNa8Ya8PNa8XaRN:tgIaINMM:rgRJbbbb9ETmba8VaR:vh8VaIaR:vhIa8SaR:vh8SkaqaQaCcdtfydbc8S2fgea8Sa8Za8P:rNgRa8SNNg8XaeIdbMUdbaeaIaRaINg8ZNg80aeIdlMUdlaea8VaRa8VNg8PNg8YaeIdwMUdwaea8Za8SNg8ZaeIdxMUdxaea8Pa8SNg81aeIdzMUdzaea8PaINgBaeIdCMUdCaea8SaRa8Va8RNa8Sa8WNa8UaINMM:mg8RNg8PNg8SaeIdKMUdKaeaIa8PNgIaeId3MUd3aea8Va8PNg8VaeIdaMUdaaea8Pa8RNg8PaeId8KMUd8KaeaRaeIdyMUdyaqaQaOcdtfydbc8S2fgea8XaeIdbMUdbaea80aeIdlMUdlaea8YaeIdwMUdwaea8ZaeIdxMUdxaea81aeIdzMUdzaeaBaeIdCMUdCaea8SaeIdKMUdKaeaIaeId3MUd3aea8VaeIdaMUdaaea8PaeId8KMUd8KaeaRaeIdyMUdykaHclfgHcx9hmbkaKcxfhKaicifgiad6mbkdna8JTmbcbhKinJbbbbh8WaaabaKcdtfgeclfydbgLcx2fgHIdwaaaeydbgicx2fgOIdwg8Y:tgIaINaHIdbaOIdbg81:tg8Va8VNaHIdlaOIdlgB:tgRaRNMMg8Zaaaecwfydbg8Fcx2fgeIdwa8Y:tg8PNaIaIa8PNa8VaeIdba81:tg8RNaRaeIdlaB:tg8UNMMg8SN:tJbbbbJbbjZa8Za8Pa8PNa8Ra8RNa8Ua8UNMMg80Na8Sa8SN:tg8X:va8XJbbbb9BEg8XNh83a80aINa8Pa8SN:ta8XNhUa8Za8UNaRa8SN:ta8XNh85a80aRNa8Ua8SN:ta8XNh86a8Za8RNa8Va8SN:ta8XNh87a80a8VNa8Ra8SN:ta8XNh88a8Va8UNa8RaRN:tg8Sa8SNaRa8PNa8UaIN:tg8Sa8SNaIa8RNa8Pa8VN:tg8Sa8SNMM:rJbbbZNh8Sayaia8J2g3cdtfhHaya8Fa8J2gwcdtfhOayaLa8J2g8LcdtfhCa8Y:mh89aB:mh8:a81:mhZcbhAa8JhYJbbbbh8UJbbbbh8XJbbbbh8ZJbbbbh80Jbbbbh8YJbbbbh81JbbbbhBJbbbbhnJbbbbhcinasc;WbfaAfgecwfa8SaUaCIdbaHIdbg8P:tgRNa83aOIdba8P:tg8RNMgINUdbaeclfa8Sa86aRNa85a8RNMg8VNUdbaea8Sa88aRNa87a8RNMgRNUdbaecxfa8Sa89aINa8:a8VNa8PaZaRNMMMg8PNUdba8SaIa8VNNa80Mh80a8SaIaRNNa8YMh8Ya8Sa8VaRNNa81Mh81a8Sa8Pa8PNNa8WMh8Wa8SaIa8PNNa8UMh8Ua8Sa8Va8PNNa8XMh8Xa8SaRa8PNNa8ZMh8Za8SaIaINNaBMhBa8Sa8Va8VNNanMhna8SaRaRNNacMhcaHclfhHaCclfhCaOclfhOaAczfhAaYcufgYmbkavaic8S2fgeacaeIdbMUdbaeanaeIdlMUdlaeaBaeIdwMUdwaea81aeIdxMUdxaea8YaeIdzMUdzaea80aeIdCMUdCaea8ZaeIdKMUdKaea8XaeId3MUd3aea8UaeIdaMUdaaea8WaeId8KMUd8Kaea8SaeIdyMUdyavaLc8S2fgeacaeIdbMUdbaeanaeIdlMUdlaeaBaeIdwMUdwaea81aeIdxMUdxaea8YaeIdzMUdzaea80aeIdCMUdCaea8ZaeIdKMUdKaea8XaeId3MUd3aea8UaeIdaMUdaaea8WaeId8KMUd8Kaea8SaeIdyMUdyava8Fc8S2fgeacaeIdbMUdbaeanaeIdlMUdlaeaBaeIdwMUdwaea81aeIdxMUdxaea8YaeIdzMUdzaea80aeIdCMUdCaea8ZaeIdKMUdKaea8XaeId3MUd3aea8UaeIdaMUdaaea8WaeId8KMUd8Kaea8SaeIdyMUdyara3cltfhYcbhHa8JhCinaYaHfgeasc;WbfaHfgOIdbaeIdbMUdbaeclfgAaOclfIdbaAIdbMUdbaecwfgAaOcwfIdbaAIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaCcufgCmbkara8LcltfhYcbhHa8JhCinaYaHfgeasc;WbfaHfgOIdbaeIdbMUdbaeclfgAaOclfIdbaAIdbMUdbaecwfgAaOcwfIdbaAIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaCcufgCmbkarawcltfhYcbhHa8JhCinaYaHfgeasc;WbfaHfgOIdbaeIdbMUdbaeclfgAaOclfIdbaAIdbMUdbaecwfgAaOcwfIdbaAIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaCcufgCmbkaKcifgKad6mbkkcbhOxekcehOcbhrkcbh8FdndnamcwGg9cmbJbbbbh8ZcbhJcbhocbhCxekcbhea5cbyd;S1jjbHjjjjbbhCascxfasyd2gHcdtfaCBdbasaHcefBd2dnalTmbaChHinaHaeBdbaHclfhHalaecefge9hmbkkdnaOmbcbhiinabaicdtfhLcbhKinaQaLaKcdtgec:G1jjbfydbcdtfydbcdtfydbhHdnaCaQaLaefydbcdtfydbgOcdtfgAydbgeaOSmbinaAaCaegOcdtfgYydbgeBdbaYhAaOae9hmbkkdnaCaHcdtfgAydbgeaHSmbinaAaCaegHcdtfgYydbgeBdbaYhAaHae9hmbkkdnaOaHSmbaCaOaHaOaH0EcdtfaOaHaOaH6EBdbkaKcefgKci9hmbkaicifgiad6mbkkcbhJdnalTmbcbhYindnaQaYcdtgefydbaY9hmbaYhHdnaCaefgKydbgeaYSmbaKhOinaOaCaegHcdtfgAydbgeBdbaAhOaHae9hmbkkaKaHBdbkaYcefgYal9hmbkcbheaQhOaChHcbhJindndnaeaOydbgA9hmbdnaeaHydbgA9hmbaHaJBdbaJcefhJxdkaHaCaAcdtfydbBdbxekaHaCaAcdtfydbBdbkaOclfhOaHclfhHalaecefge9hmbkkcuaJcltgeaJcjjjjiGEcbyd;S1jjbHjjjjbbhoascxfasyd2gHcdtfaoBdbasaHcefBd2aocbaez:ljjjbhAdnalTmbaChOaahealhYinaecwfIdbh8SaeclfIdbhIaAaOydbcltfgHaeIdbaHIdbMUdbaHclfgKaIaKIdbMUdbaHcwfgKa8SaKIdbMUdbaHcxfgHaHIdbJbbjZMUdbaOclfhOaecxfheaYcufgYmbkkdnaJTmbaAheaJhHinaecxfgOIdbh8SaOcbBdbaeaeIdbJbbbbJbbjZa8S:va8SJbbbb9BEg8SNUdbaeclfgOa8SaOIdbNUdbaecwfgOa8SaOIdbNUdbaeczfheaHcufgHmbkkdnalTmbaChOaahealhYinaAaOydbcltfgHcxfgKaecwfIdbaHcwfIdb:tg8Sa8SNaeIdbaHIdb:tg8Sa8SNaeclfIdbaHclfIdb:tg8Sa8SNMMg8SaKIdbgIaIa8S9DEUdbaOclfhOaecxfheaYcufgYmbkkdnaJmbcbhJJFFuuh8ZxekaAcxfheaAhHaJhOinaHaeIdbUdbaeczfheaHclfhHaOcufgOmbkJFFuuh8ZaAheaJhHinaeIdbg8Sa8Za8Za8S9EEh8ZaeclfheaHcufgHmbkkasydlh9ednalTmba9eclfhea9eydbhAaXhHalhYcbhOincbaeydbgKaA9RaHRbbcpeGEaOfhOaHcefhHaeclfheaKhAaYcufgYmbkaOce4h8Fkcuada8F9RcifgTcx2aTc;v:Q;v:Qe0Ecbyd;S1jjbHjjjjbbhDascxfasyd2gecdtfaDBdbasaecefBd2cuaTcdtaTcFFFFi0Ecbyd;S1jjbHjjjjbbhSascxfasyd2gecdtfaSBdbasaecefBd2a5cbyd;S1jjbHjjjjbbh8Mascxfasyd2gecdtfa8MBdbasaecefBd2alcbyd;S1jjbHjjjjbbh9hascxfasyd2gecdtfa9hBdbasaecefBd2axaxNa8NJbbjZamclGEg83a83N:vhcJbbbbhndnadak9nmbdnaTci6mba8Jclth9iaDcwfh6JbbbbhBJbbbbhninasclfabadalaQz:cjjjbabh8FcbhEcbh5inaba5cdtfh3cbheindnaQa8FaefydbgOcdtgifydbgYaQa3aec:W1jjbfydbcdtfydbgHcdtgwfydbgKSmbaXaHfRbbgLcv2aXaOfRbbgAfc;a1jjbfRbbg8AaAcv2aLfg8Lc;a1jjbfRbbg8KVcFeGTmbdnaKaY9nmba8Lcj1jjbfRbbcFeGmekaAcufhYdnaAaL9hmbaYcFeGce0mbahaifydbaH9hmekdndnaAclSmbaLcl9hmekdnaYcFeGce0mbahaifydbaH9hmdkaLcufcFeGce0mbagawfydbaO9hmekaDaEcx2fgAaHaOa8KcFeGgYEBdlaAaOaHaYEBdbaAaYa8AGcb9hBdwaEcefhEkaeclfgecx9hmbkdna5cifg5ad9pmba8Fcxfh8FaEcifaT9nmekkaETmdcbhiinJbbbbJbbjZaqaQaDaicx2fgAydlgKaAydbgYaAydwgHEgLcdtfydbc8S2fgeIdyg8S:va8SJbbbb9BEaeIdwaaaYaKaHEg8Fcx2fgHIdwgRNaeIdzaHIdbg8PNaeIdaMg8Sa8SMMaRNaeIdlaHIdlg8RNaeIdCaRNaeId3Mg8Sa8SMMa8RNaeIdba8PNaeIdxa8RNaeIdKMg8Sa8SMMa8PNaeId8KMMM:lNh80JbbbbJbbjZaqaQaYcdtfydbc8S2fgeIdyg8S:va8SJbbbb9BEaeIdwaaaKcx2fgHIdwg8VNaeIdzaHIdbg8WNaeIdaMg8Sa8SMMa8VNaeIdlaHIdlg8UNaeIdCa8VNaeId3Mg8Sa8SMMa8UNaeIdba8WNaeIdxa8UNaeIdKMg8Sa8SMMa8WNaeId8KMMM:lNh8YaAcwfh3aAclfhwdna8JTmbavaYc8S2fgOIdwa8VNaOIdza8WNaOIdaMg8Sa8SMMa8VNaOIdla8UNaOIdCa8VNaOId3Mg8Sa8SMMa8UNaOIdba8WNaOIdxa8UNaOIdKMg8Sa8SMMa8WNaOId8KMMMh8SayaKa8J2cdtfhHaraYa8J2cltfheaOIdyh8Xa8JhOinaHIdbgIaIa8XNaecxfIdba8VaecwfIdbNa8WaeIdbNa8UaeclfIdbNMMMgIaIM:tNa8SMh8SaHclfhHaeczfheaOcufgOmbkavaLc8S2fgOIdwaRNaOIdza8PNaOIdaMgIaIMMaRNaOIdla8RNaOIdCaRNaOId3MgIaIMMa8RNaOIdba8PNaOIdxa8RNaOIdKMgIaIMMa8PNaOId8KMMMhIaya8Fa8J2cdtfhHaraLa8J2cltfheaOIdyh8Wa8JhOinaHIdbg8Va8Va8WNaecxfIdbaRaecwfIdbNa8PaeIdbNa8RaeclfIdbNMMMg8Va8VM:tNaIMhIaHclfhHaeczfheaOcufgOmbka80aI:lMh80a8Ya8S:lMh8YkawaKa8Fa8Ya809FgeEBdbaAaYaLaeEBdba3a8Ya80aeEUdbaicefgiaE9hmbkasc;Wbfcbcj;qbz:ljjjb8Aa6heaEhHinasc;WbfaeydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbcefBdbaecxfheaHcufgHmbkcbhecbhHinasc;WbfaefgOydbhAaOaHBdbaAaHfhHaeclfgecj;qb9hmbkcbhea6hHinasc;WbfaHydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbgOcefBdbaSaOcdtfaeBdbaHcxfhHaEaecefge9hmbkadak9RgOci9Uh9kdnalTmbcbhea8MhHinaHaeBdbaHclfhHalaecefge9hmbkkcbh0a9hcbalz:ljjjbh9maOcO9Uh9na9kce4h9oasydwh9pcbh8KcbhwdninaDaSawcdtfydbcx2fg3Idwg8Sac9Emea8Ka9k9pmeJFFuuhIdna9oaE9pmbaDaSa9ocdtfydbcx2fIdwJbb;aZNhIkdna8SaI9ETmba8San9ETmba8Ka9n0mdkdna9maQa3ydlgicdtg9qfydbgAfg9rRbba9maQa3ydbgLcdtg9sfydbgHfg9tRbbVmbaXaLfRbbh9udna9eaHcdtfgeclfydbgOaeydbgeSmbaOae9RhKa9paecitfheaaaAcx2fg8Lcwfh5a8Lclfh9vaaaHcx2fg8Acwfh9wa8Aclfh9xcbhHceh8Fdnindna8MaeydbcdtfydbgOaASmba8MaeclfydbcdtfydbgYaASmbaOaYSmbaaaYcx2fgYIdbaaaOcx2fgOIdbg8V:tg8Sa9xIdbaOIdlgR:tg8WNa8AIdba8V:tg8UaYIdlaR:tgIN:tg8Pa8Sa9vIdbaR:tg8XNa8LIdba8V:tg80aIN:tgRNaIa9wIdbaOIdwg8R:tg8YNa8WaYIdwa8R:tg8VN:tg8WaIa5Idba8R:tg81Na8Xa8VN:tgINa8Va8UNa8Ya8SN:tg8Ra8Va80Na81a8SN:tg8SNMMa8Pa8PNa8Wa8WNa8Ra8RNMMaRaRNaIaINa8Sa8SNMMN:rJbbj8:N9FmdkaecwfheaHcefgHaK6h8FaKaH9hmbkka8FceGTmba9ocefh9oxeka3cwfhHdndndndna9uc9:fPdebdkaLheina8MaecdtgefaiBdba8EaefydbgeaL9hmbxikkdnagahaha9sfydbaiSEa8Ea9sfydbgLcdtfydbgecu9hmba8Ea9qfydbheka8Ma9sfaiBdbaehika8MaLcdtfaiBdbka9tce86bba9rce86bbaHIdbg8Sanana8S9DEhna0cefh0cecda9uceSEa8Kfh8KkawcefgwaE9hmbkka0TmddnalTmbcbhKcbhiindna8MaicdtgefydbgOaiSmbaQaOcdtfydbh8FdnaiaQaefydb9hg3mbaqa8Fc8S2fgeaqaic8S2fgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdyka8JTmbavaOc8S2fgeavaic8S2gwfgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdya9iaO2hLarhHa8JhAinaHaLfgeaHaKfgOIdbaeIdbMUdbaeclfgYaOclfIdbaYIdbMUdbaecwfgYaOcwfIdbaYIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbka3mbJbbbbJbbjZaqawfgeIdyg8S:va8SJbbbb9BEaeIdwaaa8Fcx2fgHIdwg8SNaeIdzaHIdbgINaeIdaMg8Va8VMMa8SNaeIdlaHIdlg8VNaeIdCa8SNaeId3Mg8Sa8SMMa8VNaeIdbaINaeIdxa8VNaeIdKMg8Sa8SMMaINaeId8KMMM:lNg8SaBaBa8S9DEhBkaKa9ifhKaicefgial9hmbkcbhHahheindnaeydbgOcuSmbdnaHa8MaOcdtgAfydbgO9hmbcuhOahaAfydbgAcuSmba8MaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkcbhHagheindnaeydbgOcuSmbdnaHa8MaOcdtgAfydbgO9hmbcuhOagaAfydbgAcuSmba8MaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkkaBana8JEhBcbhYabhecbhKindna8MaeydbcdtfydbgHa8MaeclfydbcdtfydbgOSmbaHa8MaecwfydbcdtfydbgASmbaOaASmbabaYcdtfgLaHBdbaLcwfaABdbaLclfaOBdbaYcifhYkaecxfheaKcifgKad6mbkdndna9cTmbaYak9nmba8ZaB9FTmbcbhdabhecbhHindnaoaCaeydbgOcdtfydbcdtfIdbaB9ETmbabadcdtfgAaOBdbaAclfaeclfydbBdbaAcwfaecwfydbBdbadcifhdkaecxfheaHcifgHaY6mbkJFFuuh8ZaJTmeaoheaJhHJFFuuh8SinaeIdbgIa8Sa8SaI9EEg8Va8SaIaB9EgOEh8Sa8Va8ZaOEh8ZaeclfheaHcufgHmbxdkkaYhdkadak0mbxdkkasclfabadalaQz:cjjjbkdndnadak0mbadhOxekdna9cmbadhOxekdna8Zac9FmbadhOxekina8ZJbb;aZNg8Saca8Sac9DEh8VJbbbbh8SdnaJTmbaoheaJhHinaeIdbgIa8SaIa8V9FEa8SaIa8S9EEh8SaeclfheaHcufgHmbkkcbhOabhecbhHindnaoaCaeydbgAcdtfydbcdtfIdba8V9ETmbabaOcdtfgYaABdbaYclfaeclfydbBdbaYcwfaecwfydbBdbaOcifhOkaecxfheaHcifgHad6mbkJFFuuh8ZdnaJTmbaoheaJhHJFFuuhIinaeIdbgRaIaIaR9EEg8PaIaRa8V9EgAEhIa8Pa8ZaAEh8ZaeclfheaHcufgHmbkkdnaOad9hmbadhOxdka8Sanana8S9DEhnaOak9nmeaOhda8Zac9FmbkkdnamcjjjjlGTmbazmbaOTmbcbhQabheinaXaeydbgAfRbbc3thKaecwfgLydbhHdndnahaAcdtg8FfydbaeclfgiydbgCSmbcbhYagaCcdtfydbaA9hmekcjjjj94hYkaeaKaYVaAVBdbaXaCfRbbc3thKdndnahaCcdtfydbaHSmbcbhYagaHcdtfydbaC9hmekcjjjj94hYkaiaKaYVaCVBdbaXaHfRbbc3thYdndnahaHcdtfydbaASmbcbhCaga8FfydbaH9hmekcjjjj94hCkaLaYaCVaHVBdbaecxfheaQcifgQaO6mbkkdnazTmbaOTmbaOheinabazabydbcdtfydbBdbabclfhbaecufgembkkdnaPTmbaPa83an:rNUdbkasyd2gecdtascxffc98fhHdninaeTmeaHydbcbyd;O1jjbH:bjjjbbaHc98fhHaecufhexbkkasc;W;qbf8KjjjjbaOk;Yieouabydlhvabydbclfcbaicdtz:ljjjbhoadci9UhrdnadTmbdnalTmbaehwadhDinaoalawydbcdtfydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbxdkkaehwadhDinaoawydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbkkdnaiTmbcbhDaohwinawydbhqawaDBdbawclfhwaqaDfhDaicufgimbkkdnadci6mbinaecwfydbhwaeclfydbhDaeydbhidnalTmbalawcdtfydbhwalaDcdtfydbhDalaicdtfydbhikavaoaicdtfgqydbcitfaDBdbavaqydbcitfawBdlaqaqydbcefBdbavaoaDcdtfgqydbcitfawBdbavaqydbcitfaiBdlaqaqydbcefBdbavaoawcdtfgwydbcitfaiBdbavawydbcitfaDBdlawawydbcefBdbaecxfhearcufgrmbkkabydbcbBdbk;Podvuv998Jjjjjbca9RgvcFFF;7rBd3av9cFFF;7;3FF:;Fb83dCavcFFF97Bdzav9cFFF;7FFF:;u83dwdnadTmbaicd4hodnabmbdnalTmbcbhrinaealarcdtfydbao2cdtfhwcbhiinavcCfaifgDawaifIdbgqaDIdbgkakaq9EEUdbavcwfaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkarcefgrad9hmbxikkaocdthrcbhwincbhiinavcCfaifgDaeaifIdbgqaDIdbgkakaq9EEUdbavcwfaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkaearfheawcefgwad9hmbxdkkdnalTmbcbhrinabarcx2fgiaealarcdtfydbao2cdtfgwIdbUdbaiawIdlUdlaiawIdwUdwcbhiinavcCfaifgDawaifIdbgqaDIdbgkakaq9EEUdbavcwfaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkarcefgrad9hmbxdkkaocdthlcbhraehwinabarcx2fgiaearao2cdtfgDIdbUdbaiaDIdlUdlaiaDIdwUdwcbhiinavcCfaifgDawaifIdbgqaDIdbgkakaq9EEUdbavcwfaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkawalfhwarcefgrad9hmbkkJbbbbavIdwavIdCgk:tgqaqJbbbb9DEgqavIdxavIdKgx:tgmamaq9DEgqavIdzavId3gm:tgPaPaq9DEhPdnabTmbadTmbJbbbbJbbjZaP:vaPJbbbb9BEhqinabaqabIdbak:tNUdbabclfgvaqavIdbax:tNUdbabcwfgvaqavIdbam:tNUdbabcxfhbadcufgdmbkkaPk8MbabaeadaialavcbcbcbcbcbaoarawaDz:bjjjbk8MbabaeadaialavaoarawaDaqakaxamaPz:bjjjbk:nCoDud99rue99lul998Jjjjjbc;Wb9Rgw8KjjjjbdndnarmbcbhDxekawcxfcbc;Kbz:ljjjb8Aawcuadcx2adc;v:Q;v:Qe0Ecbyd;S1jjbHjjjjbbgqBdxawceBd2aqaeadaicbz:djjjb8AawcuadcdtadcFFFFi0Egkcbyd;S1jjbHjjjjbbgxBdzawcdBd2adcd4adfhmceheinaegicetheaiam6mbkcbhPawcuaicdtgsaicFFFFi0Ecbyd;S1jjbHjjjjbbgzBdCawciBd2dndnar:ZgH:rJbbbZMgO:lJbbb9p9DTmbaO:Ohexekcjjjj94hekaicufhAc:bwhmcbhCadhXcbhQinaChLaeamgKcufaeaK9iEaPgDcefaeaD9kEhYdndnadTmbaYcuf:YhOaqhiaxheadhmindndnaiIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:ljjjbh3cbh5cbh8Eindna3axa8EcdtfydbgCcm4aC7c:v;t;h;Ev2gics4ai7aAGgmcdtfgEydbgecuSmbaeaCSmbcehiina3amaifaAGgmcdtfgEydbgecuSmeaicefhiaeaC9hmbkkaEaCBdba5aecuSfh5a8Ecefg8Ead9hmbxdkkazcFeasz:ljjjb8Acbh5kaDaYa5ar0giEhPaLa5aiEhCdna5arSmbaYaKaiEgmaP9Rcd9imbdndnaQcl0mbdnaX:ZgOaL:Zg8A:taY:Yg8FaD:Y:tgaa8FaK:Y:tgha5:ZggaH:tNNNaOaH:tahNa8Aag:tNa8AaH:taaNagaO:tNM:va8FMJbbbZMgO:lJbbb9p9DTmbaO:Ohexdkcjjjj94hexekaPamfcd9Theka5aXaiEhXaQcefgQcs9hmekkdndnaCmbcihicbhDxekcbhiawakcbyd;S1jjbHjjjjbbg8EBdKawclBd2aPcuf:Yh8AdndnadTmbaqhiaxheadhmindndnaiIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:ljjjbh3cbhDcbh5inaxa5cdtgYfydbgCcm4aC7c:v;t;h;Ev2gics4ai7hecbhidndnina3aeaAGgmcdtfgEydbgecuSmednaxaecdtgEfydbaCSmbaicefgiamfheaiaA9nmekka8EaEfydbhixekaEa5BdbaDhiaDcefhDka8EaYfaiBdba5cefg5ad9hmbkcuaDc32giaDc;j:KM;jb0EhexekazcFeasz:ljjjb8AcbhDcbhekawaecbyd;S1jjbHjjjjbbgeBd3awcvBd2aecbaiz:ljjjbhEavcd4hxdnadTmbdnalTmbaxcdth3a8EhCalheaqhmadhAinaEaCydbc32fgiamIdbaiIdbMUdbaiamclfIdbaiIdlMUdlaiamcwfIdbaiIdwMUdwaiaeIdbaiIdxMUdxaiaeclfIdbaiIdzMUdzaiaecwfIdbaiIdCMUdCaiaiIdKJbbjZMUdKaCclfhCaea3fheamcxfhmaAcufgAmbxdkka8EhmaqheadhCinaEamydbc32fgiaeIdbaiIdbMUdbaiaeclfIdbaiIdlMUdlaiaecwfIdbaiIdwMUdwaiaiIdxJbbbbMUdxaiaiIdzJbbbbMUdzaiaiIdCJbbbbMUdCaiaiIdKJbbjZMUdKamclfhmaecxfheaCcufgCmbkkdnaDTmbaEhiaDheinaiaiIdbJbbbbJbbjZaicKfIdbgO:vaOJbbbb9BEgONUdbaiclfgmaOamIdbNUdbaicwfgmaOamIdbNUdbaicxfgmaOamIdbNUdbaiczfgmaOamIdbNUdbaicCfgmaOamIdbNUdbaic3fhiaecufgembkkcbhCawcuaDcdtgYaDcFFFFi0Egicbyd;S1jjbHjjjjbbgeBdaawcoBd2awaicbyd;S1jjbHjjjjbbg3Bd8KaecFeaYz:ljjjbh5dnadTmbJbbjZJbbjZa8A:vaPceSEaoNgOaONh8Aaxcdthxalheina8Aaec;C1jjbalEgmIdwaEa8EydbgAc32fgiIdC:tgOaONamIdbaiIdx:tgOaONamIdlaiIdz:tgOaONMMNaqcwfIdbaiIdw:tgOaONaqIdbaiIdb:tgOaONaqclfIdbaiIdl:tgOaONMMMhOdndna5aAcdtgifgmydbcuSmba3aifIdbaO9ETmekamaCBdba3aifaOUdbka8Eclfh8EaeaxfheaqcxfhqadaCcefgC9hmbkkaba5aYz:kjjjb8AcrhikaicdthiinaiTmeaic98fgiawcxffydbcbyd;O1jjbH:bjjjbbxbkkawc;Wbf8KjjjjbaDk:Odieui99iu8Jjjjjbca9RgicFFF;7rBd3ai9cFFF;7;3FF:;Fb83dCaicFFF97Bdzai9cFFF;7FFF:;u83dwdndnaembJbbjFhlJbbjFhvJbbjFhoxekadcd4cdthrcbhwincbhdinaicCfadfgDabadfIdbglaDIdbgvaval9EEUdbaicwfadfgDalaDIdbgvaval9DEUdbadclfgdcx9hmbkabarfhbawcefgwae9hmbkaiIdzaiId3:thoaiIdxaiIdK:thvaiIdwaiIdC:thlkJbbbbalalJbbbb9DEglavaval9DEglaoaoal9DEk9DeeuabcFeaicdtz:ljjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd;W1jjbgeabcifc98GfgbBd;W1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;W1jjbgeabcrfc94GfgbBd;W1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;W1jjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;W1jjbfgdBd;W1jjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akk6eiucbhidnadTmbdninabRbbglaeRbbgv9hmeaecefheabcefhbadcufgdmbxdkkalav9Rhikaikk:bedbcjwk9Oeeebeebebbeeebebbbbbebebbbbbbbbbebbbdbbbbbbbebbbebbbdbbbbbbbbbbbeeeeebebbebbebebbbeebbbbbbbbbbbbbbbbbbbbbc;OwkxebbbdbbbjNbb",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(r(t),{}).then(function(m){n=m.instance,n.exports.__wasm_call_ctors()});function r(m){for(var y=new Uint8Array(m.length),v=0;v<m.length;++v){var g=m.charCodeAt(v);y[v]=g>96?g-97:g>64?g-39:g+4}for(var x=0,v=0;v<m.length;++v)y[x++]=y[v]<60?e[y[v]]:(y[v]-60)*64+y[++v];return y.buffer.slice(0,x)}function a(m){if(!m)throw new Error("Assertion failed")}function s(m){return new Uint8Array(m.buffer,m.byteOffset,m.byteLength)}function o(m,y,v){var g=n.exports.sbrk,x=g(y.length*4),_=g(v*4),E=new Uint8Array(n.exports.memory.buffer),T=s(y);E.set(T,x);var w=m(_,x,y.length,v);E=new Uint8Array(n.exports.memory.buffer);var A=new Uint32Array(v);new Uint8Array(A.buffer).set(E.subarray(_,_+v*4)),T.set(E.subarray(x,x+y.length*4)),g(x-g(0));for(var C=0;C<y.length;++C)y[C]=A[y[C]];return[A,w]}function l(m){for(var y=0,v=0;v<m.length;++v){var g=m[v];y=y<g?g:y}return y}function c(m,y,v,g,x,_,E,T,w){var A=n.exports.sbrk,C=A(4),D=A(v*4),k=A(x*_),P=A(v*4),B=new Uint8Array(n.exports.memory.buffer);B.set(s(g),k),B.set(s(y),P);var H=m(D,P,v,k,x,_,E,T,w,C);B=new Uint8Array(n.exports.memory.buffer);var G=new Uint32Array(H);s(G).set(B.subarray(D,D+H*4));var V=new Float32Array(1);return s(V).set(B.subarray(C,C+4)),A(C-A(0)),[G,V[0]]}function u(m,y,v,g,x,_,E,T,w,A,C,D,k){var P=n.exports.sbrk,B=P(4),H=P(v*4),G=P(x*_),V=P(x*T),U=P(w.length*4),F=P(v*4),q=A?P(x):0,X=new Uint8Array(n.exports.memory.buffer);X.set(s(g),G),X.set(s(E),V),X.set(s(w),U),X.set(s(y),F),A&&X.set(s(A),q);var z=m(H,F,v,G,x,_,V,T,U,w.length,q,C,D,k,B);X=new Uint8Array(n.exports.memory.buffer);var ce=new Uint32Array(z);s(ce).set(X.subarray(H,H+z*4));var he=new Float32Array(1);return s(he).set(X.subarray(B,B+4)),P(B-P(0)),[ce,he[0]]}function f(m,y,v,g){var x=n.exports.sbrk,_=x(v*g),E=new Uint8Array(n.exports.memory.buffer);E.set(s(y),_);var T=m(_,v,g);return x(_-x(0)),T}function h(m,y,v,g,x,_,E,T){var w=n.exports.sbrk,A=w(T*4),C=w(v*g),D=w(v*_),k=new Uint8Array(n.exports.memory.buffer);k.set(s(y),C),x&&k.set(s(x),D);var P=m(A,C,v,g,D,_,E,T);k=new Uint8Array(n.exports.memory.buffer);var B=new Uint32Array(P);return s(B).set(k.subarray(A,A+P*4)),w(A-w(0)),B}var d={LockBorder:1,Sparse:2,ErrorAbsolute:4,Prune:8,_InternalDebug:1<<30};return{ready:i,supported:!0,useExperimentalFeatures:!1,compactMesh:function(m){a(m instanceof Uint32Array||m instanceof Int32Array||m instanceof Uint16Array||m instanceof Int16Array),a(m.length%3==0);var y=m.BYTES_PER_ELEMENT==4?m:new Uint32Array(m);return o(n.exports.meshopt_optimizeVertexFetchRemap,y,l(m)+1)},simplify:function(m,y,v,g,x,_){a(m instanceof Uint32Array||m instanceof Int32Array||m instanceof Uint16Array||m instanceof Int16Array),a(m.length%3==0),a(y instanceof Float32Array),a(y.length%v==0),a(v>=3),a(g>=0&&g<=m.length),a(g%3==0),a(x>=0);for(var E=0,T=0;T<(_?_.length:0);++T)a(_[T]in d),a(this.useExperimentalFeatures||_[T]!="Prune"),E|=d[_[T]];var w=m.BYTES_PER_ELEMENT==4?m:new Uint32Array(m),A=c(n.exports.meshopt_simplify,w,m.length,y,y.length/v,v*4,g,x,E);return A[0]=m instanceof Uint32Array?A[0]:new m.constructor(A[0]),A},simplifyWithAttributes:function(m,y,v,g,x,_,E,T,w,A){a(this.useExperimentalFeatures),a(m instanceof Uint32Array||m instanceof Int32Array||m instanceof Uint16Array||m instanceof Int16Array),a(m.length%3==0),a(y instanceof Float32Array),a(y.length%v==0),a(v>=3),a(g instanceof Float32Array),a(g.length%x==0),a(x>=0),a(E==null||E instanceof Uint8Array),a(E==null||E.length==y.length/v),a(T>=0&&T<=m.length),a(T%3==0),a(w>=0),a(Array.isArray(_)),a(x>=_.length),a(_.length<=32);for(var C=0;C<_.length;++C)a(_[C]>=0);for(var D=0,C=0;C<(A?A.length:0);++C)a(A[C]in d),D|=d[A[C]];var k=m.BYTES_PER_ELEMENT==4?m:new Uint32Array(m),P=u(n.exports.meshopt_simplifyWithAttributes,k,m.length,y,y.length/v,v*4,g,x*4,new Float32Array(_),E?new Uint8Array(E):null,T,w,D);return P[0]=m instanceof Uint32Array?P[0]:new m.constructor(P[0]),P},getScale:function(m,y){return a(m instanceof Float32Array),a(m.length%y==0),a(y>=3),f(n.exports.meshopt_simplifyScale,m,m.length/y,y*4)},simplifyPoints:function(m,y,v,g,x,_){return a(this.useExperimentalFeatures),a(m instanceof Float32Array),a(m.length%y==0),a(y>=3),a(v>=0&&v<=m.length/y),g?(a(g instanceof Float32Array),a(g.length%x==0),a(x>=3),a(m.length/y==g.length/x),h(n.exports.meshopt_simplifyPoints,m,m.length/y,y*4,g,x*4,_,v)):h(n.exports.meshopt_simplifyPoints,m,m.length/y,y*4,void 0,0,0,v)}}}();(function(){var t="b9H79Tebbbefx9Geueu9Geub9Gbb9Giuuueu9Gkuuuuuuuuuu99eu9Gvuuuuueu9Gkuuuuuuuuu9999eu9Gruuuuuuub9Gkuuuuuuuuuuueu9Gouuuuuub9Giuuub9GluuuubiOHdilvorwDqrkbiibeilve9Weiiviebeoweuec:q:Odkr:Yewo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9I919P29K9nW79O2Wt79c9V919U9KbeX9TW79O9V9Wt9F9I919P29K9nW79O2Wt7bd39TW79O9V9Wt9F9J9V9T9W91tWJ2917tWV9c9V919U9K7br39TW79O9V9Wt9F9J9V9T9W91tW9nW79O2Wt9c9V919U9K7bDL9TW79O9V9Wt9F9V9Wt9P9T9P96W9nW79O2Wtbql79IV9RbkDwebcekdsPq;L9kHdbkIbabaec9:fgefcufae9Ugeabci9Uadfcufad9Ugbaeab0Ek:oAlPue99eux998Jjjjjbc:We9Rgk8Kjjjjbakc;mbfcbc;Kbz:njjjb8AakcuaocdtgxaocFFFFi0Egmcbyd:e1jjbHjjjjbbgPBd9makceBd:SeakaPBdnakamcbyd:e1jjbHjjjjbbgsBd9qakcdBd:SeakasBd9eakcualcdtalcFFFFi0Ecbyd:e1jjbHjjjjbbgzBd9uakazBd9iakciBd:SeaPcbaxz:njjjbhHalci9UhOdnalTmbaihPalhAinaHaPydbcdtfgCaCydbcefBdbaPclfhPaAcufgAmbkkdnaoTmbcbhPashAaHhCaohXinaAaPBdbaAclfhAaCydbaPfhPaCclfhCaXcufgXmbkkdnalci6mbcbhPaihAinaAcwfydbhCaAclfydbhXasaAydbcdtfgQaQydbgQcefBdbazaQcdtfaPBdbasaXcdtfgXaXydbgXcefBdbazaXcdtfaPBdbasaCcdtfgCaCydbgCcefBdbazaCcdtfaPBdbaAcxfhAaOaPcefgP9hmbkkdnaoTmbaHhAashPaohCinaPaPydbaAydb9RBdbaAclfhAaPclfhPaCcufgCmbkkakamcbyd:e1jjbHjjjjbbgPBd9yakclBd:SeaPaHaxz:mjjjbhmakaOcbyd:e1jjbHjjjjbbgPBd9CakcvBd:SeaPcbaOz:njjjbhLakcuaOcK2alcjjjjd0Ecbyd:e1jjbHjjjjbbgKBd9GakcoBd:SeJbbbbhYdnalci6g8Ambarcd4hxaihAaKhPaOhrJbbbbhEinavaAclfydbax2cdtfgCIdlh3avaAydbax2cdtfgXIdlhYavaAcwfydbax2cdtfgQIdlh5aCIdwh8EaXIdwh8FaQIdwhaaPaCIdbghaXIdbggMaQIdbg8JMJbbnn:vUdbaPclfaXIdlaCIdlMaQIdlMJbbnn:vUdbaQIdwh8KaCIdwh8LaXIdwh8MaPcxfa3aY:tg3aaa8F:tgaNa5aY:tg5a8Ea8F:tg8EN:tgYJbbbbJbbjZahag:tgha5Na8Jag:tgga3N:tg8Fa8FNaYaYNa8EagNaaahN:tgYaYNMM:rgg:vagJbbbb9BEg3NUdbaPczfaYa3NUdbaPcCfa8Fa3NUdbaPcwfa8Ka8Ma8LMMJbbnn:vUdbaEagMhEaAcxfhAaPcKfhParcufgrmbkaEaO:Z:vJbbbZNhYkakcuaOcdtalcFFFF970Ecbyd:e1jjbHjjjjbbgCBd9KakcrBd:SeaYaD:ZN:rhYdna8AmbcbhPaChAinaAaPBdbaAclfhAaOaPcefgP9hmbkkaYJbbbZNh8MakcuaOcltalcFFFFd0Ecbyd:e1jjbHjjjjbbg8ABd9OakcwBd:Secba8AaKaCaOz:djjjb8Aakaocbyd:e1jjbHjjjjbbgPBd2aPcFeaoz:njjjbhrakc8Wfcwf9cb83ibak9cb83i8WcbhPJbbbbhEJbbbbh5Jbbbbh8EJbbbbhYJbbbbh8FJbbbbhgcbhlinJbbbbh3dnaPTmbJbbjZaP:Z:vh3kaka8Ea3NgaUdaaka5a3NghUd3akaEa3Ng8JUdKJbbbbh3dnagagNaYaYNa8Fa8FNMMg8KJbbbb9BmbJbbjZa8K:r:vh3kakaga3NUd8Saka8Fa3NUdyakaYa3NUd8Kdndndnakyd8WgQakydUgAakcKfaeaiakc;abfaKamara8Maqz:ejjjbgCcuSmbdnaPaD9pmbaAaraiaCcx2fgXydbfRbbcFeSfaraXclfydbfRbbcFeSfaraXcwfydbfRbbcFeSfaw9nmdkaQaAcbaeaiakc;abfaKamara8MJbbbbz:ejjjbgCcu9hmekakaaUdCakahUdzaka8JUdxakcuBdwakcFFF;7rBdla8AcbaKaLakcxfakcwfakclfz:fjjjbakydwgCcuSmekdnakc8WfaiaCcx2fgOydbgPaOclfydbgAaOcwfydbgXarabaeadalawaDz:gjjjbTmbalcefhlJbbbbhEJbbbbh5Jbbbbh8EJbbbbhYJbbbbh8FJbbbbhgkamaPcdtfgPaPydbcufBdbamaAcdtfgPaPydbcufBdbamaXcdtfgPaPydbcufBdbcbhXinazasaOaXcdtfydbcdtgAfydbcdtfgxhPaHaAfgvydbgQhAdnaQTmbdninaPydbaCSmeaPclfhPaAcufgATmdxbkkaPaxaQcdtfc98fydbBdbavavydbcufBdbkaXcefgXci9hmbkaKaCcK2fgPIdbh3aPIdlhaaPIdwhhaPIdxh8JaPIdzh8KaPIdCh8LaLaCfce86bbaga8LMhga8Fa8KMh8FaYa8JMhYa8EahMh8Ea5aaMh5aEa3MhEakyd88hPxekkdnaPTmbdnakyd80gAaPci2fgCciGTmbadaCfcbaPaAcu7fciGcefz:njjjb8AkabalcltfgPak8Pi8W83dbaPcwfakc8Wfcwf8Pib83dbalcefhlkcahPdninaPc98Smeakc;mbfaPfydbcbydj1jjbH:bjjjbbaPc98fhPxbkkakc:Wef8Kjjjjbalk;3vivuv99lu8Jjjjjbca9Rgv8Kjjjjbdndnalcw0mbaiydbhoaeabcitfgralcdtcufBdlaraoBdbdnalcd6mbaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkkalabfhrxekcbhDavczfcwfcbBdbav9cb83izavcwfcbBdbav9cb83ibJbbjZhqJbbjZhkinadaiaDcdtfydbcK2fhwcbhrinavczfarfgoawarfIdbgxaoIdbgm:tgPakNamMgmUdbavarfgoaPaxam:tNaoIdbMUdbarclfgrcx9hmbkJbbjZaqJbbjZMgq:vhkaDcefgDal9hmbkcbhoadcbcecdavIdlgxavIdwgm9GEgravIdbgPam9GEaraPax9GEgscdtgrfhzavczfarfIdbhxaihralhwinaiaocdtfgDydbhHaDarydbgOBdbaraHBdbarclfhraoazaOcK2fIdbax9Dfhoawcufgwmbkaeabcitfhrdndnaocv6mbaoalc98f6mekaraiydbBdbaralcdtcufBdlaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkalabfhrxekaraxUdbaeabcitfgrarydlc98GasVBdlabcefaeadaiaoz:djjjbhwararydlciGawabcu7fcdtVBdlawaeadaiaocdtfalao9Rz:djjjbhrkavcaf8Kjjjjbark;Bloeue99vue99Due99dndnaembcuhkxekJbbjZaq:thxaiabcdtfhmavydbhPavydlhsavydwhzcbhHJFFuuhOcvhbcuhkindnaPamaHcdtfydbcdtgvfydbgATmbazasavfydbcdtfhiindndnawalaiydbgCcx2fgvclfydbgXfRbbcFeSawavydbgQfRbbcFeSfawavcwfydbgLfRbbcFeSfgKmbcbhvxekcehvaraQcdtfydbgYceSmbcehvaraXcdtfydbg8AceSmbcehvaraLcdtfydbgEceSmbdna8AcdSaYcdSfaEcdSfcd6mbaKcefhvxekaKcdfhvkdnavab9kmbdndnadTmbaoaCcK2fgQIdwadIdw:tg3a3NaQIdbadIdb:tg3a3NaQIdladIdl:tg3a3NMM:raD:vaxNJbbjZMJ9VO:d86JbbjZaQIdCadIdCNaQIdxadIdxNaQIdzadIdzNMMaqN:tg3a3J9VO:d869DENh3xekaraQcdtfydbaraXcdtfydbfaraLcdtfydbfc99f:Zh3kaCakavab6a3aO9DVgQEhkavabaQEhba3aOaQEhOkaiclfhiaAcufgAmbkkaHcefgHae9hmbkkakk;bddlue99dndndnabaecitfgrydlgwciGgDci9hmbarclfhqxekinabcbawcd4gwalaDcdtfIdbabaecitfIdb:tgkJbbbb9FEgDaecefgefadaialavaoz:fjjjbak:laoIdb9FTmdabaDaw7aefgecitfgrydlgwciGgDci9hmbkarclfhqkabaecitfhecuhbindnaiaeydbgDfRbbmbadaDcK2fgrIdwalIdw:tgkakNarIdbalIdb:tgkakNarIdlalIdl:tgkakNMM:rgkaoIdb9DTmbaoakUdbavaDBdbaqydbhwkaecwfheabcefgbawcd46mbkkk;yleoudnaladfgkRbbcFeSalaefgxRbbgmcFeSfabydwgPfalaifgsRbbcFeSfaD0abydxaq9pVgzce9hmbavawcltfgmab8Pdb83dbamcwfabcwfgm8Pdb83dbdndnamydbmbcbhqxekcbhDaohminalamabydbcdtfydbfcFe86bbamclfhmaDcefgDabydwgq6mbkkdnabydxglci2gDabydlgmfgPciGTmbaraPfcbalamcu7fciGcefz:njjjb8Aabydxci2hDabydlhmabydwhqkab9cb83dwababydbaqfBdbabaDcifc98GamfBdlaxRbbhmcbhPkdnamcFeGcFe9hmbaxaP86bbababydwgmcefBdwaoabydbcdtfamcdtfaeBdbkdnakRbbcFe9hmbakabydw86bbababydwgmcefBdwaoabydbcdtfamcdtfadBdbkdnasRbbcFe9hmbasabydw86bbababydwgmcefBdwaoabydbcdtfamcdtfaiBdbkarabydlfabydxci2faxRbb86bbarabydlfabydxci2fcefakRbb86bbarabydlfabydxci2fcdfasRbb86bbababydxcefBdxazk;Ckovud99euv99eul998Jjjjjbc:G;ae9Rgo8KjjjjbdndnadTmbavcd4hrcbhwcbhDindnaiaeclfydbar2cdtfgvIdbaiaeydbar2cdtfgqIdbgk:tgxaiaecwfydbar2cdtfgmIdlaqIdlgP:tgsNamIdbak:tgzavIdlaP:tgPN:tgkakNaPamIdwaqIdwgH:tgONasavIdwaH:tgHN:tgPaPNaHazNaOaxN:tgxaxNMM:rgsJbbbb9Bmbaoc:G:qefawcx2fgAakas:vUdwaAaxas:vUdlaAaPas:vUdbaocafawc8K2fgAaq8Pdb83dbaAav8Pdb83dxaAam8Pdb83dKaAcwfaqcwfydbBdbaAcCfavcwfydbBdbaAcafamcwfydbBdbawcefhwkaecxfheaDcifgDad6mbkab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbawTmeao9cb83iKao9cb83izaoczfaocafawci2z1jjjbaoIdKhCaoIdChXaoIdzhQao9cb83iwao9cb83ibaoaoc:G:qefawz1jjjbJbbjZhkaoIdwgPJbbbbJbbjZaPaPNaoIdbgPaPNaoIdlgsasNMM:rgx:vaxJbbbb9BEgzNhxasazNhsaPazNhzaoc:G:qefheawhvinaecwfIdbaxNaeIdbazNasaeclfIdbNMMgPakaPak9DEhkaecxfheavcufgvmbkabaCUdwabaXUdlabaQUdbabaoId3UdxdndnakJ;n;m;m899FmbJbbbbhPaoc:G:qefheaocafhvinaCavcwfIdb:taecwfIdbgHNaQavIdb:taeIdbgONaXavclfIdb:taeclfIdbgLNMMaxaHNazaONasaLNMM:vgHaPaHaP9EEhPavc8KfhvaecxfheawcufgwmbkabazUd3abc8KfaxUdbabcafasUdbabcKfaCaxaPN:tUdbabcCfaXasaPN:tUdbabaQazaPN:tUdzabJbbjZakakN:t:rgkUdydndnaxJbbj:;axJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;axJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohexekcjjjj94hekabc8Ufae86bbdndnasJbbj:;asJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;asJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohvxekcjjjj94hvkabcRfav86bbdndnazJbbj:;azJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;azJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohqxekcjjjj94hqkabaq86b8SdndnaecKtcK91:YJbb;:9c:vax:t:lavcKtcK91:YJbb;:9c:vas:t:laqcKtcK91:YJbb;:9c:vaz:t:lakMMMJbb;:9cNJbbjZMgk:lJbbb9p9DTmbak:Ohexekcjjjj94hekaecFbaecFb9iEhexekabcjjj;8iBdycFbhekabae86b8Vxekab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbkaoc:G;aef8Kjjjjbk:mvdouq99cbhi8Jjjjjbca9RglczfcwfcbBdbal9cb83izalcwfcbBdbal9cb83ibdnadTmbcbhvinaeaifhocbhrinalczfarfgwavawydbgwaoarfIdbgDaearawcx2ffIdb9DEBdbalarfgwavawydbgwaDaearawcx2ffIdb9EEBdbarclfgrcx9hmbkaicxfhiavcefgvad9hmbkkJbbbbhDcbhrcbhicbhvinaealarfydbcx2fgwIdwaealczfarfydbcx2fgoIdw:tgqaqNawIdbaoIdb:tgqaqNawIdlaoIdl:tgqaqNMMgqaDaqaD9EgwEhDavaiawEhiarclfhravcefgvci9hmbkaealczfaicdtgvfydbcx2fgrIdwaealavfydbcx2fglIdwMJbbbZNhqarIdlalIdlMJbbbZNhkarIdbalIdbMJbbbZNhxaD:rJbbbZNhDdnadTmbindnaecwfIdbgmaq:tgPaPNaeIdbgsax:tgPaPNaeclfIdbgzak:tgPaPNMMgPaDaDN9ETmbaqaDaP:rgH:vJbbbZNJbbbZMgPNamJbbjZaP:tgONMhqakaPNazaONMhkaxaPNasaONMhxaDaHMJbbbZNhDkaecxfheadcufgdmbkkabaDUdxabaqUdwabakUdlabaxUdbkjeeiu8Jjjjjbcj8W9Rgr8Kjjjjbaici2hwdnaiTmbawceawce0EhDarhiinaiaeadRbbcdtfydbBdbadcefhdaiclfhiaDcufgDmbkkabarawaladaoz:hjjjbarcj8Wf8Kjjjjbk:Ylequ8Jjjjjbcjx9Rgl8Kjjjjbcbhvalcjqfcbaiz:njjjb8AdndnadTmbcjehoaehrincuhwarhDcuhqavhkdninawakaoalcjqfaDcefRbbfRbb9RcFeGci6aoalcjqfaDRbbfRbb9RcFeGci6faoalcjqfaDcdfRbbfRbb9RcFeGci6fgxaq9mgmEhwdnammbaxce0mdkaxaqaxaq9kEhqaDcifhDadakcefgk9hmbkkaeawci2fgDcdfRbbhqaDcefRbbhxaDRbbhkaeavci2fgDcifaDawav9Rci2z:qjjjb8Aakalcjqffaocefgo86bbaxalcjqffao86bbaDcdfaq86bbaDcefax86bbaDak86bbaqalcjqffao86bbarcifhravcefgvad9hmbkalcFeaiz:njjjbhoadci2gDceaDce0EhqcbhxindnaoaeRbbgkfgwRbbgDcFe9hmbawax86bbaocjdfaxcdtfabakcdtfydbBdbaxhDaxcefhxkaeaD86bbaecefheaqcufgqmbkaxcdthDxekcbhDkabalcjdfaDz:mjjjb8Aalcjxf8Kjjjjbk9teiucbcbyd11jjbgeabcifc98GfgbBd11jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd11jjbgeabcrfc94GfgbBd11jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd11jjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd11jjbfgdBd11jjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akk:;Deludndndnadch9pmbabaeSmdaeabadfgi9Rcbadcet9R0mekabaead;8qbbxekaeab7ciGhldndndnabae9pmbdnalTmbadhvabhixikdnabciGmbadhvabhixdkadTmiabaeRbb86bbadcufhvdnabcefgiciGmbaecefhexdkavTmiabaeRbe86beadc9:fhvdnabcdfgiciGmbaecdfhexdkavTmiabaeRbd86bdadc99fhvdnabcifgiciGmbaecifhexdkavTmiabaeRbi86biabclfhiaeclfheadc98fhvxekdnalmbdnaiciGTmbadTmlabadcufgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc9:fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc99fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc98fgdfaeadfRbb86bbkadcl6mbdnadc98fgocd4cefciGgiTmbaec98fhlabc98fhvinavadfaladfydbBdbadc98fhdaicufgimbkkaocx6mbaec9Wfhvabc9WfhoinaoadfgicxfavadfglcxfydbBdbaicwfalcwfydbBdbaiclfalclfydbBdbaialydbBdbadc9Wfgdci0mbkkadTmdadhidnadciGglTmbaecufhvabcufhoadhiinaoaifavaifRbb86bbaicufhialcufglmbkkadcl6mdaec98fhlabc98fhvinavaifgecifalaifgdcifRbb86bbaecdfadcdfRbb86bbaecefadcefRbb86bbaeadRbb86bbaic98fgimbxikkavcl6mbdnavc98fglcd4cefcrGgdTmbavadcdt9RhvinaiaeydbBdbaeclfheaiclfhiadcufgdmbkkalc36mbinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaiaeydzBdzaiaeydCBdCaiaeydKBdKaiaeyd3Bd3aecafheaicafhiavc9Gfgvci0mbkkavTmbdndnavcrGgdmbavhlxekavc94GhlinaiaeRbb86bbaicefhiaecefheadcufgdmbkkavcw6mbinaiaeRbb86bbaiaeRbe86beaiaeRbd86bdaiaeRbi86biaiaeRbl86blaiaeRbv86bvaiaeRbo86boaiaeRbr86braicwfhiaecwfhealc94fglmbkkabkkAebcjwkxebbbdbbbzNbb",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var n,i=WebAssembly.instantiate(r(t),{}).then(function(m){n=m.instance,n.exports.__wasm_call_ctors()});function r(m){for(var y=new Uint8Array(m.length),v=0;v<m.length;++v){var g=m.charCodeAt(v);y[v]=g>96?g-97:g>64?g-39:g+4}for(var x=0,v=0;v<m.length;++v)y[x++]=y[v]<60?e[y[v]]:(y[v]-60)*64+y[++v];return y.buffer.slice(0,x)}function a(m){if(!m)throw new Error("Assertion failed")}function s(m){return new Uint8Array(m.buffer,m.byteOffset,m.byteLength)}var o=48,l=16;function c(m,y){var v=m.meshlets[y*4+0],g=m.meshlets[y*4+1],x=m.meshlets[y*4+2],_=m.meshlets[y*4+3];return{vertices:m.vertices.subarray(v,v+x),triangles:m.triangles.subarray(g,g+_*3)}}function u(m,y,v,g,x,_,E){var T=n.exports.sbrk,w=n.exports.meshopt_buildMeshletsBound(m.length,x,_),A=T(w*l),C=T(w*x*4),D=T(w*_*3),k=T(m.byteLength),P=T(y.byteLength),B=new Uint8Array(n.exports.memory.buffer);B.set(s(m),k),B.set(s(y),P);var H=n.exports.meshopt_buildMeshlets(A,C,D,k,m.length,P,v,g,x,_,E);B=new Uint8Array(n.exports.memory.buffer);for(var G=B.subarray(A,A+H*l),V=new Uint32Array(G.buffer,G.byteOffset,G.byteLength/4).slice(),U=0;U<H;++U){var F=V[U*4+0],q=V[U*4+1],v=V[U*4+2],X=V[U*4+3];n.exports.meshopt_optimizeMeshlet(C+F*4,D+q,X,v)}var z=V[(H-1)*4+0],ce=V[(H-1)*4+1],he=V[(H-1)*4+2],$=V[(H-1)*4+3],Me=z+he,Se=ce+($*3+3&-4),pe={meshlets:V,vertices:new Uint32Array(B.buffer,C,Me).slice(),triangles:new Uint8Array(B.buffer,D,Se*3).slice(),meshletCount:H};return T(A-T(0)),pe}function f(m){var y=new Float32Array(n.exports.memory.buffer,m,o/4);return{centerX:y[0],centerY:y[1],centerZ:y[2],radius:y[3],coneApexX:y[4],coneApexY:y[5],coneApexZ:y[6],coneAxisX:y[7],coneAxisY:y[8],coneAxisZ:y[9],coneCutoff:y[10]}}function h(m,y,v,g){var x=n.exports.sbrk,_=[],E=x(y.byteLength),T=x(m.vertices.byteLength),w=x(m.triangles.byteLength),A=x(o),C=new Uint8Array(n.exports.memory.buffer);C.set(s(y),E),C.set(s(m.vertices),T),C.set(s(m.triangles),w);for(var D=0;D<m.meshletCount;++D){var k=m.meshlets[D*4+0],P=m.meshlets[D*4+0+1],B=m.meshlets[D*4+0+3];n.exports.meshopt_computeMeshletBounds(A,T+k*4,w+P,B,E,v,g),_.push(f(A))}return x(E-x(0)),_}function d(m,y,v,g){var x=n.exports.sbrk,_=x(o),E=x(m.byteLength),T=x(y.byteLength),w=new Uint8Array(n.exports.memory.buffer);w.set(s(m),E),w.set(s(y),T),n.exports.meshopt_computeClusterBounds(_,E,m.length,T,v,g);var A=f(_);return x(_-x(0)),A}return{ready:i,supported:!0,buildMeshlets:function(m,y,v,g,x,_){a(m.length%3==0),a(y instanceof Float32Array),a(y.length%v==0),a(v>=3),a(g<=255||g>0),a(x<=512),a(x%4==0),_=_||0;var E=m.BYTES_PER_ELEMENT==4?m:new Uint32Array(m);return u(E,y,y.length/v,v*4,g,x,_)},computeClusterBounds:function(m,y,v){a(m.length%3==0),a(m.length/3<=512),a(y instanceof Float32Array),a(y.length%v==0),a(v>=3);var g=m.BYTES_PER_ELEMENT==4?m:new Uint32Array(m);return d(g,y,y.length/v,v*4)},computeMeshletBounds:function(m,y,v){return a(m.meshletCount!=0),a(y instanceof Float32Array),a(y.length%v==0),a(v>=3),h(m,y,y.length/v,v*4)},extractMeshlet:function(m,y){return a(y>=0&&y<m.meshletCount),c(m,y)}}})();function gFe(t,e,n,i){if(!t||!e||i==="off")return{geometries:[],materials:[]};let r=[],a=[];if(i==="auto"){e.computeBoundingSphere();const l=e.boundingSphere.radius,c=e.attributes.position.count;c>1e4?r=[.2,.05,.01]:c>2e3?r=[.4,.1,.03]:c>500?r=[.6,.2,.05]:r=[.85,.4,.1];const u=Math.sqrt(l+1e-5);a=[1,2,3].map(h=>h*u)}else r=i.map(l=>l[1]),a=i.map(l=>l[0]);const s=[],o=[];return r.forEach((l,c)=>{const u=Math.floor(e.index.array.length*l/3)*3,f=e.clone(),h=mFe.simplify(new Uint32Array(f.index.array),new Float32Array(f.attributes.position.array),3,u,.01,["LockBorder"])[0];f.index.array.set(h),f.index.needsUpdate=!0,f.setDrawRange(0,h.length);const d=Array.isArray(n)?n.map(m=>m.clone()):n.clone();t.addLOD(f,d,a[c]),s.push(f),Array.isArray(d)?o.push(...d):o.push(d)}),{geometries:s,materials:o}}const one=ke.forwardRef(function(e,n){const[i,r]=ke.useState(null);ke.useImperativeHandle(n,()=>i,[i]);const a=I.useMemo(()=>new Y,[]),s=I.useMemo(()=>new Hn,[]),o=I.useMemo(()=>new Y(1,1,1),[]),l=ui(c=>c.gl);return I.useEffect(()=>{const c=e.batched_positions.byteLength/(3*Float32Array.BYTES_PER_ELEMENT),u=new qn(e.geometry.clone(),e.material,{capacity:c,renderer:l});let f=[],h=[];if(e.lod!=="off"){const d=gFe(u,e.geometry,e.material,e.lod);f=d.geometries,h=d.materials}return r(u),()=>{u.disposeBVH(),u.dispose(),f.forEach(d=>d.dispose()),h.forEach(d=>d.dispose())}},[e.geometry,e.lod,e.material]),I.useEffect(()=>{if(!i)return;const c=e.batched_positions.byteLength/(3*Float32Array.BYTES_PER_ELEMENT);i.instancesCount!==c&&(i.capacity<c&&i.resizeBuffers(c),i.clearInstances(),i.addInstances(c,()=>{}),i.computeBVH());const u=new DataView(e.batched_positions.buffer,e.batched_positions.byteOffset,e.batched_positions.byteLength),f=new DataView(e.batched_wxyzs.buffer,e.batched_wxyzs.byteOffset,e.batched_wxyzs.byteLength),h=e.batched_scales?new DataView(e.batched_scales.buffer,e.batched_scales.byteOffset,e.batched_scales.byteLength):null;i.updateInstances((d,m)=>{const y=m*3*4,v=m*4*4,g=e.batched_scales&&e.batched_scales.byteLength===e.batched_wxyzs.byteLength/4*3?m*3*4:m*4;if(a.set(u.getFloat32(y,!0),u.getFloat32(y+4,!0),u.getFloat32(y+8,!0)),s.set(f.getFloat32(v+4,!0),f.getFloat32(v+8,!0),f.getFloat32(v+12,!0),f.getFloat32(v,!0)),h)if(e.batched_scales.byteLength===e.batched_wxyzs.byteLength/4*3)o.set(h.getFloat32(g,!0),h.getFloat32(g+4,!0),h.getFloat32(g+8,!0));else{const x=h.getFloat32(g,!0);o.setScalar(x)}else o.set(1,1,1);d.position.copy(a),d.quaternion.copy(s),d.scale.copy(o)})},[e.batched_positions,e.batched_wxyzs,e.batched_scales,i]),ke.useEffect(()=>{if(!(i===null||e.batched_colors===null))for(let c=0;c<i.instancesCount;c++){let u;e.batched_colors.byteLength==3?u=new Ut(e.batched_colors[0]/255,e.batched_colors[1]/255,e.batched_colors[2]/255):e.batched_colors.byteLength===i.instancesCount*3?u=new Ut(e.batched_colors[c*3]/255,e.batched_colors[c*3+1]/255,e.batched_colors[c*3+2]/255):(console.error(`Invalid batched_colors length: ${e.batched_colors.byteLength}, expected 3 or ${i.instancesCount*3}`),u=new Ut(1,1,1)),i.setColorAt(c,u)}},[e.batched_colors,i]),I.useEffect(()=>{i&&(i.castShadow=e.cast_shadow,i.receiveShadow=e.receive_shadow,i.LODinfo&&i.LODinfo.objects&&i.LODinfo.objects.forEach(c=>{c.castShadow=e.cast_shadow,c.receiveShadow=e.receive_shadow}))},[e.cast_shadow,e.receive_shadow,i]),R.jsxs(R.Fragment,{children:[i&&R.jsx("primitive",{object:i}),e.clickable&&R.jsx(JM,{geometry:e.geometry,batched_positions:e.batched_positions,batched_wxyzs:e.batched_wxyzs,batched_scales:e.batched_scales})]})}),bFe=ke.forwardRef(function({children:e,...n},i){const a=ke.useContext(xi).useSceneTree(l=>l[n.name]?.clickable)??!1,s=I.useMemo(()=>{const l=wS({material:n.props.material,wireframe:n.props.wireframe,opacity:n.props.opacity,flat_shading:n.props.flat_shading,side:n.props.side});return n.props.opacity!==null&&n.props.opacity<1&&(l.transparent=!0),l},[n.props.material,n.props.wireframe,n.props.opacity,n.props.flat_shading,n.props.side]),o=I.useMemo(()=>{const l=new An;return l.setAttribute("position",new Tn(new Float32Array(n.props.vertices.buffer.slice(n.props.vertices.byteOffset,n.props.vertices.byteOffset+n.props.vertices.byteLength)),3)),l.setIndex(new Tn(new Uint32Array(n.props.faces.buffer.slice(n.props.faces.byteOffset,n.props.faces.byteOffset+n.props.faces.byteLength)),1)),l.computeVertexNormals(),l.computeBoundingSphere(),l},[n.props.vertices.buffer,n.props.faces.buffer]);return R.jsxs("group",{ref:i,children:[R.jsx(one,{geometry:o,material:s,batched_positions:n.props.batched_positions,batched_wxyzs:n.props.batched_wxyzs,batched_scales:n.props.batched_scales,batched_colors:n.props.batched_colors,lod:n.props.lod,cast_shadow:n.props.cast_shadow,receive_shadow:n.props.receive_shadow,clickable:a}),e]})}),lne=new _Me;lne.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");function yFe(t){t instanceof fi&&(t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(e=>{xH(e)}):xH(t.material)))}function cne(t){const[e,n]=ke.useState(),[i,r]=ke.useState([]),a=ke.useRef(null);return ke.useEffect(()=>{const s=new BEe;return s.setDRACOLoader(lne),s.parse(new Uint8Array(t).buffer,"",o=>{o.animations&&o.animations.length&&(a.current=new pZ(o.scene),o.animations.forEach(c=>{a.current.clipAction(c).play()}));const l=[];o?.scene.traverse(c=>{c instanceof fi&&(c.geometry.computeVertexNormals(),c.geometry.computeBoundingSphere(),l.push(c))}),r(l),n(o)},o=>{console.log("Error loading GLB!"),console.log(o)}),()=>{a.current&&a.current.stopAllAction(),e&&e.scene.traverse(yFe)}},[t]),{gltf:e,meshes:i,mixerRef:a}}const vFe=ke.forwardRef(function({children:e,...n},i){const{gltf:r,meshes:a,mixerRef:s}=cne(n.props.glb_data);ke.useEffect(()=>{r&&r.scene.traverse(m=>{m instanceof fi&&(m.castShadow=n.props.cast_shadow,m.receiveShadow=n.props.receive_shadow)})},[r,n.props.cast_shadow,n.props.receive_shadow]),fa((m,y)=>{s.current?.update(y)});const o=ui(m=>m.gl),l=ke.useMemo(()=>o.getDrawingBufferSize(new ft),[o]),c=ke.useMemo(()=>{const m=new MB({side:ba});return m.thickness=10,m.color=new Ut(16514816),m.opacity=.8,m.size=l,m.transparent=!0,m.screenspace=!0,m.toneMapped=!0,m},[l]),u=ke.useRef(null),f=ke.useContext(SS),h=ke.useContext(xi);fa(()=>{u.current!==null&&(u.current.visible=f.current.isHovered)});const d=h.useSceneTree(m=>m[n.name]?.clickable)??!1;return r?R.jsxs("group",{ref:i,children:[R.jsx("primitive",{object:r.scene,scale:n.props.scale}),d?R.jsx("group",{ref:u,visible:!1,children:a.map((m,y)=>R.jsx("mesh",{geometry:m.geometry,material:c},y))}):null,e]}):null}),xFe=ke.forwardRef(function({children:e,...n},i){const a=ke.useContext(xi).useSceneTree(c=>c[n.name]?.clickable)??!1,{gltf:s}=cne(n.props.glb_data),{geometry:o,material:l}=I.useMemo(()=>{if(!s)return{geometry:null,material:null};const c=[],u=[];s.scene.traverse(d=>{d instanceof fi&&d.parent&&(d.geometry.applyMatrix4(d.matrixWorld),c.push(d.geometry),u.push(d.material))});const f=c.length===1?c[0].clone():xEe(c),h=u.length===1?u[0]:u;return{geometry:f,material:h}},[s]);return!o||!l?null:R.jsxs("group",{ref:i,children:[R.jsx(one,{geometry:o,material:l,batched_positions:n.props.batched_positions,batched_wxyzs:n.props.batched_wxyzs,batched_scales:n.props.batched_scales,batched_colors:null,lod:n.props.lod,cast_shadow:n.props.cast_shadow,receive_shadow:n.props.receive_shadow,clickable:a}),e]})});function _Fe(t,e){const n=new ft;return n.x=(e[0]+.5)/t.mutable.current.canvas.clientWidth,n.y=(e[1]+.5)/t.mutable.current.canvas.clientHeight,n}function ql(t){return t[0]<<16|t[1]<<8|t[2]}function SFe(t){return ke.useContext(xi).useSceneTree(i=>i[t.name]?.labelVisible)?R.jsx(pg,{children:R.jsx("span",{style:{backgroundColor:"rgba(240, 240, 240, 0.9)",color:"#333",borderRadius:"0.2rem",userSelect:"none",padding:"0.1em 0.2em"},children:t.name})}):null}function QO(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=[];for(let i=0;i<e.byteLength;i+=12)n.push([e.getFloat32(i,!0),e.getFloat32(i+4,!0),e.getFloat32(i+8,!0)]);return n}function wFe(t,e,n){if(t===void 0)return{makeObject:()=>null};switch(t.type){case"FrameMessage":return{makeObject:(i,r)=>R.jsx(XAe,{ref:i,showAxes:t.props.show_axes,axesLength:t.props.axes_length,axesRadius:t.props.axes_radius,originRadius:t.props.origin_radius,originColor:ql(t.props.origin_color),children:r})};case"BatchedAxesMessage":return{makeObject:(i,r)=>R.jsx(YAe,{ref:i,batched_wxyzs:t.props.batched_wxyzs,batched_positions:t.props.batched_positions,batched_scales:t.props.batched_scales,axes_length:t.props.axes_length,axes_radius:t.props.axes_radius,children:r}),computeClickInstanceIndexFromInstanceId:i=>Math.floor(i/3)};case"GridMessage":{const i=new Hn().setFromEuler(t.props.plane=="xz"?new li(0,0,0):t.props.plane=="xy"?new li(Math.PI/2,0,0):t.props.plane=="yx"?new li(0,Math.PI/2,Math.PI/2):t.props.plane=="yz"?new li(0,0,Math.PI/2):t.props.plane=="zx"?new li(0,Math.PI/2,0):new li(-Math.PI/2,0,-Math.PI/2)),r=new Hn().setFromEuler(new li(-Math.PI/2,0,0)).premultiply(i);let a;return t.props.shadow_opacity>0?a=R.jsxs("mesh",{receiveShadow:!0,position:[0,0,-.01],quaternion:r,children:[R.jsx("planeGeometry",{args:[t.props.width,t.props.height]}),R.jsx("shadowMaterial",{opacity:t.props.shadow_opacity,color:0,depthWrite:!1})]}):a=null,{makeObject:(s,o)=>R.jsxs("group",{ref:s,children:[R.jsx(yQ,{args:[t.props.width,t.props.height,t.props.width_segments,t.props.height_segments],side:$r,cellColor:ql(t.props.cell_color),cellThickness:t.props.cell_thickness,cellSize:t.props.cell_size,sectionColor:ql(t.props.section_color),sectionThickness:t.props.section_thickness,sectionSize:t.props.section_size,quaternion:i}),a,o]})}}case"PointCloudMessage":return{makeObject:(i,r)=>R.jsx(qAe,{ref:i,...t,children:r})};case"SkinnedMeshMessage":return{makeObject:(i,r)=>R.jsx(jBe,{ref:i,...t,children:r})};case"MeshMessage":return{makeObject:(i,r)=>R.jsx(BBe,{ref:i,...t,children:r})};case"BoxMessage":return{makeObject:(i,r)=>R.jsx(FBe,{ref:i,...t,children:r})};case"IcosphereMessage":return{makeObject:(i,r)=>R.jsx(zBe,{ref:i,...t,children:r})};case"BatchedMeshesMessage":return{makeObject:(i,r)=>R.jsx(bFe,{ref:i,...t,children:r}),computeClickInstanceIndexFromInstanceId:t.type==="BatchedMeshesMessage"?i=>i:void 0};case"CameraFrustumMessage":return{makeObject:(i,r)=>R.jsx(JAe,{ref:i,...t,children:r})};case"TransformControlsMessage":{const{send:i,flush:r}=BQ(e,50);let a=!1;return{makeObject:(s,o)=>R.jsx("group",{onClick:l=>l.stopPropagation(),children:R.jsx(LQ,{ref:s,scale:t.props.scale,lineWidth:t.props.line_width,fixed:t.props.fixed,activeAxes:t.props.active_axes,disableAxes:t.props.disable_axes,disableSliders:t.props.disable_sliders,disableRotations:t.props.disable_rotations,disableScaling:!0,translationLimits:t.props.translation_limits,rotationLimits:t.props.rotation_limits,depthTest:t.props.depth_test,opacity:t.props.opacity,onDragStart:()=>{a=!0,e.mutable.current.sendMessage({type:"TransformControlsDragStartMessage",name:t.name})},onDrag:l=>{const c=new Hn;c.setFromRotationMatrix(l);const u=new Y().setFromMatrixPosition(l),f=[c.w,c.x,c.y,c.z],h=u.toArray();e.sceneTreeActions.updateNodeAttributes(t.name,{wxyz:f,position:h}),i({type:"TransformControlsUpdateMessage",name:t.name,wxyz:f,position:h})},onDragEnd:()=>{a&&(a=!1,r(),e.mutable.current.sendMessage({type:"TransformControlsDragEndMessage",name:t.name}))},children:o})}),unmountWhenInvisible:!0}}case"LabelMessage":return{makeObject:(i,r)=>R.jsxs("group",{ref:i,children:[R.jsx(pg,{children:R.jsx("div",{style:{width:"10em",fontSize:"0.8em",transform:"translateX(0.1em) translateY(0.5em)"},children:R.jsx("span",{style:{background:"#fff",border:"1px solid #777",borderRadius:"0.2em",color:"#333",padding:"0.2em"},children:t.props.text})})}),r]}),unmountWhenInvisible:!0};case"Gui3DMessage":return{makeObject:(i,r)=>R.jsxs("group",{ref:i,children:[R.jsx(pg,{children:R.jsx(n,{children:R.jsx(Ms,{style:{width:"18em",fontSize:"0.875em",marginLeft:"0.5em",marginTop:"0.5em"},shadow:"0 0 0.8em 0 rgba(0,0,0,0.1)",pb:"0.25em",onPointerDown:a=>{a.stopPropagation()},children:R.jsx(sF,{containerUuid:t.props.container_uuid})})})}),r]}),unmountWhenInvisible:!0};case"ImageMessage":return{makeObject:(i,r)=>R.jsx($Ae,{ref:i,...t,children:r})};case"GlbMessage":return{makeObject:(i,r)=>R.jsx(vFe,{ref:i,...t,children:r})};case"BatchedGlbMessage":return{makeObject:(i,r)=>R.jsx(xFe,{ref:i,...t,children:r}),computeClickInstanceIndexFromInstanceId:i=>i};case"LineSegmentsMessage":return{makeObject:(i,r)=>{const a=new Float32Array(t.props.points.buffer.slice(t.props.points.byteOffset,t.props.points.byteOffset+t.props.points.byteLength)),s=new Uint8Array(t.props.colors.buffer.slice(t.props.colors.byteOffset,t.props.colors.byteOffset+t.props.colors.byteLength));return R.jsxs("group",{ref:i,children:[R.jsx(IBe,{points:a,lineWidth:t.props.line_width,vertexColors:s,segments:!0}),r]})}};case"CatmullRomSplineMessage":return{makeObject:(i,r)=>R.jsxs("group",{ref:i,children:[R.jsx(DMe,{points:QO(t.props.points),closed:t.props.closed,curveType:t.props.curve_type,tension:t.props.tension,lineWidth:t.props.line_width,color:ql(t.props.color),segments:t.props.segments??void 0}),r]})};case"CubicBezierSplineMessage":return{makeObject:(i,r)=>{const a=QO(t.props.points),s=QO(t.props.control_points);return R.jsxs("group",{ref:i,children:[[...Array(a.length-1).keys()].map(o=>R.jsx(kMe,{start:a[o],end:a[o+1],midA:s[2*o],midB:s[2*o+1],lineWidth:t.props.line_width,color:ql(t.props.color),segments:t.props.segments??void 0},o)),r]})}};case"GaussianSplatsMessage":return{makeObject:(i,r)=>R.jsx(lCe,{ref:i,buffer:new Uint32Array(t.props.buffer.buffer.slice(t.props.buffer.byteOffset,t.props.buffer.byteOffset+t.props.buffer.byteLength)),children:r})};case"DirectionalLightMessage":return{makeObject:(i,r)=>R.jsxs("group",{ref:i,children:[R.jsx(IP,{lightIntensity:t.props.intensity,color:ql(t.props.color),castShadow:t.props.cast_shadow}),r]}),unmountWhenInvisible:!0};case"AmbientLightMessage":return{makeObject:(i,r)=>R.jsx("ambientLight",{ref:i,intensity:t.props.intensity,color:ql(t.props.color),children:r})};case"HemisphereLightMessage":return{makeObject:(i,r)=>R.jsx("hemisphereLight",{ref:i,intensity:t.props.intensity,color:ql(t.props.sky_color),groundColor:ql(t.props.ground_color),children:r})};case"PointLightMessage":return{makeObject:(i,r)=>R.jsx("pointLight",{ref:i,intensity:t.props.intensity,color:ql(t.props.color),distance:t.props.distance,decay:t.props.decay,castShadow:t.props.cast_shadow,...HG,children:r})};case"RectAreaLightMessage":return{makeObject:(i,r)=>R.jsx("rectAreaLight",{ref:i,intensity:t.props.intensity,color:ql(t.props.color),width:t.props.width,height:t.props.height,children:r})};case"SpotLightMessage":return{makeObject:(i,r)=>R.jsx("spotLight",{ref:i,intensity:t.props.intensity,color:ql(t.props.color),distance:t.props.distance,angle:t.props.angle,penumbra:t.props.penumbra,decay:t.props.decay,castShadow:t.props.cast_shadow,...HG,children:r})};default:return console.log("Received message did not match any known types:",t),{makeObject:()=>null}}}function une(t){const e=ke.useContext(xi),n=e.useSceneTree(T=>T[t.name]?.message),i=zZ(),r=e.sceneTreeActions.updateNodeAttributes,{makeObject:a,unmountWhenInvisible:s,computeClickInstanceIndexFromInstanceId:o}=ke.useMemo(()=>wFe(n,e,i),[n,e,i]),[l,c]=ke.useState(!1),u=e.useSceneTree(T=>T[t.name]?.clickable)??!1,f=ke.useRef(null),h=ke.useRef(),d=ke.useMemo(()=>R.jsx(EFe,{name:t.name}),[]),m=e.mutable.current,y=ke.useMemo(()=>a===void 0?null:a(T=>{f.current=T,m.nodeRefFromName[t.name]=f.current},d),[a,d]),v=ke.useRef(null);function g(){const T=e.useSceneTree.getState()[t.name];if(((T?.overrideVisibility===void 0?T?.visibility:T.overrideVisibility)??!1)===!1)return!1;if(h.current&&h.current.parent!==null&&(v.current=h.current.parent),v.current!==null){let A=v.current.visible;return A&&v.current.traverseAncestors(C=>{A=A&&C.visible}),A}return!0}ke.useEffect(()=>{r(t.name,{poseUpdateState:"needsUpdate"})},[y]),fa(()=>{const T=e.useSceneTree.getState()[t.name];if(s){const A=g();A&&l&&(f.current!==null&&(f.current.visible=!1),r(t.name,{poseUpdateState:"needsUpdate"}),c(!1)),!A&&!l&&c(!0)}if(f.current===null||T===void 0)return;const w=(T?.overrideVisibility===void 0?T?.visibility:T.overrideVisibility)??!1;if(f.current.visible=w,T.poseUpdateState=="needsUpdate"){r(t.name,{poseUpdateState:"updated"});const A=T.wxyz??[1,0,0,0];f.current.quaternion.set(A[1],A[2],A[3],A[0]);const C=T.position??[0,0,0];f.current.position.set(C[0],C[1],C[2]),f.current.matrixAutoUpdate||f.current.updateMatrix(),f.current.matrixWorldAutoUpdate||f.current.updateMatrixWorld()}},-1e3);const x=tR(50).send,_=ke.useRef({isHovered:!1,instanceId:null,clickable:!1});_.current.clickable=u,!u&&_.current.isHovered&&(_.current.isHovered=!1,m.hoveredElementsCount--,m.hoveredElementsCount===0&&(document.body.style.cursor="auto"));const E=ke.useRef({dragging:!1,startClientX:0,startClientY:0});return y===void 0||l?null:R.jsx(R.Fragment,{children:R.jsx("group",{ref:h,onPointerDown:u?T=>{if(!g())return;T.stopPropagation();const w=E.current,A=m.canvas.getBoundingClientRect();w.startClientX=T.clientX-A.left,w.startClientY=T.clientY-A.top,w.dragging=!1}:void 0,onPointerMove:u?T=>{if(!g())return;T.stopPropagation();const w=E.current,A=m.canvas.getBoundingClientRect(),C=T.clientX-A.left-w.startClientX,D=T.clientY-A.top-w.startClientY;Math.abs(C)<=3&&Math.abs(D)<=3||(w.dragging=!0)}:void 0,onPointerUp:u?T=>{if(!g()||(T.stopPropagation(),E.current.dragging))return;const A=UQ(e,T.ray),C=m.canvas.getBoundingClientRect(),D=_Fe(e,[T.clientX-C.left,T.clientY-C.top]);x({type:"SceneNodeClickMessage",name:t.name,instance_index:o===void 0?null:o(T.instanceId),ray_origin:[A.origin.x,A.origin.y,A.origin.z],ray_direction:[A.direction.x,A.direction.y,A.direction.z],screen_pos:[D.x,D.y]})}:void 0,onPointerOver:u?T=>{g()&&(T.stopPropagation(),_.current.isHovered=!0,_.current.instanceId=T.instanceId??null,m.hoveredElementsCount++,m.hoveredElementsCount===1&&(document.body.style.cursor="pointer"))}:void 0,onPointerOut:u?()=>{g()&&(_.current.isHovered=!1,_.current.instanceId=null,m.hoveredElementsCount--,m.hoveredElementsCount===0&&(document.body.style.cursor="auto"))}:void 0,children:R.jsx(SS.Provider,{value:_,children:y})})})}function EFe(t){const n=ke.useContext(xi).useSceneTree(i=>i[t.name]?.children);return R.jsxs(R.Fragment,{children:[n&&n.map(i=>R.jsx(une,{name:i},i)),R.jsx(SFe,{name:t.name})]})}var xR={},fne={L:1,M:0,Q:3,H:2},hne={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},MFe=hne;function dne(t){this.mode=MFe.MODE_8BIT_BYTE,this.data=t}dne.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var TFe=dne,gM=fne;function Ku(t,e){this.totalCount=t,this.dataCount=e}Ku.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Ku.getRSBlocks=function(t,e){var n=Ku.getRsBlockTable(t,e);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,r=new Array,a=0;a<i;a++)for(var s=n[a*3+0],o=n[a*3+1],l=n[a*3+2],c=0;c<s;c++)r.push(new Ku(o,l));return r};Ku.getRsBlockTable=function(t,e){switch(e){case gM.L:return Ku.RS_BLOCK_TABLE[(t-1)*4+0];case gM.M:return Ku.RS_BLOCK_TABLE[(t-1)*4+1];case gM.Q:return Ku.RS_BLOCK_TABLE[(t-1)*4+2];case gM.H:return Ku.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var AFe=Ku;function pne(){this.buffer=new Array,this.length=0}pne.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var CFe=pne,cu={glog:function(t){if(t<1)throw new Error("glog("+t+")");return cu.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return cu.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var bs=0;bs<8;bs++)cu.EXP_TABLE[bs]=1<<bs;for(var bs=8;bs<256;bs++)cu.EXP_TABLE[bs]=cu.EXP_TABLE[bs-4]^cu.EXP_TABLE[bs-5]^cu.EXP_TABLE[bs-6]^cu.EXP_TABLE[bs-8];for(var bs=0;bs<255;bs++)cu.LOG_TABLE[cu.EXP_TABLE[bs]]=bs;var mne=cu,om=mne;function tT(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}tT.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=om.gexp(om.glog(this.get(n))+om.glog(t.get(i)));return new tT(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=om.glog(this.get(0))-om.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(var i=0;i<t.getLength();i++)n[i]^=om.gexp(om.glog(t.get(i))+e);return new tT(n,0).mod(t)}};var gne=tT,Xl=hne,f7=gne,RFe=mne,dd={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},fs={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;fs.getBCHDigit(e)-fs.getBCHDigit(fs.G15)>=0;)e^=fs.G15<<fs.getBCHDigit(e)-fs.getBCHDigit(fs.G15);return(t<<10|e)^fs.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;fs.getBCHDigit(e)-fs.getBCHDigit(fs.G18)>=0;)e^=fs.G18<<fs.getBCHDigit(e)-fs.getBCHDigit(fs.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return fs.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case dd.PATTERN000:return(e+n)%2==0;case dd.PATTERN001:return e%2==0;case dd.PATTERN010:return n%3==0;case dd.PATTERN011:return(e+n)%3==0;case dd.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case dd.PATTERN101:return e*n%2+e*n%3==0;case dd.PATTERN110:return(e*n%2+e*n%3)%2==0;case dd.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new f7([1],0),n=0;n<t;n++)e=e.multiply(new f7([1,RFe.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Xl.MODE_NUMBER:return 10;case Xl.MODE_ALPHA_NUM:return 9;case Xl.MODE_8BIT_BYTE:return 8;case Xl.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Xl.MODE_NUMBER:return 12;case Xl.MODE_ALPHA_NUM:return 11;case Xl.MODE_8BIT_BYTE:return 16;case Xl.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Xl.MODE_NUMBER:return 14;case Xl.MODE_ALPHA_NUM:return 13;case Xl.MODE_8BIT_BYTE:return 16;case Xl.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var a=0,s=t.isDark(i,r),o=-1;o<=1;o++)if(!(i+o<0||e<=i+o))for(var l=-1;l<=1;l++)r+l<0||e<=r+l||o==0&&l==0||s==t.isDark(i+o,r+l)&&a++;a>5&&(n+=3+a-5)}for(var i=0;i<e-1;i++)for(var r=0;r<e-1;r++){var c=0;t.isDark(i,r)&&c++,t.isDark(i+1,r)&&c++,t.isDark(i,r+1)&&c++,t.isDark(i+1,r+1)&&c++,(c==0||c==4)&&(n+=3)}for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);for(var u=0,r=0;r<e;r++)for(var i=0;i<e;i++)t.isDark(i,r)&&u++;var f=Math.abs(100*u/e/e-50)/5;return n+=f*10,n}},kFe=fs,DFe=TFe,bne=AFe,yne=CFe,bp=kFe,OFe=gne;function ef(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Ol=ef.prototype;Ol.addData=function(t){var e=new DFe(t);this.dataList.push(e),this.dataCache=null};Ol.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};Ol.getModuleCount=function(){return this.moduleCount};Ol.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=bne.getRSBlocks(t,this.errorCorrectLevel),n=new yne,i=0,r=0;r<e.length;r++)i+=e[r].dataCount;for(var r=0;r<this.dataList.length;r++){var a=this.dataList[r];n.put(a.mode,4),n.put(a.getLength(),bp.getLengthInBits(a.mode,t)),a.write(n)}if(n.getLengthInBits()<=i*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};Ol.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=ef.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};Ol.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(0<=n&&n<=6&&(i==0||i==6)||0<=i&&i<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=i&&i<=4?this.modules[t+n][e+i]=!0:this.modules[t+n][e+i]=!1)};Ol.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=bp.getLostPoint(this);(n==0||t>i)&&(t=i,e=n)}return e};Ol.createMovieClip=function(t,e,n){var i=t.createEmptyMovieClip(e,n),r=1;this.make();for(var a=0;a<this.modules.length;a++)for(var s=a*r,o=0;o<this.modules[a].length;o++){var l=o*r,c=this.modules[a][o];c&&(i.beginFill(0,100),i.moveTo(l,s),i.lineTo(l+r,s),i.lineTo(l+r,s+r),i.lineTo(l,s+r),i.endFill())}return i};Ol.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};Ol.setupPositionAdjustPattern=function(){for(var t=bp.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(this.modules[i][r]==null)for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)a==-2||a==2||s==-2||s==2||a==0&&s==0?this.modules[i+a][r+s]=!0:this.modules[i+a][r+s]=!1}};Ol.setupTypeNumber=function(t){for(var e=bp.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;n<18;n++){var i=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}};Ol.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=bp.getBCHTypeInfo(n),r=0;r<15;r++){var a=!t&&(i>>r&1)==1;r<6?this.modules[r][8]=a:r<8?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a}for(var r=0;r<15;r++){var a=!t&&(i>>r&1)==1;r<8?this.modules[8][this.moduleCount-r-1]=a:r<9?this.modules[8][15-r-1+1]=a:this.modules[8][15-r-1]=a}this.modules[this.moduleCount-8][8]=!t};Ol.mapData=function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(s==6&&s--;;){for(var o=0;o<2;o++)if(this.modules[i][s-o]==null){var l=!1;a<t.length&&(l=(t[a]>>>r&1)==1);var c=bp.getMask(e,i,s-o);c&&(l=!l),this.modules[i][s-o]=l,r--,r==-1&&(a++,r=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}};ef.PAD0=236;ef.PAD1=17;ef.createData=function(t,e,n){for(var i=bne.getRSBlocks(t,e),r=new yne,a=0;a<n.length;a++){var s=n[a];r.put(s.mode,4),r.put(s.getLength(),bp.getLengthInBits(s.mode,t)),s.write(r)}for(var o=0,a=0;a<i.length;a++)o+=i[a].dataCount;if(r.getLengthInBits()>o*8)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+o*8+")");for(r.getLengthInBits()+4<=o*8&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=o*8||(r.put(ef.PAD0,8),r.getLengthInBits()>=o*8));)r.put(ef.PAD1,8);return ef.createBytes(r,i)};ef.createBytes=function(t,e){for(var n=0,i=0,r=0,a=new Array(e.length),s=new Array(e.length),o=0;o<e.length;o++){var l=e[o].dataCount,c=e[o].totalCount-l;i=Math.max(i,l),r=Math.max(r,c),a[o]=new Array(l);for(var u=0;u<a[o].length;u++)a[o][u]=255&t.buffer[u+n];n+=l;var f=bp.getErrorCorrectPolynomial(c),h=new OFe(a[o],f.getLength()-1),d=h.mod(f);s[o]=new Array(f.getLength()-1);for(var u=0;u<s[o].length;u++){var m=u+d.getLength()-s[o].length;s[o][u]=m>=0?d.get(m):0}}for(var y=0,u=0;u<e.length;u++)y+=e[u].totalCount;for(var v=new Array(y),g=0,u=0;u<i;u++)for(var o=0;o<e.length;o++)u<a[o].length&&(v[g++]=a[o][u]);for(var u=0;u<r;u++)for(var o=0;o<e.length;o++)u<s[o].length&&(v[g++]=s[o][u]);return v};var IFe=ef,cF={};Object.defineProperty(cF,"__esModule",{value:!0});var NFe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},PFe=$X,Yl=xne(PFe),vne=I,bM=xne(vne);function xne(t){return t&&t.__esModule?t:{default:t}}function LFe(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var UFe={bgColor:Yl.default.oneOfType([Yl.default.object,Yl.default.string]).isRequired,bgD:Yl.default.string.isRequired,fgColor:Yl.default.oneOfType([Yl.default.object,Yl.default.string]).isRequired,fgD:Yl.default.string.isRequired,size:Yl.default.number.isRequired,title:Yl.default.string,viewBoxSize:Yl.default.number.isRequired,xmlns:Yl.default.string},uF=(0,vne.forwardRef)(function(t,e){var n=t.bgColor,i=t.bgD,r=t.fgD,a=t.fgColor,s=t.size,o=t.title,l=t.viewBoxSize,c=t.xmlns,u=c===void 0?"http://www.w3.org/2000/svg":c,f=LFe(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return bM.default.createElement("svg",NFe({},f,{height:s,ref:e,viewBox:"0 0 "+l+" "+l,width:s,xmlns:u}),o?bM.default.createElement("title",null,o):null,bM.default.createElement("path",{d:i,fill:n}),bM.default.createElement("path",{d:r,fill:a}))});uF.displayName="QRCodeSvg";uF.propTypes=UFe;cF.default=uF;Object.defineProperty(xR,"__esModule",{value:!0});xR.QRCode=void 0;var BFe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},FFe=$X,qf=kS(FFe),zFe=fne,jFe=kS(zFe),HFe=IFe,VFe=kS(HFe),_ne=I,GFe=kS(_ne),WFe=cF,qFe=kS(WFe);function kS(t){return t&&t.__esModule?t:{default:t}}function XFe(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var YFe={bgColor:qf.default.oneOfType([qf.default.object,qf.default.string]),fgColor:qf.default.oneOfType([qf.default.object,qf.default.string]),level:qf.default.string,size:qf.default.number,value:qf.default.string.isRequired},_R=(0,_ne.forwardRef)(function(t,e){var n=t.bgColor,i=n===void 0?"#FFFFFF":n,r=t.fgColor,a=r===void 0?"#000000":r,s=t.level,o=s===void 0?"L":s,l=t.size,c=l===void 0?256:l,u=t.value,f=XFe(t,["bgColor","fgColor","level","size","value"]),h=new VFe.default(-1,jFe.default[o]);h.addData(u),h.make();var d=h.modules;return GFe.default.createElement(qFe.default,BFe({},f,{bgColor:i,bgD:d.map(function(m,y){return m.map(function(v,g){return v?"":"M "+g+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:a,fgD:d.map(function(m,y){return m.map(function(v,g){return v?"M "+g+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:c,viewBoxSize:d.length}))});xR.QRCode=_R;_R.displayName="QRCode";_R.propTypes=YFe;var $Fe=xR.default=_R,KFe="z8daqr0",JFe="z8daqr1",h7="z8daqr2",ZFe="z8daqr3",QFe="z8daqr4";function e8e(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const t8e=typeof window<"u"?I.useLayoutEffect:I.useEffect;function cs(t,e){t8e(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function n8e(t,e){t&&e8e(t),cs(`mantine-form:${t}:set-field-value`,n=>e.setFieldValue(n.detail.path,n.detail.value)),cs(`mantine-form:${t}:set-values`,n=>e.setValues(n.detail)),cs(`mantine-form:${t}:set-initial-values`,n=>e.setInitialValues(n.detail)),cs(`mantine-form:${t}:set-errors`,n=>e.setErrors(n.detail)),cs(`mantine-form:${t}:set-field-error`,n=>e.setFieldError(n.detail.path,n.detail.error)),cs(`mantine-form:${t}:clear-field-error`,n=>e.clearFieldError(n.detail)),cs(`mantine-form:${t}:clear-errors`,e.clearErrors),cs(`mantine-form:${t}:reset`,e.reset),cs(`mantine-form:${t}:validate`,e.validate),cs(`mantine-form:${t}:validate-field`,n=>e.validateField(n.detail)),cs(`mantine-form:${t}:reorder-list-item`,n=>e.reorderListItem(n.detail.path,n.detail.payload)),cs(`mantine-form:${t}:remove-list-item`,n=>e.removeListItem(n.detail.path,n.detail.index)),cs(`mantine-form:${t}:insert-list-item`,n=>e.insertListItem(n.detail.path,n.detail.item,n.detail.index)),cs(`mantine-form:${t}:set-dirty`,n=>e.setDirty(n.detail)),cs(`mantine-form:${t}:set-touched`,n=>e.setTouched(n.detail)),cs(`mantine-form:${t}:reset-dirty`,n=>e.resetDirty(n.detail)),cs(`mantine-form:${t}:reset-touched`,e.resetTouched)}function i8e(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:n}=e;n instanceof HTMLInputElement?n.type==="checkbox"?t(n.checked):t(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&t(n.value)}else t(e)}}function NP(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,n)=>{const i=t[n];return i!=null&&i!==!1&&(e[n]=i),e},{})}function r8e(t){const[e,n]=I.useState(NP(t)),i=I.useRef(e),r=I.useCallback(l=>{n(c=>{const u=NP(typeof l=="function"?l(c):l);return i.current=u,u})},[]),a=I.useCallback(()=>r({}),[]),s=I.useCallback(l=>{i.current[l]!==void 0&&r(c=>{const u={...c};return delete u[l],u})},[e]),o=I.useCallback((l,c)=>{c==null||c===!1?s(l):i.current[l]!==c&&r(u=>({...u,[l]:c}))},[e]);return{errorsState:e,setErrors:r,clearErrors:a,setFieldError:o,clearFieldError:s}}function PP(t,e){if(e===null||typeof e!="object")return{};const n={...e};return Object.keys(e).forEach(i=>{i.includes(`${String(t)}.`)&&delete n[i]}),n}function d7(t,e){const n=t.substring(e.length+1).split(".")[0];return parseInt(n,10)}function p7(t,e,n,i){if(e===void 0)return n;const r=`${String(t)}`;let a=n;i===-1&&(a=PP(`${r}.${e}`,a));const s={...a},o=new Set;return Object.entries(a).filter(([l])=>{if(!l.startsWith(`${r}.`))return!1;const c=d7(l,r);return Number.isNaN(c)?!1:c>=e}).forEach(([l,c])=>{const u=d7(l,r),f=l.replace(`${r}.${u}`,`${r}.${u+i}`);s[f]=c,o.add(f),o.has(l)||delete s[l]}),s}function a8e(t,{from:e,to:n},i){const r=`${t}.${e}`,a=`${t}.${n}`,s={...i},o=new Set;return Object.keys(i).forEach(l=>{if(o.has(l))return;let c,u;if(l.startsWith(r)?(c=l,u=l.replace(r,a)):l.startsWith(a)&&(c=l.replace(a,r),u=l),c&&u){const f=s[c],h=s[u];h===void 0?delete s[c]:s[c]=h,f===void 0?delete s[u]:s[u]=f,o.add(c),o.add(u)}}),s}function m7(t,e,n){typeof n.value=="object"&&(n.value=D0(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function D0(t){if(typeof t!="object")return t;var e=0,n,i,r,a=Object.prototype.toString.call(t);if(a==="[object Object]"?r=Object.create(t.__proto__||null):a==="[object Array]"?r=Array(t.length):a==="[object Set]"?(r=new Set,t.forEach(function(s){r.add(D0(s))})):a==="[object Map]"?(r=new Map,t.forEach(function(s,o){r.set(D0(o),D0(s))})):a==="[object Date]"?r=new Date(+t):a==="[object RegExp]"?r=new RegExp(t.source,t.flags):a==="[object DataView]"?r=new t.constructor(D0(t.buffer)):a==="[object ArrayBuffer]"?r=t.slice(0):a.slice(-6)==="Array]"&&(r=new t.constructor(t)),r){for(i=Object.getOwnPropertySymbols(t);e<i.length;e++)m7(r,i[e],Object.getOwnPropertyDescriptor(t,i[e]));for(e=0,i=Object.getOwnPropertyNames(t);e<i.length;e++)Object.hasOwnProperty.call(r,n=i[e])&&r[n]===t[n]||m7(r,n,Object.getOwnPropertyDescriptor(t,n))}return r||t}function Sne(t){return typeof t!="string"?[]:t.split(".")}function Aa(t,e){const n=Sne(t);if(n.length===0||typeof e!="object"||e===null)return;let i=e[n[0]];for(let r=1;r<n.length&&i!=null;r+=1)i=i[n[r]];return i}function DS(t,e,n){const i=Sne(t);if(i.length===0)return n;const r=D0(n);if(i.length===1)return r[i[0]]=e,r;let a=r[i[0]];for(let s=1;s<i.length-1;s+=1){if(a===void 0)return r;a=a[i[s]]}return a[i[i.length-1]]=e,r}function s8e(t,{from:e,to:n},i){const r=Aa(t,i);if(!Array.isArray(r))return i;const a=[...r],s=r[e];return a.splice(e,1),a.splice(n,0,s),DS(t,a,i)}function o8e(t,e,n,i){const r=Aa(t,i);if(!Array.isArray(r))return i;const a=[...r];return a.splice(typeof n=="number"?n:a.length,0,e),DS(t,a,i)}function l8e(t,e,n){const i=Aa(t,n);return Array.isArray(i)?DS(t,i.filter((r,a)=>a!==e),n):n}function c8e(t,e,n,i){const r=Aa(t,i);if(!Array.isArray(r)||r.length<=n)return i;const a=[...r];return a[n]=e,DS(t,a,i)}function u8e({$values:t,$errors:e,$status:n}){const i=I.useCallback((o,l)=>{n.clearFieldDirty(o),e.setErrors(c=>a8e(o,l,c)),t.setValues({values:s8e(o,l,t.refValues.current),updateState:!0})},[]),r=I.useCallback((o,l)=>{n.clearFieldDirty(o),e.setErrors(c=>p7(o,l,c,-1)),t.setValues({values:l8e(o,l,t.refValues.current),updateState:!0})},[]),a=I.useCallback((o,l,c)=>{n.clearFieldDirty(o),e.setErrors(u=>p7(o,c,u,1)),t.setValues({values:o8e(o,l,c,t.refValues.current),updateState:!0})},[]),s=I.useCallback((o,l,c)=>{n.clearFieldDirty(o),t.setValues({values:c8e(o,c,l,t.refValues.current),updateState:!0})},[]);return{reorderListItem:i,removeListItem:r,insertListItem:a,replaceListItem:s}}var f8e=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var s=a[r];if(!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n};const yM=Cc(f8e);function zx(t,e){const n=Object.keys(t);if(typeof e=="string"){const i=n.filter(r=>r.startsWith(`${e}.`));return t[e]||i.some(r=>t[r])||!1}return n.some(i=>t[i])}function h8e({initialDirty:t,initialTouched:e,mode:n,$values:i}){const[r,a]=I.useState(e),[s,o]=I.useState(t),l=I.useRef(e),c=I.useRef(t),u=I.useCallback(w=>{const A=typeof w=="function"?w(l.current):w;l.current=A,n==="controlled"&&a(A)},[]),f=I.useCallback((w,A=!1)=>{const C=typeof w=="function"?w(c.current):w;c.current=C,(n==="controlled"||A)&&o(C)},[]),h=I.useCallback(()=>u({}),[]),d=I.useCallback(w=>{const A=w?{...i.refValues.current,...w}:i.refValues.current;i.setValuesSnapshot(A),f({})},[]),m=I.useCallback((w,A)=>{u(C=>zx(C,w)===A?C:{...C,[w]:A})},[]),y=I.useCallback((w,A,C)=>{f(D=>zx(D,w)===A?D:{...D,[w]:A},C)},[]),v=I.useCallback((w,A)=>{const C=zx(c.current,w),D=!yM(Aa(w,i.getValuesSnapshot()),A),k=PP(w,c.current);k[w]=D,f(k,C!==D)},[]),g=I.useCallback(w=>zx(l.current,w),[]),x=I.useCallback(w=>f(A=>{if(typeof w!="string")return A;const C=PP(w,A);return delete C[w],yM(C,A)?A:C}),[]),_=I.useCallback(w=>{if(w){const C=Aa(w,c.current);if(typeof C=="boolean")return C;const D=Aa(w,i.refValues.current),k=Aa(w,i.valuesSnapshot.current);return!yM(D,k)}return Object.keys(c.current).length>0?zx(c.current):!yM(i.refValues.current,i.valuesSnapshot.current)},[]),E=I.useCallback(()=>c.current,[]),T=I.useCallback(()=>l.current,[]);return{touchedState:r,dirtyState:s,touchedRef:l,dirtyRef:c,setTouched:u,setDirty:f,resetDirty:d,resetTouched:h,isTouched:g,setFieldTouched:m,setFieldDirty:y,setTouchedState:a,setDirtyState:o,clearFieldDirty:x,isDirty:_,getDirty:E,getTouched:T,setCalculatedFieldDirty:v}}function d8e({initialValues:t,onValuesChange:e,mode:n}){const i=I.useRef(!1),[r,a]=I.useState(t||{}),s=I.useRef(r),o=I.useRef(r),l=I.useCallback(({values:v,subscribers:g,updateState:x=!0,mergeWithPreviousValues:_=!0})=>{const E=s.current,T=v instanceof Function?v(s.current):v,w=_?{...E,...T}:T;s.current=w,x&&(a(w),n==="uncontrolled"&&(s.current=w)),e?.(w,E),g?.filter(Boolean).forEach(A=>A({updatedValues:w,previousValues:E}))},[e]),c=I.useCallback(v=>{const g=Aa(v.path,s.current),x=v.value instanceof Function?v.value(g):v.value;if(g!==x){const _=s.current,E=DS(v.path,x,s.current);l({values:E,updateState:v.updateState}),v.subscribers?.filter(Boolean).forEach(T=>T({path:v.path,updatedValues:E,previousValues:_}))}},[l]),u=I.useCallback(v=>{o.current=v},[]),f=I.useCallback((v,g)=>{i.current||(i.current=!0,l({values:v,updateState:n==="controlled"}),u(v),g())},[l]),h=I.useCallback(()=>{l({values:o.current,updateState:!0,mergeWithPreviousValues:!1})},[l]),d=I.useCallback(()=>s.current,[]),m=I.useCallback(()=>o.current,[]),y=I.useCallback((v,g)=>{const x=Aa(v,o.current);typeof x>"u"||c({path:v,value:x,updateState:n==="controlled",subscribers:g})},[c,n]);return{initialized:i,stateValues:r,refValues:s,valuesSnapshot:o,setValues:l,setFieldValue:c,resetValues:h,setValuesSnapshot:u,initialize:f,getValues:d,getValuesSnapshot:m,resetField:y}}function p8e({$status:t,cascadeUpdates:e}){const n=I.useRef({}),i=I.useCallback((a,s)=>{I.useEffect(()=>(n.current[a]=n.current[a]||[],n.current[a].push(s),()=>{n.current[a]=n.current[a].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(a=>{const s=n.current[a]?.map(o=>l=>o({previousValue:Aa(a,l.previousValues),value:Aa(a,l.updatedValues),touched:t.isTouched(a),dirty:t.isDirty(a)}))??[];if(e)for(const o in n.current)(o.startsWith(`${a}.`)||a.startsWith(`${o}.`))&&s.push(...n.current[o].map(l=>c=>l({previousValue:Aa(o,c.previousValues),value:Aa(o,c.updatedValues),touched:t.isTouched(o),dirty:t.isDirty(o)})));return s},[]);return{subscribers:n,watch:i,getFieldSubscribers:r}}function g7(t,e){return t?`${t}-${e.toString()}`:e.toString()}const vM=Symbol("root-rule");function b7(t){const e=NP(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function LP(t,e,n="",i={}){return typeof t!="object"||t===null?i:Object.keys(t).reduce((r,a)=>{const s=t[a],o=`${n===""?"":`${n}.`}${a}`,l=Aa(o,e);let c=!1;return typeof s=="function"&&(r[o]=s(l,e,o)),typeof s=="object"&&Array.isArray(l)&&(c=!0,l.forEach((u,f)=>LP(s,e,`${o}.${f}`,r)),vM in s&&(r[o]=s[vM](l,e,o))),typeof s=="object"&&typeof l=="object"&&l!==null&&(c||LP(s,e,o,r),vM in s&&(r[o]=s[vM](l,e,o))),r},i)}function UP(t,e){return b7(typeof t=="function"?t(e):LP(t,e))}function xM(t,e,n){if(typeof t!="string")return{hasError:!1,error:null};const i=UP(e,n),r=Object.keys(i.errors).find(a=>t.split(".").every((s,o)=>s===a.split(".")[o]));return{hasError:!!r,error:r?i.errors[r]:null}}const m8e="__MANTINE_FORM_INDEX__";function y7(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]+/g,`.${m8e}`)):!1:!1}function g8e({name:t,mode:e="controlled",initialValues:n,initialErrors:i={},initialDirty:r={},initialTouched:a={},clearInputErrorOnChange:s=!0,validateInputOnChange:o=!1,validateInputOnBlur:l=!1,onValuesChange:c,transformValues:u=v=>v,enhanceGetInputProps:f,validate:h,onSubmitPreventDefault:d="always",touchTrigger:m="change",cascadeUpdates:y=!1}={}){const v=r8e(i),g=d8e({initialValues:n,onValuesChange:c,mode:e}),x=h8e({initialDirty:r,initialTouched:a,$values:g,mode:e}),_=u8e({$values:g,$errors:v,$status:x}),E=p8e({$status:x,cascadeUpdates:y}),[T,w]=I.useState(0),[A,C]=I.useState({}),[D,k]=I.useState(!1),P=I.useCallback(()=>{g.resetValues(),v.clearErrors(),x.resetDirty(),x.resetTouched(),e==="uncontrolled"&&w(xe=>xe+1)},[]),B=I.useCallback(xe=>{s&&v.clearErrors(),e==="uncontrolled"&&w(Ne=>Ne+1),Object.keys(E.subscribers.current).forEach(Ne=>{const Ge=Aa(Ne,g.refValues.current),$e=Aa(Ne,xe);Ge!==$e&&E.getFieldSubscribers(Ne).forEach(ct=>ct({previousValues:xe,updatedValues:g.refValues.current}))})},[s]),H=I.useCallback(xe=>{const Ne=g.refValues.current;g.initialize(xe,()=>e==="uncontrolled"&&w(Ge=>Ge+1)),B(Ne)},[B]),G=I.useCallback((xe,Ne,Ge)=>{const $e=y7(xe,o),ct=Ne instanceof Function?Ne(Aa(xe,g.refValues.current)):Ne;x.setCalculatedFieldDirty(xe,ct),m==="change"&&x.setFieldTouched(xe,!0),!$e&&s&&v.clearFieldError(xe),g.setFieldValue({path:xe,value:Ne,updateState:e==="controlled",subscribers:[...E.getFieldSubscribers(xe),$e?At=>{const fe=xM(xe,h,At.updatedValues);fe.hasError?v.setFieldError(xe,fe.error):v.clearFieldError(xe)}:null,Ge?.forceUpdate!==!1&&e!=="controlled"?()=>C(At=>({...At,[xe]:(At[xe]||0)+1})):null]})},[c,h]),V=I.useCallback(xe=>{const Ne=g.refValues.current;g.setValues({values:xe,updateState:e==="controlled"}),B(Ne)},[c,B]),U=I.useCallback(()=>{const xe=UP(h,g.refValues.current);return v.setErrors(xe.errors),xe},[h]),F=I.useCallback(xe=>{const Ne=xM(xe,h,g.refValues.current);return Ne.hasError?v.setFieldError(xe,Ne.error):v.clearFieldError(xe),Ne},[h]),q=(xe,{type:Ne="input",withError:Ge=!0,withFocus:$e=!0,...ct}={})=>{const fe={onChange:i8e(Ve=>G(xe,Ve,{forceUpdate:!1})),"data-path":g7(t,xe)};return Ge&&(fe.error=v.errorsState[xe]),Ne==="checkbox"?fe[e==="controlled"?"checked":"defaultChecked"]=Aa(xe,g.refValues.current):fe[e==="controlled"?"value":"defaultValue"]=Aa(xe,g.refValues.current),$e&&(fe.onFocus=()=>x.setFieldTouched(xe,!0),fe.onBlur=()=>{if(y7(xe,l)){const Ve=xM(xe,h,g.refValues.current);Ve.hasError?v.setFieldError(xe,Ve.error):v.clearFieldError(xe)}}),Object.assign(fe,f?.({inputProps:fe,field:xe,options:{type:Ne,withError:Ge,withFocus:$e,...ct},form:pe}))},X=(xe,Ne)=>Ge=>{d==="always"&&Ge?.preventDefault();const $e=U();if($e.hasErrors)d==="validation-failed"&&Ge?.preventDefault(),Ne?.($e.errors,g.refValues.current,Ge);else{const ct=xe?.(u(g.refValues.current),Ge);ct instanceof Promise&&(k(!0),ct.finally(()=>k(!1)))}},z=xe=>u(xe||g.refValues.current),ce=I.useCallback(xe=>{xe.preventDefault(),P()},[]),he=I.useCallback(xe=>xe?!xM(xe,h,g.refValues.current).hasError:!UP(h,g.refValues.current).hasErrors,[h]),$=xe=>`${T}-${String(xe)}-${A[String(xe)]||0}`,Me=I.useCallback(xe=>document.querySelector(`[data-path="${g7(t,xe)}"]`),[]),Se=I.useCallback(xe=>{g.resetField(xe,[e!=="controlled"?()=>C(Ne=>({...Ne,[xe]:(Ne[xe]||0)+1})):null])},[g.resetField,e,C]),pe={watch:E.watch,initialized:g.initialized.current,values:e==="uncontrolled"?g.refValues.current:g.stateValues,getValues:g.getValues,getInitialValues:g.getValuesSnapshot,setInitialValues:g.setValuesSnapshot,resetField:Se,initialize:H,setValues:V,setFieldValue:G,submitting:D,setSubmitting:k,errors:v.errorsState,setErrors:v.setErrors,setFieldError:v.setFieldError,clearFieldError:v.clearFieldError,clearErrors:v.clearErrors,resetDirty:x.resetDirty,setTouched:x.setTouched,setDirty:x.setDirty,isTouched:x.isTouched,resetTouched:x.resetTouched,isDirty:x.isDirty,getTouched:x.getTouched,getDirty:x.getDirty,reorderListItem:_.reorderListItem,insertListItem:_.insertListItem,removeListItem:_.removeListItem,replaceListItem:_.replaceListItem,reset:P,validate:U,validateField:F,getInputProps:q,onSubmit:X,onReset:ce,isValid:he,getTransformedValues:z,key:$,getInputNode:Me};return n8e(t,pe),pe}function b8e({nodeName:t,closePopoverFn:e}){const n=ke.useContext(xi),i=n.useSceneTree(f=>f[t]?.message),r=n.sceneTreeActions.updateSceneNodeProps;if(i===void 0)return null;function a(f){return f==Number.POSITIVE_INFINITY?"Infinity":JSON.stringify(f)}function s(f){return f==="Infinity"?Number.POSITIVE_INFINITY:JSON.parse(f)}const o=i.props,l=Object.fromEntries(Object.entries(o).filter(([,f])=>!(f instanceof Uint8Array)).map(([f,h])=>[f,a(h)])),c=g8e({initialValues:{...l},validate:{...Object.fromEntries(Object.keys(l).map(f=>[f,h=>{try{return s(h),null}catch{return"Invalid JSON"}}]))}}),u=f=>{Object.entries(f).forEach(([h,d])=>{if(d!==l[h])try{const m=s(d);r(t,{[h]:m}),c.setFieldValue(h,a(m))}catch(m){console.error("Failed to parse JSON:",m)}})};return R.jsxs(et,{className:JFe,component:"form",onSubmit:c.onSubmit(u),w:"15em",children:[R.jsxs(et,{children:[R.jsxs(et,{style:{display:"flex",alignItems:"center"},children:[R.jsxs(et,{style:{fontWeight:"500",flexGrow:"1"},fz:"sm",children:[i.type.replace("Message","").replace(/([a-z])(\d[A-Z])/g,"$1 $2").replace(/([a-z])([A-Z])/g,"$1 $2").trim()," ","Props"]}),R.jsx(Cr,{label:"Close props",children:R.jsx(S2e,{style:{cursor:"pointer",width:"1em",height:"1em",display:"block",opacity:"0.7"},onClick:f=>{f.stopPropagation(),e()}})})]}),R.jsx(et,{style:{opacity:"0.5"},fz:"xs",children:t})]}),R.jsx(kc.Autosize,{mah:"30vh",scrollbarSize:6,offsetScrollbars:"present",type:"auto",children:R.jsx(et,{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(o).map(([f,h])=>{if(h instanceof Uint8Array||f.startsWith("_"))return null;const d=c.values[f]!==l[f];return R.jsxs(wh,{align:"center",children:[R.jsx(et,{style:{flexGrow:"1"},fz:"xs",children:f.charAt(0).toUpperCase()+f.slice(1).split("_").join(" ")}),R.jsx(wh,{gap:"xs",style:{width:"9em"},children:(()=>{try{const m=s(c.values[f]);if(f.toLowerCase().includes("color")&&Array.isArray(m)&&m.length===3&&m.every(v=>typeof v=="number")){const v=(x,_,E)=>{const T=w=>{const A=Math.round(w).toString(16);return A.length===1?"0"+A:A};return"#"+T(x)+T(_)+T(E)},g=x=>{const _=parseInt(x.slice(1,3),16),E=parseInt(x.slice(3,5),16),T=parseInt(x.slice(5,7),16);return[_,E,T]};return R.jsx(ov,{size:"xs",styles:{input:{height:"1.625rem",minHeight:"1.625rem"}},style:{width:"100%"},value:v(m[0],m[1],m[2]),onChange:x=>{const _=g(x);c.setFieldValue(f,a(_)),c.onSubmit(u)()},onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),c.onSubmit(u)())}})}}catch{}return R.jsx(Cg,{size:"xs",styles:{input:{height:"1.625rem",minHeight:"1.625rem",width:"100%"}},style:{width:"100%"},...c.getInputProps(f),onKeyDown:m=>{m.key==="Enter"&&(m.preventDefault(),c.onSubmit(u)())},rightSection:R.jsx(XCe,{style:{width:"1rem",height:"1rem",opacity:d?1:.3,cursor:d?"pointer":"default"},onClick:()=>{d&&c.onSubmit(u)()}})})})()})]},f)})})}),R.jsx(et,{style:{opacity:"0.4",marginTop:"0.25rem"},fz:"xs",children:"Updates from the server will overwrite local changes."})]})}function y8e(){const e=ke.useContext(xi).useSceneTree(n=>n[""].children);return R.jsx(kc,{className:KFe,children:R.jsx(x8e,{children:R.jsx(v8e,{children:e.map(n=>R.jsx(_8e,{nodeName:n,isParentVisible:!0,indentCount:0},n))})})})}const wne=ke.createContext(null),Ene=ke.createContext(null);function v8e({children:t}){const e=ke.useRef(!1),n=ke.useRef(!1),i=a=>{e.current=!0,n.current=a},r=()=>{e.current=!1};return ke.useEffect(()=>(window.addEventListener("mouseup",r),()=>{window.removeEventListener("mouseup",r)}),[r]),R.jsx(wne.Provider,{value:{paintingRef:e,paintValueRef:n,startPainting:i,stopPainting:r},children:t})}function x8e({children:t}){const[e,n]=ke.useState(null);return R.jsx(Ene.Provider,{value:{openPopoverNodeName:e,setOpenPopoverNodeName:n},children:t})}const _8e=ke.memo(function t(e){const n=ke.useContext(xi),i=Da(),{colorScheme:r}=tv(),{paintingRef:a,paintValueRef:s,startPainting:o}=ke.useContext(wne),{openPopoverNodeName:l,setOpenPopoverNodeName:c}=ke.useContext(Ene),u=C=>{C.stopPropagation();const D=!_;o(D),n.sceneTreeActions.updateNodeAttributes(e.nodeName,{overrideVisibility:D})},f=()=>{a.current&&n.sceneTreeActions.updateNodeAttributes(e.nodeName,{overrideVisibility:s.current})},h=n.useSceneTree(C=>C[e.nodeName]?.children),d=(h?.length??0)>0,[m,{toggle:y}]=wc(!1),v=C=>{n.sceneTreeActions.updateNodeAttributes(e.nodeName,{labelVisible:C})},g=n.useSceneTree(C=>C[e.nodeName]?.visibility)??!0,x=n.useSceneTree(C=>C[e.nodeName]?.overrideVisibility),_=x!==void 0?x:g;ke.useEffect(()=>()=>{v(!1)},[]);const E=_&&e.isParentVisible,T=_?t2e:JCe,w=()=>{c(null)},A=()=>{l===e.nodeName?c(null):c(e.nodeName)};return R.jsxs(R.Fragment,{children:[R.jsxs(et,{className:ZFe,style:{cursor:d?"pointer":void 0},onClick:d?y:void 0,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[new Array(e.indentCount).fill(null).map((C,D)=>R.jsx(et,{className:QFe},D)),R.jsx(et,{style:{opacity:d?.7:.1},children:m?R.jsx(RCe,{style:{height:"1em",width:"1em",transform:"translateY(0.1em)"}}):R.jsx(DCe,{style:{height:"1em",width:"1em",transform:"translateY(0.1em)"}})}),R.jsx(et,{style:{width:"1.5em",height:"1.5em"},children:R.jsx(Cr,{label:"Toggle visibility override",children:R.jsx(T,{style:{cursor:"pointer",opacity:E?.85:.25,width:"1.5em",height:"1.5em",display:"block",...x!==void 0&&{color:i.colors[i.primaryColor][r==="dark"?4:6],filter:`drop-shadow(0 0 2px ${i.colors[i.primaryColor][r==="dark"?4:6]}30)`}},onMouseDown:u,onMouseEnter:f})})}),R.jsxs(et,{style:{flexGrow:"1",userSelect:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[R.jsx("span",{style:{opacity:"0.3"},children:"/"}),e.nodeName.split("/").at(-1)]}),x!==void 0?R.jsx(et,{className:h7,style:{width:"1.25em",height:"1.25em",display:"block",transition:"opacity 0.2s",marginRight:"0.25em"},children:R.jsx(Cr,{label:"Clear visibility override",children:R.jsx(QCe,{style:{cursor:"pointer",width:"1.25em",height:"1.25em",display:"block",opacity:.7,color:i.colors[i.primaryColor][r==="dark"?4:6],filter:`drop-shadow(0 0 2px ${i.colors[i.primaryColor][r==="dark"?4:6]}30)`},onClick:C=>{C.stopPropagation(),n.sceneTreeActions.updateNodeAttributes(e.nodeName,{overrideVisibility:void 0})}})})}):null,R.jsxs(Lo,{position:"bottom",withArrow:!0,shadow:"sm",arrowSize:10,opened:l===e.nodeName,onDismiss:w,middlewares:{flip:!0,shift:!0},withinPortal:!0,children:[R.jsx(Lo.Target,{children:R.jsx(et,{className:h7,style:{width:"1.25em",height:"1.25em",display:"block",transition:"opacity 0.2s"},children:R.jsx(Cr,{label:"Local props",children:R.jsx(u2e,{style:{cursor:"pointer",width:"1.25em",height:"1.25em",display:"block"},onClick:C=>{C.stopPropagation(),A()}})})})}),R.jsx(Lo.Dropdown,{onMouseDown:C=>C.stopPropagation(),onClick:C=>C.stopPropagation(),children:R.jsx(b8e,{nodeName:e.nodeName,closePopoverFn:w})})]})]}),m?h?.map(C=>R.jsx(t,{nodeName:C,isParentVisible:E,indentCount:e.indentCount+1},C)):null]})});function S8e({devSettingsStore:t}){const e=ke.useContext(xi),n=t(u=>u.showStats),i=e.useGui(u=>u.theme.show_logo),r=t(u=>u.fixedDpr),a=t(u=>u.logCamera),s=t(u=>u.enableOrbitCrosshair),o=e.useGui(u=>u.theme.dark_mode),l=u=>{e.useGui.setState({theme:{...e.useGui.getState().theme,dark_mode:u}})},c=u=>{e.useGui.setState({theme:{...e.useGui.getState().theme,show_logo:u}})};return R.jsx(Ms,{withBorder:!0,p:"xs",children:R.jsxs(Xm,{gap:"xs",children:[R.jsx(Rd,{radius:"xs",label:"Dark Mode",checked:o,onChange:u=>l(u.currentTarget.checked),size:"xs"}),R.jsx(Rd,{radius:"xs",label:"WebGL Stats",checked:n,onChange:u=>t.setState({showStats:u.currentTarget.checked}),size:"xs"}),R.jsx(Rd,{radius:"xs",label:"Show Viser Logo",checked:i,onChange:u=>c(u.currentTarget.checked),size:"xs"}),R.jsx(Cr,{label:R.jsxs(R.Fragment,{children:["Log camera position and orientation to the",R.jsx("br",{}),"Javascript console."]}),refProp:"rootRef",children:R.jsx(Rd,{radius:"xs",label:"Log Camera to Console",checked:a,onChange:u=>t.setState({logCamera:u.currentTarget.checked}),size:"xs"})}),R.jsx(Cr,{label:R.jsxs(R.Fragment,{children:["Show crosshair at look-at point",R.jsx("br",{}),"when moving camera."]}),refProp:"rootRef",children:R.jsx(Rd,{radius:"xs",label:"Show Orbit Crosshair",checked:s,onChange:u=>t.setState({enableOrbitCrosshair:u.currentTarget.checked}),size:"xs"})}),R.jsx(Cr,{label:R.jsxs(R.Fragment,{children:["Device pixel ratio for rendering.",R.jsx("br",{}),"Default (adaptive) behavior dynamically",R.jsx("br",{}),"reduces resolution to maintain framerates."]}),children:R.jsx(cv,{label:"Device Pixel Ratio",placeholder:"Adaptive",value:r?.toString()??"",onChange:u=>t.setState({fixedDpr:u?parseFloat(u):null}),data:[{value:"",label:"Adaptive"},{value:"0.5",label:"0.5"},{value:"1",label:"1.0"},{value:"1.5",label:"1.5"},{value:"2",label:"2.0"}],size:"xs",radius:"xs",clearable:!1})})]})})}const w8e=ke.memo(y8e);function E8e(){const t=ke.useContext(xi),e=t.mutable.current,n=t.useGui(a=>a.theme.control_width),[i,r]=ke.useState(!1);return R.jsx(R.Fragment,{children:R.jsxs(Xm,{gap:"xs",mt:"0.3em",children:[R.jsx(Cr,{label:"Server URL",position:"top-start",children:R.jsx(Cg,{leftSection:R.jsx(iS,{src:"./logo.svg",style:{width:"1rem",height:"auto",filter:"grayscale(100%) opacity(0.3)"}}),leftSectionWidth:"1.8rem",defaultValue:t.useGui(a=>a.server),onBlur:a=>t.useGui.setState({server:a.currentTarget.value}),onKeyDown:a=>{a.key==="Enter"&&(a.currentTarget.blur(),a.currentTarget.focus())}})}),R.jsxs(by,{gap:"0.5em",children:[R.jsx(vs,{onClick:async()=>{if("showSaveFilePicker"in window&&(()=>{try{return window.self===window.top}catch{return!1}})()){const s=window.showSaveFilePicker({suggestedName:"render.png",types:[{accept:{"image/png":[".png"]}}]});e.canvas?.toBlob(async o=>{if(o===null){console.error("Export failed");return}const c=await(await s).createWritable();await c.write(o),await c.close()})}else e.canvas?.toBlob(s=>{if(s===null){console.error("Export failed");return}const o=URL.createObjectURL(s),l=document.createElement("a");l.href=o;const c="render.png";l.download=c,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)})},flex:1,leftSection:n==="small"?void 0:R.jsx(h2e,{size:"1rem"}),px:"0",style:{height:"1.875rem"},children:"Save Canvas"}),R.jsx(vs,{onClick:()=>{e.resetCameraView()},flex:1,leftSection:n==="small"?void 0:R.jsx(a2e,{size:"1rem"}),px:"0",style:{height:"1.875rem"},children:"Reset View"})]}),R.jsxs(by,{gap:"md",children:[R.jsx(Cr,{label:R.jsxs(R.Fragment,{children:["Show tool for setting the look-at point and",R.jsx("br",{}),"up direction of the camera.",R.jsx("br",{}),R.jsx("br",{}),"This can be used to set the origin of the",R.jsx("br",{}),"camera's orbit controls."]}),refProp:"rootRef",position:"top-start",children:R.jsx(Eh,{radius:"xs",label:"Orbit Origin Tool",onChange:a=>{t.useGui.setState({showOrbitOriginTool:a.currentTarget.checked})},styles:{label:{paddingLeft:"8px",letterSpacing:"-0.3px"},root:{flex:1}},size:"sm"})}),R.jsx(Eh,{radius:"xs",label:"Dev Settings",onChange:a=>{r(a.currentTarget.checked)},styles:{label:{paddingLeft:"8px",letterSpacing:"-0.3px"},root:{flex:1}},size:"sm"})]}),R.jsx(et,{mt:"-0.4em",children:R.jsx(_h,{in:i,children:R.jsx(et,{mt:"0.4em",children:R.jsx(S8e,{devSettingsStore:t.useDevSettings})})})}),R.jsx(Mg,{}),R.jsxs(et,{children:[R.jsx(Cr,{label:R.jsxs(R.Fragment,{children:["Hierarchical view of all objects in the 3D scene.",R.jsx("br",{}),"Use to override visibility and properties."]}),position:"top-start",children:R.jsx(gu,{style:{fontWeight:500},fz:"sm",children:"Scene tree"})}),R.jsx(w8e,{})]})]})})}const SR=ke.createContext(null);function Nm({children:t}){const e=ke.useRef(null),[n,{toggle:i}]=wc(!0);return R.jsx(SR.Provider,{value:{wrapperRef:e,expanded:n,toggleExpanded:i},children:R.jsx(R.Fragment,{children:R.jsx(Ms,{radius:"0",shadow:"0 0 1em 0 rgba(0,0,0,0.1)",style:{boxSizing:"border-box",zIndex:10,position:"fixed",bottom:0,right:0,margin:0,minHeight:"3.5em",maxHeight:"60%",width:"20em",transition:"height 0.3s linear"},ref:e,children:R.jsx(kc.Autosize,{children:R.jsx(et,{style:{width:"20em"},children:t})})})})})}Nm.Handle=function({children:e}){const n=ke.useContext(SR);return R.jsx(et,{style:{cursor:"pointer",position:"relative",fontWeight:400,userSelect:"none",display:"flex",alignItems:"center",padding:"0 0.8em",height:"3.5em"},onClick:()=>{n.toggleExpanded()},children:e})};Nm.Contents=function({children:e}){const n=ke.useContext(SR);return R.jsxs(_h,{in:n.expanded,children:[R.jsx(Mg,{mx:"xs"}),e]})};Nm.HideWhenCollapsed=function({children:e}){return ke.useContext(SR)?.expanded??!0?e:null};const M8e={move:"touchmove",end:"touchend"},T8e={move:"mousemove",end:"mouseup"};function A8e(t){return t.type==="touchmove"}function C8e(t){return t.type==="mousemove"}const wR=ke.createContext(null);function Pm({children:t,width:e}){const n=ke.useRef(null),[i,{toggle:r}]=wc(!0),[a,s]=ke.useState(800),o=ke.useRef({dragging:!1,startPosX:0,startPosY:0,startClientX:0,startClientY:0}),l=ke.useRef({}),c=(d,m,y)=>Math.abs(d+m/2)<Math.abs(d-y+m/2)?d:d-y,u=15;function f(d,m){const y=n.current;if(y===null)return[d,m];const v=y.parentElement;if(v===null)return[d,m];let g=d,x=m;return g=Math.min(g,v.clientWidth-y.clientWidth-u),g=Math.max(g,u),x=Math.min(x,v.clientHeight-y.clientHeight-u),x=Math.max(x,u),y.style.top=`${x.toString()}px`,y.style.left=`${g.toString()}px`,[c(g,y.clientWidth,v.clientWidth),c(x,y.clientHeight,v.clientHeight)]}ke.useEffect(()=>{const d=n.current;if(d===null)return;const m=d.parentElement;if(m===null)return;const y=new ResizeObserver(()=>{l.current.x===void 0&&(l.current.x=c(d.offsetLeft,d.clientWidth,m.clientWidth)),l.current.y===void 0&&(l.current.y=c(d.offsetTop,d.clientHeight,m.clientHeight));const v=m.clientHeight-u*2;a!==v&&s(v);let g=l.current.x,x=l.current.y;for(;g<0;)g+=m.clientWidth;for(;x<0;)x+=m.clientHeight;f(g,x)});return y.observe(d),y.observe(m),()=>{y.disconnect()}});const h=d=>{const m=o.current,y=n.current;if(!y)return;d.type=="touchstart"?(d=d,m.startClientX=d.touches[0].clientX,m.startClientY=d.touches[0].clientY):(d=d,m.startClientX=d.clientX,m.startClientY=d.clientY),m.startPosX=y.offsetLeft,m.startPosY=y.offsetTop;const v=d.type=="touchstart"?M8e:T8e;function g(x){let _=0,E=0;if(A8e(x)?(x=x,_=x.touches[0].clientX-m.startClientX,E=x.touches[0].clientY-m.startClientY):C8e(x)&&(x=x,_=x.clientX-m.startClientX,E=x.clientY-m.startClientY),Math.abs(_)<=3&&Math.abs(E)<=3)return;m.dragging=!0;const T=m.startPosX+_,w=m.startPosY+E;[l.current.x,l.current.y]=f(T,w)}window.addEventListener(v.move,g),window.addEventListener(v.end,()=>{d.type=="touchstart"&&(m.dragging=!1),window.removeEventListener(v.move,g)},{once:!0})};return R.jsx(wR.Provider,{value:{wrapperRef:n,expanded:i,width:e,maxHeight:a,toggleExpanded:r,dragHandler:h,dragInfo:o},children:R.jsx(Ms,{radius:"xs",shadow:"0.1em 0 1em 0 rgba(0,0,0,0.1)",style:{boxSizing:"border-box",width:e,zIndex:10,position:"absolute",top:"1em",right:"1em",margin:0,"& .expandIcon":{transform:"rotate(0)"},overflow:"hidden"},ref:n,children:t})})}Pm.Handle=function({children:e}){const n=ke.useContext(wR);return R.jsx(R.Fragment,{children:R.jsx(et,{style:{borderRadius:"0.2em 0.2em 0 0",lineHeight:"1.5em",cursor:"pointer",position:"relative",fontWeight:400,userSelect:"none",display:"flex",alignItems:"center",padding:"0 0.75em",height:"2.75em"},onClick:()=>{const i=n.dragInfo.current;if(i.dragging){i.dragging=!1;return}n.toggleExpanded()},onTouchStart:i=>{n.dragHandler(i)},onMouseDown:i=>{n.dragHandler(i)},children:e})})};Pm.Contents=function({children:e}){const n=ke.useContext(wR);return R.jsxs(_h,{in:n.expanded,children:[R.jsx(Mg,{mx:"xs"}),R.jsx(kc.Autosize,{mah:n.maxHeight,children:R.jsx(et,{style:{width:n.width},children:e})})]})};Pm.HideWhenCollapsed=function({children:e}){return ke.useContext(wR)?.expanded??!0?e:null};const Mne=ke.createContext(null);function V1({children:t,collapsible:e,width:n}){const[i,{toggle:r}]=wc(!1),a=R.jsx(et,{style:s=>({position:"absolute",top:0,right:i?"0em":"-3em",transitionProperty:"right",transitionDuration:"0.5s",transitionDelay:"0.25s",borderBottomLeftRadius:"0.5em",backgroundColor:tv().colorScheme=="dark"?s.colors.dark[5]:s.colors.gray[2],padding:"0.5em"}),children:R.jsx(kl,{onClick:s=>{s.stopPropagation(),r()},children:R.jsx(Cr,{zIndex:100,label:"Show sidebar",children:R.jsx(LCe,{})})})});return R.jsxs(Mne.Provider,{value:{collapsible:e,toggleCollapsed:r},children:[a,R.jsx(Ms,{shadow:"0 0 1em 0 rgba(0,0,0,0.1)",style:{width:i?0:n,boxSizing:"content-box",transition:"width 0.5s 0s",zIndex:8}}),R.jsx(Ms,{radius:0,style:{width:i?0:n,top:0,bottom:0,right:0,position:"absolute",boxSizing:"content-box",transition:"width 0.5s 0s",zIndex:20},children:R.jsx(et,{style:{width:n,height:"100%",display:"flex",flexDirection:"column"},children:t})})]})}V1.Handle=function({children:e}){const{toggleCollapsed:n,collapsible:i}=ke.useContext(Mne),r=R.jsx(kl,{onClick:a=>{a.stopPropagation(),n()},children:R.jsx(Cr,{zIndex:100,label:"Collapse sidebar",children:R.jsx(BCe,{stroke:1.625})})});return R.jsxs(R.Fragment,{children:[R.jsxs(et,{p:"xs",style:{lineHeight:"1.5em",fontWeight:400,position:"relative",zIndex:20,alignItems:"center",display:"flex",flexDirection:"row"},children:[e,i?r:null]}),R.jsx(Mg,{mx:"xs"})]})};V1.Contents=function({children:e}){return R.jsx(kc,{style:{flexGrow:1},children:e})};const R8e="root",k8e=ke.memo(sF);function D8e(t){const e=Da(),n=KL(`(max-width: ${e.breakpoints.xs})`),i=ke.useContext(xi),r=i.useGui(f=>"root"in f.guiUuidSetFromContainerUuid),[a,{toggle:s}]=wc(!1),o=i.useGui(f=>f.theme.control_width),l=o=="small"?"16em":o=="medium"?"20em":o=="large"?"24em":null,c=R.jsx(kl,{onClick:f=>{f.stopPropagation(),s()},style:{display:r?void 0:"none",transform:"translateY(0.05em)"},children:R.jsx(Cr,{zIndex:100,label:a?"Return to GUI":"Configuration & diagnostics",withinPortal:!0,children:a?R.jsx(MCe,{stroke:1.625}):R.jsx(wCe,{stroke:1.625})})}),u=R.jsxs(R.Fragment,{children:[R.jsx(_h,{in:!r||a,children:R.jsx(et,{p:"xs",pt:"0.375em",children:R.jsx(E8e,{})})}),R.jsx(_h,{in:r&&!a,children:R.jsx(k8e,{containerUuid:R8e})})]});return n?R.jsxs(Nm,{children:[R.jsxs(Nm.Handle,{children:[R.jsx(eI,{}),R.jsxs(Nm.HideWhenCollapsed,{children:[R.jsx(tI,{}),c]})]}),R.jsx(Nm.Contents,{children:u})]}):t.control_layout==="floating"?R.jsxs(Pm,{width:l,children:[R.jsxs(Pm.Handle,{children:[R.jsx(eI,{}),R.jsxs(Pm.HideWhenCollapsed,{children:[R.jsx(tI,{}),c]})]}),R.jsx(Pm.Contents,{children:u})]}):R.jsxs(V1,{width:l,collapsible:t.control_layout==="collapsible",children:[R.jsxs(V1.Handle,{children:[R.jsx(eI,{}),R.jsx(tI,{}),c]}),R.jsx(V1.Contents,{children:u})]})}function eI(){const{useGui:t}=ke.useContext(xi),e=t(i=>i.websocketConnected),n=t(i=>i.label);return R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{width:"1.1em"}})," ",R.jsx(Mc,{transition:"skew-down",mounted:e,children:i=>R.jsx(HCe,{color:"#0b0",style:{position:"absolute",width:"1.25em",height:"1.25em",...i}})}),R.jsx(Mc,{transition:"skew-down",mounted:!e,children:i=>R.jsx(cp,{size:"xs",type:"dots",color:"red",style:{position:"absolute",...i}})}),R.jsx(et,{px:"xs",style:{flexGrow:1,letterSpacing:"-0.5px"},pt:"0.1em",children:n!==""?n:e?"Connected":"Connecting..."})]})}function tI(){const t=ke.useContext(xi),e=t.mutable.current,n=t.useGui(d=>d.websocketConnected),i=t.useGui(d=>d.shareUrl),r=t.useGui(d=>d.setShareUrl),[a,s]=ke.useState(!1),[o,{open:l,close:c}]=wc(!1),[u,{toggle:f}]=wc();ke.useEffect(()=>{i!==null&&s(!1)},[i]),ke.useEffect(()=>{!n&&o&&c()},[n,o]);const h=tv().colorScheme;return t.useGui(d=>d.theme).show_share_button===!1?null:R.jsxs(R.Fragment,{children:[R.jsx(Cr,{zIndex:100,label:n?"Share":"Share (needs connection)",withinPortal:!0,children:R.jsx(kl,{onClick:d=>{d.stopPropagation(),l()},style:{transform:"translateY(0.05em)"},disabled:!n,children:R.jsx(x2e,{stroke:2,height:"1.125em",width:"1.125em"})})}),R.jsxs(xo,{title:"Share",opened:o,onClose:c,withCloseButton:!1,zIndex:100,withinPortal:!0,onClick:d=>d.stopPropagation(),onMouseDown:d=>d.stopPropagation(),onMouseMove:d=>d.stopPropagation(),onMouseUp:d=>d.stopPropagation(),styles:{title:{fontWeight:600}},children:[i===null?R.jsx(R.Fragment,{children:a?R.jsx(Xm,{mb:"xl",children:R.jsx(cp,{size:"xl",mx:"auto",type:"dots"})}):R.jsxs(Xm,{mb:"md",children:[R.jsx(gu,{children:"Create a public, shareable URL to this Viser instance."}),R.jsx(vs,{fullWidth:!0,onClick:()=>{e.sendMessage({type:"ShareUrlRequest"}),s(!0)},children:"Request Share URL"})]})}):R.jsxs(R.Fragment,{children:[R.jsx(gu,{children:"Share URL is connected."}),R.jsxs(Xm,{gap:"xs",my:"md",children:[R.jsx(Cg,{value:i}),R.jsxs(wh,{justify:"space-between",columnGap:"0.5em",align:"center",children:[R.jsx(iK,{value:i,children:({copied:d,copy:m})=>R.jsx(vs,{style:{width:"50%"},leftSection:d?R.jsx(AB,{height:"1.375em",width:"1.375em"}):R.jsx(WCe,{height:"1.375em",width:"1.375em"}),onClick:m,variant:d?"outline":"filled",children:d?"Copied!":"Copy URL"})}),R.jsx(vs,{style:{flexGrow:1},leftSection:u?R.jsx(g2e,{}):R.jsx(y2e,{}),onClick:f,children:"QR Code"}),R.jsx(Cr,{zIndex:100,label:"Disconnect",withinPortal:!0,children:R.jsx(vs,{color:"red",onClick:()=>{e.sendMessage({type:"ShareUrlDisconnect"}),r(null)},children:R.jsx(p2e,{})})})]}),R.jsx(_h,{in:u,children:R.jsx($Fe,{value:i,fgColor:h==="dark"?"#ffffff":"#000000",bgColor:"rgba(0,0,0,0)",level:"M",style:{width:"100%",height:"auto",margin:"1em auto 0 auto"}})})]})]}),R.jsxs(gu,{size:"xs",children:["Share links are experimental and bandwidth-limited. Problems? Consider"," ",R.jsx(qm,{href:"https://github.com/nerfstudio-project/viser/issues",children:"reporting on GitHub"}),"."]})]})]})}var Ln,v7,O0,rC;(function(t){t.HEX="HEX",t.RGB="RGB",t.HSL="HSL",t.CIELab="CIELab",t.CMYK="CMYK"})(Ln||(Ln={})),function(t){t.ANALOGOUS="ANALOGOUS",t.COMPLEMENTARY="COMPLEMENTARY",t.SPLIT_COMPLEMENTARY="SPLIT_COMPLEMENTARY",t.TRIADIC="TRIADIC",t.TETRADIC="TETRADIC",t.SQUARE="SQUARE"}(v7||(v7={})),function(t){t.ADDITIVE="ADDITIVE",t.SUBTRACTIVE="SUBTRACTIVE"}(O0||(O0={})),function(t){t.black="#000000",t.silver="#C0C0C0",t.gray="#808080",t.white="#FFFFFF",t.maroon="#800000",t.red="#FF0000",t.purple="#800080",t.fuchsia="#FF00FF",t.green="#008000",t.lime="#00FF00",t.olive="#808000",t.yellow="#FFFF00",t.navy="#000080",t.blue="#0000FF",t.teal="#008080",t.aqua="#00FFFF",t.orange="#FFA500",t.aliceblue="#F0F8FF",t.antiquewhite="#FAEBD7",t.aquamarine="#7FFFD4",t.azure="#F0FFFF",t.beige="#F5F5DC",t.bisque="#FFE4C4",t.blanchedalmond="#FFEBCD",t.blueviolet="#8A2BE2",t.brown="#A52A2A",t.burlywood="#DEB887",t.cadetblue="#5F9EA0",t.chartreuse="#7FFF00",t.chocolate="#D2691E",t.coral="#FF7F50",t.cornflowerblue="#6495ED",t.cornsilk="#FFF8DC",t.crimson="#DC143C",t.cyan="#00FFFF",t.darkblue="#00008B",t.darkcyan="#008B8B",t.darkgoldenrod="#B8860B",t.darkgray="#A9A9A9",t.darkgreen="#006400",t.darkgrey="#A9A9A9",t.darkkhaki="#BDB76B",t.darkmagenta="#8B008B",t.darkolivegreen="#556B2F",t.darkorange="#FF8C00",t.darkorchid="#9932CC",t.darkred="#8B0000",t.darksalmon="#E9967A",t.darkseagreen="#8FBC8F",t.darkslateblue="#483D8B",t.darkslategray="#2F4F4F",t.darkslategrey="#2F4F4F",t.darkturquoise="#00CED1",t.darkviolet="#9400D3",t.deeppink="#FF1493",t.deepskyblue="#00BFFF",t.dimgray="#696969",t.dimgrey="#696969",t.dodgerblue="#1E90FF",t.firebrick="#B22222",t.floralwhite="#FFFAF0",t.forestgreen="#228B22",t.gainsboro="#DCDCDC",t.ghostwhite="#F8F8FF",t.gold="#FFD700",t.goldenrod="#DAA520",t.greenyellow="#ADFF2F",t.grey="#808080",t.honeydew="#F0FFF0",t.hotpink="#FF69B4",t.indianred="#CD5C5C",t.indigo="#4B0082",t.ivory="#FFFFF0",t.khaki="#F0E68C",t.lavender="#E6E6FA",t.lavenderblush="#FFF0F5",t.lawngreen="#7CFC00",t.lemonchiffon="#FFFACD",t.lightblue="#ADD8E6",t.lightcoral="#F08080",t.lightcyan="#E0FFFF",t.lightgoldenrodyellow="#FAFAD2",t.lightgray="#D3D3D3",t.lightgreen="#90EE90",t.lightgrey="#D3D3D3",t.lightpink="#FFB6C1",t.lightsalmon="#FFA07A",t.lightseagreen="#20B2AA",t.lightskyblue="#87CEFA",t.lightslategray="#778899",t.lightslategrey="#778899",t.lightsteelblue="#B0C4DE",t.lightyellow="#FFFFE0",t.limegreen="#32CD32",t.linen="#FAF0E6",t.magenta="#FF00FF",t.mediumaquamarine="#66CDAA",t.mediumblue="#0000CD",t.mediumorchid="#BA55D3",t.mediumpurple="#9370DB",t.mediumseagreen="#3CB371",t.mediumslateblue="#7B68EE",t.mediumspringgreen="#00FA9A",t.mediumturquoise="#48D1CC",t.mediumvioletred="#C71585",t.midnightblue="#191970",t.mintcream="#F5FFFA",t.mistyrose="#FFE4E1",t.moccasin="#FFE4B5",t.navajowhite="#FFDEAD",t.oldlace="#FDF5E6",t.olivedrab="#6B8E23",t.orangered="#FF4500",t.orchid="#DA70D6",t.palegoldenrod="#EEE8AA",t.palegreen="#98FB98",t.paleturquoise="#AFEEEE",t.palevioletred="#DB7093",t.papayawhip="#FFEFD5",t.peachpuff="#FFDAB9",t.peru="#CD853F",t.pink="#FFC0CB",t.plum="#DDA0DD",t.powderblue="#B0E0E6",t.rosybrown="#BC8F8F",t.royalblue="#4169E1",t.saddlebrown="#8B4513",t.salmon="#FA8072",t.sandybrown="#F4A460",t.seagreen="#2E8B57",t.seashell="#FFF5EE",t.sienna="#A0522D",t.skyblue="#87CEEB",t.slateblue="#6A5ACD",t.slategray="#708090",t.slategrey="#708090",t.snow="#FFFAFA",t.springgreen="#00FF7F",t.steelblue="#4682B4",t.tan="#D2B48C",t.thistle="#D8BFD8",t.tomato="#FF6347",t.turquoise="#40E0D0",t.violet="#EE82EE",t.wheat="#F5DEB3",t.whitesmoke="#F5F5F5",t.yellowgreen="#9ACD32",t.rebeccapurple="#663399"}(rC||(rC={}));const Tne=Object.keys(rC),O8e={HEX:["R","G","B","A"],RGB:["R","G","B","A"],HSL:["H","S","L","A"],CIELab:["L","a","b","A"],CMYK:["C","M","Y","K","A"]},BP={BGR:Ln.RGB,ABGR:Ln.RGB,HLS:Ln.HSL,AHLS:Ln.HSL,LAB:Ln.CIELab,ALAB:Ln.CIELab,CKMY:Ln.CMYK,ACKMY:Ln.CMYK};var x7;(function(t){t.NUMBER="number",t.BOOLEAN="boolean"})(x7||(x7={}));const p0={[Ln.HEX]:/^#(?:([a-f\d])([a-f\d])([a-f\d])([a-f\d])?|([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?)$/i,[Ln.RGB]:/^rgba?\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[Ln.HSL]:/^hsla?\s*\(\s*(?:(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*,\s*((?:\d*\.)?\d+)%\s*,\s*((?:\d*\.)?\d+)%(?:\s*,\s*((?:\d*\.)?\d+))?|(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*((?:\d*\.)?\d+)%\s*((?:\d*\.)?\d+)%(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[Ln.CIELab]:/^lab\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*(-?(?:\d*\.)?\d+%?)\s*(-?(?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[Ln.CMYK]:/^(?:device-cmyk|cmyk)\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/},I8e=/^(-?(?:\d*\.)?\d+)((?:deg|grad|rad|turn)?)$/,Pg=/^(-?\d+(?:\.\d+)?|-?\.\d+)%$/,FP=/^0x([a-f\d]{1,2})$/i,N8e=/\{(\d+)\}/g,P8e="The provided string color doesn't have a correct format",L8e="The provided color object doesn't have the proper keys or format";var pl,pu,zP;(function(t){t.NONE="none",t.DEGREES="deg",t.GRADIANS="grad",t.RADIANS="rad",t.TURNS="turn"})(pl||(pl={})),function(t){t.NONE="none",t.PERCENT="percent"}(pu||(pu={})),function(t){t.DEVICE_CMYK="device-cmyk",t.CMYK="cmyk"}(zP||(zP={}));pl.NONE,pu.NONE,pu.NONE,pu.PERCENT,pu.NONE,zP.DEVICE_CMYK;const uo=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),OS=t=>+`${t}`.replace(Pg,"$1"),eg=t=>Pg.test(`${t}`)?OS(t):Math.min(+t,100),_M=t=>(t.length===1&&(t+=t),parseInt(t,16)),SM=t=>{const e=bn(t,0).toString(16).toUpperCase();return e.length===1?`0x0${e}`:`0x${e}`},Lm=(t,e=!1)=>!e&&Pg.test(t)?Math.min(255*OS(t)/100,255):FP.test(t)?(t.length===3&&(t+=t.slice(-1)),e?bn(t)/255:bn(t)):Math.min(+t,e?1:255),aC=t=>Pg.test(t)?ty(125*OS(t)/100,-125,125):ty(+t,-125,125),Bd=t=>Math.min(Pg.test(t)?OS(t)/100:+t,1),Ane=t=>[...t].sort().join("").toUpperCase(),bn=(t,e=6)=>{const n=Math.pow(10,e);return Math.round(+t*n)/n},ty=(t,e,n)=>Math.max(e,Math.min(t,n)),Cne=t=>{if(typeof t=="string"){const e=t.match(I8e),n=+e[1];switch(e[2]){case pl.RADIANS:t=bn(180*n/Math.PI);break;case pl.TURNS:t=bn(360*n);break;case pl.GRADIANS:t=bn(.9*n);break;case pl.DEGREES:default:t=n}}return(t>360||t<0)&&(t-=360*Math.floor(t/360)),t},U8e=(t,e)=>{let n;switch(e){case pl.RADIANS:n=bn((i=>i*Math.PI/180)(t));break;case pl.TURNS:n=bn(t/360);break;case pl.GRADIANS:n=bn(10/9*t);break;case pl.DEGREES:case pl.NONE:default:n=t}return n},Rne=[[.4360747,.3850649,.1430804],[.2225045,.7168786,.0606169],[.0139322,.0971045,.7141733]],B8e=[[3.1338561,-1.6168667,-.4906146],[-.9787684,1.9161415,.033454],[.0719453,-.2289914,1.4052427]],ny=Rne.map(t=>t.reduce((e,n)=>e+n,0)),nI=(t,e,n)=>(n<0&&(n+=6),n>=6&&(n-=6),bn(n<1?255*((e-t)*n+t):n<3?255*e:n<4?255*((e-t)*(4-n)+t):255*t)),F8e=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4,z8e=t=>t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055,kne=(t,e,n,i)=>{const r=[0,0,0],a=[t,e,n];return i.forEach((s,o)=>{s.forEach((l,c)=>{r[o]+=l*a[c]})}),r},wd=(t,e,n)=>{e/=100;const i=(n/=100)<=.5?n*(e+1):n+e-n*e,r=2*n-i;return{R:nI(r,i,(t/=60)+2),G:nI(r,i,t),B:nI(r,i,t-2)}},jP=(t,e,n,i=1)=>{t/=255,e/=255,n/=255,i=Math.min(i,1);const r=Math.max(t,e,n),a=Math.min(t,e,n),s=r-a;let o=0,l=0;const c=(r+a)/2;if(s!==0){switch(r){case t:o=(e-n)/s%6;break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4}o=bn(60*o),o<0&&(o+=360),l=s/(1-Math.abs(2*c-1))}return{H:o,S:bn(100*l),L:bn(100*c),A:i}},sC=(t,e,n)=>{const i=[t/255,e/255,n/255].map(F8e),r=kne(i[0],i[1],i[2],Rne),a=((s,o,l)=>{const c=h=>h>.008856451679035631?Math.cbrt(h):h/.12841854934601665+.13793103448275862,u=c(s/ny[0]),f=c(o/ny[1]);return[116*f-16,500*(u-f),200*(f-c(l/ny[2]))]})(r[0],r[1],r[2]);return{L:a[0],a:a[1],b:a[2]}},Dne=(t,e,n)=>{const i=((a,s,o)=>{const l=h=>h>.20689655172413793?h**3:.12841854934601665*(h-.13793103448275862),c=(a+16)/116,u=s/500,f=o/200;return[ny[0]*l(c+u),ny[1]*l(c),ny[2]*l(c-f)]})(t,e,n),r=kne(i[0],i[1],i[2],B8e).map(z8e);return{R:ty(255*r[0],0,255),G:ty(255*r[1],0,255),B:ty(255*r[2],0,255)}},One=(t,e,n,i)=>({R:bn(255*(1-t)*(i=1-i)),G:bn(255*(1-e)*i),B:bn(255*(1-n)*i)}),j8e=(t,e,n)=>{t/=255,e/=255,n/=255;const i=1-Math.max(t,e,n),r=1-i,a=r&&(r-e)/r,s=r&&(r-n)/r;return{C:bn(100*(r&&(r-t)/r)),M:bn(100*a),Y:bn(100*s),K:bn(100*i)}},iI=t=>t?", ":",",jx=(t,e)=>{const n=Ane(Object.keys(t));return O8e[BP[n]].reduce((i,r,a)=>{const s=t[r];return s!==void 0&&i.push(e(s,a)),i},[])},Hx=(t,e)=>t.replace(N8e,(n,i)=>`${e[+i-1]}`),wM=(t,e,n=!1)=>{const{alphaUnit:i,legacyCSS:r,decimals:a}=e;return i!==pu.PERCENT||r&&!n?bn(t,a):`${bn(100*t,a)}%`},ec={[Ln.HEX]:t=>{const e=jx(t,i=>(r=>{let a=bn(r,0).toString(16).toUpperCase();return a.length===1&&(a=`0${a}`),a})(bn(i))),n=e.length===4?"#{1}{2}{3}{4}":"#{1}{2}{3}";return Hx(n,e)},[Ln.RGB]:(t,e)=>{const{decimals:n,legacyCSS:i,spacesAfterCommas:r,rgbUnit:a}=e,s=iI(r),o=jx(t,(c,u)=>a===pu.PERCENT&&u<3?`${((f,h)=>bn(f/255*100,h))(c,n)}%`:u===3?wM(c,e):bn(c,n)),l=i?o.length===4?`rgba({1}${s}{2}${s}{3}${s}{4})`:`rgb({1}${s}{2}${s}{3})`:o.length===4?"rgb({1} {2} {3} / {4})":"rgb({1} {2} {3})";return Hx(l,o)},[Ln.HSL]:(t,e)=>{const{decimals:n,legacyCSS:i,spacesAfterCommas:r,anglesUnit:a}=e,s=iI(r),o=jx(t,(c,u)=>u===0&&a!==pl.NONE?`${bn(U8e(c,a),n)}${a}`:u===3?wM(c,e):bn(c,n)),l=i?o.length===4?`hsla({1}${s}{2}%${s}{3}%${s}{4})`:`hsl({1}${s}{2}%${s}{3}%)`:o.length===4?"hsl({1} {2}% {3}% / {4})":"hsl({1} {2}% {3}%)";return Hx(l,o)},[Ln.CIELab]:(t,e)=>{const{decimals:n,labUnit:i}=e,r=jx(t,(s,o)=>{if(o===0){const l=bn(eg(s),n);return i===pu.PERCENT?`${l}%`:`${l}`}return o<3?i===pu.PERCENT?`${((l,c)=>bn(l/125*100,c))(s,n)}%`:bn(s,n):wM(s,e,!0)}),a=r.length===4?"lab({1} {2} {3} / {4})":"lab({1} {2} {3})";return Hx(a,r)},[Ln.CMYK]:(t,e)=>{const{decimals:n,legacyCSS:i,spacesAfterCommas:r,cmykUnit:a,cmykFunction:s}=e,o=iI(r),l=jx(t,(u,f)=>a===pu.PERCENT&&f<4?`${bn(u,n)}%`:f===4?wM(u,e):bn(u/100,n)),c=i?l.length===5?`${s}({1}${o}{2}${o}{3}${o}{4}${o}{5})`:`${s}({1}${o}{2}${o}{3}${o}{4})`:l.length===5?`${s}({1} {2} {3} {4} / {5})`:`${s}({1} {2} {3} {4})`;return Hx(c,l)}},lh=t=>(typeof t=="string"&&(t=Pg.test(t)?OS(t)/100:+t),isNaN(+t)||t>1?1:bn(t)),Ine=t=>typeof t=="string"?(e=>{let n;if(Object.keys(Ln).some(i=>{if(p0[i].test(e))return n=i,!0}),!n&&~Tne.indexOf(e)&&(n=Ln.HEX),!n)throw new Error(P8e);return n})(t):(e=>{let n,i=!1;const r=Ane(Object.keys(e));if(BP[r]&&(n=BP[r]),n&&n===Ln.RGB){const a=Object.entries(e).some(o=>!FP.test(`${o[1]}`)),s=Object.entries(e).some(o=>!(Pg.test(`${o[1]}`)||!FP.test(`${o[1]}`)&&!isNaN(+o[1])&&+o[1]<=255));a&&s&&(i=!0),a||(n=Ln.HEX)}if(!n||i)throw new Error(L8e);return n})(t),H8e={[Ln.HEX](t){const e=(~Tne.indexOf(t)?rC[t]:t).match(p0.HEX),n={R:_M(e[1]||e[5]),G:_M(e[2]||e[6]),B:_M(e[3]||e[7])},i=e[4]||e[8];return i!==void 0&&(n.A=_M(i)/255),n},[Ln.RGB](t){const e=t.match(p0.RGB),n=Lm(e[1]||e[5]),i=Lm(e[2]||e[6]),r=Lm(e[3]||e[7]),a=e[4]||e[8],s={R:Math.min(n,255),G:Math.min(i,255),B:Math.min(r,255)};return a!==void 0&&(s.A=lh(a)),s},[Ln.HSL](t){const e=t.match(p0.HSL),n=Cne(e[1]||e[5]),i=eg(e[2]||e[6]),r=eg(e[3]||e[7]),a=e[4]||e[8],s=wd(n,i,r);return a!==void 0&&(s.A=lh(a)),s},[Ln.CIELab](t){const e=t.match(p0.CIELab),n=eg(e[1]),i=aC(e[2]),r=aC(e[3]),a=e[4],s=Dne(n,i,r);return a!==void 0&&(s.A=lh(a)),s},[Ln.CMYK](t){const e=t.match(p0.CMYK),n=Bd(e[1]||e[6]),i=Bd(e[2]||e[7]),r=Bd(e[3]||e[8]),a=Bd(e[4]||e[9]),s=e[5]||e[10],o=One(n,i,r,a);return s!==void 0&&(o.A=lh(s)),o}},V8e={[Ln.HEX](t){const e={R:Lm(`${t.R}`),G:Lm(`${t.G}`),B:Lm(`${t.B}`)};return uo(t,"A")&&(e.A=Math.min(Lm(`${t.A}`,!0),1)),e},[Ln.RGB](t){return this.HEX(t)},[Ln.HSL](t){const e=eg(`${t.S}`),n=eg(`${t.L}`),i=wd(Cne(t.H),e,n);return uo(t,"A")&&(i.A=lh(t.A)),i},[Ln.CIELab](t){const e=eg(`${t.L}`),n=aC(`${t.a}`),i=aC(`${t.b}`),r=Dne(e,n,i);return uo(t,"A")&&(r.A=lh(t.A)),r},[Ln.CMYK](t){const e=Bd(`${t.C}`),n=Bd(`${t.M}`),i=Bd(`${t.Y}`),r=Bd(`${t.K}`),a=One(e,n,i,r);return uo(t,"A")&&(a.A=lh(t.A)),a}},G8e=(t,e=Ine(t))=>typeof t=="string"?H8e[e](t):V8e[e](t),ms={[Ln.HEX]:t=>({R:SM(t.R),G:SM(t.G),B:SM(t.B)}),HEXA(t){const e=ms.HEX(t);return e.A=uo(t,"A")?SM(255*t.A):"0xFF",e},[Ln.RGB](t,e){const n=W8e(t,e);return uo(n,"A")&&delete n.A,n},RGBA(t,e){const n=ms.RGB(t,e);return n.A=uo(t,"A")?bn(t.A):1,n},[Ln.HSL](t,e){const n=jP(t.R,t.G,t.B);return delete n.A,q8e(n,e)},HSLA(t,e){const n=ms.HSL(t,e);return n.A=uo(t,"A")?bn(t.A,e):1,n},[Ln.CIELab](t,e){const n=sC(t.R,t.G,t.B);return X8e(n,e)},CIELabA(t,e){const n=ms.CIELab(t,e);return n.A=uo(t,"A")?bn(t.A,e):1,n},[Ln.CMYK]:(t,e)=>Y8e(j8e(t.R,t.G,t.B),e),CMYKA(t,e){const n=ms.CMYK(t,e);return n.A=uo(t,"A")?bn(t.A,e):1,n}};Ln.HEX+"",Ln.RGB+"",Ln.HSL+"",Ln.CIELab+"";Ln.HEX+"",Ln.RGB+"",Ln.HSL+"",Ln.CIELab+"";const W8e=(t,e)=>({R:bn(t.R,e),G:bn(t.G,e),B:bn(t.B,e),...uo(t,"A")?{A:bn(t.A,e)}:{}}),q8e=(t,e)=>({H:bn(t.H,e),S:bn(t.S,e),L:bn(t.L,e),...uo(t,"A")?{A:bn(t.A,e)}:{}}),X8e=(t,e)=>({L:bn(t.L,e),a:bn(t.a,e),b:bn(t.b,e)}),Y8e=(t,e)=>({C:bn(t.C,e),M:bn(t.M,e),Y:bn(t.Y,e),K:bn(t.K,e)});var Nne=Symbol.for("immer-nothing"),_7=Symbol.for("immer-draftable"),er=Symbol.for("immer-state");function cc(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Vy=Object.getPrototypeOf;function Gy(t){return!!t&&!!t[er]}function Ch(t){return t?Pne(t)||Array.isArray(t)||!!t[_7]||!!t.constructor?.[_7]||MR(t)||TR(t):!1}var $8e=Object.prototype.constructor.toString();function Pne(t){if(!t||typeof t!="object")return!1;const e=Vy(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===$8e}function R_(t,e){ER(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,i)=>e(i,n,t))}function ER(t){const e=t[er];return e?e.type_:Array.isArray(t)?1:MR(t)?2:TR(t)?3:0}function HP(t,e){return ER(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Lne(t,e,n){const i=ER(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function K8e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function MR(t){return t instanceof Map}function TR(t){return t instanceof Set}function Xa(t){return t.copy_||t.base_}function VP(t,e){if(MR(t))return new Map(t);if(TR(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Pne(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[er];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const s=r[a],o=i[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Vy(t),i)}else{const i=Vy(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function fF(t,e=!1){return AR(t)||Gy(t)||!Ch(t)||(ER(t)>1&&(t.set=t.add=t.clear=t.delete=J8e),Object.freeze(t),e&&Object.entries(t).forEach(([n,i])=>fF(i,!0))),t}function J8e(){cc(2)}function AR(t){return Object.isFrozen(t)}var GP={};function yg(t){const e=GP[t];return e||cc(0,t),e}function Z8e(t,e){GP[t]||(GP[t]=e)}var k_;function oC(){return k_}function Q8e(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function S7(t,e){e&&(yg("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function WP(t){qP(t),t.drafts_.forEach(eze),t.drafts_=null}function qP(t){t===k_&&(k_=t.parent_)}function w7(t){return k_=Q8e(k_,t)}function eze(t){const e=t[er];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function E7(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[er].modified_&&(WP(e),cc(4)),Ch(t)&&(t=lC(e,t),e.parent_||cC(e,t)),e.patches_&&yg("Patches").generateReplacementPatches_(n[er].base_,t,e.patches_,e.inversePatches_)):t=lC(e,n,[]),WP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Nne?t:void 0}function lC(t,e,n){if(AR(e))return e;const i=e[er];if(!i)return R_(e,(r,a)=>M7(t,i,e,r,a,n)),e;if(i.scope_!==t)return e;if(!i.modified_)return cC(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let a=r,s=!1;i.type_===3&&(a=new Set(r),r.clear(),s=!0),R_(a,(o,l)=>M7(t,i,r,o,l,n,s)),cC(t,r,!1),n&&t.patches_&&yg("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function M7(t,e,n,i,r,a,s){if(Gy(r)){const o=a&&e&&e.type_!==3&&!HP(e.assigned_,i)?a.concat(i):void 0,l=lC(t,r,o);if(Lne(n,i,l),Gy(l))t.canAutoFreeze_=!1;else return}else s&&n.add(r);if(Ch(r)&&!AR(r)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;lC(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&cC(t,r)}}function cC(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&fF(e,n)}function tze(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:oC(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=hF;n&&(r=[i],a=D_);const{revoke:s,proxy:o}=Proxy.revocable(r,a);return i.draft_=o,i.revoke_=s,o}var hF={get(t,e){if(e===er)return t;const n=Xa(t);if(!HP(n,e))return nze(t,n,e);const i=n[e];return t.finalized_||!Ch(i)?i:i===rI(t.base_,e)?(aI(t),t.copy_[e]=O_(i,t)):i},has(t,e){return e in Xa(t)},ownKeys(t){return Reflect.ownKeys(Xa(t))},set(t,e,n){const i=Une(Xa(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=rI(Xa(t),e),a=r?.[er];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(K8e(n,r)&&(n!==void 0||HP(t.base_,e)))return!0;aI(t),$f(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return rI(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,aI(t),$f(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Xa(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){cc(11)},getPrototypeOf(t){return Vy(t.base_)},setPrototypeOf(){cc(12)}},D_={};R_(hF,(t,e)=>{D_[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});D_.deleteProperty=function(t,e){return D_.set.call(this,t,e,void 0)};D_.set=function(t,e,n){return hF.set.call(this,t[0],e,n,t[0])};function rI(t,e){const n=t[er];return(n?Xa(n):t)[e]}function nze(t,e,n){const i=Une(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function Une(t,e){if(!(e in t))return;let n=Vy(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Vy(n)}}function $f(t){t.modified_||(t.modified_=!0,t.parent_&&$f(t.parent_))}function aI(t){t.copy_||(t.copy_=VP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ize=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(l=a,...c){return s.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&cc(6),i!==void 0&&typeof i!="function"&&cc(7);let r;if(Ch(e)){const a=w7(this),s=O_(e,void 0);let o=!0;try{r=n(s),o=!1}finally{o?WP(a):qP(a)}return S7(a,i),E7(r,a)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===Nne&&(r=void 0),this.autoFreeze_&&fF(r,!0),i){const a=[],s=[];yg("Patches").generateReplacementPatches_(e,r,a,s),i(a,s)}return r}else cc(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let i,r;return[this.produce(e,n,(s,o)=>{i=s,r=o}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ch(t)||cc(8),Gy(t)&&(t=rze(t));const e=w7(this),n=O_(t,void 0);return n[er].isManual_=!0,qP(e),n}finishDraft(t,e){const n=t&&t[er];(!n||!n.isManual_)&&cc(9);const{scope_:i}=n;return S7(i,e),E7(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=yg("Patches").applyPatches_;return Gy(t)?i(t,e):this.produce(t,r=>i(r,e))}};function O_(t,e){const n=MR(t)?yg("MapSet").proxyMap_(t,e):TR(t)?yg("MapSet").proxySet_(t,e):tze(t,e);return(e?e.scope_:oC()).drafts_.push(n),n}function rze(t){return Gy(t)||cc(10,t),Bne(t)}function Bne(t){if(!Ch(t)||AR(t))return t;const e=t[er];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=VP(t,e.scope_.immer_.useStrictShallowCopy_)}else n=VP(t,!0);return R_(n,(i,r)=>{Lne(n,i,Bne(r))}),e&&(e.finalized_=!1),n}function aze(){class t extends Map{constructor(l,c){super(),this[er]={type_:2,parent_:c,scope_:c?c.scope_:oC(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Xa(this[er]).size}has(l){return Xa(this[er]).has(l)}set(l,c){const u=this[er];return s(u),(!Xa(u).has(l)||Xa(u).get(l)!==c)&&(n(u),$f(u),u.assigned_.set(l,!0),u.copy_.set(l,c),u.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const c=this[er];return s(c),n(c),$f(c),c.base_.has(l)?c.assigned_.set(l,!1):c.assigned_.delete(l),c.copy_.delete(l),!0}clear(){const l=this[er];s(l),Xa(l).size&&(n(l),$f(l),l.assigned_=new Map,R_(l.base_,c=>{l.assigned_.set(c,!1)}),l.copy_.clear())}forEach(l,c){const u=this[er];Xa(u).forEach((f,h,d)=>{l.call(c,this.get(h),h,this)})}get(l){const c=this[er];s(c);const u=Xa(c).get(l);if(c.finalized_||!Ch(u)||u!==c.base_.get(l))return u;const f=O_(u,c);return n(c),c.copy_.set(l,f),f}keys(){return Xa(this[er]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=l.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=l.next();if(c.done)return c;const u=this.get(c.value);return{done:!1,value:[c.value,u]}}}}[Symbol.iterator](){return this.entries()}}function e(o,l){return new t(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class i extends Set{constructor(l,c){super(),this[er]={type_:3,parent_:c,scope_:c?c.scope_:oC(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Xa(this[er]).size}has(l){const c=this[er];return s(c),c.copy_?!!(c.copy_.has(l)||c.drafts_.has(l)&&c.copy_.has(c.drafts_.get(l))):c.base_.has(l)}add(l){const c=this[er];return s(c),this.has(l)||(a(c),$f(c),c.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const c=this[er];return s(c),a(c),$f(c),c.copy_.delete(l)||(c.drafts_.has(l)?c.copy_.delete(c.drafts_.get(l)):!1)}clear(){const l=this[er];s(l),Xa(l).size&&(a(l),$f(l),l.copy_.clear())}values(){const l=this[er];return s(l),a(l),l.copy_.values()}entries(){const l=this[er];return s(l),a(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,c){const u=this.values();let f=u.next();for(;!f.done;)l.call(c,f.value,f.value,this),f=u.next()}}function r(o,l){return new i(o,l)}function a(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(Ch(l)){const c=O_(l,o);o.drafts_.set(l,c),o.copy_.add(c)}else o.copy_.add(l)}))}function s(o){o.revoked_&&cc(3,JSON.stringify(Xa(o)))}Z8e("MapSet",{proxyMap_:e,proxySet_:r})}var Cl=new ize,sze=Cl.produce;Cl.produceWithPatches.bind(Cl);Cl.setAutoFreeze.bind(Cl);Cl.setUseStrictShallowCopy.bind(Cl);Cl.applyPatches.bind(Cl);Cl.createDraft.bind(Cl);Cl.finishDraft.bind(Cl);const oze=t=>(e,n,i)=>(i.setState=(r,a,...s)=>{const o=typeof r=="function"?sze(r):r;return e(o,a,...s)},t(i.setState,n,i)),lze=oze,cze=new URLSearchParams(window.location.search),uze=cze.get("hideViserLogo")!==null,lm={theme:{type:"ThemeConfigurationMessage",titlebar_content:null,control_layout:"floating",control_width:"medium",dark_mode:!1,show_logo:!uze,show_share_button:!0,colors:null},label:"",server:"ws://localhost:8080",shareUrl:null,websocketConnected:!1,backgroundAvailable:!1,showOrbitOriginTool:!1,showOrbitOriginCrosshair:0,guiUuidSetFromContainerUuid:{},modals:[],guiOrderFromUuid:{},guiConfigFromUuid:{},uploadsInProgress:{}};function fze(t){return ke.useState(()=>xS(lze(e=>({...lm,server:t,setTheme:n=>e(i=>{i.theme=n}),setShareUrl:n=>e(i=>{i.shareUrl=n}),addGui:n=>e(i=>{i.guiOrderFromUuid[n.uuid]=n.props.order,i.guiConfigFromUuid[n.uuid]=n,n.container_uuid in i.guiUuidSetFromContainerUuid||(i.guiUuidSetFromContainerUuid[n.container_uuid]={}),i.guiUuidSetFromContainerUuid[n.container_uuid][n.uuid]=!0}),addModal:n=>e(i=>{i.modals.push(n)}),removeModal:n=>e(i=>{i.modals=i.modals.filter(r=>r.uuid!==n)}),removeGui:n=>e(i=>{const r=i.guiConfigFromUuid[n];if(r==null){console.warn("(OK) Tried to remove non-existent component",n);return}delete i.guiUuidSetFromContainerUuid[r.container_uuid][n],delete i.guiOrderFromUuid[n],delete i.guiConfigFromUuid[n],Object.keys(i.guiUuidSetFromContainerUuid[r.container_uuid]).length==0&&delete i.guiUuidSetFromContainerUuid[r.container_uuid]}),resetGui:()=>e(n=>{n.shareUrl=lm.shareUrl,n.guiUuidSetFromContainerUuid=lm.guiUuidSetFromContainerUuid,n.modals=lm.modals,n.guiOrderFromUuid=lm.guiOrderFromUuid,n.guiConfigFromUuid=lm.guiConfigFromUuid,n.uploadsInProgress=lm.uploadsInProgress}),updateUploadState:n=>e(i=>{const{componentId:r,...a}=n;i.uploadsInProgress[r]={...i.uploadsInProgress[r],...a}}),updateGuiProps:(n,i)=>{e(r=>{const a=r.guiConfigFromUuid[n];if(a===void 0){console.error(`Tried to update non-existent component '${n}' with`,i);return}for(const[s,o]of Object.entries(i))s==="value"?r.guiConfigFromUuid[n].value=o:s in a.props?a.props[s]=o:console.error(`Tried to update nonexistent property '${s}' of GUI element ${n}!`)})}}))))[0]}const nT="websocket";function hze(t){const e=new URLSearchParams(window.location.search),n=window.location.host.includes(t.replace("ws://","").replace("/",""))||window.location.host.includes(t.replace("wss://","").replace("/",""));n&&e.has(nT)?e.delete(nT):n||e.set(nT,t),window.history.replaceState(null,"Viser",e.size===0?window.location.href.split("?")[0]:"?"+Array.from(e.entries()).map(([i,r])=>`${i}=${r}`).join("&"))}function dze(t){return new Worker(""+new URL("WebsocketServerWorker-D2t_MxAR.js",import.meta.url).href,{type:"module",name:t?.name})}function pze(){const t=I.useContext(xi),e=t.mutable.current,n=t.useGui(a=>a.server),i=t.useGui(a=>a.resetGui),r=t.sceneTreeActions.resetScene;return hze(n),ke.useEffect(()=>{const a=new dze;a.onmessage=o=>{const l=o.data;l.type==="connected"?(i(),r(),t.useGui.setState({websocketConnected:!0}),e.sendMessage=c=>{s({type:"send",message:c})}):l.type==="closed"?(i(),t.useGui.setState({websocketConnected:!1}),e.sendMessage=c=>{console.log(`Tried to send ${c.type} but websocket is not connected!`)},l.versionMismatch&&_s.show({id:"version-mismatch",title:"Connection rejected",message:`${l.closeReason}.`,color:"red",autoClose:5e3,withCloseButton:!0})):l.type==="message_batch"&&e.messageQueue.push(...l.messages)};function s(o){a.postMessage(o)}return s({type:"set_server",server:n}),()=>{s({type:"close"}),e.sendMessage=o=>console.log(`Tried to send ${o.type} but websocket is not connected!`),t.useGui.setState({websocketConnected:!1})}},[n,i,r]),null}function mze(t){throw new Error("Didn't expect to get here",t)}function Fne(t){let e=null;switch(t){case null:break;case"GitHub":e=ACe;break;case"Description":e=i2e;break;case"Keyboard":e=o2e;break;default:mze(t)}return e}function gze(t){const e=Fne(t.icon);return R.jsx(vs,{component:"a",variant:"default",size:"compact-sm",href:t.href||void 0,target:"_blank",leftSection:e===null?null:R.jsx(e,{size:"1em"}),ml:"xs",color:"gray",children:t.text})}function bze(t){const e=Fne(t.icon);return R.jsx(vs,{m:"sm",component:"a",variant:"default",href:t.href||void 0,target:"_blank",leftSection:e===null?null:R.jsx(e,{size:"1.5em"}),ml:"sm",color:"gray",children:t.text})}function yze(t,e){let n;t.image_url_dark==null||e==="light"?n=t.image_url_light:n=t.image_url_dark;const i=R.jsx("img",{src:n,alt:t.image_alt,style:{height:"1.8em",margin:"0 0.5em"}});return t.href==null?i:R.jsx("a",{style:{display:"block",height:"1.8em"},href:t.href,children:i})}function vze(){const e=I.useContext(xi).useGui(o=>o.theme.titlebar_content),n=tv().colorScheme,[i,r]=wc(!1);if(e==null)return null;const a=e.buttons,s=e.image;return R.jsx(et,{style:{height:"3.2em",margin:0,border:"0",zIndex:10},children:R.jsxs(Ms,{shadow:"0 0 0.8em 0 rgba(0,0,0,0.1)",style:{height:"100%"},children:[R.jsxs(Q4,{fluid:!0,style:()=>({height:"100%",display:"flex",alignItems:"center"}),children:[R.jsx(by,{style:()=>({marginRight:"auto"}),children:s!==null?yze(s,n):null}),R.jsx(by,{display:{base:"none",xs:"flex"},style:()=>({flexWrap:"nowrap",overflowX:"scroll",msOverflowStyle:"none",scrollbarWidth:"none"}),children:a?.map((o,l)=>I.createElement(gze,{...o,key:l}))}),R.jsx(G4,{size:"sm",opened:i,onClick:r.toggle,title:i?"Close navigation":"Open navigation",display:{base:"block",xs:"none"}})]}),R.jsx(w4,{children:R.jsx(Ms,{display:{base:"flex",xs:"none"},radius:"0",style:{flexDirection:"column",position:"absolute",top:"3.2em",zIndex:2e3,height:i?"calc(100vh - 2.375em)":"0",width:"100vw",transition:"all 0.5s",overflow:i?"scroll":"hidden",padding:i?"1rem":"0"},children:a?.map((o,l)=>I.createElement(bze,{...o,key:l}))})})]})})}function xze(){return I.useContext(xi).useGui(i=>i.modals).map((i,r)=>R.jsx(_ze,{conf:i,index:r},i.uuid))}function _ze({conf:t,index:e}){return R.jsx(xo,{opened:!0,title:t.title,onClose:()=>{},withCloseButton:!1,centered:!0,zIndex:100+e,children:R.jsx(sF,{containerUuid:t.uuid})})}const dF={message:{type:"FrameMessage",name:"",props:{show_axes:!1,axes_length:.5,axes_radius:.0125,origin_radius:.025,origin_color:[236,236,0]}},children:["/WorldAxes"],clickable:!1,visibility:!0,wxyz:(()=>{const t=new Hn().setFromEuler(new li(Math.PI/2,Math.PI,-Math.PI/2));return[t.w,t.x,t.y,t.z]})()},zne={message:{type:"FrameMessage",name:"/WorldAxes",props:{show_axes:!0,axes_length:.5,axes_radius:.0125,origin_radius:.025,origin_color:[236,236,0]}},children:[],clickable:!1,visibility:!0};function Sze(t,e){return{addSceneNode:n=>{const i=t.getState(),r=i[n.name],a=n.name.split("/").slice(0,-1).join("/"),s=i[a],o={[n.name]:{...r,message:n,children:r?.children??[],clickable:r?.clickable??!1}};s&&!s.children.includes(n.name)&&(o[a]={...s,children:[...s.children,n.name]}),r&&delete e[n.name],t.setState(o)},removeSceneNode:n=>{const i=t.getState(),r=[];function a(c){r.push(c);const u=i[c];u&&u.children.forEach(a)}a(n);const s={};r.forEach(c=>{s[c]=void 0,delete e[c]});const o=n.split("/").slice(0,-1).join("/"),l=i[o];l&&(s[o]={...l,children:l.children.filter(c=>c!==n)}),t.setState(s)},updateSceneNodeProps:(n,i)=>{const r=t.getState()[n];if(r===void 0)return console.error(`Attempted to update props of non-existent node ${n}`,i),{};t.setState({[n]:{...r,message:{...r.message,props:{...r.message.props,...i}}}})},resetScene:()=>{t.setState({"":dF,"/WorldAxes":zne},!0)},updateNodeAttributes:(n,i)=>{const r=t.getState()[n];if(r===void 0){console.log(`(OK) Attempted to update attributes of non-existent node ${n}`,i);return}t.setState({[n]:{...r,...i}})}}}function wze(t){return ke.useState(()=>{const e=xS(()=>({"":dF,"/WorldAxes":zne})),n=Sze(e,t);return{store:e,actions:n}})[0]}function Eze(){return ke.useState(()=>xS(()=>({enableDefaultLights:!0,enableDefaultLightsShadows:!0,environmentMap:{type:"EnvironmentMapMessage",hdri:"city",background:!1,background_blurriness:0,background_intensity:1,background_wxyz:[1,0,0,0],environment_intensity:1,environment_wxyz:[1,0,0,0]}})))[0]}function Mze(){return ke.useState(()=>{const t=new URLSearchParams(window.location.search),e=t.get("showStats")!==null,n=t.get("fixedDpr"),i=n?parseFloat(n):null,r=t.get("logCamera")!==null;return xS(()=>({showStats:e,fixedDpr:i,logCamera:r,enableOrbitCrosshair:!0}))})[0]}function Vx(t,e,n){return Object.keys(t[e]).reduce((i,r)=>(i[r]=`var(--mantine-${n}-${r})`,i),{})}function T7(t,e){return t in e.breakpoints?e.breakpoints[t]:oN(t)}function Tze(t){const e=oY(UC,t),n=Vx(e,"fontSizes","font-size"),i=Vx(e,"lineHeights","line-height"),r=Vx(e,"shadows","shadow"),a=Vx(e,"radius","radius"),s=Vx(e,"spacing","spacing"),o=Object.keys(e.headings.sizes).reduce((c,u)=>(c[u]={fontSize:`var(--mantine-${u}-font-size)`,lineHeight:`var(--mantine-${u}-line-height)`,fontWeight:`var(--mantine-${u}-font-weight)`},c),{}),l=Object.keys(e.colors).reduce((c,u)=>(c[u]={0:`var(--mantine-color-${u}-0)`,1:`var(--mantine-color-${u}-1)`,2:`var(--mantine-color-${u}-2)`,3:`var(--mantine-color-${u}-3)`,4:`var(--mantine-color-${u}-4)`,5:`var(--mantine-color-${u}-5)`,6:`var(--mantine-color-${u}-6)`,7:`var(--mantine-color-${u}-7)`,8:`var(--mantine-color-${u}-8)`,9:`var(--mantine-color-${u}-9)`,filled:`var(--mantine-color-${u}-filled)`,filledHover:`var(--mantine-color-${u}-filled-hover)`,light:`var(--mantine-color-${u}-light)`,lightHover:`var(--mantine-color-${u}-light-hover)`,lightColor:`var(--mantine-color-${u}-light-color)`,outline:`var(--mantine-color-${u}-outline)`,outlineHover:`var(--mantine-color-${u}-outline-hover)`},c),{primary:"var(--mantine-primary-color-filled)",primaryColors:{0:"var(--mantine-primary-color-0)",1:"var(--mantine-primary-color-1)",2:"var(--mantine-primary-color-2)",3:"var(--mantine-primary-color-3)",4:"var(--mantine-primary-color-4)",5:"var(--mantine-primary-color-5)",6:"var(--mantine-primary-color-6)",7:"var(--mantine-primary-color-7)",8:"var(--mantine-primary-color-8)",9:"var(--mantine-primary-color-9)",filled:"var(--mantine-primary-color-filled)",filledHover:"var(--mantine-primary-color-filled-hover)",light:"var(--mantine-primary-color-light)",lightHover:"var(--mantine-primary-color-light-hover)",lightColor:"var(--mantine-primary-color-light-color)",outline:"var(--mantine-primary-color-outline)",outlineHover:"var(--mantine-primary-color-outline-hover)"},white:"var(--mantine-color-white)",black:"var(--mantine-color-black)",text:"var(--mantine-color-text)",body:"var(--mantine-color-body)",error:"var(--mantine-color-error)",placeholder:"var(--mantine-color-placeholder)",anchor:"var(--mantine-color-anchor)",default:"var(--mantine-color-default)",defaultHover:"var(--mantine-color-default-hover)",defaultColor:"var(--mantine-color-default-color)",defaultBorder:"var(--mantine-color-default-border)",dimmed:"var(--mantine-color-dimmed)",disabledBody:"var(--mantine-color-disabled)",disabledText:"var(--mantine-color-disabled-color)",disabledBorder:"var(--mantine-color-disabled-border)"});return{scale:"var(--mantine-scale)",cursorType:"var(--mantine-cursor-type)",webkitFontSmoothing:"var(--mantine-webkit-font-smoothing)",mozFontSmoothing:"var(--mantine-moz-font-smoothing)",lineHeight:"var(--mantine-line-height)",fontFamily:"var(--mantine-font-family)",fontFamilyMonospace:"var(--mantine-font-family-monospace)",fontFamilyHeadings:"var(--mantine-font-family-headings)",headingFontWeight:"var(--mantine-heading-font-weight)",radiusDefault:"var(--mantine-radius-default)",breakpoints:e.breakpoints,fontSizes:n,lineHeights:i,shadows:r,radius:a,headings:o,spacing:s,colors:l,rtlSelector:'[dir="rtl"] &',darkSelector:'[data-mantine-color-scheme="dark"] &',lightSelector:'[data-mantine-color-scheme="light"] &',smallerThan:c=>`(max-width: ${T7(c,e)})`,largerThan:c=>`(min-width: ${T7(c,e)})`}}const jne={fontFamily:"Inter",autoContrast:!0,components:{Checkbox:Eh.extend({defaultProps:{radius:"xs"}}),ColorInput:ov.extend({defaultProps:{radius:"xs"}}),Select:cv.extend({defaultProps:{radius:"sm"}}),Textarea:KC.extend({defaultProps:{radius:"xs"}}),TextInput:Cg.extend({defaultProps:{radius:"xs"}}),NumberInput:Tg.extend({defaultProps:{radius:"xs"}}),Paper:Ms.extend({defaultProps:{radius:"xs",shadow:"0"}}),ActionIcon:kl.extend({defaultProps:{variant:"subtle",color:"gray",radius:"xs"}}),Button:vs.extend({defaultProps:{radius:"xs",styles:{label:{fontWeight:450}}}})}};Tze(jne);const Aze=new Set(["CameraFrustumMessage","GlbMessage","FrameMessage","BatchedAxesMessage","GridMessage","LabelMessage","Gui3DMessage","PointCloudMessage","DirectionalLightMessage","AmbientLightMessage","HemisphereLightMessage","PointLightMessage","RectAreaLightMessage","SpotLightMessage","MeshMessage","BoxMessage","IcosphereMessage","SkinnedMeshMessage","BatchedMeshesMessage","BatchedGlbMessage","TransformControlsMessage","ImageMessage","LineSegmentsMessage","CatmullRomSplineMessage","CubicBezierSplineMessage","GaussianSplatsMessage"]);function Cze(t){return Aze.has(t.type)}const Rze=new Set(["GuiFolderMessage","GuiMarkdownMessage","GuiHtmlMessage","GuiProgressBarMessage","GuiPlotlyMessage","GuiUplotMessage","GuiImageMessage","GuiTabGroupMessage","GuiButtonMessage","GuiUploadButtonMessage","GuiSliderMessage","GuiMultiSliderMessage","GuiNumberMessage","GuiRgbMessage","GuiRgbaMessage","GuiCheckboxMessage","GuiVector2Message","GuiVector3Message","GuiTextMessage","GuiDropdownMessage","GuiButtonGroupMessage"]);function kze(t){return Rze.has(t.type)}function Dze(){const t=I.useContext(xi),e=t.mutable.current,n=t.sceneTreeActions.updateSceneNodeProps,i=t.sceneTreeActions.removeSceneNode,r=t.sceneTreeActions.addSceneNode,a=t.useGui(y=>y.setTheme),s=t.useGui(y=>y.setShareUrl),o=t.useGui(y=>y.addGui),l=t.useGui(y=>y.addModal),c=t.useGui(y=>y.removeModal),u=t.useGui(y=>y.removeGui),f=t.useGui(y=>y.updateGuiProps),h=t.useGui(y=>y.updateUploadState);function d(y){const v=t.useSceneTree.getState()[y.name],g=t.useSceneTree.getState(),x=y.name.split("/").slice(0,-1).join("/");g[x]?.message===void 0&&(d({...dF.message,name:x}),t.sceneTreeActions.updateNodeAttributes(x,{visibility:!0})),r(y),y!==v?.message&&t.sceneTreeActions.updateNodeAttributes(y.name,{poseUpdateState:"waitForMakeObject"})}const m=Oze();return y=>{if(kze(y)){o(y);return}if(Cze(y)){if(y.type==="SkinnedMeshMessage"){e.skinnedMeshState[y.name]={initialized:!1,poses:[]};const v=new Float32Array(y.props.bone_wxyzs.buffer.slice(y.props.bone_wxyzs.byteOffset,y.props.bone_wxyzs.byteOffset+y.props.bone_wxyzs.byteLength)),g=new Float32Array(y.props.bone_positions.buffer.slice(y.props.bone_positions.byteOffset,y.props.bone_positions.byteOffset+y.props.bone_positions.byteLength));for(let x=0;x<y.props.bone_wxyzs.length;x++)e.skinnedMeshState[y.name].poses.push({wxyz:[v[4*x],v[4*x+1],v[4*x+2],v[4*x+3]],position:[g[3*x],g[3*x+1],g[3*x+2]]})}d(y);return}switch(y.type){case"SceneNodeUpdateMessage":{n(y.name,y.updates);return}case"ShareUrlUpdated":{s(y.share_url);return}case"GetRenderRequestMessage":{e.getRenderRequest=y,e.getRenderRequestState="triggered";return}case"SetGuiPanelLabelMessage":{t.useGui.setState({label:y.label??""});return}case"ThemeConfigurationMessage":{a(y);return}case"RunJavascriptMessage":{new Function(y.source)();return}case"NotificationMessage":{console.log(y.uuid,y.props.loading),(y.mode==="show"?_s.show:_s.update)({id:y.uuid,title:y.props.title,message:y.props.body,withCloseButton:y.props.with_close_button,loading:y.props.loading,autoClose:y.props.auto_close_seconds===null?!1:y.props.auto_close_seconds*1e3,color:nR(y.props.color)});return}case"RemoveNotificationMessage":{_s.hide(y.uuid);return}case"ScenePointerEnableMessage":{e.scenePointerInfo.enabled=y.enable?y.event_type:!1,e.canvas.style.cursor=y.enable?"pointer":"auto";return}case"EnvironmentMapMessage":{t.useEnvironment.setState({environmentMap:y});return}case"EnableLightsMessage":{t.useEnvironment.setState({enableDefaultLights:y.enabled,enableDefaultLightsShadows:y.cast_shadow});return}case"GuiModalMessage":{l(y);return}case"GuiCloseModalMessage":{c(y.uuid);return}case"SetBoneOrientationMessage":{const v=e.skinnedMeshState;v[y.name].poses[y.bone_index].wxyz=y.wxyz;break}case"SetBonePositionMessage":{const v=e.skinnedMeshState;v[y.name].poses[y.bone_index].position=y.position;break}case"SetCameraLookAtMessage":{const v=e.cameraControl,g=ah(t),x=new Y(y.look_at[0],y.look_at[1],y.look_at[2]);x.applyMatrix4(g),v.setTarget(x.x,x.y,x.z,!1);return}case"SetCameraUpDirectionMessage":{const v=e.camera,g=e.cameraControl,x=ah(t),_=new Y(y.position[0],y.position[1],y.position[2]).normalize().applyQuaternion(new Hn().setFromRotationMatrix(x));v.up.set(_.x,_.y,_.z);const E=new Y;g.getPosition(E),g.updateCameraUp(),g.setPosition(E.x,E.y,E.z,!1);return}case"SetCameraPositionMessage":{const v=e.cameraControl,g=new Y(y.position[0],y.position[1],y.position[2]),x=ah(t);g.applyMatrix4(x),v.setPosition(g.x,g.y,g.z);return}case"SetCameraFovMessage":{const v=e.camera;v.setFocalLength(.5*v.getFilmHeight()/Math.tan(y.fov/2)),e.sendCamera!==null&&e.sendCamera();return}case"SetCameraNearMessage":{const v=e.camera;v.near=y.near,v.updateProjectionMatrix();return}case"SetCameraFarMessage":{const v=e.camera;v.far=y.far,v.updateProjectionMatrix();return}case"SetOrientationMessage":{const v=t.useSceneTree.getState()[y.name],g=v?.poseUpdateState!=="waitForMakeObject"?"needsUpdate":v?.poseUpdateState||"needsUpdate";return{targetNode:y.name,updates:{wxyz:y.wxyz,poseUpdateState:g}}}case"SetPositionMessage":{const v=t.useSceneTree.getState()[y.name],g=v?.poseUpdateState!=="waitForMakeObject"?"needsUpdate":v?.poseUpdateState||"needsUpdate";return{targetNode:y.name,updates:{position:y.position,poseUpdateState:g}}}case"SetSceneNodeVisibilityMessage":return{targetNode:y.name,updates:{visibility:y.visible}};case"BackgroundImageMessage":{if(y.rgb_data!==null){const v=URL.createObjectURL(new Blob([y.rgb_data],{type:"image/"+y.format}));new Ny().load(v,g=>{URL.revokeObjectURL(v);const x=e.backgroundMaterial.uniforms.colorMap.value;e.backgroundMaterial.uniforms.colorMap.value=g,fO(x)&&x.dispose()}),e.backgroundMaterial.uniforms.enabled.value=!0}else{const v=e.backgroundMaterial.uniforms.colorMap.value;fO(v)&&v.dispose(),e.backgroundMaterial.uniforms.enabled.value=!1}if(e.backgroundMaterial.uniforms.hasDepth.value=y.depth_data!==null,y.depth_data!==null){const v=URL.createObjectURL(new Blob([y.depth_data],{type:"image/"+y.format}));new Ny().load(v,g=>{URL.revokeObjectURL(v);const x=e.backgroundMaterial?.uniforms.depthMap.value;e.backgroundMaterial.uniforms.depthMap.value=g,fO(x)&&x.dispose()})}return}case"RemoveSceneNodeMessage":{console.log("Removing scene node:",y.name);const v=t.useSceneTree.getState();if(!(y.name in v)){console.log("(OK) Skipping scene node removal for "+y.name);return}i(y.name),e.skinnedMeshState[y.name]!==void 0&&delete e.skinnedMeshState[y.name];return}case"SetSceneNodeClickableMessage":return{targetNode:y.name,updates:{clickable:y.clickable}};case"GuiUpdateMessage":{f(y.uuid,y.updates);return}case"GuiRemoveMessage":{u(y.uuid);return}case"FileTransferStartDownload":case"FileTransferPart":{m(y);return}case"FileTransferPartAck":{h({componentId:y.source_component_uuid,uploadedBytes:y.transferred_bytes,totalBytes:y.total_bytes});return}default:{console.log("Received message did not match any known types:",y);return}}}}function Oze(){const t=ke.useRef({});return e=>{const n="download-"+e.transfer_uuid;switch(e.type){case"FileTransferStartDownload":{let s=e.size_bytes;const o=["B","K","M","G","T","P"];let l=0;for(;s>=100&&l<o.length-1;)s/=1024,l+=1;t.current[e.transfer_uuid]={metadata:e,notificationId:n,parts:[],bytesDownloaded:0,displayFilesize:`${s.toFixed(1)}${o[l]}`};break}case"FileTransferPart":{const s=t.current[e.transfer_uuid];e.part_index!=s.parts.length&&console.error("A file download message was received out of order!"),s.parts.push(e),s.bytesDownloaded+=e.content.length;break}}const i=t.current[e.transfer_uuid],r=100*i.bytesDownloaded/i.metadata.size_bytes,a=i.bytesDownloaded==i.metadata.size_bytes;if((i.bytesDownloaded==0?_s.show:_s.update)({title:(a?"Received ":"Receiving ")+`${i.metadata.filename} (${i.displayFilesize})`,message:R.jsx(pf,{size:"sm",value:r}),id:n,autoClose:a&&i.metadata.save_immediately,withCloseButton:a,loading:!a,icon:a?R.jsx(AB,{}):void 0}),a){const s=window.URL.createObjectURL(new Blob(i.parts.sort((o,l)=>o.part_index-l.part_index).map(o=>o.content),{type:i.metadata.mime_type}));if(i.metadata.save_immediately){const o=document.createElement("a");o.href=s,o.download=i.metadata.filename,o.click(),o.remove(),delete t.current[e.transfer_uuid],URL.revokeObjectURL(s)}else _s.update({id:n,title:"",message:R.jsx(R.Fragment,{children:R.jsx("a",{href:s,download:i.metadata.filename,children:R.jsx(vs,{leftSection:R.jsx($Ce,{size:14}),variant:"light",size:"sm",mt:"0.05em",style:{width:"100%"},children:`${i.metadata.filename} (${i.displayFilesize})`})})}),autoClose:!1,onClose:()=>{URL.revokeObjectURL(s),delete t.current[e.transfer_uuid]}})}}}function Ize(){const t=Dze(),e=I.useContext(xi),n=e.mutable.current,i=n.messageQueue,r=ke.useContext(ES),a=ui(s=>s.gl);return fa(()=>{if(n.getRenderRequestState==="triggered")n.getRenderRequestState="pause";else if(n.getRenderRequestState==="pause"){const s=n.getRenderRequest.position,o=n.getRenderRequest.wxyz,l=n.getRenderRequest.fov,c=n.getRenderRequest.width,u=n.getRenderRequest.height,f=ah(e),h=new Yr(pc.radToDeg(l),c/u,.01,1e3);h.position.set(...s).applyMatrix4(f),h.setRotationFromQuaternion(new Hn(o[1],o[2],o[3],o[0]).premultiply(new Hn().setFromRotationMatrix(f)).multiply(new Hn().setFromAxisAngle(new Y(1,0,0),Math.PI)));const d=r.meshPropsRef.current,m=d!==null?d.sortedIndexAttribute.array.slice():null;r.updateCamera.current!==null&&r.updateCamera.current(h,c,u,!0);const y=a.getSize(new ft),v=a.getClearColor(new Ut),g=a.getClearAlpha();a.setSize(c,u),a.setClearColor(16777215),a.setClearAlpha(n.getRenderRequest.format=="image/png"?0:1),a.render(n.scene,h);const x=a.domElement,_=document.createElement("canvas");_.width=c,_.height=u,_.getContext("2d").drawImage(x,0,0,c,u),a.setSize(y.x,y.y),a.setClearColor(v),a.setClearAlpha(g),m!==null&&d!==null&&(d.sortedIndexAttribute.array=m,d.sortedIndexAttribute.needsUpdate=!0),n.getRenderRequestState="in_progress",_.toBlob(async T=>{n.sendMessage({type:"GetRenderResponseMessage",payload:new Uint8Array(await T.arrayBuffer())}),n.getRenderRequestState="ready"},n.getRenderRequest.format)}if(n.getRenderRequestState==="ready"){const s=i.findIndex(f=>f.type==="GetRenderRequestMessage"),o=s!==-1?s+1:i.length,c=i.splice(0,o).map(t).reduce((f,h)=>h===void 0?f:{...f,[h.targetNode]:{...f[h.targetNode],...h.updates}},{}),u=e.useSceneTree.getState();for(const[f,h]of Object.entries(c)){if(!(f in u)){console.log(`(OK) Tried to update non-existent scene node ${f}`);continue}c[f]={...u[f],...h}}e.useSceneTree.setState(c)}},-1e5),null}new TextEncoder;const Nze=4096;function Hne(t,e,n){let i=e;const r=i+n,a=[];let s="";for(;i<r;){const o=t[i++];if(!(o&128))a.push(o);else if((o&224)===192){const l=t[i++]&63;a.push((o&31)<<6|l)}else if((o&240)===224){const l=t[i++]&63,c=t[i++]&63;a.push((o&31)<<12|l<<6|c)}else if((o&248)===240){const l=t[i++]&63,c=t[i++]&63,u=t[i++]&63;let f=(o&7)<<18|l<<12|c<<6|u;f>65535&&(f-=65536,a.push(f>>>10&1023|55296),f=56320|f&1023),a.push(f)}else a.push(o);a.length>=Nze&&(s+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(s+=String.fromCharCode(...a)),s}const Pze=new TextDecoder,Lze=200;function Uze(t,e,n){const i=t.subarray(e,e+n);return Pze.decode(i)}function Bze(t,e,n){return n>Lze?Uze(t,e,n):Hne(t,e,n)}class EM{constructor(e,n){this.type=e,this.data=n}}class fl extends Error{constructor(e){super(e);const n=Object.create(fl.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:fl.name})}}const Gx=4294967295;function Fze(t,e,n){const i=Math.floor(n/4294967296),r=n;t.setUint32(e,i),t.setUint32(e+4,r)}function Vne(t,e){const n=t.getInt32(e),i=t.getUint32(e+4);return n*4294967296+i}function zze(t,e){const n=t.getUint32(e),i=t.getUint32(e+4);return n*4294967296+i}const jze=-1,Hze=4294967296-1,Vze=17179869184-1;function Gze({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=Vze)if(e===0&&t<=Hze){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,i=t&4294967295,r=new Uint8Array(8),a=new DataView(r.buffer);return a.setUint32(0,e<<2|n&3),a.setUint32(4,i),r}else{const n=new Uint8Array(12),i=new DataView(n.buffer);return i.setUint32(0,e),Fze(i,4,t),n}}function Wze(t){const e=t.getTime(),n=Math.floor(e/1e3),i=(e-n*1e3)*1e6,r=Math.floor(i/1e9);return{sec:n+r,nsec:i-r*1e9}}function qze(t){if(t instanceof Date){const e=Wze(t);return Gze(e)}else return null}function Xze(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),i=e.getUint32(4),r=(n&3)*4294967296+i,a=n>>>2;return{sec:r,nsec:a}}case 12:{const n=Vne(e,4),i=e.getUint32(0);return{sec:n,nsec:i}}default:throw new fl(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function Yze(t){const e=Xze(t);return new Date(e.sec*1e3+e.nsec/1e6)}const $ze={type:jze,encode:qze,decode:Yze};class XP{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register($ze)}register({type:e,encode:n,decode:i}){if(e>=0)this.encoders[e]=n,this.decoders[e]=i;else{const r=-1-e;this.builtInEncoders[r]=n,this.builtInDecoders[r]=i}}tryToEncode(e,n){for(let i=0;i<this.builtInEncoders.length;i++){const r=this.builtInEncoders[i];if(r!=null){const a=r(e,n);if(a!=null){const s=-1-i;return new EM(s,a)}}}for(let i=0;i<this.encoders.length;i++){const r=this.encoders[i];if(r!=null){const a=r(e,n);if(a!=null){const s=i;return new EM(s,a)}}}return e instanceof EM?e:null}decode(e,n,i){const r=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return r?r(e,n,i):new EM(n,e)}}XP.defaultCodec=new XP;function Kze(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function A7(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Kze(t)?new Uint8Array(t):Uint8Array.from(t)}function sI(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Jze=16,Zze=16;class Qze{constructor(e=Jze,n=Zze){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let i=0;i<this.maxKeyLength;i++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,i){const r=this.caches[i-1];e:for(const a of r){const s=a.bytes;for(let o=0;o<i;o++)if(s[o]!==e[n+o])continue e;return a.str}return null}store(e,n){const i=this.caches[e.length-1],r={bytes:e,str:n};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=r:i.push(r)}decode(e,n,i){const r=this.find(e,n,i);if(r!=null)return this.hit++,r;this.miss++;const a=Hne(e,n,i),s=Uint8Array.prototype.slice.call(e,n,n+i);return this.store(s,a),a}}const YP="array",G1="map_key",Gne="map_value",e9e=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new fl("The type of key must be string or number but "+typeof t)};class t9e{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=YP,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=G1,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===YP){const i=e;i.size=0,i.array=void 0,i.position=0,i.type=void 0}if(e.type===G1||e.type===Gne){const i=e;i.size=0,i.map=void 0,i.readCount=0,i.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Wx=-1,pF=new DataView(new ArrayBuffer(0)),n9e=new Uint8Array(pF.buffer);try{pF.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const C7=new RangeError("Insufficient data"),i9e=new Qze;class CR{constructor(e){this.totalPos=0,this.pos=0,this.view=pF,this.bytes=n9e,this.headByte=Wx,this.stack=new t9e,this.entered=!1,this.extensionCodec=e?.extensionCodec??XP.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Gx,this.maxBinLength=e?.maxBinLength??Gx,this.maxArrayLength=e?.maxArrayLength??Gx,this.maxMapLength=e?.maxMapLength??Gx,this.maxExtLength=e?.maxExtLength??Gx,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:i9e,this.mapKeyConverter=e?.mapKeyConverter??e9e}clone(){return new CR({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Wx,this.stack.reset()}setBuffer(e){const n=A7(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Wx&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),i=A7(e),r=new Uint8Array(n.length+i.length);r.set(n),r.set(i,n.length),this.setBuffer(r)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:i}=this;return new RangeError(`Extra ${n.byteLength-i} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,i;for await(const o of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{i=this.doDecodeSync(),n=!0}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return i}const{headByte:r,pos:a,totalPos:s}=this;throw new RangeError(`Insufficient data in parsing ${sI(r)} at ${s} (${a} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let i=n,r=-1;for await(const a of e){if(n&&r===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),i&&(r=this.readArraySize(),i=!1,this.complete());try{for(;yield this.doDecodeSync(),--r!==0;);}catch(s){if(!(s instanceof RangeError))throw s}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const r=e-128;if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(e<160){const r=e-144;if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else{const r=e-160;n=this.decodeString(r,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const r=this.lookU8();n=this.decodeString(r,1)}else if(e===218){const r=this.lookU16();n=this.decodeString(r,2)}else if(e===219){const r=this.lookU32();n=this.decodeString(r,4)}else if(e===220){const r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(e===221){const r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(e===222){const r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(e===223){const r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(e===196){const r=this.lookU8();n=this.decodeBinary(r,1)}else if(e===197){const r=this.lookU16();n=this.decodeBinary(r,2)}else if(e===198){const r=this.lookU32();n=this.decodeBinary(r,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const r=this.lookU8();n=this.decodeExtension(r,1)}else if(e===200){const r=this.lookU16();n=this.decodeExtension(r,2)}else if(e===201){const r=this.lookU32();n=this.decodeExtension(r,4)}else throw new fl(`Unrecognized type byte: ${sI(e)}`);this.complete();const i=this.stack;for(;i.length>0;){const r=i.top();if(r.type===YP)if(r.array[r.position]=n,r.position++,r.position===r.size)n=r.array,i.release(r);else continue e;else if(r.type===G1){if(n==="__proto__")throw new fl("The key __proto__ is not allowed");r.key=this.mapKeyConverter(n),r.type=Gne;continue e}else if(r.map[r.key]=n,r.readCount++,r.readCount===r.size)n=r.map,i.release(r);else{r.key=null,r.type=G1;continue e}}return n}}readHeadByte(){return this.headByte===Wx&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Wx}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new fl(`Unrecognized array type byte: ${sI(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new fl(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new fl(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new fl(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw C7;const i=this.pos+n;let r;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?r=this.keyDecoder.decode(this.bytes,i,e):r=Bze(this.bytes,i,e),this.pos+=n+e,r}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===G1:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new fl(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw C7;const i=this.pos+n,r=this.bytes.subarray(i,i+e);return this.pos+=n+e,r}decodeExtension(e,n){if(e>this.maxExtLength)throw new fl(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const i=this.view.getInt8(this.pos+n),r=this.decodeBinary(e,n+1);return this.extensionCodec.decode(r,i,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=zze(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Vne(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}function r9e(t,e){return new CR(e).decode(t)}function a9e(t){return t[Symbol.asyncIterator]!=null}async function*s9e(t){const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)return;yield i}}finally{e.releaseLock()}}function o9e(t){return a9e(t)?t:s9e(t)}async function l9e(t,e){const n=o9e(t);return new CR(e).decodeAsync(n)}var R7={},c9e=function(t,e,n,i,r){var a=new Worker(R7[e]||(R7[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(s){var o=s.data,l=o.$e$;if(l){var c=new Error(l[0]);c.code=l[1],c.stack=l[2],r(c,null)}else r(null,o)},a.postMessage(n,i),a},po=Uint8Array,Um=Uint16Array,Wne=Int32Array,mF=new po([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gF=new po([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qne=new po([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xne=function(t,e){for(var n=new Um(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new Wne(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r}},Yne=Xne(mF,2),bF=Yne.b,u9e=Yne.r;bF[28]=258,u9e[258]=28;var f9e=Xne(gF,0),$ne=f9e.b,uC=new Um(32768);for(var Nr=0;Nr<32768;++Nr){var pd=(Nr&43690)>>1|(Nr&21845)<<1;pd=(pd&52428)>>2|(pd&13107)<<2,pd=(pd&61680)>>4|(pd&3855)<<4,uC[Nr]=((pd&65280)>>8|(pd&255)<<8)>>1}var iy=function(t,e,n){for(var i=t.length,r=0,a=new Um(e);r<i;++r)t[r]&&++a[t[r]-1];var s=new Um(e);for(r=1;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(n){o=new Um(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=s[t[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)o[uC[f]>>l]=c}else for(o=new Um(i),r=0;r<i;++r)t[r]&&(o[r]=uC[s[t[r]-1]++]>>15-t[r]);return o},IS=new po(288);for(var Nr=0;Nr<144;++Nr)IS[Nr]=8;for(var Nr=144;Nr<256;++Nr)IS[Nr]=9;for(var Nr=256;Nr<280;++Nr)IS[Nr]=7;for(var Nr=280;Nr<288;++Nr)IS[Nr]=8;var Kne=new po(32);for(var Nr=0;Nr<32;++Nr)Kne[Nr]=5;var Jne=iy(IS,9,1),Zne=iy(Kne,5,1),iT=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Kl=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},rT=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Qne=function(t){return(t+7)/8|0},eie=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new po(t.subarray(e,n))},tie=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$a=function(t,e,n){var i=new Error(e||tie[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,$a),!n)throw i;return i},RR=function(t,e,n,i){var r=t.length,a=i?i.length:0;if(!r||e.f&&!e.l)return n||new po(0);var s=!n,o=s||e.i!=2,l=e.i;s&&(n=new po(r*3));var c=function(ct){var At=n.length;if(ct>At){var fe=new po(Math.max(At*2,ct));fe.set(n),n=fe}},u=e.f||0,f=e.p||0,h=e.b||0,d=e.l,m=e.d,y=e.m,v=e.n,g=r*8;do{if(!d){u=Kl(t,f,1);var x=Kl(t,f+1,3);if(f+=3,x)if(x==1)d=Jne,m=Zne,y=9,v=5;else if(x==2){var w=Kl(t,f,31)+257,A=Kl(t,f+10,15)+4,C=w+Kl(t,f+5,31)+1;f+=14;for(var D=new po(C),k=new po(19),P=0;P<A;++P)k[qne[P]]=Kl(t,f+P*3,7);f+=A*3;for(var B=iT(k),H=(1<<B)-1,G=iy(k,B,1),P=0;P<C;){var V=G[Kl(t,f,H)];f+=V&15;var _=V>>4;if(_<16)D[P++]=_;else{var U=0,F=0;for(_==16?(F=3+Kl(t,f,3),f+=2,U=D[P-1]):_==17?(F=3+Kl(t,f,7),f+=3):_==18&&(F=11+Kl(t,f,127),f+=7);F--;)D[P++]=U}}var q=D.subarray(0,w),X=D.subarray(w);y=iT(q),v=iT(X),d=iy(q,y,1),m=iy(X,v,1)}else $a(1);else{var _=Qne(f)+4,E=t[_-4]|t[_-3]<<8,T=_+E;if(T>r){l&&$a(0);break}o&&c(h+E),n.set(t.subarray(_,T),h),e.b=h+=E,e.p=f=T*8,e.f=u;continue}if(f>g){l&&$a(0);break}}o&&c(h+131072);for(var z=(1<<y)-1,ce=(1<<v)-1,he=f;;he=f){var U=d[rT(t,f)&z],$=U>>4;if(f+=U&15,f>g){l&&$a(0);break}if(U||$a(2),$<256)n[h++]=$;else if($==256){he=f,d=null;break}else{var Me=$-254;if($>264){var P=$-257,Se=mF[P];Me=Kl(t,f,(1<<Se)-1)+bF[P],f+=Se}var pe=m[rT(t,f)&ce],xe=pe>>4;pe||$a(3),f+=pe&15;var X=$ne[xe];if(xe>3){var Se=gF[xe];X+=rT(t,f)&(1<<Se)-1,f+=Se}if(f>g){l&&$a(0);break}o&&c(h+131072);var Ne=h+Me;if(h<X){var Ge=a-X,$e=Math.min(X,Ne);for(Ge+h<0&&$a(3);h<$e;++h)n[h]=i[Ge+h]}for(;h<Ne;++h)n[h]=n[h-X]}}e.l=d,e.p=he,e.b=h,e.f=u,d&&(u=1,e.m=y,e.d=m,e.n=v)}while(!u);return h!=n.length&&s?eie(n,0,h):n.subarray(0,h)},h9e=new po(0),d9e=function(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n},k7=function(t,e,n){for(var i=t(),r=t.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<i.length;++s){var o=i[s],l=a[s];if(typeof o=="function"){e+=";"+l+"=";var c=o.toString();if(o.prototype)if(c.indexOf("[native code]")!=-1){var u=c.indexOf(" ",8)+1;e+=c.slice(u,c.indexOf("(",u))}else{e+=c;for(var f in o.prototype)e+=";"+l+".prototype."+f+"="+o.prototype[f].toString()}else e+=c}else n[l]=o}return e},MM=[],p9e=function(t){var e=[];for(var n in t)t[n].buffer&&e.push((t[n]=new t[n].constructor(t[n])).buffer);return e},m9e=function(t,e,n,i){if(!MM[n]){for(var r="",a={},s=t.length-1,o=0;o<s;++o)r=k7(t[o],r,a);MM[n]={c:k7(t[s],r,a),e:a}}var l=d9e({},MM[n].e);return c9e(MM[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",n,l,p9e(l),i)},yF=function(){return[po,Um,Wne,mF,gF,qne,bF,$ne,Jne,Zne,uC,tie,iy,iT,Kl,rT,Qne,eie,$a,RR,aie,kR,vF]},g9e=function(){return[nie,iie]},b9e=function(){return[rie]},kR=function(t){return postMessage(t,[t.buffer])},vF=function(t){return t&&{out:t.size&&new po(t.size),dictionary:t.dictionary}},xF=function(t,e,n,i,r,a){var s=m9e(n,i,r,function(o,l){s.terminate(),a(o,l)});return s.postMessage([t,e],e.consume?[t.buffer]:[]),function(){s.terminate()}},nie=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&$a(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!t[n++]);return n+(e&2)},iie=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},rie=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&$a(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&$a(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function y9e(t,e,n){return n||(n=e,e={}),typeof n!="function"&&$a(7),xF(t,e,[yF],function(i){return kR(aie(i.data[0],vF(i.data[1])))},1,n)}function aie(t,e){return RR(t,{i:2},e&&e.out,e&&e.dictionary)}function v9e(t,e,n){return n||(n=e,e={}),typeof n!="function"&&$a(7),xF(t,e,[yF,g9e,function(){return[D7]}],function(i){return kR(D7(i.data[0],i.data[1]))},3,n)}function D7(t,e){var n=nie(t);return n+8>t.length&&$a(6,"invalid gzip data"),RR(t.subarray(n,-8),{i:2},e&&e.out||new po(iie(t)),e&&e.dictionary)}function x9e(t,e,n){return n||(n=e,e={}),typeof n!="function"&&$a(7),xF(t,e,[yF,b9e,function(){return[O7]}],function(i){return kR(O7(i.data[0],vF(i.data[1])))},5,n)}function O7(t,e){return RR(t.subarray(rie(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function _9e(t,e,n){return n||(n=e,e={}),typeof n!="function"&&$a(7),t[0]==31&&t[1]==139&&t[2]==8?v9e(t,e,n):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?y9e(t,e,n):x9e(t,e,n)}var S9e=typeof TextDecoder<"u"&&new TextDecoder,w9e=0;try{S9e.decode(h9e,{stream:!0}),w9e=1}catch{}async function E9e(t,e){const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch the file: ${n.statusText}`);return new Promise(i=>{const r=parseInt(n.headers.get("Content-Length"));if(typeof DecompressionStream>"u")console.log("DecompressionStream is unavailable. Using fallback."),e({downloaded:.1*r,total:r}),n.arrayBuffer().then(a=>{e({downloaded:.8*r,total:r}),_9e(new Uint8Array(a),(s,o)=>{e({downloaded:1*r,total:r}),i(r9e(o))})});else{let a=0;const s=new TransformStream({transform(o,l){a+=o.length,e({downloaded:a,total:r}),l.enqueue(o)}});l9e(n.body.pipeThrough(s).pipeThrough(new DecompressionStream("gzip"))).then(o=>i(o))}})}function M9e({fileUrl:t}){const e=I.useContext(xi),n=e.mutable.current,i=e.useGui(_=>_.theme.dark_mode),[r,a]=I.useState({downloaded:0,total:0}),[s,o]=I.useState("1x"),[l,c]=I.useState(!1),[u,f]=I.useState(null);function h(){const _=e.useSceneTree.getState();Object.keys(_).forEach(E=>{if(E==="")return;const T=_[E],w=T?.message;w!==void 0&&(w.type!=="FrameMessage"||w.props.show_axes)?e.sceneTreeActions.updateNodeAttributes(E,{visibility:!1,wxyz:[1,0,0,0],position:[0,0,0]}):T!==void 0&&e.sceneTreeActions.updateNodeAttributes(E,{wxyz:[1,0,0,0],position:[0,0,0]})})}const[d,m]=I.useState(0),y=Da();I.useEffect(()=>{E9e(t,a).then(_=>{console.log("File loaded! Saved with Viser version:",_.viserVersion),f(_)})},[]);const v=I.useRef({currentTime:0,currentIndex:0}),g=I.useCallback(()=>{if(u===null)return;const _=v.current;for(_.currentIndex==0&&h();_.currentIndex<u.messages.length&&u.messages[_.currentIndex][0]<=_.currentTime;_.currentIndex++){const E=u.messages[_.currentIndex][1];n.messageQueue.push(E)}_.currentTime>=u.durationSeconds&&(_.currentIndex=0,_.currentTime=u.messages[0][0]),m(_.currentTime)},[u]);I.useEffect(()=>{const _=parseFloat(s);if(u!==null&&!l){let E=Date.now();const T=setInterval(()=>{const w=Date.now();v.current.currentTime+=(w-E)/1e3*_,E=w,g(),v.current.currentIndex===u.messages.length&&u.durationSeconds===0&&clearInterval(T)},1e3/120);return()=>clearInterval(T)}},[g,u,l,s,n.messageQueue,m]),I.useEffect(()=>{function _(E){E.code==="Space"&&c(!l)}return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[l]);const x=I.useCallback(_=>{_<v.current.currentTime&&(h(),v.current.currentIndex=0),v.current.currentTime=_,m(_),c(!0),g()},[u]);return u===null?R.jsx("div",{style:{position:"fixed",zIndex:1,top:0,bottom:0,left:0,right:0,backgroundColor:i?y.colors.dark[9]:"#fff"},children:R.jsx(pf,{value:r.downloaded/r.total*100,radius:0,transitionDuration:0})}):R.jsxs(Ms,{radius:"xs",shadow:"0.1em 0 1em 0 rgba(0,0,0,0.1)",style:{position:"fixed",bottom:"1em",left:"50%",transform:"translateX(-50%)",width:"25em",maxWidth:"95%",zIndex:1,padding:"0.5em",display:u.durationSeconds===0?"none":"flex",alignItems:"center",justifyContent:"space-between",gap:"0.375em"},children:[R.jsx(kl,{size:"md",variant:"subtle",onClick:()=>c(!l),children:l?R.jsx(T2e,{height:"1.125em",width:"1.125em"}):R.jsx(E2e,{height:"1.125em",width:"1.125em"})}),R.jsx(Tg,{size:"xs",hideControls:!0,value:d.toFixed(1),step:.01,styles:{wrapper:{width:"3.1em"},input:{padding:"0.2em",fontFamily:y.fontFamilyMonospace,textAlign:"center"}},onChange:_=>x(typeof _=="number"?_:parseFloat(_))}),R.jsx(c2,{thumbSize:0,radius:"xs",step:1e-4,style:{flexGrow:1},min:0,max:u.durationSeconds,value:d,onChange:x,styles:{thumb:{display:"none"}}}),R.jsx(Cr,{zIndex:10,label:"Playback speed",withinPortal:!0,children:R.jsx(cv,{size:"xs",value:s,onChange:_=>_===null?null:o(_),radius:"xs",data:["0.5x","1x","2x","4x","8x"],styles:{wrapper:{width:"3.25em"}},comboboxProps:{zIndex:5,width:"5.25em"}})})]})}var I7=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))},T9e=function(){function t(e,n,i){this.name=e,this.version=n,this.os=i,this.type="browser"}return t}(),A9e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),C9e=function(){function t(e,n,i,r){this.name=e,this.version=n,this.os=i,this.bot=r,this.type="bot-device"}return t}(),R9e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),k9e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),D9e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,O9e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,N7=3,I9e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",D9e]],P7=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function N9e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new k9e:typeof navigator<"u"?L9e(navigator.userAgent):B9e()}function P9e(t){return t!==""&&I9e.reduce(function(e,n){var i=n[0],r=n[1];if(e)return e;var a=r.exec(t);return!!a&&[i,a]},!1)}function L9e(t){var e=P9e(t);if(!e)return null;var n=e[0],i=e[1];if(n==="searchbot")return new R9e;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<N7&&(r=I7(I7([],r,!0),F9e(N7-r.length),!0)):r=[];var a=r.join("."),s=U9e(t),o=O9e.exec(t);return o&&o[1]?new C9e(n,a,s,o[1]):new T9e(n,a,s)}function U9e(t){for(var e=0,n=P7.length;e<n;e++){var i=P7[e],r=i[0],a=i[1],s=a.exec(t);if(s)return r}return null}function B9e(){var t=typeof process<"u"&&process.version;return t?new A9e(process.version.slice(1)):null}function F9e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}function z9e(){return I.useEffect(()=>{const t=N9e();if(t===null||t.version===null)console.log("Failed to detect browser"),_s.show({title:"Could not detect browser version",message:"Your browser version could not be detected. It may not be supported.",autoClose:!1,color:"red"});else{const e=parseFloat(t.version);console.log(`Detected ${t.name} version ${e}`),(t.name==="chrome"&&e<91||t.name==="edge"&&e<91||t.name==="firefox"&&e<89||t.name==="opera"&&e<77||t.name==="safari"&&e<16.4)&&_s.show({title:"Unsuppported browser",message:`Your browser (${t.name.slice(0,1).toUpperCase()+t.name.slice(1)}/${t.version}) is outdated, which may cause problems. Consider updating.`,autoClose:!1,color:"red"})}}),null}function L7({children:t,title:e,width:n,height:i,fill:r=!1}){return R.jsxs("div",{style:{width:r?"100vw":`${n}px`,height:r?"100vh":`${i}px`,borderRadius:"10px",overflow:"hidden",border:"1px solid rgba(0,0,0,0.2)",backgroundColor:"white",transform:"translateX(-50%) translateY(-50%)",top:"50%",left:"50%",position:"absolute"},children:[R.jsxs("div",{style:{height:"36px",backgroundColor:"#f6f6f6",borderBottom:"1px solid rgba(0,0,0,0.075)",display:"flex",alignItems:"center",paddingLeft:"12px",gap:"8px"},children:[R.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ff5f57"}}),R.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#febc2e"}}),R.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#28c840"}}),R.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",color:"#000",opacity:.4,fontSize:"14px",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",fontWeight:500},children:e})]}),R.jsx("div",{style:{height:"calc(100% - 36px)"},children:t})]})}const j9e="1.0.6",U7=[{login:"brentyi",html_url:"https://github.com/brentyi"},{login:"chungmin99",html_url:"https://github.com/chungmin99"},{login:"kerrj",html_url:"https://github.com/kerrj"},{login:"tancik",html_url:"https://github.com/tancik"},{login:"jonahbedouch",html_url:"https://github.com/jonahbedouch"},{login:"hangg7",html_url:"https://github.com/hangg7"},{login:"BrianSantoso",html_url:"https://github.com/BrianSantoso"},{login:"origamiman72",html_url:"https://github.com/origamiman72"},{login:"ginazhouhuiwu",html_url:"https://github.com/ginazhouhuiwu"},{login:"sea-bass",html_url:"https://github.com/sea-bass"},{login:"ethanweber",html_url:"https://github.com/ethanweber"},{login:"jkulhanek",html_url:"https://github.com/jkulhanek"},{login:"AdamRashid96",html_url:"https://github.com/AdamRashid96"},{login:"vye16",html_url:"https://github.com/vye16"},{login:"beckyfeng08",html_url:"https://github.com/beckyfeng08"},{login:"zerolover",html_url:"https://github.com/zerolover"},{login:"slecleach",html_url:"https://github.com/slecleach"},{login:"pritzza",html_url:"https://github.com/pritzza"},{login:"yzslab",html_url:"https://github.com/yzslab"},{login:"kikislater",html_url:"https://github.com/kikislater"},{login:"simonbethke",html_url:"https://github.com/simonbethke"},{login:"MosesEbere",html_url:"https://github.com/MosesEbere"},{login:"nlml",html_url:"https://github.com/nlml"},{login:"kdexd",html_url:"https://github.com/kdexd"},{login:"ojh6404",html_url:"https://github.com/ojh6404"},{login:"hongsukchoi",html_url:"https://github.com/hongsukchoi"},{login:"mcallisterdavid",html_url:"https://github.com/mcallisterdavid"},{login:"cvachha",html_url:"https://github.com/cvachha"},{login:"ArthurAllshire",html_url:"https://github.com/ArthurAllshire"},{login:"Alescontrela",html_url:"https://github.com/Alescontrela"},{login:"alberthli",html_url:"https://github.com/alberthli"},{login:"atonderski",html_url:"https://github.com/atonderski"}];function $P(t,e){const n=new ft;return n.x=2*((e[0]+.5)/t.mutable.current.canvas.clientWidth)-1,n.y=1-2*((e[1]+.5)/t.mutable.current.canvas.clientHeight),n.x<1&&n.x>-1&&n.y<1&&n.y>-1?n:null}function KP(t,e){const n=new ft;return n.x=(e[0]+.5)/t.mutable.current.canvas.clientWidth,n.y=(e[1]+.5)/t.mutable.current.canvas.clientHeight,n}const H9e=()=>{let t=window.location.href;return t=t.replace("http://","ws://"),t=t.replace("https://","wss://"),t=t.split("?")[0],t.endsWith("/")&&(t=t.slice(0,-1)),t},V9e=()=>fa(()=>null,1e3);function G9e(){const t=new URLSearchParams(window.location.search),e=t.get("dummyWindowDimensions"),n=t.get("dummyWindowTitle")??"localhost:8080",i=R.jsx("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column"},children:R.jsx(W9e,{})});if(!e)return i;if(e==="fill")return R.jsx(L7,{title:n,width:window.innerWidth,height:window.innerHeight,fill:!0,children:i});const[r,a]=e.split("x").map(Number);return isNaN(r)||isNaN(a)?i:R.jsx(L7,{title:n,width:r,height:a,children:i})}function W9e(){const t=new URLSearchParams(window.location.search).getAll(nT),e=t.length>=1?t[0]:H9e(),n=new URLSearchParams(window.location.search),i=n.get("playbackPath"),r=n.get("darkMode")!==null,a=i===null?"websocket":"file_playback",s={},o=ke.useRef({sendMessage:i==null?h=>console.log(`Tried to send ${h.type} but websocket is not connected!`):()=>null,sendCamera:null,resetCameraView:null,canvas:null,canvas2d:null,scene:null,camera:null,backgroundMaterial:null,cameraControl:null,nodeRefFromName:s,messageQueue:[],getRenderRequestState:"ready",getRenderRequest:null,scenePointerInfo:{enabled:!1,dragStart:[0,0],dragEnd:[0,0],isDragging:!1},skinnedMeshState:{},hoveredElementsCount:0}),l=wze(o.current.nodeRefFromName),c=Eze(),u=Mze(),f={messageSource:a,useSceneTree:l.store,sceneTreeActions:l.actions,useEnvironment:c,useGui:fze(e),useDevSettings:u,mutable:o};return r&&(f.useGui.getState().theme.dark_mode=r),R.jsx(xi.Provider,{value:f,children:R.jsxs(q9e,{children:[a==="websocket"&&R.jsx(pze,{}),a==="file_playback"&&R.jsx(M9e,{fileUrl:i})]})})}function q9e({children:t}){const e=ke.useContext(xi),n=e.useGui(u=>u.theme.dark_mode),i=e.useGui(u=>u.theme.colors),r=e.useGui(u=>u.theme.control_layout),a=e.useGui(u=>u.theme.show_logo),s=e.useDevSettings(u=>u.showStats),{messageSource:o}=e,l=I.useMemo(()=>({...jne,...i===null?{}:{colors:{custom:i},primaryColor:"custom"}}),[i]),c=I.useMemo(()=>R.jsxs(R.Fragment,{children:[R.jsx(e5e,{}),R.jsx($9e,{children:R.jsx(Ize,{})})]}),[]);return R.jsx(R.Fragment,{children:R.jsxs(fY,{theme:l,defaultColorScheme:n?"dark":"light",colorSchemeManager:{get:u=>u,set:()=>null,subscribe:()=>null,unsubscribe:()=>null,clear:()=>null},children:[t,R.jsx(X9e,{darkMode:n}),R.jsx(Y9e,{}),R.jsx(z9e,{}),R.jsx(xze,{}),R.jsxs(et,{style:{width:"100%",height:"100%",display:"flex",position:"relative",flexDirection:"column"},children:[R.jsx(vze,{}),R.jsxs(et,{style:{width:"100%",position:"relative",flexGrow:1,overflow:"hidden",display:"flex"},children:[R.jsxs(et,{style:u=>({backgroundColor:n?u.colors.dark[9]:"#fff",flexGrow:1,overflow:"hidden",height:"100%"}),children:[c,a&&o==="websocket"&&R.jsx(i5e,{})]}),o==="websocket"&&R.jsx(D8e,{control_layout:r})]})]}),s&&R.jsx(GMe,{className:"stats-panel"})]})})}function X9e(t){const e=tv();return I.useEffect(()=>{e.setColorScheme(t.darkMode?"dark":"light")},[t.darkMode]),null}function Y9e(){return R.jsx(Ih,{position:"top-left",limit:10,containerWidth:"20em",withinPortal:!1,styles:{root:{boxShadow:"0.1em 0 1em 0 rgba(0,0,0,0.1) !important",position:"absolute",top:"1em",left:"1em",pointerEvents:"none"},notification:{pointerEvents:"all"}}})}function $9e({children:t}){const e=ke.useContext(xi),n=tR(20).send,i=Da(),{ref:r,inView:a}=nle(),s=I.useMemo(()=>R.jsx(HAe,{}),[]),o=h=>{const{mutable:d}=e,m=d.current.scenePointerInfo;if(m.enabled===!1)return;const y=d.current.canvas.getBoundingClientRect();if(m.dragStart=[h.clientX-y.left,h.clientY-y.top],m.dragEnd=m.dragStart,$P(e,m.dragEnd)===null||m.isDragging)return;m.isDragging=!0,d.current.cameraControl.enabled=!1;const v=d.current.canvas2d.getContext("2d");v.clearRect(0,0,v.canvas.width,v.canvas.height)},l=h=>{const{mutable:d}=e,m=d.current.scenePointerInfo;if(m.enabled===!1||!m.isDragging)return;const y=d.current.canvas.getBoundingClientRect(),v=[h.clientX-y.left,h.clientY-y.top];if($P(e,v)!==null&&(m.dragEnd=v,!(Math.abs(m.dragEnd[0]-m.dragStart[0])<=3&&Math.abs(m.dragEnd[1]-m.dragStart[1])<=3)&&m.enabled==="rect-select")){const g=d.current.canvas2d.getContext("2d");g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.fillStyle=i.primaryColor,g.strokeStyle="blue",g.globalAlpha=.2,g.fillRect(m.dragStart[0],m.dragStart[1],m.dragEnd[0]-m.dragStart[0],m.dragEnd[1]-m.dragStart[1]),g.globalAlpha=1,g.stroke()}},c=()=>{const{mutable:h}=e,d=h.current.scenePointerInfo;if(h.current.cameraControl.enabled=!0,d.enabled===!1||!d.isDragging)return;const m=h.current.canvas2d.getContext("2d");m.clearRect(0,0,m.canvas.width,m.canvas.height),d.enabled==="click"?K9e(e,d.dragEnd,n):d.enabled==="rect-select"&&J9e(e,d,n),d.isDragging=!1},u=e.useDevSettings(h=>h.fixedDpr),f=ke.useMemo(()=>R.jsxs(eAe,{firstHitOnly:!0,children:[R.jsx(t5e,{}),R.jsx(n5e,{}),s,R.jsxs(oCe,{children:[R.jsx(Q9e,{}),t,R.jsx(une,{name:""})]}),R.jsx(Z9e,{})]}),[t,s]);return R.jsx("div",{ref:r,style:{position:"relative",zIndex:0,width:"100%",height:"100%"},children:R.jsxs(uEe,{camera:{position:[-3,3,-3],near:.01,far:1e3},gl:{preserveDrawingBuffer:!0},style:{width:"100%",height:"100%"},ref:h=>e.mutable.current.canvas=h,onPointerDown:o,onPointerMove:l,onPointerUp:c,shadows:!0,dpr:u??void 0,children:[!a&&R.jsx(V9e,{}),f]})})}function K9e(t,e,n){const i=new pS,r=$P(t,e);if(r===null)return;i.setFromCamera(r,t.mutable.current.camera);const a=UQ(t,i.ray),s=KP(t,e);n({type:"ScenePointerMessage",event_type:"click",ray_origin:[a.origin.x,a.origin.y,a.origin.z],ray_direction:[a.direction.x,a.direction.y,a.direction.z],screen_pos:[[s.x,s.y]]})}function J9e(t,e,n){const i=KP(t,e.dragStart),r=KP(t,e.dragEnd),a=Math.min(i.x,r.x),s=Math.max(i.x,r.x),o=Math.min(i.y,r.y),l=Math.max(i.y,r.y);n({type:"ScenePointerMessage",event_type:"rect-select",ray_origin:null,ray_direction:null,screen_pos:[[a,o],[s,l]]})}function Z9e(){const t=ke.useContext(xi),e=t.useEnvironment(s=>s.enableDefaultLights),n=t.useEnvironment(s=>s.enableDefaultLightsShadows),i=t.useEnvironment(s=>s.environmentMap),r=t.useSceneTree(s=>s[""]?.wxyz??[1,0,0,0]),a=I.useMemo(()=>{if(i.hdri===null)return null;const s={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},o=new Hn(r[1],r[2],r[3],r[0]),l=o.clone().invert(),c=new li().setFromQuaternion(new Hn(i.background_wxyz[1],i.background_wxyz[2],i.background_wxyz[3],i.background_wxyz[0]).premultiply(o).multiply(l)),u=new li().setFromQuaternion(new Hn(i.environment_wxyz[1],i.environment_wxyz[2],i.environment_wxyz[3],i.environment_wxyz[0]).premultiply(o).multiply(l));return R.jsx(xAe,{files:`hdri/${s[i.hdri]}`,background:i.background,backgroundBlurriness:i.background_blurriness,backgroundIntensity:i.background_intensity,backgroundRotation:c,environmentIntensity:i.environment_intensity,environmentRotation:u})},[i,r]);return e?R.jsxs(R.Fragment,{children:[R.jsx(IP,{fade:!0,lightIntensity:3,position:[-.2,1,-.2],cascades:3,color:16777215,maxFar:20,mode:"practical",shadowBias:-1e-4,castShadow:n}),R.jsx(IP,{color:16777215,lightIntensity:.4,position:[0,-1,0],castShadow:!1}),a]}):a}function Q9e(){const t=ke.useContext(xi),e=ui(i=>i.setDpr);return t.useDevSettings(i=>i.fixedDpr)!==null?null:R.jsx(SAe,{factor:1,step:.2,bounds:i=>{const r=Math.min(i*.75,85);return[Math.max(r*.5,38),r]},onChange:({factor:i,fps:r,refreshrate:a})=>{const s=window.devicePixelRatio*(.2+.8*i);console.log(`[Performance] Setting DPR to ${s}; FPS=${r}/${a}`),e(s)}})}function e5e(){const t=ke.useContext(xi);return I.useEffect(()=>{const e=t.mutable.current.canvas2d,n=new ResizeObserver(i=>{const{width:r,height:a}=i[0].contentRect;e.width=r,e.height=a});return n.observe(e),()=>n.disconnect()},[]),R.jsx("canvas",{ref:e=>t.mutable.current.canvas2d=e,style:{position:"absolute",zIndex:1,width:"100%",height:"100%",pointerEvents:"none"}})}function t5e(){const t=I.useMemo(()=>({vert:`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
    `,frag:`
    #include <packing>
    precision highp float;
    precision highp int;

    varying vec2 vUv;
    uniform sampler2D colorMap;
    uniform sampler2D depthMap;
    uniform float cameraNear;
    uniform float cameraFar;
    uniform bool enabled;
    uniform bool hasDepth;

    float readDepth(sampler2D depthMap, vec2 coord) {
      vec4 rgbPacked = texture(depthMap, coord);
      // Important: BGR format, because buffer was encoded using OpenCV.
      float depth = rgbPacked.b * 0.00255 + rgbPacked.g * 0.6528 + rgbPacked.r * 167.1168;
      return depth;
    }

    void main() {
      if (!enabled) {
        discard;
      }
      vec4 color = texture(colorMap, vUv);
      gl_FragColor = vec4(color.rgb, 1.0);

      float bufDepth;
      if(hasDepth){
        float depth = readDepth(depthMap, vUv);
        bufDepth = viewZToPerspectiveDepth(-depth, cameraNear, cameraFar);
      } else {
        bufDepth = 1.0;
      }
      gl_FragDepth = bufDepth;
    }
    `}),[]),e=I.useMemo(()=>new is({fragmentShader:t.frag,vertexShader:t.vert,uniforms:{enabled:{value:!1},depthMap:{value:null},colorMap:{value:null},cameraNear:{value:null},cameraFar:{value:null},hasDepth:{value:!1}}}),[t]),{mutable:n}=ke.useContext(xi);n.current.backgroundMaterial=e;const i=ke.useRef(null);return fa(({camera:r})=>{if(!(r instanceof Yr)){console.error("Camera is not a perspective camera, cannot render background image.");return}const a=i.current,s=r.getWorldDirection(new Y);a.position.copy(r.position).addScaledVector(s,1),a.quaternion.copy(r.quaternion);const o=r.getFocalLength();a.scale.set(r.getFilmWidth()/o,r.getFilmHeight()/o,1),e.uniforms.cameraNear.value=r.near,e.uniforms.cameraFar.value=r.far}),R.jsx("mesh",{ref:i,material:e,children:R.jsx("planeGeometry",{attach:"geometry",args:[1,1]})})}function n5e(){const{mutable:t}=ke.useContext(xi);return t.current.scene=ui(e=>e.scene),t.current.camera=ui(e=>e.camera),null}function i5e(){const[t,{open:e,close:n}]=wc(!1);return R.jsxs(R.Fragment,{children:[R.jsx(Cr,{label:`Viser ${j9e}`,children:R.jsx(et,{style:{position:"absolute",bottom:"1em",left:"1em",cursor:"pointer"},component:"a",onClick:e,title:"About Viser",children:R.jsx(iS,{src:"./logo.svg",style:{width:"2.5em",height:"auto"}})})}),R.jsxs(xo,{opened:t,onClose:n,withCloseButton:!1,size:"xl",style:{textAlign:"center"},trapFocus:!1,children:[R.jsx(et,{pt:"lg",pb:"xs",children:"Viser is a 3D visualization toolkit developed at UC Berkeley."}),R.jsxs(et,{pb:"lg",children:[R.jsx(qm,{href:"https://viser.studio/main",target:"_blank",style:{fontWeight:"600"},children:"Documentation"}),"  •  ",R.jsx(qm,{href:"https://github.com/nerfstudio-project/viser",target:"_blank",style:{fontWeight:"600"},children:"GitHub"})]}),R.jsx(Mg,{}),R.jsxs(et,{style:{textAlign:"left",maxHeight:"120px",overflowY:"auto",lineHeight:"1",fontSize:"0.8rem",opacity:"0.75"},px:"md",pt:"sm",children:["Thanks to our contributors!"," ",U7.map((i,r)=>R.jsxs("span",{children:[R.jsx(qm,{href:i.html_url,target:"_blank",style:{textDecoration:"none",fontSize:"0.75rem"},children:i.login}),r<U7.length-1&&", "]},i.login))]})]})]})}aze();Koe.createRoot(document.getElementById("root")).render(R.jsx(G9e,{}));
